if (window.FR == null) {window.FR = {};}FR.servletURL = '/demo/ReportServer';FR.serverURL = 'http://www.finereporthelp.com:8889';FR.server = 'http://www.finereporthelp.com:8889/demo';FR.PROJECTNAME = '';FR.shouldSendHeartBeat = true;(function(){var v=this;var k=v._;var I=Array.prototype,g=Object.prototype,n=Function.prototype;var L=I.push,l=I.slice,c=g.toString,j=g.hasOwnProperty;var s=Array.isArray,e=Object.keys,J=n.bind,B=Object.create;var E=function(){};var P=function(Q){if(Q instanceof P){return Q}if(!(this instanceof P)){return new P(Q)}this._wrapped=Q};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=P}exports._=P}else{v._=P}P.VERSION="1.8.3";var b=function(R,Q,S){if(Q===void 0){return R
}switch(S==null?3:S){case 1:return function(T){return R.call(Q,T)};case 2:return function(U,T){return R.call(Q,U,T)};case 3:return function(U,T,V){return R.call(Q,U,T,V)};case 4:return function(T,V,U,W){return R.call(Q,T,V,U,W)}}return function(){return R.apply(Q,arguments)}};var F=function(R,Q,S){if(R==null){return P.identity}if(P.isFunction(R)){return b(R,Q,S)}if(P.isObject(R)){return P.matcher(R)}return P.property(R)};P.iteratee=function(R,Q){return F(R,Q,Infinity)};var p=function(R,Q){return function(Z){var X=arguments.length;
if(X<2||Z==null){return Z}for(var T=1;T<X;T++){var Y=arguments[T],W=R(Y),S=W.length;for(var V=0;V<S;V++){var U=W[V];if(!Q||Z[U]===void 0){Z[U]=Y[U]}}}return Z}};var C=function(R){if(!P.isObject(R)){return{}}if(B){return B(R)}E.prototype=R;var Q=new E;E.prototype=null;return Q};var M=function(Q){return function(R){return R==null?void 0:R[Q]}};var K=Math.pow(2,53)-1;var O=M("length");var D=function(R){var Q=O(R);return typeof Q=="number"&&Q>=0&&Q<=K};P.each=P.forEach=function(U,V,R){V=b(V,R);var Q,T;
if(D(U)){for(Q=0,T=U.length;Q<T;Q++){V(U[Q],Q,U)}}else{var S=P.keys(U);for(Q=0,T=S.length;Q<T;Q++){V(U[S[Q]],S[Q],U)}}return U};P.map=P.collect=function(V,X,S){X=F(X,S);var U=!D(V)&&P.keys(V),T=(U||V).length,R=Array(T);for(var Q=0;Q<T;Q++){var W=U?U[Q]:Q;R[Q]=X(V[W],W,V)}return R};function z(Q){function R(W,Y,S,V,T,U){for(;T>=0&&T<U;T+=Q){var X=V?V[T]:T;S=Y(S,W[X],X,W)}return S}return function(X,Y,S,U){Y=b(Y,U,4);var W=!D(X)&&P.keys(X),V=(W||X).length,T=Q>0?0:V-1;if(arguments.length<3){S=X[W?W[T]:T];
T+=Q}return R(X,Y,S,W,T,V)}}P.reduce=P.foldl=P.inject=z(1);P.reduceRight=P.foldr=z(-1);P.find=P.detect=function(T,Q,S){var R;if(D(T)){R=P.findIndex(T,Q,S)}else{R=P.findKey(T,Q,S)}if(R!==void 0&&R!==-1){return T[R]}};P.filter=P.select=function(T,Q,S){var R=[];Q=F(Q,S);P.each(T,function(W,U,V){if(Q(W,U,V)){R.push(W)}});return R};P.reject=function(S,Q,R){return P.filter(S,P.negate(F(Q)),R)};P.every=P.all=function(V,Q,S){Q=F(Q,S);var U=!D(V)&&P.keys(V),T=(U||V).length;for(var R=0;R<T;R++){var W=U?U[R]:R;
if(!Q(V[W],W,V)){return false}}return true};P.some=P.any=function(V,Q,S){Q=F(Q,S);var U=!D(V)&&P.keys(V),T=(U||V).length;for(var R=0;R<T;R++){var W=U?U[R]:R;if(Q(V[W],W,V)){return true}}return false};P.contains=P.includes=P.include=function(T,S,Q,R){if(!D(T)){T=P.values(T)}if(typeof Q!="number"||R){Q=0}return P.indexOf(T,S,Q)>=0};P.invoke=function(S,T){var Q=l.call(arguments,2);var R=P.isFunction(T);return P.map(S,function(V){var U=R?T:V[T];return U==null?U:U.apply(V,Q)})};P.pluck=function(R,Q){return P.map(R,P.property(Q))
};P.where=function(R,Q){return P.filter(R,P.matcher(Q))};P.findWhere=function(R,Q){return P.find(R,P.matcher(Q))};P.max=function(T,V,Q){var Y=-Infinity,W=-Infinity,X,S;if(V==null&&T!=null){T=D(T)?T:P.values(T);for(var U=0,R=T.length;U<R;U++){X=T[U];if(X>Y){Y=X}}}else{V=F(V,Q);P.each(T,function(ab,Z,aa){S=V(ab,Z,aa);if(S>W||S===-Infinity&&Y===-Infinity){Y=ab;W=S}})}return Y};P.min=function(T,V,Q){var Y=Infinity,W=Infinity,X,S;if(V==null&&T!=null){T=D(T)?T:P.values(T);for(var U=0,R=T.length;U<R;U++){X=T[U];
if(X<Y){Y=X}}}else{V=F(V,Q);P.each(T,function(ab,Z,aa){S=V(ab,Z,aa);if(S<W||S===Infinity&&Y===Infinity){Y=ab;W=S}})}return Y};P.shuffle=function(U){var V=D(U)?U:P.values(U);var T=V.length;var Q=Array(T);for(var R=0,S;R<T;R++){S=P.random(0,R);if(S!==R){Q[R]=Q[S]}Q[S]=V[R]}return Q};P.sample=function(R,S,Q){if(S==null||Q){if(!D(R)){R=P.values(R)}return R[P.random(R.length-1)]}return P.shuffle(R).slice(0,Math.max(0,S))};P.sortBy=function(R,S,Q){S=F(S,Q);return P.pluck(P.map(R,function(V,T,U){return{value:V,index:T,criteria:S(V,T,U)}
}).sort(function(W,V){var U=W.criteria;var T=V.criteria;if(U!==T){if(U>T||U===void 0){return 1}if(U<T||T===void 0){return -1}}return W.index-V.index}),"value")};var q=function(Q){return function(T,U,S){var R={};U=F(U,S);P.each(T,function(X,V){var W=U(X,V,T);Q(R,X,W)});return R}};P.groupBy=q(function(Q,S,R){if(P.has(Q,R)){Q[R].push(S)}else{Q[R]=[S]}});P.indexBy=q(function(Q,S,R){Q[R]=S});P.countBy=q(function(Q,S,R){if(P.has(Q,R)){Q[R]++}else{Q[R]=1}});P.toArray=function(Q){if(!Q){return[]}if(P.isArray(Q)){return l.call(Q)
}if(D(Q)){return P.map(Q,P.identity)}return P.values(Q)};P.size=function(Q){if(Q==null){return 0}return D(Q)?Q.length:P.keys(Q).length};P.partition=function(U,Q,S){Q=F(Q,S);var T=[],R=[];P.each(U,function(W,V,X){(Q(W,V,X)?T:R).push(W)});return[T,R]};P.first=P.head=P.take=function(S,R,Q){if(S==null){return void 0}if(R==null||Q){return S[0]}return P.initial(S,S.length-R)};P.initial=function(S,R,Q){return l.call(S,0,Math.max(0,S.length-(R==null||Q?1:R)))};P.last=function(S,R,Q){if(S==null){return void 0
}if(R==null||Q){return S[S.length-1]}return P.rest(S,Math.max(0,S.length-R))};P.rest=P.tail=P.drop=function(S,R,Q){return l.call(S,R==null||Q?1:R)};P.compact=function(Q){return P.filter(Q,P.identity)};var x=function(W,S,X,aa){var R=[],Z=0;for(var U=aa||0,Q=O(W);U<Q;U++){var Y=W[U];if(D(Y)&&(P.isArray(Y)||P.isArguments(Y))){if(!S){Y=x(Y,S,X)}var T=0,V=Y.length;R.length+=V;while(T<V){R[Z++]=Y[T++]}}else{if(!X){R[Z++]=Y}}}return R};P.flatten=function(R,Q){return x(R,Q,false)};P.without=function(Q){return P.difference(Q,l.call(arguments,1))
};P.uniq=P.unique=function(X,T,W,R){if(!P.isBoolean(T)){R=W;W=T;T=false}if(W!=null){W=F(W,R)}var Z=[];var Q=[];for(var V=0,S=O(X);V<S;V++){var Y=X[V],U=W?W(Y,V,X):Y;if(T){if(!V||Q!==U){Z.push(Y)}Q=U}else{if(W){if(!P.contains(Q,U)){Q.push(U);Z.push(Y)}}else{if(!P.contains(Z,Y)){Z.push(Y)}}}}return Z};P.union=function(){return P.uniq(x(arguments,true,true))};P.intersection=function(W){var Q=[];var V=arguments.length;for(var S=0,U=O(W);S<U;S++){var T=W[S];if(P.contains(Q,T)){continue}for(var R=1;R<V;
R++){if(!P.contains(arguments[R],T)){break}}if(R===V){Q.push(T)}}return Q};P.difference=function(R){var Q=x(arguments,true,true,1);return P.filter(R,function(S){return !P.contains(Q,S)})};P.zip=function(){return P.unzip(arguments)};P.unzip=function(T){var S=T&&P.max(T,O).length||0;var Q=Array(S);for(var R=0;R<S;R++){Q[R]=P.pluck(T,R)}return Q};P.object=function(U,R){var Q={};for(var S=0,T=O(U);S<T;S++){if(R){Q[U[S]]=R[S]}else{Q[U[S][0]]=U[S][1]}}return Q};function u(Q){return function(V,R,T){R=F(R,T);
var U=O(V);var S=Q>0?0:U-1;for(;S>=0&&S<U;S+=Q){if(R(V[S],S,V)){return S}}return -1}}P.findIndex=u(1);P.findLastIndex=u(-1);P.sortedIndex=function(X,V,W,S){W=F(W,S,1);var U=W(V);var Q=0,T=O(X);while(Q<T){var R=Math.floor((Q+T)/2);if(W(X[R])<U){Q=R+1}else{T=R}}return Q};function f(Q,R,S){return function(X,W,T){var U=0,V=O(X);if(typeof T=="number"){if(Q>0){U=T>=0?T:Math.max(T+V,U)}else{V=T>=0?Math.min(T+1,V):T+V+1}}else{if(S&&T&&V){T=S(X,W);return X[T]===W?T:-1}}if(W!==W){T=R(l.call(X,U,V),P.isNaN);
return T>=0?T+U:-1}for(T=Q>0?U:V-1;T>=0&&T<V;T+=Q){if(X[T]===W){return T}}return -1}}P.indexOf=f(1,P.findIndex,P.sortedIndex);P.lastIndexOf=f(-1,P.findLastIndex);P.range=function(V,S,U){if(S==null){S=V||0;V=0}U=U||1;var T=Math.max(Math.ceil((S-V)/U),0);var R=Array(T);for(var Q=0;Q<T;Q++,V+=U){R[Q]=V}return R};var y=function(V,S,U,W,T){if(!(W instanceof S)){return V.apply(U,T)}var R=C(V.prototype);var Q=V.apply(R,T);if(P.isObject(Q)){return Q}return R};P.bind=function(T,R){if(J&&T.bind===J){return J.apply(T,l.call(arguments,1))
}if(!P.isFunction(T)){throw new TypeError("Bind must be called on a function")}var Q=l.call(arguments,2);var S=function(){return y(T,S,R,this,Q.concat(l.call(arguments)))};return S};P.partial=function(R){var S=l.call(arguments,1);var Q=function(){var T=0,W=S.length;var U=Array(W);for(var V=0;V<W;V++){U[V]=S[V]===P?arguments[T++]:S[V]}while(T<arguments.length){U.push(arguments[T++])}return y(R,Q,this,this,U)};return Q};P.bindAll=function(T){var R,S=arguments.length,Q;if(S<=1){throw new Error("bindAll must be passed function names")
}for(R=1;R<S;R++){Q=arguments[R];T[Q]=P.bind(T[Q],T)}return T};P.memoize=function(R,Q){var S=function(V){var U=S.cache;var T=""+(Q?Q.apply(this,arguments):V);if(!P.has(U,T)){U[T]=R.apply(this,arguments)}return U[T]};S.cache={};return S};P.delay=function(R,S){var Q=l.call(arguments,2);return setTimeout(function(){return R.apply(null,Q)},S)};P.defer=P.partial(P.delay,P,1);P.throttle=function(R,T,X){var Q,V,Y;var W=null;var U=0;if(!X){X={}}var S=function(){U=X.leading===false?0:P.now();W=null;Y=R.apply(Q,V);
if(!W){Q=V=null}};return function(){var Z=P.now();if(!U&&X.leading===false){U=Z}var aa=T-(Z-U);Q=this;V=arguments;if(aa<=0||aa>T){if(W){clearTimeout(W);W=null}U=Z;Y=R.apply(Q,V);if(!W){Q=V=null}}else{if(!W&&X.trailing!==false){W=setTimeout(S,aa)}}return Y}};P.debounce=function(S,U,R){var X,W,Q,V,Y;var T=function(){var Z=P.now()-V;if(Z<U&&Z>=0){X=setTimeout(T,U-Z)}else{X=null;if(!R){Y=S.apply(Q,W);if(!X){Q=W=null}}}};return function(){Q=this;W=arguments;V=P.now();var Z=R&&!X;if(!X){X=setTimeout(T,U)
}if(Z){Y=S.apply(Q,W);Q=W=null}return Y}};P.wrap=function(Q,R){return P.partial(R,Q)};P.negate=function(Q){return function(){return !Q.apply(this,arguments)}};P.compose=function(){var Q=arguments;var R=Q.length-1;return function(){var T=R;var S=Q[R].apply(this,arguments);while(T--){S=Q[T].call(this,S)}return S}};P.after=function(R,Q){return function(){if(--R<1){return Q.apply(this,arguments)}}};P.before=function(S,R){var Q;return function(){if(--S>0){Q=R.apply(this,arguments)}if(S<=1){R=null}return Q
}};P.once=P.partial(P.before,2);var G=!{toString:null}.propertyIsEnumerable("toString");var a=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function d(U,T){var Q=a.length;var R=U.constructor;var S=(P.isFunction(R)&&R.prototype)||g;var V="constructor";if(P.has(U,V)&&!P.contains(T,V)){T.push(V)}while(Q--){V=a[Q];if(V in U&&U[V]!==S[V]&&!P.contains(T,V)){T.push(V)}}}P.keys=function(S){if(!P.isObject(S)){return[]}if(e){return e(S)}var R=[];for(var Q in S){if(P.has(S,Q)){R.push(Q)
}}if(G){d(S,R)}return R};P.allKeys=function(S){if(!P.isObject(S)){return[]}var R=[];for(var Q in S){R.push(Q)}if(G){d(S,R)}return R};P.values=function(U){var T=P.keys(U);var S=T.length;var Q=Array(S);for(var R=0;R<S;R++){Q[R]=U[T[R]]}return Q};P.mapObject=function(V,X,S){X=F(X,S);var U=P.keys(V),T=U.length,R={},W;for(var Q=0;Q<T;Q++){W=U[Q];R[W]=X(V[W],W,V)}return R};P.pairs=function(U){var S=P.keys(U);var R=S.length;var T=Array(R);for(var Q=0;Q<R;Q++){T[Q]=[S[Q],U[S[Q]]]}return T};P.invert=function(U){var Q={};
var T=P.keys(U);for(var R=0,S=T.length;R<S;R++){Q[U[T[R]]]=T[R]}return Q};P.functions=P.methods=function(S){var R=[];for(var Q in S){if(P.isFunction(S[Q])){R.push(Q)}}return R.sort()};P.extend=p(P.allKeys);P.extendOwn=P.assign=p(P.keys);P.findKey=function(W,Q,T){Q=F(Q,T);var V=P.keys(W),S;for(var R=0,U=V.length;R<U;R++){S=V[R];if(Q(W[S],S,W)){return S}}};P.pick=function(S,W,Q){var aa={},T=S,V,Z;if(T==null){return aa}if(P.isFunction(W)){Z=P.allKeys(T);V=b(W,Q)}else{Z=x(arguments,false,false,1);V=function(ac,ab,ad){return ab in ad
};T=Object(T)}for(var U=0,R=Z.length;U<R;U++){var Y=Z[U];var X=T[Y];if(V(X,Y,T)){aa[Y]=X}}return aa};P.omit=function(S,T,Q){if(P.isFunction(T)){T=P.negate(T)}else{var R=P.map(x(arguments,false,false,1),String);T=function(V,U){return !P.contains(R,U)}}return P.pick(S,T,Q)};P.defaults=p(P.allKeys,true);P.create=function(R,S){var Q=C(R);if(S){P.extendOwn(Q,S)}return Q};P.clone=function(Q){if(!P.isObject(Q)){return Q}return P.isArray(Q)?Q.slice():P.extend({},Q)};P.tap=function(R,Q){Q(R);return R};P.isMatch=function(R,Q){var V=P.keys(Q),U=V.length;
if(R==null){return !U}var W=Object(R);for(var T=0;T<U;T++){var S=V[T];if(Q[S]!==W[S]||!(S in W)){return false}}return true};var N=function(Y,X,R,T){if(Y===X){return Y!==0||1/Y===1/X}if(Y==null||X==null){return Y===X}if(Y instanceof P){Y=Y._wrapped}if(X instanceof P){X=X._wrapped}var V=c.call(Y);if(V!==c.call(X)){return false}switch(V){case"[object RegExp]":case"[object String]":return""+Y===""+X;case"[object Number]":if(+Y!==+Y){return +X!==+X}return +Y===0?1/+Y===1/X:+Y===+X;case"[object Date]":case"[object Boolean]":return +Y===+X
}var S=V==="[object Array]";if(!S){if(typeof Y!="object"||typeof X!="object"){return false}var W=Y.constructor,U=X.constructor;if(W!==U&&!(P.isFunction(W)&&W instanceof W&&P.isFunction(U)&&U instanceof U)&&("constructor" in Y&&"constructor" in X)){return false}}R=R||[];T=T||[];var Q=R.length;while(Q--){if(R[Q]===Y){return T[Q]===X}}R.push(Y);T.push(X);if(S){Q=Y.length;if(Q!==X.length){return false}while(Q--){if(!N(Y[Q],X[Q],R,T)){return false}}}else{var aa=P.keys(Y),Z;Q=aa.length;if(P.keys(X).length!==Q){return false
}while(Q--){Z=aa[Q];if(!(P.has(X,Z)&&N(Y[Z],X[Z],R,T))){return false}}}R.pop();T.pop();return true};P.isEqual=function(R,Q){return N(R,Q)};P.isEmpty=function(Q){if(Q==null){return true}if(D(Q)&&(P.isArray(Q)||P.isString(Q)||P.isArguments(Q))){return Q.length===0}return P.keys(Q).length===0};P.isElement=function(Q){return !!(Q&&Q.nodeType===1)};P.isArray=s||function(Q){return c.call(Q)==="[object Array]"};P.isObject=function(R){var Q=typeof R;return Q==="function"||Q==="object"&&!!R};P.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(Q){P["is"+Q]=function(R){return c.call(R)==="[object "+Q+"]"
}});if(!P.isArguments(arguments)){P.isArguments=function(Q){return P.has(Q,"callee")}}if(typeof/./!="function"&&typeof Int8Array!="object"){P.isFunction=function(Q){return typeof Q=="function"||false}}P.isFinite=function(Q){return isFinite(Q)&&!isNaN(parseFloat(Q))};P.isNaN=function(Q){return P.isNumber(Q)&&Q!==+Q};P.isBoolean=function(Q){return Q===true||Q===false||c.call(Q)==="[object Boolean]"};P.isNull=function(Q){return Q===null};P.isUndefined=function(Q){return Q===void 0};P.has=function(R,Q){return R!=null&&j.call(R,Q)
};P.noConflict=function(){v._=k;return this};P.identity=function(Q){return Q};P.constant=function(Q){return function(){return Q}};P.noop=function(){};P.property=M;P.propertyOf=function(Q){return Q==null?function(){}:function(R){return Q[R]}};P.matcher=P.matches=function(Q){Q=P.extendOwn({},Q);return function(R){return P.isMatch(R,Q)}};P.times=function(U,T,S){var Q=Array(Math.max(0,U));T=b(T,S,1);for(var R=0;R<U;R++){Q[R]=T(R)}return Q};P.random=function(R,Q){if(Q==null){Q=R;R=0}return R+Math.floor(Math.random()*(Q-R+1))
};P.now=Date.now||function(){return new Date().getTime()};var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var m=P.invert(r);var w=function(U){var R=function(V){return U[V]};var T="(?:"+P.keys(U).join("|")+")";var S=RegExp(T);var Q=RegExp(T,"g");return function(V){V=V==null?"":""+V;return S.test(V)?V.replace(Q,R):V}};P.escape=w(r);P.unescape=w(m);P.result=function(Q,S,T){var R=Q==null?void 0:Q[S];if(R===void 0){R=T}return P.isFunction(R)?R.call(Q):R};var A=0;P.uniqueId=function(Q){var R=++A+"";
return Q?Q+R:R};P.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var t=/(.)^/;var h={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var i=/\\|'|\r|\n|\u2028|\u2029/g;var H=function(Q){return"\\"+h[Q]};P.template=function(Z,T,W){if(!T&&W){T=W}T=P.defaults({},T,P.templateSettings);var U=RegExp([(T.escape||t).source,(T.interpolate||t).source,(T.evaluate||t).source].join("|")+"|$","g");var V=0;var Q="__p+='";Z.replace(U,function(ab,ac,aa,ae,ad){Q+=Z.slice(V,ad).replace(i,H);
V=ad+ab.length;if(ac){Q+="'+\n((__t=("+ac+"))==null?'':_.escape(__t))+\n'"}else{if(aa){Q+="'+\n((__t=("+aa+"))==null?'':__t)+\n'"}else{if(ae){Q+="';\n"+ae+"\n__p+='"}}}return ab});Q+="';\n";if(!T.variable){Q="with(obj||{}){\n"+Q+"}\n"}Q="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+Q+"return __p;\n";try{var S=new Function(T.variable||"obj","_",Q)}catch(X){X.source=Q;throw X}var Y=function(aa){return S.call(this,aa,P)};var R=T.variable||"obj";Y.source="function("+R+"){\n"+Q+"}";
return Y};P.chain=function(R){var Q=P(R);Q._chain=true;return Q};var o=function(Q,R){return Q._chain?P(R).chain():R};P.mixin=function(Q){P.each(P.functions(Q),function(R){var S=P[R]=Q[R];P.prototype[R]=function(){var T=[this._wrapped];L.apply(T,arguments);return o(this,S.apply(P,T))}})};P.mixin(P);P.each(["pop","push","reverse","shift","sort","splice","unshift"],function(Q){var R=I[Q];P.prototype[Q]=function(){var S=this._wrapped;R.apply(S,arguments);if((Q==="shift"||Q==="splice")&&S.length===0){delete S[0]
}return o(this,S)}});P.each(["concat","join","slice"],function(Q){var R=I[Q];P.prototype[Q]=function(){return o(this,R.apply(this._wrapped,arguments))}});P.prototype.value=function(){return this._wrapped};P.prototype.valueOf=P.prototype.toJSON=P.prototype.value;P.prototype.toString=function(){return""+this._wrapped};if(typeof define==="function"&&define.amd){define("underscore",[],function(){return P})}}.call(this));
/*!
 * jQuery JavaScript Library v1.9.1
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2012 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-2-4
 */
(function(a2,aG){var ai,w,aC=typeof aG,l=a2.document,aL=a2.location,bi=a2.jQuery,H=a2.$,aa={},a6=[],s="1.9.1",aI=a6.concat,ao=a6.push,a4=a6.slice,aM=a6.indexOf,z=aa.toString,V=aa.hasOwnProperty,aQ=s.trim,bJ=function(e,b3){return new bJ.fn.init(e,b3,w)
},bA=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ac=/\S+/g,C=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,br=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,a=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,bh=/^[\],:{}\s]*$/,bk=/(?:^|:|,)(?:\s*\[)+/g,bG=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,aZ=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,bS=/^-ms-/,aV=/-([\da-z])/gi,M=function(e,b3){return b3.toUpperCase()},bW=function(e){if(l.addEventListener||e.type==="load"||l.readyState==="complete"){bl();bJ.ready()}},bl=function(){if(l.addEventListener){l.removeEventListener("DOMContentLoaded",bW,false);
a2.removeEventListener("load",bW,false)}else{l.detachEvent("onreadystatechange",bW);a2.detachEvent("onload",bW)}};bJ.fn=bJ.prototype={jquery:s,constructor:bJ,init:function(e,b5,b4){var b3,b6;if(!e){return this}if(typeof e==="string"){if(e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3){b3=[null,e,null]}else{b3=br.exec(e)}if(b3&&(b3[1]||!b5)){if(b3[1]){b5=b5 instanceof bJ?b5[0]:b5;bJ.merge(this,bJ.parseHTML(b3[1],b5&&b5.nodeType?b5.ownerDocument||b5:l,true));if(a.test(b3[1])&&bJ.isPlainObject(b5)){for(b3 in b5){if(bJ.isFunction(this[b3])){this[b3](b5[b3])
}else{this.attr(b3,b5[b3])}}}return this}else{b6=l.getElementById(b3[2]);if(b6&&b6.parentNode){if(b6.id!==b3[2]){return b4.find(e)}this.length=1;this[0]=b6}this.context=l;this.selector=e;return this}}else{if(!b5||b5.jquery){return(b5||b4).find(e)}else{return this.constructor(b5).find(e)}}}else{if(e.nodeType){this.context=this[0]=e;this.length=1;return this}else{if(bJ.isFunction(e)){return b4.ready(e)}}}if(e.selector!==aG){this.selector=e.selector;this.context=e.context}return bJ.makeArray(e,this)
},selector:"",length:0,size:function(){return this.length},toArray:function(){return a4.call(this)},get:function(e){return e==null?this.toArray():(e<0?this[this.length+e]:this[e])},pushStack:function(e){var b3=bJ.merge(this.constructor(),e);b3.prevObject=this;b3.context=this.context;return b3},each:function(b3,e){return bJ.each(this,b3,e)},ready:function(e){bJ.ready.promise().done(e);return this},slice:function(){return this.pushStack(a4.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)
},eq:function(b4){var e=this.length,b3=+b4+(b4<0?e:0);return this.pushStack(b3>=0&&b3<e?[this[b3]]:[])},map:function(e){return this.pushStack(bJ.map(this,function(b4,b3){return e.call(b4,b3,b4)}))},end:function(){return this.prevObject||this.constructor(null)},push:ao,sort:[].sort,splice:[].splice};bJ.fn.init.prototype=bJ.fn;bJ.extend=bJ.fn.extend=function(){var e,b8,b3,b4,cb,b9,b7=arguments[0]||{},b6=1,b5=arguments.length,ca=false;if(typeof b7==="boolean"){ca=b7;b7=arguments[1]||{};b6=2}if(typeof b7!=="object"&&!bJ.isFunction(b7)){b7={}
}if(b5===b6){b7=this;--b6}for(;b6<b5;b6++){if((cb=arguments[b6])!=null){for(b4 in cb){e=b7[b4];b3=cb[b4];if(b7===b3){continue}if(ca&&b3&&(bJ.isPlainObject(b3)||(b8=bJ.isArray(b3)))){if(b8){b8=false;b9=e&&bJ.isArray(e)?e:[]}else{b9=e&&bJ.isPlainObject(e)?e:{}}b7[b4]=bJ.extend(ca,b9,b3)}else{if(b3!==aG){b7[b4]=b3}}}}}return b7};bJ.extend({noConflict:function(e){if(a2.$===bJ){a2.$=H}if(e&&a2.jQuery===bJ){a2.jQuery=bi}return bJ},isReady:false,readyWait:1,holdReady:function(e){if(e){bJ.readyWait++}else{bJ.ready(true)
}},ready:function(e){if(e===true?--bJ.readyWait:bJ.isReady){return}if(!l.body){return setTimeout(bJ.ready)}bJ.isReady=true;if(e!==true&&--bJ.readyWait>0){return}ai.resolveWith(l,[bJ]);if(bJ.fn.trigger){bJ(l).trigger("ready").off("ready")}},isFunction:function(e){return bJ.type(e)==="function"},isArray:Array.isArray||function(e){return bJ.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return !isNaN(parseFloat(e))&&isFinite(e)},type:function(e){if(e==null){return String(e)
}return typeof e==="object"||typeof e==="function"?aa[z.call(e)]||"object":typeof e},isPlainObject:function(b5){if(!b5||bJ.type(b5)!=="object"||b5.nodeType||bJ.isWindow(b5)){return false}try{if(b5.constructor&&!V.call(b5,"constructor")&&!V.call(b5.constructor.prototype,"isPrototypeOf")){return false}}catch(b4){return false}var b3;for(b3 in b5){}return b3===aG||V.call(b5,b3)},isEmptyObject:function(b3){var e;for(e in b3){return false}return true},error:function(e){throw new Error(e)},parseHTML:function(b6,b4,b5){if(!b6||typeof b6!=="string"){return null
}if(typeof b4==="boolean"){b5=b4;b4=false}b4=b4||l;var b3=a.exec(b6),e=!b5&&[];if(b3){return[b4.createElement(b3[1])]}b3=bJ.buildFragment([b6],b4,e);if(e){bJ(e).remove()}return bJ.merge([],b3.childNodes)},parseJSON:function(e){if(a2.JSON&&a2.JSON.parse){return a2.JSON.parse(e)}if(e===null){return e}if(typeof e==="string"){e=bJ.trim(e);if(e){if(bh.test(e.replace(bG,"@").replace(aZ,"]").replace(bk,""))){return(new Function("return "+e))()}}}bJ.error("Invalid JSON: "+e)},parseXML:function(b5){var b3,b4;
if(!b5||typeof b5!=="string"){return null}try{if(a2.DOMParser){b4=new DOMParser();b3=b4.parseFromString(b5,"text/xml")}else{b3=new ActiveXObject("Microsoft.XMLDOM");b3.async="false";b3.loadXML(b5)}}catch(b6){b3=aG}if(!b3||!b3.documentElement||b3.getElementsByTagName("parsererror").length){bJ.error("Invalid XML: "+b5)}return b3},noop:function(){},globalEval:function(e){if(e&&bJ.trim(e)){(a2.execScript||function(b3){a2["eval"].call(a2,b3)})(e)}},camelCase:function(e){return e.replace(bS,"ms-").replace(aV,M)
},nodeName:function(b3,e){return b3.nodeName&&b3.nodeName.toLowerCase()===e.toLowerCase()},each:function(b7,b8,b3){var b6,b4=0,b5=b7.length,e=ab(b7);if(b3){if(e){for(;b4<b5;b4++){b6=b8.apply(b7[b4],b3);if(b6===false){break}}}else{for(b4 in b7){b6=b8.apply(b7[b4],b3);if(b6===false){break}}}}else{if(e){for(;b4<b5;b4++){b6=b8.call(b7[b4],b4,b7[b4]);if(b6===false){break}}}else{for(b4 in b7){b6=b8.call(b7[b4],b4,b7[b4]);if(b6===false){break}}}}return b7},trim:aQ&&!aQ.call("\uFEFF\xA0")?function(e){return e==null?"":aQ.call(e)
}:function(e){return e==null?"":(e+"").replace(C,"")},makeArray:function(e,b4){var b3=b4||[];if(e!=null){if(ab(Object(e))){bJ.merge(b3,typeof e==="string"?[e]:e)}else{ao.call(b3,e)}}return b3},inArray:function(b5,b3,b4){var e;if(b3){if(aM){return aM.call(b3,b5,b4)}e=b3.length;b4=b4?b4<0?Math.max(0,e+b4):b4:0;for(;b4<e;b4++){if(b4 in b3&&b3[b4]===b5){return b4}}}return -1},merge:function(b6,b4){var e=b4.length,b5=b6.length,b3=0;if(typeof e==="number"){for(;b3<e;b3++){b6[b5++]=b4[b3]}}else{while(b4[b3]!==aG){b6[b5++]=b4[b3++]
}}b6.length=b5;return b6},grep:function(b3,b8,e){var b7,b4=[],b5=0,b6=b3.length;e=!!e;for(;b5<b6;b5++){b7=!!b8(b3[b5],b5);if(e!==b7){b4.push(b3[b5])}}return b4},map:function(b4,b9,e){var b8,b6=0,b7=b4.length,b3=ab(b4),b5=[];if(b3){for(;b6<b7;b6++){b8=b9(b4[b6],b6,e);if(b8!=null){b5[b5.length]=b8}}}else{for(b6 in b4){b8=b9(b4[b6],b6,e);if(b8!=null){b5[b5.length]=b8}}}return aI.apply([],b5)},guid:1,proxy:function(b6,b5){var e,b4,b3;if(typeof b5==="string"){b3=b6[b5];b5=b6;b6=b3}if(!bJ.isFunction(b6)){return aG
}e=a4.call(arguments,2);b4=function(){return b6.apply(b5||this,e.concat(a4.call(arguments)))};b4.guid=b6.guid=b6.guid||bJ.guid++;return b4},access:function(e,b7,b9,b8,b5,cb,ca){var b4=0,b3=e.length,b6=b9==null;if(bJ.type(b9)==="object"){b5=true;for(b4 in b9){bJ.access(e,b7,b4,b9[b4],true,cb,ca)}}else{if(b8!==aG){b5=true;if(!bJ.isFunction(b8)){ca=true}if(b6){if(ca){b7.call(e,b8);b7=null}else{b6=b7;b7=function(cd,cc,ce){return b6.call(bJ(cd),ce)}}}if(b7){for(;b4<b3;b4++){b7(e[b4],b9,ca?b8:b8.call(e[b4],b4,b7(e[b4],b9)))
}}}}return b5?e:b6?b7.call(e):b3?b7(e[0],b9):cb},now:function(){return(new Date()).getTime()}});bJ.ready.promise=function(b6){if(!ai){ai=bJ.Deferred();if(l.readyState==="complete"){setTimeout(bJ.ready)}else{if(l.addEventListener){l.addEventListener("DOMContentLoaded",bW,false);a2.addEventListener("load",bW,false)}else{l.attachEvent("onreadystatechange",bW);a2.attachEvent("onload",bW);var b5=false;try{b5=a2.frameElement==null&&l.documentElement}catch(b4){}if(b5&&b5.doScroll){(function b3(){if(!bJ.isReady){try{b5.doScroll("left")
}catch(b7){return setTimeout(b3,50)}bl();bJ.ready()}})()}}}}return ai.promise(b6)};bJ.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(b3,e){aa["[object "+e+"]"]=e.toLowerCase()});function ab(b4){var b3=b4.length,e=bJ.type(b4);if(bJ.isWindow(b4)){return false}if(b4.nodeType===1&&b3){return true}return e==="array"||e!=="function"&&(b3===0||typeof b3==="number"&&b3>0&&(b3-1) in b4)}w=bJ(l);var bY={};function ae(b3){var e=bY[b3]={};bJ.each(b3.match(ac)||[],function(b5,b4){e[b4]=true
});return e}bJ.Callbacks=function(cc){cc=typeof cc==="string"?(bY[cc]||ae(cc)):bJ.extend({},cc);var b6,b5,e,b7,b8,b4,b9=[],ca=!cc.once&&[],b3=function(cd){b5=cc.memory&&cd;e=true;b8=b4||0;b4=0;b7=b9.length;b6=true;for(;b9&&b8<b7;b8++){if(b9[b8].apply(cd[0],cd[1])===false&&cc.stopOnFalse){b5=false;break}}b6=false;if(b9){if(ca){if(ca.length){b3(ca.shift())}}else{if(b5){b9=[]}else{cb.disable()}}}},cb={add:function(){if(b9){var ce=b9.length;(function cd(cf){bJ.each(cf,function(ch,cg){var ci=bJ.type(cg);
if(ci==="function"){if(!cc.unique||!cb.has(cg)){b9.push(cg)}}else{if(cg&&cg.length&&ci!=="string"){cd(cg)}}})})(arguments);if(b6){b7=b9.length}else{if(b5){b4=ce;b3(b5)}}}return this},remove:function(){if(b9){bJ.each(arguments,function(cf,cd){var ce;while((ce=bJ.inArray(cd,b9,ce))>-1){b9.splice(ce,1);if(b6){if(ce<=b7){b7--}if(ce<=b8){b8--}}}})}return this},has:function(cd){return cd?bJ.inArray(cd,b9)>-1:!!(b9&&b9.length)},empty:function(){b9=[];return this},disable:function(){b9=ca=b5=aG;return this
},disabled:function(){return !b9},lock:function(){ca=aG;if(!b5){cb.disable()}return this},locked:function(){return !ca},fireWith:function(ce,cd){cd=cd||[];cd=[ce,cd.slice?cd.slice():cd];if(b9&&(!e||ca)){if(b6){ca.push(cd)}else{b3(cd)}}return this},fire:function(){cb.fireWith(this,arguments);return this},fired:function(){return !!e}};return cb};bJ.extend({Deferred:function(b4){var b3=[["resolve","done",bJ.Callbacks("once memory"),"resolved"],["reject","fail",bJ.Callbacks("once memory"),"rejected"],["notify","progress",bJ.Callbacks("memory")]],b5="pending",b6={state:function(){return b5
},always:function(){e.done(arguments).fail(arguments);return this},then:function(){var b7=arguments;return bJ.Deferred(function(b8){bJ.each(b3,function(ca,b9){var cc=b9[0],cb=bJ.isFunction(b7[ca])&&b7[ca];e[b9[1]](function(){var cd=cb&&cb.apply(this,arguments);if(cd&&bJ.isFunction(cd.promise)){cd.promise().done(b8.resolve).fail(b8.reject).progress(b8.notify)}else{b8[cc+"With"](this===b6?b8.promise():this,cb?[cd]:arguments)}})});b7=null}).promise()},promise:function(b7){return b7!=null?bJ.extend(b7,b6):b6
}},e={};b6.pipe=b6.then;bJ.each(b3,function(b8,b7){var ca=b7[2],b9=b7[3];b6[b7[1]]=ca.add;if(b9){ca.add(function(){b5=b9},b3[b8^1][2].disable,b3[2][2].lock)}e[b7[0]]=function(){e[b7[0]+"With"](this===e?b6:this,arguments);return this};e[b7[0]+"With"]=ca.fireWith});b6.promise(e);if(b4){b4.call(e,e)}return e},when:function(b6){var b4=0,b8=a4.call(arguments),e=b8.length,b3=e!==1||(b6&&bJ.isFunction(b6.promise))?e:0,cb=b3===1?b6:bJ.Deferred(),b5=function(cd,ce,cc){return function(cf){ce[cd]=this;cc[cd]=arguments.length>1?a4.call(arguments):cf;
if(cc===ca){cb.notifyWith(ce,cc)}else{if(!(--b3)){cb.resolveWith(ce,cc)}}}},ca,b7,b9;if(e>1){ca=new Array(e);b7=new Array(e);b9=new Array(e);for(;b4<e;b4++){if(b8[b4]&&bJ.isFunction(b8[b4].promise)){b8[b4].promise().done(b5(b4,b9,b8)).fail(cb.reject).progress(b5(b4,b7,ca))}else{--b3}}}if(!b3){cb.resolveWith(b9,b8)}return cb.promise()}});bJ.support=(function(){var ce,cd,cb,ca,cc,b9,b5,b7,b4,b6,b3=l.createElement("div");b3.setAttribute("className","t");b3.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";
cd=b3.getElementsByTagName("*");cb=b3.getElementsByTagName("a")[0];if(!cd||!cb||!cd.length){return{}}cc=l.createElement("select");b5=cc.appendChild(l.createElement("option"));ca=b3.getElementsByTagName("input")[0];cb.style.cssText="top:1px;float:left;opacity:.5";ce={getSetAttribute:b3.className!=="t",leadingWhitespace:b3.firstChild.nodeType===3,tbody:!b3.getElementsByTagName("tbody").length,htmlSerialize:!!b3.getElementsByTagName("link").length,style:/top/.test(cb.getAttribute("style")),hrefNormalized:cb.getAttribute("href")==="/a",opacity:/^0.5/.test(cb.style.opacity),cssFloat:!!cb.style.cssFloat,checkOn:!!ca.value,optSelected:b5.selected,enctype:!!l.createElement("form").enctype,html5Clone:l.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",boxModel:l.compatMode==="CSS1Compat",deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true,boxSizingReliable:true,pixelPosition:false};
ca.checked=true;ce.noCloneChecked=ca.cloneNode(true).checked;cc.disabled=true;ce.optDisabled=!b5.disabled;try{delete b3.test}catch(b8){ce.deleteExpando=false}ca=l.createElement("input");ca.setAttribute("value","");ce.input=ca.getAttribute("value")==="";ca.value="t";ca.setAttribute("type","radio");ce.radioValue=ca.value==="t";ca.setAttribute("checked","t");ca.setAttribute("name","t");b9=l.createDocumentFragment();b9.appendChild(ca);ce.appendChecked=ca.checked;ce.checkClone=b9.cloneNode(true).cloneNode(true).lastChild.checked;
if(b3.attachEvent){b3.attachEvent("onclick",function(){ce.noCloneEvent=false});b3.cloneNode(true).click()}for(b6 in {submit:true,change:true,focusin:true}){b3.setAttribute(b7="on"+b6,"t");ce[b6+"Bubbles"]=b7 in a2||b3.attributes[b7].expando===false}b3.style.backgroundClip="content-box";b3.cloneNode(true).style.backgroundClip="";ce.clearCloneStyle=b3.style.backgroundClip==="content-box";bJ(function(){var cf,ci,ch,cg="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",e=l.getElementsByTagName("body")[0];
if(!e){return}cf=l.createElement("div");cf.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px";e.appendChild(cf).appendChild(b3);b3.innerHTML="<table><tr><td></td><td>t</td></tr></table>";ch=b3.getElementsByTagName("td");ch[0].style.cssText="padding:0;margin:0;border:0;display:none";b4=(ch[0].offsetHeight===0);ch[0].style.display="";ch[1].style.display="none";ce.reliableHiddenOffsets=b4&&(ch[0].offsetHeight===0);b3.innerHTML="";b3.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";
ce.boxSizing=(b3.offsetWidth===4);ce.doesNotIncludeMarginInBodyOffset=(e.offsetTop!==1);if(a2.getComputedStyle){ce.pixelPosition=(a2.getComputedStyle(b3,null)||{}).top!=="1%";ce.boxSizingReliable=(a2.getComputedStyle(b3,null)||{width:"4px"}).width==="4px";ci=b3.appendChild(l.createElement("div"));ci.style.cssText=b3.style.cssText=cg;ci.style.marginRight=ci.style.width="0";b3.style.width="1px";ce.reliableMarginRight=!parseFloat((a2.getComputedStyle(ci,null)||{}).marginRight)}if(typeof b3.style.zoom!==aC){b3.innerHTML="";
b3.style.cssText=cg+"width:1px;padding:1px;display:inline;zoom:1";ce.inlineBlockNeedsLayout=(b3.offsetWidth===3);b3.style.display="block";b3.innerHTML="<div></div>";b3.firstChild.style.width="5px";ce.shrinkWrapBlocks=(b3.offsetWidth!==3);if(ce.inlineBlockNeedsLayout){e.style.zoom=1}}e.removeChild(cf);cf=b3=ch=ci=null});cd=cc=b9=b5=cb=ca=null;return ce})();var bw=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,aN=/([A-Z])/g;function ba(b5,b3,b7,b6){if(!bJ.acceptData(b5)){return}var b8,ca,cb=bJ.expando,b9=typeof b3==="string",cc=b5.nodeType,e=cc?bJ.cache:b5,b4=cc?b5[cb]:b5[cb]&&cb;
if((!b4||!e[b4]||(!b6&&!e[b4].data))&&b9&&b7===aG){return}if(!b4){if(cc){b5[cb]=b4=a6.pop()||bJ.guid++}else{b4=cb}}if(!e[b4]){e[b4]={};if(!cc){e[b4].toJSON=bJ.noop}}if(typeof b3==="object"||typeof b3==="function"){if(b6){e[b4]=bJ.extend(e[b4],b3)}else{e[b4].data=bJ.extend(e[b4].data,b3)}}b8=e[b4];if(!b6){if(!b8.data){b8.data={}}b8=b8.data}if(b7!==aG){b8[bJ.camelCase(b3)]=b7}if(b9){ca=b8[b3];if(ca==null){ca=b8[bJ.camelCase(b3)]}}else{ca=b8}return ca}function Z(b5,b3,b6){if(!bJ.acceptData(b5)){return
}var b8,b7,b9,ca=b5.nodeType,e=ca?bJ.cache:b5,b4=ca?b5[bJ.expando]:bJ.expando;if(!e[b4]){return}if(b3){b9=b6?e[b4]:e[b4].data;if(b9){if(!bJ.isArray(b3)){if(b3 in b9){b3=[b3]}else{b3=bJ.camelCase(b3);if(b3 in b9){b3=[b3]}else{b3=b3.split(" ")}}}else{b3=b3.concat(bJ.map(b3,bJ.camelCase))}for(b8=0,b7=b3.length;b8<b7;b8++){delete b9[b3[b8]]}if(!(b6?N:bJ.isEmptyObject)(b9)){return}}}if(!b6){delete e[b4].data;if(!N(e[b4])){return}}if(ca){bJ.cleanData([b5],true)}else{if(bJ.support.deleteExpando||e!=e.window){delete e[b4]
}else{e[b4]=null}}}bJ.extend({cache:{},expando:"jQuery"+(s+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(e){e=e.nodeType?bJ.cache[e[bJ.expando]]:e[bJ.expando];return !!e&&!N(e)},data:function(b3,e,b4){return ba(b3,e,b4)},removeData:function(b3,e){return Z(b3,e)},_data:function(b3,e,b4){return ba(b3,e,b4,true)},_removeData:function(b3,e){return Z(b3,e,true)},acceptData:function(b3){if(b3.nodeType&&b3.nodeType!==1&&b3.nodeType!==9){return false
}var e=b3.nodeName&&bJ.noData[b3.nodeName.toLowerCase()];return !e||e!==true&&b3.getAttribute("classid")===e}});bJ.fn.extend({data:function(b5,b8){var b3,e,b6=this[0],b4=0,b7=null;if(b5===aG){if(this.length){b7=bJ.data(b6);if(b6.nodeType===1&&!bJ._data(b6,"parsedAttrs")){b3=b6.attributes;for(;b4<b3.length;b4++){e=b3[b4].name;if(!e.indexOf("data-")){e=bJ.camelCase(e.slice(5));by(b6,e,b7[e])}}bJ._data(b6,"parsedAttrs",true)}}return b7}if(typeof b5==="object"){return this.each(function(){bJ.data(this,b5)
})}return bJ.access(this,function(b9){if(b9===aG){return b6?by(b6,b5,bJ.data(b6,b5)):null}this.each(function(){bJ.data(this,b5,b9)})},null,b8,arguments.length>1,null,true)},removeData:function(e){return this.each(function(){bJ.removeData(this,e)})}});function by(b5,b4,b6){if(b6===aG&&b5.nodeType===1){var b3="data-"+b4.replace(aN,"-$1").toLowerCase();b6=b5.getAttribute(b3);if(typeof b6==="string"){try{b6=b6==="true"?true:b6==="false"?false:b6==="null"?null:+b6+""===b6?+b6:bw.test(b6)?bJ.parseJSON(b6):b6
}catch(b7){}bJ.data(b5,b4,b6)}else{b6=aG}}return b6}function N(b3){var e;for(e in b3){if(e==="data"&&bJ.isEmptyObject(b3[e])){continue}if(e!=="toJSON"){return false}}return true}bJ.extend({queue:function(b4,b3,b5){var e;if(b4){b3=(b3||"fx")+"queue";e=bJ._data(b4,b3);if(b5){if(!e||bJ.isArray(b5)){e=bJ._data(b4,b3,bJ.makeArray(b5))}else{e.push(b5)}}return e||[]}},dequeue:function(b7,b6){b6=b6||"fx";var b3=bJ.queue(b7,b6),b8=b3.length,b5=b3.shift(),e=bJ._queueHooks(b7,b6),b4=function(){bJ.dequeue(b7,b6)
};if(b5==="inprogress"){b5=b3.shift();b8--}e.cur=b5;if(b5){if(b6==="fx"){b3.unshift("inprogress")}delete e.stop;b5.call(b7,b4,e)}if(!b8&&e){e.empty.fire()}},_queueHooks:function(b4,b3){var e=b3+"queueHooks";return bJ._data(b4,e)||bJ._data(b4,e,{empty:bJ.Callbacks("once memory").add(function(){bJ._removeData(b4,b3+"queue");bJ._removeData(b4,e)})})}});bJ.fn.extend({queue:function(e,b3){var b4=2;if(typeof e!=="string"){b3=e;e="fx";b4--}if(arguments.length<b4){return bJ.queue(this[0],e)}return b3===aG?this:this.each(function(){var b5=bJ.queue(this,e,b3);
bJ._queueHooks(this,e);if(e==="fx"&&b5[0]!=="inprogress"){bJ.dequeue(this,e)}})},dequeue:function(e){return this.each(function(){bJ.dequeue(this,e)})},delay:function(b3,e){b3=bJ.fx?bJ.fx.speeds[b3]||b3:b3;e=e||"fx";return this.queue(e,function(b5,b4){var b6=setTimeout(b5,b3);b4.stop=function(){clearTimeout(b6)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(b4,b8){var b3,b5=1,b9=bJ.Deferred(),b7=this,e=this.length,b6=function(){if(!(--b5)){b9.resolveWith(b7,[b7])}};if(typeof b4!=="string"){b8=b4;
b4=aG}b4=b4||"fx";while(e--){b3=bJ._data(b7[e],b4+"queueHooks");if(b3&&b3.empty){b5++;b3.empty.add(b6)}}b6();return b9.promise(b8)}});var a8,bZ,bM=/[\t\r\n]/g,ak=/\r/g,aF=/^(?:input|select|textarea|button|object)$/i,D=/^(?:a|area)$/i,L=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,aq=/^(?:checked|selected)$/i,bP=bJ.support.getSetAttribute,bF=bJ.support.input;bJ.fn.extend({attr:function(e,b3){return bJ.access(this,bJ.attr,e,b3,arguments.length>1)
},removeAttr:function(e){return this.each(function(){bJ.removeAttr(this,e)})},prop:function(e,b3){return bJ.access(this,bJ.prop,e,b3,arguments.length>1)},removeProp:function(e){e=bJ.propFix[e]||e;return this.each(function(){try{this[e]=aG;delete this[e]}catch(b3){}})},addClass:function(b9){var b3,e,ca,b6,b4,b5=0,b7=this.length,b8=typeof b9==="string"&&b9;if(bJ.isFunction(b9)){return this.each(function(cb){bJ(this).addClass(b9.call(this,cb,this.className))})}if(b8){b3=(b9||"").match(ac)||[];for(;b5<b7;
b5++){e=this[b5];ca=e.nodeType===1&&(e.className?(" "+e.className+" ").replace(bM," "):" ");if(ca){b4=0;while((b6=b3[b4++])){if(ca.indexOf(" "+b6+" ")<0){ca+=b6+" "}}e.className=bJ.trim(ca)}}}return this},removeClass:function(b9){var b3,e,ca,b6,b4,b5=0,b7=this.length,b8=arguments.length===0||typeof b9==="string"&&b9;if(bJ.isFunction(b9)){return this.each(function(cb){bJ(this).removeClass(b9.call(this,cb,this.className))})}if(b8){b3=(b9||"").match(ac)||[];for(;b5<b7;b5++){e=this[b5];ca=e.nodeType===1&&(e.className?(" "+e.className+" ").replace(bM," "):"");
if(ca){b4=0;while((b6=b3[b4++])){while(ca.indexOf(" "+b6+" ")>=0){ca=ca.replace(" "+b6+" "," ")}}e.className=b9?bJ.trim(ca):""}}}return this},toggleClass:function(b5,b3){var b4=typeof b5,e=typeof b3==="boolean";if(bJ.isFunction(b5)){return this.each(function(b6){bJ(this).toggleClass(b5.call(this,b6,this.className,b3),b3)})}return this.each(function(){if(b4==="string"){var b8,b7=0,b6=bJ(this),b9=b3,ca=b5.match(ac)||[];while((b8=ca[b7++])){b9=e?b9:!b6.hasClass(b8);b6[b9?"addClass":"removeClass"](b8)
}}else{if(b4===aC||b4==="boolean"){if(this.className){bJ._data(this,"__className__",this.className)}this.className=this.className||b5===false?"":bJ._data(this,"__className__")||""}}})},hasClass:function(e){var b5=" "+e+" ",b4=0,b3=this.length;for(;b4<b3;b4++){if(this[b4].nodeType===1&&(" "+this[b4].className+" ").replace(bM," ").indexOf(b5)>=0){return true}}return false},val:function(b5){var b3,e,b6,b4=this[0];if(!arguments.length){if(b4){e=bJ.valHooks[b4.type]||bJ.valHooks[b4.nodeName.toLowerCase()];
if(e&&"get" in e&&(b3=e.get(b4,"value"))!==aG){return b3}b3=b4.value;return typeof b3==="string"?b3.replace(ak,""):b3==null?"":b3}return}b6=bJ.isFunction(b5);return this.each(function(b8){var b9,b7=bJ(this);if(this.nodeType!==1){return}if(b6){b9=b5.call(this,b8,b7.val())}else{b9=b5}if(b9==null){b9=""}else{if(typeof b9==="number"){b9+=""}else{if(bJ.isArray(b9)){b9=bJ.map(b9,function(ca){return ca==null?"":ca+""})}}}e=bJ.valHooks[this.type]||bJ.valHooks[this.nodeName.toLowerCase()];if(!e||!("set" in e)||e.set(this,b9,"value")===aG){this.value=b9
}})}});bJ.extend({valHooks:{option:{get:function(e){var b3=e.attributes.value;return !b3||b3.specified?e.value:e.text}},select:{get:function(e){var b8,b4,ca=e.options,b6=e.selectedIndex,b5=e.type==="select-one"||b6<0,b9=b5?null:[],b7=b5?b6+1:ca.length,b3=b6<0?b7:b5?b6:0;for(;b3<b7;b3++){b4=ca[b3];if((b4.selected||b3===b6)&&(bJ.support.optDisabled?!b4.disabled:b4.getAttribute("disabled")===null)&&(!b4.parentNode.disabled||!bJ.nodeName(b4.parentNode,"optgroup"))){b8=bJ(b4).val();if(b5){return b8}b9.push(b8)
}}return b9},set:function(b3,b4){var e=bJ.makeArray(b4);bJ(b3).find("option").each(function(){this.selected=bJ.inArray(bJ(this).val(),e)>=0});if(!e.length){b3.selectedIndex=-1}return e}}},attr:function(b7,b5,b8){var e,b6,b4,b3=b7.nodeType;if(!b7||b3===3||b3===8||b3===2){return}if(typeof b7.getAttribute===aC){return bJ.prop(b7,b5,b8)}b6=b3!==1||!bJ.isXMLDoc(b7);if(b6){b5=b5.toLowerCase();e=bJ.attrHooks[b5]||(L.test(b5)?bZ:a8)}if(b8!==aG){if(b8===null){bJ.removeAttr(b7,b5)}else{if(e&&b6&&"set" in e&&(b4=e.set(b7,b8,b5))!==aG){return b4
}else{b7.setAttribute(b5,b8+"");return b8}}}else{if(e&&b6&&"get" in e&&(b4=e.get(b7,b5))!==null){return b4}else{if(typeof b7.getAttribute!==aC){b4=b7.getAttribute(b5)}return b4==null?aG:b4}}},removeAttr:function(b4,b6){var e,b5,b3=0,b7=b6&&b6.match(ac);if(b7&&b4.nodeType===1){while((e=b7[b3++])){b5=bJ.propFix[e]||e;if(L.test(e)){if(!bP&&aq.test(e)){b4[bJ.camelCase("default-"+e)]=b4[b5]=false}else{b4[b5]=false}}else{bJ.attr(b4,e,"")}b4.removeAttribute(bP?e:b5)}}},attrHooks:{type:{set:function(e,b3){if(!bJ.support.radioValue&&b3==="radio"&&bJ.nodeName(e,"input")){var b4=e.value;
e.setAttribute("type",b3);if(b4){e.value=b4}return b3}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(b7,b5,b8){var b4,e,b6,b3=b7.nodeType;if(!b7||b3===3||b3===8||b3===2){return}b6=b3!==1||!bJ.isXMLDoc(b7);if(b6){b5=bJ.propFix[b5]||b5;e=bJ.propHooks[b5]}if(b8!==aG){if(e&&"set" in e&&(b4=e.set(b7,b8,b5))!==aG){return b4
}else{return(b7[b5]=b8)}}else{if(e&&"get" in e&&(b4=e.get(b7,b5))!==null){return b4}else{return b7[b5]}}},propHooks:{tabIndex:{get:function(b3){var e=b3.getAttributeNode("tabindex");return e&&e.specified?parseInt(e.value,10):aF.test(b3.nodeName)||D.test(b3.nodeName)&&b3.href?0:aG}}}});bZ={get:function(b5,b3){var b6=bJ.prop(b5,b3),e=typeof b6==="boolean"&&b5.getAttribute(b3),b4=typeof b6==="boolean"?bF&&bP?e!=null:aq.test(b3)?b5[bJ.camelCase("default-"+b3)]:!!e:b5.getAttributeNode(b3);return b4&&b4.value!==false?b3.toLowerCase():aG
},set:function(b3,b4,e){if(b4===false){bJ.removeAttr(b3,e)}else{if(bF&&bP||!aq.test(e)){b3.setAttribute(!bP&&bJ.propFix[e]||e,e)}else{b3[bJ.camelCase("default-"+e)]=b3[e]=true}}return e}};if(!bF||!bP){bJ.attrHooks.value={get:function(b4,b3){var e=b4.getAttributeNode(b3);return bJ.nodeName(b4,"input")?b4.defaultValue:e&&e.specified?e.value:aG},set:function(b3,b4,e){if(bJ.nodeName(b3,"input")){b3.defaultValue=b4}else{return a8&&a8.set(b3,b4,e)}}}}if(!bP){a8=bJ.valHooks.button={get:function(b4,b3){var e=b4.getAttributeNode(b3);
return e&&(b3==="id"||b3==="name"||b3==="coords"?e.value!=="":e.specified)?e.value:aG},set:function(b4,b5,b3){var e=b4.getAttributeNode(b3);if(!e){b4.setAttributeNode((e=b4.ownerDocument.createAttribute(b3)))}e.value=b5+="";return b3==="value"||b5===b4.getAttribute(b3)?b5:aG}};bJ.attrHooks.contenteditable={get:a8.get,set:function(b3,b4,e){a8.set(b3,b4===""?false:b4,e)}};bJ.each(["width","height"],function(b3,e){bJ.attrHooks[e]=bJ.extend(bJ.attrHooks[e],{set:function(b4,b5){if(b5===""){b4.setAttribute(e,"auto");
return b5}}})})}if(!bJ.support.hrefNormalized){bJ.each(["href","src","width","height"],function(b3,e){bJ.attrHooks[e]=bJ.extend(bJ.attrHooks[e],{get:function(b5){var b4=b5.getAttribute(e,2);return b4==null?aG:b4}})});bJ.each(["href","src"],function(b3,e){bJ.propHooks[e]={get:function(b4){return b4.getAttribute(e,4)}}})}if(!bJ.support.style){bJ.attrHooks.style={get:function(e){return e.style.cssText||aG},set:function(e,b3){return(e.style.cssText=b3+"")}}}if(!bJ.support.optSelected){bJ.propHooks.selected=bJ.extend(bJ.propHooks.selected,{get:function(b3){var e=b3.parentNode;
if(e){e.selectedIndex;if(e.parentNode){e.parentNode.selectedIndex}}return null}})}if(!bJ.support.enctype){bJ.propFix.enctype="encoding"}if(!bJ.support.checkOn){bJ.each(["radio","checkbox"],function(){bJ.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}})}bJ.each(["radio","checkbox"],function(){bJ.valHooks[this]=bJ.extend(bJ.valHooks[this],{set:function(e,b3){if(bJ.isArray(b3)){return(e.checked=bJ.inArray(bJ(e).val(),b3)>=0)}}})});var bH=/^(?:input|select|textarea)$/i,a3=/^key/,bN=/^(?:mouse|contextmenu)|click/,bB=/^(?:focusinfocus|focusoutblur)$/,bu=/^([^.]*)(?:\.(.+)|)$/;
function R(){return true}function X(){return false}bJ.event={global:{},add:function(b6,cb,cg,b8,b7){var b9,ch,ci,b4,cd,ca,cf,b5,ce,e,b3,cc=bJ._data(b6);if(!cc){return}if(cg.handler){b4=cg;cg=b4.handler;b7=b4.selector}if(!cg.guid){cg.guid=bJ.guid++}if(!(ch=cc.events)){ch=cc.events={}}if(!(ca=cc.handle)){ca=cc.handle=function(cj){return typeof bJ!==aC&&(!cj||bJ.event.triggered!==cj.type)?bJ.event.dispatch.apply(ca.elem,arguments):aG};ca.elem=b6}cb=(cb||"").match(ac)||[""];ci=cb.length;while(ci--){b9=bu.exec(cb[ci])||[];
ce=b3=b9[1];e=(b9[2]||"").split(".").sort();cd=bJ.event.special[ce]||{};ce=(b7?cd.delegateType:cd.bindType)||ce;cd=bJ.event.special[ce]||{};cf=bJ.extend({type:ce,origType:b3,data:b8,handler:cg,guid:cg.guid,selector:b7,needsContext:b7&&bJ.expr.match.needsContext.test(b7),namespace:e.join(".")},b4);if(!(b5=ch[ce])){b5=ch[ce]=[];b5.delegateCount=0;if(!cd.setup||cd.setup.call(b6,b8,e,ca)===false){if(b6.addEventListener){b6.addEventListener(ce,ca,false)}else{if(b6.attachEvent){b6.attachEvent("on"+ce,ca)
}}}}if(cd.add){cd.add.call(b6,cf);if(!cf.handler.guid){cf.handler.guid=cg.guid}}if(b7){b5.splice(b5.delegateCount++,0,cf)}else{b5.push(cf)}bJ.event.global[ce]=true}b6=null},remove:function(b5,cb,ci,b6,ca){var b8,cf,b9,b7,ch,cg,cd,b4,ce,e,b3,cc=bJ.hasData(b5)&&bJ._data(b5);if(!cc||!(cg=cc.events)){return}cb=(cb||"").match(ac)||[""];ch=cb.length;while(ch--){b9=bu.exec(cb[ch])||[];ce=b3=b9[1];e=(b9[2]||"").split(".").sort();if(!ce){for(ce in cg){bJ.event.remove(b5,ce+cb[ch],ci,b6,true)}continue}cd=bJ.event.special[ce]||{};
ce=(b6?cd.delegateType:cd.bindType)||ce;b4=cg[ce]||[];b9=b9[2]&&new RegExp("(^|\\.)"+e.join("\\.(?:.*\\.|)")+"(\\.|$)");b7=b8=b4.length;while(b8--){cf=b4[b8];if((ca||b3===cf.origType)&&(!ci||ci.guid===cf.guid)&&(!b9||b9.test(cf.namespace))&&(!b6||b6===cf.selector||b6==="**"&&cf.selector)){b4.splice(b8,1);if(cf.selector){b4.delegateCount--}if(cd.remove){cd.remove.call(b5,cf)}}}if(b7&&!b4.length){if(!cd.teardown||cd.teardown.call(b5,e,cc.handle)===false){bJ.removeEvent(b5,ce,cc.handle)}delete cg[ce]
}}if(bJ.isEmptyObject(cg)){delete cc.handle;bJ._removeData(b5,"events")}},trigger:function(b3,ca,b6,ch){var cb,b5,cf,cg,cd,b9,b8,b7=[b6||l],ce=V.call(b3,"type")?b3.type:b3,b4=V.call(b3,"namespace")?b3.namespace.split("."):[];cf=b9=b6=b6||l;if(b6.nodeType===3||b6.nodeType===8){return}if(bB.test(ce+bJ.event.triggered)){return}if(ce.indexOf(".")>=0){b4=ce.split(".");ce=b4.shift();b4.sort()}b5=ce.indexOf(":")<0&&"on"+ce;b3=b3[bJ.expando]?b3:new bJ.Event(ce,typeof b3==="object"&&b3);b3.isTrigger=true;
b3.namespace=b4.join(".");b3.namespace_re=b3.namespace?new RegExp("(^|\\.)"+b4.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;b3.result=aG;if(!b3.target){b3.target=b6}ca=ca==null?[b3]:bJ.makeArray(ca,[b3]);cd=bJ.event.special[ce]||{};if(!ch&&cd.trigger&&cd.trigger.apply(b6,ca)===false){return}if(!ch&&!cd.noBubble&&!bJ.isWindow(b6)){cg=cd.delegateType||ce;if(!bB.test(cg+ce)){cf=cf.parentNode}for(;cf;cf=cf.parentNode){b7.push(cf);b9=cf}if(b9===(b6.ownerDocument||l)){b7.push(b9.defaultView||b9.parentWindow||a2)
}}b8=0;while((cf=b7[b8++])&&!b3.isPropagationStopped()){b3.type=b8>1?cg:cd.bindType||ce;cb=(bJ._data(cf,"events")||{})[b3.type]&&bJ._data(cf,"handle");if(cb){cb.apply(cf,ca)}cb=b5&&cf[b5];if(cb&&bJ.acceptData(cf)&&cb.apply&&cb.apply(cf,ca)===false){b3.preventDefault()}}b3.type=ce;if(!ch&&!b3.isDefaultPrevented()){if((!cd._default||cd._default.apply(b6.ownerDocument,ca)===false)&&!(ce==="click"&&bJ.nodeName(b6,"a"))&&bJ.acceptData(b6)){if(b5&&b6[ce]&&!bJ.isWindow(b6)){b9=b6[b5];if(b9){b6[b5]=null}bJ.event.triggered=ce;
try{b6[ce]()}catch(cc){}bJ.event.triggered=aG;if(b9){b6[b5]=b9}}}}return b3.result},dispatch:function(e){e=bJ.event.fix(e);var b7,b8,cc,b3,b5,cb=[],ca=a4.call(arguments),b4=(bJ._data(this,"events")||{})[e.type]||[],b9=bJ.event.special[e.type]||{};ca[0]=e;e.delegateTarget=this;if(b9.preDispatch&&b9.preDispatch.call(this,e)===false){return}cb=bJ.event.handlers.call(this,e,b4);b7=0;while((b3=cb[b7++])&&!e.isPropagationStopped()){e.currentTarget=b3.elem;b5=0;while((cc=b3.handlers[b5++])&&!e.isImmediatePropagationStopped()){if(!e.namespace_re||e.namespace_re.test(cc.namespace)){e.handleObj=cc;
e.data=cc.data;var b6=((bJ.event.special[cc.origType]||{}).handle||cc.handler);if(b6.apply){b8=b6.apply(b3.elem,ca)}if(b8!==aG){if((e.result=b8)===false){e.preventDefault();e.stopPropagation()}}}}}if(b9.postDispatch){b9.postDispatch.call(this,e)}return e.result},handlers:function(e,b4){var b3,b9,b7,b6,b8=[],b5=b4.delegateCount,ca=e.target;if(b5&&ca.nodeType&&(!e.button||e.type!=="click")){for(;ca!=this;ca=ca.parentNode||this){if(ca.nodeType===1&&(ca.disabled!==true||e.type!=="click")){b7=[];for(b6=0;
b6<b5;b6++){b9=b4[b6];b3=b9.selector+" ";if(b7[b3]===aG){b7[b3]=b9.needsContext?bJ(b3,this).index(ca)>=0:bJ.find(b3,this,null,[ca]).length}if(b7[b3]){b7.push(b9)}}if(b7.length){b8.push({elem:ca,handlers:b7})}}}}if(b5<b4.length){b8.push({elem:this,handlers:b4.slice(b5)})}return b8},fix:function(b5){if(b5[bJ.expando]){return b5}var b3,b8,b7,b4=b5.type,e=b5,b6=this.fixHooks[b4];if(!b6){this.fixHooks[b4]=b6=bN.test(b4)?this.mouseHooks:a3.test(b4)?this.keyHooks:{}}b7=b6.props?this.props.concat(b6.props):this.props;
b5=new bJ.Event(e);b3=b7.length;while(b3--){b8=b7[b3];b5[b8]=e[b8]}if(!b5.target){b5.target=e.srcElement||l}if(b5.target.nodeType===3){b5.target=b5.target.parentNode}b5.metaKey=!!b5.metaKey;return b6.filter?b6.filter(b5,e):b5},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(b3,e){if(b3.which==null){b3.which=e.charCode!=null?e.charCode:e.keyCode
}return b3}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(b5,b4){var e,b6,b7,b3=b4.button,b8=b4.fromElement;if(b5.pageX==null&&b4.clientX!=null){b6=b5.target.ownerDocument||l;b7=b6.documentElement;e=b6.body;b5.pageX=b4.clientX+(b7&&b7.scrollLeft||e&&e.scrollLeft||0)-(b7&&b7.clientLeft||e&&e.clientLeft||0);b5.pageY=b4.clientY+(b7&&b7.scrollTop||e&&e.scrollTop||0)-(b7&&b7.clientTop||e&&e.clientTop||0)
}if(!b5.relatedTarget&&b8){b5.relatedTarget=b8===b5.target?b4.toElement:b8}if(!b5.which&&b3!==aG){b5.which=(b3&1?1:(b3&2?3:(b3&4?2:0)))}return b5}},special:{load:{noBubble:true},click:{trigger:function(){if(bJ.nodeName(this,"input")&&this.type==="checkbox"&&this.click){this.click();return false}}},focus:{trigger:function(){if(this!==l.activeElement&&this.focus){try{this.focus();return false}catch(b3){}}},delegateType:"focusin"},blur:{trigger:function(){if(this===l.activeElement&&this.blur){this.blur();
return false}},delegateType:"focusout"},beforeunload:{postDispatch:function(e){if(e.result!==aG){e.originalEvent.returnValue=e.result}}}},simulate:function(b4,b6,b5,b3){var b7=bJ.extend(new bJ.Event(),b5,{type:b4,isSimulated:true,originalEvent:{}});if(b3){bJ.event.trigger(b7,null,b6)}else{bJ.event.dispatch.call(b6,b7)}if(b7.isDefaultPrevented()){b5.preventDefault()}}};bJ.removeEvent=l.removeEventListener?function(b3,e,b4){if(b3.removeEventListener){b3.removeEventListener(e,b4,false)}}:function(b4,b3,b5){var e="on"+b3;
if(b4.detachEvent){if(typeof b4[e]===aC){b4[e]=null}b4.detachEvent(e,b5)}};bJ.Event=function(b3,e){if(!(this instanceof bJ.Event)){return new bJ.Event(b3,e)}if(b3&&b3.type){this.originalEvent=b3;this.type=b3.type;this.isDefaultPrevented=(b3.defaultPrevented||b3.returnValue===false||b3.getPreventDefault&&b3.getPreventDefault())?R:X}else{this.type=b3}if(e){bJ.extend(this,e)}this.timeStamp=b3&&b3.timeStamp||bJ.now();this[bJ.expando]=true};bJ.Event.prototype={isDefaultPrevented:X,isPropagationStopped:X,isImmediatePropagationStopped:X,preventDefault:function(){var b3=this.originalEvent;
this.isDefaultPrevented=R;if(!b3){return}if(b3.preventDefault){b3.preventDefault()}else{b3.returnValue=false}},stopPropagation:function(){var b3=this.originalEvent;this.isPropagationStopped=R;if(!b3){return}if(b3.stopPropagation){b3.stopPropagation()}b3.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=R;this.stopPropagation()}};bJ.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(b3,e){bJ.event.special[b3]={delegateType:e,bindType:e,handle:function(b6){var b4,b8=this,b7=b6.relatedTarget,b5=b6.handleObj;
if(!b7||(b7!==b8&&!bJ.contains(b8,b7))){b6.type=b5.origType;b4=b5.handler.apply(this,arguments);b6.type=e}return b4}}});if(!bJ.support.submitBubbles){bJ.event.special.submit={setup:function(){if(bJ.nodeName(this,"form")){return false}bJ.event.add(this,"click._submit keypress._submit",function(b5){var b4=b5.target,b3=bJ.nodeName(b4,"input")||bJ.nodeName(b4,"button")?b4.form:aG;if(b3&&!bJ._data(b3,"submitBubbles")){bJ.event.add(b3,"submit._submit",function(e){e._submit_bubble=true});bJ._data(b3,"submitBubbles",true)
}})},postDispatch:function(e){if(e._submit_bubble){delete e._submit_bubble;if(this.parentNode&&!e.isTrigger){bJ.event.simulate("submit",this.parentNode,e,true)}}},teardown:function(){if(bJ.nodeName(this,"form")){return false}bJ.event.remove(this,"._submit")}}}if(!bJ.support.changeBubbles){bJ.event.special.change={setup:function(){if(bH.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){bJ.event.add(this,"propertychange._change",function(e){if(e.originalEvent.propertyName==="checked"){this._just_changed=true
}});bJ.event.add(this,"click._change",function(e){if(this._just_changed&&!e.isTrigger){this._just_changed=false}bJ.event.simulate("change",this,e,true)})}return false}bJ.event.add(this,"beforeactivate._change",function(b4){var b3=b4.target;if(bH.test(b3.nodeName)&&!bJ._data(b3,"changeBubbles")){bJ.event.add(b3,"change._change",function(e){if(this.parentNode&&!e.isSimulated&&!e.isTrigger){bJ.event.simulate("change",this.parentNode,e,true)}});bJ._data(b3,"changeBubbles",true)}})},handle:function(b3){var e=b3.target;
if(this!==e||b3.isSimulated||b3.isTrigger||(e.type!=="radio"&&e.type!=="checkbox")){return b3.handleObj.handler.apply(this,arguments)}},teardown:function(){bJ.event.remove(this,"._change");return !bH.test(this.nodeName)}}}if(!bJ.support.focusinBubbles){bJ.each({focus:"focusin",blur:"focusout"},function(b5,e){var b3=0,b4=function(b6){bJ.event.simulate(e,b6.target,bJ.event.fix(b6),true)};bJ.event.special[e]={setup:function(){if(b3++===0){l.addEventListener(b5,b4,true)}},teardown:function(){if(--b3===0){l.removeEventListener(b5,b4,true)
}}}})}bJ.fn.extend({on:function(b4,e,b7,b6,b3){var b5,b8;if(typeof b4==="object"){if(typeof e!=="string"){b7=b7||e;e=aG}for(b5 in b4){this.on(b5,e,b7,b4[b5],b3)}return this}if(b7==null&&b6==null){b6=e;b7=e=aG}else{if(b6==null){if(typeof e==="string"){b6=b7;b7=aG}else{b6=b7;b7=e;e=aG}}}if(b6===false){b6=X}else{if(!b6){return this}}if(b3===1){b8=b6;b6=function(b9){bJ().off(b9);return b8.apply(this,arguments)};b6.guid=b8.guid||(b8.guid=bJ.guid++)}return this.each(function(){bJ.event.add(this,b4,b6,b7,e)
})},one:function(b3,e,b5,b4){return this.on(b3,e,b5,b4,1)},off:function(b4,e,b6){var b3,b5;if(b4&&b4.preventDefault&&b4.handleObj){b3=b4.handleObj;bJ(b4.delegateTarget).off(b3.namespace?b3.origType+"."+b3.namespace:b3.origType,b3.selector,b3.handler);return this}if(typeof b4==="object"){for(b5 in b4){this.off(b5,e,b4[b5])}return this}if(e===false||typeof e==="function"){b6=e;e=aG}if(b6===false){b6=X}return this.each(function(){bJ.event.remove(this,b4,b6,e)})},bind:function(e,b4,b3){return this.on(e,null,b4,b3)
},unbind:function(e,b3){return this.off(e,null,b3)},delegate:function(e,b3,b5,b4){return this.on(b3,e,b5,b4)},undelegate:function(e,b3,b4){return arguments.length===1?this.off(e,"**"):this.off(b3,e||"**",b4)},trigger:function(e,b3){return this.each(function(){bJ.event.trigger(e,b3,this)})},triggerHandler:function(e,b4){var b3=this[0];if(b3){return bJ.event.trigger(e,b4,b3,true)}}});
/*!
 * Sizzle CSS Selector Engine
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://sizzlejs.com/
 */
(function(da,ch){var cx,cb,cn,cH,cJ,cS,cT,dg,cV,cB,co,cd,cZ,db,ca,cF,cD,c5="sizzle"+-(new Date()),cI=da.document,dd={},de=0,c0=0,b5=cz(),c4=cz(),cG=cz(),c9=typeof ch,cN=1<<31,c7=[],c8=c7.pop,b4=c7.push,cm=c7.slice,b9=c7.indexOf||function(di){var dh=0,e=this.length;
for(;dh<e;dh++){if(this[dh]===di){return dh}}return -1},cp="[\\x20\\t\\r\\n\\f]",b3="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",cK=b3.replace("w","w#"),ci="([*^$|!~]?=)",c2="\\["+cp+"*("+b3+")"+cp+"*(?:"+ci+cp+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+cK+")|)|)"+cp+"*\\]",ck=":("+b3+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+c2.replace(3,8)+")*)|.*)\\)|)",cr=new RegExp("^"+cp+"+|((?:^|[^\\\\])(?:\\\\.)*)"+cp+"+$","g"),cu=new RegExp("^"+cp+"*,"+cp+"*"),cA=new RegExp("^"+cp+"*([\\x20\\t\\r\\n\\f>+~])"+cp+"*"),cP=new RegExp(ck),cQ=new RegExp("^"+cK+"$"),cY={ID:new RegExp("^#("+b3+")"),CLASS:new RegExp("^\\.("+b3+")"),NAME:new RegExp("^\\[name=['\"]?("+b3+")['\"]?\\]"),TAG:new RegExp("^("+b3.replace("w","w*")+")"),ATTR:new RegExp("^"+c2),PSEUDO:new RegExp("^"+ck),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+cp+"*(even|odd|(([+-]|)(\\d*)n|)"+cp+"*(?:([+-]|)"+cp+"*(\\d+)|))"+cp+"*\\)|)","i"),needsContext:new RegExp("^"+cp+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+cp+"*((?:-\\d)?\\d*)"+cp+"*\\)|)(?=[^-]|$)","i")},cW=/[\x20\t\r\n\f]*[+~]/,cM=/^[^{]+\{\s*\[native code/,cO=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,b8=/^(?:input|select|textarea|button)$/i,cl=/^h\d$/i,cL=/'|\\/g,ct=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,cs=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,c1=function(e,di){var dh="0x"+di-65536;
return dh!==dh?di:dh<0?String.fromCharCode(dh+65536):String.fromCharCode(dh>>10|55296,dh&1023|56320)};try{cm.call(cI.documentElement.childNodes,0)[0].nodeType}catch(cC){cm=function(dh){var di,e=[];while((di=this[dh++])){e.push(di)}return e}}function cE(e){return cM.test(e+"")}function cz(){var e,dh=[];return(e=function(di,dj){if(dh.push(di+=" ")>cn.cacheLength){delete e[dh.shift()]}return(e[di]=dj)})}function cj(e){e[c5]=true;return e}function cc(dh){var dj=cB.createElement("div");try{return dh(dj)
}catch(di){return false}finally{dj=null}}function cv(dp,dh,dt,dv){var du,dl,dm,dr,ds,dk,dj,e,di,dq;if((dh?dh.ownerDocument||dh:cI)!==cB){cV(dh)}dh=dh||cB;dt=dt||[];if(!dp||typeof dp!=="string"){return dt}if((dr=dh.nodeType)!==1&&dr!==9){return[]}if(!cd&&!dv){if((du=cO.exec(dp))){if((dm=du[1])){if(dr===9){dl=dh.getElementById(dm);if(dl&&dl.parentNode){if(dl.id===dm){dt.push(dl);return dt}}else{return dt}}else{if(dh.ownerDocument&&(dl=dh.ownerDocument.getElementById(dm))&&cF(dh,dl)&&dl.id===dm){dt.push(dl);
return dt}}}else{if(du[2]){b4.apply(dt,cm.call(dh.getElementsByTagName(dp),0));return dt}else{if((dm=du[3])&&dd.getByClassName&&dh.getElementsByClassName){b4.apply(dt,cm.call(dh.getElementsByClassName(dm),0));return dt}}}}if(dd.qsa&&!cZ.test(dp)){dj=true;e=c5;di=dh;dq=dr===9&&dp;if(dr===1&&dh.nodeName.toLowerCase()!=="object"){dk=cf(dp);if((dj=dh.getAttribute("id"))){e=dj.replace(cL,"\\$&")}else{dh.setAttribute("id",e)}e="[id='"+e+"'] ";ds=dk.length;while(ds--){dk[ds]=e+cg(dk[ds])}di=cW.test(dp)&&dh.parentNode||dh;
dq=dk.join(",")}if(dq){try{b4.apply(dt,cm.call(di.querySelectorAll(dq),0));return dt}catch(dn){}finally{if(!dj){dh.removeAttribute("id")}}}}}return dc(dp.replace(cr,"$1"),dh,dt,dv)}cJ=cv.isXML=function(e){var dh=e&&(e.ownerDocument||e).documentElement;return dh?dh.nodeName!=="HTML":false};cV=cv.setDocument=function(e){var dh=e?e.ownerDocument||e:cI;if(dh===cB||dh.nodeType!==9||!dh.documentElement){return cB}cB=dh;co=dh.documentElement;cd=cJ(dh);dd.tagNameNoComments=cc(function(di){di.appendChild(dh.createComment(""));
return !di.getElementsByTagName("*").length});dd.attributes=cc(function(dj){dj.innerHTML="<select></select>";var di=typeof dj.lastChild.getAttribute("multiple");return di!=="boolean"&&di!=="string"});dd.getByClassName=cc(function(di){di.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!di.getElementsByClassName||!di.getElementsByClassName("e").length){return false}di.lastChild.className="e";return di.getElementsByClassName("e").length===2});dd.getByName=cc(function(dj){dj.id=c5+0;
dj.innerHTML="<a name='"+c5+"'></a><div name='"+c5+"'></div>";co.insertBefore(dj,co.firstChild);var di=dh.getElementsByName&&dh.getElementsByName(c5).length===2+dh.getElementsByName(c5+0).length;dd.getIdNotName=!dh.getElementById(c5);co.removeChild(dj);return di});cn.attrHandle=cc(function(di){di.innerHTML="<a href='#'></a>";return di.firstChild&&typeof di.firstChild.getAttribute!==c9&&di.firstChild.getAttribute("href")==="#"})?{}:{href:function(di){return di.getAttribute("href",2)},type:function(di){return di.getAttribute("type")
}};if(dd.getIdNotName){cn.find.ID=function(dk,dj){if(typeof dj.getElementById!==c9&&!cd){var di=dj.getElementById(dk);return di&&di.parentNode?[di]:[]}};cn.filter.ID=function(dj){var di=dj.replace(cs,c1);return function(dk){return dk.getAttribute("id")===di}}}else{cn.find.ID=function(dk,dj){if(typeof dj.getElementById!==c9&&!cd){var di=dj.getElementById(dk);return di?di.id===dk||typeof di.getAttributeNode!==c9&&di.getAttributeNode("id").value===dk?[di]:ch:[]}};cn.filter.ID=function(dj){var di=dj.replace(cs,c1);
return function(dl){var dk=typeof dl.getAttributeNode!==c9&&dl.getAttributeNode("id");return dk&&dk.value===di}}}cn.find.TAG=dd.tagNameNoComments?function(di,dj){if(typeof dj.getElementsByTagName!==c9){return dj.getElementsByTagName(di)}}:function(di,dm){var dn,dl=[],dk=0,dj=dm.getElementsByTagName(di);if(di==="*"){while((dn=dj[dk++])){if(dn.nodeType===1){dl.push(dn)}}return dl}return dj};cn.find.NAME=dd.getByName&&function(di,dj){if(typeof dj.getElementsByName!==c9){return dj.getElementsByName(name)
}};cn.find.CLASS=dd.getByClassName&&function(dj,di){if(typeof di.getElementsByClassName!==c9&&!cd){return di.getElementsByClassName(dj)}};db=[];cZ=[":focus"];if((dd.qsa=cE(dh.querySelectorAll))){cc(function(di){di.innerHTML="<select><option selected=''></option></select>";if(!di.querySelectorAll("[selected]").length){cZ.push("\\["+cp+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)")}if(!di.querySelectorAll(":checked").length){cZ.push(":checked")}});cc(function(di){di.innerHTML="<input type='hidden' i=''/>";
if(di.querySelectorAll("[i^='']").length){cZ.push("[*^$]="+cp+"*(?:\"\"|'')")}if(!di.querySelectorAll(":enabled").length){cZ.push(":enabled",":disabled")}di.querySelectorAll("*,:x");cZ.push(",.*:")})}if((dd.matchesSelector=cE((ca=co.matchesSelector||co.mozMatchesSelector||co.webkitMatchesSelector||co.oMatchesSelector||co.msMatchesSelector)))){cc(function(di){dd.disconnectedMatch=ca.call(di,"div");ca.call(di,"[s!='']:x");db.push("!=",ck)})}cZ=new RegExp(cZ.join("|"));db=new RegExp(db.join("|"));cF=cE(co.contains)||co.compareDocumentPosition?function(dj,di){var dl=dj.nodeType===9?dj.documentElement:dj,dk=di&&di.parentNode;
return dj===dk||!!(dk&&dk.nodeType===1&&(dl.contains?dl.contains(dk):dj.compareDocumentPosition&&dj.compareDocumentPosition(dk)&16))}:function(dj,di){if(di){while((di=di.parentNode)){if(di===dj){return true}}}return false};cD=co.compareDocumentPosition?function(dj,di){var dk;if(dj===di){cT=true;return 0}if((dk=di.compareDocumentPosition&&dj.compareDocumentPosition&&dj.compareDocumentPosition(di))){if(dk&1||dj.parentNode&&dj.parentNode.nodeType===11){if(dj===dh||cF(cI,dj)){return -1}if(di===dh||cF(cI,di)){return 1
}return 0}return dk&4?-1:1}return dj.compareDocumentPosition?-1:1}:function(dj,di){var dq,dm=0,dp=dj.parentNode,dl=di.parentNode,dk=[dj],dn=[di];if(dj===di){cT=true;return 0}else{if(!dp||!dl){return dj===dh?-1:di===dh?1:dp?-1:dl?1:0}else{if(dp===dl){return b6(dj,di)}}}dq=dj;while((dq=dq.parentNode)){dk.unshift(dq)}dq=di;while((dq=dq.parentNode)){dn.unshift(dq)}while(dk[dm]===dn[dm]){dm++}return dm?b6(dk[dm],dn[dm]):dk[dm]===cI?-1:dn[dm]===cI?1:0};cT=false;[0,0].sort(cD);dd.detectDuplicates=cT;return cB
};cv.matches=function(dh,e){return cv(dh,null,null,e)};cv.matchesSelector=function(di,dk){if((di.ownerDocument||di)!==cB){cV(di)}dk=dk.replace(ct,"='$1']");if(dd.matchesSelector&&!cd&&(!db||!db.test(dk))&&!cZ.test(dk)){try{var dh=ca.call(di,dk);if(dh||dd.disconnectedMatch||di.document&&di.document.nodeType!==11){return dh}}catch(dj){}}return cv(dk,cB,null,[di]).length>0};cv.contains=function(e,dh){if((e.ownerDocument||e)!==cB){cV(e)}return cF(e,dh)};cv.attr=function(dh,e){var di;if((dh.ownerDocument||dh)!==cB){cV(dh)
}if(!cd){e=e.toLowerCase()}if((di=cn.attrHandle[e])){return di(dh)}if(cd||dd.attributes){return dh.getAttribute(e)}return((di=dh.getAttributeNode(e))||dh.getAttribute(e))&&dh[e]===true?e:di&&di.specified?di.value:null};cv.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};cv.uniqueSort=function(di){var dj,dk=[],dh=1,e=0;cT=!dd.detectDuplicates;di.sort(cD);if(cT){for(;(dj=di[dh]);dh++){if(dj===di[dh-1]){e=dk.push(dh)}}while(e--){di.splice(dk[e],1)}}return di};function b6(dh,e){var dj=e&&dh,di=dj&&(~e.sourceIndex||cN)-(~dh.sourceIndex||cN);
if(di){return di}if(dj){while((dj=dj.nextSibling)){if(dj===e){return -1}}}return dh?1:-1}function cw(e){return function(di){var dh=di.nodeName.toLowerCase();return dh==="input"&&di.type===e}}function b7(e){return function(di){var dh=di.nodeName.toLowerCase();return(dh==="input"||dh==="button")&&di.type===e}}function c3(e){return cj(function(dh){dh=+dh;return cj(function(di,dm){var dk,dj=e([],di.length,dh),dl=dj.length;while(dl--){if(di[(dk=dj[dl])]){di[dk]=!(dm[dk]=di[dk])}}})})}cH=cv.getText=function(dk){var dj,dh="",di=0,e=dk.nodeType;
if(!e){for(;(dj=dk[di]);di++){dh+=cH(dj)}}else{if(e===1||e===9||e===11){if(typeof dk.textContent==="string"){return dk.textContent}else{for(dk=dk.firstChild;dk;dk=dk.nextSibling){dh+=cH(dk)}}}else{if(e===3||e===4){return dk.nodeValue}}}return dh};cn=cv.selectors={cacheLength:50,createPseudo:cj,match:cY,find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(cs,c1);e[3]=(e[4]||e[5]||"").replace(cs,c1);
if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if(e[1].slice(0,3)==="nth"){if(!e[3]){cv.error(e[0])}e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd"));e[5]=+((e[7]+e[8])||e[3]==="odd")}else{if(e[3]){cv.error(e[0])}}return e},PSEUDO:function(dh){var e,di=!dh[5]&&dh[2];if(cY.CHILD.test(dh[0])){return null}if(dh[4]){dh[2]=dh[4]}else{if(di&&cP.test(di)&&(e=cf(di,true))&&(e=di.indexOf(")",di.length-e)-di.length)){dh[0]=dh[0].slice(0,e);dh[2]=di.slice(0,e)
}}return dh.slice(0,3)}},filter:{TAG:function(e){if(e==="*"){return function(){return true}}e=e.replace(cs,c1).toLowerCase();return function(dh){return dh.nodeName&&dh.nodeName.toLowerCase()===e}},CLASS:function(e){var dh=b5[e+" "];return dh||(dh=new RegExp("(^|"+cp+")"+e+"("+cp+"|$)"))&&b5(e,function(di){return dh.test(di.className||(typeof di.getAttribute!==c9&&di.getAttribute("class"))||"")})},ATTR:function(di,dh,e){return function(dk){var dj=cv.attr(dk,di);if(dj==null){return dh==="!="}if(!dh){return true
}dj+="";return dh==="="?dj===e:dh==="!="?dj!==e:dh==="^="?e&&dj.indexOf(e)===0:dh==="*="?e&&dj.indexOf(e)>-1:dh==="$="?e&&dj.slice(-e.length)===e:dh==="~="?(" "+dj+" ").indexOf(e)>-1:dh==="|="?dj===e||dj.slice(0,e.length+1)===e+"-":false}},CHILD:function(dh,dk,dj,dl,di){var dn=dh.slice(0,3)!=="nth",e=dh.slice(-4)!=="last",dm=dk==="of-type";return dl===1&&di===0?function(dp){return !!dp.parentNode}:function(dv,dt,dy){var dp,dB,dw,dA,dx,ds,du=dn!==e?"nextSibling":"previousSibling",dz=dv.parentNode,dr=dm&&dv.nodeName.toLowerCase(),dq=!dy&&!dm;
if(dz){if(dn){while(du){dw=dv;while((dw=dw[du])){if(dm?dw.nodeName.toLowerCase()===dr:dw.nodeType===1){return false}}ds=du=dh==="only"&&!ds&&"nextSibling"}return true}ds=[e?dz.firstChild:dz.lastChild];if(e&&dq){dB=dz[c5]||(dz[c5]={});dp=dB[dh]||[];dx=dp[0]===de&&dp[1];dA=dp[0]===de&&dp[2];dw=dx&&dz.childNodes[dx];while((dw=++dx&&dw&&dw[du]||(dA=dx=0)||ds.pop())){if(dw.nodeType===1&&++dA&&dw===dv){dB[dh]=[de,dx,dA];break}}}else{if(dq&&(dp=(dv[c5]||(dv[c5]={}))[dh])&&dp[0]===de){dA=dp[1]}else{while((dw=++dx&&dw&&dw[du]||(dA=dx=0)||ds.pop())){if((dm?dw.nodeName.toLowerCase()===dr:dw.nodeType===1)&&++dA){if(dq){(dw[c5]||(dw[c5]={}))[dh]=[de,dA]
}if(dw===dv){break}}}}}dA-=di;return dA===dl||(dA%dl===0&&dA/dl>=0)}}},PSEUDO:function(dj,di){var e,dh=cn.pseudos[dj]||cn.setFilters[dj.toLowerCase()]||cv.error("unsupported pseudo: "+dj);if(dh[c5]){return dh(di)}if(dh.length>1){e=[dj,dj,"",di];return cn.setFilters.hasOwnProperty(dj.toLowerCase())?cj(function(dm,dp){var dl,dk=dh(dm,di),dn=dk.length;while(dn--){dl=b9.call(dm,dk[dn]);dm[dl]=!(dp[dl]=dk[dn])}}):function(dk){return dh(dk,0,e)}}return dh}},pseudos:{not:cj(function(e){var dh=[],di=[],dj=cS(e.replace(cr,"$1"));
return dj[c5]?cj(function(dl,dr,dp,dm){var dq,dk=dj(dl,null,dm,[]),dn=dl.length;while(dn--){if((dq=dk[dn])){dl[dn]=!(dr[dn]=dq)}}}):function(dm,dl,dk){dh[0]=dm;dj(dh,null,dk,di);return !di.pop()}}),has:cj(function(e){return function(dh){return cv(e,dh).length>0}}),contains:cj(function(e){return function(dh){return(dh.textContent||dh.innerText||cH(dh)).indexOf(e)>-1}}),lang:cj(function(e){if(!cQ.test(e||"")){cv.error("unsupported lang: "+e)}e=e.replace(cs,c1).toLowerCase();return function(di){var dh;
do{if((dh=cd?di.getAttribute("xml:lang")||di.getAttribute("lang"):di.lang)){dh=dh.toLowerCase();return dh===e||dh.indexOf(e+"-")===0}}while((di=di.parentNode)&&di.nodeType===1);return false}}),target:function(e){var dh=da.location&&da.location.hash;return dh&&dh.slice(1)===e.id},root:function(e){return e===co},focus:function(e){return e===cB.activeElement&&(!cB.hasFocus||cB.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===false},disabled:function(e){return e.disabled===true
},checked:function(e){var dh=e.nodeName.toLowerCase();return(dh==="input"&&!!e.checked)||(dh==="option"&&!!e.selected)},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling){if(e.nodeName>"@"||e.nodeType===3||e.nodeType===4){return false}}return true},parent:function(e){return !cn.pseudos.empty(e)},header:function(e){return cl.test(e.nodeName)},input:function(e){return b8.test(e.nodeName)},button:function(dh){var e=dh.nodeName.toLowerCase();
return e==="input"&&dh.type==="button"||e==="button"},text:function(dh){var e;return dh.nodeName.toLowerCase()==="input"&&dh.type==="text"&&((e=dh.getAttribute("type"))==null||e.toLowerCase()===dh.type)},first:c3(function(){return[0]}),last:c3(function(e,dh){return[dh-1]}),eq:c3(function(e,di,dh){return[dh<0?dh+di:dh]}),even:c3(function(e,di){var dh=0;for(;dh<di;dh+=2){e.push(dh)}return e}),odd:c3(function(e,di){var dh=1;for(;dh<di;dh+=2){e.push(dh)}return e}),lt:c3(function(e,dj,di){var dh=di<0?di+dj:di;
for(;--dh>=0;){e.push(dh)}return e}),gt:c3(function(e,dj,di){var dh=di<0?di+dj:di;for(;++dh<dj;){e.push(dh)}return e})}};for(cx in {radio:true,checkbox:true,file:true,password:true,image:true}){cn.pseudos[cx]=cw(cx)}for(cx in {submit:true,reset:true}){cn.pseudos[cx]=b7(cx)}function cf(dk,dq){var dh,dl,dn,dp,dm,di,e,dj=c4[dk+" "];if(dj){return dq?0:dj.slice(0)}dm=dk;di=[];e=cn.preFilter;while(dm){if(!dh||(dl=cu.exec(dm))){if(dl){dm=dm.slice(dl[0].length)||dm}di.push(dn=[])}dh=false;if((dl=cA.exec(dm))){dh=dl.shift();
dn.push({value:dh,type:dl[0].replace(cr," ")});dm=dm.slice(dh.length)}for(dp in cn.filter){if((dl=cY[dp].exec(dm))&&(!e[dp]||(dl=e[dp](dl)))){dh=dl.shift();dn.push({value:dh,type:dp,matches:dl});dm=dm.slice(dh.length)}}if(!dh){break}}return dq?dm.length:dm?cv.error(dk):c4(dk,di).slice(0)}function cg(dj){var di=0,dh=dj.length,e="";for(;di<dh;di++){e+=dj[di].value}return e}function cq(dk,di,dj){var e=di.dir,dl=dj&&e==="parentNode",dh=c0++;return di.first?function(dp,dn,dm){while((dp=dp[e])){if(dp.nodeType===1||dl){return dk(dp,dn,dm)
}}}:function(dr,dp,dn){var dt,dm,dq,ds=de+" "+dh;if(dn){while((dr=dr[e])){if(dr.nodeType===1||dl){if(dk(dr,dp,dn)){return true}}}}else{while((dr=dr[e])){if(dr.nodeType===1||dl){dq=dr[c5]||(dr[c5]={});if((dm=dq[e])&&dm[0]===ds){if((dt=dm[1])===true||dt===cb){return dt===true}}else{dm=dq[e]=[ds];dm[1]=dk(dr,dp,dn)||cb;if(dm[1]===true){return true}}}}}}}function df(e){return e.length>1?function(dk,dj,dh){var di=e.length;while(di--){if(!e[di](dk,dj,dh)){return false}}return true}:e[0]}function cX(e,dh,di,dj,dm){var dk,dq=[],dl=0,dn=e.length,dp=dh!=null;
for(;dl<dn;dl++){if((dk=e[dl])){if(!di||di(dk,dj,dm)){dq.push(dk);if(dp){dh.push(dl)}}}}return dq}function ce(di,dh,dk,dj,dl,e){if(dj&&!dj[c5]){dj=ce(dj)}if(dl&&!dl[c5]){dl=ce(dl,e)}return cj(function(dx,du,dp,dw){var dz,dv,dr,dq=[],dy=[],dn=du.length,dm=dx||cy(dh||"*",dp.nodeType?[dp]:dp,[]),ds=di&&(dx||!dh)?cX(dm,dq,di,dp,dw):dm,dt=dk?dl||(dx?di:dn||dj)?[]:du:ds;if(dk){dk(ds,dt,dp,dw)}if(dj){dz=cX(dt,dy);dj(dz,[],dp,dw);dv=dz.length;while(dv--){if((dr=dz[dv])){dt[dy[dv]]=!(ds[dy[dv]]=dr)}}}if(dx){if(dl||di){if(dl){dz=[];
dv=dt.length;while(dv--){if((dr=dt[dv])){dz.push((ds[dv]=dr))}}dl(null,(dt=[]),dz,dw)}dv=dt.length;while(dv--){if((dr=dt[dv])&&(dz=dl?b9.call(dx,dr):dq[dv])>-1){dx[dz]=!(du[dz]=dr)}}}}else{dt=cX(dt===du?dt.splice(dn,dt.length):dt);if(dl){dl(null,du,dt,dw)}else{b4.apply(du,dt)}}})}function c6(dm){var dh,dk,di,dl=dm.length,dq=cn.relative[dm[0].type],dr=dq||cn.relative[" "],dj=dq?1:0,dn=cq(function(ds){return ds===dh},dr,true),dp=cq(function(ds){return b9.call(dh,ds)>-1},dr,true),e=[function(du,dt,ds){return(!dq&&(ds||dt!==dg))||((dh=dt).nodeType?dn(du,dt,ds):dp(du,dt,ds))
}];for(;dj<dl;dj++){if((dk=cn.relative[dm[dj].type])){e=[cq(df(e),dk)]}else{dk=cn.filter[dm[dj].type].apply(null,dm[dj].matches);if(dk[c5]){di=++dj;for(;di<dl;di++){if(cn.relative[dm[di].type]){break}}return ce(dj>1&&df(e),dj>1&&cg(dm.slice(0,dj-1)).replace(cr,"$1"),dk,dj<di&&c6(dm.slice(dj,di)),di<dl&&c6((dm=dm.slice(di))),di<dl&&cg(dm))}e.push(dk)}}return df(e)}function cU(dj,di){var dl=0,e=di.length>0,dk=dj.length>0,dh=function(dw,dq,dv,du,dC){var dr,ds,dx,dB=[],dA=0,dt="0",dm=dw&&[],dy=dC!=null,dz=dg,dp=dw||dk&&cn.find.TAG("*",dC&&dq.parentNode||dq),dn=(de+=dz==null?1:Math.random()||0.1);
if(dy){dg=dq!==cB&&dq;cb=dl}for(;(dr=dp[dt])!=null;dt++){if(dk&&dr){ds=0;while((dx=dj[ds++])){if(dx(dr,dq,dv)){du.push(dr);break}}if(dy){de=dn;cb=++dl}}if(e){if((dr=!dx&&dr)){dA--}if(dw){dm.push(dr)}}}dA+=dt;if(e&&dt!==dA){ds=0;while((dx=di[ds++])){dx(dm,dB,dq,dv)}if(dw){if(dA>0){while(dt--){if(!(dm[dt]||dB[dt])){dB[dt]=c8.call(du)}}}dB=cX(dB)}b4.apply(du,dB);if(dy&&!dw&&dB.length>0&&(dA+di.length)>1){cv.uniqueSort(du)}}if(dy){de=dn;dg=dz}return dm};return e?cj(dh):dh}cS=cv.compile=function(e,dl){var di,dh=[],dk=[],dj=cG[e+" "];
if(!dj){if(!dl){dl=cf(e)}di=dl.length;while(di--){dj=c6(dl[di]);if(dj[c5]){dh.push(dj)}else{dk.push(dj)}}dj=cG(e,cU(dk,dh))}return dj};function cy(dh,dk,dj){var di=0,e=dk.length;for(;di<e;di++){cv(dh,dk[di],dj)}return dj}function dc(di,e,dj,dm){var dk,dp,dh,dq,dn,dl=cf(di);if(!dm){if(dl.length===1){dp=dl[0]=dl[0].slice(0);if(dp.length>2&&(dh=dp[0]).type==="ID"&&e.nodeType===9&&!cd&&cn.relative[dp[1].type]){e=cn.find.ID(dh.matches[0].replace(cs,c1),e)[0];if(!e){return dj}di=di.slice(dp.shift().value.length)
}dk=cY.needsContext.test(di)?0:dp.length;while(dk--){dh=dp[dk];if(cn.relative[(dq=dh.type)]){break}if((dn=cn.find[dq])){if((dm=dn(dh.matches[0].replace(cs,c1),cW.test(dp[0].type)&&e.parentNode||e))){dp.splice(dk,1);di=dm.length&&cg(dp);if(!di){b4.apply(dj,cm.call(dm,0));return dj}break}}}}}cS(di,dl)(dm,e,cd,dj,cW.test(di));return dj}cn.pseudos.nth=cn.pseudos.eq;function cR(){}cn.filters=cR.prototype=cn.pseudos;cn.setFilters=new cR();cV();cv.attr=bJ.attr;bJ.find=cv;bJ.expr=cv.selectors;bJ.expr[":"]=bJ.expr.pseudos;
bJ.unique=cv.uniqueSort;bJ.text=cv.getText;bJ.isXMLDoc=cv.isXML;bJ.contains=cv.contains})(a2);var aj=/Until$/,bt=/^(?:parents|prev(?:Until|All))/,an=/^.[^:#\[\.,]*$/,y=bJ.expr.match.needsContext,bx={children:true,contents:true,next:true,prev:true};bJ.fn.extend({find:function(b3){var b6,b5,b4,e=this.length;if(typeof b3!=="string"){b4=this;return this.pushStack(bJ(b3).filter(function(){for(b6=0;b6<e;b6++){if(bJ.contains(b4[b6],this)){return true}}}))}b5=[];for(b6=0;b6<e;b6++){bJ.find(b3,this[b6],b5)
}b5=this.pushStack(e>1?bJ.unique(b5):b5);b5.selector=(this.selector?this.selector+" ":"")+b3;return b5},has:function(b5){var b4,b3=bJ(b5,this),e=b3.length;return this.filter(function(){for(b4=0;b4<e;b4++){if(bJ.contains(this,b3[b4])){return true}}})},not:function(e){return this.pushStack(aO(this,e,false))},filter:function(e){return this.pushStack(aO(this,e,true))},is:function(e){return !!e&&(typeof e==="string"?y.test(e)?bJ(e,this.context).index(this[0])>=0:bJ.filter(e,this).length>0:this.filter(e).length>0)
},closest:function(b6,b5){var b7,b4=0,e=this.length,b3=[],b8=y.test(b6)||typeof b6!=="string"?bJ(b6,b5||this.context):0;for(;b4<e;b4++){b7=this[b4];while(b7&&b7.ownerDocument&&b7!==b5&&b7.nodeType!==11){if(b8?b8.index(b7)>-1:bJ.find.matchesSelector(b7,b6)){b3.push(b7);break}b7=b7.parentNode}}return this.pushStack(b3.length>1?bJ.unique(b3):b3)},index:function(e){if(!e){return(this[0]&&this[0].parentNode)?this.first().prevAll().length:-1}if(typeof e==="string"){return bJ.inArray(this[0],bJ(e))}return bJ.inArray(e.jquery?e[0]:e,this)
},add:function(e,b3){var b5=typeof e==="string"?bJ(e,b3):bJ.makeArray(e&&e.nodeType?[e]:e),b4=bJ.merge(this.get(),b5);return this.pushStack(bJ.unique(b4))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});bJ.fn.andSelf=bJ.fn.addBack;function aX(b3,e){do{b3=b3[e]}while(b3&&b3.nodeType!==1);return b3}bJ.each({parent:function(b3){var e=b3.parentNode;return e&&e.nodeType!==11?e:null},parents:function(e){return bJ.dir(e,"parentNode")},parentsUntil:function(b3,e,b4){return bJ.dir(b3,"parentNode",b4)
},next:function(e){return aX(e,"nextSibling")},prev:function(e){return aX(e,"previousSibling")},nextAll:function(e){return bJ.dir(e,"nextSibling")},prevAll:function(e){return bJ.dir(e,"previousSibling")},nextUntil:function(b3,e,b4){return bJ.dir(b3,"nextSibling",b4)},prevUntil:function(b3,e,b4){return bJ.dir(b3,"previousSibling",b4)},siblings:function(e){return bJ.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return bJ.sibling(e.firstChild)},contents:function(e){return bJ.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:bJ.merge([],e.childNodes)
}},function(e,b3){bJ.fn[e]=function(b6,b4){var b5=bJ.map(this,b3,b6);if(!aj.test(e)){b4=b6}if(b4&&typeof b4==="string"){b5=bJ.filter(b4,b5)}b5=this.length>1&&!bx[e]?bJ.unique(b5):b5;if(this.length>1&&bt.test(e)){b5=b5.reverse()}return this.pushStack(b5)}});bJ.extend({filter:function(b4,e,b3){if(b3){b4=":not("+b4+")"}return e.length===1?bJ.find.matchesSelector(e[0],b4)?[e[0]]:[]:bJ.find.matches(b4,e)},dir:function(b4,b3,b6){var e=[],b5=b4[b3];while(b5&&b5.nodeType!==9&&(b6===aG||b5.nodeType!==1||!bJ(b5).is(b6))){if(b5.nodeType===1){e.push(b5)
}b5=b5[b3]}return e},sibling:function(b4,b3){var e=[];for(;b4;b4=b4.nextSibling){if(b4.nodeType===1&&b4!==b3){e.push(b4)}}return e}});function aO(b5,b4,e){b4=b4||0;if(bJ.isFunction(b4)){return bJ.grep(b5,function(b7,b6){var b8=!!b4.call(b7,b6,b7);return b8===e})}else{if(b4.nodeType){return bJ.grep(b5,function(b6){return(b6===b4)===e})}else{if(typeof b4==="string"){var b3=bJ.grep(b5,function(b6){return b6.nodeType===1});if(an.test(b4)){return bJ.filter(b4,b3,!e)}else{b4=bJ.filter(b4,b3)}}}}return bJ.grep(b5,function(b6){return(bJ.inArray(b6,b4)>=0)===e
})}function A(e){var b4=d.split("|"),b3=e.createDocumentFragment();if(b3.createElement){while(b4.length){b3.createElement(b4.pop())}}return b3}var d="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",aA=/ jQuery\d+="(?:null|\d+)"/g,J=new RegExp("<(?:"+d+")[\\s/>]","i"),b2=/^\s+/,aD=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,m=/<([\w:]+)/,bX=/<tbody/i,I=/<|&#?\w+;/,al=/<(?:script|style|link)/i,q=/^(?:checkbox|radio)$/i,bU=/checked\s*(?:[^=]|=\s*.checked.)/i,bz=/^$|\/(?:java|ecma)script/i,ar=/^true\/(.*)/,aK=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,T={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:bJ.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},aS=A(l),j=aS.appendChild(l.createElement("div"));
T.optgroup=T.option;T.tbody=T.tfoot=T.colgroup=T.caption=T.thead;T.th=T.td;bJ.fn.extend({text:function(e){return bJ.access(this,function(b3){return b3===aG?bJ.text(this):this.empty().append((this[0]&&this[0].ownerDocument||l).createTextNode(b3))},null,e,arguments.length)},wrapAll:function(e){if(bJ.isFunction(e)){return this.each(function(b4){bJ(this).wrapAll(e.call(this,b4))})}if(this[0]){var b3=bJ(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){b3.insertBefore(this[0])}b3.map(function(){var b4=this;
while(b4.firstChild&&b4.firstChild.nodeType===1){b4=b4.firstChild}return b4}).append(this)}return this},wrapInner:function(e){if(bJ.isFunction(e)){return this.each(function(b3){bJ(this).wrapInner(e.call(this,b3))})}return this.each(function(){var b3=bJ(this),b4=b3.contents();if(b4.length){b4.wrapAll(e)}else{b3.append(e)}})},wrap:function(e){var b3=bJ.isFunction(e);return this.each(function(b4){bJ(this).wrapAll(b3?e.call(this,b4):e)})},unwrap:function(){return this.parent().each(function(){if(!bJ.nodeName(this,"body")){bJ(this).replaceWith(this.childNodes)
}}).end()},append:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.appendChild(e)}})},prepend:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.insertBefore(e,this.firstChild)}})},before:function(){return this.domManip(arguments,false,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this)}})},after:function(){return this.domManip(arguments,false,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this.nextSibling)
}})},remove:function(e,b5){var b4,b3=0;for(;(b4=this[b3])!=null;b3++){if(!e||bJ.filter(e,[b4]).length>0){if(!b5&&b4.nodeType===1){bJ.cleanData(k(b4))}if(b4.parentNode){if(b5&&bJ.contains(b4.ownerDocument,b4)){bs(k(b4,"script"))}b4.parentNode.removeChild(b4)}}}return this},empty:function(){var b3,e=0;for(;(b3=this[e])!=null;e++){if(b3.nodeType===1){bJ.cleanData(k(b3,false))}while(b3.firstChild){b3.removeChild(b3.firstChild)}if(b3.options&&bJ.nodeName(b3,"select")){b3.options.length=0}}return this},clone:function(b3,e){b3=b3==null?false:b3;
e=e==null?b3:e;return this.map(function(){return bJ.clone(this,b3,e)})},html:function(e){return bJ.access(this,function(b6){var b5=this[0]||{},b4=0,b3=this.length;if(b6===aG){return b5.nodeType===1?b5.innerHTML.replace(aA,""):aG}if(typeof b6==="string"&&!al.test(b6)&&(bJ.support.htmlSerialize||!J.test(b6))&&(bJ.support.leadingWhitespace||!b2.test(b6))&&!T[(m.exec(b6)||["",""])[1].toLowerCase()]){b6=b6.replace(aD,"<$1></$2>");try{for(;b4<b3;b4++){b5=this[b4]||{};if(b5.nodeType===1){bJ.cleanData(k(b5,false));
b5.innerHTML=b6}}b5=0}catch(b7){}}if(b5){this.empty().append(b6)}},null,e,arguments.length)},replaceWith:function(b3){var e=bJ.isFunction(b3);if(!e&&typeof b3!=="string"){b3=bJ(b3).not(this).detach()}return this.domManip([b3],true,function(b6){var b5=this.nextSibling,b4=this.parentNode;if(b4){bJ(this).remove();b4.insertBefore(b6,b5)}})},detach:function(e){return this.remove(e,true)},domManip:function(ca,cg,cf){ca=aI.apply([],ca);var b8,b4,e,b6,cd,b9,b7=0,b5=this.length,cc=this,ce=b5-1,cb=ca[0],b3=bJ.isFunction(cb);
if(b3||!(b5<=1||typeof cb!=="string"||bJ.support.checkClone||!bU.test(cb))){return this.each(function(ci){var ch=cc.eq(ci);if(b3){ca[0]=cb.call(this,ci,cg?ch.html():aG)}ch.domManip(ca,cg,cf)})}if(b5){b9=bJ.buildFragment(ca,this[0].ownerDocument,false,this);b8=b9.firstChild;if(b9.childNodes.length===1){b9=b8}if(b8){cg=cg&&bJ.nodeName(b8,"tr");b6=bJ.map(k(b9,"script"),t);e=b6.length;for(;b7<b5;b7++){b4=b9;if(b7!==ce){b4=bJ.clone(b4,true,true);if(e){bJ.merge(b6,k(b4,"script"))}}cf.call(cg&&bJ.nodeName(this[b7],"table")?x(this[b7],"tbody"):this[b7],b4,b7)
}if(e){cd=b6[b6.length-1].ownerDocument;bJ.map(b6,bc);for(b7=0;b7<e;b7++){b4=b6[b7];if(bz.test(b4.type||"")&&!bJ._data(b4,"globalEval")&&bJ.contains(cd,b4)){if(b4.src){bJ.ajax({url:b4.src,type:"GET",dataType:"script",async:false,global:false,"throws":true})}else{bJ.globalEval((b4.text||b4.textContent||b4.innerHTML||"").replace(aK,""))}}}}b9=b8=null}}return this}});function x(b3,e){return b3.getElementsByTagName(e)[0]||b3.appendChild(b3.ownerDocument.createElement(e))}function t(b3){var e=b3.getAttributeNode("type");
b3.type=(e&&e.specified)+"/"+b3.type;return b3}function bc(b3){var e=ar.exec(b3.type);if(e){b3.type=e[1]}else{b3.removeAttribute("type")}return b3}function bs(e,b4){var b5,b3=0;for(;(b5=e[b3])!=null;b3++){bJ._data(b5,"globalEval",!b4||bJ._data(b4[b3],"globalEval"))}}function at(b9,b3){if(b3.nodeType!==1||!bJ.hasData(b9)){return}var b6,b5,e,b8=bJ._data(b9),b7=bJ._data(b3,b8),b4=b8.events;if(b4){delete b7.handle;b7.events={};for(b6 in b4){for(b5=0,e=b4[b6].length;b5<e;b5++){bJ.event.add(b3,b6,b4[b6][b5])
}}}if(b7.data){b7.data=bJ.extend({},b7.data)}}function Q(b6,b3){var b7,b5,b4;if(b3.nodeType!==1){return}b7=b3.nodeName.toLowerCase();if(!bJ.support.noCloneEvent&&b3[bJ.expando]){b4=bJ._data(b3);for(b5 in b4.events){bJ.removeEvent(b3,b5,b4.handle)}b3.removeAttribute(bJ.expando)}if(b7==="script"&&b3.text!==b6.text){t(b3).text=b6.text;bc(b3)}else{if(b7==="object"){if(b3.parentNode){b3.outerHTML=b6.outerHTML}if(bJ.support.html5Clone&&(b6.innerHTML&&!bJ.trim(b3.innerHTML))){b3.innerHTML=b6.innerHTML}}else{if(b7==="input"&&q.test(b6.type)){b3.defaultChecked=b3.checked=b6.checked;
if(b3.value!==b6.value){b3.value=b6.value}}else{if(b7==="option"){b3.defaultSelected=b3.selected=b6.defaultSelected}else{if(b7==="input"||b7==="textarea"){b3.defaultValue=b6.defaultValue}}}}}}bJ.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,b3){bJ.fn[e]=function(b4){var b5,b7=0,b6=[],b9=bJ(b4),b8=b9.length-1;for(;b7<=b8;b7++){b5=b7===b8?this:this.clone(true);bJ(b9[b7])[b3](b5);ao.apply(b6,b5.get())}return this.pushStack(b6)
}});function k(b5,e){var b3,b6,b4=0,b7=typeof b5.getElementsByTagName!==aC?b5.getElementsByTagName(e||"*"):typeof b5.querySelectorAll!==aC?b5.querySelectorAll(e||"*"):aG;if(!b7){for(b7=[],b3=b5.childNodes||b5;(b6=b3[b4])!=null;b4++){if(!e||bJ.nodeName(b6,e)){b7.push(b6)}else{bJ.merge(b7,k(b6,e))}}}return e===aG||e&&bJ.nodeName(b5,e)?bJ.merge([b5],b7):b7}function bV(e){if(q.test(e.type)){e.defaultChecked=e.checked}}bJ.extend({clone:function(b3,b5,e){var b7,b4,ca,b6,b8,b9=bJ.contains(b3.ownerDocument,b3);
if(bJ.support.html5Clone||bJ.isXMLDoc(b3)||!J.test("<"+b3.nodeName+">")){ca=b3.cloneNode(true)}else{j.innerHTML=b3.outerHTML;j.removeChild(ca=j.firstChild)}if((!bJ.support.noCloneEvent||!bJ.support.noCloneChecked)&&(b3.nodeType===1||b3.nodeType===11)&&!bJ.isXMLDoc(b3)){b7=k(ca);b8=k(b3);for(b6=0;(b4=b8[b6])!=null;++b6){if(b7[b6]){Q(b4,b7[b6])}}}if(b5){if(e){b8=b8||k(b3);b7=b7||k(ca);for(b6=0;(b4=b8[b6])!=null;b6++){at(b4,b7[b6])}}else{at(b3,ca)}}b7=k(ca,"script");if(b7.length>0){bs(b7,!b9&&k(b3,"script"))
}b7=b8=b4=null;return ca},buildFragment:function(b3,b5,ca,cf){var cb,b7,b9,ce,cg,cd,b4,b8=b3.length,b6=A(b5),e=[],cc=0;for(;cc<b8;cc++){b7=b3[cc];if(b7||b7===0){if(bJ.type(b7)==="object"){bJ.merge(e,b7.nodeType?[b7]:b7)}else{if(!I.test(b7)){e.push(b5.createTextNode(b7))}else{ce=ce||b6.appendChild(b5.createElement("div"));cg=(m.exec(b7)||["",""])[1].toLowerCase();b4=T[cg]||T._default;ce.innerHTML=b4[1]+b7.replace(aD,"<$1></$2>")+b4[2];cb=b4[0];while(cb--){ce=ce.lastChild}if(!bJ.support.leadingWhitespace&&b2.test(b7)){e.push(b5.createTextNode(b2.exec(b7)[0]))
}if(!bJ.support.tbody){b7=cg==="table"&&!bX.test(b7)?ce.firstChild:b4[1]==="<table>"&&!bX.test(b7)?ce:0;cb=b7&&b7.childNodes.length;while(cb--){if(bJ.nodeName((cd=b7.childNodes[cb]),"tbody")&&!cd.childNodes.length){b7.removeChild(cd)}}}bJ.merge(e,ce.childNodes);ce.textContent="";while(ce.firstChild){ce.removeChild(ce.firstChild)}ce=b6.lastChild}}}}if(ce){b6.removeChild(ce)}if(!bJ.support.appendChecked){bJ.grep(k(e,"input"),bV)}cc=0;while((b7=e[cc++])){if(cf&&bJ.inArray(b7,cf)!==-1){continue}b9=bJ.contains(b7.ownerDocument,b7);
ce=k(b6.appendChild(b7),"script");if(b9){bs(ce)}if(ca){cb=0;while((b7=ce[cb++])){if(bz.test(b7.type||"")){ca.push(b7)}}}}ce=null;return b6},cleanData:function(b3,cb){var b5,ca,b4,b6,b7=0,cc=bJ.expando,e=bJ.cache,b8=bJ.support.deleteExpando,b9=bJ.event.special;for(;(b5=b3[b7])!=null;b7++){if(cb||bJ.acceptData(b5)){b4=b5[cc];b6=b4&&e[b4];if(b6){if(b6.events){for(ca in b6.events){if(b9[ca]){bJ.event.remove(b5,ca)}else{bJ.removeEvent(b5,ca,b6.handle)}}}if(e[b4]){delete e[b4];if(b8){delete b5[cc]}else{if(typeof b5.removeAttribute!==aC){b5.removeAttribute(cc)
}else{b5[cc]=null}}a6.push(b4)}}}}}});var aE,bo,E,bg=/alpha\([^)]*\)/i,aT=/opacity\s*=\s*([^)]*)/,bn=/^(top|right|bottom|left)$/,F=/^(none|table(?!-c[ea]).+)/,aY=/^margin/,a9=new RegExp("^("+bA+")(.*)$","i"),W=new RegExp("^("+bA+")(?!px)[a-z%]+$","i"),S=new RegExp("^([+-])=("+bA+")","i"),bj={BODY:"block"},bb={position:"absolute",visibility:"hidden",display:"block"},bC={letterSpacing:0,fontWeight:400},bT=["Top","Right","Bottom","Left"],av=["Webkit","O","Moz","ms"];function b(b5,b3){if(b3 in b5){return b3
}var b6=b3.charAt(0).toUpperCase()+b3.slice(1),e=b3,b4=av.length;while(b4--){b3=av[b4]+b6;if(b3 in b5){return b3}}return e}function P(b3,e){b3=e||b3;return bJ.css(b3,"display")==="none"||!bJ.contains(b3.ownerDocument,b3)}function p(b8,e){var b9,b6,b7,b3=[],b4=0,b5=b8.length;for(;b4<b5;b4++){b6=b8[b4];if(!b6.style){continue}b3[b4]=bJ._data(b6,"olddisplay");b9=b6.style.display;if(e){if(!b3[b4]&&b9==="none"){b6.style.display=""}if(b6.style.display===""&&P(b6)){b3[b4]=bJ._data(b6,"olddisplay",bE(b6.nodeName))
}}else{if(!b3[b4]){b7=P(b6);if(b9&&b9!=="none"||!b7){bJ._data(b6,"olddisplay",b7?b9:bJ.css(b6,"display"))}}}}for(b4=0;b4<b5;b4++){b6=b8[b4];if(!b6.style){continue}if(!e||b6.style.display==="none"||b6.style.display===""){b6.style.display=e?b3[b4]||"":"none"}}return b8}bJ.fn.extend({css:function(e,b3){return bJ.access(this,function(b8,b5,b9){var b4,b7,ca={},b6=0;if(bJ.isArray(b5)){b7=bo(b8);b4=b5.length;for(;b6<b4;b6++){ca[b5[b6]]=bJ.css(b8,b5[b6],false,b7)}return ca}return b9!==aG?bJ.style(b8,b5,b9):bJ.css(b8,b5)
},e,b3,arguments.length>1)},show:function(){return p(this,true)},hide:function(){return p(this)},toggle:function(b3){var e=typeof b3==="boolean";return this.each(function(){if(e?b3:P(this)){bJ(this).show()}else{bJ(this).hide()}})}});bJ.extend({cssHooks:{opacity:{get:function(b4,b3){if(b3){var e=E(b4,"opacity");return e===""?"1":e}}}},cssNumber:{columnCount:true,fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":bJ.support.cssFloat?"cssFloat":"styleFloat"},style:function(b5,b4,cb,b6){if(!b5||b5.nodeType===3||b5.nodeType===8||!b5.style){return
}var b9,ca,cc,b7=bJ.camelCase(b4),b3=b5.style;b4=bJ.cssProps[b7]||(bJ.cssProps[b7]=b(b3,b7));cc=bJ.cssHooks[b4]||bJ.cssHooks[b7];if(cb!==aG){ca=typeof cb;if(ca==="string"&&(b9=S.exec(cb))){cb=(b9[1]+1)*b9[2]+parseFloat(bJ.css(b5,b4));ca="number"}if(cb==null||ca==="number"&&isNaN(cb)){return}if(ca==="number"&&!bJ.cssNumber[b7]){cb+="px"}if(!bJ.support.clearCloneStyle&&cb===""&&b4.indexOf("background")===0){b3[b4]="inherit"}if(!cc||!("set" in cc)||(cb=cc.set(b5,cb,b6))!==aG){try{b3[b4]=cb}catch(b8){}}}else{if(cc&&"get" in cc&&(b9=cc.get(b5,false,b6))!==aG){return b9
}return b3[b4]}},css:function(b8,b6,b3,b7){var b5,b9,e,b4=bJ.camelCase(b6);b6=bJ.cssProps[b4]||(bJ.cssProps[b4]=b(b8.style,b4));e=bJ.cssHooks[b6]||bJ.cssHooks[b4];if(e&&"get" in e){b9=e.get(b8,true,b3)}if(b9===aG){b9=E(b8,b6,b7)}if(b9==="normal"&&b6 in bC){b9=bC[b6]}if(b3===""||b3){b5=parseFloat(b9);return b3===true||bJ.isNumeric(b5)?b5||0:b9}return b9},swap:function(b7,b6,b8,b5){var b4,b3,e={};for(b3 in b6){e[b3]=b7.style[b3];b7.style[b3]=b6[b3]}b4=b8.apply(b7,b5||[]);for(b3 in b6){b7.style[b3]=e[b3]
}return b4}});if(a2.getComputedStyle){bo=function(e){return a2.getComputedStyle(e,null)};E=function(b6,b4,b8){var b5,b3,ca,b7=b8||bo(b6),b9=b7?b7.getPropertyValue(b4)||b7[b4]:aG,e=b6.style;if(b7){if(b9===""&&!bJ.contains(b6.ownerDocument,b6)){b9=bJ.style(b6,b4)}if(W.test(b9)&&aY.test(b4)){b5=e.width;b3=e.minWidth;ca=e.maxWidth;e.minWidth=e.maxWidth=e.width=b9;b9=b7.width;e.width=b5;e.minWidth=b3;e.maxWidth=ca}}return b9}}else{if(l.documentElement.currentStyle){bo=function(e){return e.currentStyle
};E=function(b5,b3,b8){var b4,b7,b9,b6=b8||bo(b5),ca=b6?b6[b3]:aG,e=b5.style;if(ca==null&&e&&e[b3]){ca=e[b3]}if(W.test(ca)&&!bn.test(b3)){b4=e.left;b7=b5.runtimeStyle;b9=b7&&b7.left;if(b9){b7.left=b5.currentStyle.left}e.left=b3==="fontSize"?"1em":ca;ca=e.pixelLeft+"px";e.left=b4;if(b9){b7.left=b9}}return ca===""?"auto":ca}}}function aJ(e,b4,b5){var b3=a9.exec(b4);return b3?Math.max(0,b3[1]-(b5||0))+(b3[2]||"px"):b4}function aw(b6,b3,e,b8,b5){var b4=e===(b8?"border":"content")?4:b3==="width"?1:0,b7=0;
for(;b4<4;b4+=2){if(e==="margin"){b7+=bJ.css(b6,e+bT[b4],true,b5)}if(b8){if(e==="content"){b7-=bJ.css(b6,"padding"+bT[b4],true,b5)}if(e!=="margin"){b7-=bJ.css(b6,"border"+bT[b4]+"Width",true,b5)}}else{b7+=bJ.css(b6,"padding"+bT[b4],true,b5);if(e!=="padding"){b7+=bJ.css(b6,"border"+bT[b4]+"Width",true,b5)}}}return b7}function u(b6,b3,e){var b5=true,b7=b3==="width"?b6.offsetWidth:b6.offsetHeight,b4=bo(b6),b8=bJ.support.boxSizing&&bJ.css(b6,"boxSizing",false,b4)==="border-box";if(b7<=0||b7==null){b7=E(b6,b3,b4);
if(b7<0||b7==null){b7=b6.style[b3]}if(W.test(b7)){return b7}b5=b8&&(bJ.support.boxSizingReliable||b7===b6.style[b3]);b7=parseFloat(b7)||0}return(b7+aw(b6,b3,e||(b8?"border":"content"),b5,b4))+"px"}function bE(b4){var b3=l,e=bj[b4];if(!e){e=a1(b4,b3);if(e==="none"||!e){aE=(aE||bJ("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(b3.documentElement);b3=(aE[0].contentWindow||aE[0].contentDocument).document;b3.write("<!doctype html><html><body>");b3.close();
e=a1(b4,b3);aE.detach()}bj[b4]=e}return e}function a1(e,b5){var b3=bJ(b5.createElement(e)).appendTo(b5.body),b4=bJ.css(b3[0],"display");b3.remove();return b4}bJ.each(["height","width"],function(b3,e){bJ.cssHooks[e]={get:function(b6,b5,b4){if(b5){return b6.offsetWidth===0&&F.test(bJ.css(b6,"display"))?bJ.swap(b6,bb,function(){return u(b6,e,b4)}):u(b6,e,b4)}},set:function(b6,b7,b4){var b5=b4&&bo(b6);return aJ(b6,b7,b4?aw(b6,e,b4,bJ.support.boxSizing&&bJ.css(b6,"boxSizing",false,b5)==="border-box",b5):0)
}}});if(!bJ.support.opacity){bJ.cssHooks.opacity={get:function(b3,e){return aT.test((e&&b3.currentStyle?b3.currentStyle.filter:b3.style.filter)||"")?(0.01*parseFloat(RegExp.$1))+"":e?"1":""},set:function(b6,b7){var b5=b6.style,b3=b6.currentStyle,e=bJ.isNumeric(b7)?"alpha(opacity="+b7*100+")":"",b4=b3&&b3.filter||b5.filter||"";b5.zoom=1;if((b7>=1||b7==="")&&bJ.trim(b4.replace(bg,""))===""&&b5.removeAttribute){b5.removeAttribute("filter");if(b7===""||b3&&!b3.filter){return}}b5.filter=bg.test(b4)?b4.replace(bg,e):b4+" "+e
}}}bJ(function(){if(!bJ.support.reliableMarginRight){bJ.cssHooks.marginRight={get:function(b3,e){if(e){return bJ.swap(b3,{display:"inline-block"},E,[b3,"marginRight"])}}}}if(!bJ.support.pixelPosition&&bJ.fn.position){bJ.each(["top","left"],function(e,b3){bJ.cssHooks[b3]={get:function(b5,b4){if(b4){b4=E(b5,b3);return W.test(b4)?bJ(b5).position()[b3]+"px":b4}}}})}});if(bJ.expr&&bJ.expr.filters){bJ.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||(!bJ.support.reliableHiddenOffsets&&((e.style&&e.style.display)||bJ.css(e,"display"))==="none")
};bJ.expr.filters.visible=function(e){return !bJ.expr.filters.hidden(e)}}bJ.each({margin:"",padding:"",border:"Width"},function(e,b3){bJ.cssHooks[e+b3]={expand:function(b6){var b5=0,b4={},b7=typeof b6==="string"?b6.split(" "):[b6];for(;b5<4;b5++){b4[e+bT[b5]+b3]=b7[b5]||b7[b5-2]||b7[0]}return b4}};if(!aY.test(e)){bJ.cssHooks[e+b3].set=aJ}});var bv=/%20/g,aR=/\[\]$/,U=/\r?\n/g,c=/^(?:submit|button|image|reset|file)$/i,au=/^(?:input|select|textarea|keygen)/i;bJ.fn.extend({serialize:function(){return bJ.param(this.serializeArray())
},serializeArray:function(){return this.map(function(){var e=bJ.prop(this,"elements");return e?bJ.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!bJ(this).is(":disabled")&&au.test(this.nodeName)&&!c.test(e)&&(this.checked||!q.test(e))}).map(function(e,b3){var b4=bJ(this).val();return b4==null?null:bJ.isArray(b4)?bJ.map(b4,function(b5){return{name:b3.name,value:b5.replace(U,"\r\n")}}):{name:b3.name,value:b4.replace(U,"\r\n")}}).get()}});bJ.param=function(e,b4){var b5,b3=[],b6=function(b7,b8){b8=bJ.isFunction(b8)?b8():(b8==null?"":b8);
b3[b3.length]=encodeURIComponent(b7)+"="+encodeURIComponent(b8)};if(b4===aG){b4=bJ.ajaxSettings&&bJ.ajaxSettings.traditional}if(bJ.isArray(e)||(e.jquery&&!bJ.isPlainObject(e))){bJ.each(e,function(){b6(this.name,this.value)})}else{for(b5 in e){i(b5,e[b5],b4,b6)}}return b3.join("&").replace(bv,"+")};function i(b4,b6,b3,b5){var e;if(bJ.isArray(b6)){bJ.each(b6,function(b8,b7){if(b3||aR.test(b4)){b5(b4,b7)}else{i(b4+"["+(typeof b7==="object"?b8:"")+"]",b7,b3,b5)}})}else{if(!b3&&bJ.type(b6)==="object"){for(e in b6){i(b4+"["+e+"]",b6[e],b3,b5)
}}else{b5(b4,b6)}}}bJ.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu").split(" "),function(b3,e){bJ.fn[e]=function(b5,b4){return arguments.length>0?this.on(e,null,b5,b4):this.trigger(e)}});bJ.fn.hover=function(e,b3){return this.mouseenter(e).mouseleave(b3||e)};var b1,Y,bO=bJ.now(),az=/\?/,ap=/#.*$/,O=/([?&])_=[^&]*/,ag=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,B=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,o=/^(?:GET|HEAD)$/,aH=/^\/\//,aU=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,b0=bJ.fn.load,v={},a7={},aW="*/".concat("*");
try{Y=aL.href}catch(bf){Y=l.createElement("a");Y.href="";Y=Y.href}b1=aU.exec(Y.toLowerCase())||[];function bL(e){return function(b6,b7){if(typeof b6!=="string"){b7=b6;b6="*"}var b3,b4=0,b5=b6.toLowerCase().match(ac)||[];if(bJ.isFunction(b7)){while((b3=b5[b4++])){if(b3[0]==="+"){b3=b3.slice(1)||"*";(e[b3]=e[b3]||[]).unshift(b7)}else{(e[b3]=e[b3]||[]).push(b7)}}}}}function n(e,b4,b8,b5){var b3={},b6=(e===a7);function b7(b9){var ca;b3[b9]=true;bJ.each(e[b9]||[],function(cc,cb){var cd=cb(b4,b8,b5);if(typeof cd==="string"&&!b6&&!b3[cd]){b4.dataTypes.unshift(cd);
b7(cd);return false}else{if(b6){return !(ca=cd)}}});return ca}return b7(b4.dataTypes[0])||!b3["*"]&&b7("*")}function r(b4,b5){var e,b3,b6=bJ.ajaxSettings.flatOptions||{};for(b3 in b5){if(b5[b3]!==aG){(b6[b3]?b4:(e||(e={})))[b3]=b5[b3]}}if(e){bJ.extend(true,b4,e)}return b4}bJ.fn.load=function(b5,b8,b9){if(typeof b5!=="string"&&b0){return b0.apply(this,arguments)}var e,b4,b6,b3=this,b7=b5.indexOf(" ");if(b7>=0){e=b5.slice(b7,b5.length);b5=b5.slice(0,b7)}if(bJ.isFunction(b8)){b9=b8;b8=aG}else{if(b8&&typeof b8==="object"){b6="POST"
}}if(b3.length>0){bJ.ajax({url:b5,type:b6,dataType:"html",data:b8}).done(function(ca){b4=arguments;b3.html(e?bJ("<div>").append(bJ.parseHTML(ca)).find(e):ca)}).complete(b9&&function(cb,ca){b3.each(b9,b4||[cb.responseText,ca,cb])})}return this};bJ.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,b3){bJ.fn[b3]=function(b4){return this.on(b3,b4)}});bJ.each(["get","post"],function(e,b3){bJ[b3]=function(b4,b6,b7,b5){if(bJ.isFunction(b6)){b5=b5||b7;b7=b6;b6=aG
}return bJ.ajax({url:b4,type:b3,dataType:b5,data:b6,success:b7})}});bJ.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Y,type:"GET",isLocal:B.test(b1[1]),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":aW,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a2.String,"text html":true,"text json":bJ.parseJSON,"text xml":bJ.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(b3,e){return e?r(r(b3,bJ.ajaxSettings),e):r(bJ.ajaxSettings,b3)
},ajaxPrefilter:bL(v),ajaxTransport:bL(a7),ajax:function(b7,b4){if(typeof b7==="object"){b4=b7;b7=aG}b4=b4||{};var cg,ci,b8,cn,cc,b3,cj,b5,cb=bJ.ajaxSetup({},b4),cp=cb.context||cb,ce=cb.context&&(cp.nodeType||cp.jquery)?bJ(cp):bJ.event,co=bJ.Deferred(),cl=bJ.Callbacks("once memory"),b9=cb.statusCode||{},cf={},cm={},b6=0,ca="canceled",ch={readyState:0,getResponseHeader:function(cq){var e;if(b6===2){if(!b5){b5={};while((e=ag.exec(cn))){b5[e[1].toLowerCase()]=e[2]}}e=b5[cq.toLowerCase()]}return e==null?null:e
},getAllResponseHeaders:function(){return b6===2?cn:null},setRequestHeader:function(cq,cr){var e=cq.toLowerCase();if(!b6){cq=cm[e]=cm[e]||cq;cf[cq]=cr}return this},overrideMimeType:function(e){if(!b6){cb.mimeType=e}return this},statusCode:function(cq){var e;if(cq){if(b6<2){for(e in cq){b9[e]=[b9[e],cq[e]]}}else{ch.always(cq[ch.status])}}return this},abort:function(cq){var e=cq||ca;if(cj){cj.abort(e)}cd(0,e);return this}};co.promise(ch).complete=cl.add;ch.success=ch.done;ch.error=ch.fail;cb.url=((b7||cb.url||Y)+"").replace(ap,"").replace(aH,b1[1]+"//");
cb.type=b4.method||b4.type||cb.method||cb.type;cb.dataTypes=bJ.trim(cb.dataType||"*").toLowerCase().match(ac)||[""];if(cb.crossDomain==null){cg=aU.exec(cb.url.toLowerCase());cb.crossDomain=!!(cg&&(cg[1]!==b1[1]||cg[2]!==b1[2]||(cg[3]||(cg[1]==="http:"?80:443))!=(b1[3]||(b1[1]==="http:"?80:443))))}if(cb.data&&cb.processData&&typeof cb.data!=="string"){cb.data=bJ.param(cb.data,cb.traditional)}n(v,cb,b4,ch);if(b6===2){return ch}b3=cb.global;if(b3&&bJ.active++===0){bJ.event.trigger("ajaxStart")}cb.type=cb.type.toUpperCase();
cb.hasContent=!o.test(cb.type);b8=cb.url;if(!cb.hasContent){if(cb.data){b8=(cb.url+=(az.test(b8)?"&":"?")+cb.data);delete cb.data}if(cb.cache===false){cb.url=O.test(b8)?b8.replace(O,"$1_="+bO++):b8+(az.test(b8)?"&":"?")+"_="+bO++}}if(cb.ifModified){if(bJ.lastModified[b8]){ch.setRequestHeader("If-Modified-Since",bJ.lastModified[b8])}if(bJ.etag[b8]){ch.setRequestHeader("If-None-Match",bJ.etag[b8])}}if(cb.data&&cb.hasContent&&cb.contentType!==false||b4.contentType){ch.setRequestHeader("Content-Type",cb.contentType)
}ch.setRequestHeader("Accept",cb.dataTypes[0]&&cb.accepts[cb.dataTypes[0]]?cb.accepts[cb.dataTypes[0]]+(cb.dataTypes[0]!=="*"?", "+aW+"; q=0.01":""):cb.accepts["*"]);for(ci in cb.headers){ch.setRequestHeader(ci,cb.headers[ci])}if(cb.beforeSend&&(cb.beforeSend.call(cp,ch,cb)===false||b6===2)){return ch.abort()}ca="abort";for(ci in {success:1,error:1,complete:1}){ch[ci](cb[ci])}cj=n(a7,cb,b4,ch);if(!cj){cd(-1,"No Transport")}else{ch.readyState=1;if(b3){ce.trigger("ajaxSend",[ch,cb])}if(cb.async&&cb.timeout>0){cc=setTimeout(function(){ch.abort("timeout")
},cb.timeout)}try{b6=1;cj.send(cf,cd)}catch(ck){if(b6<2){cd(-1,ck)}else{throw ck}}}function cd(cu,cq,cv,cs){var e,cy,cw,ct,cx,cr=cq;if(b6===2){return}b6=2;if(cc){clearTimeout(cc)}cj=aG;cn=cs||"";ch.readyState=cu>0?4:0;if(cv){ct=g(cb,ch,cv)}if(cu>=200&&cu<300||cu===304){if(cb.ifModified){cx=ch.getResponseHeader("Last-Modified");if(cx){bJ.lastModified[b8]=cx}cx=ch.getResponseHeader("etag");if(cx){bJ.etag[b8]=cx}}if(cu===204){e=true;cr="nocontent"}else{if(cu===304){e=true;cr="notmodified"}else{e=af(cb,ct);
cr=e.state;cy=e.data;cw=e.error;e=!cw}}}else{cw=cr;if(cu||!cr){cr="error";if(cu<0){cu=0}}}ch.status=cu;ch.statusText=(cq||cr)+"";if(e){co.resolveWith(cp,[cy,cr,ch])}else{co.rejectWith(cp,[ch,cr,cw])}ch.statusCode(b9);b9=aG;if(b3){ce.trigger(e?"ajaxSuccess":"ajaxError",[ch,cb,e?cy:cw])}cl.fireWith(cp,[ch,cr]);if(b3){ce.trigger("ajaxComplete",[ch,cb]);if(!(--bJ.active)){bJ.event.trigger("ajaxStop")}}}return ch},getScript:function(e,b3){return bJ.get(e,aG,b3,"script")},getJSON:function(e,b3,b4){return bJ.get(e,b3,b4,"json")
}});function g(cb,ca,b7){var e,b6,b5,b8,b3=cb.contents,b9=cb.dataTypes,b4=cb.responseFields;for(b8 in b4){if(b8 in b7){ca[b4[b8]]=b7[b8]}}while(b9[0]==="*"){b9.shift();if(b6===aG){b6=cb.mimeType||ca.getResponseHeader("Content-Type")}}if(b6){for(b8 in b3){if(b3[b8]&&b3[b8].test(b6)){b9.unshift(b8);break}}}if(b9[0] in b7){b5=b9[0]}else{for(b8 in b7){if(!b9[0]||cb.converters[b8+" "+b9[0]]){b5=b8;break}if(!e){e=b8}}b5=b5||e}if(b5){if(b5!==b9[0]){b9.unshift(b5)}return b7[b5]}}function af(cd,b5){var b3,b9,cb,b6,cc={},b7=0,ca=cd.dataTypes.slice(),b4=ca[0];
if(cd.dataFilter){b5=cd.dataFilter(b5,cd.dataType)}if(ca[1]){for(cb in cd.converters){cc[cb.toLowerCase()]=cd.converters[cb]}}for(;(b9=ca[++b7]);){if(b9!=="*"){if(b4!=="*"&&b4!==b9){cb=cc[b4+" "+b9]||cc["* "+b9];if(!cb){for(b3 in cc){b6=b3.split(" ");if(b6[1]===b9){cb=cc[b4+" "+b6[0]]||cc["* "+b6[0]];if(cb){if(cb===true){cb=cc[b3]}else{if(cc[b3]!==true){b9=b6[0];ca.splice(b7--,0,b9)}}break}}}}if(cb!==true){if(cb&&cd["throws"]){b5=cb(b5)}else{try{b5=cb(b5)}catch(b8){return{state:"parsererror",error:cb?b8:"No conversion from "+b4+" to "+b9}
}}}}b4=b9}}return{state:"success",data:b5}}bJ.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){bJ.globalEval(e);return e}}});bJ.ajaxPrefilter("script",function(e){if(e.cache===aG){e.cache=false}if(e.crossDomain){e.type="GET";e.global=false}});bJ.ajaxTransport("script",function(b4){if(b4.crossDomain){var e,b3=l.head||bJ("head")[0]||l.documentElement;return{send:function(b5,b6){e=l.createElement("script");
e.async=true;if(b4.scriptCharset){e.charset=b4.scriptCharset}e.src=b4.url;e.onload=e.onreadystatechange=function(b8,b7){if(b7||!e.readyState||/loaded|complete/.test(e.readyState)){e.onload=e.onreadystatechange=null;if(e.parentNode){e.parentNode.removeChild(e)}e=null;if(!b7){b6(200,"success")}}};b3.insertBefore(e,b3.firstChild)},abort:function(){if(e){e.onload(aG,true)}}}}});var bq=[],a5=/(=)\?(?=&|$)|\?\?/;bJ.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=bq.pop()||(bJ.expando+"_"+(bO++));
this[e]=true;return e}});bJ.ajaxPrefilter("json jsonp",function(b5,e,b6){var b8,b3,b4,b7=b5.jsonp!==false&&(a5.test(b5.url)?"url":typeof b5.data==="string"&&!(b5.contentType||"").indexOf("application/x-www-form-urlencoded")&&a5.test(b5.data)&&"data");if(b7||b5.dataTypes[0]==="jsonp"){b8=b5.jsonpCallback=bJ.isFunction(b5.jsonpCallback)?b5.jsonpCallback():b5.jsonpCallback;if(b7){b5[b7]=b5[b7].replace(a5,"$1"+b8)}else{if(b5.jsonp!==false){b5.url+=(az.test(b5.url)?"&":"?")+b5.jsonp+"="+b8}}b5.converters["script json"]=function(){if(!b4){bJ.error(b8+" was not called")
}return b4[0]};b5.dataTypes[0]="json";b3=a2[b8];a2[b8]=function(){b4=arguments};b6.always(function(){a2[b8]=b3;if(b5[b8]){b5.jsonpCallback=e.jsonpCallback;bq.push(b8)}if(b4&&bJ.isFunction(b3)){b3(b4[0])}b4=b3=aG});return"script"}});var ah,ax,ay=0,aP=a2.ActiveXObject&&function(){var e;for(e in ah){ah[e](aG,true)}};function bD(){try{return new a2.XMLHttpRequest()}catch(b3){}}function bd(){try{return new a2.ActiveXObject("Microsoft.XMLHTTP")}catch(b3){}}bJ.ajaxSettings.xhr=a2.ActiveXObject?function(){return !this.isLocal&&bD()||bd()
}:bD;ax=bJ.ajaxSettings.xhr();bJ.support.cors=!!ax&&("withCredentials" in ax);ax=bJ.support.ajax=!!ax;if(ax){bJ.ajaxTransport(function(e){if(!e.crossDomain||bJ.support.cors){var b3;return{send:function(b9,b4){var b7,b5,b8=e.xhr();if(e.username){b8.open(e.type,e.url,e.async,e.username,e.password)}else{b8.open(e.type,e.url,e.async)}if(e.xhrFields){for(b5 in e.xhrFields){b8[b5]=e.xhrFields[b5]}}if(e.mimeType&&b8.overrideMimeType){b8.overrideMimeType(e.mimeType)}if(!e.crossDomain&&!b9["X-Requested-With"]){b9["X-Requested-With"]="XMLHttpRequest"
}try{for(b5 in b9){b8.setRequestHeader(b5,b9[b5])}}catch(b6){}b8.send((e.hasContent&&e.data)||null);b3=function(cc,cb){var ca,cd,cg,ce;try{if(b3&&(cb||b8.readyState===4)){b3=aG;if(b7){b8.onreadystatechange=bJ.noop;if(aP){delete ah[b7]}}if(cb){if(b8.readyState!==4){b8.abort()}}else{ce={};ca=b8.status;cd=b8.getAllResponseHeaders();if(typeof b8.responseText==="string"){ce.text=b8.responseText}try{cg=b8.statusText}catch(cf){cg=""}if(!ca&&e.isLocal&&!e.crossDomain){ca=ce.text?200:404}else{if(ca===1223){ca=204
}}}}}catch(ch){if(!cb){b4(-1,ch)}}if(ce){b4(ca,cg,ce,cd)}};if(!e.async){b3()}else{if(b8.readyState===4){setTimeout(b3)}else{b7=++ay;if(aP){if(!ah){ah={};bJ(a2).unload(aP)}ah[b7]=b3}b8.onreadystatechange=b3}}},abort:function(){if(b3){b3(aG,true)}}}}})}var K,ad,bR=/^(?:toggle|show|hide)$/,bK=new RegExp("^(?:([+-])=|)("+bA+")([a-z%]*)$","i"),bQ=/queueHooks$/,aB=[h],a0={"*":[function(e,b9){var b5,ca,cb=this.createTween(e,b9),b6=bK.exec(b9),b7=cb.cur(),b3=+b7||0,b4=1,b8=20;if(b6){b5=+b6[2];ca=b6[3]||(bJ.cssNumber[e]?"":"px");
if(ca!=="px"&&b3){b3=bJ.css(cb.elem,e,true)||b5||1;do{b4=b4||".5";b3=b3/b4;bJ.style(cb.elem,e,b3+ca)}while(b4!==(b4=cb.cur()/b7)&&b4!==1&&--b8)}cb.unit=ca;cb.start=b3;cb.end=b6[1]?b3+(b6[1]+1)*b5:b5}return cb}]};function bm(){setTimeout(function(){K=aG});return(K=bJ.now())}function be(b3,e){bJ.each(e,function(b8,b6){var b7=(a0[b8]||[]).concat(a0["*"]),b4=0,b5=b7.length;for(;b4<b5;b4++){if(b7[b4].call(b3,b8,b6)){return}}})}function f(b4,b8,cb){var cc,e,b7=0,b3=aB.length,ca=bJ.Deferred().always(function(){delete b6.elem
}),b6=function(){if(e){return false}var ci=K||bm(),cf=Math.max(0,b5.startTime+b5.duration-ci),cd=cf/b5.duration||0,ch=1-cd,ce=0,cg=b5.tweens.length;for(;ce<cg;ce++){b5.tweens[ce].run(ch)}ca.notifyWith(b4,[b5,ch,cf]);if(ch<1&&cg){return cf}else{ca.resolveWith(b4,[b5]);return false}},b5=ca.promise({elem:b4,props:bJ.extend({},b8),opts:bJ.extend(true,{specialEasing:{}},cb),originalProperties:b8,originalOptions:cb,startTime:K||bm(),duration:cb.duration,tweens:[],createTween:function(cf,cd){var ce=bJ.Tween(b4,b5.opts,cf,cd,b5.opts.specialEasing[cf]||b5.opts.easing);
b5.tweens.push(ce);return ce},stop:function(ce){var cd=0,cf=ce?b5.tweens.length:0;if(e){return this}e=true;for(;cd<cf;cd++){b5.tweens[cd].run(1)}if(ce){ca.resolveWith(b4,[b5,ce])}else{ca.rejectWith(b4,[b5,ce])}return this}}),b9=b5.props;am(b9,b5.opts.specialEasing);for(;b7<b3;b7++){cc=aB[b7].call(b5,b4,b9,b5.opts);if(cc){return cc}}be(b5,b9);if(bJ.isFunction(b5.opts.start)){b5.opts.start.call(b4,b5)}bJ.fx.timer(bJ.extend(b6,{elem:b4,anim:b5,queue:b5.opts.queue}));return b5.progress(b5.opts.progress).done(b5.opts.done,b5.opts.complete).fail(b5.opts.fail).always(b5.opts.always)
}function am(b5,b7){var b6,b4,b3,b8,e;for(b3 in b5){b4=bJ.camelCase(b3);b8=b7[b4];b6=b5[b3];if(bJ.isArray(b6)){b8=b6[1];b6=b5[b3]=b6[0]}if(b3!==b4){b5[b4]=b6;delete b5[b3]}e=bJ.cssHooks[b4];if(e&&"expand" in e){b6=e.expand(b6);delete b5[b4];for(b3 in b6){if(!(b3 in b5)){b5[b3]=b6[b3];b7[b3]=b8}}}else{b7[b4]=b8}}}bJ.Animation=bJ.extend(f,{tweener:function(b3,b6){if(bJ.isFunction(b3)){b6=b3;b3=["*"]}else{b3=b3.split(" ")}var b5,e=0,b4=b3.length;for(;e<b4;e++){b5=b3[e];a0[b5]=a0[b5]||[];a0[b5].unshift(b6)
}},prefilter:function(b3,e){if(e){aB.unshift(b3)}else{aB.push(b3)}}});function h(b6,cc,e){var b4,cb,b5,ce,ci,b8,ch,cg,cf,b7=this,b3=b6.style,cd={},ca=[],b9=b6.nodeType&&P(b6);if(!e.queue){cg=bJ._queueHooks(b6,"fx");if(cg.unqueued==null){cg.unqueued=0;cf=cg.empty.fire;cg.empty.fire=function(){if(!cg.unqueued){cf()}}}cg.unqueued++;b7.always(function(){b7.always(function(){cg.unqueued--;if(!bJ.queue(b6,"fx").length){cg.empty.fire()}})})}if(b6.nodeType===1&&("height" in cc||"width" in cc)){e.overflow=[b3.overflow,b3.overflowX,b3.overflowY];
if(bJ.css(b6,"display")==="inline"&&bJ.css(b6,"float")==="none"){if(!bJ.support.inlineBlockNeedsLayout||bE(b6.nodeName)==="inline"){b3.display="inline-block"}else{b3.zoom=1}}}if(e.overflow){b3.overflow="hidden";if(!bJ.support.shrinkWrapBlocks){b7.always(function(){b3.overflow=e.overflow[0];b3.overflowX=e.overflow[1];b3.overflowY=e.overflow[2]})}}for(cb in cc){ce=cc[cb];if(bR.exec(ce)){delete cc[cb];b8=b8||ce==="toggle";if(ce===(b9?"hide":"show")){continue}ca.push(cb)}}b5=ca.length;if(b5){ci=bJ._data(b6,"fxshow")||bJ._data(b6,"fxshow",{});
if("hidden" in ci){b9=ci.hidden}if(b8){ci.hidden=!b9}if(b9){bJ(b6).show()}else{b7.done(function(){bJ(b6).hide()})}b7.done(function(){var cj;bJ._removeData(b6,"fxshow");for(cj in cd){bJ.style(b6,cj,cd[cj])}});for(cb=0;cb<b5;cb++){b4=ca[cb];ch=b7.createTween(b4,b9?ci[b4]:0);cd[b4]=ci[b4]||bJ.style(b6,b4);if(!(b4 in ci)){ci[b4]=ch.start;if(b9){ch.end=ch.start;ch.start=b4==="width"||b4==="height"?1:0}}}}}function G(b4,b3,b6,e,b5){return new G.prototype.init(b4,b3,b6,e,b5)}bJ.Tween=G;G.prototype={constructor:G,init:function(b5,b3,b7,e,b6,b4){this.elem=b5;
this.prop=b7;this.easing=b6||"swing";this.options=b3;this.start=this.now=this.cur();this.end=e;this.unit=b4||(bJ.cssNumber[b7]?"":"px")},cur:function(){var e=G.propHooks[this.prop];return e&&e.get?e.get(this):G.propHooks._default.get(this)},run:function(b4){var b3,e=G.propHooks[this.prop];if(this.options.duration){this.pos=b3=bJ.easing[this.easing](b4,this.options.duration*b4,0,1,this.options.duration)}else{this.pos=b3=b4}this.now=(this.end-this.start)*b3+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)
}if(e&&e.set){e.set(this)}else{G.propHooks._default.set(this)}return this}};G.prototype.init.prototype=G.prototype;G.propHooks={_default:{get:function(b3){var e;if(b3.elem[b3.prop]!=null&&(!b3.elem.style||b3.elem.style[b3.prop]==null)){return b3.elem[b3.prop]}e=bJ.css(b3.elem,b3.prop,"");return !e||e==="auto"?0:e},set:function(e){if(bJ.fx.step[e.prop]){bJ.fx.step[e.prop](e)}else{if(e.elem.style&&(e.elem.style[bJ.cssProps[e.prop]]!=null||bJ.cssHooks[e.prop])){bJ.style(e.elem,e.prop,e.now+e.unit)}else{e.elem[e.prop]=e.now
}}}}};G.propHooks.scrollTop=G.propHooks.scrollLeft={set:function(e){if(e.elem.nodeType&&e.elem.parentNode){e.elem[e.prop]=e.now}}};bJ.each(["toggle","show","hide"],function(b3,e){var b4=bJ.fn[e];bJ.fn[e]=function(b5,b7,b6){return b5==null||typeof b5==="boolean"?b4.apply(this,arguments):this.animate(bI(e,true),b5,b7,b6)}});bJ.fn.extend({fadeTo:function(e,b5,b4,b3){return this.filter(P).css("opacity",0).show().end().animate({opacity:b5},e,b4,b3)},animate:function(b8,b5,b7,b6){var b4=bJ.isEmptyObject(b8),e=bJ.speed(b5,b7,b6),b3=function(){var b9=f(this,bJ.extend({},b8),e);
b3.finish=function(){b9.stop(true)};if(b4||bJ._data(this,"finish")){b9.stop(true)}};b3.finish=b3;return b4||e.queue===false?this.each(b3):this.queue(e.queue,b3)},stop:function(b4,b3,e){var b5=function(b6){var b7=b6.stop;delete b6.stop;b7(e)};if(typeof b4!=="string"){e=b3;b3=b4;b4=aG}if(b3&&b4!==false){this.queue(b4||"fx",[])}return this.each(function(){var b9=true,b6=b4!=null&&b4+"queueHooks",b8=bJ.timers,b7=bJ._data(this);if(b6){if(b7[b6]&&b7[b6].stop){b5(b7[b6])}}else{for(b6 in b7){if(b7[b6]&&b7[b6].stop&&bQ.test(b6)){b5(b7[b6])
}}}for(b6=b8.length;b6--;){if(b8[b6].elem===this&&(b4==null||b8[b6].queue===b4)){b8[b6].anim.stop(e);b9=false;b8.splice(b6,1)}}if(b9||!e){bJ.dequeue(this,b4)}})},finish:function(e){if(e!==false){e=e||"fx"}return this.each(function(){var b5,b8=bJ._data(this),b4=b8[e+"queue"],b3=b8[e+"queueHooks"],b7=bJ.timers,b6=b4?b4.length:0;b8.finish=true;bJ.queue(this,e,[]);if(b3&&b3.cur&&b3.cur.finish){b3.cur.finish.call(this)}for(b5=b7.length;b5--;){if(b7[b5].elem===this&&b7[b5].queue===e){b7[b5].anim.stop(true);
b7.splice(b5,1)}}for(b5=0;b5<b6;b5++){if(b4[b5]&&b4[b5].finish){b4[b5].finish.call(this)}}delete b8.finish})}});function bI(b4,b6){var b5,e={height:b4},b3=0;b6=b6?1:0;for(;b3<4;b3+=2-b6){b5=bT[b3];e["margin"+b5]=e["padding"+b5]=b4}if(b6){e.opacity=e.width=b4}return e}bJ.each({slideDown:bI("show"),slideUp:bI("hide"),slideToggle:bI("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,b3){bJ.fn[e]=function(b4,b6,b5){return this.animate(b3,b4,b6,b5)}});
bJ.speed=function(b4,b5,b3){var e=b4&&typeof b4==="object"?bJ.extend({},b4):{complete:b3||!b3&&b5||bJ.isFunction(b4)&&b4,duration:b4,easing:b3&&b5||b5&&!bJ.isFunction(b5)&&b5};e.duration=bJ.fx.off?0:typeof e.duration==="number"?e.duration:e.duration in bJ.fx.speeds?bJ.fx.speeds[e.duration]:bJ.fx.speeds._default;if(e.queue==null||e.queue===true){e.queue="fx"}e.old=e.complete;e.complete=function(){if(bJ.isFunction(e.old)){e.old.call(this)}if(e.queue){bJ.dequeue(this,e.queue)}};return e};bJ.easing={linear:function(e){return e
},swing:function(e){return 0.5-Math.cos(e*Math.PI)/2}};bJ.timers=[];bJ.fx=G.prototype.init;bJ.fx.tick=function(){var b4,b3=bJ.timers,e=0;K=bJ.now();for(;e<b3.length;e++){b4=b3[e];if(!b4()&&b3[e]===b4){b3.splice(e--,1)}}if(!b3.length){bJ.fx.stop()}K=aG};bJ.fx.timer=function(e){if(e()&&bJ.timers.push(e)){bJ.fx.start()}};bJ.fx.interval=13;bJ.fx.start=function(){if(!ad){ad=setInterval(bJ.fx.tick,bJ.fx.interval)}};bJ.fx.stop=function(){clearInterval(ad);ad=null};bJ.fx.speeds={slow:600,fast:200,_default:400};
bJ.fx.step={};if(bJ.expr&&bJ.expr.filters){bJ.expr.filters.animated=function(e){return bJ.grep(bJ.timers,function(b3){return e===b3.elem}).length}}bJ.fn.offset=function(b3){if(arguments.length){return b3===aG?this:this.each(function(b8){bJ.offset.setOffset(this,b3,b8)})}var e,b7,b5={top:0,left:0},b4=this[0],b6=b4&&b4.ownerDocument;if(!b6){return}e=b6.documentElement;if(!bJ.contains(e,b4)){return b5}if(typeof b4.getBoundingClientRect!==aC){b5=b4.getBoundingClientRect()}b7=bp(b6);return{top:b5.top+(b7.pageYOffset||e.scrollTop)-(e.clientTop||0),left:b5.left+(b7.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}
};bJ.offset={setOffset:function(b5,ce,b8){var b9=bJ.css(b5,"position");if(b9==="static"){b5.style.position="relative"}var b7=bJ(b5),b3=b7.offset(),e=bJ.css(b5,"top"),cc=bJ.css(b5,"left"),cd=(b9==="absolute"||b9==="fixed")&&bJ.inArray("auto",[e,cc])>-1,cb={},ca={},b4,b6;if(cd){ca=b7.position();b4=ca.top;b6=ca.left}else{b4=parseFloat(e)||0;b6=parseFloat(cc)||0}if(bJ.isFunction(ce)){ce=ce.call(b5,b8,b3)}if(ce.top!=null){cb.top=(ce.top-b3.top)+b4}if(ce.left!=null){cb.left=(ce.left-b3.left)+b6}if("using" in ce){ce.using.call(b5,cb)
}else{b7.css(cb)}}};bJ.fn.extend({position:function(){if(!this[0]){return}var b4,b5,e={top:0,left:0},b3=this[0];if(bJ.css(b3,"position")==="fixed"){b5=b3.getBoundingClientRect()}else{b4=this.offsetParent();b5=this.offset();if(!bJ.nodeName(b4[0],"html")){e=b4.offset()}e.top+=bJ.css(b4[0],"borderTopWidth",true);e.left+=bJ.css(b4[0],"borderLeftWidth",true)}return{top:b5.top-e.top-bJ.css(b3,"marginTop",true),left:b5.left-e.left-bJ.css(b3,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||l.documentElement;
while(e&&(!bJ.nodeName(e,"html")&&bJ.css(e,"position")==="static")){e=e.offsetParent}return e||l.documentElement})}});bJ.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b4,b3){var e=/Y/.test(b3);bJ.fn[b4]=function(b5){return bJ.access(this,function(b6,b9,b8){var b7=bp(b6);if(b8===aG){return b7?(b3 in b7)?b7[b3]:b7.document.documentElement[b9]:b6[b9]}if(b7){b7.scrollTo(!e?b8:bJ(b7).scrollLeft(),e?b8:bJ(b7).scrollTop())}else{b6[b9]=b8}},b4,b5,arguments.length,null)}});function bp(e){return bJ.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:false
}bJ.each({Height:"height",Width:"width"},function(e,b3){bJ.each({padding:"inner"+e,content:b3,"":"outer"+e},function(b4,b5){bJ.fn[b5]=function(b9,b8){var b7=arguments.length&&(b4||typeof b9!=="boolean"),b6=b4||(b9===true||b8===true?"margin":"border");return bJ.access(this,function(cb,ca,cc){var cd;if(bJ.isWindow(cb)){return cb.document.documentElement["client"+e]}if(cb.nodeType===9){cd=cb.documentElement;return Math.max(cb.body["scroll"+e],cd["scroll"+e],cb.body["offset"+e],cd["offset"+e],cd["client"+e])
}return cc===aG?bJ.css(cb,ca,b6):bJ.style(cb,ca,cc,b6)},b3,b7?b9:aG,b7,null)}})});a2.jQuery=a2.$=bJ;if(typeof define==="function"&&define.amd&&define.amd.jQuery){define("jquery",[],function(){return bJ})}})(window);
/*!
 * jQuery Migrate - v1.1.1 - 2013-02-16
 * https://github.com/jquery/jquery-migrate
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors; Licensed MIT
 */
(function(s,p,i){var D={};s.migrateWarnings=[];if(!s.migrateMute&&p.console&&console.log){console.log("JQMIGRATE: Logging is active")}if(s.migrateTrace===i){s.migrateTrace=true}s.migrateReset=function(){D={};s.migrateWarnings.length=0};function h(G){if(!D[G]){D[G]=true;s.migrateWarnings.push(G);if(p.console&&console.warn&&!s.migrateMute){console.warn("JQMIGRATE: "+G);
if(s.migrateTrace&&console.trace){console.trace()}}}}function a(I,K,H,J){if(Object.defineProperty){try{Object.defineProperty(I,K,{configurable:true,enumerable:true,get:function(){h(J);return H},set:function(L){h(J);H=L}});return}catch(G){}}s._definePropertyBroken=true;I[K]=H}if(document.compatMode==="BackCompat"){h("jQuery is not compatible with Quirks Mode")}var f=s("<input/>",{size:1}).attr("size")&&s.attrFn,x=s.attr,w=s.attrHooks.value&&s.attrHooks.value.get||function(){return null},j=s.attrHooks.value&&s.attrHooks.value.set||function(){return i
},t=/^(?:input|button)$/i,y=/^[238]$/,B=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,k=/^(?:checked|selected)$/i;a(s,"attrFn",f||{},"jQuery.attrFn is deprecated");s.attr=function(K,I,L,J){var H=I.toLowerCase(),G=K&&K.nodeType;if(J){if(x.length<4){h("jQuery.fn.attr( props, pass ) is deprecated")}if(K&&!y.test(G)&&(f?I in f:s.isFunction(s.fn[I]))){return s(K)[I](L)}}if(I==="type"&&L!==i&&t.test(K.nodeName)&&K.parentNode){h("Can't change the 'type' of an input or button in IE 6/7/8")
}if(!s.attrHooks[H]&&B.test(H)){s.attrHooks[H]={get:function(N,M){var P,O=s.prop(N,M);return O===true||typeof O!=="boolean"&&(P=N.getAttributeNode(M))&&P.nodeValue!==false?M.toLowerCase():i},set:function(N,P,M){var O;if(P===false){s.removeAttr(N,M)}else{O=s.propFix[M]||M;if(O in N){N[O]=true}N.setAttribute(M,M.toLowerCase())}return M}};if(k.test(H)){h("jQuery.fn.attr('"+H+"') may use property instead of attribute")}}return x.call(s,K,I,L)};s.attrHooks.value={get:function(H,G){var I=(H.nodeName||"").toLowerCase();
if(I==="button"){return w.apply(this,arguments)}if(I!=="input"&&I!=="option"){h("jQuery.fn.attr('value') no longer gets properties")}return G in H?H.value:null},set:function(G,H){var I=(G.nodeName||"").toLowerCase();if(I==="button"){return j.apply(this,arguments)}if(I!=="input"&&I!=="option"){h("jQuery.fn.attr('value', val) no longer sets properties")}G.value=H}};var q,E,z=s.fn.init,A=s.parseJSON,v=/^(?:[^<]*(<[\w\W]+>)[^>]*|#([\w\-]*))$/;s.fn.init=function(G,J,I){var H;if(G&&typeof G==="string"&&!s.isPlainObject(J)&&(H=v.exec(G))&&H[1]){if(G.charAt(0)!=="<"){h("$(html) HTML strings must start with '<' character")
}if(J&&J.context){J=J.context}if(s.parseHTML){return z.call(this,s.parseHTML(s.trim(G),J,true),J,I)}}return z.apply(this,arguments)};s.fn.init.prototype=s.fn;s.parseJSON=function(G){if(!G&&G!==null){h("jQuery.parseJSON requires a valid JSON string");return null}return A.apply(this,arguments)};s.uaMatch=function(H){H=H.toLowerCase();var G=/(chrome)[ \/]([\w.]+)/.exec(H)||/(webkit)[ \/]([\w.]+)/.exec(H)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(H)||/(msie) ([\w.]+)/.exec(H)||H.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(H)||[];
return{browser:G[1]||"",version:G[2]||"0"}};if(!s.browser){q=s.uaMatch(navigator.userAgent);E={};if(q.browser){E[q.browser]=true;E.version=q.version}if(E.chrome){E.webkit=true}else{if(E.webkit){E.safari=true}}s.browser=E}a(s,"browser",s.browser,"jQuery.browser is deprecated");s.sub=function(){function G(J,K){return new G.fn.init(J,K)}s.extend(true,G,this);G.superclass=this;G.fn=G.prototype=this();G.fn.constructor=G;G.sub=this.sub;G.fn.init=function I(J,K){if(K&&K instanceof s&&!(K instanceof G)){K=G(K)
}return s.fn.init.call(this,J,K,H)};G.fn.init.prototype=G.fn;var H=G(document);h("jQuery.sub() is deprecated");return G};s.ajaxSetup({converters:{"text json":s.parseJSON}});var n=s.fn.data;s.fn.data=function(I){var H,G,J=this[0];if(J&&I==="events"&&arguments.length===1){H=s.data(J,I);G=s._data(J,I);if((H===i||H===G)&&G!==i){h("Use of jQuery.fn.data('events') is deprecated");return G}}return n.apply(this,arguments)};var o=/\/(java|ecma)script/i,u=s.fn.andSelf||s.fn.addBack;s.fn.andSelf=function(){h("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()");
return u.apply(this,arguments)};if(!s.clean){s.clean=function(G,H,N,J){H=H||document;H=!H.nodeType&&H[0]||H;H=H.ownerDocument||H;h("jQuery.clean() is deprecated");var K,I,L,O,M=[];s.merge(M,s.buildFragment(G,H).childNodes);if(N){L=function(P){if(!P.type||o.test(P.type)){return J?J.push(P.parentNode?P.parentNode.removeChild(P):P):N.appendChild(P)}};for(K=0;(I=M[K])!=null;K++){if(!(s.nodeName(I,"script")&&L(I))){N.appendChild(I);if(typeof I.getElementsByTagName!=="undefined"){O=s.grep(s.merge([],I.getElementsByTagName("script")),L);
M.splice.apply(M,[K+1,0].concat(O));K+=O.length}}}}return M}}var c=s.event.add,b=s.event.remove,g=s.event.trigger,r=s.fn.toggle,d=s.fn.live,m=s.fn.die,C="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",e=new RegExp("\\b(?:"+C+")\\b"),F=/(?:^|\s)hover(\.\S+|)\b/,l=function(G){if(typeof(G)!=="string"||s.event.special.hover){return G}if(F.test(G)){h("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'")}return G&&G.replace(F,"mouseenter$1 mouseleave$1")};if(s.event.props&&s.event.props[0]!=="attrChange"){s.event.props.unshift("attrChange","attrName","relatedNode","srcElement")
}if(s.event.dispatch){a(s.event,"handle",s.event.dispatch,"jQuery.event.handle is undocumented and deprecated")}s.event.add=function(J,H,I,K,G){if(J!==document&&e.test(H)){h("AJAX events should be attached to document: "+H)}c.call(this,J,l(H||""),I,K,G)};s.event.remove=function(K,I,J,G,H){b.call(this,K,l(I)||"",J,G,H)};s.fn.error=function(){var G=Array.prototype.slice.call(arguments,0);h("jQuery.fn.error() is deprecated");G.splice(0,0,"error");if(arguments.length){return this.bind.apply(this,G)}this.triggerHandler.apply(this,G);
return this};s.fn.toggle=function(K,I){if(!s.isFunction(K)||!s.isFunction(I)){return r.apply(this,arguments)}h("jQuery.fn.toggle(handler, handler...) is deprecated");var H=arguments,G=K.guid||s.guid++,J=0,L=function(M){var N=(s._data(this,"lastToggle"+K.guid)||0)%J;s._data(this,"lastToggle"+K.guid,N+1);M.preventDefault();return H[N].apply(this,arguments)||false};L.guid=G;while(J<H.length){H[J++].guid=G}return this.click(L)};s.fn.live=function(G,I,H){h("jQuery.fn.live() is deprecated");if(d){return d.apply(this,arguments)
}s(this.context).on(G,this.selector,I,H);return this};s.fn.die=function(G,H){h("jQuery.fn.die() is deprecated");if(m){return m.apply(this,arguments)}s(this.context).off(G,this.selector||"**",H);return this};s.event.trigger=function(I,J,H,G){if(!H&&!e.test(I)){h("Global events are undocumented and deprecated")}return g.call(this,I,J,H||document,G)};s.each(C.split("|"),function(H,G){s.event.special[G]={setup:function(){var I=this;if(I!==document){s.event.add(document,G+"."+s.guid,function(){s.event.trigger(G,null,I,true)
});s._data(this,G,s.guid++)}return false},teardown:function(){if(this!==document){s.event.remove(document,G+"."+s._data(this,G))}return false}}})})(jQuery,window);
(function(b){b.fn.__bind__=b.fn.bind;b.fn.__unbind__=b.fn.unbind;b.fn.__find__=b.fn.find;var a={version:"0.7.9",override:/keypress|keydown|keyup/g,triggersMap:{},specialKeys:{27:"esc",9:"tab",32:"space",13:"enter",8:"backspace",145:"scroll",20:"capslock",144:"numlock",19:"pause",45:"insert",36:"home",46:"del",35:"end",33:"pageup",34:"pagedown",37:"left",38:"up",39:"right",40:"down",109:"-",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",191:"/"},shiftNums:{"`":"~","1":"!","2":"@","3":"#","4":"$","5":"%","6":"^","7":"&","8":"*","9":"(","0":")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},newTrigger:function(e,d,f){var c={};
c[e]={};c[e][d]={cb:f,disableInInput:false};return c}};a.specialKeys=b.extend(a.specialKeys,{96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/"});b.fn.find=function(c){this.query=c;return b.fn.__find__.apply(this,arguments)};b.fn.unHotbind=function(h,e,g){if(b.isFunction(e)){g=e;e=null}if(e&&typeof e==="string"){var f=((this.prevObject&&this.prevObject.query)||(this[0].id&&this[0].id)||this[0]).toString();var d=h.split(" ");for(var c=0;
c<d.length;c++){delete a.triggersMap[f][d[c]][e]}}return this.__unbind__(h,g)};b.fn.hotbind=function(j,f,k){var h=j.match(a.override);if(b.isFunction(f)||!h){return this.__bind__(j,f,k)}else{var n=null,i=b.trim(j.replace(a.override,""));if(i){n=this.__bind__(i,f,k)}if(typeof f==="string"){f={combi:f}}if(f.combi){for(var m=0;m<h.length;m++){var d=h[m];var g=f.combi.toLowerCase(),e=a.newTrigger(d,g,k),l=((this.prevObject&&this.prevObject.query)||(this[0].id&&this[0].id)||this[0]).toString();e[d][g].disableInInput=f.disableInInput;
if(!a.triggersMap[l]){a.triggersMap[l]=e}else{if(!a.triggersMap[l][d]){a.triggersMap[l][d]=e[d]}}var c=a.triggersMap[l][d][g];if(!c){a.triggersMap[l][d][g]=[e[d][g]]}else{if(c.constructor!==Array){a.triggersMap[l][d][g]=[c]}else{a.triggersMap[l][d][g][c.length]=e[d][g]}}this.each(function(){var o=b(this);if(o.attr("hkId")&&o.attr("hkId")!==l){l=o.attr("hkId")+";"+l}o.attr("hkId",l)});n=this.__bind__(h.join(" "),f,a.handler)}}return n}};b.fn.codeToString=function(d){var e=d.which,j=a.specialKeys[e],i=!j&&String.fromCharCode(e).toLowerCase(),f=d.shiftKey,c=d.ctrlKey,h=d.altKey||d.originalEvent.altKey;
var k=j||i;var g="";if(h){g+="alt+"}if(c){g+="ctrl+"}if(f){g+="shift+"}return g+k};a.findElement=function(c){if(!b(c).attr("hkId")){if(b.browser.opera||b.browser.safari){while(!b(c).attr("hkId")&&c.parentNode){c=c.parentNode}}}return c};a.handler=function(e){var o=a.findElement(e.currentTarget),i=b(o),d=i.attr("hkId");if(d){d=d.split(";");var g=e.which,q=e.type,p=a.specialKeys[g],n=!p&&String.fromCharCode(g).toLowerCase(),h=e.shiftKey,c=e.ctrlKey,m=e.altKey||e.originalEvent.altKey,f=null;for(var r=0;
r<d.length;r++){if(a.triggersMap[d[r]][q]){f=a.triggersMap[d[r]][q];break}}if(f){var j;if(!h&&!c&&!m){j=f[p]||(n&&f[n])}else{var l="";if(m){l+="alt+"}if(c){l+="ctrl+"}if(h){l+="shift+"}j=f[l+p];if(!j){if(n){j=f[l+n]||f[l+a.shiftNums[n]]||(l==="shift+"&&f[a.shiftNums[n]])}}}if(j){var s=false;for(var r=0;r<j.length;r++){if(j[r].disableInInput){var k=b(e.target);if(i.is("input")||i.is("textarea")||i.is("select")||k.is("input")||k.is("textarea")||k.is("select")){return true}}s=s||j[r].cb.apply(this,[e])
}return s}}}};window.hotkeys=a;return b})(jQuery);
(function(f){function c(m){var i=f.data(m.data.target,"draggable");var h=i.options;var g=i.proxy;var l=m.data;var k=l.startLeft+m.pageX-l.startX;var j=l.startTop+m.pageY-l.startY;if(g){if(g.parent()[0]==document.body){if(h.deltaX!=null&&h.deltaX!=undefined){k=m.pageX+h.deltaX}else{k=m.pageX-m.data.offsetWidth}if(h.deltaY!=null&&h.deltaY!=undefined){j=m.pageY+h.deltaY}else{j=m.pageY-m.data.offsetHeight}}else{if(h.deltaX!=null&&h.deltaX!=undefined){k+=m.data.offsetWidth+h.deltaX}if(h.deltaY!=null&&h.deltaY!=undefined){j+=m.data.offsetHeight+h.deltaY
}}}if(m.data.parent!=document.body){k+=f(m.data.parent).scrollLeft();j+=f(m.data.parent).scrollTop()}if(h.axis=="h"){l.left=k}else{if(h.axis=="v"){l.top=j}else{l.left=k;l.top=j}}}function e(j){var i=f.data(j.data.target,"draggable");var h=i.options;var g=i.proxy;if(!g){g=f(j.data.target)}g.css({left:j.data.left,top:j.data.top});f("body").css("cursor",h.cursor)}function a(k){f.fn.draggable.isDragging=true;var j=f.data(k.data.target,"draggable");var i=j.options;var g=f(".droppable").filter(function(){return k.data.target!=this
}).filter(function(){var l=f.data(this,"droppable").options.accept;if(l){return f(l).filter(function(){return this==k.data.target}).length>0}else{return true}});j.droppables=g;var h=j.proxy;if(!h){if(i.proxy){if(i.proxy=="clone"){h=f(k.data.target).clone().insertAfter(k.data.target)}else{h=i.proxy.call(k.data.target,k.data.target)}j.proxy=h}else{h=f(k.data.target)}}h.css("position","absolute");c(k);e(k);i.onStartDrag.call(k.data.target,k);return false}function b(i){var h=f.data(i.data.target,"draggable");
c(i);if(h.options.onDrag.call(i.data.target,i)!=false){e(i)}var g=i.data.target;h.droppables.each(function(){var k=f(this);if(k.droppable("options").disabled){return}var j=k.offset();if(i.pageX>j.left&&i.pageX<j.left+k.outerWidth()&&i.pageY>j.top&&i.pageY<j.top+k.outerHeight()){if(!this.entered){f(this).trigger("_dragenter",[g]);this.entered=true}f(this).trigger("_dragover",[g])}else{if(this.entered){f(this).trigger("_dragleave",[g]);this.entered=false}}});return false}function d(n){f.fn.draggable.isDragging=false;
b(n);var j=f.data(n.data.target,"draggable");var g=j.proxy;var i=j.options;if(i.revert){if(k()==true){f(n.data.target).css({position:n.data.startPosition,left:n.data.startLeft,top:n.data.startTop})}else{if(g){var m,l;if(g.parent()[0]==document.body){m=n.data.startX-n.data.offsetWidth;l=n.data.startY-n.data.offsetHeight}else{m=n.data.startLeft;l=n.data.startTop}g.animate({left:m,top:l},function(){h()})}else{f(n.data.target).animate({left:n.data.startLeft,top:n.data.startTop},function(){f(n.data.target).css("position",n.data.startPosition)
})}}}else{f(n.data.target).css({position:"absolute",left:n.data.left,top:n.data.top});k()}i.onStopDrag.call(n.data.target,n);f(document).unbind(".draggable");setTimeout(function(){f("body").css("cursor","")},100);function h(){if(g){g.remove()}j.proxy=null}function k(){var o=false;j.droppables.each(function(){var q=f(this);if(q.droppable("options").disabled){return}var p=q.offset();if(n.pageX>p.left&&n.pageX<p.left+q.outerWidth()&&n.pageY>p.top&&n.pageY<p.top+q.outerHeight()){if(i.revert){f(n.data.target).css({position:n.data.startPosition,left:n.data.startLeft,top:n.data.startTop})
}f(this).trigger("_drop",[n.data.target]);h();o=true;this.entered=false;return false}});if(!o&&!i.revert){h()}return o}return false}f.fn.draggable=function(g,h){if(typeof g=="string"){return f.fn.draggable.methods[g](this,h)}return this.each(function(){var j;var l=f.data(this,"draggable");if(l){l.handle.unbind(".draggable");j=f.extend(l.options,g)}else{j=f.extend({},f.fn.draggable.defaults,g||{})}var k=j.handle?(typeof j.handle=="string"?f(j.handle,this):j.handle):f(this);f.data(this,"draggable",{options:j,handle:k});
if(j.disabled){f(this).css("cursor","");return}k.unbind(".draggable").bind("mousemove.draggable",{target:this},function(n){if(f.fn.draggable.isDragging){return}var m=f.data(n.data.target,"draggable").options;if(i(n)){f(this).css("cursor",m.cursor)}else{f(this).css("cursor","")}}).bind("mouseleave.draggable",{target:this},function(m){f(this).css("cursor","")}).bind("mousedown.draggable",{target:this},function(p){if(i(p)==false){return}f(this).css("cursor","");var m=f(p.data.target).position();var q=f(p.data.target).offset();
var o={startPosition:f(p.data.target).css("position"),startLeft:m.left,startTop:m.top,left:m.left,top:m.top,startX:p.pageX,startY:p.pageY,offsetWidth:(p.pageX-q.left),offsetHeight:(p.pageY-q.top),target:p.data.target,parent:f(p.data.target).parent()[0]};f.extend(p.data,o);var n=f.data(p.data.target,"draggable").options;if(n.onBeforeDrag.call(p.data.target,p)==false){return}f(document).bind("mousedown.draggable",p.data,a);f(document).bind("mousemove.draggable",p.data,b);f(document).bind("mouseup.draggable",p.data,d)
});function i(u){var n=f.data(u.data.target,"draggable");var s=n.handle;var q=f(s).offset();var o=f(s).outerWidth();var w=f(s).outerHeight();var x=u.pageY-q.top;var m=q.left+o-u.pageX;var v=q.top+w-u.pageY;var p=u.pageX-q.left;return Math.min(x,m,v,p)>n.options.edge}})};f.fn.draggable.methods={options:function(g){return f.data(g[0],"draggable").options},proxy:function(g){return f.data(g[0],"draggable").proxy},enable:function(g){return g.each(function(){f(this).draggable({disabled:false})})},disable:function(g){return g.each(function(){f(this).draggable({disabled:true})
})}};f.fn.draggable.defaults={proxy:null,revert:false,cursor:"move",deltaX:null,deltaY:null,handle:null,disabled:false,edge:0,axis:null,onBeforeDrag:function(g){},onStartDrag:function(g){},onDrag:function(g){},onStopDrag:function(g){}};f.fn.draggable.isDragging=false})(jQuery);
(function(a){function b(c){a(c).addClass("droppable");a(c).bind("_dragenter",function(f,d){a.data(c,"droppable").options.onDragEnter.apply(c,[f,d])});a(c).bind("_dragleave",function(f,d){a.data(c,"droppable").options.onDragLeave.apply(c,[f,d])});a(c).bind("_dragover",function(f,d){a.data(c,"droppable").options.onDragOver.apply(c,[f,d])});a(c).bind("_drop",function(f,d){a.data(c,"droppable").options.onDrop.apply(c,[f,d])})}a.fn.droppable=function(c,d){if(typeof c=="string"){return a.fn.droppable.methods[c](this,d)
}c=c||{};return this.each(function(){var e=a.data(this,"droppable");if(e){a.extend(e.options,c)}else{b(this);a.data(this,"droppable",{options:a.extend({},a.fn.droppable.defaults,c)})}})};a.fn.droppable.methods={options:function(c){return a.data(c[0],"droppable").options},enable:function(c){return c.each(function(){a(this).droppable({disabled:false})})},disable:function(c){return c.each(function(){a(this).droppable({disabled:true})})}};a.fn.droppable.defaults={accept:null,disabled:false,onDragEnter:function(d,c){},onDragOver:function(d,c){},onDragLeave:function(d,c){},onDrop:function(d,c){}}
})(jQuery);
(function(a){a.fn.resizable=function(d,h){if(typeof d=="string"){return a.fn.resizable.methods[d](this,h)}function c(m){var l=m.data;var j=a.data(l.target,"resizable").options;if(l.dir.indexOf("e")!=-1){var k=l.startWidth+m.pageX-l.startX;k=Math.min(Math.max(k,j.minWidth),j.maxWidth);l.width=k}if(l.dir.indexOf("s")!=-1){var i=l.startHeight+m.pageY-l.startY;i=Math.min(Math.max(i,j.minHeight),j.maxHeight);l.height=i}if(l.dir.indexOf("w")!=-1){var k=l.startWidth-m.pageX+l.startX;k=Math.min(Math.max(k,j.minWidth),j.maxWidth);
l.width=k;l.left=l.startLeft+l.startWidth-l.width}if(l.dir.indexOf("n")!=-1){var i=l.startHeight-m.pageY+l.startY;i=Math.min(Math.max(i,j.minHeight),j.maxHeight);l.height=i;l.top=l.startTop+l.startHeight-l.height}}function f(k){var j=k.data;var i=a(j.target);i.css({left:j.left,top:j.top});if(i.outerWidth()!=j.width){i._outerWidth(j.width)}if(i.outerHeight()!=j.height){i._outerHeight(j.height)}}function b(i){a.fn.resizable.isResizing=true;a.data(i.data.target,"resizable").options.onStartResize.call(i.data.target,i);
return false}function e(i){c(i);if(a.data(i.data.target,"resizable").options.onResize.call(i.data.target,i)!==false){f(i)}return false}function g(i){a.fn.resizable.isResizing=false;c(i,true);f(i);a.data(i.data.target,"resizable").options.onStopResize.call(i.data.target,i);a(document).unbind(".resizable");a("body").css("cursor","");return false}return this.each(function(){var j=null;var k=a.data(this,"resizable");if(k){a(this).unbind(".resizable");j=a.extend(k.options,d||{})}else{j=a.extend({},a.fn.resizable.defaults,d||{});
a.data(this,"resizable",{options:j})}if(j.disabled===true){return}a(this).bind("mousemove.resizable",{target:this},function(m){if(a.fn.resizable.isResizing){return}var l=i(m);if(l==""){a(m.data.target).css("cursor","")}else{a(m.data.target).css("cursor",l+"-resize")}}).bind("mouseleave.resizable",{target:this},function(l){a(l.data.target).css("cursor","")}).bind("mousedown.resizable",{target:this},function(o){var l=i(o);if(l==""){return}function n(p){var q=parseInt(a(o.data.target).css(p));if(isNaN(q)){return 0
}else{return q}}var m={target:o.data.target,dir:l,startLeft:n("left"),startTop:n("top"),left:n("left"),top:n("top"),startX:o.pageX,startY:o.pageY,startWidth:a(o.data.target).outerWidth(),startHeight:a(o.data.target).outerHeight(),width:a(o.data.target).outerWidth(),height:a(o.data.target).outerHeight(),deltaWidth:a(o.data.target).outerWidth()-a(o.data.target).width(),deltaHeight:a(o.data.target).outerHeight()-a(o.data.target).height()};a(document).bind("mousedown.resizable",m,b);a(document).bind("mousemove.resizable",m,e);
a(document).bind("mouseup.resizable",m,g);a("body").css("cursor",l+"-resize")});function i(r){var s=a(r.data.target);var n="";var o=s.offset();var l=s.outerWidth();var u=s.outerHeight();var m=j.edge;if(r.pageY>o.top&&r.pageY<o.top+m){n+="n"}else{if(r.pageY<o.top+u&&r.pageY>o.top+u-m){n+="s"}}if(r.pageX>o.left&&r.pageX<o.left+m){n+="w"}else{if(r.pageX<o.left+l&&r.pageX>o.left+l-m){n+="e"}}var t=j.handles.split(",");for(var p=0;p<t.length;p++){var q=t[p].replace(/(^\s*)|(\s*$)/g,"");if(q=="all"||q==n){return n
}}return""}})};a.fn.resizable.methods={options:function(b){return a.data(b[0],"resizable").options},enable:function(b){return b.each(function(){a(this).resizable({disabled:false})})},disable:function(b){return b.each(function(){a(this).resizable({disabled:true})})}};a.fn.resizable.defaults={disabled:false,handles:"n, e, s, w, ne, se, sw, nw, all",minWidth:233,minHeight:149,maxWidth:10000,maxHeight:10000,edge:5,onStartResize:function(b){},onResize:function(b){},onStopResize:function(b){}};a.fn.resizable.isResizing=false
})(jQuery);
(function(j){var c,m="sortable",l={drag:true,drop:true,exclude:"",nested:true,vertical:true},a={afterMove:function(q,d,r){},containerPath:"",containerSelector:"ol, ul",distance:0,delay:0,handle:"",itemPath:"",itemSelector:"li",isValidTarget:function(q,d){return true},onCancel:function(q,d,s,r){},onDrag:function(q,d,s,r){q.css(d)},onDragStart:function(q,d,s,r){q.css({height:q.height(),width:q.width()});q.addClass("dragged");j("body").addClass("dragging")},onDrop:function(q,d,s,r){q.removeClass("dragged").removeAttr("style");
j("body").removeClass("dragging")},onMousedown:function(d,r,q){if(q.target.nodeName!="INPUT"&&q.target.nodeName!="SELECT"){q.preventDefault();return true}},placeholder:'<li class="placeholder"/>',pullPlaceholder:true,serialize:function(s,r,q){var d=j.extend({},s.data());if(q){return r}else{if(r[0]){d.children=r;delete d.subContainer}}delete d.sortable;return d},tolerance:0},i={},e=0,f={left:0,top:0,bottom:0,right:0};c={start:"touchstart.sortable mousedown.sortable",drop:"touchend.sortable touchcancel.sortable mouseup.sortable",drag:"touchmove.sortable mousemove.sortable",scroll:"scroll.sortable"};
function n(r,q){var d=Math.max(0,r[0]-q[0],q[0]-r[1]),s=Math.max(0,r[2]-q[1],q[1]-r[3]);return d+s}function p(w,u,q,s){var r=w.length,d=s?"offset":"position";q=q||0;while(r--){var t=w[r].el?w[r].el:j(w[r]),v=t[d]();v.left+=parseInt(t.css("margin-left"),10);v.top+=parseInt(t.css("margin-top"),10);u[r]=[v.left-q,v.left+t.outerWidth()+q,v.top-q,v.top+t.outerHeight()+q]}}function k(r,d){var q=d.offset();return{left:r.left-q.left,top:r.top-q.top}}function o(s,u,r){u=[u.left,u.top];r=r&&[r.left,r.top];
var t,q=s.length,d=[];while(q--){t=s[q];d[q]=[q,n(t,u),r&&n(t,r)]}d=d.sort(function(w,v){return v[1]-w[1]||v[2]-w[2]||v[0]-w[0]});return d}function h(d){this.options=j.extend({},a,d);this.containers=[];if(!this.options.parentContainer){this.scrollProxy=j.proxy(this.scroll,this);this.dragProxy=j.proxy(this.drag,this);this.dropProxy=j.proxy(this.drop,this);this.placeholder=j(this.options.placeholder);if(!d.isValidTarget){this.options.isValidTarget=undefined}}}h.get=function(d){if(!i[d.group]){if(d.group===undefined){d.group=e++
}i[d.group]=new h(d)}return i[d.group]};h.prototype={dragInit:function(q,d){this.$document=j(d.el[0].ownerDocument);if(d.enabled()){this.item=j(q.target).closest(this.options.itemSelector);this.itemContainer=d;if(this.item.is(this.options.exclude)||!this.options.onMousedown(this.item,a.onMousedown,q)){return}this.setPointer(q);this.toggleListeners("on")}else{this.toggleListeners("on",["drop"])}this.setupDelayTimer();this.dragInitDone=true},drag:function(s){if(!this.dragging){if(!this.distanceMet(s)||!this.delayMet){return
}this.options.onDragStart(this.item,this.itemContainer,a.onDragStart,s);this.item.before(this.placeholder);this.dragging=true}this.setPointer(s);this.options.onDrag(this.item,k(this.pointer,this.item.offsetParent()),a.onDrag,s);var d=s.pageX,u=s.pageY,r=this.sameResultBox,q=this.options.tolerance;if(!r||r.top-q>u||r.bottom+q<u||r.left-q>d||r.right+q<d){if(!this.searchValidTarget()){this.placeholder.detach()}}},drop:function(d){this.toggleListeners("off");this.dragInitDone=false;if(this.dragging){if(this.placeholder.closest("html")[0]){this.placeholder.before(this.item).detach()
}else{this.options.onCancel(this.item,this.itemContainer,a.onCancel,d)}this.options.onDrop(this.item,this.getContainer(this.item),a.onDrop,d);this.clearDimensions();this.clearOffsetParent();this.lastAppendedItem=this.sameResultBox=undefined;this.dragging=false}},searchValidTarget:function(v,t){if(!v){v=this.relativePointer||this.pointer;t=this.lastRelativePointer||this.lastPointer}var q=o(this.getContainerDimensions(),v,t),s=q.length;while(s--){var r=q[s][0],w=q[s][1];if(!w||this.options.pullPlaceholder){var d=this.containers[r];
if(!d.disabled){if(!this.$getOffsetParent()){var u=d.getItemOffsetParent();v=k(v,u);t=k(t,u)}if(d.searchValidTarget(v,t)){return true}}}}if(this.sameResultBox){this.sameResultBox=undefined}},movePlaceholder:function(q,r,t,d){var s=this.lastAppendedItem;if(!d&&s&&s[0]===r[0]){return}r[t](this.placeholder);this.lastAppendedItem=r;this.sameResultBox=d;this.options.afterMove(this.placeholder,q,r)},getContainerDimensions:function(){if(!this.containerDimensions){p(this.containers,this.containerDimensions=[],this.options.tolerance,!this.$getOffsetParent())
}return this.containerDimensions},getContainer:function(d){return d.closest(this.options.containerSelector).data(m)},$getOffsetParent:function(){if(this.offsetParent===undefined){var d=this.containers.length-1,q=this.containers[d].getItemOffsetParent();if(!this.options.parentContainer){while(d--){if(q[0]!=this.containers[d].getItemOffsetParent()[0]){q=false;break}}}this.offsetParent=q}return this.offsetParent},setPointer:function(q){var r={left:q.pageX,top:q.pageY};if(this.$getOffsetParent()){var d=k(r,this.$getOffsetParent());
this.lastRelativePointer=this.relativePointer;this.relativePointer=d}this.lastPointer=this.pointer;this.pointer=r},distanceMet:function(d){return(Math.max(Math.abs(this.pointer.left-d.pageX),Math.abs(this.pointer.top-d.pageY))>=this.options.distance)},setupDelayTimer:function(){var d=this;this.delayMet=!this.options.delay;if(!this.delayMet){clearTimeout(this._mouseDelayTimer);this._mouseDelayTimer=setTimeout(function(){d.delayMet=true},this.options.delay)}},scroll:function(d){this.clearDimensions();
this.clearOffsetParent()},toggleListeners:function(r,d){var q=this;d=d||["drag","drop","scroll"];j.each(d,function(s,t){q.$document[r](c[t],q[t+"Proxy"])})},clearOffsetParent:function(){this.offsetParent=undefined},clearDimensions:function(){this.containerDimensions=undefined;var d=this.containers.length;while(d--){this.containers[d].clearDimensions()}},destroy:function(){i[this.options.group]=undefined}};function g(r,q){this.el=r;this.options=j.extend({},l,q);this.group=h.get(this.options);this.rootGroup=this.options.rootGroup||this.group;
this.parentContainer=this.options.parentContainer;this.handle=this.rootGroup.options.handle||this.rootGroup.options.itemSelector;var d=this.rootGroup.options.itemPath,s=d?this.el.find(d):this.el;s.on(c.start,this.handle,j.proxy(this.dragInit,this));if(this.options.drop){this.group.containers.push(this)}}g.prototype={dragInit:function(q){var d=this.rootGroup;if(!d.dragInitDone&&q.which===1&&this.options.drag){d.dragInit(q,this)}},searchValidTarget:function(d,r){var v=o(this.getItemDimensions(),d,r),s=v.length,w=this.rootGroup,y=!w.options.isValidTarget||w.options.isValidTarget(w.item,this);
if(!s&&y){var x=this.rootGroup.options.itemPath,u=x?this.el.find(x):this.el;w.movePlaceholder(this,u,"append");return true}else{while(s--){var t=v[s][0],q=v[s][1];if(!q&&this.hasChildGroup(t)){var z=this.getContainerGroup(t).searchValidTarget(d,r);if(z){return true}}else{if(y){this.movePlaceholder(t,d);return true}}}}},movePlaceholder:function(x,q){var B=j(this.items[x]),w=this.itemDimensions[x],d="after",r=B.outerWidth(),A=B.outerHeight(),v=B.offset(),s={left:v.left,right:v.left+r,top:v.top,bottom:v.top+A};
if(this.options.vertical){var z=(w[2]+w[3])/2,y=q.top<=z;if(y){d="before";s.bottom-=A/2}else{s.top+=A/2}}else{var t=(w[0]+w[1])/2,u=q.left<=t;if(u){d="before";s.right-=r/2}else{s.left+=r/2}}if(this.hasChildGroup(x)){s=f}this.rootGroup.movePlaceholder(this,B,d,s)},getItemDimensions:function(){if(!this.itemDimensions){this.items=this.$getChildren(this.el,"item").filter(":not(.placeholder, .dragged)").get();p(this.items,this.itemDimensions=[],this.options.tolerance)}return this.itemDimensions},getItemOffsetParent:function(){var q,d=this.el;
if(d.css("position")==="relative"||d.css("position")==="absolute"||d.css("position")==="fixed"){q=d}else{q=d.offsetParent()}return q},hasChildGroup:function(d){return this.options.nested&&this.getContainerGroup(d)},getContainerGroup:function(r){var s=j.data(this.items[r],"subContainer");if(s===undefined){var q=this.$getChildren(this.items[r],"container");s=false;if(q[0]){var d=j.extend({},this.options,{parentContainer:this,rootGroup:this.rootGroup,group:e++});s=q[m](d).data(m).group}j.data(this.items[r],"subContainer",s)
}return s},enabled:function(){return !this.disabled&&(!this.parentContainer||this.parentContainer.enabled())},$getChildren:function(s,r){var q=this.rootGroup.options,t=q[r+"Path"],d=q[r+"Selector"];s=j(s);if(t){s=s.find(t)}return s.children(d)},_serialize:function(s,r){var t=this,d=r?"item":"container",q=this.$getChildren(s,d).not(this.options.exclude).map(function(){return t._serialize(j(this),!r)}).get();return this.rootGroup.options.serialize(s,q,r)},clearDimensions:function(){this.itemDimensions=undefined;
if(this.items&&this.items[0]){var d=this.items.length;while(d--){var q=j.data(this.items[d],"subContainer");if(q){q.clearDimensions()}}}}};var b={enable:function(d){this.disabled=false},disable:function(d){this.disabled=true},serialize:function(){return this._serialize(this.el,true)},destroy:function(){this.rootGroup.destroy()}};j.extend(g.prototype,b);j.fn[m]=function(d){var q=Array.prototype.slice.call(arguments,1);return this.map(function(){var s=j(this),r=s.data(m);if(r&&b[d]){return b[d].apply(r,q)||this
}else{if(!r&&(d===undefined||typeof d==="object")){s.data(m,new g(s,d))}}return this})}})(jQuery);
if (window.FR == null) {
    window.FR = {};
}

$.extend(FR, {
    /**
     * 这里添加一些必须要使用中文的键值对，然后通过FR.plainText(key)进行调用
     */
    chinese : {

    },

    i18n: {"FR-Designer_Dismenber":"分隔符","FR-Engine_ConditionB-is_less_than_or_equal_to":"小于或等于","FR-Designer_Certificate_Path":"证书路径","Select_Mail_Column":"选择邮箱对应列","BindColumn-Have_Up_Parent_Cell":"有上父格","MConfig-BorderTitle":"图片","ChartF-Radar":"雷达图","FR-Designer_Selection":"选择","FR-Chart-Help_UpdateOnline":"在线更新","Page-Attribute":"分页页面属性","ChartF-Interval":"间隔定义","FS-Setting-Theme_Config":"主题","FS-Schedule-End_If_Executed":"任务执行一次后即结束","Icon_And_Text_Cannot_Be_Empty_In_The_Same_Time":"图标和文本不能同时为空","Schedule-Hourly":"每小时","FS-Mobile-Mobile_Dev_Binding":"移动平台","Chart_Legend_Is_Visible":"图例可见","TrueRunInterval":"正确的运行间隔时间单位","FR-Desinger-Plugin_Updater_Backup_OldJar_To":"已将旧jar包备份到：","Platform-DB_Connection_Create_Failure":"数据库连接创建失败","FR-Designer_Double_Click_Edit_OR_Clear":"双击进行编辑或清除","B-PrintSetup":"打印设置(P)","FR-Chart-Map_NameAlreadyExist":"该地图名已存在","Export_Setting":"导出配置","FS-Generic-System_Status":"系统状态","Selection":"选择","FR-Designer_Report-Design-Ruler-Units":"报表设计标尺单位","FR-Chart-Map_Xining":"西宁市","turn":"转向","High-Low-Line":"高低线","FS-Reg-Export_Info":"导出注册信息","FS-Monitor-Log_Clean_One_Month_Ago":"一个月前","FR-Designer_Unit_CM":"厘米","FS-Report-Choose_ViewType":"请选择预览类型！","FR-Designer_Data-confusion":"数据混淆","HTML-Write_Content_Save_Successfully":"填写内容保存成功","ChengduCity":"成都市","Directory":"目录","Dismenber":"分隔符","Chart-In_Pie":"饼图内","Drag_To_Move":"点此拉动","Center":"居中","FR-Chart-Type_Range":"全距图","Schedule-Edit_Start_Time":"编辑起始时间","DBCP_MAX_WAIT":"最大等待时间","M-Open_Report":"打开...","Red":"红色","FR-Designer_Cursor_to_next_row":"光标移到下一行","ReportServerP-Report_server_parameter":"报表服务器参数","Please_enter_the_export_file_name":"请输入导出文件名","Widget-Comb_Widget_Config":"组合控件","Plugin-ChartF_LimitAreaSize":"限制区域大小","Template_Parameters":"模板参数","M_Format-Add_Column_After":"在后面添加列(L)","Add":"增加","Email-Sending":"正在发送邮件","FR-Chart-Data_OnlyUseBefore":"只使用前","Prev_Month":"上一月","Chart_Relief":"浮雕","FR-Engine_FS_End_Time":"结束时间","FR-Base_Sche_Friday":"星期五","BackgroundTexture-Stationery":"信纸","FS-System-Config_Sure_To_Restore":"确认还原?","FR-Designer-Plugin_Duplicate_ID":"该插件和已安装的插件id重复","Register_failed":"提示：当前应用的WEB-INF/resources路径下未发现服务器授权文件！请尽快导入授权文件并完成","Search_Result":"搜索结果","ParameterD-The_Other":"其它","FR-Designer_Shortcut_Set":"快捷键设置","FS-Generic-Privilege_Keep_Login_State":"保持登录状态","CellWrite-Including_Current_Cell":"包括当前格子","FR-Engine_FangSong":"仿宋","FS-Admin-Enter_New_Password":"设置新密码","FR-App-Template_Save":"保存","Max-Files_Length":"最多上传文件数","FR-Engine-Page_Setup_Landscape":"横向","Cannot_Parse_Template_File":"无法解析模板文件","FR-Chart-Map_Corresponding_Fields":"区域对应字段","Chart-Trend_Line":"趋势线","BindColumn-Summary_Parameters":"汇总参数","PageSetup-Left_to_right":"先行后列","FR-Chart-Choose_Style":"样式选择","Chart_TrendLine":"趋势线","Utils-Activate_Designer":"激活设计器","Form":"表单","ECP_error_pwd":"密码错误","FS-Msg-Update_Chosen":"插件已被更新,重启服务器后生效","Warning-Template_Do_Not_Exsit":"模板不存在","Form-Basic_Properties":"基本属性","FR-Chart-Type_Gantt":"甘特图","I-RadarChartStyle_Marker":"数据点雷达图","M_Server-Public_Datasource_Manager":"公有数据源管理器(D)","Custom_Icon_RemoveIcon":"移除图标","FS-Generic-Simple_Closed":"已关闭","Present":"形态","HJS-Subject":"主题","FR-Chart-Series_Config":"系列设置","FR-Engine_WritePreview":"填报预览","FR-Engine_Over-Sheet":"跨sheet计算","Milliseconds":"毫秒","Plugin-Memory_Alarm_DS_Max_Count":"单数据集最大行数","FR-Engine_ExecuteOneTime":"执行一次","Form-All_Files":"全部文件","FS-Setting-Homepage_URL_Pad":"平板","Plugin-ChartF_CategoryLabel":"分类标签","BackgroundTexture-RecycledPaper":"再生纸","Version-does-not-support":"您当前使用的lic不支持远程设计功能，请升级您的lic","FR-Engine-Condition_Begin_With":"开头是","Flash/PdfInstallSet_Message":"文件不能在\u2018WEB-INF\u2019文件夹下，也不能在web应用目录外。","FR-Designer_FS_Close_Other_Templates":"关闭其他模版","FR-Engine-Condition_Not_Contains":"不包含","StyleAlignment-Bottom":"靠下","Plugin-ChartF_New_Map":"新建地图","parameter_name_exist":"该参数名已存在","FR-Designer_Unit_MM":"毫米","ConditionB-does_not_equal_to":"不等于","Fujian":"福建省","Dic-Set_Key_And_Value":"设定键值和数值","SQLWizard-add_subquery":"增加子查询","Chart-Stock_Check_Data":"请检查您的数据","FR-Designer-Undo_All_Authority_Operations":"撤销前一次权限编辑的所有操作","PageSetup-Predefined":"预定义","M_Insert-Barcode":"条形码","FR-Chart-Province_Map":"省市地图","ReportColumns-Columns_after":"超过","FS-Monitor-Visits_Template":"模板访问次数","FR-Designer_M-Help":"帮助","DashBoard-Online_Document":"在线文档","HF-New_Line":"换行符","NS_export_wordPageSize":"错误代码:1114 导出Word不支持多Sheet下的不同页面设置","Short-Sep":"九","Column_Cell":"横格","FR-Designer_FRFont":"字体","FR-Designer_EmailPane-tips":"<html>您可以键入${abc}作为一个参数，abc为参数名称；${today()}作为公式，例如：标题正文为\"${today()}统计情况\"，收件人为\"${p},123@gmail.com,mike\"，这里mike必须是已保存在平台用户管理里的用户名<\/html>","Form-Top_Align":"顶部对齐","Sure_To_Close_Synch_Data_Sets":"确定要关闭同步数据集","FS-Schedule-Execute_By_Expression":"表达式设定","Plugin-Memory_Alarm_Msg_Head":"当内存占用","FR-Custom_styles_lost":"自定义样式已丢失","FS-Generic-Mobile_Phone":"手机","Utils-OpenDemoEnv":"产品演示，需要自动切换至工作目录：","contact_info":"联系信息(选填)","FR-Base-Time_Day":"天","FS-Setting-Input_Homepage_Name":"请设置首页名","FR-Designer_Message":"信息","Type-Parameter":"<html> <body> 您可以键入${abc}作为一个参数，这里abc是参数的名称。例如：<br>","FS-Monitor-Model_Unused":"未使用","DS-Embedded_TableData":"内置数据集","FR-Designer_WorkBook":"工作簿","RowTo":"行至第","Form-Change_Widget_Name_Discription":"请输入一个新的控件名","FR-Designer-Widget_Settings":"控件设置","FS-System-Reportlets_root_directory_name":"网络报表根目录名","FR-Base_February":"二月","FS-Setting-Color_Custom":"自定义","All":"所有","FR-Engine_Select_FS_Roles":"选择平台角色","Change_To_LayerReport":"转换成层式报表","ChartF-Pie_Depth":"饼图厚度","FS-User-Ldap_Suffix":"用户名后缀","M_File-Export-Word":"Word格式","Password_Changed_Successfully":"密码修改成功","FS-Setting-Add_Home_Page":"新建首页","Chart_Average_Value":"平均值","FR-Chart-Large_Data_Model":"大数据","Show_Icon":"显示按钮图标","FR-Designer_BorderLayout":"边界布局","Write_Preview":"填报预览","Datasource-SQL_Query":"SQL查询","Event-cardchange":"Tab切换事件","Event-callback":"上传后","FR-Designer_EmailPane-mailSubject":"邮件标题","SQL":"SQL","WF-Junior":"下级","Datasource-User_Defined":"自定义","Bright-Style":"明亮","FR-Chart-Design_ChartModule":"设计器图表模块","And":"且","SQLWizard-wait":"稍候","Chart_Null_Value_Continue":"跳过","FR-Base_March":"三月","FR-Engine_Current_Node_Staff":"本节点人员","FR-Chart-Chart_Text":"测","Row":"行","Utils-Unregistered_Version":"未授权版本(包含全部功能,不允许用于商业目的)","BindColumn-Select":"列表","Show_Grid_Line":"显示网格线","FR-Designer-Basic_Restart_Designer_Later":"稍后重启","Default_ParameterWindow_CountPerRow":"每行参数个数","CellWrite-Suppress_If_Duplicated(Used_in_Group_Report)":"纵向合并内容相同的单元格(分组报表使用)","Function":"函数","Plugin-ChartF_NewCustom_ColumnArea":"柱形图-面积图","Form-Same_Width":"等宽","FR-Chart-Map_Yunnan":"云南","Form-Empty":"空值","FR-Designer_Custom_Icon_SelectIcon":"选择图标","Cache-Local_Disk_Cache-Setting":"本地磁盘缓存设置","Plugin-ChartF_Gauge_Pointer180":"多指针的仪表盘180度","Create_Time":"创建时间","ReportServerP-FormToolBar":"表单工具栏","BindColumn-Even_Selected_(2,4,6...)":"选择了偶数集(2,4,6...)","FR-Chart-Type_Column":"柱形图","FR-Base_Value":"值","FR-Designer_Utils-Move_Up":"上移","FR-Designer_Certificate_Pass":"https秘钥","FR-Chart-Color_Subject":"主题","FR-Engine_ConditionB-is_greater_than":"大于","FR-Engine_This_Template_Has_Exist":"这个模板已经存在","FR-Engine_Applet_Print":"Applet打印","BindColumn-Bottom_N":"后N个","FR-Engine_Failed":"失败","Cursor_to_next_row":"光标移到下一行","FS-Generic-Simple_Fri":"五","Widget-Load_Type":"加载","FR-Designer_Font":"字体","FR-Plugin_Attr-Set":"属性设置","NS_export_excelHtml":"错误代码:1111 导出Excel不支持Html中部分标签","FR-Designer_Sequenced_number":"序号","M-Print_Report":"打印报表(P)","FlowLayout-Right":"右","FR-Designer-Widget-Style_Preview":"预览","Oracle_All_Tables":"所有表","Chart-Link_Reportlet":"网络报表","SummaryFields":"汇总字段","FR-Action_Sort":"排序","Hyperlink-Features":"特征","Form-RoleTableTree":"角色表格树","Sort-Descending":"降序","Insert-Formula_Edit":"公式编辑","FS-Setting-Homepage_URL_Mobile":"手机","FR-Designer_Other":"其他","FR-Engine_ConditionB-Parameter_name_cannot_be_null":"参数名字不能为空","Uping_File":"正在上传文件","FS-Schedule-Execute_Once":"只执行一次","RP_Pass":"通过","ServerM-Define_Styles":"","ReportServerP-Write_Processor":"填报处理器","FR-Engine_Export":"导出","ExpandD-Expandable":"可伸展性","ReportServerP-Printers(Server)":"打印机(服务器)","Group":"分组","Export-Word":"Word格式","Vertical-SplitPane":"左右分割布局面板","Datasource-Query_Type":"查询类型","Widget-Sizing":"大小调整","BackgroundTexture-PinkTissuePaper":"粉色砂纸","Plugin-Memory_Alarm_Setting":"设置","must_choose_one_report":"必须选择一张报表！","Event-beforeflashprint":"Flash打印前","FR-Engine_ConditionB-OR":"或(OR)","M_Report-Report_Interface":"参数界面(I)","ChartF-Axis":"坐标轴","FR-Engine_ConditionB-null":"为空","FR-Engine-Export_Excel_LargeData_Page_Info":"请耐心等待文件的生成，所花费的时间将视数据量的大小而定，在此过程中请勿关闭当前页面或浏览器。","Has_been_gone":"  已丢失，是否增加该样式？","Datasource-Data_Map_Source":"数据字典来源","Run":"运行","REPORT_XML":"报表内容传输","Chart_Move_Average":"移动平均","FR-Designer_Email_sentEmail":"发送邮件","Add_summary_fields":"添加汇总字段","alert_word":"选择不固定行高导出时, 编辑导出的word, 单元格行高会随着内容自动拉伸, 此情况下导出结果分页位置与预览结果可能会不再一致.","FR-Engine_Total-Create-Destory-Session":"累计创建/销毁:","FR-Base-Song_TypeFace":"宋体","FS-Admin-Account_Has_Set":"已经设置过了管理员及密码，请与您的管理员联系","Event-afterwrite":"填报后","M_Insert-Formula":"插入公式","Chart-LngFirst":"经度在前","FR-Designer_Component_Scale":"组件缩放","SyncSuccess":"同步数据集成功","EX-IP_Address_Overflow":"IP地址数量超过限制","FR-Engine_Image-Export":"导出图片","FR-Designer_loadedTreeModel":"加载失败,请检查后重试","I-RadarChartStyle_FillwithMarker":"数据点填充雷达图","Search":"搜索","FS-Generic-Simple_October":"十月","GroupReport-Set_Page_Footer_Of_Last_Page_Under_Report_Footer":"最后一页页表脚置于报表脚下方","FR-Engine_Select_FS_Users":"选择平台用户","FS-Generic-Schedule_Template":"模板名称","FR-Base-Time_Year":"年","FR-Designer_Failed":"失败","RoleName_Can_Not_Be_Null":"角色名不允许为空且不能重复","FR-Chart-Table_Data":"数据集","FR-Engine_Interactive-chart":"图表联动","FS-Mobile-User_Limit_Tip_Right":"用户使用移动应用","FS-Report-Do_Select_Dir":"请选择目录","FR-Engine_Form":"表单","Data_Rollback_Failed":"数据回滚失败","FR-Designer_Table":"表","FR-Engine_Repeat":"重复","FR-Designer_Dropdown-More-Preview":"下拉获取更多预览方式","ChartF-Series_Name_From":"系列名使用","FS-Msg-Delete_YES_NO":"确定删除此插件?","Dictionary-Dynamic_SQL":"动态SQL","FS-Process-Limit":"限制","FS-Report-BI_Data_Settings":"BI数据配置","FS-Generic-Simple_September":"九月","Select_DataColumn":"选择数据列","UpBarBorderStyleAndColor":"涨柱样式","Preference-Horizontal_Scroll_Bar_Visible":"水平滚动条可见","Chart_Not_Zero":"不为零","INFO-End_Converting_ReportPage_To_Html":"报表页转Html结束","Schedule-Unspecified_Report_File_Prefix":"未指定报表文件前缀","ExpandD-Data_Column":"数据列","Form-Events":"事件","Others":"其它","FormulaD-Invalid_SQL":"非法的SQL语句","FR-Chart-Category_Gap":"分类间隔","FR-Chart-Stock_Close":"收盘","FS-BI-Dezi_Report_Location":"模板位置","FS-System-Cache_Principle":"缓存原则","M-Cell":"单元格","WF-Reportlet_Field":"来自网络报表指定区域","FR-Engine_Schedule-Monthly":"每月","Preference-Is_Drag_Permited":"支持拖拽","FR-Engine_Hana-TableData":"Hana数据集","FR-Engine-Err-The_value_must_be_number":"值必须是一个数字","FR-Engine_Schedule-Template_Parameter":"模板参数","FR-Basic_Failed":"失败","ChartDrawSet":"绘图设置","ChartF-Legend":"图例","Utils-Column_Width":"列宽","server_disconnected":"连接已断开","Shared_To_Me":"分享给我的","FS-Admin-Passwords_Not_Match":"您两次输入的新密码不一致，请确认","FR-Engine_Specified_Pages_Not_Exist":"页面没找到","FR-Designer-FRFont_Size":"大小","Enter_Analysis_Name":"请输入分析名称！","Frozen":"冻结","FR-Hyperlink_Dialog":"对话框","FR-App-Export_png":"PNG格式","Refresh_Successfully":"刷新成功","ContentDisplay":"显示方式","M_Edit-Unmerge_Cell":"取消合并单元格","Rename_Column":"重命名列","Help":"帮助","FR-Chart-Map_Zhengzhou":"郑州市","Plugin-ChartF_Range":"范围","FR-Base_RWA-Key":"主键","add_schedule_task":"添加定时任务","FS-Schedule-New_Task":"添加任务","Export":"输出","Utils-The-Form":"表单","FR-Engine_Task_List_Chosen":"已选任务列表","CellWrite-InsertRow_DEFAULT":"默认值","FR-Designer_Chart_Field_Name":"字段名","FormulaD-Math_&_Trig":"数学和三角函数","column_and_row":"行列","ParameterD-New_parameter_name":"新参数的名字","Short-Apr":"四","FS-Generic-Minute_Wrong":"执行时点的分钟填写错误","Type":"类型","Page-Setup-Scale-Units":"页面设置标尺单位","Plugin-Memory_Alarm_Queue_Wait":"排队等待","FS-Setting-Top_Navigation":"顶部导航栏","FR-Engine_Not_limited_IP":"不限并发","I-xyScatterStyle_LineMarker":"折线散点图","Style-Right_Indent":"右缩进","Send":"发送","The_file_name_already_exists_,_override_it_?":"该文件名已存在，要覆盖它吗？","Interactive-chart":"图表联动","FR-Designer-Widget-Style_Alpha":"不透明度","FS-Generic-Parameter_String":"字符串","Unfrozen":"解冻","FR-Designer_Language_Default":"默认","Hyperlink-Height_Of_New_Window":"新窗口高度","FR-Designer-Widget-Style_Border_Line":"边框粗细","FR-Designer_Click_this_button":"点击此按钮进行路径选择","Repeat-Block_Name":"此块名已经存在","FR-Chart-Stock_High":"盘高","FR-Designer_Phone":"电话","Sat":"六","Writer-ShortCuts_Setting":"填报快捷键设置","FR-Designer_Export":"输出","FR-Designer_Alignment-Style":"对齐方式","FS-Plugin-SysMonitor_User_Behavior":"用户行为","FS-System-Email_Port":"端口","Short-Aug":"八","FR-Designer_System_default":"系统将默认","FR-Designer_Simple_general":"简单通用查询","FR-Designer-All_MSBold":"微软雅黑","Utils-Need_to_select_a_datasource_file":"需要选择一个数据源文件","FS-CutomStyle_Toast_OK":"知道了","RWA-NotChange_Unmodified":"未修改不更新","Utils-PDF_Print[Client]":"PDF打印[客户端]","Schedule-Select_Path":"选择目录","Column Type":"","FS-Admin-Admin_Password":"管理员密码","SecondGraduationLineStyle":"次要刻度线类型","Syn-transfer":"转换","Standerd":"标准","Docking-Docked_Mode":"停靠模式","FS-Generic-Simple_Wed":"三","Session":"会话","FS-CustomStyle_Toast_Exist_alert":"样式已经存在","FS-Generic-Simple_Ge":"个","Inc_All_rights_Reserved":"保留所有权利。","ChartF_Stock_Close":"收盘","FR-Engine_Excel_Horizon":"横向导入Excel","GroupReport-Make_Up_Blank_Detail_Area":"补足空白的主体区域","FR-Designer_Forbid_Drag_into_Adapt_Pane":"该对象不允许拖入表单主体","RP_Task_Created_By_Me":"我创建的任务","M_Insert-Slope_Line":"插入斜线","Popup":"弹出","SAP-Transfer_type_relation_setting":"转换类型以及关系","FS-BI-Dezi_Report_Name":"模板名称","FR-mobile_html_analysis":"HTML5解析","Schedule-Handle_Type":"处理方式","FS-Mobile-Report_Cover_Upload_ToolTip":"提示：自定义报表封面图片建议尺寸为 240*168px","Space":"空格","Schedule-Save_To":"保存位置","FormulaD-Data_Fields":"数据项","Server_Name":"服务器名称","FR-App-All_Auto":"自动","FS-System-Connection_Description":"数据连接","CSS_warning":"  相对报表工程目录如WebReport,如WebReport\\css下有引用的css文件test.css，则相对路径为css/test.css","Cancel_Repeat_Attributes":"取消重复行列","WF-ID":"编号","The_initial_background_of_the_button":"按钮的初始背景","Null_Value_Show":"空值显示","FR-Engine-Data_Submit_Error":"数据提交出错","FS-System-Config_Restore_Complete":"还原完成，请重启","Plugin-ChartF_Each_Layer_Data_Special":"各层级分别指定","Function-New_Function_Name":"新函数名","Ser":"第","Set":"设置","FS-Setting-Login_Background":"设置登录背景图片","BackgroundTexture-Parchment":"羊皮纸","FR-Designer-Estate_Default_Text":"默认值","Max Alpha":"不透明","FRFont-Family":"名字","M-Close_Template":"关闭模板(C)","FR-Designer_MDX_Explain":"语法格式参考MDX语法。\n例如：\nWITH\nMEMBER [Measures].[Special Discount] AS\n[Measures].[Discount Amount] * 1.5\nSELECT\n[Measures].[Special Discount] on COLUMNS,\nNON EMPTY [Product].[Product].MEMBERS  ON Rows\nFROM [Adventure Works]\nWHERE [Product].[Category].[Bikes]\n注：COLUMNS、ROWS可以使用0、1代替，查询轴只支持返回两个轴。","RP_System_Message":"系统消息","FR-Engine_RP_Task_List":"任务列表","Schedule-Yearly":"每年","FR-Designer_SAP_datatype":"SAP数据类型","FS-Generic-Simple_De":"的","Ecp_Success":"加密成功","Two_Rows_Of_Two_Grid":"两行两列的格子","FS-Setting-Custom_Icon":"自定义图标","Parameter-Boolean":"布尔型","I-LineStyle_Line":"折线图","Printer-Are_you_sure_to_delete_this_alias":"确定删除该别名","FR-Designer_Background-Over":"鼠标浮动背景","FS-User-Simple_Department":"部门","ChartB-Caculates_the_summary_of_field":"计算汇总列","I-BarStyle_3D":"三维簇状柱形图","FR-Engine_Error-Code-PdfPrint":"错误代码\\:1121 PDF打印只支持IE内核浏览器,其他浏览器将导出PDF文件","FS-Setting-Homepage_URL":"主页URL","FS-Reg-Part_Success_TipB":"的应用工程名不符&#59请尽快重新申请","Large-pitch-based":"大间距","FS-Reg-Part_Success_TipA":"服务器授权文件绑定的应用工程名与服务器","Event_Type":"事件类型","DataColumn":"数据列","Plugin-ChartF_Delete":"删除","OriginalImage":"原图","Custom_FS_Roles":"自定义角色","Organization_User":"组织用户","FR-Chart_Gis-Map":"Gis地图","FR-Designer-StyleAlignment_Left":"靠左","SQL-View":"视图","HourWrong":"执行时点的小时填写错误","Page_ToolBar_Event":"页面工具栏和事件","Docking-Dock":"停靠","Double_Click_Edit_OR_Clear":"双击进行编辑或清除","FR-Chart-Map_Haerbin":"哈尔滨市","Min-Height":"最小高度","FR-Engine_Time":"分","FR-Engine-Condition_End_With":"结尾是","DecimalNumber_Out":"小数位过多","FS-Generic-Synchronize_Now":"立即同步","Schedule-Excute_Type":"生成类型","Chart_Not_Visible":"不可见","FR-Action_Copy":"复制","ExpandD-Select_Datasource":"选择数据源","ChartF-Units":"单位","Selected-Index":"初始选中项","Chart-Series_AllData":"所有系列数据","Default_View":"默认视图布局","FR-Chart-Style_Transparent":"透明","DBTableData_Not_Get_RowCount":"不能取得总行数","Schedule-Start_at":"首次执行","FR-Designer-Estate_Default_Null":"默认为空","FS-User-Duplicated_Username":"存在同名用户","Printer-Define_Printer_Group":"定义的打印机组","ReportGUI-Print_Background":"打印/导出报表背景","Form-CheckBox":"复选框","Plugin-ChartF_NewTreeMap":"矩形树图（新特性）","FR-Designer_Fit-In-Web-Tip":"Pc浏览器自适应规则","FS-Generic-Simple_Favorite":"收藏夹","Mobile_Terminal":"移动端","HF-Insert_Text":"插入文本","Executing_Report":"报表计算中","FR-Chart-Data_Summary":"汇总方式","FS-Plugin-SysMonitor_Duration":"耗时(ms)","Utils-The-PolyReport":"聚合报表","FS-Generic-Simple_Remove":"删除","December":"十二月","FR-Engine_NativePrint_Invalid_Para":"参数不足, 请从浏览器端点击打印!","get-uuid-failed":"请以root身份运行web服务器","Plugin-ChartF_NULL_Value_Color":"空值颜色","Allow_Blank":"允许为空","Plugin-ChartF_Save_Error":"保存失败","Basic_Config":"基本配置","JavaScript-Parameter_Refresh":"","FuzhouCity":"福州市","FR-Designer-BBSLogin_Forgot-Password":"忘记密码","FS-Generic-Simple_OK":"确定","M-Template":"模板","FR-Chart-Map_Rename":"重命名","FS-Module-User_Manager":"用户管理","FR-Designer_Always":"默认执行该操作","FS-Generic-Simple_No":"否","ChartF-Increment":"增量","ChartF-Chart_Shallow":"图表阴影","RP_Add_SimpleNode":"添加普通节点","BindColumn-Expansion_Direction":"扩展方向","NS_exception_readExcelError":"错误代码:1306 文件解析出错","FR-Chart-Axis_Choose":"坐标轴选择","Re-all-server-mac":"服务器所有mac地址","FS-Schedule-Simple_Execute_Time_Unit_Hour":"时","Form-Widget_Property_Table":"属性表","FR-Plugin-Function_Description":"插件功能描述","FR-Designer_Data_Type":"数据类型","ChartB-Group_Options":"分组选项","BindD-Should_select_a_datasource":"需要选择一个数据源","HefeiCity":"合肥市","According_Cell_Set_Size":"根据选中的单元格的大小动态设置渐变色的区域","Form-Hierarchy_Tree":"结构树","StyleAlignment-TextAndImage":"文本与图片","FR-Chart-Chart_Module":"图表模块","FS-Plugin-SysMonitor_Path":"物理路径","FR-Engine_Excel_start":"开始导入sheet:","Utils-submitAll":"批量提交","HF-Defined":"已定义","FS-Plugin-SysMonitor_Memory_Occupancy":"占用内存(kB)","ChartF-Transparency":"透明","FR-Desinger-Plugin_Updater_JarUpdate":"Jar包更新：","Datasource-The_name_of_datasource_cannot_be_null":"数据查询的名字不能为空","Previous_Node_Staff":"上节点人员","Options_Sources":"备选项来源","Form-Delimiter":"分隔符","FS-Frame-Close_All":"关闭全部","WF-Assigned_Role":"指定角色","FR-Designer_M-Server":"服务器","M_Report-Report_Footer":"报表页脚","Plugin-ChartF_Name":"名称","Son":"子","Plugin-ChartF_Circle":"圆形","ExpandD-Horizontal_Extendable":"横向可伸展","Cannot_Found_Result_File":"没有找到结果文件","FR-Designer_Using_Server_Report_View_Settings":"采用服务器设置","FR-Basic_Offline-Connect_Failed":"无法连接到服务器。请确认本机的网络连接状况和服务器的工作状态后重试。","FS-System-Simple_Sending":"发送中","FR-mobile_analysis_annotation":"注释: 可以通过该属性控制报表在APP中的解析方式，只支持分页预览，填报预览时属性无效.","Indent-Character":"字符","FR-Base-Time_Back_In_Time":"时光倒流","Plugin-ChartF_ValueAxis":"数值坐标轴","Template":"模版","HF-The_Page_Number":"页码","FR-Engine_RP_Task_Status":"任务状态","FR-Engine__Column":"列","select_same_data_to_ merge":"请选择包含相同字段的数据集进行合并","Event-nodeadd":"节点生成","M_Edit-Send_Backward":"下移一层(B)","RP_Unlimited":"不限","Tree-Height":"高度","FR-Designer_Auto-Build":"自动构建","Come_True":"实现","ChartF-Pie":"饼图","chartDesignerModule":"设计器图表模块","FR-Engine_Process_RP_To_Report":"待上报","ChartB-of":"of","DataFunction_Percent":"占比","ParameterD-Show_Window":"显示窗口","UploadFileTip":"提示：上传图片尺寸请参照移动设备分辨率","FS-User-Edit_User":"编辑用户","FS-System-Unlock_Gzip":"Gzip压缩","FR-Engine_Prepare_Export":"开始导出，请稍候","Re-Multi-privilege":"多级权限配置","Choose_DS-Server_TableData":"选择服务器数据集","SessionID":"sessionID是当前访问模板的会话标识参数。","Datasource-Original_Charset":"原始编码","Default-Browser":"默认浏览器","Chart-Condition_Attributes":"条件属性","Collect-User_Information_DES":"激活码只是用来收集使用者信息的，只要点击上面的\"获取激活码\"按钮，就会弹出一个新的浏览器窗体，登录到产品官方网站获得这个激活码，整个过程只需要3分钟，只需要操作一次，而且完全免费。","FS-System-ServletMapping_name":"Servlet路径名","Privilege-No_Privilege":"没有权限查看此页面","Utils_UnDelete_Column":"撤销删除列","start_immidiately":"立刻开始","Clear":"清除","Env-Remote_Server":"远程服务器","Custom_FS_Users":"自定义用户","RESTART":"重启","ChartF-Start_From_Zero":"零起点","X-Coordinate":"横坐标","Finish":"完成","RP_Everyday":"每日","Combine Other to Other":"合并剩余项为\"其它\"","Simplified_Chinese_Language":"简体中文","ConditionB-ends_with":"结尾是","FR-Engine_Select_the_repeated_row_and_column":"选择需要重复的行列","FS-Report-Input_Cpt_Path":"请选择报表路径","FS-Generic-Export_And_Output":"导出","M-Form_Preview":"表单预览","FR-Engine_File-Editor":"文件控件","Cell_Group":"单元格组","ECP_input_pwd":"请输入密码:","FR-Designer_XMLA_Password":"密码","WF-Router_Task_Node":"路由任务节点","Set-Parent-Directory":"点击相应图标设置各浏览器所在的文件夹","M_Edit-Merge_Cell":"合并单元格","FR-Chart-State_Map":"国家地图","Event-unloadcheck":"未提交离开","Vertical":"垂直","Privilege-The_Url_Must_Be_Specified":"必须指定URL","Owner":"主","NS_browser_lang":"错误代码:1119 未找到当前浏览器语言对应的国际化文件,将以中文作为默认语言","Plugin-ChartF_SameArcPie_Title":"等弧玫瑰图","FS-Monitor-Error_Time":"发生错误的时间","CLUSTER_REDIRECT":"集群重定向参数","FS-Plugin-SysMonitor_Avg_Memory":"平均内存(kB)","EX-Reportlets_Count_Overflow":"reportlets下模板的数目超出注册数","Print":"打印","FR-Designer_Parameters_name":"参数名称","FR-Chart-Gantt_Chart":"甘特图","LIC-Support_Source_Relation":"多数据源关联","INFO-Reset_Webapp":"重置应用服务器","HF-Right_Section":"右区域","FR-Engine_SetPrinterOffset":"打印机偏移","Grouping_Report":"分组报表","FR-Designer-FRFont_Family":"名字","fs_process_delete_tip":"删除流程的操作不可逆，您确定要删除此流程吗？","OverLap":"重叠","Sun":"日","M_Server-Scheduled_Task_Manager(T)":"定时任务管理器(T)","Plugin-ChartF_TreeMapChart":"矩形树图","ReportServerP-Email_Receiver":"邮件接收人","FR-Designer_COMMUNITY_VIDEO":"入门视频","ChartF-Cross":"交叉","RWA-Smart_Add_Cell_Group":"智能添加单元格组","Surport_String_To_Formula":"支持字符串编辑为公式","Utils-Current_Value":"当前值","FR-Designer_Chart-PreStyle":"图表预定义配色","Plugin-ChartF_NormalLine":"普通","SingleName":"名","Default_Parameter_Attribute_Setting":"默认参数页面属性设置","Utils-Report_Header":"报表眉","Logout":"退出","Chart_Alert_Right":"居右","Schedule-Save_As":"另存为","Plugin-ChartF_SlotBackground":"刻度槽","FR-Designer-Plugin_Read_Plugin_List_Error":"去读插件列表时发生错误","Font Style Elements":"字体样式元素","FR-Chart-Type_Stock":"股价图","FR-Designer_Show_Icon":"显示按钮图标","Chart-Use_LatLng":"经纬度","Event-change":"值改变","WF-Transition":"迁移","FS-Reg-App_Name":"应用工程名","Hebei":"河北省","ReportServerP-From_Email_Address":"发件人地址","BindD-Bind_Data":"绑定数据","Event":"事件","Crimson":"深红","FR-Engine_Page_Total":"共","FS-Privilege-Need_Input_Url_Key":"请输入签名密钥地址","ReportServerP-Choose_Printer":"选择打印机","FS-Frame-Saved_successfully":"保存成功","Verify-Verify":"数据校验","CustomLoginPage":"自定义登录网页","FR-Chart-Area_Name":"区域名","FS-Generic-HJS_Send_Successfully":"发送成功","Utils-Delete_Record":"删除记录","FR-Designer_Present":"形态","Cannot_Found_Template_File":"没有找到模板文件","Utils-Delete_Column":"删除列","Use_Default_ToolBar":"使用默认工具栏","CellWrite-Show_As_Image":"用图片显示内容","Plugin-ChartF_ClockWise":"顺时针","You_are_using_unregisted_function":"错误代码:1116 您使用了未注册的功能","Sche-Hour":"时","FR-Chart-Dialog_Cancle":"取消","TianjinInCity":"天津市区","FR-Designer_Fit_Ver":"竖屏","FS-Report-Add_Cpt":"添加模板","ColumnSpan":"列跨度","Schedule-File_Prefix":"文件前缀","Plugin-ChartF_Gauge_Ring_Title":"圆环仪表盘","FieldBinding":"绑定字段","Server_FlashInstallPath":"Flash安装文件路径","FS-Generic-Simple_Warning":"警告","FR-Designer_Choose-Data-Confusion-Tip":" 请选择需要混淆的字段后预览 ","Options":"选项","Widget-Date_Selector_Return_Type":"返回值类型","Dic-Data_Query":"数据查询","Time":"时间","FS-Report-Input_Folder_Name":"请输入文件夹名字","Parameters_use_default_formula":"使用默认的参数公式值","HF-Left_Section":"左区域","Form-EC_heightpercent":"手机显示最大高度","FR-Base_Format":"格式","Utils-New_name_cannot_be_null":"新名字不允许为空字符串","Plugin-ChartF_CustomMap":"组合地图","China":"中国","FR-Designer_Set_Submit_Event":"设置提交事件","I-xyScatterStyle_Line":"无数据点折线散点图","FR-Designer-Plugin_Shop_Need_Install":"您还没有插件商店的资源,是否下载?","Form-Newline":"换行符","FR-Designer_Unit_PT":"磅","FS-Schedule-Please_Select_Execute_Month":"请选择执行月","BarCodeD-Define_BarCode":"定义条形码","RWA-Free_SQL":"自由SQL","FR-Engine-Condition_Not_Begin_With":"开头不是","Every":"每","Event-success":"成功","Whether_Query_Result_When_Paging_Preview_Timer":"分页预览是否查询定时器结果","Start_Print":"开始打印","FR-App-All_Warning":"警告","FR-Basic_File_Not_Allow_To_Upload":"是禁止上传的文件类型","NS_export_excelFormula":"错误代码:1110 导出Exel不支持该公式","Style-Spacing":"间距","Datasource-Are_you_sure_to_delete_the_selected_hibernate_datasource":"你确定删除选中的Hibernate数据源吗","Add_Browser":"添加浏览器","Ecp_Start":"开始加密","HF-Odd_Page":"奇数页","Exporting":"正在导出","FS-System-Config_Backup_Frequency_Oneday":"1天","Xianggang":" 香港特别行政区","FS-Setting-BG_Upload_ToolTip":"提示：为使显示效果较佳，请选择尺寸不小于1024*768的图片，支持PNG、JPG格式","Data_Type":"数据格式","Capacity":"容量","Drag_the_selected_field":"字段列表(尝试拖拽)","Present-No_Present":"取消形态设置","CancelJSShow":"取消动态展示","FR-Chart-Gantt_Progress":"完成百分比","FS-Msg-View_All":"查看全部","MakeSureOfCloseSyncDataSet":"您确认要关闭数据集同步吗？您还可以通过\"开启数据集同步\"按钮来启用它。","FS-Monitor-Form_Action":"操作","FR-Engine_Parameter-Boolean":"布尔型","DataFunction-Average":"平均","LayerPageReport_PageEngine":"使用按页运算分段执行报表","ReportColumns-Begin_at_Column":"开始分栏列序号","FR-Designer_Type":"类型","FR-Base_Short_Jun":"六","FR-Base_Short_Jul":"七","FR-Designer_Help":"帮助","RP_Task_Type":"任务类型","ReportServerP-Browser_Background":"浏览器背景","DS-Report_DataList":"报表数据链","LIC-Support_Meter_Chart":"仪表盘","FS-Web-Plugin_Connect_Server_Error":"插件下载失败","FS-Reg-Version_Number":"版本号","Orthogonal Projection":"正交投影","Image-Extend":"拉伸","FS-Report-Add_Directory":"添加目录","Dictionary_Name_Exsited_Next_Choose_ReportDictionary":"服务器数据字典命名与报表数据字典命名有重复，下次打开默认选择同名报表数据字典。","Save_Or_Not":"是否保存","FR-Engine_Custom":"自定义","FR-Designer_PaperSize-Mobile":"手机","FS-Generic-Process_Manager":"流程管理","Plugin-ChartF_NewScatter_LargerData":"大数据散点图","FS-Plugin-SysMonitor_Query_Times":"查看次数","Cross_Report":"交叉报表","Plugin-ChartF_Longitude":"经度","FR-Chart-Mode_Custom":"自定义","FS-Generic-Simple_Preview":"预览","ES_Role_Instruction1":"请配置角色权限，编辑角色请登录数据决策系统","About_The_Column":"关于此列","ES_Role_Instruction2":"您没有使用服务器数据集身份验证，请添加角色并配置权限","FR-Designer_User_Defined_Event":"自定义事件","ES_Role_Instruction3":"您使用的是服务器数据集身份验证，请配置角色权限","FR-Base_October":"十月","Platform-DB_Connection_Create_Successful":"数据库连接创建成功","FR-Chart-Map_Shaanxi":"陕西","Plugin-Memory_Alarm_Trigger":"触发内存警告!","ChartB-Should_select_an_on_change_column":"需要至少选择一个变化列","Privilege-Select_Organization":"选择组织","TrueFormatIs":"正确格式为","FR-Utils_Submit":"提交","Write-Custom_Css_Style_Path":"自定义样式表相对路径","FS-Plugin-SysMonitor_Respond_Time_Shortest":"最短响应时间(ms)","FR-Engine_STKaiTi":"华文楷体","Static_Setting":"统计设置","FR-Basic_NS_mail_config":"错误代码:1204 邮件配置参数不正确","Cursor":"游标","Show_Demo_Connection":"显示默认demo连接","Privilege-The_Url_Can_Not_Be_Null":"认证地址不能为空","Classpath":"类路径","FR-Engine_Fit-Default":"默认","FS-Mobile-Authorized_Devices":"已授权设备","Widget-Settings":"控件设置","Add_Column":"添加列","FR-Engine_Printing":"正在打印","DS-Dictionary":"数据字典","FR-Engine_RP_NO_Privilege":"没有操作权限","FR-Engine_Error":"错误","FR-Import-Export_PDF":"PDF格式","Chart-Legend_Is_Visible":"图例可见","FR-Engine_RP_System_Message":"系统消息","RP_Overtime":"超时","FR-Chart-Map_Tianjing":"天津市","Read_Map_Use_Time":"读取地图耗时:","Plugin-ChartF_NewForceBubble":"力学气泡图","BindColumn-NoSort":"无排序","FS-Schedule-Simple_Execute_Time_Unit_Day":"执行日","FRFont-italic":"倾斜","Verify-Message":"错误信息","Plugin-ChartF_Inside":"内侧","Chart-Unit_Billion":"十亿","Load-Pull_Up":"向上拉动加载更多数据","Datasource-Are_you_sure_to_delete_the_selected_SAP_datasource":"你确定删除选中的SAP数据源吗","Chart_Negative_Bubble":"负气泡","FR-Plugin-Plugin_Is_Damaged":"插件损坏，请卸载后下载完整版重新安装.","Image-Adjust":"适应","RCodeErrorCorrect":"纠错","Column":"列","FR-Designer-PluginLicense_Check_Failed":"您的插件授权文件已经过期，请重新激活","FR-Chart-Map_Huhehaote":"呼和浩特市","February":"二月","Tree-Mutiple_Selection_Or_Not":"多选","FR-Designer_Layout-Padding":"内边距","Support-Current_Auto_Complete_Shortcut":"当前快捷键","Widget_Cascade":"级联","SetEndTime":"设定结束时间","FR-Designer_User-defined":"自定义","FR-Engine_Value":"值","PrintP-Print":"打印(T)","Grouping_Report_Wizard":"分组报表向导","Change":"改变","HJS-Send_Successfully":"发送成功","Chart_In_Pie":"饼图内","List-Need_Head":"需要列表头","FR-Engine_ReportServerP-First":"首页","Sorting":"排序中","Donot_Repeat_Data":"数据重复","StartFailed":"启动失败","FR-Designer_Custom":"自定义","FR-Chart-Field_Name":"字段名","Next_Month":"下一月","Delete":"删除","FR-Engine-NS_exception_readExcelError":"错误代码:1306 文件解析出错","RP_Timed_Write":"限时填报","Docking-Views_Menu":"视图菜单","Server":"服务器","Pointer-A-Tick-Order":"指针值及刻度值数量级","Corre_parameter":"对应参数","Repeat":"重复","FR-Designer_Custom-Angle":"自定义角度","FS-Plugin-SysMonitor_Operation_Export":"导出","PageSetup-Horizontally":"水平居中","FS-Generic-Simple_Week":"周","FR-Engine_RP_Task_Created_By_Me":"我创建的任务","Current_Preview_Rows":"当前预览行数","ChartF-Tick_Label_Property":"标签属性","__CUMULATE_PAGE_NUMBER__":"reportlets访问多模板时是否累积页码","Plugin-ChartF_Zoom_Layer":"缩放等级","FR-Designer_Finish-Modify-Share":"完成修改并分享","FR-Chart-Gantt_Step":"步骤","GIVE-NAME":"命名","FR-Engine_ReportServerP-Next":"下一页","M-SwitchWorkspace":"切换工作目录","Utils-Report_Runtime_Env":"报表工作目录","FR-Engine_Offline":"离线","Plugin-ChartF_Layer_Satellite":"卫星","FS-Mobile-Report_Cover_Reset":"重置封面","ExpandD-Extend":"向下延伸","FR-Engine_PageSetup-Page":"页面","FS-Generic-Simple_Pagination":"分页","Chart_Alpha_Int":"透明度","EditFailed":"编辑失败","FS-Frame-Button_Star":"收藏","DashBoard-AdhocSetting":"B/S设计器工具","FR-Desinger-Plugin_Updater_Checking_Version_Update":"正在检测版本更新","Utils-Last_Page":"最后一页","FS-Report-Simple_Device":"展示终端","At":"在","FR-Chart-Map_Taibei":"台北市","Schedule-Generate_Parameters":"生成参数","FR-Engine_Style_Name":"格式名","Registration-User_Name":"用户名","Thu":"四","ChartF-High":"盘高","FR-Designer_Search":"搜索","FS-Plugin-SysMonitor_Operation_View":"查看","FS-System-Visit_Template":"访问报表","LIC-Support_Online_Edit":"在线实时编辑器","RWA-Remove_Field":"移除字段","Designer_Language":"设计器语言","Chart_Legend_Area":"图例区","FS-User-User_Can_Not_Be_Null":"用户名不能为空","Allow_Decimals":"允许小数","Zhongxi":"中西区","FR-Basic-Email_Subject":"主题","FR-Designer-Plugin_Version_Is_Lower_Than_Current":"升级包的插件版本没有比当前的高","Plugin-Memory_Alarm_Queue_Percent":"内存占用达到此值是介入排队机制(%):","FS-Schedule-Skip_Execute":"不满足执行条件，跳过！","Select_Export_Log_Directory":"选择导出目录","FR-Chart-Map_Xian":"西安市","FR-Chart-Bar_Van":"条形图(新特性)","Chart-Interactive_Tab":"交互属性","Flash_Print":"Flash打印","Default_ParameterWindow_Attribute_Setting":"默认参数窗口属性设置","FR-Base_Short_Jan":"一","FR-Engine_Attach-Clean":"附件清理成功:","Utils-Print[Server]":"打印[服务]","RadioField":"单选框","DS-Server_TableData":"服务器数据集","FS-Privilege-Template_Role":"角色权限控制","FR-Chart-Type_Line":"折线图","De":"的","Liaoning":"辽宁省","M_Edit-Paste":"粘贴(P)","FS-Process-Param_Display_Name":"显示名字","FR-Engine_Mon":"一","FR-Chart-Map_Heilongjiang":"黑龙江","Marker":"标记","FR-Engine-Report-Write_Attributes_Msg":"没有设置填报属性","Plugin-ChartF_DisplayNegative":"展示负气泡","FS-Monitor-Suggestion_Of_Global_Style":"的全局样式，或者修改模板，取消使用该全局样式","HJS-Mail_to":"收件人","Ecp_Being":"正在加密\u2026\u2026","FS-Generic-Simple_Running":"运行中","The_Num":"第","UseTreeWillRemoveUser":"使用树数据集会清空已有用户数据","Set_Certification":"认证配置","Multi-Excel-Import":"批量Excel数据导入","Show_Text":"显示按钮名字","FS-Plugin-SysMonitor_Operation":"操作行为","Condition":"条件","ChartF-Category":"分类","I-AreaStyle_Stack":"面积图","Plugin-ChartF_DataType":"数据格式","ReportServerP-Last":"末页","CellWrite-Show_As_HTML":"用HTML显示内容","FS-Admin-Name_Can_Not_Be_Null":"姓名不能为空","CellWrite-Print_Content":"打印/导出单元格内容","FR-Designer_Widget_Scaling_Mode_Fit":"适应区域","FR-Designer_AbsoluteLayout":"绝对布局","Event-beforedelete":"删除行前","Ge":"个","FR-Engine_Word":"Word","Cannot find":"没有找到","Click-Get_Default_URL":"点击此按钮获得默认URL","FR-Chart-Chart_3D":"三维","ChartF_IsFilled":"填充","TopDownShade":"上下渐变","JSShow":"动态展示","Privilege-No_Such_Authority":"没有权限设计模板","FS-Generic-Shared_To_Me":"分享给我的","ID":"序号","English_Language":"英语","Chart_Gantt_Error_Check":"请检查您的数据!","Utils-Move_To":"移到","FR-Designer-Basic_More_Color":"更多颜色","FR-Designer_Verify-Message":"错误信息","Light_Orange":"浅橘黄","I-HBarStyle_3DPercentageStack":"三维百分比堆积条形图","FR-Designer_open-new-form-tip":"当前模板为711以下版本制作，无法兼容，不能打开。假如想打开修改此表单，请使用对应版本设计器打开。","FS-Generic-Simple_Tue":"二","FR-Designer_Loading":"正在加载","Chart-LatLngOrder":"经纬度顺序","Top":"上","DS-Relation_TableData":"关联数据集","ChartF-Interval_Label":"间隔标签","Utils-This_name_has_been_existed":"此名已经存在","Preference-Support_Default_Parent_Calculate":"默认父格计算","Plugin-ChartF_FillColor":"填充颜色","Task_Name_Exist":"任务名称已经存在","Plugin-ChartF_Layer_Midnight":"午夜","BindColumn-Specify_Rows":"指定行","FR-Designer_Allow_Blank":"允许为空","Should_select_an_Excel_file":"需要选择一个Excel文件来源","WEB-Pagination_Setting":"分页预览设置","Event-aftertoexcel":"Excel导出后","Max_Value":"最大值","Refresh":"刷新","Hyperlink-Web_link":"网页链接","I-RadarChartStyle_LineMarker":"数据点带线雷达图","FS-Generic-Simple_Username":"用户名","Chart-Unit_Million":"百万","FR-Designer_ChartF-Transparency":"透明","Chart-Series_Index":"系列序号","FRFont-Foreground":"颜色","Reverse-Scale-Value":"逆序刻度值","__ISDEBUG__":"是否调试","Property":"属性","RP_View_Task":"查看任务","Unit_Ten_Million":"千万","Widget-Custom_Widget_Config":"自定义控件","Function-Function_Class_Name":"函数类名","ChartF-Data-Field_Value_AS_Series":"字段值作为图例项(系列)名称","Chart-Category_Index":"分类序号","ISEMPTY":"为空","Image-Select_Picture":"选择图片","Adaptive_Full_Area":"充满展现区域","FS-User-Empty_Department":"部门名称不能为空","ReportServerP-Congratulation_Email_Test_Success":"恭喜您！您的邮件服务器已经配置成功","Reg_Max_Length":"最大长度","FR-Chart-Type_Comb":"组合图","Datasource-Datasource-name":"数据源名","Chart_Discard_Null_Cate":"分类为空时,不显示该分类","Datasource-Whole":"完全读取","Form-Edit_Text":"编辑文本","Plugin-Chart_Style":"风格","FR-Designer_Form-Object":"表单对象","FS-User-Add_Position_Failure":"职位添加失败，该职位名已被占用","ChartF-PIE":"饼形","NoLimit":"无限期","Hgap":"水平间隙","DoSelectPosition":"请选择职位","Output_Word":"Word输出","Widget-Array":"数组","Record-Number":"记录数","Preference-Pagination_Line_Color":"分页线颜色","Banner-And-Title":"主页和横幅","SQLWizard-edit_condition":"编辑条件","FR-Engine_Height":"高","Attach_File":"附件","NO":"否","Default_ParameterWindow_TextWidth":"参数文本宽度","FR-Engine_Fail_To_Select_A_Data_Field":"选取数据字段失败","feedback_tip":"请输入不超过400个字的问题描述","Data_range_configuration":"数据区间配置","Rename-Block":"重命名块","Formula_Dictionary_Display_Example":"实际值范围为 =range(100), 对实际值范围内的每个$$$的显示公式为 =0 - $$$，\n则最终的结果实际值为1, 2, ..., 100, 显示值为-1, -2, ... , -100。","Phone":"电话","Record":"记录","OK":"确定","FS-User-Same_Department":"添加部门失败，同一部门下不能有相同名称的部门","Plugin-ChartF_CustomDrillMap":"自定义地图","FS-Generic-Simple_Wrong":"出错了","Registration-Basic_Edition":"基本版","No":"否","FR-Basic-Email_Sending":"正在发送邮件","Tue":"二","Button-Hotkeys":"快捷键","fs_process_one_time_task_tip":"任务开始后只执行一次","ReportServerP-Browser":"使用此浏览器预览","FR-Engine_Task_Name":"任务名称","ThreeD_Column_Chart_Horizontal":"三维条形图(横向)","FR-Engine-Value_Not_Match":"值不匹配","FR-Designer_Values-Editor":"值编辑器","Application_name":"应用","Layer_Corresponding_Map":"钻取对应地图","FS-Schedule-Simple_Execute_Time_Unit_Minute":"分","FS-Generic-Server_Address":"服务器地址","Utils-Move_Up":"上移","Plugin-ChartF_MinDiameter":"最小直径","FS-Schedule-Output_Different_Content_By_Different_User":"根据用户选择不同的内容","ProcessName":"流程名称","Or":"或","Tree_Data_Field":"树数据字段","Privilege-Selected_None_Of_Any_Items":"没有选中任何一项","ExpandD-Father_Cell_Setting":"父格设置","FR-Designer-StyleAlignment_Tooltips_Center":"居中","Utils-Beyond_the_top_side_of_Border":"超出上边界","Chart-Interact":"相互","Parameter-Dealwith_Parameter_Result":"参数预处理","DashBoard-DashBoard":"显示欢迎界面","Plugin-ChartF_Level_Number":"层级数","FR-Engine_Bottom":"下","schedule_email_tip_first":"启用该选项需在","FR-Engine_PDFPrint":"PDF打印","BindColumn-Have_Left_Parent_Cell":"有左父格","Chart_Null_Value_Diaplay":"空值显示","no-alternatives":"没有选择项","FR-Chart-Data_Filter":"数据筛选","ChartF-SecondAxis":"次坐标轴","ChartF-Category_Axis":"分类轴","FS-Module-Look_And_Feel_Config":"外观配置","SyncFailed":"同步数据集失败，请检查您的数据集","FR-Designer_Query_Type":"查询方式","Utils-Append_Column":"添加行","Chart_Gantt_ErrorTip1":"甘特图必须要有:","FS-Report-Input_Link_URL":"请输入链接路径","FR-Chart-Map_Shijiazhuang":"石家庄市","FR-Designer_Web_Preview_Port_Setting":"端口设置","Privilege-The_Role_Config_Can_Not_Be_Null":"角色配置不能为空","FR-Base_September":"九月","RP_Pass_After_All_Operations":"该节点所有操作人员完成后流转","Plugin-ChartF_ZoomType":"缩放方向","FR-Engine_Short-Apr":"四","FR-Designer-Widget_Area_Scaling":"组件区域缩放","FS-Generic-Simple_Layout":"位置","LOG-Has_Been_Openned":"已经打开","Unload_Check_Msg":"有数据没有提交","Plugin-ChartF_Custom_Height":"自定义背景高度","FS-Reg-Function_List":"功能列表","Writer_ShortCuts_Setting":"填报快捷键设置","FR-Designer_Parameters":"参数","FR-Designer_COMMUNITY_UPDATE":"产品更新","FR-Chart-Map_Xianggang":"香港","FR-Designer_Current_Preview_Rows":"当前预览行数","__locale__":"浏览器国际化参数","Set_Row_Title_Start":"设置重复标题行","Title_Start_ColumnOrRow":"重复行列起始","Need_Min_Value":"需要最小值","File_Is_Being_Used":"文件正在使用","HF-Are_you_sure_to_delete_it":"你确实想删除这个元素吗","RP_Report_Deadline":"填报时限","FR-Designer_Covered_All":"全部覆盖","Privilege-The_Authentication_Can_Not_Be_Null":"认证不能为空","FR-Chart-Axis_labelWrap":"换行","Other":"其他","FR-Engine_Export-Excel-Simple":"原样导出","Label":"标签","FS-Schedule-Please_Enter":"请输入","FR-Designer_Allow_Negative":"允许负值","Delay":"延迟","FR-Designer_Quarter":"季度","FS-Schedule-Restart_Policy":"任务重启","BindD-Define_Datasource":"定义数据源","INFO-Time_Taken":"耗时","PageSetup-Top_to_bottom":"先列后行","FS-Schedule-Output_Attach_Type":"附件类型","To":"到","M_Edit-Clear_Contents":"内容(C)","FileNameForDownload":"下载文件名","FS-Frame-Button_Unstar":"取消","Alignment-Style":"对齐方式","ShanghaiInCity":"上海市区","Free":"免费","FS-Privilege-Simple_Setting":"权限配置","FS-User-Reset_Password_As":"将密码重置为123456","ReportD-Export_Hided_Column":"导出隐藏列","BackgroundTexture-Walnut":"胡桃","Up":"上","PageSetup-Orientation":"方向","FS-System-Config_Auto_Backup_Once":"自动备份一次","FR-Desinger-Plugin_Updater_Current_Version":"当前版本：","FS-Setting-Image_Only":"仅使用图片","ChartF-Size":"大小","Preview_ToolTips":"预览提示","System":"系统","ChartF-Descriptor":"描述","Chart-Property_Table":"图表属性表","Utils-The_private_table_has_been_existed":"此私有数据表已经存在","Tree-Select_Leaf_Only":"只返回叶子节点","Utils-Available_Columns":"可选列","Zhejiang":"浙江省","Chongqing":"重庆市","ClassName":"类名","M-Help":"帮助","SUMMARY_MODE":"汇总","Utils-Available_DataSets":"可用数据集","Set_Legend_Sytle":"设置图例格式","FR-Engine_Short-Aug":"八","Printer-Defined_Printer_Groups":"已定义的打印机组","fs_initDragBar_subpro_tip":"子流程任务:此任务可以选择其他流程作为当前流程的任务来处理。","Widget-Form_Widget_Config":"表单控件","Scope":"范围","Utils-Current_Sheet":"当前Sheet","Filter":"过滤","Print_copy":"打印份数","RP_Send_Time":"发送时间","FR-Designer_XMLA_Get_Catalog":"正在获取catalog","FS-System-Config_backup_Frequency_Sixmonths":"6月","FS-Report-Link_Path":"链接路径","Utils-User_Definition":"用户自定义","Err-The_number_is_less_than_the_minimum_value":"值小于允许输入的最小值","FR-Designer_X_Coordinate":"横坐标","BindColumn-Results_Filter":"结果集筛选","Usable_ParameterList":"可用参数列表","ChangChunCity":"长春市","Datasource-SQL":"由SQL创建","Chart_Current_Value":"当前值","Blow_set":"以下设置","FS_Table_Rename":"重命名","Display_Modes":"显示模式","FS-Generic-Simple_Previous":"上一步","D-HotHyperlink":"热链接","Plugin-ChartF_StepLine":"垂直","HF-Center_Section":"中间区域","Traditional_Chinese_Language":"繁体中文","FR-Chart-Radar_Van":"雷达图(新特性)","FR_FS-Task_Has_Been_Closed":"这个任务已经关闭","Widget-Load_By_Complete":"完全加载","FR-Designer-Plugin_Install_Successful":"该插件将在重新启动设计器及服务器时被启用，服务器需手动重启","PLEASE":"请","FR-Chart-Data_Use":"使用","Always":"默认执行该操作","MainGraduationUnit":"主要刻度单位","RP_Authority_Edit":"权限编辑","FR-Designer-Estate_Widget_Value":"控件值","Define_Filter":"定义字段过滤","FS-System-Time_To_Idle_Seconds":"最大空闲时间","FS-Reg-Version_Info":"版本信息","ThreeD_Percent_Stacked_Column_Chart":"三维百分比堆积条形图","FR-Chart-Map_Normal":"普通地图","FS-Setting-Background_Img":"背景图片","Offline-ReadMe":"打开html文件进行离线填报，数据将实时保存在本地。\r\n联网后可以将本地数据提交至服务器端。\r\n若要移动文件，请拷贝整个文件夹。\r\n注：手动清除浏览器缓存(Cookie)会导致数据丢失。","FR-Engine-NS_export_excelFormula":"错误代码:1110 导出Exel不支持该公式","FR-Engine_RP_Timed_Write":"限时填报","FS-System-Send_Test_Mail":"发送测试邮件","Brown_Orange":"棕黄","Cannot_Do_This_Command_When_You_Choose_One_More_Areas":"不能对多重选定区域使用此命令","Utils-Global_Parameters":"","Chart-Stock_Open":"开盘","FS-CustomStyle_Toast_Restart":"重启服务器后样式生效","Utils-Beyond_the_left_side_of_Border":"超出左边界","Event-afterverify":"校验后","FR-ConditionB_Operator":"操作符","NS_exception_noTemplate":"错误代码:1304 没有找到模板文件","FR-Engine_Frozen":"冻结","FR-Engine_Close":"关闭","FR-Designer_Max_Value":"最大值","Schedule-Template_File":"模板文件","Day":"天","FR-Designer-Plugin_Manager":"插件管理","FR-Engine_Style":"样式","FS-Generic-Simple_Day":"天","Form-Height_Des":"设计表单设计窗口的高度","Attributes":"属性","DashBoard-NewTemplate":"模板","Plugin-ChartF_Line":"线","FS-Generic-Simple_Expression":"表达式","FR-Engine-Verify_Verifying":"校验中","Performance-Monitor_Memory_Warning_Info":"服务器压力过大,触发保护机制,请重新操作","Hyperlink-Self_Window":"当前窗口","HighLightChart":"高亮","FS-Generic-Simple_Schema":"主题","timePoint":"时点","Widget-Data_URL":"数据URL","FR-Base_Widget_Error_Mark_Text":"找不到控件类型","NanningCity":"南宁市","FR-Engine-Verify-Verify_Success":"校验成功","Email_sentEmail":"发送邮件","QRCode_Config":"二维码配置","PageSetup-Overlap_Content":"重复内容","ConditionB-OR":"或(OR)","TrueExtraRunTimes":"正确的额外执行次数","FR-Engine_RP_Process_Created_By_Me":"我创建的流程","Widget-Comb_Widget_Report_Path":"组合控件模板路径","Edit-Row_Count":"行数","Layout_Container":"布局容器","FR-Engine-Import_Again":"重新导入","FS-Mobile-Add_Device_With_Whitespace":"添 加","FR-Engine-Tip_Tooltips":"提示","FS-Generic-Email_Can_Preview_Report_Content":"正文预览报表内容","Plugin-ChartF_Alpha":"不透明度","Message":"信息","FR-Designer-Estate_Radio-Group":"地产行业通用按钮组控件","Poly":"聚合报表","FR-Engine_RP_Execute_Month":"执行月","ChartF-Up":"增长","Sche-Monday":"星期一","RWA-Smart_Add_Cells":"智能添加单元格","Openning":"打开中","Layer_Report_Warnning_info":"<html>行式引擎适用于大数据量情形下。<br/>使用此引擎很多报表特性将不再支持，<br/>详细内容请查看文档相关章节。<\/html>","Report-Write_Attributes_Msg":"没有设置填报属性","FR-Chart-Map_Nanjing":"南京市","FS-Generic-Sign_In":"登录","Utils-Current_Cell":"当前格子","Until":"至","zeroMarginWarn":"由于打印机存在物理边距<br>报表的页边距设置过小可<br>能会出现内容打印不全.<br>&nbsp","HF-Insert_Time":"插入时间","Plugin-ChartF_Hinge":"枢纽","From":"从第","FR-Engine_Chart-Clean":"图表清理成功:","Connectionline":"连线模式","FR-Designer_Fit_Default":"默认","Summary":"汇总","FR-Base_Help":"帮助","TableData_Query":"数据查询","Idle_Connection_Size":"空闲连接数","FR-Chart-Custom_Map":"自定义地图","Gansu":"甘肃省","NOT_NULL_Des":"不能为空","Hubei":"湖北省","Parent-Directory":"设置浏览器父目录","FS_Start_Date":"起始日期","Parameters":"参数","Default_Data_Connect":"默认数据连接","MConfig-User_Defined_Designer":"配置个性模板设计器","Saving":"保存中","FR-Engine_RP_Everyday":"每日","BindColumn-Have_Father_Cell":"有父格","Form-Change_Widget_Name":"更改控件名","FRFont-Pick_A_Color":"选择颜色","Database_User":"数据库用户","ServerdatasourceSameWarning":"服务器数据集中有数据集名字和其他数据集名字一样，请修改！","SQLWizard-unpack_all_entities":"最大化所有实体","check_communication":"请检查网络通讯是否正常及服务器是否正常运行","FR-Please_Rename":"请重命名","Chart-White_Black":"白底黑字","FR-Chart-Bit_Map":"位图","Function-Function_Name_is_Null":"函数名不能为空","NO_Border_Line":"无框线","Form-NameWidget-Invalid":"预定义控件缺失","Plugin-ChartF_Show_Data_Sheet":"显示数据表","formDesignerModule":"设计器表单模块","FR-Chart-Add_Series_Setting":"添加系列设置","FS_Report_Type":"类型","FS-User-LDAP_Authentification":"LDAP认证","DashBoard-ChartRecord":"零客户端表单录入","Platform-Table_Create_Failure":"数据库表创建失败","ChartF-Close":"收盘","FS-System-Simple_Deal":"处理","FS-Generic-Hour_Wrong":"执行时点的小时填写错误","Plugin-ChartF_CustomFloatPosition":"自定义悬浮位置","FR-Designer_Form-Widget_Name":"控件名","RP_All_Tasks":"所有任务","Report_Query_Result_AS":"报表搜索结果如下","FR-Designer_Is_Share_DBTableData":"共享数据集","FR-Chart-Map_Changsha":"长沙市","Plugin-ChartF_Marker":"标记点","M_Window-Unfrozen_WindowGrid":"取消冻结窗格(F)","FR-Engine_RP_Overtime":"超时","FormulaD-Reserve_when_export-edit_result":"导出/编辑结果时,保留公式","Datasource-Public_Datasource_Manager":"公有数据源管理器","Father":"父","ServerM-Predefined_Styles":"预定义样式","ExpandD-Not_Expand":"不扩展","FR-Chart-TimeUnit_Day":"日","Port":"端口","has_saved":"以保存","FR-Engine_Minute":"分","Form-RadioButton":"单选按钮","FR-Engine-Condition_Less_Than":"小于","Call_Back_Function":"回调函数","Adaptive":"自适应","Event-afterflashprint":"Flash打印后","Chart-Series_SingleData":"单个系列数据","FR-Designer_Fit-In-App-Tip":"App内自适应规则","FS-Report-Folder_Already_Exist":"的文件夹已经存在！","FR-Engine_Short-Sep":"九","eg":"例如","ECP_re_input":"密码错误, 请重新输入","Delete_Button":"删除此按钮","HJS-Print_Failed":"打印失败","Chart-SetSecondGridStyle":"设置次要网格线格式","Widget-Parameter-Name":"您可以点击下拉按钮选择参数名作为控件名字","FS-Plugin-SysMonitor_View_Details":"查看明细","formModule":"表单模块","Reportlet-Parameter_Type":"参数传递方式","FS-Schedule-Task_Name":"任务名称","DS-Real_Name_<->_Display_Name":"实际名字 <-> 显示名字","FR-Designer_Name_has_Colon":"名称","FR-Designer-StyleAlignment_Tooltips_Left":"靠左","MultiFileUpload":"多文件上传","ECP_encode_failed":"加密失败, 请联系管理员检查密码文件是否损坏","FR-Export_SVG":"SVG格式","Need_Purchase_Info":"您需要一个注册码或者该报表服务器的使用人数超过了注册限制的数量","Show_Blank_Row":"补充空白行","Schedule-Duplicate_Task_Name":"任务名重复","FR-Engine_Rename":"重命名","Number":"数字","Plugin-Memory_Alarm_Msg_Foot1":"分钟前会话","FR-Designer_Format_explan":"格式说明","LayerPageReport_WN_CellPage":"按页运算引擎不支持单元格分页属性","FR-Designer-Widget_Scaling_Mode":"缩放逻辑","FR-Engine_ViewPreview":"数据分析","FR-Plugin-Designer_Trial":"试用:","FS-Reg-Simple_Deadline":"过期时间","Corresponding_Layer":"对应层级","Post":"职务","FR-Base_Sun":"日","ChartF-Meter_Angle":"角度","FR-Engine-NS_export_wordPageSize":"错误代码:1114 导出Word不支持多Sheet下的不同页面设置","Can_not_find_Data_Connection":"找不到数据连接","FS-Report-Edit_BI":"编辑BI","FR-Designer_Form-CheckBox":"复选框","FR-Designer_Cursor_to_previous_row":"光标移到上一行为：","ConditionB-is_greater_than_or_equal_to":"大于或等于","FS-Schedule-CPR_SUCCESS":"快照生成：成功","Form-Object":"表单对象:","FR-Engine_Role_Source":"角色来源","FS-Admin-My_Info":"我的信息","Sche-Second":"秒","triggered":"被触发","FR-Designer_Description":"描述","M_Format_A-Cell_Attributes":"其他属性","FS-Plugin-SysMonitor_User":"用户","Chart-Interactive-Tab":"交互属性","Auto_Adjust_Size":"自动调整","Chart-Plan_End":"计划结束","Plugin-ChartF_Width":"宽","File_Display_Name":"文件显示名","__FILENAME__":"报表导出的自定义文件名","PopChart":"悬浮窗图表","FR-Designer-StyleAlignment_Tooltips_Right":"靠右","Please_Input_The_Key":"请输入对应地图使用的key","FR-Engine_ConditionB-in":"包含于","Chart-Use_Local":"本地","Log_Level_WARNING":"警告级别,显示警告信息","FR-Engine_RP_Process_Type":"流程类型","Position":"位置","is":"为","FS-Generic-Simple_Cancel":"取消","Undo":"撤销","APP_LAUNCHING":"APP启动画面","Plugin-ChartF_StartAngle":"起始角度","FS-Frame-System_Menu":"系统菜单","Server-version-warging":"\"您当前打开的模板文件是由更高版本的设计器制作的，继续打开会有出错或者丢失原有模板属性的风险。  请确保您设计的模板的设计器版本低于部署的服务器版本。\"","Unregistered":"未注册","Chart-Area_Value":"区域值","FS-User-Password_Reseted":"密码已重置为123456","FR-Base_Error_Input_Value":"错误的输入值","ChartF-Units_And_Needle":"单位与指针","M_Format-Remove_Row":"删除行(R)","FR-Engine_ConditionB-Conditions":"依条件选择","M_Report-GroupReport_Attributes":"分组报表属性(G)","FS-Generic-Simple_Info":"信息","FS-Module-MobilePush_SureIGT":"确认使用个推？","FS-System-Resources_root_directory_name":"报表资源根目录名","sending":"正在发送...","HJS-All_Pages":"所有页","TaskEndWhenOneTime":"任务执行一次后即结束","Top_And_Thick_Bottom_Border_Line":"上框线和粗下框线","FS-Privilege-User_View":"用户权限查看","Use":"使用","FS-Schedule-Output_Attach_Class_Name":"自定义类名","Chart_OffSetPecent":"偏移量百分比(相对于X轴宽度的1/12)","Plugin-Memory_Alarm_Time_Dead":"超时时间","FR-Base_sure_remove_item":"你确实决定删除选中的项","FR-Engine_Receiver":"收件人","FR-Designer_KeyPoint":"关键节点","Email_Des":"可以使用分号来区分多个email地址","Chart_Light":"光效","Schedule-New_Task":"添加任务","FR-Designer_Undo":"撤销","FR-Base_Sche_Sunday":"星期日","Hyperlink-Use_CJK_to_encode_parameter":"使用CJK处理参数","FR-Designer_Fit_No":"不自适应","Unit":"单位","Re-version-in-lic":"lic中版本号","Read":"读取","ReportColumns-Begin_at_Row":"开始分栏行序号","Web_Preview_Message":"请将模板文件保存在当前运行环境目录下","Real":"实际","FS-Generic-Simple_Skip":"跳过","FR-Designer-BBSLogin_Login-Failure-Tip":"用户名或密码错误，请重新登陆","Utils-Append_Row":"添加行","MConfig-CompanyName":"公司名称","FR-Designer_Get-Cube":"正在获取cube","FR-Desinger-Plugin_Updater_Connect_VersionUpgradeServer_Failed":"无法连接版本升级服务器","Form-Double_quotes":"双引号","Dictionary_Name_Has_Exsited":"数据字典名已经存在","FR-Engine-Condition_In":"包含于","Plugin-ChartF_Map_Data":"地图数据","FR-Engine_Remove":"删除","Utils-Report_Name":"报表名","FR-Engine_Offline-Write":"离线填报","Load_Resource_File":"加载配置文件","Utils-Click_the_left_plus_button_to_add_item":"点击左边的加号按钮来添加项目","Only Use Before":"仅使用前","FR-Engine_RP_To_Check":"待审核","Form-Cut":"剪切","FR-Designer-Collect_Information_free":"免费","Chart_Alert_Tip":"提示文字","FR-Engine_Get_Lock":"加锁","FR-Engine_RP_Send_Offline_Report":"发送离线报表","PageSetup-Resolution(PPI-Pixel_Per_Inch)":"分辨率(PPI-每英寸像素数)","Widget-Widget_JS_Path":"JavaScript路径","Layer-Generated_Pages":"已生成的页数","DashBoard-Dateunfurl":"数据展示","Date_Time_Attention":"格式必须为MM/dd/yyyy HH:mm:ss","Chart_DiscardOtherCate":"不保留其他分类","FR-Base_Margin":"边距","Utils-has_been_existed":"已存在","FR-Chart-Meter_Field":"分段区域","This_ScheduleAction_Cannot_Be_Viewed":"这个定时动作无法查看","Chart-Chart-Title":"新建图表标题","Numbers":"数目","Perspective":"视窗","FS-Schedule-Start_Time":"开始时间","Service_Phone":"服务电话：","Plugin-ChartF-Custom":"自定义","HF-Undefined":"没有定义","FR-Engine_Excel_Submit_Rights_Assignment":"权限分配","Click_To_Shrink_Panel":"点击收缩面板","ExpressionSet":"表达式设定","Plugin-ChartF_Map_Init_Status":"初始状态","Local_offset":"本机偏移","Gradation":"层次","Event-beforeappend":"添加行前","PM-Privilege_Setting":"权限设置","Utils-Font_Not_Found":"未找到字体","Image-Layout":"布局","FS-Monitor-Visited_Report":"被访问报表","Selection-Filter":"条件筛选","Chart-DataFunction_Percent":"占比","FR-Base_Sat":"六","FR-Designer_max_undo_limit":"最大撤销次数","FS-Report_Management-Directory":"管理目录","HotHyperlink-No_Hot_Hyperlink":"没有热点链接","Plugin-ChartF_OpenLargeDataModel":"开启大数据优化","px":"像素","PageSetup-Start_Column":"起始列","FineReport_Embbeded_Report_Server":"FineReport的内置服务器","FR-Designer_Form-CheckBoxGroup":"复选框组","Actual_Value":"实际值","FR-Engine_RP_Sender":"发送人","FR-Designer_Utils-NewDemoEnv":"产品演示，将为您自动创建工作目录：","January":"一月","DBCP_INITIAL_SIZE":"初始化连接数","Guangdong":"广东省","FR-Plugin-Designer_Expired":"到期","Utils-Flash_Print[Client]":"Flash打印[客户端]","FR-Basic-File_Uping_File":"正在上传文件","ParameterD-Parameter_Interface":"参数界面","FR-Chart-TimeUnit_Hour":"小时","FR-Designer_Model":"模式","FR-Engine_Cell":"单元格","Indent-Pixel":"像素","Unit_Million":"百万","Server_Charset":"服务器编码","FR-Designer_font":"字体","FR-Widget_Mobile_Terminal":"移动端","Optionns":"备选项","Filed":"区域","LIC-Support_Parameter_Interface":"参数查询界面","ExpandD-Rules_to_Find_Default_Father_Cell":"默认父格寻找规则","ChartF-Background_Color":"背景色","Anhui":"安徽省","FS-Reg-Machine_Code":"机器码","FR-Designer-StyleAlignment_Tooltips_Top":"靠上","Embed_User":"内置用户","Datasource-The_name_of_database_cannot_be_null":"数据库的名字不能为空","ConditionB-begins_with":"开头是","Datasource-Rename_remedy_datasource":"重命名Remedy数据源","Is-Cache":"启用缓存","Loading":"正在加载","FR-Designer_LiteCondition_ConditionB-OR":"或(OR)","FR-Engine_Template-Name":"模板:","email":"邮箱","Plugin-ChartF_Sort":"排序","FR-Designer_Hyperlink-Form_link":"当前表单对象","Re-binding-mac":"lic中已绑定的mac地址","FR-Designer_COMMUNITY_HELP":"帮助文档","FR-Desinger-Plugin_Updater_Previous_Version":"到以前的版本？","StyleFormat-None":"常规","Platform_Roles_Has_Changed":"平台角色已修改，是否重新载入？","Preference-Support_Cell_Editor_Definition":"支持单元格编辑器","Show_Grid_Row":"显示格子行","Short-Oct":"十","Chart_Second_Plot_Pie":"第二绘图区包含所有小于该百分比的值","FS-Privilege-Already_Set":"已有对该部门以及职位的权限设置，请不要重复设置，本次操作不予保存","I-AreaStyle_Normal":"面积图","NS_LayerReport_present":"错误代码:1103 行式引擎不支持形态","Plugin-ChartF-FirstShowLegend":"优先显示图例区域","FS-Mobile-Need_User_Name_And_Mac_Address":"请输入用户名和MAC地址！","SingleMulti":"多","WuhanCity":"武汉市","writeModule":"填报预览模块","FS-Schedule-Output_Attach_Class_Deal":"自定义附件处理","Registration-Company_Name":"公司名称","CheckBoxField":"复选框","Set_data_fields":"设置数据字段","BorderLayout":"边界布局","FS-Admin-Simple_Account":"管理员账号","Formula_Dictionary_Display_Examples":" 实际值范围为 =range(100),对实际值范围\n 内的每个$$$的显示公式为 =0 - $$$，\n 则最终的结果实际值为1, 2, ..., 100, \n 显示值为-1, -2, ... , -100。","Use_Current_Configuration":"使用的是当前配置","ConditionB-not_null":"不为空","Layer_Report":"层式报表","FR-Designer_Cursor_to_previous_column":"光标移到上一列为：","FR-Designer_Column-Axis":"列轴","Event-writesuccess":"填报成功","ProcessStartedBySelf":"我开始的流程","Event-writefailure":"填报失败","EditRC-Entire_row":"整行(R)","FR-Designer_LiteCondition_ConditionB-AND":"与(AND)","Polyblock-Fixed_Height":"固定聚合块高度","FR-Chart-CopyJS_Message":"JS内容已复制到粘贴板中","StyleAlignment-Right":"靠右","FS-Monitor-Templet_Lifecycle":"模板生命周期","FR-Engine_Deselect_All":"不选","FR-Designer_Printer_Native_Button":"本地打印","FR-Designer_Utils-Available_Columns":"可选列","Currency_Line":"金额线","ChartF-Default_Style":"默认样式","Form-Same_Height_Des":"将选中的控件的高度设置为和第一个选中的控件一样的高度","SingleLayer":"单层","FR-Designer-Basic_Cancel":"取消","Export-Template(embedded_data)":"模板(内置数据)","FR-Designer_Form-RadioGroup":"单选按钮组","Ecp_Pwd_Long":"密码长度过长","Integer":"整数","DashBoard-ReportShowPlatform":"报表展示平台","FS-Schedule-Frequency_Label_Width":"50","StyleFormat-Date":"日期型","Importing":"导入中","System_Status":"系统状态","Multiline":"多行编辑","Import2":"导入","FR-Basic-File_Upload":"文件上传","Datasource-Add_DataConnection":"添加数据连接","Compart":"分隔","FR-Designer_Https_Enable":"启用https","ChartF-TheActualStart":"实际开始","Create_Cross_Report":"创建交叉报表","FR-Chart-Map_Kunming":"昆明市","Chart_Show_Data_Sheet":"显示数据表","FR-Designer_Show_Text":"显示按钮名字","ChartF-Interval_Range":"间隔范围","CacheValidateTime":"报表缓存有效时间","CellWrite-Hide_Column_If_Null":"当空值时隐藏当前列","ChartF-Range_Axis_Increment":"坐标轴增量","FR-Engine_Abnormal_Communication":"通信异常","LIC-Support_Advanced_Chart":"复杂统计图","FR-Designer_DisplayNothingBeforeQuery":"点击查询前不显示报表内容","ChartF-Label_Count":"标签数","No_Processor":"没有处理器","HF-Edit_Footer":"编辑页脚","SQLWizard-add_where_condition":"增加WHERE条件","DBCP_TIME_BETWEEN_EVICTIONRUNSMILLIS":"空闲连接回收器休眠时间","Show":"显示","FR-Engine-Excel_formula_error":"导出公式解析错误","FR-Chart-Axis_labelInterval":"间隔","FR-Chart-Map_LayerData":"底层数据","LOG-Is_Being_Openned":"正在打开","M-Open_Recent":"最近打开的","FR-Engine_Please_Enter":"请输入","Report_Engine":"报表引擎","Plugin-ChartF_NewMultiPie":"多层饼图（新特性）","FS-Generic-Simple_Upload":"上传","Chart-Manage_Chart_Type":"管理图表类型","Widget-Disabled":"不可用","Hyperlink-Width_Of_New_Window":"新窗口宽度","ChartF-Down":"减少","Table":"表","FR-Remote_File_is_Locked":"您所要打开的报表正在被其他人编辑，请稍候打开","FR-Engine_Block_unextended":"不可扩展块：","RP_Add_MultiNode":"添加联合填报节点","Custom":"自定义","ConditionB-in":"包含于","FS-Generic-QRCode_Config":"二维码配置","Switch-Form-Mode":"切换为表单设计模式","FR-Designer_Exchange_key":"点击互换快捷键","FS-Monitor-Templet_name":"名称","Model":"模式","FR-Chart-Map_Chengdu":"成都市","FR-Chart-Map_Shenyang":"沈阳市","VerticalBoxLayout":"垂直盒子布局","FR-App-Privilege_No":"没有权限","ConditionB-does_not_begin_with":"开头不是","Printer":"打印机","FR-Chart-ThreeD_Custom_Chart":"自定义三维组合图","Tick Interval":"刻度间隔","Datasource-Datasource":"数据源","Log_Declare_Head_Res_Read":"文件读取中","chartModule":"图表模块","Hyperlink-New_Window":"新窗口","PaperSize_Rotate":"旋转","Privilege-Your_Authentication_Can_Not_Access_The_Reportlet":"你的认证无权访问该目录","FS-Monitor-Visit_Start_Time":"访问开始时间","I-BarStyle_3DStack":"三维堆积柱形图","M_File-Export-Text":"文本文件(制表符分隔)","FR-Engine_PageSetup-Orientation":"方向","Character":"文字","Basic_Information":"基本信息","BindColumn-Control":"控制","FR-Chart-Use_Name":"名字","DBCP_MIN_IDLE":"最小空闲连接数","FS-Plugin-SysMonitor_UserName":"用户名称","FR-Base_Sche_Hour":"时","FR-Engine_SQLWizard-would_you_like_to_continue":"是否想继续","FR-Designer_Where_claus":"过滤条件","FS-CustomStyle_Module":"自定义样式","FR-Designer-Plugin_PluginMarket_Coding":"插件商店正在开发中，敬请期待","Meter_Single":"单指针仪表盘","Preference-Setting_Visible":"可见设置","FR-Engine_Seriously":"严重","FR-Designer-Plugin_Update_Successful":"插件升级成功，重启服务器以生效","FR-Engine_Database":"数据库","Schedule-Rename_Task":"重命名任务","StyleAlignment-Vertical_Text":"文字竖排","ChartDataLabelOutSide":"数据标签外","Sche-Saturday":"星期六","Export-Excel-PageToSheet":"分页分Sheet导出","FR-Engine_NS_print_flashPaperSetting":"错误代码:1118 Flash打印不支持将页面设置传递给打印机","This_Parameter_Is_Not_Exist":"此参数不存在","ReportColumns-Columns_horizontally":"行分栏","Chart-PreStyle":"图表预定义配色","Plugin-ChartF_NotLimitAreaSize":"不限制大小","Utils-Column_Serial_Number":"列序号","ReportD-Excel_Export":"模板导出属性","pageModule":"分页预览模块","Web_Preview_Port_Setting":"端口设置","StyleAlignment-Text_Rotation":"文本方向","Privilege":"权限","FR-Engine_ConditionB-AND":"与(AND)","FR-Designer-File_address":"文件地址","DBCP_VALIDATION_QUERY":"SQL验证查询","FR-Chart-Map_ShowWay":"地图展现方式","FR-Chart-Map_Column":"柱形图地图","Form-No_Selected_Will_Be":"未选中将把值作为","WLayout-Border-LayoutContainer":"拥有中部和北部两块的边界布局容器,其中北部块可以根据需要调整高度","SQLWizard-add_to_group_by":"添加到group by子句中","invalid user or password.":"用户名或密码错误","RP_Send_Offline_Report":"发送离线报表","FR-Engine_Mobile_BI":"移动决策平台","ReportletParameterTip":"当参数值为Category时对应图表中的分类名, 同理: Series, Value 分别对应系列名和系列值","Mail-Copy_Adress":"抄送地址","Percent_Stacked_Bar_Chart":"百分比堆积柱形图","Plugin-ChartF_Gauge_Ring":"百分比圆环仪表盘","FS-Reg-Concurrent_Ip":"同时访问模板IP个数","ManagerSystem":"管理系统","Plugin-ChartF_Mid_Tree_Map":"居中","FR-Designer-Basic_Copy_Build_NO":"双击构建版本号可复制到剪贴板","Query_Type":"查询方式:","FR-Base_Tue":"二","Error_With_Non_Template":"非模板触发错误","Related":"联动","Function-Function_Manager":"函数管理器","RP_Add_Task":"添加任务","Plugin-ChartF_Layer_Map_Type":"展示类型","Event_Name":"事件名","FrequencySet":"明细频率设置","Forbid_Drag_into_Para_Pane":"该对象不能拖入参数面板","File-Default_URL":"默认文件上传地址","InnerRadis":"内径大小","FR-Engine_Live-Session":"活动Session:","FR-Designer_Button-Icon":"按钮图标","I_Created":"我创建的","FR-Designer_Preview-Data-Confusion":"预览混淆后的数据","FR-Base_Sche_Wednesday":"星期三","FR-Designer_JavaScript":"JavaScript脚本","Plugin-ChartF_Html":"使用html解析文本内容","ImportMap":"导入地图","Axis_Title":"轴标题","Note_Normal-Formula":"普通分组只能处理简单的分组，公式分组可以在复杂情况下使用程序（公式，函数）进行分组。","FS-Generic-Server_Name":"服务器名称","Chart_Main_Grid":"主要网格线","Printing":"正在打印","SetLoginPage":"设置登录网页","I-HBarStyle_NormalStack":"堆积条形图","Plugin-ChartF_Gauge_Slot":"百分比刻度槽型仪表盘","ShijiazhuangCity":"石家庄市","FR-Engine_PageLayerReport":"分页行式引擎","D-Step":"步骤","INFO-Try_to_set_the_port_of_the_server_to":"设置服务器端口为","FS-Setting-Color_Scheme":"配色","FR-Designer_Forum":"论坛","Plugin-ChartF_Automatic":"自动","Start":"开始","Apply":"应用","Plugin-ChartF_XYAxis":"XY轴","FR-Designer-Plugin_Please_Update_Jar":"请更新Jar包至:","FS-Generic-Simple_November":"十一月","Datatype":"数据类型","StyleAlignment-between_-90_and_90":"在-90和90之间","CLUSTER_REDIRECT_SHEAR":"集群重定向参数","MostTimeRestart":"尝试重新启动最多次数","Chart_Trend":"趋势","Dialog":"对话框","Chart-DataFunction_None":"无","FR-Designer_Event_Set":"事件设置","FS-Schedule-Execute_Repeat_Simply":"简单重复执行","FR-Designer-StyleAlignment_Pane_Horizontal":"水平对齐","Plugin-ChartF_AntiClockWise":"逆时针","FS-System-Email_Encrypt_SSL":"SSL 加密","SQL-Table":"表","FR-Designer_Utils-Move_Down":"下移","Add_Position":"添加职位","FS-Generic-Simple_Run":"运行","Select-Color":"选择颜色","State":"省市","Report_Show_Location":"报表显示位置","External":"外部","Function-The_class_must_inherit":"该类必须继承","Utils-File_name":"文件名","M_Server-Server_Config_Manager":"服务器配置","Chart_LinePlot_Should_Select_One_In_Line_Or_Marker":"折线和标记需要至少选择显示一个","Saved_Connection_Count":"保存的连接数","FR-Engine_PrivilegeControl":"权限细粒度","Parameter-String":"字符串","Plugin-ChartF_MonitorModel":"监控模式","X_Axis":"X轴","ParameterD-Parameter_name_cannot_be_null":"参数的名字不可以为空","I-PieStyle_3D":"三维饼图","FS-System-FlashP_Need_Settings":"需要Flash打印机属性设置窗口","Utils-Template_File":"模板文件","FR-Designer_Mobile-Attr":"移动端属性","Min_Value":"最小值","Event-afterinit":"初始化后","FS-User-Add_User":"添加用户","FR-Base_SimSun_Not_Found":"无法找到宋体, 请选择当前系统下默认语言作为设计器字体.","Form-Url":"地址","Report":"报表","Admin":"管理员","FS-Schedule-Start_Date":"从","FS-User-Authorized_Users":"已授权用户","Plugin-ChartF_AxisVerticalZero":"0值","Guangxi":"广西壮族自治区","Report_Path":"报表路径","FS_BI":"决策平台","Aomen":"澳门特别行政区","Collect-Successfully":"收集成功","FR-Basic_About_No_Build":"不是安装版本","Values":"值","Values-Editor":"值编辑器","FR-Designer_Email":"邮件","RP_Alert_Setting":"预警设置","Enter_Login_Page_URL":"请输入登录页面url","FR-Chart-Map_Use_Field":"地图字段","SQLWizard-pack":"最小化","Enter_Task_Name":"请输入任务名称","FR-Designer_Output_Word":"Word输出","Form-Widget_Name":"控件名","FR-Designer_Allow-Blank":"允许为空","Mail-Send_Adress":"发送地址","PageSetup-Start_Row":"起始行","Privilege-Post_List":"职位列表","Utils-Column_Name":"列名","Chart-Layout_Position":"位置","Form-Split_Horizontal":"水平分割","CanNotBigger":"不能大于","FS-Report-RP_MyTask":"我的上报任务","FR-Chart-Map_Beijing":"北京市","Utils-Can't_Paste_to_Uneditable_Area":"不允许剪切到不可编辑的区域","Colors":"颜色","Chart_Curve":"光滑曲线","Build_Tree_Accord_Marked_Filed_Length":"依赖所选数据集的标记字段的长度构建树","I-HBarStyle_PercentageStack":"百分比堆积条形图","FR-Designer_COMMUNITY_NEED":"需求提交","Layer_Report_alert_info":"注意！您正在使用行式引擎，此引擎下一些报表特性将不再支持。","Finally":"最后","Hide":"隐藏","FS-User-Synchronized_DataSet":"用户同步数据集","CellWrite-Print_Border":"打印边框","Organization":"组织","ConditionB-Conditions":"依条件选择","Choose_columns":"选择列","FR-Designer-Output_Excel_Sheet":"Excel输出(分页分Sheet导出)","Plugin-ChartF_AxisProportion":"坐标轴区域最大占比","XML_XPath_Message":"点击左侧树节点选择","FS-Setting-Homepage_Exists":"的首页已存在","GridLayout":"格子布局","M_Insert-Serial_Number":"编号(S)","Datasource-Connection_successfully":"连接成功","FR-Base_Right":"右","FS-Module-Server_Setting":"系统管理","ReportColumns-Columns":"分栏","FR-Designer-Encoding_Type":"编码类型","FR-Base_Remove":"删除","FS-Monitor-Model_Process_Export":"导出近一个月数据","FR-Designer-Collect_Information_Successfully":"收集成功","FR-Designer-Plugin_Has_Been_Installed":"插件已安装，若想更新插件，请切换至插件更新","FS-Generic-Simple_February":"二月","FS-Generic-Create_QRCode":"生成二维码","Default":"默认","Plugin-ChartF_JiangSu":"江苏省","M_Edit-Cut":"剪切(T)","Dic-Only_Can_Rename_DataDictionary":"只能重命名数据字典","FS-Report-Edit_Cpt":"编辑模板","D-DataSeries":"数据序列","Email-Can_Preview_Report_Content":"正文预览报表内容","PageSetup-inches":"英寸","Schedule-Reportlet_Group":"网络报表组","DashBoard-Potence":"权限","fs_initDragBar_circle_tip":"结束任务:此任务触发时整个流程立刻结束,单击编辑属性。","Plugin-ChartF_AxisLineStyle":"轴线样式","FR_Chart-Data_Range_Configuration":"数据区间配置","FR-Desinger-Plugin_Updater_Not_Install_Version":"不是安装版本","Docking-Pinned_Mode":"固定模式","FR-Base_Top":"上","FS-Privilege-Department_And_Post":"部门职位","ConditionB-equals":"等于","M_Insert-TextBox":"文本框(B)","Datasource-Add_Directory_of_hibernate.cfg.xml_to_Classpath":"把hibernate.cfg.xml文件加到Classpath下","About-Version":"版本","Datasource-Text_datasource":"文本数据","FR-Engine_By-PageSize-False":"横向不分页","Selection-Background":"选中项背景色","Text_IsVertical":"竖排","ChartF-Alert-Line":"警戒线","Chart_Test":"测","FR-Designer_Reg_Min_Length":"最小长度","ExecuteOneTime":"执行一次","Event_Set":"事件设置","3DSimulation":"立体感","FS-Schedule-Output_Push_Message":"推送消息","Chart-Chart_Title":"新建图表标题","DashBoard-Adhoc":"即席报表","FR-Engine_NoLimit":"无限期","FR-Designer_SQL-Table":"表","FS-Process-colon":"：","M_Insert-Cell":"单元格元素","FR-Designer_Level_Setting":"级别设置","DBCP_MAX_IDLE":"最大空闲连接数","Field_Filtration":"字段过滤","Auto":"自动","FR-Engine_Closed":"已关闭","Sche-Month":"月份","ParameterD-DClick_Edit":"双击修改","FR-Engine_RP_Page_Write":"页面填报","The_file_is_already_slected.":"该文件已选择","FR-Chart-Dialog_OK":"确定","FR-Engine_WriteModule":"填报预览模块","Add_summary_info":"将汇总信息加入报表中","FR-Designer_Icon":"图标","ExecuteFrequency":"执行频率","High":"高","FR-Plugin-Designer_Left":"剩余","Dic-Choose_Database_And_Table":"选择数据库和表","LogarithmicValue":"对数刻度值","Chart-Link_Mail":"邮箱","Report_Is_Being_Openned":"正在打开报表","Web-The_selected_directory_must_be_named_WEB-INF":"","Image-Titled":"平铺","PrintFile":"打印生成的文件","FR-Designer_FormulaD-All":"全部函数","FS-Generic-Turn_Off":"关闭","Plugin-ChartF_CategoryAxis":"分类坐标轴","FormulaD-Invalid_Formula":"非法的公式","FR-Plugin_Preview":"预览效果","FR-Designer_LiteCondition_Formula_Condition":"公式条件","Parent_Marked_Field":"父标记字段","LIC-Support_Dynamic_Chart":"HTML5动态图表","Chart-Stock_High":"盘高","FR-Engine_Black-Font":"黑体","FR-Plugin_Fit":"自适应","Background-Over":"鼠标悬浮背景","JavaScrit-Asynch":"异步","Select_sort_order":"选择排列顺序","Reportlet":"网络报表","Chart-Data_Resource":"数据来源","FS-Privilege-Digital_Sign":"数字签名认证","Plugin-ChartF_XiZang":"西藏自治区","FS-Schedule-Trans_SUCCESS":"数据同步转换成功","FR-Engine_RP_Timing_Issue":"定时下发","FS-Generic-Face_Write":"填报","Disk_File":"磁盘文件","Running":"运行中","FR-Designer_Row":"行","FR-Chart-Version_Lasted":"最新版本","ChartF-CHORD":"弦形","InColumn":"列(L)","FS-Plugin-SysMonitor_Template_Freq":"模板热度","FR-Designer_Chart_Float_chart":"图表超链-悬浮窗图表","JavaScript_Set":"JS设置","FR-Base-Time_Second":"秒","Plugin-ChartF_TextRotation":"文本旋转","Datasource-Add_Database":"添加数据库","ReportServerP-PDF":"PDF","RestartByCondition":"如果任务中断按以下频率重新启动","FR-Plugin_Edit-Global":"编辑全局配置","FR-Designer-Plugin_Install":"安装","Chart-Use_Zoom":"图表缩放","plugin-ChartF_FloatColor":"悬浮颜色","FS-Setting-Navi_Upload_Tool_Tip":"提示：上传图标尺寸为42*42","System_default":"系统将默认","FR-Designer_Visible":"可见","FS_End_Date":"结束日期","HTML-Write_Insert_Data_Successfully":"数据插入成功","Window":"窗口","Plugin-ChartF_Gradual_Light":"渐浅","Gradient":"渐变","FS-CustomStyle_Toast_Error":"错误","Trillion":"兆","Connection":"连接","Chart_Log_Base":"底数","M_Edit-Send_to_Back":"置于底层(K)","Formula_Dictionary_Display":"对于上面实际值范围内的每个值($$$)，其显示值为","FR-Designer-StyleAlignment_Layout_Image_Extend":"拉伸","Data-Check":"数据监控","FR-Engine_Import_Failed":"导入失败","Reportlet-Schedule-Action":"定时生成","SingleOne":"单","ReportD-Report_Export_Attributes":"报表属性","Row-Fields":"行字段","I-PieStyle_Normal":"饼图","FR-Designer-Output_Excel_Page":"Excel输出(分页导出)","FR-Engine_ECP_encode_failed":"加密失败, 请联系管理员检查密码文件是否损坏","Cache-Disk_Memory_Page_Size":"磁盘缓存分页大小","T_Insert-Float":"插入悬浮元素","Sort-Original":"不排序","FR-Chart-Map_Hefei":"合肥市","Report_Template":"报表模板","M_Window-Title_Horizontal(H)":"水平平铺(H)","FS-Web-Plugin_Jar_Expired":"Jar包过旧","FS-Generic-Task_Name_Exist":"任务名称已经存在","Web-Please_input_parameter_vlaues":"","ChartF-Percentages_Format":"百分比格式","Form-Copy":"复制","FR-Designer_ChooseOneButton":"请选择一个控件后再添加","FR-Base_Thu":"四","FR-Designer_Share-Template":"分享模板","ChartF-Marker":"标记","FR-Engine_RP_Unfinished_Task_Name":"未处理任务","Select_Data_Set":"选择数据集","FS-Process-Package":"包","M-Save_As":"另存为","Is_Share_DBTableData":"共享数据集","StyleAlignment-Degrees":"度数","Event-afterimportexcel":"Excel导入后","FR-Designer_Work_After_Restart_Designer":"重启设计器后生效","Brown":"褐色","FS-System-Simple_Settings":"设置","Env-Configure_Workspace":"配置工作目录","FS-Report-Simple_Named":"名称为","Plugin-ChartF_Drill_Dir":"钻取目录","FR-Designer_Env-Des1":"请选择报表服务器所在的WEB-INF目录","FR-Engine_RP_After_Use":"后，使用","Chart_HorialTimeAxis":"水平(时间)轴","FR-Report_Invalid_Cell":"无效的单元格","Password":"密码","Page_Setup":"页面设置","Compile_Success":"编译成功","FR-Engine_ConditionB-does_not_end_with":"结尾不是","FS-Generic-Simple_Open":"打开","Continent":"洲际","Privilege-The_User_Service_Can_Not_Be_Null":"用户服务不能为空","Border-Style-Radius":"圆角边框","FR-Designer_Form-Password":"密码","FS-Schedule-Please_Select_Weekly_Execute_Time":"请选择周执行时间","I-PieStyle_3D_Seperate":"三维分离饼图","HF-Insert_Image":"插入图片","schedule_email_tip_second":"中填写","FR-Action_Remove":"删除","FR-Engine_Create_Time":"创建时间","GroupReport-Set_Page_Footer_To_Page_Bottom":"页表脚放在一页最下面","PageSetup-Title_Start_Column":"重复标题列","Preference-Setting_Grid":"网格设置","Plugin-ChartF_WidgetBoundary":"控件边界","FS-Schedule-Output_Mount_Virtual_Directory":"挂载虚拟目录","ChartF-Show_values":"显示数值","Form-Button":"按钮","RWA-Submit":"提交","FR-Designer_Para-Body":"参数界面","FR-Designer_Get-CubeGetting":"获取cube","Group_name":"组名","NS_LayerReport_MultiDs":"错误代码:1101 行式引擎不支持多数据源展示","FR-Designer-Plugin_Plugin":"插件","FR-Chart-Map_Changchun":"长春市","FR-Engine_NameWidget-Invalid":"预定义控件缺失","DashBoard-BeautyReport":"形象美观的图表","Chart_Project_ID":"","Web":"网络","Wed":"三","FS-Report-RP_InputName":"请输入上报名称","Chart_Interval_Back":"间隔背景","BindColumn-Choose_The_Display_Type_of_Column":"选择列显示类型","Plugin-ChartF_Location_With_AreaName":"区域名匹配","FS-System-Connection_List":"数据连接","FR-Engine_Excel_uc_list":"不定行导入单元格为:","FS-Report-RP_EditLabel":"编辑上报标签","Operating-Parameters":"不同操作的参数。","FS-Generic-Simple_Sat":"六","M_Insert-Sub_Report":"插入子报表","DataList-Set_Value_Of_DataList":"设置数据链的值","HohhotCity":"呼和浩特市","FR-Chart-Map_Guangzhou":"广州市","Report-Title":"报表标题","Title_End_ColumnOrRow":"重复行列结尾","FS-Schedule-Restart_Number_Of_Times_Must_Be_Number":"重启次数必须为数字","FR-Designer_EmailPane-BCC":"密送","FR-Designer_Save_As_Global_Style":"保存为全局格式","FS-System-Memory_Cache":"缓存","FR-Designer_RichTextEditor":"富文本编辑器","FR-Designer_Add":"增加","Exception_StackTrace":"错误异常堆栈信息","Parameter-Design":"参数设计","Plugin-Memory_Alarm_Update_Failure":"保存失败","Chart-Style_Name":"样式","FR-Engine-Should_Select_An_Excel_File":"需要选择一个Excel文件来源","FR-Base_Sche_Saturday":"星期六","FS-Report-Edit_Link":"编辑链接","Report-Body":"报表主体","Chart_Title_Is_Visible":"标题可见","Bubble-Width":"气泡宽度","SQLWizard-add_to_order_by":"添加到order by子句中","Plugin-ChartF_Filled_With_Image":"使用图片填充","FS-Generic-Simple_Failed":"失败","ChartF_Stock_Open":"开盘","Detail-Information":"详细信息","Background_Settings":"背景设置","Chart_Acc_Set":"精确设置","Event-statechange":"状态改变","Datasource-JNDI_DES":"注意:需要把包含INITIAL_CONTEXT_FACTORY类的.jar文件复制到软件安装目录下的/lib目录下.","FR-Designer-Plugin_Has_Been_Actived":"插件已被启用，重启设计器及服务器生效，服务器需手动重启","Schedule-Monthly":"每月","Formula":"公式","Pitch_Percentage":"间距百分比","Datasource-Procedurewaring":"系统不能自动获取该存储过程的参数，请手动添加!","FR-Engine_RP_Have_Come_To_You_For":"已经到你这里","FR-Designer_WaterMark":"水印","FS-Generic-DS_Server_TableData":"服务器数据集","FR-Engine-Err-The_Value_Cannot_Be_Negative":"不能为负数","FS-Generic-Register_Version":"注册版本","File-Auto_Upload":"自动上传","This_program_is_protected_by_international_copyright_laws":"本软件受中国版权法及国际版权公约保护","DashBoard-QucikAccidence":"快速入门(推荐) >>","BackgroundTexture-BrownMarble":"棕色大理石","Second_Axis":"次坐标轴","loadedTreeModel":"加载失败,请检查后重试","PrintP-Previous":"上一页(P)","ChartF-Stock-Volume-Axis":"成交量坐标轴","ExecuteSimpleRepeat":"简单重复执行","Short-Nov":"十一","FR-Engine_ReportServerP-Last":"末页","Chart-Change_Pie_Size":"将饼图大小缩放为","TopNavigation":"顶部导航栏","Default_ParameterWindow_EditorWidth":"参数编辑器宽度","FR-Designer-Widget-Style_Title_Format":"标题格式","Privilege-Password_Can_Not_Be_Null":"密码不能为空","Utils-Set_Default":"设置为默认","Invalid_Cell":"无效的单元格","Face-Outlook_Structure":"Outlook结构","PaperSize_ML":"加大","GisTableDataError":"Gis地图数据集数据错误","FR-Designer_Already_exist":"当前环境已存在:","BindColumn-Group(Merger":"","FR-Engine_Function_Undefined":"功能点未定义","FR-Chart-Mode_Auto":"自动","Only":"只","FS-User-No_Encryption":"不设置密码加密","FR-Designer_Server_Print":"服务器端打印","FS-Monitor-Global_Properties_detection":"全局属性检测","FR-Chart-Style_Present":"形态","ChartF-Low":"盘低","FR-Designer_Name":"名字","FR-Remote_Connect2Server_Again":"连接中断，是否重新连接服务器?","Cursor_to_next_column":"光标移到下一列","Shortcut_Set":"快捷键设置","Border-Color":"边框颜色","RP_Review":"审核","Schedule-Weekly":"每周","Map Show Type":"地图展现方式","Chart-Interactive_AxisTooltip":"坐标提示","FR-Designer-BBSLogin_Connection-Failure-Tip":"提示","Event-beforeimportexcel":"Excel导入前","RelatedChart":"图表联动","BindColumn-This_Condition_has_been_existed":"此条件已经存在","Format_explan":"格式说明","Left":"左","Size":"尺寸","M-Chart_Preview":"图表预览","FS-Admin-Old_Password":"旧密码","Plugin-ChartF_Connecting_WMP":"连接中","FR-Engine_Utils-Print[Client]":"打印[客户端]","Form-CheckBoxGroup":"复选框组","NoticeAndSave":"通知与存档","FR-Chart-Map_Google":"谷歌地图","Design":"设计","Single_Close":"关","Export-Excel":"Excel格式","ThreeD_Percent_Stacked_Bar_Chart":"三维百分比堆积柱形图","Template_Path":"模板路径","ServletMapping_msg":"实现修改需要相应修改\"(报表运行环境)://web.xml\"文件中的url-pattern属性","Add_TableData":"增加数据集","CellWrite-Preview_Border":"预览边框","Chart-Data_Import":"数据导入","HarbinCity":"哈尔滨市","RP_Sure_to_delete_process":"删除该流程，将同时删除绑定该流程的任务。是否删除该流程","Utils-Open_File":"打开文件","PrintP-Print_Preview":"打印预览","Bounds":"边界","FR-Engine_RP_Creator":"创建人","FR-Designer-Plugin_Illegal_Plugin_Zip_Cannot_Be_Install":"不可识别的插件，无法安装","FR-Engine_RP_Exist_Null_Node":"该节点中存在未填写项","Parameter-Float":"单精度型","M-Write_Preview":"填报预览","FS-Module-Platform_Manager":"平台管理","M-Window":"窗口(N)","Week":"周","FR-Designer_Forbid_Drag_into_Para_Pane":"该对象不能拖入参数面板","f#Created":"","Chart_Cell":"图表超链-联动单元格","ReportServerP-Show_Toolbar":"显示工具栏","FR-Engine_ConditionB-equals":"等于","FR-Designer-Plugin_Detecting_Update":"正在检测更新","X_offset":"X方向偏移","Datasource-JDBC_Datasource":"JDBC数据源","FR-Engine_Excel_uc_failed":"不定行匹配失败单元格:","FS-System-Config_Restore":"还原","Server-Start":"启动","ChartD-Chart_DefinitionStep3":"图表向导步骤三","ChartD-Chart_DefinitionStep2":"图表向导步骤二","Cursor_to_previous_column":"光标移到上一列为：","ChartD-Chart_DefinitionStep1":"图表向导步骤一","Simple_general":"简单通用查询","Plugin-ChartF_NewBubble":"气泡图（新特性）","Plane3D":"平面3D","Hyperlink-Show_Status":"显示状态栏","FR-Engine_Multi-Privilege":"多级权限","Left_Margin":"左边距","FR-Designer_Hyperlink":"超级链接","HotHyperlink-Bring_Parameter_Automatically":"自动生成参数","ConditionB-is_less_than_or_equal_to":"小于或等于","Chart_Time_Interval":"间隔时间","FR-Base-EX-IP_Address_Overflow":"IP地址数量超过限制","FS-Generic-Simple_User":"用户","BindColumn-The_Conditions_of_FatherCell":"父格条件","ConditionB-Operator":"操作符","Form-List":"列表","Printer-Are_you_sure_to_delete_the_selected_printer_group":"确定删除选中打印机组","Or-you":"或者您","User_Already_Logged":"用户已在别处登录","FR-Chart-Style_GradientHighlight":"渐变高光","Printer-Save_Current_Work":"是否保存现有工作","FR-Designer-StyleAlignment_Style_Alignment":"对齐","ReportWebAttr-General_Css":"一般自定义样式表","Custom_Button_Message":"自定义button具体使用方法请参考帮助文档","FR-Engine-Write_Stash":"暂存","FS-User-Depart_Post_Together":"部门和职位必须同时选择或者不选","FS-Generic-Simple_Print":"打印","I-AreaStyle_PercentStack3D":"三维百分比堆积面积图","Plugin-ChartF_TopValue":"顶边值","FR-Chart-Server_disconnected":"连接已断开","Encoding_Type":"编码类型","Server-version-tip":"您当前连接的服务器版本低于您使用的设计器版本号，继续连接，您编辑的一些属性可能无法有效保存。  假如需要连接请将您的设计器版本与服务器版本保持一致","FR-Engine_RP_Operator":"操作人员","Re-not-start-in-jar":"您使用的版本不是通过JAR包启动.","Utils-Can_not_create_connection":"无法建立数据连接","Utils-Design-Action_Cancel":"取消","Language":"语言","FS-Schedule-Execute_Condition_Custom_Class":"自定义类判断","FS-System-Max_Shared_Datasets":"共享数据集最大个数","DisplayUnit":"显示单位","INFO-Current_Role":"当前角色","FR-Designer_Save":"保存","BindColumn-Top_N":"前N个","M-Popup_ChartData":"图表数据","FR-Chart-Style_Fresh":"清新","Hyperlink-Des1":"利用超级链接可以指向另一张报表，在B\\S环境下，动态实现数据的钻取效果。","BackgroundTexture-Canvas":"画布","Password_Has_Been_Reset_To":"该用户的密码已经重置为","ChartF-TheActualEnd":"实际结束","FR-Designer_Save_Path":"保存路径","ReportServerP-PDF2-INFO":"仅在LINUX/UNIX下未安装中文字体时使用","FS-Generic-Simple_Sun":"日","Set_Role_Authorized":"角色权限配置","FR-Base_Sche_Minute":"分","FR-Designer_Gradation":"层次","Fri":"五","Multi_nam_formula":"  数据集名:                       数据集条件:","FS-Web-Error_Cannot_Delete_In_War_Or_Cluster":"War包或集成部署下不支持此功能.","FR-Designer-CommitTab_SureToDelete":"确认删除","Summary_Method":"汇总方式","FS-Monitor-Visitor_User":"访问用户","ExpandD-Left_Father_Cell":"左父格","Plugin-Memory_Alarm_Message":"警报提示","FR-Engine-Not_In_List":"不在列表中","FR-Engine_sure_to_delete":"确认删除","Event-aftertoword":"Word导出后","FS-Schedule-Restart_Time_Gap_Must_Be_Number":"重启时间间隔必须为数字","CellWrite-Page_Before_Row":"行前分页","Institution":"机构部门","Chart_Needle_Max_Range":"指针活动范围","Continuum":"相邻连续","Record In Series":"条系列记录","FS-Module-Look_And_Feel":"外观配置","FR-Server-Design_template_unopened":"无法打开模版","RP_Deliver":"分发","FS-Setting-Simple_Style":"平台样式","FR-Designer_WidgetDisplyPosition":"控件显示位置","Get_Lock":"加锁","FR-Designer_Return_set_name":"返回集","Taiwan":"台湾省","Mail-Contacts":"通讯录","Widget-NeedSubmit":"需要提交","Plugin-Memory_Alarm_Operation_For_High_Memory":"高内存处理","SpecifiedG-Leave_in_their_own_groups":"留在各自的组内","Advanced":"高级","Docking-Pin":"固定","FR-Designer_Input_The_Name_Of_Gloabel_Style":"输入所保存的全局格式名称","Right":"右","I-HBarStyle_3DStack":"三维堆积条形图","tick-and-value":"刻度和配色","Server-Always_Reload_Template":"总是重新读取模板","FS-Setting-Login_URL":"设置登录网页","Classpath-Add_Folder_to_Classpath":"添加文件夹到Classpath","Plugin-ChartF_AxisTop":"上方","Utils-Check_Data_Consistency":"数据一致性校验","Cannot_Set_Duplicate_Role_Name":"不能设置重复的角色名","Title_Name":"标题名","Chart-Link_Cell":"图表超链-联动单元格","FR-Engine_ReportServerP-PDF":"PDF","Superio":"上级","Chart-Black_White":"黑底白字","Chart_Step_Name":"步骤名","Plugin-ChartF_Tooltip":"数据点提示","trigger":"触发","CellWrite-Hide_Column_Row":"隐藏行列","FR-Designer_Refresh_Successfully":"刷新成功","FR-Chart-Type_Meter":"仪表盘","FS-Generic-Simple_August":"八月","FS-Admin-Remember_Username_Password":"请牢记您的用户名和密码","Utils-Group_Detail":"","FS_Task_End":"内截止","Plugin-ChartF_ShowAllSeries":"显示所有系列","ChartData-Tooltip":"数据点提示","FR-Engine_Page":"页面","Schedule-Please_select_a_directory":"请选择一个目录","Chart-Bubble_Value":"气泡值","FS-Monitor-Error_When_Read_Template":"读取模板时发生错误，模板文件有损坏，可能是XML文件开始/结束标签不匹配","FR-Designer_Root":"根节点","FR-Engine_RP_Execute_Time":"执行时间","DashBoard-OpenRecentReport":"打开最近的文件","Using_Global_Offset":"使用全局偏移设置","Hyperlink-Configuration_Of_New_Window":"新窗口配置信息","FR-Chart-Drill_Setting":"下层钻取设置","I_Want_To_Set_Single":"为该模板单独设置","ModifiedColumnName":"修改后列名","BindColumn-Increase":"增加","Verify_Error":"校验出错","FR-Engine_Short-May":"五","Build":"生成","can_not_include_underline":"不能包含\"_\"","Plugin-ChartF_AxisBottom":"下方","FS-Generic-HF_First_Page":"首页","ReportServerP-Import_Css":"引用Css","Xizang":"西藏自治区","Records":"条记录","Edit-Browser-List":"编辑浏览器列表","FR-Engine_Short-Mar":"三","InterfaceStyle":"风格","Layer-Build":"分层构建","Edit-Column_Count":"列数","ExpandD-Vertical_Extendable":"纵向可伸展","StyleAlignment-The_value_of_rotation_must_between_-90_and_90_degrees":"旋转值必须在负90度到90度","CellWrite-Page_After_Row":"行后分页","NS_LayerReport_adFormula":"错误代码:1106 行式引擎不支持层次坐标","Chart_PIE_TYPE":"半圆形","FR-Designer_time(s)":"次","Format-Error":"输入的值格式不正确","M_Help-Tutorial":"学习教程","FR-Engine_SetStartTime":"设定开始时间","Visibility":"可见性","FS-Privilege-Department_or_Roles":"可管理部门/角色","FS-System-Email_Encrypt_TLS":"TLS 加密","ChartF-Data-Resource":"数据来源","FR-Designer_SAP_column_name":"SAP列名","Chart-Stock_Low":"盘低","ChartF-No_Style":"没有样式","FR-Designer-StyleAlignment_Layout_Image_Adjust":"适应","FR-Designer_Fit_Hor":"横屏","Record In Category":"条分类记录","FR-Engine_Tooltips":"提示","FR-Chart-Map_Lanzhou":"兰州市","Utils-Report_Footer":"报表脚","Plugin-ChartF_Level_Name":"层级名","FR-Designer_EmailPane-warnings":"您尚未配置发件邮箱，请登录平台进行配置或者联系管理员","LayerPageReport_WN_RepeatCR":"按页运算引擎暂只支持重复标题行列","Plugin-Memory_Memory_Release":"释放内存","FR-Designer-Plugin_Shop_Installed":"插件商店安装完毕,是否立刻启动?","FR-Base-Time_Milliseconds":"毫秒","Chart_AxisArrow_IsVisible":"显示坐标轴箭头","M_Edit-DeleteRow":"删除光标所在行","FS-Setting-Logo_Upload_ToolTip":"提示：请上传 Logo 图片","ReportServer-Frozen_Column":"冻结列","Chart-Layout_And_Style":"布局及风格","M_Insert-BindValue":"绑定数值(B)","FR-Designer_PreStyle":"预定义样式","FS-Report-Edit_File":"编辑文件","FS-Schedule-Notification_Email":"邮件通知","FR-Basic_Clear":"清除","ChartF-Series":"系列","FS-Report-Devices_Tablet":"平板","Next_Year":"下一年","Chart-USe_NewLine":"换行符","Chart_Out_Pie":"饼图外","FR-Chart-Text_Rotation":"旋转","select_data_set":"请选择需要合并的数据集","Widget-Widget_Css_Path":"CSS样式表路径","SQLWizard-join":"联合","Staff":"人员","FR-Designer_Show_in_Containing_Folder":"打开所在文件夹","FR-Engine-Tab_Layout_Height":"高度","FR-Chart-Type_Stacked":"堆积","ConditionB-is_not_empty":"不为空","Parameter-Current":"当前数值","BorderLayout-Constraints":"位置","Unknown":"未知","RP_Email":"邮件提醒","FR-Designer_M-Repeat-Freeze":"重复与冻结设置","RWA-Help":"设置未修改不更新后，填报预览报表，记录所在单元格没有被编辑修改，则此记录不会进行更新；\n在大数据量记录查询并回填情况下，启用该设置，可以提高填报提交性能。","ChartF-Series_Index":"样式序列","All_Border_Line":"所有框线","Chart_Plan":"计划","FS-Admin-Account_Setting":"账号设置","Chart-IsRoundBorder":"圆角边框","Chart_Field_Name":"字段名","Background":"背景","FR-Engine_Title":"标题","FS-Generic-Attenchments_By_Receiver":"根据收件人不同生成不同附件","FS-System-Email_Send_Error":"请检查邮件服务器配置，确认SMTP邮件服务器以及用户名密码和收件人地址填写正确，并确保网络畅通。","FS-Schedule-Reporting_Action":"定时填报","FR-Chart-Map_ImagePoint":"图片标记","Short-May":"五","FR-Plugin_Dependence-Not-Found":"依赖的插件未找到","FR-Engine_PagePreview":"分页预览","Short-Mar":"三","Plugin-ChartF_ToolBar":"工具栏","FR-Designer_Blow_set":"以下设置","newNode":"新增节点","del_schedule_task":"删除定时任务","Not_In_List":"值不在下拉列表内","FR-Engine_Data-upload":"数据上报","PageSetup-Page_Order":"打印顺序","CellWrite-InsertRow_Policy":"插入行策略","SingleNew":"新","RP_Add_Note":"添加备注","Chart-Change_Bar_SIze":"将柱形图大小缩放为","FR-Engine_No_Priviledege":"没有权限","CellWrite-Support_Smart_Delete":"支持智能删除行","M-Insert":"插入","FS-Generic-Simple_Receiver":"收件人","FS-Reg-Support_Or_Not":"是否支持","Plugin-ChartF_InnerPaneBackground":"内底盘背景","FR-Engine_New":"新建","FR-Designer-Plugin_Will_Be_Delete":"插件将被删除，需重启设计器及服务器，服务器需手动重启","FR-Designer_Edit_String_To_Formula":"是否将字符串编辑为公式","Host_Name":"主机名","Parameter-Design_DES":"没有参数界面,是否需要使用默认的","Report-Write_Attributes":"报表填报属性","After":"结束","Plugin-ChartF_PercentStacked":"百分比堆积","Out_Thick_Border_Line":"粗匣框线","Applet_Print":"Applet打印","FR-Designer_Currency_Line":"金额线","FS-Generic-Simple_Management":"管理","FS-Generic-Mobile_Pad":"平板","Need_Max_Value":"需要最大值","FS-Generic-Simple_Moment":"时刻","Support_QQ":"技术QQ","FS-System-Report_Visit_Detail":"报表访问明细","FR-Designer_Feature_Name":"功能名称：","Datasource-Other_Attributes":"其他属性","Chart-Use_Items":"项目","INFO-End_Reading_XML":"结束XML读取","FS-Generic-Simple_Thu":"四","Plugin-ChartF_Legend_Gradual":"渐变色","After_Changed_Some_Attributes_Are_Different":"转换后报表的某些属性会发生改变，是否继续","Report-Design-Ruler-Units":"报表设计标尺单位","Poly-Block_Attr":"陈瑜","FR-Engine_NS_register_sense":"错误代码:1205 加密狗读取失败","Save_Definition":"保存定义","FR-Designer-BBSLogin_Password":"密码","TaskName":"任务名称","FR-Engine_Please_Select_Report_Path":"请选择报表路径","FS-Report-Create_Home_Page_Dialog_Label_width":"58","Border":"边框","Implement-Description":"没有实现接口SubmitJob","schedule_email_notice_tip_first":"邮件属性配置可在","RP_AllProcesses":"所有流程","Import_Failed":"导入失败","FR-Engine-Import_Failed":"导入失败","FS-Schedule-Output_File_Name":"文件名称","SpecifiedG-Force_Group":"强制分组","Plugin-ChartF-Tooltip":"提示","WaterMark":"水印","FR-Plugin-Update_Log":"更新日志","Plugin-ChartF_Layer_Custom":"自定义tileLayer","FR-Designer_Foreground":"前景","ExpandD-Sort_After_Expand":"扩展后","Schedule-Index":"编号","EX-Can_not_create_WorkBook_from_Reportlets":"无法从网络报表集生成工作簿","FR-Plugin_Use-Global":"使用全局配置","FR-Designer_chart-PreStyle":"图表预定义配色","Privilege-Select_Organizations":"选择组织","Docking-Floating_Mode":"浮动模式","feedback_info":"欢迎您提出宝贵的意见和建议，请将信息填写得尽量详细，我们会尽快联系您","HJS-Print_Successfully":"打印成功","FS-Generic-Page_Total":"共","RP_Remove_Process":"删除流程","ExcelImport_Write_Match_Error_Info":"匹配模板失败，请确认文件格式是否与模板一致！","FS-Plugin-SysMonitor_Query_Time":"访问时间","CellWrite-Print_Background":"打印/导出单元格背景","FR-Engine_Exporting":"正在导出","FR-Desinger-Plugin_Updater_Checking_Jar_Update":"正在检测Jar更新","Plugin-ChartF_Map_Point":"地图点","Max-Mem-Row-Count":"缓存至磁盘当记录数大于","ServerM-SapSync_Manager":"SAP数据同步","Chart_Data_Sheet":"数据表","Server_Address":"服务器地址","Plugin-ChartF_Custom_Width":"自定义背景宽度","Privilege-Invalid_User_Or_Password":"用户名或密码错误","FS-Privilege-Department_All":"所有部门","FR-Chart-Use_Percent":"百分比","Datasource-Add_TableData":"添加数据集","FR-Designer_Datasource-Parameter":"数据源参数","Three_Rows_Of_Three_Grid":"三行三列的格子","FR-Engine-Data_Type":"数据类型","GoogleMap":"谷歌地图","FS-Schedule-Export_Settings":"输出设置","FS-Schedule-Execute_Frequency":"执行频率","FS-Report-Parameter_Binding":"参数绑定","NS_export_excelCellBg":"错误代码:1112 导出Excel单元格背景只支持纯色","Date_Attention":"格式必须为MM/dd/yyyy","Get":"获取","List-Filter":"列表筛选","LayerPageReport_WN_Float":"按页运算引擎暂不支持悬浮元素","FR-Basic_Fail_Location":"失败","Chart-LatLng_Order":"经纬度顺序","Plugin-ChartF_NewBubble_LargerData":"大数据气泡图","FR-Designer_Fit-Set-Global":"设为全局配置","FS-Setting-Customize_Login":"自定义登录页","FR-Engine-Type_Date":"日期","FR-Engine_RP_Report":"上报","Description":"描述","FR-Base_TurnOn":"开启","Config_Servlet":"配置远程服务器","Re-mac-match":"Mac地址匹配","Xinjiang":"新疆维吾尔自治区","FR-Designer_Form-Frozen-Tip":"使用冻结时, 建议安装","Meter_More":"多指针仪表盘","FR-Designer-StyleAlignment_Pane_Style":"对齐方式","Plugin-ChartF_BottomValue":"底边值","FR-Engine_Month":"月","FR-Engine-Loading_Data":"正在加载数据","FR-Designer-CommitTab_Submit":"提交","FR-Chart_Map_Second_Title":"第二标题","Chart-Out_Pie":"饼图外","FS-Monitor-Visit_Template":"访问报表","FRFont-plain":"常规","FR-Designer_Widget-Visible":"可见","SQLWizard-add_condition":"增加条件","FR-Engine_ConditionB-is_greater_than_or_equal_to":"大于或等于","FR-Designer_This_Name_Has_Exsit":"这个名字已经存在","FS-Module-Privilege_Manager":"权限管理","PageSetup-Page":"页面","FR-Engine-Restart_Browser_After_Installation":"安装之后请重启浏览器","FailPass_ImproveYourVersion":"当前版本无此功能，请使用高级版本。","FR-Plugin_Fit-Font":"字体:","RP_Deal_With_It_As_Soon_As_Possible":"请尽快处理","FR.Chart-Series_Name":"系列","Log_Declare_Head_Web_Write":"页面写出中","Pagination":"分页","FR-Chart-Shape_Line":"折线","Chart_Polynomial":"多项式拟合","Chart-Step_Name":"步骤","FS-Mobile_User_Limit_Tip_Left":"当前许可文件仅支持","Not_Logged_In":"未登录","FR-Designer_Enter-New-FileName":"请输入新的文件名","FR-Base_Short_Oct":"十","Chart_Axis_AutoCount":"自动计算","FR-Designer-Widget-Style_Shadow":"阴影","Web_Apply":"WEB应用","FR-Engine-No_Element_Need_Append":"没有元素需要插入于","ConditionB-is_empty":"为空","FR-Base-Error_Statement_Is":"错误的描述为","FS-Monitor-Memory_Low":"服务器内存太小","Content":"内容","Chart_Stock_Error_Data_Order":"错误数据!","FR-Designer_Error":"错误","FR-Chart-World_Map":"世界地图","Chart-AddMainGrid":"添加主要网格线","FS-Reg-Bind_Info":"详细绑定信息","FR-Designer_XMLA_Not_NULL":"不能为空","Backup":"备份","FR-Engine_Week":"周","Chart-Series_Value":"值","Plugin-ChartF_EndAngle":"终结角度","paper":"纸张","HF-Number_of_Page":"总页数","FR-Engine_Show_in_Containing_Folder":"打开所在文件夹","TrueRunTimes":"正确的运行次数","CloseAuthConfirm":"是否取消分级权限控制","Plugin-ChartF_Common":"通用","RP_Execute_Day":"执行日","BackgroundTexture-BlueTissuePaper":"蓝色砂纸","ChartF-EndOfTheProject":"计划结束","FR-Engine_Left":"左","Plugin-ChartF_Legend_Form":"形态","FR-Designer_Min_Value":"最小值","BindColumn-Setting_Data":"设置数据","WF-Start_Node":"开始节点","FS-User-Reset_Password":"重置密码","FR-Engine_RP_To_Report":"待上报","Save_Path":"保存路径","M_Insert-Chart":"插入图表","ServerM-Workflow_Manager":"工作流管理","FR-Chart-Gannt_PlanEndTime":"计划结束时间","Parameters_name":"参数名称","Participants":"参与者","String":"字符串","Refresh_Database":"刷新数据库","FR-Designer_bold":"加粗","ChartF-FirstStartAngle":"第一扇区起始角度","FR-Engine_Parameter_Setting":"参数设置","WF-End_Node":"结束节点","ChartF_Stock_High":"盘高","FR-Engine_Task_List_To_Choose":"可选任务列表","Thick_Bottom_Border_Line":"粗底框线","Re-appname-in-lic":"lic中的AppName","Edit_Position":"编辑职位","Chart-Time_Interval":"时间间隔","M_Close_Current":"关闭","Privilege-Can_Not_Find_The_User_With_The_Name":"找不到用户名","Set_CallBefore_Function":"设置前置函数","Chart_Alert_Left":"居左","FR-Designer_Form-ComboCheckBox":"下拉复选框","FR-Designer-Series_Dismenber_As_Single":"连续分隔符视为单个处理","FR-Designer_Total_N_Grade":"总共:${N}层","FS-Msg-No_Message":"没有消息","Poly-Report_Block":"报表类型聚合块","Set_Column_Title_Start":"设置重复标题列","Registration-Please_Purchase":"报表系统尚未注册, 请购买","FS-Generic-Simple_Label":"标签","Submit_Style":"提交方式","Background-Click":"鼠标点击背景","FR-Chart-Gap_Category":"分类间隔","FR-Designer_Superscript":"上标","FR-Engine-JavaScript-Commit_to_Database":"提交入库","FR-Engine-PageSetup_Paper_Size":"纸张大小","FS-Generic-PDF_Print":"PDF打印","ReportColumns-Columns_to":"分栏成","FR-Engine_Image-Clean":"图片清理成功:","FR-Engine_RP_Sure_to_delete_process":"确认删除","Form-RadioGroup":"单选按钮组","FS-Generic-Simple_Formula":"公式","ParameterD-Custom_Parameter":"自定义参数","FS-Setting-Simple_Title":"平台标题","Shanxi":"山西省","FR-Engine_This_Name_Has_Exist":"该名称已存在","Re-first-mac":"服务器首个mac地址","FR-Engine_Data_Rollback_Failed":"数据回滚失败","schedule_email_notice_tip_third":"里进行配置与查看。","Path":"路径","max_undo_limit":"最大撤销次数","FS-Generic-WF_Name":"名称","Chart-Chart_Name":"图表","Choose-Key-point":"选择关键节点","Chart-Use_Auto":"自动","Unit_Billion":"十亿","FR-Designer_Chart_Float":"图表超链-联动悬浮元素","NotAllow":"不合法","fs_initDragBar_rect_tip":"表单任务:此任务可以设置报表或者表单用于展现所需数据,单击编辑属性，双击可以改名。","Interface":"接口","Email":"邮件","ChartF-Category_Axis_Range":"分类轴区域","FS-Schedule-Execute_By_Frequency":"明细频率设置","Plugin-ChartF_Radar_Y_Axis":"极径轴","FR-Engine_Memory-Info":"活动内存:","Polyblock-Fixed_Width":"固定聚合块宽度","ServerM-Widget_Manager":"控件管理","Form-Single_quote":"单引号","ALL_WORK":"所有事务","ParameterD-Rename_parameter":"重命名参数","ChartF-Data-Field_Name_AS_Series":"字段名作为图例项(系列)名称","EXPORT_PDF_EMBED":"导出PDF是否内嵌显示","Protected":"保护","Sche-Tuesday":"星期二","Printer-New_Printer_Group":"新建打印机组","FS_Table_Share":"分享","Layout_Constraints":"位置和大小","WLayout-Card-ToolTip":"卡片式布局，该布局容器中可以添加多个其它组件。","FS-Generic-Already_Pause":"已暂停","FR-Engine_Excel-Export":"导出Excel","CheckBox":"复选框","FR-Engine_ConditionB-Add_bracket":"添加括号","getDataFromCache":"从共享数据集缓存中获取数据","FR-Engine_Not_Imported":"尚未导入","FS-Module-Access_Info":"访问统计","Datasource-Datasoure_File":"数据源文件","FR-Designer_Utils-switch":"\n您当前未被保存文件将被保存在当前目录下，\n是否继续？","FS-System-Mail_Host(SMTP)":"邮件服务器(SMTP)","Polybolck":"聚合块","PageSetup-Page_Setup":"页面设置","Chart-Link_Form":"当前表单对象","FS-System-Config_Backup_Config":"配置备份","Plugin-Memory_Alarm_Mode_Production":"生产模式","FS-Report-Using_Templates":"使用模板","This_product_is_licensed_to":"本软件使用权属于","Plugin-ChartF_AlertLine":"警戒线","Locked":"（已锁定）","WF-Description":"描述","undo":"撤销","FS-Mobile-Device_Bind_Close":"Mobile-Device_Bind_Close=","FR-Engine_Task_Name_Repeat":"任务名重复","Des-Private_Data_Source":"所有定义的这些数据源,将保存在Report报表对象里面,只供当前报表使用","Event-beforeedit":"编辑前","Cell_Data":"单元格数据","ChartF-SeperateType":"独立型","Down":"下","Add-all":"全部添加","Plugin-ChartF_Map_Area_And_Point":"地图边界/点","FS-User-Edit_Department":"编辑部门","ChartF-Custom_the_value_range":"自定义值范围","FR-Designer-Widget-Style_Render_Style":"渲染风格","Info":"信息","FR-Engine_Fit-Impl":"自适应插件","FR-Engine-Err-The_Value_Must_Be_Integer":"必须为整数","FS-User-Personnel_Management":"人员管理","Username":"用户名","Chart_ValueIntPercent":"值所占比率","FR-Engine_ECP_error_pwd":"密码错误","ChartF-Tick_Label_Color":"标签颜色","HTML-Write_Content_Save_Failed":"填写内容保存失败","Forum":"论坛","AllRotationType":"旋转型","FR-Engine_Excel_uc_to_location":"不定行导入失败, 直接位置匹配","Chart-Layout_Left":"左侧","LayerPageReport_PageQuery":"分页查询","PageSetup-Finis_Start_Column":"重复结尾列","Utils-Right_to_Left":"从右到左","FR-Chart-Delimiter_Symbol":"分隔符","Not_Set_Verify_Attribute":"没有设置校验属性","FR-Chart-TimeUnit_Minute":"分钟","ChartF-Edit_Background":"编辑背景","FS-Button_OK":"知道了","Plugin-Memory_Alarm_Title_Big_Temp":"大模板限制","FR-Designer_Text":"文本","Level_Setting":"级别设置","FR-Engine_RP_Edit_Process":"编辑流程","FR-Chart-Map_Pie":"饼图地图","HangzhouCity":"杭州市","M_Window-Title_Vertical":"垂直平铺(V)","Select_Fields":"选择字段","FS-Generic-Parameter_Double":"双精度型","Plugin-ChartF_ShowAllLevel":"显示所有层级","Support-Auto_Complete_Shortcut":"自动补全快捷键","Plugin-ChartF_NewArea":"面积图（新特性）","FS-Report-Need_Input_Name":"请输入名称","Body-Background":"主体背景","FR-Designer-Estate_Selected_Font":"选中字体","FR-Designer_Row-Axis":"行轴","Hyperlink-Form_link":"当前表单对象","FS-Admin-Password_Modify":"密码修改","local":"本地","FS-Monitor-Simple_Problem":"问题","M_Insert-Float":"悬浮元素","FR-Plugin-Plug-trial_Expired":"插件已经超过试用期，插件ID是：","ErrorHandlerTemplate":"出错模板定义","ECP_decode_failed":"解密失败, 请联系管理员检查密码文件是否存在","Table_name":"表的名称","FR-Basic_File_Should_Select_Excel_File":"需要选择一个Excel文件来源","Chart_Title_Area":"标题区","FR-Chart-Bubble_Van":"气泡图(新特性)","WF-Communion_Task_Node":"交互任务节点","FR-Designer_TableData":"数据集","Column-Axis":"列轴","FR-BaseFile-Cancel":"取消","Chart-Unit_Hundred":"百","DBCP_MIN_EVICTABLE_IDLE_TIMEMILLIS":"保持空闲最小时间值","M-New_ChartBook":"新建图表","FR-Designer_ConditionB-Operator":"操作符","Transition":"分支","Widget-Report_Widget":"微型报表","FR-Designer_General":"常用","Page_Layout":"页面布局","FR-Chart-Map_Aomenbandao":"澳门","Export-Offline-Html":"输出离线html报表","Layer_Authentication":"验证","FR-Base_Sche_Tuesday":"星期二","FR-Plugin_API-Need-Update":"插件依赖的API有更新.","Column_Does_Not_Exsit":"列不存在","Image-Specified_Size":"指定尺寸","FR-Engine_ES_Role_Instruction1":"请配置角色权限，编辑角色请登录数据决策系统","Chart_AxisAlignZeroValueLine":"和值轴的0刻度线对齐","ChooseContentByUser":"根据用户选择不同的内容","FS-Setting-Preset_Theme_2":"典雅","FS-Setting-Preset_Theme_1":"海水","FR-Base_April":"四月","FR-Chart-Map_Gansu":"甘肃","FS-Setting-Preset_Theme_4":"薄荷","FS-Setting-Preset_Theme_3":"夜空","FS-Report-BI_Analysis":"BI分析","ReportColumns-Columns_Style_vertically":"列分栏样式","ConditionB-null":"为空","ExpandD-Insert_Cell":"插入单元格","Plugin-ChartF_CurveLine":"曲线","FR-Designer-FRFont_Bold":"加粗","BiasD-From-upper_left_to_lower_right":"从左上到右下发散","FR-Designer-Plugin_Expire_Dialog_Text":"插件过期,请前往帆软应用中心进行购买。","Verify-Verify_Success":"校验成功","FS-User-Ldap_Referral":"转诊","April":"四月","FR-Engine_RP_Pass_After_All_Operations":"该节点所有操作人员完成后流转","FR-Engine_RP_Email":"邮件提醒","Not_Appendable":"不可扩展","Preview-Assign_Margin":"调整边距","Skip":"跳过","LIC-Support_Dynamic_Meter_Chart":"","FR-Designer-Plugin_Delete":"删除","Stacked_Bar_Chart":"堆积柱形图","Visit":"访问","FR-Engine_Unregistered":"未注册","FR-Base_Short_Nov":"十一","redo":"重做","Chart_Power":"幂拟合","FS-Generic-Parameter_Formula":"公式","FS-Generic-Upload_File_Tip":"提示：上传图片尺寸请参照移动设备分辨率","Format":"格式","HotHyperlink-Des1":"利用热点链接可以指向另一张报表，在B\\S环境下，动态实现图表的数据数据的钻取效果。","PageSetup-Portrait":"纵向","Old-Style":"复古","Event-beforesubmit":"提交前","FS-Monitor-Model_Process":"功能进度","Datasource-New_Charset":"新编码","FR-Designer-Plugin_Active":"启用","FS-Msg-New_Message":"新消息","Env_Des":"如果登录环境中的报表工程启用了权限,用户名和密码的填写必须对应登陆环境的用户和密码。","FR-Engine_Session-Clean":"模板Session清理数目:","FS-Schedule-Start_Policy_At_Time":"设定开始时间","Series_Use_Default":"系列默认使用","FS-Plugin-SysMonitor_To":"到","Muiti_In":"多层钻取","Utils_UnDelete_Row":"撤销删除行","FR-Chart-Shape_Fill":"填充","Return-Value":"返回值","FS-Setting-Logo_Style":"Logo 样式","HaikouCity":"海口市","Chart-Unit_Thousand":"千","Tianjin":"天津","ThereIs_No_keyword_Named":"没有查询到关键字为","ChartF-High-Low-Close":"盘高-盘低-收盘","JavaScript-Form_Submit":"表单提交","Follow":"附属","Chart-Data":"数据","FR-Designer_Cursor_to_next_column":"光标移到下一列","FR-Import-Export_Word":"Word格式","FR-Designer_Swatch":"样品","FR-Designer_Show_Blank_Column":"补充空白列","LatLng":"经纬度","fs_process_user_pane_tip":"为当前活动选择可执行人员","ColumnTo":"列至第","FS-Generic-Simple_Edit":"编辑","Registration-Error_Registration_Information":"错误的注册信息","FR-Engine-Tab_Layout_Widget_Size":"控件大小","Delete_Column":"删除列","Plugin-ChartF_Image_Map_Data":"自定义图片","FR-Chart-Map_Single":"单层地图","FR-Designer-StyleAlignment_Tooltips_DEFAULT":"默认","ExpandD-Fill_Cell":"覆盖单元格","Plugin-ChartF_Plus_Color":"值增加颜色","ChartF-Interval_Color":"间隔颜色","FR-Engine_PDF-Export":"导出PDF","Plugin-ChartF_SecondGraduationLine":"次要刻度线","FS-User-No_Department":"没有部门","FR-Chart-Map_GoogleMap":"谷歌地图","FR-Designer_Select_All":"全选","FR-Chart-Direction_Vertical":"纵向","Open":"打开","FR-Engine_Fit-Horizontal":"横向自适应","FS-Admin-Confirm_Password":"确认密码","FR-Chart-Data_Records":"条记录","Set_Role":"角色设置","FR-Designer-Output_Excel_Simple":"Excel输出(原样导出)","FS-Generic-Simple_Calculating":"处理中","Output_PDF":"PDF输出","FR-Hyperlink_Reportlet":"网络报表","Execute_Report_by_Layer_Engine":"用行式的引擎来执行报表","FR-Engine_RP_Authority_Edit":"权限编辑","FR-Designer_Number":"数字","FrameStyle":"框架样式","FR-Chart-Map_Fujian":"福建","FR-Designer-StyleAlignment_Style_Spacing":"间距","Choose":"选择","M-Server":"服务器","Has":"拥有","MConfig-SaveButton":"保存","Filter_Conditions":"过滤条件","Chart-Use_Show":"显示","Any_Result":"的任何结果","Last_Day":"最后一天","Pick_One_Column_And_Present_To_Display_Value":"选一列作为实际值及形态转换为显示值","Datasource-Context":"上下文","FR-Desinger-Plugin_Updater_Backup_OldVersion_To":"已将旧版本包备份到：","BarInside":"柱子内侧","Processor_Parameter":"处理器参数","FR-Designer-StyleAlignment_Center":"居中","Hyperlink-Link_Opened_in":"链接打开于","ChartF-Draw_Border":"画边框","More-Field_Name":"多个字段的名","Des-MapManager":"服务器数据字典将保存到\"WEB-INF\\resources\\datasource.xml\"文件里面，是共享的，供所有的模板调用。","FS-System-war_deploy":"压缩部署","plugin-ChartF_OpenShadow":"开启阴影","LIC-Support_Advanced_Formula":"增强分析统计模块","Do_not_remind":"下次提醒","WF-Name":"名称","FR-Engine_Setting":"选项","FR-Designer-BBSLogin_Times":"次","FR-Designer_Top":"上","FR-Engine_Cluster-Close":"未开启新集群","Background-Null":"没有背景","PrintP-PageSetup":"页面设置(S)","FS-Schedule-End_At_Time":"设定结束时间","M_Insert-Shape_Isosceles_Triangle":"等腰三角形(I)","Yes":"是","FS-Generic-Parameter_Boolean":"布尔型","Preference-Vertical_Scroll_Bar_Visible":"竖直滚动条可见","Chart-Use_Space":"空格","Utils-Beyond_the_right_side_of_Border":"超出右边界","FS-User-Simple_Position":"职位","Form-Password":"密码","FR-Chart-Drill_Map":"钻取对应地图","Chart-Legend_Count":"图例个数","Not_Support_This_Method":"不支持该方法","FS-Schedule-Execute_Period_Time_Unit_Week":"每周","SelfDefineAttachmentDeal":"自定义附件处理","FS-Generic-Enter_True_Time_Format":"请输入正确格式的时间","FR-Engine_ReportServerP-Print[Server]":"打印[服务器]","FR-Designer_LeftParent":"左父格","Alert":"警告","DashBoard-FindDashBorad":"以后启动将不再显示，您可以在窗口选项栏中重新设置它","Green":"青绿","FR-Engine_Short-Nov":"十一","Email-Can-Preview_JForm_Content":"正文预览表单内容","FS-User-Post_Management":"职位管理","Center-Cannnot_Be_Null":"边界布局的中间组件不能为空","FRFont-bolditalic":"加粗倾斜","Privilege-The_User_Service_Must_Be_LDAPUserService":"必须是LDAP用户","FS-System-Current_Number_of_Users_Online":"当前系统在线人数","Database":"数据库","Schedule-Daily":"每天","Utils-The-Chart":"图表","FS_Close_Other_Templates":"关闭其他模板","FS-User-Retrieve_Location":"检索位置","BeijingInCity":"北京市区","FR-Utils_Label":"标签","AffairToHandle":"待处理事务","FR-Base_Left":"左","FS-Monitor-Templet_State":"当前状态","Server-Stop":"停止","FR-Chart_Layout":"布局","clickToRefresh":"是否继续？点击是刷新","Line_Width":"线宽","FR-Engine_Repeat-Freeze":"重复与冻结设置","FR-Chart_Bubble_Size":"值","FR-Chart-Style_Category":"分类","User_Information":"用户信息","one_record_exists_in_many_groups":"一个记录可以存在于多个组中","Shape":"图形","Utils-Top_to_Bottom_a":"从上往下","Privilege-The_User_Config_Can_Not_Be_Null":"用户配置不能为空","Sche-Friday":"星期五","SQLWizard-union":"并操作","FR-Basic_File_Upload":"文件上传","Plugin-ChartF_Area_Map_Data":"区域边界","I-LineStyle_VerticalLine":"垂直折线图","Minute":"分钟","ChartF-Area":"面积图","FR-Designer_Chart_Acc_Set":"精确设置","EmailPane-BCC":"密送","Ratio":"比率","Env-Invalid_User_or_Password":"用户名或密码错误","Join_Product_improve":"加入产品改良计划","FS-Admin-Modify_Secret_Will_Remove_User":"修改加密方式会清空已有用户数据","Utils-Now_create_connection":"正在建立数据连接","FR-Engine_RP_End":"结束","FR-Designer-FirstRow_IS_ColumnName":"第一行包含列标题","FR-Engine_Width":"宽","Plugin-ChartF_AreaMap":"区域地图","Chart-MSBold":"微软雅黑","FS-Report-Devices_PC":"PC","FR-Engine_Finish_Export":"导出完毕","KeyWord":"关键字","FR-Engine_ConditionB-contains":"包含","New_offset":"新建偏移","Data-Get_Data_Error":"获取数据时发生错误","Chart-Area-Tittle":"区域标题","M_Format-Add_Column_Before":"在前面添加列(O)","FR-Engine_Error_With_Non_Template":"非模板触发错误","FS-Report-Need_Select_BI":"请选择分析结果","Utils-Source_File":"源文件","Left_Border_Line":"左框线","Collect-The_user_information_code_is_invalid":"这个激活码是无效的, 请到官网申请","FS-Privilege-Simple_Design":"设计","FR-Engine_Exception_Column":"异常列号: ${N}","Covered_All":"全部覆盖","PageSetup-Margin":"页边距","Plugin-ChartF_LegendMaxProportion":"图例区域最大占比","Adaptive_Layout":"自适应布局","FS-Plugin-SysMonitor_Avg_Duration":"平均耗时(ms)","Chart_Text_Axis":"文本坐标轴","FR-Engine-PageSetup_Orientation":"方向","Select-Folder":"请选择浏览器所在的文件夹","FS-System-Simple_LRU":"最近使用","FR-Chart-Chart_Label":"标签","Hyperlink-No_Hyperlink":"没有超级链接","Cache-Message1":"0表示无限","Err-The_number_is_larger_than_the_maximum_value":"值大于允许输入的最大值","Chart_Border_Light":"边框光影","ParameterD-The_First_List":"第一个列表","Function-Source_Code":"如果必要的话将class对应的java源文件也放置到该目录下方便编辑和查看","EmailNotice":"邮件通知","FR-Export_PDF":"PDF格式","Authrized":"授权","Chart_F_Radar_Axis":"值轴","3DSpace":"空间","FR-Designer-Basic_Activation_Key":"设计器编号：","FR-Base_Not_Appendable":"不可扩展","FS-Generic-Simple_None":"无","FS-Generic-Turn_On":"开启","Execute":"执行","File-File_Too_Big":"文件过大，上限为","Utils-Enter_reportlet_name_prefix_or_pattern":"输入报表模板前缀或者模式","FS-Process-Input_A_Name":"请输入一个名字","FS-System-NS_mail_config":"错误代码:1204 邮件配置参数不正确","FS-System-Email_Has_Send_To":"邮件已发送至","FS-Generic-Simple_Content":"内容","FS-Plugin-SysMonitor_DataSet_Analysis":"数据集分析","FR-Designer_Fit_Vertical":"纵向自适应","Axis":"轴","FR-Engine_Excel_Submit_Add_Task":"新建任务","original":"原始","Event-afteredit":"编辑后","FR-Designer-Widget-Style_Frame":"框架","Event-beforetoexcel":"Excel导出前","Click_this_button":"点击此按钮进行路径选择","FS-Schedule-Interval_Execute_Interval":"每隔","Links":"链接","SQL-Procedure":"过程","M_File-Excel_Import":"Excel输入(I)","Chart-Use_Unit":"单位","M_Insert-Columns":"列(C)","FS-Monitor-Log_Clean_One_Month_Auto":"每一个月自动清理一次","FR-Designer-Widget-Style_Title_Content":"标题内容","Widget":"控件","Black":"黑色","Chart-Category_Name":"分类名","FS-Generic-Simple_Execute":"执行","FR-Engine_NativePrint_Invalid_Index":"页面索引不正确.","ThreeD_Stacked_Bar_Chart":"三维堆积柱形图","ExpandD-Expand_Attribute":"扩展属性","RP_Process_Select":"流程选择","Border-Style-Normal":"直角边框","FR-Designer-Widget-Style_Body_Background":"主体背景","EX-Can_not_create_WorkBook_from_Reportlet":"无法从网络报表生成工作簿","NS_print_pdf":"错误代码:1121 PDF打印只支持IE内核浏览器,其他浏览器将导出PDF文件","RP_Rollback_To":"回退到","FR-Chart_All_Normal":"正常","FR-Designer_ExportAndOutput":"导出","FS-Generic-Simple_July":"七月","NS_LayerReport_sheets":"错误代码:1108 行式引擎不支持Sheet间运算","FS-Generic-True_Extra_Run_Times":"正确的额外执行次数","Chart-Lng_First":"经度在前","ChartB-Sort_Order":"排列顺序","FR-Import-Export_Text":"文本文件(制表符分隔)","the_target_cell_is_at":"计算的目标格子在","FS-BI-Dezi_Real_Time_Report":"实时报表","Utils-Row_Height":"行高","FS-Module-System_Exam":"系统检测","FS-Generic-NOT_NULL_Des":"不能为空","Server_Language":"服务器语言","FR-Designer_Return-Date":"返回日期","ReportServerP-User_concurrency":"用户并发数","License-Your_license_is_not_support_multiple_connection":"当前License不支持多数据连接","FR-Engine_Sure_To_Remove_This_Role":"你确定删除该角色吗","ConditionB-does_not_in":"不包含于","Unit_MM":"毫米","FR-Designer_Form-Fit-Tip":"自适应插件","FR-Base_Short_Mar":"三","FR-Basic_Calculating":"处理中","LayerData":"底层数据","BindColumn-Custom_Data_Appearance":"自定义显示","FS-Privilege-Username_And_Password":"仅认证用户名密码","RP_Exist_Null_Node":"该节点中存在未填写项","FR-Base_Short_May":"五","Selected":"已选中","Unit_PT":"磅","FormulaD-Define_Execute_Script":"定义运行期脚本","fs_process_log_tip":"简单时报，日报，周报设置","FS-Generic-Simple_Driver":"驱动器","Remove_Button_ToolBar":"移除按钮所在工具栏","Export-PDF":"PDF格式","ChartF-Tick":"刻度","FR-Designer_Sytle-FRFont":"字体","ReportD-Report_Web_Attributes":"报表Web属性","CellWrite-Hide_on_Print":"在打印时候隐藏单元格","FR-Engine_Search_Task_Name":"搜索任务","FR-Designer_Mobile-Open":"开启","Utils-This_file_has_been_existed":"此文件已经存在","FR-Chart-Map_Jiangsu":"江苏","BackgroundTexture-Bouquet":"花束","Cell-Cell_Attributes":"单元格属性","Cannot-Find":"没有找打","Schedule-The_selected_file_must_be_end_with_'.xls'":"选择的文件必须以.xls结尾","Hyperlink":"超级链接","Verify-Verify_Result":"校验结果","FR-Engine_Successfully":"成功","FS-Privilege-Simple_Preview":"浏览","ChartF-Shape":"图形","Exist_The_Same":"已经有同名参数，请重新添加","NS-exception_readError":"错误代码:1305 模板文件解析出错","chart-PreStyle":"图表预定义配色","Layer-Wake_Up_Thread_For_Calculating":"唤醒计算线程","FR-Engine_FS_Report_Type":"类型","Printer-Remove_Printer_Group":"删除打印机组","FormulaD-Check_Valid":"检查合法性","ChartB-On_change_of":"变化的列","detail_description":"详细描述","Set_Default_Data_Connect":"是否将其设置为默认数据连接","FR-Designer_UnSignIn":"未登录","StartProcess":"开始流程","FR-Designer-FRFont_Foreground":"颜色","FS-Schedule-Output_Upload_By_FTP":"FTP上传附件","INFO-Start_Executing_Report":"开始计算报表","SAP-System_Number":"System Number","choose_schedule_type":"请选择定时任务的类型","WF-Select_Field":"选择区域","Finish_Export":"导出完毕","FS-Process-Selected_None_Of_Any_Items":"没有选中任何一项","PaperSize_XL":"特大","Chart_Table_Data_Not_Found":"图表数据集没有找到","performanceModule":"性能模块","M_Edit-FormatBrush":"格式刷(B)","FR-Chart-Muiti_In":"多层钻取","FR-Base_Formula_Plugin":"插件函数","D-ChartStyle_Info":"介绍","Chart-Interactive":"交互属性","Report-Subtitle":"报表副标题","DS-Server_Dictionary":"服务器数据字典","FS-Template_Refresh_Parameter":"刷新参数","Widget-Visible":"可见","FR-Designer_Set_Submit_Condition":"设置提交条件","Collect-Enter_your_user_information_code(It's_free_to_get_from_product's_official_website)":"请输入您的激活码(它是免费从产品的官方网站获得的)","Mail-BCopy_Adress":"密送地址","SingleAfter":"后","FS-Generic-Simple_June":"六月","Privilege-Select_User":"选择用户","FS-Reg-Simple_Unregistered":"未注册","Chart_Second_Plot":"第二绘图区","Server-Embedded_Server":"內置的服务器","ConditionB-Parameter_name_cannot_be_null":"参数名字不能为空","ParameterD-Delay_Playing":"点击查询前不显示报表内容","FR-Chart-Map_Jiangxi":"江西","Utils-Import_Excel_Data":"导入[Excel]","current_not_support":"当前预览方式不支持条件属性设置形态","single_choice":"单项选择","ChangshaCity":"长沙市","Horizontal_Layout":"水平布局","Style-Line_Spacing":"行间距","FR-Chart-Gantt_RealStart":"实际开始时间","FR-Engine-Condition_Operator":"操作符","FR-Engine_Offline_Html_Info":"很抱歉的告知您，目前IE9及I9+浏览器暂时不支持离线填报功能，请使用其他浏览器打开！","FS-Msg_Disable":"插件已被禁用,重启服务器后生效","FS-Schedule-Task_Manage":"任务管理","Import":"输入","FR-Server-All_Error":"错误","Indent-Indentation_Value":"缩进值","Des-Remove_WorkSheet":"要删除的表可能存在数据,如果要永久删除这些数据,请按'确定'按钮.","FR-Hyperlink_Please_Select_Reportlet":"请选择网络报表","ChartF-Y_Axis":"Y轴","FR-Engine-Error_Input_Value":"错误的输入值","FR-Designer_Cell":"单元格","Seriously":"严重","Event-beforeverifywrite":"校验提交前","Utils-Delete_Row":"删除行","TODO_WORK":"待办事务","FR-Designer_M-Template":"模板","Widget-Multi_Report_Widget":"报表控件","Datasource-SAP_datasource_name_cannot_be_null":"SAP 数据源名不能为空","BindColumn-Odd_Selected_(1,3,5...)":"选择了奇数集(1,3,5...)","Re-appname-match":"AppName匹配","RCodeDrawPix":"像素","FR-Base_January":"一月","PageSetup-Saving_current_settings_to_server":"保存当前设置到服务器","Polyblock-Attribute":"聚合块属性","FS-Admin-Account_Is":"您的管理员账号为","Error_Cell":"错误的格子","FR-Designer_Datasource-Stored_Procedure":"存储过程","FR-Designer_PaperSize-Mobile-Large":"手机大屏","Reg_Expressions":"正则表达式","FR-Engine-NS_export_excelHtml":"错误代码:1111 导出Excel不支持Html中部分标签","FR-Designer_PostCode":"邮编","FR-Engine_ProcessName":"流程名称","Condition_Attributes":"条件属性","StyleAlignment-Horizontal":"水平对齐","FR-Chart-Waring_Please_Input_The_Key":"请输入对应地图使用的key","Embed":"内嵌","Event-afteremail":"Email后","FR-Engine_Restart_Browser_After_Installation":"安装之后请重启浏览器.","EX-Image_stored_is_broken":"保存的图片被破坏了","cycle":"周期","FR-Chart-Format_PDF":"PDF格式","ChartF-Donut":"圆环图","FR-Engine-PageSetup_Margin":"页边距","TimesSum":"次数","FR-Designer_Border":"边框","FR-Designer_Background-Click":"鼠标点击背景","FS-Setting-Select_Theme":"使用主题","FS-Monitor-Log_Level":"日志级别","Privilege-The_Response_Is_Not_Instanceof_HttpServletResponse":"该响应不是HTTP响应","FR-Engine_Short-Oct":"十","Chart-Value_Conversion":"转化率","Chart-Plan_Start":"计划开始","FR-Export_Excel":"Excel格式","Event-afterpdfprint":"PDF打印后","FR-Designer_Role_changed_isRefresh":"角色已变动，是否刷新","HF-Delete_it":"删除","FR-Engine_Excel_import_cost":"导入Excel成功, 耗时(毫秒):","FS-User-Add_Department":"添加部门","BindColumn-Summary(Including_SUM_,_AVERAGE_,_MAX_,_MIN_And_So_On)":"汇总(包括求和，取平均数，最大值和最小值等)","Customs":"定制","Panel":"面板","FR-Chart-App_UpdateProgress":"更新进度","FR-Plugin_Edit-Local":"编辑本模板配置","FS-Plugin-SysMonitor_Operation_Details":"操作行为明细","Show_in_Containing_Folder":"打开所在文件夹","Layout-Padding":"内边距","Form-DataTable":"数据表","Plugin-ChartF_SeriesColor":"系列色","Plugin-ChartF_Layer_Zoom_Level":"对应缩放等级","FS-Generic-Simple_Task":"任务","Form-Center_Align":"中间对齐","FS-Admin-Super_Manager":"超级管理员","SingleMan":"者","FS-Admin-First_Set_FS":"您是第一次使用数据决策系统，请先配置您的管理员用户名和密码","No_Wanted_Result":"没有满足条件的结果","Invert_Selection":"反向选定","FS-Generic-Simple_File":"文件","Schedule-Are_you_sure_to_delete_the_selected_task":"确认删除所选任务","Role_List":"角色列表","Chart_Area":"面积","Deselect_All":"不选","Receiver":"收件人","FR-Basic_Plugin_Version_Warning":"插件版本过低,请升级插件,当前插件将无法加载","Classifier-Ge":"个","Double":"小数","Plugin-ChartF_HingeBackground":"枢纽背景","PrepareExpression":"预置表达式","FR-Designer-Widget-Style_Title":"标题","ParameterD-Background":"参数窗体背景","Tooltips":"提示","FR-Engine-INFO-End_Converting_ReportPage_To_Html":"报表页转Html结束,耗时","FR-Engine-Condition_Not_Equals":"不等于","FR-Designer_Refresh_Parameter_In_SQL":"是否刷新SQL中的参数","Chart-Black_Font":"黑体","FR-Designer_Underline":"下划线","Second_Value_Axis":"次值轴","FR-Base_Fri":"五","ChartF-HorizontalDrawBar":"横向排列","FR-Designer_Seriously":"严重","FR-Engine-PageSetup_Predefined":"预定义","Chart-Switch":"图表切换","Registration-Use_Authorization_File":"使用授权文件","SpecifiedG-Specified_Group":"自定义分组","FS-Generic-End_Time":"结束时间","FS-Schedule-Output_Push_Content":"消息内容","WF-Superior":"上级","D-ChartValues":"图表数值","FR-Designer-Plugin_Has_Been_Disabled":"插件已被禁用，重启设计器及服务器生效，服务器需手动重启","Chart-Actual_Start":"实际开始","SQLWizard-choose_function":"选择一个函数","XMLA_Explain":"在使用多维数据集取数前，您首先需要一个可成功连接的多维数据库连接。\n设置完数据连接后，查询数据时,有两种不同的取数手段。\n1.简单通用查询：\n简单通用查询适用于FineBI及其他多维数据库。\n使用简单通用查询，FR将自动读取选择cube的层次结构，您可以直接选择所需的度量值及维度，并添加筛选条件，FR会根据您的选择自动查询数据。\n简单通用查询仅支持维度及度量值两个轴的查询。\n在度量值及维度设置中，目前您只能选择所需维度，无法手动修改。\n过滤条件采用OPEN SQL语法，您可以键入${abc}作为一个参数，用法同数据库数据集。\n2.自定义MDX查询：\n使用自定义MDX查询，您可以自定义MDX语句查询所需结果。\n注意，自定义MDX查询也只支持两个轴的查询。\n您可键入${abc}做为一个参数，用法同数据库数据集。\nFineBI的cube不支持MDX查询。","Hyperlink(failure)":"超级链接（失败时）","FS-Schedule-Output_Push_New_Message":"您有新的消息","Data_Fields_can_be_used":"可用的数据字段","Plugin-ChartF_Polygonal":"多边形","BindColumn-Group(Merger_the_Items_Which_Have_The_Same_Value_in_Column)":"分组(将数据列中相同内容的值进行合并)","FR-Chart-Map_Fuzhou":"福州市","Datasource-Table_Name":"表名","RP_Page_Write":"页面填报","Finish_Save":"保存完毕","FR-Engine_Example":"例如","Verify-Expression":"校验公式","FR-Designer_Fit_Horizontal":"横向自适应","FR-Engine_RestartAfterSet":"配置结束立刻开始","Plugin-ChartF_Save_Edit":"是否保存本次修改?","Preference-Choose_Configuration_File":"选择配置文件","FR-Designer_Year":"年","Plugin-ChartF_ZoomWidget":"缩放控件","Re-Group-edition":"集团版","DownBarBorderStyleAndColor":"跌柱样式","Chart-Gantt_ErrorTip":"甘特图必须要有","Plugin-ChartF_OpenAxisReversed":"开启轴逆序","FS-Generic-Simple_Password":"密码","Plugin-ChartF_Bubble":"气泡","Schedule-Select_Report_File_Directory":"选择报表目录","FS-Generic-Simple_Submit":"提交","ReportColumns-Repeat_Column":"复制列序列","Plugin-ChartF-Automatic":"自动","Ecp_Input_Oldpwd":"请输入旧密码","Release_Lock":"解锁","Plugin-ChartF_Gauge_Slot_Title":"刻度仪表盘","FR-Chart-Map_Anhui":"安徽","Form-ToolBar":"表单工具栏","FS-Monitor-Log_Clean_One_Week_Ago":"一周前","FS-Generic-Simgle_Number":"号","FR-Chart-Property_Table":"图表属性表","I-HBarStyle_Normal":"簇状条形图","Utils-The_data_dictionary_is_not_exist":"数据字典不存在","FR-Designer_Button-Name":"按钮名称","BarCodeD-Drawing_Text":"显示条形码的文本","Golden":"金色","FR-Designer-CommitTab_Remove":"删除","FS-User_Login2FS":"登录到数据决策系统","FR-Chart-Map_ImageArea":"图片区域","FR-Engine_RP_Add_MultiNode":"添加联合填报节点","FR-Designer_Current_tab":"当前编辑tab","FR-Chart-Marker_Type":"标记类型","Cover_None":"全不覆盖","Chart-Change_Bar_Size":"将柱形图大小缩放为","Plugin-ChartF_Border":"边框","Plugin-ChartF_Select_Color":"选中色","ScheduleCycle":"调度周期","FormulaD-Custom_Function":"自定义函数","LIC-Support_Advanced_DataSource":"增强数据源模块","Please_Drag_ParaPane":"","Schedule-Template_Parameter":"模板参数","Plugin-ChartF_Legend_Section":"区域段","FS-Generic-Simple_Opened":"已开启","M_Server-Platform_Manager":"报表平台管理","FR-Designer-Output_Background_Set":"背景设置","M_Edit-Copy":"复制(C)","FS-Generic-Simple_Add":"添加","FS-System-Email_Encrypt_None":"不加密","FR-Engine_Word-Export":"导出Word","FR-Engine_ConditionB-begins_with":"开头是","FS-Setting-Colorful_FS":"缤纷","PageSetup-mm":"毫米","FR-Chart-Color_Color":"颜色","TurnOn":"开启","FR-Engine_DS-TableData":"数据集","Hyperlink-Show_Scrollbars":"显示窗口滚动条","Import-Excel2007_Source":"Excel2007源文件","CONTINUUM_MODE":"相邻连续分组","Add_Analysis":"添加数据分析","Modify_Column_Attibute":"修改列属性","FR-Engine_Offline_Html_Error":"很抱歉的告知您，目前IE9及I9+浏览器暂时不支持离线填报功能，下载的离线html报表请使用其他浏览器打开！","Top_Margin":"上边距","FR-Chart-Map_Ningxia":"宁夏","Columns_choosed":"选择的列","BackgroundTexture-PurpleMesh":"紫色网格","FR-Chart-Format_Image":"图片格式","M_Edit-DeleteColumn":"删除光标所在列","FR-Utils_Background":"背景","Unit_CM":"厘米","Custom_Define_Types":"自定义类型","FS-System-Event_Submitsuccess":"提交成功","Log_Level_SEVERE":"严重级别,显示错误信息","Privilege-Name_Not_Match_Password":"用户名和密码不匹配","Utils-Show_View":"视图","FS-Module-MobilePush_IOS_IsDevelop":"iOS是开发环境","Tree-Grade":"层","ExpandD-Define_Father_Cell":"定义父格","Parameter-Double":"双精度型","RP_Invalid_Task_Or_Process":"任务名称或流程名称不符合规范","FR-Designer_Reg_Max_Length":"最大长度","OpenAuthConfirm":"是否启用分级权限控制","ExpandD-Rename_Datasource":"重命名数据源","FR-Engine_PrintPreview":"打印预览","Utils-Exit_Designer":"退出设计器","FR-Chart-Map_Chongqing":"重庆市","FR-Designer_XMLA_Database":"数据库","FR-Designer_Mobile-Zoom":"报表缩放","Formula_Dictionary_Display_Examples_Html":"<html>实际值范围为 =range(100),对实际值范围内的每个$$$的显示公式为 =0 - $$$，<br>则最终的结果实际值为1, 2, ..., 100,显示值为-1, -2, ... , -100。<br>&nbsp;<\/html>","ConditionB-does_not_end_with":"结尾不是","FR-Designer_Sytle-Indentation":"缩进","NS_print_plugin":"错误代码:1201 当前浏览器未安装打印所需插件","ProcedureSameWarning":"存储过程中有数据集名字和其他数据集名字一样，请修改！","Orange":"橘黄","FR-Designer_Alert":"警告","Err-The_value_cannot_be_negative":"不能为负数","FR-Engine_RP_Pass":"通过","GroupReport-Page_Break_After_Detail_Repeat_Times":"主体部分循环指定次数后强制分页","FR-Engine_overflow":"系统并发数已满","Function-J2EE_server":"J2EE服务器","Test_Value":"示例数据","__SHOWTOOLBAR__":"是否显示工具栏","FR-Designer-StyleAlignment_Tooltips_Bottom":"靠下","Chart_Second_Grid":"次要网格线","Verify-Data_Verify":"数据校验","FS_Name":"数据决策系统","FS-User-Simple_Unselected":"未被选人员","FR-Designer_Product_Demo":"产品演示","Preference-Column_Header_Visible":"列标题可见","Para-Body":"参数界面","BindColumn-Select(Regardless_of_Having_the_Same_Value,Display_all_Item_in_Column)":"列表(数据列中的所有数据记录展示出来，无论数据是否重复)","FR-Engine_PageSetup-Portrait":"纵向","FR-Engine_No-tableData":"没有返回数据集","No_Editor_Property_Definition":"该编辑器没有属性定义","Chart-StyleAlignment_Left":"靠左","plugin-ChartF_positionX":"x方向","plugin-ChartF_positionY":"y方向","Chart_Change_Bubble_Size":"将气泡大小缩放为","NNormal":"正常","FS-Privilege-Grade_Authority_Manager":"分级权限管理","FR-Engine_ConditionB-is_not_empty":"不为空","HJS-Server_Printer":"服务器端的打印机","FR-Desinger-Plugin_Updater_Restore":"还原","State-Toggle":"状态切换","FR-Report-Write_Offline-Verify_ToolTips":"提交校验中包含离线状态无法执行的校验规则，继续将忽略这些校验规则，但是在联网提交时会被重新执行，是否继续校验？","Chart_Project":"项目","FS-User-Username_Can_Not_Be_Null":"用户名不能为空","FR-Engine_RP_Finished_Task":"已处理任务","FS-Web-PluginLicense_Check_Failed":"没有可用的许可证","Select_Create_Role":"请先选择角色或新建角色","FS-Frame-Simple_Subscribed":"已收藏","JavaScript-Dynamic_Parameters":"动态参数","Offline-Connect_Failed":"无法连接到服务器。请确认本机的网络连接状况和服务器的工作状态后重试。","Event-aftertopdf":"PDF导出后","Function-Content_Function":"内容函数","Data_Filter":"数据筛选","ChartDemo":"示意图","FS-User-All_Users":"所有用户","FR-Chart-Versions_Lasted":"当前版本已经是最新版本","Not_use_a_cell_attribute_table_editing":"您不可以用单元格属性表编辑","FR-Designer-Plugin_Search":"搜索","ChartF-Y2_Axis":"Y2轴","FR-Base_November":"十一月","Create_Grouping_Report":"创建分组报表","FS-Privilege-No_Privilege":"没有权限","FR-Engine_add":"添加","Selected_Dictionary":"当前数据字典","Form-Widget_Property_Value":"属性值","LayerPageReport_WN_Hierarchy":"按页运算引擎不支持层次坐标","Sure_To_Remove_This_Role":"你确定删除该角色吗","Privilege-Authority_Must_Be":"权限必须是","FormulaD-Function_category":"函数类型","Server-version-info":"您当前打开的模板文件是由更高版本的设计器制作的，打开会有出错或者丢失原有模板属性的风险。  假如需要打开此模板请您将您的设计器升级至","Datasource-Rename_class_datasource":"重命名程序数据源","FR-Engine_RP_All_Tasks":"所有任务","FR-Base_Wed":"三","FR-Designer_DS-Dictionary":"数据字典","FS-System-Simple_Detail":"明细","LOG-Please_Wait":"请稍候","FR-Base_NOT_NULL_Des":"不能为空","Chart_Scatter":"散点","FR-Designer_Attention":"注意","FR-Engine_Utils-Submit":"提交","Use_ToolBar":"使用工具栏","DS-Report_TableData":"模板数据集","Form-Widget_Scrollable":"滚动条","SQLWizard-all_Rows_From":"所有的表来自{0}","ExpandD-Repeat_Row_Height_Or_Column_Width":"重复行高或者列宽","Are_You_Sure_To_Delete_The_Data":"确定删除选中数据吗","FR-Designer_Set":"设置","FS-System-Visit_IP":"访问IP","FR-Engine_Poly":"聚合报表","Reg_Min_Length":"最小长度","Single_Open":"开","User":"用户","Privilege_Form":"表单","Error_Statement_Is":"错误的描述为","Plugin-ChartF_Deploy":"配置","Plugin-ChartF_NewMap":"地图（新特性）","RP_Process_View":"任务流程查看","FR-Engine_Face_View":"查看","FS-Privilege-Data_Connection_Control":"数据连接控制","Refresh_Parameter_In_SQL":"是否刷新SQL中的参数","HJS-Message":"内容","FS-Setting-Style_Config":"样式","FR-Designer-Estate_Parameter_Null_Text":"参数为空显示为","FS-System-Please_Check_Email_Attr":"请检查用户名密码，收件人地址以及邮件服务器是否填写正确，并确保网络畅通。","Management":"管理","LIC-Support_Advanced_Online_Writer":"多源填报","Already_exists_not_add_repeat":"已经存在，请不要重复添加","Mail_Setting":"邮件设置","Pick_Two_Columns_As_Actual_And_Display_Value":"选两列作为实际值和显示值","Prev_Year":"上一年","Input_Rule":"填写规则","Welcome":"欢迎","FR-Designer_Thanks-To":"鸣谢","FS-Monitor-Use_Detail":"使用情况","FS-Schedule-Please_Select_Monthly_Execute_Time":"请选择月执行时间","Start_Process":"发起流程","FR-Engine_None":"无","Choose_Role_Create":"选择角色(请先设置角色)","Custom_Processor":"自定义处理器","Chart_TrendLine_Backward":"倒推","FS-Schedule-Execute_Condition":"执行条件","Double_Bottom_BorderLine":"双底框线","PageSetup-Shrink_to_fit_content":"根据单元格内容自动调整","Form-Middle_Align":"中线对齐","JSON-Error":"没有生成正确的JSON数组","Registration-CPU_Number":"处理器数目","Click_RadioButton_Change_Semantic":"点击单选按钮更改语义层的设置","M_Edit-Undo":"撤销","RenderStyle":"渲染风格","M_Edit-Order":"叠放次序(O)","FR-Engine_RP_View_Task":"查看任务","Chart-Switch_Selected_Chart":"切换选中图表","Y-Coordinate":"纵坐标","CellWrite-InsertRow_Label":"插入行时插入","BackgroundTexture-MediumWood":"深色木质","Can_not_use_FormatBursh":"不能对多重选定区域使用格式刷!","FS-Msg-War_Deploy_Block":"war包部署后，插件管理暂不支持，建议打war包前操作.","FR-Designer_Tree-ComboBox":"下拉树","Utils-The_selected_reportlet_do_not_contain_any_parameter":"选择的网络报表不包含任何参数","FR-Engine-Page_Setup_Portrait":"纵向","Parameter-Integer":"整型","Current_keys":"当前快捷键：","FR-Designer_Style":"样式","FS-Schedule-Basic_Properties":"基本属性","FR-Designer_ConditionB-AND":"与(AND)","Plugin-ChartF_From":"初始左边界","Cpt_Backup_Sure":"备份模板可以防止数据丢失，您确定不备份吗？","MConfig-SupportEmail":"电子邮件","FR-Designer_Thank_guest":"特别鸣谢以下论坛帆薯对该版本设计器易用性做出的突出贡献","Enabled":"可用","Chart_Data_Monitor":"数据监控","Printer-Selected_Printers":"已选择的打印机","UrumqiCity":"乌鲁木齐市","FS-Generic-Simple_Welcome":"欢迎","Layout":"位置","Length":"长度","FR-Designer_Edit":"编辑","FR-Designer-StyleAlignment_Tooltips_Distributed":"分散对齐","SimgleNumber":"号","FS-Frame-Sure_To_Leave":"你确定要离开吗？","ChartF-3DSimulation":"模拟3D","Report_Certification":"报表认证","Plugin-ChartF_Rule":"常规","ServerM-Privilege_Manager":"权限管理","Right_Border_Line":"右框线","Log_Declare_Head_Print":"报表打印中","ExpandD-Father_Cell":"父格","Utils-Server_Parameters":"服务器参数","Plugin-ChartF_Drill":"钻取","Unit_Ten":"十","NoAffairToHandle":"暂时没有事务","Hyperlink-Show_Location":"显示地址栏","FS-Generic-Simple_Institution":"机构部门","Select_Username_Column":"选择用户名对应列","M_Format-Data_Map":"数据字典","FR-Basic_File_Allow_To_Upload_Contains":"允许上传的文件包括","FS-Monitor-Log_Clean_One_Week_Auto":"每周自动清理一次","FR-Chart-Style_Bright":"明亮","Choose_Language":"语言选择","HF-Insert_Content":"插入内容","Chart-Edit-HotToolTip":"编辑热点提示","connection_to_server_again":"连接中断，是否重新连接服务器?","FR-Designer_DEFAULT":"默认","Japanese_Language":"日语","FR-Designer-Widget_Style":"样式","Qinghai":"青海省","M-New_Report":"新建报表(R)","CellWrite-Default_Value_To_Insert":"默认的插入值","FormulaD-Reserve_when_bs-write_or_analy":"填报/分析时，保留公式用于计算","BackgroundTexture-Papyrus":"纸莎草纸","FS-Msg-Not_Found_Plugin":"未安装该插件,不能被更新.","designerModule":"设计器模块","Event-beforetoimage":"导出图片前","FR-Engine_FlashPrint":"Flash打印","Choose_AnalysisData":"请选择分析数据！","Plugin-ChartF_StackColumnTypeRadar":"堆积柱形雷达图","FR-Engine_ConditionB-ends_with":"结尾是","FR-Designer_FormulaD-Other":"其它函数","Drag_to_select_gradient":" 拖动下方按钮选择渐变区域，单击按钮选择对应颜色","DS-Multi_Dimensional_Database":"多维数据库","Rectangular Coordinates Projection":"直角坐标投影","November":"十一月","ReportServerP-Print[Server]":"打印[服务器]","Not_Set_Verify_Class_Path":"找不到校验类","Create_Tree":"构建树","Form-Name_For_Empty":"空值将显示为","FR-Designer-BBSLogin_Download-Unlogin-Tip":"登录后才能下载","NewAffairToHandle":"您有新的代办事务需要处理","Position_Name":"职位名称","Denied_To_Upload_Contains":"禁止上传的文件包括","FS-Generic-BS_Design":"B/S全局配置","FR-Engine_Role_Name":"角色名称","Plugin-ChartF_FilledWithImage":"图片填充","FS_New_Password":"新密码","FormulaD-All":"全部函数","Condition_Display":"条件显示","Short-Jun":"六","FR-Designer_ToolBar_Top":"顶部工具栏","Short-Jul":"七","FR-Chart-Map_Hangzhou":"杭州市","Hyperlink-Resizable":"是否可调整窗口大小","Alignment":"对齐","FR-Designer_Reg_Expressions":"正则表达式","FR-Engine_Release_Lock":"解锁","RESULTLET":"访问报表结果路径的参数","FirstRow_IS_ColumnName":"第一行包含列标题","LayerPageReport_WN_Chart":"按页运算引擎暂不支持图表","Chart-Animation_JSShow":"动态展示","FR-Chart-Pie_ReCombinePie":"复合饼图","ChartF-Step":"步骤","Hyperlink(success)":"超级链接（成功时）","RP_Node_Name":"节点名称","Utils-Add_Row":"添加行","FR-Designer_Oracle_All_Tables":"所有表","FR-Already_exist":"当前环境已存在:","FR-Plugin-Plugin_Version":"插件版本","FS-Privilege-Entry_Config":"报表权限快捷配置","Widget-User_Defined_Widget_Config":"预定义控件","FR-Engine_Verify_Failed":"校验失败","FR-Engine_Format":"格式","multiple_choice":"多项选择","FR-Designer_Widget_Width":"控件宽度","FS-System-Email_Encryption_Method":"加密方式","The_file_is_already_selected.":"这个文件已经被选择","FS-Generic-Server_Usage":"服务器使用情况","FR-Chart_DataLabelOutSide":"数据标签外","FS-Schedule-Task_Run_Moment":"运行时刻","Warning":"警告","Draw":"绘制","M_Help-Quick_Start":"快速入门","__PARAMETERS__":"用JSON格式表示的访问参数","FR-Engine_RP_Send_Time":"发送时间","FR-Base_Sche_Monday":"星期一","LayerPageReport_WN_CellExpand":"按页运算时，只支持从上到下扩展属性，其它属性设置均不支持","FR-Engine_Sche-Minute":"分","LeftParent":"左父格","Button-Group-Display-Columns":"展示列数","NS_register_ipFull":"错误代码:1115 系统并发数已满","I-LineStyle_LineWithMarker":"数据点折线图","FR-Chart-Type_Pie":"饼图","FR-Designer-FRFont_Italic":"倾斜","FR-Engine_-None":"无","HF-Insert_Formula":"插入公式","LasaCity":"拉萨市","Repeat-Freeze":"重复与冻结设置","Smart":"智能","FR-Base-Need_Purchase_Info":"您需要一个注册码或者该报表服务器的使用人数超过了注册限制的数量","CardinalNumber":"基数","GroupB-Report_Footer_Page":"报表脚分页","FS-Report-No_Folder_Edit_Privilege":"您没有该文件夹的编辑权限！","FR-Designer-Plugin_Illegal_Plugin_Zip":"不是合法的插件包","Server-Define_Data_Connection":"定义数据连接","Plugin-ChartF_TimeAxis":"时间坐标轴","Layout-HBox":"水平盒子布局","Use_NormalGroup":"使用普通分组","FR-Engine_RP_Alert_Setting":"预警设置","FS-Generic-Simple_New":"新建","FR-Chart-Map_Guizhou":"贵州","Plugin-ChartF_NewCustom_ColumnLine":"柱形图-折线图","M-Others":"其它...","Utils-Are_you_sure_to_delete_the_role":"确实要删除该角色吗","StyleFormat-Percent":"百分比","FR-Base_Sche_Week":"星期","Yong-Style":"清新","FS-User-Platform_User_Management":"平台用户管理","All_File_Uploaded":"所有文件已上传","revert":"撤销","LIC-Support_Schedule":"报表定时调度","Preference-Undo_Cacheable":"撤销之磁盘缓存","Loading_Component":"正在加载控件","Log_Level_INFO":"普通级别,显示SQL语句等信息","Sche-Wednesday":"星期三","Drop_down_for_more_preview":"","FR-Designer_Block-intersect":"禁止块与块之间的重叠","DS-Class":"程序","Reg_ Expressions":"","FRFont-Strikethrough":"删除线","GroupReport-Hide_Detail_When_There's_No_Data":"当没有数据时不显示主体","Horizontal":"水平","FR-Designer_SampleText":"示例文本 示例文本","Preference-Function":"功能设置","Export-Excel-LargeData-Page":"大数据量分页导出","World Map":"世界地图","FR-Chart-Chart_BubbleChart":"气泡图","Continue_add":"继续添加","M_Window-Next_Window":"下一个窗口(N)","M_File-Export-PDF":"PDF格式","Cache-DataBase-Parameters-Setting":"数据集共享属性设置","FR-Engine_Enlarge_Or_Reduce":"缩放","RWA-Column_Offset":"列偏移","FS-Module-Plugin_Operate":"插件管理","FR-Engine_Refresh":"刷新","Form-Editing_Listeners":"事件编辑","FR-Engine-Condition_Greater_Than_Or_Equals":"大于或等于","FS-User-Position_Can_Not_Be_Null":"职位不能为空","FR-Designer-App_ReLayout":"手机重布局","FR-Engine_Sun":"日","Plugin-ChartF_Shadow":"阴影","Utils-The_Name_has_been_existed":"此名已经存在","Collect-Click!_Get_user_information_code":"点击!获取激活码","FR-Engine_Edit":"编辑","Plugin-ChartF_TitleMaxProportion":"标题区域最大占比","FR-Designer_Table_name":"表的名称","FR-Engine_Multi-Excel-Import":"批量Excel数据导入","FR-Engine-ReportServerP_Print[Server]":"打印[服务器]","TaipeiCity":"台北市","Verify-Formular_Parser_Error":"公式解析错误","Edit":"编辑","FR-Engine-Loading_Component":"正在加载控件","ExpandD-Inherit_All_Condition":"继承所有条件","Layer-Waiting_For_Page_Number":"等待页码","Utils-Beyond_the_bottom_side_of_Border":"超出下边界","Set_Callback_Function":"设置回调函数","Backup_To":"备份到","FR-Designer_Total":"总共","Utils-Design-File_Open":"打开","FR-Engine_FS_Task_End":"内截止","FR-Basic_Successfully":"成功","Function-The_selected_file_cannot_be_null":"文件不能为空","EmailPane-mailContent":"邮件正文","RP_Content":"正文","FS-System-Cache_Template_Settings":"模板缓存属性设置","FS-Mobile-Dev_Added_By_Admin":"管理员添加的设备","FR-Designer-Plugin_Install_From_Local":"从本地文件安装","DS-Class_Name":"类名","FRFont-Style":"字形","FS-Reg-Lock_Serial_Number":"加密锁序列号","Preference-Row_Header_Visible":"行标题可见","RWA-Key":"主键","Type_Set":"类型设置","Datasource-SAP_datasource":"SAP 数据源","Statistic":"统计","Err-The_value_must_be_number":"值必须是一个数字","Get-Cube":"正在获取cube","LayerPageReport_WN_Report_Columns":"按页运算引擎暂不支持报表分栏","Chart-Project_ID":"项目名","FR-Designer_No-Privilege":"没有权限","FR-Desinger-Plugin_Updater_New_Version_Available":"有新版本","ReportWebAttr-Widget_Css":"控件自定义样式表","ChartF-Arrow":"箭头","FR-Engine_RP_Son_Task_Not_Complete":"子任务尚未完成","FR-Designer_ReportColumns-Repeat_Column":"复制列序列","FS-Generic-Simple_Delete":"删除","Choice_Type":"备选项类型","FR-Chart-Heat_Map":"热力地图","ChartF-Tick_Size":"刻度大小","Normal":"普通","Hyperlink-URL_cannot_be_null":"URL不能为空","Layout-Margin":"外边距","FS-Generic-Simple_Hour":"小时","FS-Report-Simple_Analysis":"分析","FR-Engine-Click_To_Shrink_Panel":"点击收缩面板","Border-Style":"边框样式","I-AreaStyle_PercentageStack":"百分比堆积面积图","HF-Move_Right":"右移","Work_After_Restart_Designer":"重启设计器后生效","FS-Monitor-Log_Clean_Three_Months_Auto":"每隔三个月自动清理一次","Chart-Step_Nam":"步骤名","FR-Engine-Edit_Clear":"清除","Plugin-ChartF_Gauge_Cuvette_Title":"试管仪表盘","FR-Chart-Pop_Chart":"悬浮窗图表","FS-Generic-Platform_Module_Log":"日志","WEB-Write_Setting":"填报页面设置","FR-Designer_Used":"最近使用","FR-Designer_ReportColumns-Repeat_Row":"复制行序列","FR-Designer_Button-Cancel":"取消","Attention":"注意","FR-Engine_RP_Execute_Day":"执行日","Re-sametime-ip":"可同时访问模板IP的个数","Plugin-ChartF_MultiPie_Series_Name":"指标名","FR-Chart-Gantt_RealEndTime":"实际结束时间","Chart-Pointer_Value":"指针对应的值","StyleFormat-Category":"分类","ExpandD-Remove_Datasource":"删除数据源","ConnectionPool_Attr":"连接池属性","FR-Chart-Product_Demo":"产品演示","FR-Designer_Server-version-tip-moreInfo":"建议您所属团队使用的我方FineReport产品的设计器版本号以及部署的服务器版本号保持一致，以避免版本不一致造成的问题风险。\n假如您打开更高设计器版本制作的模板，可能打开出错，也可能丢失原有模板属性。假如您制作的模板使用的设计器版本高于您最终部署所用的服务器版本，服务器可能无法正常载入您制作的模板。","FR-Chart-TimeUnit_Second":"秒","FS-Schedule-Execute_Period_Time_Unit_Day":"每天","sure_to_delete":"确认删除","Execute_Error_info_forbid_formula":"非法传入参数，禁止为公式","FS-Privilege-Template_Control":"模板权限控制","Plugin-ChartF_CustomIntervalBackground":"自定义间隔","FS-Report-RP_AddLabel":"添加上报标签","CardLayout":"卡片布局","StyleAlignment-Left_To_Right":"从左向右","Plugin-ChartF_Layer_mapbox":"mapbox","Utils-Left_to_Right":"横向","FS-Admin-Verify_New_Password":"确认新密码","FR-Designer_Form-Iframe":"网页框","BindColumn-Decrease":"减少","Click_To_Change_Value":"点击改变值","Verifying":"校验中","Preference-Support_Undo":"支持撤销","FS-Setting-Background_Image":"图片","FR-Designer-Plugin_Installed":"已安装","plugin-ChartF-FloatColor":"悬浮颜色","Chart_Line_Color":"折线颜色","Support":"支持","M_Edit-Clear_Formats":"格式(F)","Right_Margin":"右边距","FormulaD-Array":"数组函数","Server_Data_Relations_Table":"服务器数据集关系表","PM-Use_Custom_Privilege":"使用自定义权限","ReportServerP-First":"首页","Utils-Insert_Column":"插入列","fs_process_sontask_tip":"子流程任务:此任务可以选择其他流程作为当前流程的任务来处理。","ChartF-Column":"柱形图","Cache-Cpt-Parameters-Setting":"模板缓存属性设置","M_Edit-Redo":"重做","LIC-Support_Server_Cluster":"报表服务器集群","FS-Schedule-Output_Attach_Print":"打印文件","DashBoard-DashBoradSetting":"欢迎界面设置","Offline":"离线","M_Help_Licence":"授权许可","Utils-Remove_Row":"删除记录","Column-Fields":"列字段","Utils-Actual_Value":"实际值","FR-Designer-Type_Parameter":"<html> <body> 您可以键入${abc}作为一个参数，这里abc是参数的名称。例如：<br>","read_time_out":"加载超时","Datasource-Datasource-value":"数据源值","ReportServerP-Basic":"基本","Tree-Filter_Condition":"过滤条件","ChartF-Outside":"外部","DateFormat-yyyyMd":"yyyy年M月d日","FR-Engine-Write_Clear":"清空","Start_automatically_when_starting":"启动时自动显示此窗口","FR-Engine_RP_Rollback":"回退","MaxMarker":"大标记","DateFormat-yyyyMM":"yyyy年MM月","Privilege-The_Authentication_Is_Not_Supported":"无法支持认证","Set_User_Type":"设置用户类型","Utils-Delete_Directory":"删除目录","Layout-Index":"索引","Add_Department_Failure":"部门添加失败，该部门名已被占用","FR-Background_Image_Default":"默认","DashBoard-LearnTutorial":"高手进阶  进入FineReport v6.5的学习教程","Short-Jan":"一","FormulaD-Most_Recently_Used":"常用函数","Form-EC-toolbar":"报表块工具栏","BiasD-Input_Slope_Line_text_separated_by_'|'":"输入斜线文字,以'|'分隔","GroupB-Summary_Columns":"汇总列","None":"无","FR-Designer_Close":"关闭","FS-Mobile-Select_Username":"选择用户名","BackgroundTexture-GreenMarble":"绿色大理石","Plugin-Memory_Alarm_Mode_Debug":"调试模式","FR-Chart-Map_Hebei":"河北","FS-System-Config_Backup_Frequency_Threemonths":"3月","FR-Engine_Sat":"六","Ean13_less_than_12":"输入位数不足，Ean13码需要输入12位字符，最后一位由系统自动生成。","Series_Dismenber_As_Single":"连续分隔符视为单个处理","Chart_SetInterval_Grid":"设置间隔背景和网格线背景","Export-Excel-Setting":"Excel导出方式设置","Priority":"优先级","Re-version-match":"版本号匹配","FR-Engine_FS_End_Date":"结束日期","Axis-Style-Option":"坐标轴选项","FR-Chart-Map_Taiyuan":"太原市","August":"八月","FR-Chart-Type_Funnel":"漏斗图","Copy":"复制","FR-Engine-Unload_Check_Msg":"有数据没有提交","WF-Auto_Task_Node":"自动任务节点","Form-Report":"报表块","FR-Engine_User":"用户","Animation_Special":"特效","StyleFormat-Time":"时间型","ExpandD-Top_to_Bottom":"从上向下","Save_As_Global_Style":"保存为全局格式","Hyperlink-Show_Menubar":"显示菜单栏","ChartF-PlansToBegin":"计划开始","FR-Engine_Parameter-String":"字符串","RP_Have_Come_To_You_For":"已经到你这里","Preview_Used_Time":"预览已用时间","FR-Designer_Song_TypeFace":"宋体","FR-Designer_Mobile-Warning":"最大高度不可超过显示区域的80%","Required":"必填","__FLASH_FIRSTPAGEMARK__":"Flash打印用途","FR-Designer-Basic_Copy_Activation_Key":"双击设计器编号可复制到剪贴板","More-information":"更多信息","INFO-Server_Started_Successfully":"成功启动服务器","M_Edit-Clear_All":"全部(A)","FR-Desinger-Plugin_Updater_Connect_VersionUpdateServer_Failed":"无法连接版本更新服务器","TemplatedatasourceSameWarning":"模板数据集中有数据集名字重复，请修改！","FS-Monitor-Free_Memory":"空闲内存","Selection-Foreground":"选中项前景色","FR-Server_Embedded_Server_Start":"內置的服务器-打开","CSS_Import_Description":"只能通过相对路径引用CSS: \n相对报表工程目录如WebReport, 如WebReport\\css下有引用的css文件test.css，则相对路径为css/test.css","FR-Chart-Bar3D_Chart":"三维柱形图","FR-Engine_ConditionB-does_not_in":"不包含于","Data":"数据","Date":"日期","FR-Engine-Sort_Ascending":"升序","Chart_Stock_Check_Data":"请检查您的数据!","FR-Basic_Week":"周","Second":"第二","Single":"一个","FR-Engine_Delete_Data":"删除数据","M_Format-Add_Row_After":"在后面添加行(D)","ispageBoxMemo":"勾选则纸张默认居中，取消勾选纸张默认居左","TableDismember":"制表符","Cross_Report_Wizard":"交叉报表向导","Dic-Set_Actual_Value_And_Display_Value":"设定实际值和显示值","New_name":"新名称","Actived":"活动的","Schedule-Frequency":"频率设定","FR-Chart-Map_Zhongxiqu":"中西区","Chart_Series_Separate":"系列分割","FR-Designer_AppFit_Hor":"APP横屏自适应","Utils-Data_consistency_check_successfully_Passed":"成功通过数据一致性检验","FormulaD-Valid_Script":"合法的脚本","FS-Report-Link_Address":"链接地址","Verify-Verify_Formula":"校验公式","Server_Data_Relations":"服务器数据集关系","Plugin-ChartF_NewBar":"条形图（新特性）","Import-Datasource_Files":"数据源文件","FR-Basic_OK":"确定","FR-Designer_Database":"数据库","BackgroundTexture-WaterDroplets":"水滴","PDF-Print_isPopup":"是否弹出设置框","FS-Generic-Flash_Print":"Flash打印","DBCP_TEST_ON_RETURN":"归还连接前检验","FS-System-Simple_LFU":"最不常使用","Line":"线条","FS-Msg-Invalid_Plugin_Zip_File":"无法安装! 无效的zip文件!","Note":"备注","FR-Hyperlink_Chart_Float":"图表超链-联动悬浮元素","Link":"链接","Utils-Group_Footer":"","Utils-Current_Column":"当前列","InsertBackward":"向后插入","FS-Generic-Face_View":"查看","Chart-Bubble_Size":"气泡大小","FR-Engine_Search_Role":"搜索角色","FR-Designer-Submit_Condition":"条件","October":"十月","Compile-Not_Support":"不支持动态编译","FR-Designer_Write-Save-Formula":"填报/分析时，保留公式用于计算","FR-Base-NS_Cell_Formula":"错误代码:1203 错误的公式参数","FR-Designer_XMLA_Explain":"在使用多维数据集取数前，您首先需要一个可成功连接的多维数据库连接。\n设置完数据连接后，查询数据时,有两种不同的取数手段。\n1.简单通用查询：\n简单通用查询适用于FineBI及其他多维数据库。\n使用简单通用查询，FR将自动读取选择cube的层次结构，您可以直接选择所需的度量值及维度，并添加筛选条件，FR会根据您的选择自动查询数据。\n简单通用查询仅支持维度及度量值两个轴的查询。\n在度量值及维度设置中，目前您只能选择所需维度，无法手动修改。\n过滤条件采用OPEN SQL语法，您可以键入${abc}作为一个参数，用法同数据库数据集。\n2.自定义MDX查询：\n使用自定义MDX查询，您可以自定义MDX语句查询所需结果。\n注意，自定义MDX查询也只支持两个轴的查询。\n您可键入${abc}做为一个参数，用法同数据库数据集。\nFineBI的cube不支持MDX查询。","Chart":"图表","FS-Generic-Simple_Actions":"任务","FR-Designer-Write_Auto_Stash":"自动暂存","FR-Base_Sche_Day":"日期","CellWrite-InsertRow_COPY":"原值","Printer-All_Printer_Groups":"所有打印机组","FS-Process-already_has":"已有","ComboCheckBox-Start_Symbol":"起始符","FR-Engine_Add_Role":"添加角色","FR-Engine_Tree":"折叠树","ExpandD-Expand_Cell":"扩展单元格","ChartF-Stock":"股价图","Remove_Selected_Button":"移除选中按钮","FR-Widget_Tree_And_Table":"控件树和控件表","FR-Designer_CardLayout":"Tab布局","Widget-Size":"控件大小","FS-User-Department_Position":"部门职务","HotHyperlink-Hot_Hyperlink":"热点链接","Chart_Area_Style":"面积样式","I-LineStyle_Line3D":"三维折线图","Import-Excel_Source":"Excel源文件","Plugin-ChartF_LogBaseValue":"对数刻度底数","M_Server-Function_Manager":"函数管理器","StyleAlignment-Distibuted":"分散对齐","Bottom_Border_Line":"下框线","FS-Monitor-Simple_Error_Message":"简单的出错信息","FR-Engine_Export-Offline-Html":"输出离线html报表","Server_Print":"服务器端打印","List":"列表","Plugin-ChartF_type":"类型","FR-Plugin-Jar_Expired":"Jar包过旧,插件安装失败:","Content-empty":" 内容将显示为空。","FS-Monitor-Options_Static":"操作统计","NanjingCity":"南京市","Guizhou":"贵州省","FR-Chart-Series_Gap":"系列间隔","AxisValue":"坐标轴值","SpecifiedG-Put_all_others_together":"把其它所有的合并","FR-Engine_Every":"每","Parameter_Query":"参数查询","ChartF-Range_Chart":"全距图","AttenchmentsByReceiver":"根据收件人不同生成不同附件","ChartF-Label_Interval":"标签间隔","FR-Engine-Selection_Filter":"条件筛选","Form-TextArea":"文本域","FR-Chart-Map_Qinghai":"青海","RWA-Skip_Unmodified":"值不改变不更新","LIC-Support_Remote_Design":"远程设计","FR-Engine_RP_Sponsor":"发起人","Chart-Use_Percent":"百分比","Utils-Would_you_like_to_save":"你是否需要保存","title":"标题","FR-Designer_Set_default_browser":"没有找到默认浏览器，请在Intenet选项中设置系统默认浏览器。","Column_Multiple":"数据倍数","TurnScreenVerticalToGetBestEffect":"请翻转屏幕，纵向显示效果更佳","Add_NewUser":"添加新用户","FS-Web-Plugin_Please_Update_Jar":"请更新jar包至","FR-Engine_TaskName":"任务名称","Certification_Type":"认证类型","FR-Engine_RP_Unlimited":"不限","FR-Engine_Tab_Layout_Title":"标题","Classpath-Add_Folder":"添加文件夹","DEFAULT":"默认","FS-Plugin-SysMonitor_Print_Times":"打印次数","LIC-Support_ADHOC":"即席报表","FR-Engine_Custom_FS_Process":"自定义流程匹配","Re-lock-serial":"加密狗序列号","ChartZoom":"图表缩放","FR-Desinger-Plugin_Updater_Latest_Version":"最新版本：","FR-Basic_Not_In_List":"值不在下拉列表内","Build-Way":"构建方式","ParameterD-DClick_New_Parameter":"双击新建参数","Plugin-Chart_TopDownShade":"渐变","FR-Designer_Button-Type":"按钮类型","FR-Designer_Title":"标题","DataFunction-Count":"个数","Even":"偶数","ChartF-MiddleLine":"中间线样式","Chart_Bubble":"气泡","M_Insert-Data_Column":"插入数据列","FS-Generic-Times_Sum":"次数","HTML-Write_Insert_Data_Failed":"数据插入失败","Exit_Tutorial":"退出教程","FS-Generic-Last_Day":"最后一天","FS-Report-Simple_Way":"方式","LIC-Support_Multi_Web_App":"服务器支持多个应用","Input-New_Name":"输入新名字","CellWrite-Editable":"可以编辑单元格内容","FS-Monitor-Log_View":"日志查看","data_configuration":"数据配置","Cache-Path-Setting":"缓存路径设置","Confirm":"确认","Schedule-Scheduled_Task_Manager":"定时任务管理器","FS-Generic-Manager_System":"管理系统","Parameter_Setting":"参数设置","BaiduMap":"百度地图","FR-Engine_Choose_All":"全选","FR-Chart-Style_Plane3D":"平面3D","Cache_Dir_File_Permission_Error":"文件无法读取或创建，请检查cache.xml下面的缓存目录访问权限","FR-mobile_analysis_style":"解析方式","FS-System-Basic_Description":"常规","Return-String":"返回字符串","Cell_Point":"单元格定位","FR-Engine_ConditionB-not_null":"不为空","FR-Engine_RP_Rollback_To":"回退到","ReportServerP-Toolbar":"工具栏","ChartF-Show_Percentages":"显示百分比","Want_To_New_Parameter":"是否想添加参数","Open_Synchronized_DataSet":"开启同步数据集","FR-Designer-FRFont_Underline":"下划线","M_Window-Previous_Window":"上一个窗口(P)","Present-Formula_Present":"公式形态","Error_WidgetNameRepeat":"已经存在","Expression":"表达式","Classpath-Add_Jar_to_Classpath":"添加Jar到Classpath","Procedure-Warning":"<html>当前存储过程不包含参数或您当前登录用户名与Schema不匹配，<br>系统无法为您自动加载参数，请手动添加<\/html>","Set_More":"详细设置","Group_Count":"表示总个数","Utils-Report-Env_Directory":"报表工作目录","Plugin-ChartF_Radar":"雷达图","Value_Percent":"值所占比例","DataFunction-None":"无","Plugin-ChartF_NewCustom_StackColumnLine":"堆积柱形图-折线图","M_Report-Report_Header":"报表页眉","I-RadarChartStyle_Fill":"填充雷达图","FR-Basic-File_Uploaded_File":"该文件已上传","Schedule-Select_Template":"选择模板","RP_Task_List":"任务列表","FR-Engine_Cancel":"取消","PageSetup-End_Row":"结束行","CellWrite-Show_Content":"显示内容","FS-Monitor-Not_Exist":"不存在","Value":"值","Web-WEB-INF_Directory":"","FR-Layout_Padding":"内边距","FR-Engine_NS_print_plugin":"错误代码:1201 当前浏览器未安装打印所需插件","Import-Unconverted_Formula":"不能转换的公式","WARNING-Fail_to_Delete_Cache_File":"删除本地缓存文件失败","FS-Report-Simple_BI":"添加BI","FR-Chart-Gantt_PlanTime":"计划时间","Needle Value":"指针对应的值","FR-Chart-Template_Preview":"预览","FS-Generic-Simple_January":"一月","ChartF-Original_Value":"原始值","FR-Engine_ConditionB-is_less_than":"小于","FR-Designer_Submmit_WClass":"后台类提交","ServerMenu_Privilege":"服务器权限菜单","M_Report-Formula_Parameter":"公式参数(P)","FR-Designer_Cancel":"取消","M_Insert-Shape_Rectangle":"矩形(R)","ChartF-Tick_Color":"刻度颜色","Transmission_Encryption":"传输加密","ThreeD_Column_Chart":"三维条形图","Display_Value":"显示值","Bottom_Margin":"下边距","FR-Chart-Action_Copy":"复制","Log_Declare_Head_Execute":"报表计算中","Error":"错误","FS-Plugin-SysMonitor_Export_Times":"导出次数","FS-CustomStyle_Toast_Add":"添加样式","Conditions_formula":"条件公式","AomenBandao":"澳门半岛","Corresponding_Fields":"对应字段","ChartF-PieSeperatePercent":"饼图分离程度","Plugin-ChartF_New":"新特性","Plugin-ChartF_UseLabel":"使用标签","XianCity":"西安市","FS-Monitor-Log_Clean":"清理","History":"历史","HF-Header_and_Footer":"眉头和眉脚","FR-Engine_Prospecting_File_Error":"勘错文件导出时发生错误","Measure":"度量值","Printer-Printer_Manager":"打印机管理","already_exists":"已经存在","Utils-Set_ClassPath":"设置Classpath路径","DashBoard-NoMoreReminder":"不再显示","Form-ComboBox":"下拉框","Recursion_Pane_Only":"此面板仅用于递归树结构的数据库表","FS-Reg-Mac_Address":"Mac地址","M_Insert-Image":"插入图片","Plugin-ChartF_Layer_Detail":"层级属性","FS-Plugin-SysMonitor_Module":"高级系统监控","Chart_Legend(Series)":"图例项(系列)","Please-Select-Float-E":"请选中要删除的悬浮元素","Plugin-ChartF_Save_Success":"保存成功","Chart-Link_Float":"图表超链-联动悬浮元素","FR-Designer_Widget":"控件","ExpandD-Push_Cell":"后推单元格","FR-Designer_Page-Setup-Scale-Units":"页面设置标尺单位","FR-Designer_Are_You_Sure_To_Delete_The_Data":"确定删除选中数据吗","FR-Desinger-Plugin_Updater_Upgrade":"升级","Key":"键","FS-System-Config_Backup":"备份","Save_All_Records_In_Memory":"所有记录都保存在内存中","Form-Component_Bounds":"控件边界","FR-Chart-Map_China":"中国","Chart-Category_Use_Name":"分类名称","March":"三月","FS-Privilege-Template_Edit":"报表编辑","Plugin-ChartF_Minus_Color":"值减少颜色","Dic-Database_Table":"数据库表","FS-Schedule-Output_Information_And_Archive":"通知与存档","HF-Insert_Parameter":"插入参数","FR-Basic_Current":"当前","Parameter_Name":"参数名","ChartF-Averge-To-Max-Color":"平均值到最大值区域颜色","Shanghai":"上海市","FR-Engine_Row":"行","Calendar":"日历","FR-Designer-Form-ToolBar_Chart":"图表","EDIT_REPORT_XML":"在线编辑报表内容传输","Chart-LatFirst":"纬度在前","Chart-Use_Data":"数据","FR-Designer_Background-Initial":"初始背景","FR-Designer_Show_Blank_Row":"补充空白行","FR-Engine_EssBase-database":"EssBase数据库","ChartF-Range":"范围","ReportServerP-Custom_Toolbar":"定制工具栏","Utils-No_File_Selected":"没有选择文件","FRFont-Subscript":"下标","FR-Chart-Types_Switch":"图表切换","Backup_Cpt":"备份模板","Export-Excel-Simple":"原样导出","FS-System-Config_Backup_Frequency_Onemonth":"1月","Excel":"Excel","Chart_Log":"对数拟合","LIC-Support_Predefined_Widget":"编辑器控件管理","FR-Chart_SecondGraduationUnit":"次要刻度单位","First":"首页","PageSetup-Footer":"页脚","FR-Designer_Month":"月","FR-Designer_Date":"日期","CellPage-Can_Break_On_Paginate":"分页时可以断开","Form-Hierarchy_Tree_Last":"上一个","FS-Generic-Simple_Name":"数据决策系统","FR-Chart-Map_Hainan":"海南","EX-Hierarchy_Analysis_is_not_Supported_in_this_Edition":"该版本不支持层次坐标解析","FS-Schedule-Simple_Times":"次","Row_Dimension":"行轴/维度","FR-Base-Load_Resource_File":"加载配置文件","Please_input_with_right_format":"请用正确的格式输入","PageSetup-Placement_Center_on_Page":"居中方式","FR-Designer_Data":"数据","Browser_Address":"浏览地址","LIC-Support_Frozen_View":"冻结表头","M_Edit-Delete":"删除(D)","FR-Designer_Copy":"复制","ChartF-Legend-Option":"图例选项","FR-Designer_file-is-locked":"您所要打开的报表正在被其他人编辑，请稍候打开","FR-Engine_ExecuteFrequency":"执行频率","FR-Engine_OK":"确定","Unit_Hundred":"百","FS-Web-Plugin_Read_Plugin_List_Error":"插件列表读取失败","FS-Report-Enter_File_Name":"请输入文件名称！","FS-Generic-Simple_Description":"描述","Vgap":"垂直间隙","FS-Monitor-Has_Error":"有错误","Depth_Style":"厚度设置","Print_Setting":"打印设置","Chart-StyleAlignment_Top":"靠上","not-found":"未发现","Preference-Custom":"自定义","ChartF-Axis_Scale":"坐标轴缩放","RWA-Des1":"重新刷新所有列名会清除当前记录","ThreeD_Bar_Chart_Horizontal":"三维柱形图(横向)","FR-Engine_Print":"打印","FlowLayout-Center":"中间","Chart-Use_None":"无","Utils-NewDemoEnv":"产品演示，将为您自动创建工作目录：","ChartF-Gantt":"甘特图","fileLocked_undeleted":"模板被锁定，不能删除！点击确定，刷新模板列表","FR-Base_Yes":"是","I-BarStyle_NormalStack":"堆积柱形图","Projection":"投影","M-Data_Analysis_Settings":"数据分析设置","FS-System-Visit_Times":"系统访问次数统计","FR-Designer_Gradient-Color":"渐变色","FR-Designer-StyleAlignment_Layout_Image_Titled":"平铺","FR-App-Report_Template":"报表模版","Datasource-Select_the_class_name":"选择程序数据源的类名","FS-Plugin-SysMonitor_Report_Name":"报表名称","FR-Designer_ComboBox":"下拉框","FR-Designer_Plugin_Normal_Update_From_Local":"从本地文件更新","FS-User-User_Limit_Tip_Right":"用户使用决策系统","Print-Print_To_Fit_Paper_Size":"根据纸张大小缩放打印","FR-Designer_None":"无","Form-Paste":"粘贴","Plugin-ChartF_Point":"点","FS-Reg-Lic_Upload_Success":"FineReport.lic上传成功, 请重启服务器后刷新本页面!","FR-Designer-Plugin_Finerest_Addon":"帆软应用中心=======","ChartF-Plot":"绘图区","DS-Convert_to_Private":"转为私有","FR-Chart-Type_Area":"面积图","FR-Engine-Send_Failed":"发送失败","Set_group_fields":"将报表中的信息分组","Title-Content":"标题内容","Sche-Day":"日期","FR-Engine_New_Name":"新的名称","Chart-Unit_Ten_Thousand":"万","FR-Designer_Build-Way":"构建方式","FR-Base_Short_Sep":"九","FS-Monitor-Error_Template":"发生错误的模板","roles_already_authority_edited":"已配置角色","Form-Method":"方法","EndValue":"结束值","Heilongjiang":"黑龙江省","FR-Engine_Add":"增加","FS-Setting-Image_With_Title":"图片+标题","These_Parameters haven't produced Widgets":"以下参数未生成","RP_To_Report":"待上报","FR-Engine-Condition_Greater_Than":"大于","FR-Engine_Last_Submit_Time":"上次提交时间","ChartFF-Line_Marker":"线标记","FS-Generic-Re_Multi_Privilege":"多级权限配置","Main_Value_Axis":"主值轴","Radio":"单选框","ChartF-Gis":"gis地图","FR-Designer_Report_Show_Location":"报表显示位置","FS-Generic-Most_Time_Restart":"尝试重新启动最多次数","FRFont-Superscript":"上标","FS-System-Cache_Reload_Template_Policy":"总是重新读取模板","FR-Engine_Is":"为","Event-aftertoimage":"导出图片后","FR-Engine_EssBase-TableData":"EssBase数据集","FR-Designer_Form_EmbeddedTD":"表单(内置数据)","ruleSet":"规则设置","Event-afterappend":"添加行后","Directory_Used_For_Text_Excel":"目录是应用于文本数据集和EXCEL数据集的文件夹目录，里面包含了普通文本或者EXCEL文件","ParameterD-Des1":"拖拽或者双击参数列表,往格子里面添加参数","Moment":"时刻","FR-Widget_Mobile_Tree":"控件树","FS-System-Email_Show_Full_Name":"显示姓名","Deploy-You_Could_Access":"您还可以由此进入","Tree":"树","FS-Monitor-Visit_Times":"访问次数","Client":"客户端","FR-Engine_Status":"状态:","Is_Paint_Page":"以图片方式显示","DS-Form_DataSource":"表单数据源","SQLWizard-add_having_condition":"增加HAVING条件","FR-Engine_Refresh_Successfully":"刷新成功","Background-Texture":"纹理","DashBoard-More":"更多...","Widget-User_Defined":"预定义","NS_register_lic":"错误代码:1206 当前配置目录下未发现注册文件","FR-Designer_CommaDismenber":"逗号","FS-Monitor-In_Detail":"具体","FS-Generic-M_Page_Preview":"分页预览","Basic":"基本","ReportColumns-Columns_Style_horizontally":"行分栏样式","FR-Engine_Enter-New-FileName":"请输入新的文件名","BiasD-From-lower_left_to_upper_right":"从左下到右上发散","FormulaD-Report":"报表函数","Image-Image_Layout":"图片布局","FS-System-Cache_Dataset_Share":"数据集共享","FR-Engine_RP_Task_Type":"任务类型","FR-Base_New-Title":"新建标题","FR-Chart-Stock_Low":"盘低","FR-Engine_Note":"备注","FS-System-FlashP_Default_Size":"默认根据纸张大小进行缩放","FS-Setting-Edit_Icon":"图标编辑","FS-Process-Name_Cannot_Be_Null":"名字不能为空","RP_Support_Offline":"支持离线填报","Parameter-Refresh_Parameter_UI":"刷新参数界面","Lower_LayerSet":"下层钻取设置","FS-Monitor-Log_Statistics":"对日志进行统计","Sort-Ascending":"升序","FR-Base_DecimalNumber_Out":"小数位过多","Lookup_Range":"查找范围","Privilege_Login_Name":"登录名","Desktop":"桌面","ConditionB-contains":"包含","ChartF-Volume-High-Low-Close":"成交量-盘高-盘低-收盘图","Utils-Print[Client]":"打印[客户端]","Offline-Verify_ToolTips":"提交校验中包含离线状态无法执行的校验规则，继续将忽略这些校验规则，但是在联网提交时会被重新执行，是否继续校验？","FR-Engine_PageSetup-Margin":"页边距","Area_Value":"区域值","Chart-Link_Dynamic_Parameters":"动态参数","Form-Please_Select_A_Kind_Of_Form_Container":"请选择一种表单容器","HJS-Specified_Pages":"指定页","Schedule-Task_Content":"任务内容","Verify_Fail":"校验失败","Utils-Resign_in":"重登录","PrintP-First":"首页(F)","ChartF-Custom_the_increment":"自定义增量","Database_Connection":"数据库连接","FR-Engine_KaiTi":"楷体","July":"七月","Not_Layer_Report":"非层式报表","Tree-ComboBox":"下拉树","BindCellD-Define_Value":"默认值","Status":"状态","Chart_Axis_IsVisible":"显示坐标轴","Set_Frozen_Cell":"设置冻结单元格","FR-Designer_Release_Lock":"解锁","Datasource-Rename_hibernate_datasource":"重命名Hibernate数据源","I-LineStyle_LineStack":"堆积折线图","FR-Chart-Map_Haikou":"海口市","FR-Designer_Button-Hotkeys":"快捷键","FR-Designer_Select_Export_Log_Directory":"选择导出目录","June":"六月","LayerPageReport_WN_DSColumn":"按页运算引擎只支持列表以及简单分组，其余属性功能均不支持","Form-Left_Align":"左对齐","FS-User-Unauthorized_Users":"未授权用户","FR-Engine_RP_Cpt_Operation":"模版操作","RP_Execute_Time":"执行时间","FR-Chart-Version_UpdateFail":"获取新版本失败","M-Print_Preview":"打印预览(V)","Compile_Success_And_Then_Save":"编译成功才能正确保存","FS-Mobile_Authorized_Users":"已授权用户","ChartF-Outline_Color":"外框颜色","Plugin-ChartF_NotFollowMouse":"不跟随鼠标","RP_Timing_Issue":"定时下发","FR-Chart-TimeSwitch_Global":"全部","FR-Chart-Designer_Preparing4Restart":"正在准备重启","Preference-Predefined":"预定义","Widget-TreeNode-Grade":"层级","Chart-LngLat":"经纬","FR-Export_Word":"Word格式","Light_Blue":"淡蓝","Privilege-No_Authentication":"没有认证","D-ChartArea":"图表区","Plugin-ChartF_Label_Format":"标签格式","Foreground":"前景","Please-Select-Cell-E":"请选中要删除的行","FS-Generic-Simple_Role":"角色","not_support_authority_edit":"该元素不支持权限控制","Korea_Language":"韩文","Form-Reset":"重置","FR-Base_Sche_Month":"月份","TableData":"数据集","FR-Base_Short_Apr":"四","Plugin-ChartF_Latitude":"纬度","FR-Engine-Excel_poi_2007":"错误代码:1207 导入Excel2007需要在lib目录下放置poi包","FR-Base_Sche_Thursday":"星期四","Top_Bottom_Border_Line":"上下框线","FS-Module-System_Monitor":"系统监控","FR-Engine_Start_Print":"开始打印","FS-Setting-Background_Color":"颜色","ChartF-Stock-Axis":"股价坐标轴","Plugin-ChartF_Rename_Repeat":"已存在,请重新命名","FS-Privilege-Digital_Sign_Key_Url":"数字签名密钥地址","FR-Basic_Email_Send_Error":"请检查邮件服务器配置，确认SMTP邮件服务器以及用户名密码和收件人地址填写正确，并确保网络畅通。","Fomr-NameWidget-Name":"预定义控件名称","Fuction-The_compiled_class_should_be_copied_to":"应将编译后的类文件拷贝到","FR-Engine_RP_Node_Description":"节点描述","FS-Plugin-SysMonitor_BackTo_PerformanceMonitor_SumTable":"返回性能监控总表","FlowLayout-Left":"左","FR-Designer-BBSLogin_Switch-Account":"切换账号","FR-Chart-Data_NotShowCate":"分类为空时,不显示该分类","FS-Admin-Can_not_find_Data_Connection":"找不到数据连接","Loading_Data":"正在加载数据","Background-Initial":"初始背景","FS-System-Visit_Time":"访问时间","DeciPart":"小数部分","DS-Class_TableData":"程序数据集","Home":"主页","Product_improve":"产品改良","FR-Chart-Map_Shandong":"山东","FR-Designer_File":"文件","FR-Engine_RP_Add_Process":"添加流程","FS-Admin-Please_Enter_Newpwd":"请设置新密码","HF-Page_Number":"页码","FR-Plugin_Fit-Element":"表格","Browser-Are_you_sure_to_delete_the_selected_browser":"你确实想删除选中的浏览器吗","Add_From_Report":"从报表添加","Previous":"上一步","Plugin-ChartF_AlertLeft":"居左","FR-Engine_Role_List":"角色列表","Chart-NotSupport_IMG&ReportData":"不支持图片形式和单元格数据源","FR-Chart-Module_Name":"图表","M-New_Multi_Report":"新建聚合报表(M)","FR-Desinger-Plugin_Updater_Please_Restart":"，请重启设计器","Form-Width_Des":"设置表单设计窗口的宽度","Config_Synchronized_DataSet":"配置同步数据集","WidgetDisplyPosition":"控件显示位置","Whether_Change_To_LayerReport":"是否转换成层式报表","FR-Chart-Format_Excel":"excel格式","FR-Designer_Event_ShowWidgets":"直接显示控件","FR-Menu-Server_Chart_PreStyle":"图表预定义配色","FS-Monitor-Visits_User":"用户访问次数","FR-Engine_RP_Review":"审核","FR-Designer_Bar-Code-Exception-Tip":"数据不能为空","TableData_Dynamic_Parameter_Setting":"动态参数注入","ChartData":"图表数据","FR-Engine-Print_Set_Printer_Offset":"打印机偏移","Ecp_Re":"请重新进行加密","ParameterD-Show_Parameter_Window":"显示参数窗体","FR-Engine_FrequencySet":"频率设置","FR-Designer_Yes":"是","FR-Designer-StyleAlignment_Right":"靠右","Chart_HighLightRelif":"高光浮雕","FS-System-Detail_Info":"详情","FR-Chart-Data_Series":"系列","FR-Engine_Schedule-Weekly":"每周","fs_initDragBar_title_tip":"拖拽左边图标至设计区域可以设计流程，设计区域默认有开始任务，鼠标移入任务时触发可拖拽点拖拽至其他任务的拖拽点即可新建分支。","Privilege-The_Request_Is_Not_Instanceof_HttpServletRequest":"该请求不是HTTP请求","FR-Designer_Check-for-Updates":"检查更新","Add_Department_Member":"添加部门人员","FR-Designer_IS_Auto_Scale":"iframe嵌入时自动缩放","FR-Chart-Data_NotShowSeries":"系列为空时,不显示该系列","Perspective Deep":"透视深度","ReportServerP-Previous":"上一页","Function-Choose_Function_Class":"选择函数类","FR-Designer_M-Insert":"插入","Style":"样式","NS_LayerReport_subreport":"错误代码:1109 行式引擎不支持子报表","Cpt_Backup":"加密前先进行模板备份","FS-Monitor-Log_Clean_Two_Months_Auto":"每隔两个月自动清理一次","select_path":"选择路径","Product_Demo":"产品演示","Feburary":"","FS-Generic-True_Run_Times":"正确的运行次数","Simple_general_forV6":"通用查询(适用于ECC 6以上版本)","FR-Engine_Page-Frozen":"分页冻结:","FS-Schedule-Output_Push_Content_Not_Null":"推送消息不能为空","NextToAxis":"轴旁","FR-Chart-Type_BaiduMap":"百度地图","Not_Found_Reportlet":"没有找到网络报表","Task":"任务","Chart_Pie_Click_Out":"弹出扇面","FR-Base_UnSignIn":"  未登录  ","FS-Mobile-Device_Bind":"设备绑定","FR-Engine_FS_Start_Time":"开始时间","DeepSeriesCap":"深度系列间距","LIC-Support_Privilege":"权限配置","FR-Designer_Length":"长度","FS-Process-Exclamation_mark":"！","FR-Designer_Subscript":"下标","croExpression4":"2013年第4季度每天19点50分","Sort":"排序","croExpression5":"每个工作日早上9点和晚上6点","FS-Generic-Simple_Save":"保存","Reset":"重置","croExpression1":"每月最后一天19点50分","croExpression2":"每月最后一个工作日19点50分","croExpression3":"每月第4个周五19点50分","FS-Admin-Password":"密 码","Login_Setting":"登录设置","ChartHyperlink":"图表超链","Plugin-ChartF_Index3":"层","Plugin-ChartF_Delete_Error":"删除失败","Plugin-ChartF_Index1":"第","Yunnan":"云南省","M_Insert-Rows":"行(R)","FS-Generic-Get_Uuid_Failed":"请以root身份运行web服务器","FS-Report-Choose_Data":"选择数据","Registration-Customize_Edition":"定制版","File":"文件","FS-Generic-M_Data_Analysis":"数据分析","FS-Generic-Simple_Report":"报表","FR-Report-Write_Attributes_Msg":"没有设置填报属性","Form-EC_toolbar":"报表块工具栏","Compile":"编译","GroupReport-Only_Display_Grand_Total_Function_At_Last_Page":"仅在最后一页显示总汇总的值","FR-Designer-Plugin_Shop_Need_Update":"插件商店有新版本,是否更新?","WLayout-Vertical-ToolTips":"垂直流式布局，该布局容器中可以添加多个其它组件，根据设定从上到下、或者居中分布","Tree-Width":"宽度","Return-Date":"返回日期","Form-Form_Element":"表单元素","FR-Engine_RP_Process_Select":"流程选择","Using_Server_Report_View_Settings":"采用服务器设置","Percent_Stacked_Column_Chart":"百分比堆积条形图","clickToCover":"已经被修改，是否覆盖？","FR-Base_Short_Aug":"八","WLayout-Horizontail-ToolTips":"水平流式布局，该布局容器中可以添加多个其它组件，根据设定从左到右、居中或者从右到左分布","HJS-Send_Failed":"发送失败","FR-Designer_PageSetup-mm":"毫米","FR-Designer_Import":"输入","Sheet":"工作表","open-new-form-tip":"当前模板为711以下版本制作，无法兼容，不能打开。假如想打开修改此表单，请使用对应版本设计器打开。","RWA-Batch_Modify_Cells":"批量修改单元格","FS-System-Email_Send_Failed":"邮件发送失败","FR-Designer_Layout":"布局","ThreeD_Stacked_Column_Chart":"三维堆积条形图","FS-Plugin-SysMonitor_BackTo_UserOp_SumTable":"返回用户行为汇总表","CellWrite-Repeat_Content_When_Paging":"分页断开时值重复显示","FR-Designer-StyleAlignment_Pane_Vertical":"垂直对齐","Plugin-ChartF_Animation":"动画","FS-Monitor-Simple_Suggestion":"修改建议","File_Description":"文件描述","Export_Set":"输出设置","StyleAlignment-Top":"靠上","Poly_Name":"聚合块名","Plugin-ChartF_NewCustom_Custom":"自定义组合","FRFont-Underline":"下划线","Weeks":"个星期","Hour":"小时","Plugin-ChartF_StackColumnTypeRadar_Title":"柱形雷达图","ChartDataLabelInside":"数据标签内","FR-Chart-CopyJS_Failed":"JS复制失败","Chart_Stock_Error":"股价图必须要有:","GroupTable":"分组表","FR-Engine_Print_Copy":"打印份数","RP_Operator":"操作人员","FS-Admin-Old_Password_Error":"旧密码输入有误","FR-Engine_Short-Jan":"一","Bubble-Series_Name":"系列名","LIST_MODE":"列表","FR-App-All_Custom":"自定义","Chart_Legend_IsRoundRect":"圆角边框","Rose_Red":"玫瑰红","Custom_FS_Process":"自定义流程匹配","CellWrite-Support_Smart_Insert":"支持智能插入行","FS-CustomStyle_Toast_SetStyle_Failed":"样式设置失败","Enable":"启用","Use_Global_Configuration":"使用的是全局配置","SQLWizard-select_all":"全选","Server_Flash":"需要Flash打印设置窗口","DS-Select_Data_Column_from_Left_Data_Tree":"从左边的数据树中选择数据列","FS-Process-WF-Process":"流程","Form-Same_Height":"等高","FS-Generic-Can_Not_Bigger":"不能大于","FS-Reg-Simple_Registration":"注册","FR-Engine_ConditionB-does_not_contain":"不包含","DBCP_MAX_ACTIVE":"最大活动连接数","Function-Function_has_Existed":"函数已经存在","FR-Designer-Plugin_Expire_Dialog_Title":"插件过期","Plugin-ChartF_Location_With_LongAndLat":"经纬度定位","FR-Background_Image_Adjust":"适应","FS-Generic-Parameter_Integer":"整型","FR-Action_Add":"增加","Widget-Load_By_Async":"异步加载","FS-Schedule-Simple_Unlimited":"无限期","Function-The_selected_file_must_end_with":"文件后缀必须是","Chart-Horizontal_TimeAxis":"水平(时间)轴","DashBoard-GuideAction":"报表预处理向导","FS-System-Config_Auto_Backup":"自动备份","Choose_Role":"权限控制","FR-Engine-Loading_Applet":"正在加载Applet","FS-Monitor-Log_Clean_Two_Months_Ago":"两个月前","September":"九月","Gradient_Right_Color":"渐变色右区域","FS-Schedule-Restart_With_Frequency":"如果任务中断按以下频率重新启动","Chart-AddSecondGrid":"添加次要网格线","ConditionB-Input_Condition_Parameter":"输入过滤条件的参数","FS-Generic-Simple_Email":"邮箱","FR-Engine_Can_not_find_Data_Connection":"找不到数据连接","FR-Engine_Previous_Node_Staff":"上节点人员","RP_Cpt_Name":"模板名称","Chart_ProjectID":"项目名","JavaScript":"JavaScript脚本","FS-CustomStyle_Toast_Tab":"信息提示","GuiyangCity":"贵阳市","FR-Designer_Form-Report":"报表块","FR-Engine_Report":"报表","RP_Unfinished_Task_Name":"未处理任务","LOG-Close_Session":"关闭Session","FR_Designer_Visible":"可见","FS-Schedule-Output_FTP_Port":"端口","FS-Msg_Warning":"警告","Chart_Clock_Type":"270度闹钟形","Please_Input_A_Effect_One":"请输入一个有效的参数名","Form-Split_Pane":"二分面板","FormulaD-Operations":"操作符","I-BarStyle_3DPercentageStack":"三维百分比堆积柱形图","Chart-OuterLight":"外发光","FormulaD-Script":"脚本","Plugin-ChartF_More_Label":"值变化动态提示","RP_Creator":"创建人","Henan":"河南省","FS-User_OK":"确    认","Select_The_Source_To_Save":"选择要存储的项目","Select_DataFields":"选择数据字段","ThreeD_Bar_Chart":"三维柱形图","Utils-Top_to_Bottom":"纵向","M_Server-Printer_Manager":"打印机管理器(P)","XMLA":"多维数据库","Break":"断开","Plugin-Memory_Alarm_Msg_Body_Clear_All_Session":"%时,清除所有会话","I-RadarChartStyle_FillwithMarkerLine":"数据点带线填充雷达图","FR-Plugin-Designer_Authorized":"授权:","DS-XML_TableData":"XML数据集","File-Allow_Upload_Files":"允许上传文件类型","File-tree":"文件树","ChartF-Other_Styles":"其他的样式","FS-Generic-Sche_Second":"秒","ChartF-High/Low":"盘高/盘低","FS-Frame-Enter_Entry_Name":"输入文字以检索模版","FR-Designer_Designer_Language":"设计器语言","FR-Engine_Loading":"正在加载","RCodeVersion":"版本","Plugin-Memory_Alarm_Interrupt_Percent":"已用内存百分比大于此值时报警(%):","Log":"日志","FR-Utils-Would_you_like_to_cover_the_current_file":"你希望覆盖当前文件吗","Definition":"定义","FR-Designer_Enabled":"可用","Registration-Input_Registration_Information":"输入注册信息","M_Format-Style":"样式","Low":"低","FRFont-bold":"加粗","Datasource-TabeData":"由TableData创建","FR-Designer-Form-ToolBar_Report":"报表","FS-Module-Simple_Register":"注册信息","FR-Base_Bottom":"下","KunmingCity":"昆明市","Select_FS_Roles":"选择平台角色","AxisInside":"轴内侧","Chart-Gis_LatLng":"经纬","ParameterD-Report_Parameter":"报表参数","FR-Designer_Create_Tree":"构建树","Designer-Preview":"设计器预览","QueryResult":"查询结果","Web_Preview_Port-Conflict-Message1":"内置服务器端口(","Cache-Max-Elements-In-Memory":"最大活动对象数","ReportServer-Frozen_Row":"冻结行","Web_Preview_Port-Conflict-Message2":")同您的其它端口发生冲突，请设置一个新端口以重启服务。","Title-Background":"标题背景","Chart-SVG_MAP":"地图","FR-Designer_LiteCondition_Common":"普通","FR-Chart-Value_Tick_And_Color":"刻度和配色","FR-Chart-Data_Max":"最大值","FR-Engine-Condition_Contains":"包含","MConfig-WebsiteURL":"公司网址","ChartF-Custom":"自定义图表","Utils-Are_you_sure_to_remove_the_selected_item":"你确实决定删除选中的项","FR-Engine_Parameter_Name":"参数名","wrong":"出错了","FR-Designer-Failed_to_load_the_plugin":"无法加载插件，请更新插件：","RWA-Click_Cell_To_Edit_Value":"单击模板单元格修改值","Plugin-ChartF_IntervalBackground":"间隔背景","FR-Engine_Edit_Role":"编辑角色","Widget-Widget_Config":"控件配置","plugin-ChartF_Radius":"圆角","N.O.":"第","CellWrite-Print_Export":"打印导出","Read_failure":"读取失败，可能源文件已损坏","Plugin-ChartF_Area":"区域","Plugin-ChartF_NewPie":"饼图（新特性）","FS-System-Settings_Button_Margin_Left":"55","Already_exist":"当前环境已存在:","FR-Desinger-Plugin_Updater_Version_Downloading":"正在等待升级包下载完成","Error_Template_File":"模板文件错误","BackgroundTexture-FishFossil":"鱼类化石","Plugin-ChartF_Hidden":"隐藏","Song_TypeFace":"宋体","Widget-Widget_Type":"控件类型名","Set_default_browser":"没有找到默认浏览器，请在Intenet选项中设置系统默认浏览器。","SQLWizard-deselect_all":"全不选","Not_Exist":"不存在","Utils-Should_select_a_template_first":"必须先选择一张模板","Plugin-ChartF_MultiPieChart":"多层饼图","Tree-Show_Root_Or_Not":"是否显示根节点","File-Des":"默认地址，一般无需改变，可以使用下拉的\u201c字符串\u201d选项来输入你想指定的文件上传地址","Please_Input_A_Widget_Name":"请输入控件名","FormulaD-Functions":"函数","RP_End":"结束","FR-Engine_Clean-Success":"内存清理成功, 释放内存:","FlowLayout":"流式布局","Plugin-ChartF_ValueLabel":"值标签","Compile_Failed":"编译失败","Hyperlink-Self":"在原网页中打开链接(S)","FR-Designer_M-SwitchWorkspace":"切换工作目录","Parameter_Name_Can_Not_Be_Empty":"参数名不能为空","FormulaD-Function_name":"函数名","Chart-Address_Name":"地址名称","FS-User-Sync_Dataset_Config_Tip":"您需要先使用设计器新建一个包含4类不同字段的服务器数据集","WF-Equal":"同级","Role_Name":"角色名","HTML-Report_Mail_Server":"报表邮件服务器","HJS-Server_Print":"服务器端打印","FS-System-Sign_Dongle":"加密锁注册","Number-Format":"数字格式","Preview":"预览","Select_Name_Column":"选择姓名对应列","FR-Chart-Gannt_PlanStartTime":"计划开始时间","Re-connect-to-remote-server":"服务器已关闭，是否重新连接服务器?","Today":"今天","FS-Generic-Simple_Printer":"打印机","Utils-No_Pagination":"不分页","FR-Designer_User-defined-MDX":"自定义MDX查询","Wizard":"向导","Utils-Switch_To_Template_Reportlet":"切换到模板网络报表","ADD_Department_Failure":"部门添加失败，该部门名已被占用！","FS-Report-Devices_Phone":"手机","Query":"查询","FR-Basic_Page_Number":"页","M_Insert-Text":"插入普通文本","Insert":"插入","NS_LayerReport_float":"错误代码:1105 行式引擎不支持悬浮元素","File_Upload":"文件上传","FS-Module-Simple_Scheduler":"定时调度","ReportColumns-Repeat_Row":"复制行序列","SQLWizard-join_expression":"联合表达式","Verify":"校验","FR-Designer_Plugin_Should_Update":"插件版本过低,需要升级","FR-App-All_File":"文件","INFO-End_Executing_Report":"完成报表计算","DashBoard-ConnectionList":"数据连接","FS-Plugin-SysMonitor_BackTo_TemplateFreq_SumTable":"返回模板热度总表","FR-Chart-Pie_ReCombinePie_Bar":"复合条饼图","ReportColumns-End_at_Row":"结束分栏行序号","M_Insert-Shape_Rounded_Rectangle":"圆角矩形(U)","FS-Generic-Simple_Mon":"一","FreezeWarning2":"请输入正整数！","Schedule-Report_File_Directory":"报表文件目录","FreezeWarning1":"初始值不大于尾值","FreezeWarning3":"请输入A-Z的字母","No-Privilege":"没有权限","M_Format-Remove_Column":"删除列(C)","Staff_Management_InDepartment":"机构部门内人员管理","BackgroundTexture-Cork":"软木塞","SpecifiedG-Group_Name":"组名","Datasource-JNDI_Name":"JNDI的名字","ChartF-DeleteSecondGrid":"删除次要网格线","FR-Base-Time_Hour":"小时","Plugin-ChartF_Radius":"半径","Chart-Gis_Address":"地址","FR-Engine_Day":"天","LanguageSetUp":"语言配置","Event-afterappletprint":"Applet打印后","FR-Designer-Basic_Copy_Build_NO_OK":"构建版本号已经复制到剪贴板","WorkBook":"工作簿","Platform_Module_DataSetting":"B/S设计器配置","FR-Chart-Type_XYScatter":"散点图","FR-Plugin-Plug_Expired":"插件已经超过授权期，插件ID是","try_resending":"请尝试重新发送","FS-Mobile-Unauth_Devices":"未授权设备","Widget-Role_Table_Tree":"角色表格树，该控件仅仅用在权限配置中","FR-Designer-Plugin_Disable":"禁用","FR-Engine-Decimal_Number_Out":"小数位过多","FR-Designer_Datatype":"数据类型","FR-Designer-Form-Please_Drag_ParaPane":"请拖入参数面板","Plugin-ChartF_Map_Area":"地图边界","FS-Plugin-SysMonitor_Cell_Analysis":"单元格分析","RWA-Class":"程序","LayerPageReport_WN_SIL":"按页运算引擎暂不支持Sheet间运算","FR-Basic-Email_Format":"格式","M_File-ExportT-Template(embedded_data)":"模板(内置数据)","mobile_number":"手机号码","LIC-Support_Global_Style":"报表全局样式","FR-Remote_Re_Connect_to_Server":"服务器已关闭，是否重新连接服务器?","JavaScript-Synch":"同步","__BYPAGESIZE__":"分页的时候按什么纸张大小分页","File-Denied_Upload_Files":"禁止上传文件类型","Edit_Analysis":"编辑分析","fs_process_p_tip":"注意：执行频率中的只执行一次和简单重复执行在任务开始时就会执行，而自定义重复执行则将在任务开始后根据其自身定义执行。","Plugin-ChartF_Gauge_Cuvette":"试管型仪表盘","FR-Engine_PageSetup-Predefined":"预定义","FS-Generic-HJS_Send_Failed":"发送失败","Jilin":"吉林省","FR-Designer_Preference-Function":"功能设置","Event-afterdelete":"删除行后","DBCP_NUM_TEST_PER_EVCTION_RUN":"空闲连接回收检查数","No_Advanced_Chart":"当前版本 无复杂统计图 此功能，请购买高级版本。","Set_Row_Title_End":"设置重复结尾行","FR-Designer_Web_Preview_Port":"端口号","FS-Generic-Self_Define_Class_Name":"自定义类名","Form-Form_Definition":"表单定义","FS-Report-Edit_Directory":"编辑目录","Plugin-ChartF_Rename_Error":"重命名失败","Remedy":"Remedy","FR-Engine_Verify-Message":"错误信息","Three_Rows_Of_Two_Grid":"三行两列的格子","StyleAlignment-Single_Line":"单行显示","FR-Engine_Short-Jun":"六","FR-Engine_Short-Jul":"七","Two_Rows_Of_Three_Grid":"两行三列的格子","FR-Engine-Sort_Sorting":"排序中","FR-Engine_Export-Excel-LargeData-Page-Info":"请耐心等待文件的生成，所花费的时间将视数据量的大小而定，在此过程中请勿关闭当前页面或浏览器。","FR-Engine-Cal_Calculating":"处理中","FS-Schedule-Task_Run_Info":"运行信息","DS-Database_TableData":"数据库数据集","FR-Designer_StyleAlignment-Wrap_Text":"自动换行","FR-Designer_Custom_Icon_Message2":"您的操作存在不合理之处。","FR-Designer_Custom_Icon_Message3":"图标名称已经存在。","FS-Setting-Add_Theme":"添加主题","FR-Designer_No":"否","FR-Designer_Custom_Icon_Message1":"建议使用16 × 16规格的PNG图片","FS-Generic-R_Code_Version":"版本","Upload-Select_a_File":"选择文件","Chart_RadarPlot_Should_Select_One_In_Line_Or_Marker_Or_Fill":"填充、折线和标记需要至少选择显示一个","FS-Generic-Cro_Expression_1":"每月最后一天19点50分","FS-Generic-Cro_Expression_2":"每月最后一个工作日19点50分","FS-Generic-Cro_Expression_3":"每月第4个周五19点50分","FR-Designer_Utils-OpenDemoEnv":"产品演示，需要自动切换至工作目录：","FS-Generic-Cro_Expression_4":"2013年第4季度每天19点50分","FS-Generic-Cro_Expression_5":"每个工作日早上9点和晚上6点","Model_Selection":"关联方式","Input_The_Name_Of_Gloabel_Style":"输入所保存的全局格式名称","Select_FS_Users":"选择平台用户","Server_PdfInstallPath":"Pdf安装文件路径","RWA-Smart_Add_Fields":"智能添加字段","Unit_Thousand":"千","FR-Chart-Map_Not_Supported":"您当前使用的lic不支持地图功能，请升级您的lic","Chart-Time_Seconds":"秒","Address":"地址","FR-Designer-Hyperlink_Name":"名字","HF-Even_Page":"偶数页","StyleAlignment-Wrap_Text":"自动换行","Privilege_Use_Privilege":"启用内置权限","The_Columns_Hava_Relations_Whether_Add":"检测到数据列之间有过滤关系，是否添加","Plugin-ChartF_Point_Map_Data":"点","FR-Designer_Mobile-Vertical":"竖屏","FR-Engine-Verify_Failed":"校验失败","Exit":"退出","Url_location":"绝对路径","User-defined-MDX":"自定义MDX查询","FR-Basic_Email_Send_Success":"邮件已发送","Plugin-ChartF_Create_Error":"新建失败","Calculating":"处理中","FS-Generic-Attach_File":"附件","Formula_Editor":"公式编辑器","Append_Delete_Row_Message":"注意！指定的单元格需要设置扩展属性","Application":"应用程序","Interval":"时间间隔","Form-Remove_Repeat":"去掉重复项","May":"五月","Max":"最大","Cancel":"取消","Plugin-ChartF_Gradual_Deep":"渐深","FS-Generic-You_Are_Using_Unregisted_Function":"错误代码:1116 您使用了未注册的功能","Upload":"上传","Two_rows_of_two_grid":"","Adaptive_Original_Scale":"自适应原样缩放","PendingVitureDirectiry":"挂载虚拟目录","Sign_In":"登录","FS-User_BackAndReset":"返回重新设置","FR-Hyperlink_ChartHyperlink":"图表超链","FR-Engine-Excel_Title_Match":"标题行匹配成功, 行号为:","FS-Monitor-Server_Max_Memory_Is":"当前服务器设置的最大内存为","Error_To_Create_Report_From":"生成报表时产生错误","EmailPane-mailSubject":"邮件标题","ExcelImportD-Excel_Source_File":"Excel 源文件列表","Datasource-Test_Connection":"测试连接","Form-SupportTag":"标签形式显示","FR-Designer_Form-List":"列表","InsertForward":"向前插入","Modify":"修改","StandardType":"标准类型","Des-Merger_Cell":"选择的区域包含多个数据，合并单元格后将只保留编辑过的所有单元格中最左上角的数值.","Server_Path":"主机位置","FR-Chart-Radar_Chart":"雷达图","FR-Chart-Custom_Van":"组合图(新特性)","MobilePhone":"手机","Preference-Export_Configuration_File":"导出配置文件","FS-Module-MobilePush_SureToOpenIGT":"确认使用个推？","BindColumn-Custom_Left_Father":"自定义左父格","FR-Utils_WorkBook":"工作簿","M-Edit":"编辑(E)","Layer-Sleep_Thread_For_Calculating":"休眠计算线程","Export-Excel-Page":"分页导出","FR-Engine_Tue":"二","Registration-Enterprise_Edition":"企业版","RP_Son_Task":"子任务","FS-System-Server_character_encoding":"服务器端字符编码","Chart_Meter_Field":"分段区域","FR-Designer-Layout_Adaptive_Layout":"自适应布局","ChartF-PercentageOfCompletion":"完成百分比","FS-Schedule-Execute_Condition_Always":"始终执行","FS-Generic-Simple_April":"四月","Confirm-Delete-File":"是否删除所选文件？","FR-Chart-Map_Map":"地图","Utils-switch":"\n您当前未被保存文件将被保存在当前目录下，\n是否继续？","Plugin-Memory_Alarm":"内存警报","FS-Generic-Simple_Successfully":"成功","Plugin-ChartF_Layer_Tree":"钻取层级关系","ChooseOneButton":"请选择一个控件后再添加","FS-Generic-Simple_May":"五月","ECP_error_same":"密码不能与原始密码相同","Fail_To_Select_A_Data_Field":"选取数据字段失败","Plugin-ChartF_Gauge_Pointer180_Title":"半指针仪表","M_Server-Global_Parameters":"全局参数","Chart-Title_Is_Visible":"标题可见","ParameterD-Interface":"界面","FR-Engine_Fit-None":"不自适应","Chart-Address-Name":"地址名称","FR-Designer_Widget_Scaling_Mode_Fixed":"固定大小","Plugin-ChartF_OpenAnimation":"开启动画","SQLWizard-add_expression":"增加表达式","FR-Engine_Parameter-Double":"双精度型","Original_Marked_Filed":"原始标记字段","Form-Text_File":"文本文件","FR-Chart-Curve_Line":"光滑曲线","Schedule-Task_Name":"任务名","LDAP_User":"LDAP用户","FR-Engine_Verifying":"校验中","ReportServerP-Add_Printer":"增加打印机","NS-war-remote":"错误代码:1117 压缩部署不支持远程设计","FS_Table_Del":"删除","FR-Engine_Import_Again":"重新导入","No-tableData":"没有返回数据集","FR-Designer_Corre_parameter":"对应参数","SingleTime":"次","Chart_Null_Value_Break":"断开","Schedule-Unspecified_Report_File_Save_Location":"未指定报表文件保存位置","RP_Rollback":"回退","FR-Engine_Custom_FS_Users":"自定义用户","FS-Plugin-SysMonitor_Total_Views":"总访问量","FR-Basic_Choose_None":"不选","No-Supported-File-Types":"不支持的文件类型","FR-Designer_TableDismember":"制表符","FR-Chart-Map_Shanghai":"上海市","HF-Default_Page":"默认页","ChartB-Change_Summary":"改变汇总","FS-Process-Import_Parameter":"导入","BackgroundTexture-PaperBag":"纸袋","SQLWizard-remove_entities":"删除所有的实体","plugin-ChartF_XYFromTheUpLeft":"距离图表左上角位置（%）","ReportServerP-Server_Printers":"服务器端的打印机","Close":"关闭","FS-System-Config_Manual_Backup":"手动备份","PageSetup-Finis_Start_Row":"重复结尾行","FR-Chart-Map_Wuhan":"武汉市","PieStyle":"饼状","FS-User-Http_Authentification":"Http认证","Subquery":"子查询","FR-Engine_getDataFromCache":"从共享数据集缓存中获取数据","FS-Setting-Default_HomePage":"默认首页","Select_the_repeated_row_and_column":"选择需要重复的行列","FR-Basic_Email":"邮件","confirm_server":"请确认服务器地址、端口、应用是否正确且服务器是否开启","Datasource-Column_Index":"列序号","FR-Designer-Widget-Title_border":"边框","Chart-Stock_Close":"收盘","Form-Design_Height":"设计高度","Convert":"转换","Remove_All_Button":"清除所有按钮","FR-Chart-Map_Saved":"地图已保存","Chart-Use_MSBold":"微软雅黑","KeyPoint":"关键节点","Bulletin":"公告","Widget-Default_Widget_Config":"基本控件","Report_Display":"报表展示","RP_Process_Created_By_Me":"我创建的流程","SQLWizard-select_expression":"select表达式","FR-Engine_Switch_Selected":"切换选中项","FS-Frame-Simple_Subscribe":"收藏","Face_View":"查看","Chart-Select_Data_Set":"选择数据集","FR-Engine-Reportlet_Net":"网络报表","Name":"名字","DataFunction-Max":"最大值","FR-Designer_ErrorHandlerTemplate":"出错模板定义","Pwd_Format":"6-16个字符，支持字母、数字","Successfully":"成功","Custom_Icon_SelectIcon":"选择图标","Server-version-tip-moreInfo":"建议您所属团队使用的我方FineReport产品的设计器版本号以及部署的服务器版本号保持一致，以避免版本不一致造成的问题风险。\n假如您打开更高设计器版本制作的模板，可能打开出错，也可能丢失原有模板属性。假如您制作的模板使用的设计器版本高于您最终部署所用的服务器版本，服务器可能无法正常载入您制作的模板。","Show_Content":"显示内容","PageSetup-End_Column":"结束列","Create_QRCode":"生成二维码","ChartF-MainAxis":"主坐标轴","FR-Basic_Time":"时间","FR-Designer_FormulaD-Text":"文本函数","Common":"普通","StyleAlignment-Multi_Line(Adjust_Font)":"多行显示(调整字体)","FS-System-Deploy_Type":"当前部署方式","ReportColumns-Report_Columns":"报表分栏","FR-Chart-Map_Baidu":"百度地图","HF-Insert_Date":"插入日期","FR-Designer_Component_Interval":"组件间隔","FR-Chart-Meter_Yuan":"元","NS_LayerReport_RowCol":"错误代码:1102 行式引擎不支持条件属性修改行高列宽","CellWrite-Append_Row(Used_in_Web_Write_Report)":"添加行(Web填报使用)","Plugin-ChartF_LargeDataModelPrompt":"(优化后会改变分类顺序但不会影响时间轴和值轴效果)","FR-Chart-Area_Title":"区域标题","Form-Hierarchy_Tree_Next":"下一个","Fill_blank_Data":"补充空白数据","PageSetup-Vertically":"垂直居中","FR-Engine_Custom_FS_Roles":"自定义角色","Plugin-Memory_Alarm_Row_Msg":"超出提示","FR-Chart-TimeUnit_Month":"月","FR-Designer_Function":"函数","FormulaD-Formula_Definition":"公式定义","FR-Engine_Top":"上","FR-Designer_Form-AuthorityEdited_Cannot_be_Supported":"暂不支持表单权限编辑","FS-Reg-Register_email":"请导出注册信息，通过邮件发送到","Mon":"一","FR-Designer_Please_input_with_right_format":"请用正确的格式输入","DS-Should_select_a_bind_column":"需要绑定一个数据列","Env-Local_Directory":"本地目录","FR-Background_Image":"图片","FS-System-Config_Delete_Backup":"删除","FR-Designer_XMLA_UserName":"用户名","NC-Des":"该容器应该包含北部和中部块","Performance-Monitor_Row_Over_Warning_Info":"很抱歉,数据量过大触发保护机制,请减少数据量或联系管理员","FR-Engine_FormPreview":"表单预览","FR-Chart-Pie_Van":"饼图(新特性)","Chart-Map":"地图","FR-Designer_Widget_Height":"控件高度","PageSetup-Paper_Size":"纸张大小","ReportD-Export_Hided_Row":"导出隐藏行","Widget-TreeNode":"树节点按钮","FR-Designer_Validate":"校验","SpecifiedG-Groups":"组","Chart_Line_Type":"折线线型","Utils-please_waiting":"请稍候","Utils-The_selected_reportlet_is_not_a_reportlet_,_":"您选择的文件不是报表模板，不能生成参数","SQLWizard-arrange_entities":"重新安排实体","Meter_Style_Set":"风格设置","FR-App-File_Lookup_range":"查找范围","I-RadarChartStyle_Line":"带线雷达图","Card":"卡片","RP_Finished_Task":"已处理任务","FR-Base_Table":"表","Chart_Linear":"线性拟合","FR-Designer_Row_Dimension":"行轴/维度","ECP-error_pwd":"密码错误","Not_limited_IP":"不限并发","Utils-Add_Column":"添加列","FS_Start_Time":"开始时间","BS-Design":"B/S全局配置","FR-Designer_Product_improve":"产品改良","Level":"级","FR-Engine_Thu":"四","FS-Setting-Login_Page":"登录页","Browser":"浏览器","FS-Schedule-Remove_Task":"删除任务","FR-Chart-Map_Guiyang":"贵阳市","FS-Report-File_Name":"文件名称","Form-Widget_Property":"属性名","FR-Base_Column":"列","FS-Setting-Edit_Home_Page":"编辑首页","Utils-Only_Rename_File_Under_Reportlets":"仅重命名在reportlets目录下的文件","Sichuan":"四川省","More":"更多","FS-Generic-Simple_Alert":"警告","FS-Setting-Login_URL_Detail":"网页URL","Utils-Click_the_left_plus_button_to_add_tree_node":"点击左边的加号来添加树节点","ReportServerP-Are_you_sure_to_delete_the_selected_printer":"你确实想删除选中的打印机吗","FR-Engine_Add_Task":"添加任务","FR-Engine_Re-Multi-privilege":"多级权限配置","CellWrite-Page_After_Column":"列后分页","FS-BI-Dezi_New_Report":"新建分析","FR-Designer_XMLA":"多维数据库","Face_Write":"填报","IntPart":"整数部分","Plugin-Memory_Alarm_Mode":"模式","DoSelectUser":"请选择用户","Plugin-ChartF_PaneBackground":"底盘背景","FS-Monitor-Visitor_IP":"访问用户IP","World":"世界","Sub_Report_ToolTips":"子报表提示","DataFunction-Min":"最小值","Utils-Submit":"提交","Line-Style":"线型","Not_Imported":"尚未导入","FS-Schedule-End_Date":"到","FR-Designer_Query":"查询","Form-Action":"操作","DS-TableData":"数据集","FR-Designer-BBSLogin_Register-Account":"注册账号","FS-Monitor_Export_To_DB":"输出至数据库","M-New_WorkBook":"新建工作簿","Utils-Rename_Column":"重命名列","Period":"句号","FR-Engine_Parameter-Formula":"公式","Utils-You_will_rename_the_following_file":"你要重命名如下文件","FR-Chart-Map_Xinjiang":"新疆维吾尔族自治区","Function-The_class_must_implement_the_interface":"该类必须实现接口","Datasource-Key":"键值","FS-Web-Plugin_Illegal_Plugin_Zip_Cannot_Be_Install":"无法安装! 无效的zip文件!","Widget-Height":"控件高度","I-AreaStyle_Normal_3D":"三维面积图","Add_Role":"添加角色","FR-Designer_Is_Paint_Page":"以图片方式显示","FR-Chart_Custom-Map":"自定义地图","Plugin-ChartF_Collapse":"收缩于抽屉菜单内","FR-Engine_Offline_Html_Browser":"如果您未安装其他浏览器，推荐您使用","Favorite":"收藏夹","Level_coordinates":"层次坐标","ChartF-Min-To-Average-Color":"最小值到平均值区域颜色","FR-Engine_Institution":"机构部门","M_Report-Report_Background":"纸张背景","ChartF-Closing":"收盘","FR-Designer_VerticalBoxLayout":"垂直盒子布局","FS-Frame-Close_Other_Tabs":"关闭其他标签","PageSetup-Landscape":"横向","Variables":"变量","ExpandD-Child_Cell_Follows_Father_Cell_to_Expand":"子格跟随父格扩展","FR-Chart-Type_Bar":"条形图","Schedule-Reportlet_Info":"网络报表信息","FR-Engine_Ssas-database":"SSAS数据库","Docking-Float":"浮动","Plugin-Memory_Alarm_Time_Check":"检测时间","FS-Report-Directory_Management":"目录管理","FR-Designer_Choose_Language":"语言选择","SQLWizard-distinct":"消除重复行","Total":"总共","DataBinding":"数据绑定","StyleAlignment-Left":"靠左","FR-Designer_Fit-Attr":"浏览器自适应属性","Widget-Chart_Widget_Config":"图表控件","SecondGraduationUnit":"次要刻度单位","Export-SVG":"SVG格式","Plugin-ChartF_StackAndSeries":"堆积和坐标轴","Hyperlink-Email_cannot_be_null":"Email不能为空","FR-Designer_Get_Lock":"加锁","Hyperlink-Show_Toolbar":"显示工具栏","__PI__":"是否显示参数界面","FR-Designer_COMMUNITY_BBS":"帆软论坛","Short-Feb":"二","Choose_All":"全选","WLayout-Absolute-ToolTips":"自由式布局，可以在布局内任意位置添加控件","Report_Designer":"报表设计器","Plugin-ChartF_ExportImage":"导出图片","NS_print_flashPaperSetting":"错误代码:1118 Flash打印不支持将页面设置传递给打印机","ConditionB-is_greater_than":"大于","FR-Designer_Fit_Horizontal_Vertical":"双向自适应","Chart-Unit":"单位","Form-Split_Vertical":"垂直分割","FS-Setting-Config_File_Detection":"配置文件检测","Already_End":"已结束","Web_Preview_Port":"端口号","DS-No_Dictionary":"没有数据字典","Deploy-Success_Info":"看到此页面，说明您已经成功部署了报表服务器","LOG-Report_Server_IS_Started":"报表服务器已启动","Utils-Display_Value":"显示值","FR-Designer_Advanced":"高级","FS-Report-RP_ProcessMgr":"上报流程管理","Schedule-The_selected_file_must_be_end_with_filter":"选择的文件必须以.cpt或者.class或者.frm结尾。","FR-Designer_product_feedback":"产品反馈","Show Home Page":"显示主页","ChartF-Fill":"填充","FS-Report-Input_Link_Name":"请输入链接名字","FR-Engine_CSV-Export":"导出CSV","Plugin-Memory_Alarm_Life_Cycle":"生命周期","FR-App-Template_Report_Not_Exist":"所选报表不存在!","Task_List_Chosen":"已选任务列表","FR-Chart-Data_Average":"平均值","Chart-Series_Name":"系列名","BackgroundTexture-Denim":"斜纹布","FR-Engine_Cannot_Set_Duplicate_Role_Name":"不能设置重复的角色名","StyleFormat-Text":"文本型","Chart_Bubble_Size":"气泡大小","FR-Chart-Pre_Defined":"已定义","FS-Monitor_Show_In_Console":"打印至控制台","long_data_can_not_show_fully":"长数据显示不全","XML_File_Cannot_Be_Resolved":"xml文件无法解析","Schedule-Defined_Tasks":"定义的任务","Plugin-ChartF_Axis":"坐标轴","Line-Color":"线条颜色","Plugin-ChartF_InnerRadius":"内径占比","This_Name_Has_Exsit":"这个名字已经存在","M-Design_Report":"设计报表(D)","Merge":"合并","RP_Sponsor":"发起人","Event-click":"点击","Relationship":"关联","LIC-Support_Performce_Optimise":"性能调优","JavaScript-Commit_to_Database":"提交入库","FR-Engine_RP_AllProcesses":"所有流程","Error_Input_Value":"错误的输入值","Quarter":"季度","Add_Task":"添加任务","FR-Desinger-Plugin_Updater_Version_Restore":"版本还原","FR-Chart-Map_Jinan":"济南市","ReportServerP-Next":"下一页","FS-System-Simple_FIFO":"先进先出","Event-afterload":"加载结束","FR-Chart-Style_TopDownShade":"上下渐变","FR-Engine_AppletPrint":"Applet打印","Sche-Minute":"分","Plugin-ChartF_Radar_X_Axis":"极角轴","FR-Designer_Plugin_Normal_Update":"更新","IS_TD_HEAVY_EXPORT":"重方式输出格子","ReportServerP-ms":"毫秒","FR-Chart-Password_Error":"密码错误","ChartF-CIRCLE":"圆形","Add_From_Server":"从服务器添加","About":"关于","Platform_Module_Log":"日志","FR-Designer_AppFit_Ver":"APP竖屏自适应","Bottom":"下","M_File-Export-CSV":"CSV格式(逗号分隔)","Icon":"图标","M-Exit":"退出","Above":"以上版本","FR-Engine_Chart-Map":"地图","Stacked_Column_Chart":"堆积条形图","FR-Engine_Delete_Role":"删除角色","FR-Designer_Width":"宽","PageSetup-Header":"页眉","Des-Show_private_data_dialog_when_creating_new_worksheet":"每次新建自由报表时显示私有数据对话框","Plugin-ChartF_At_Least_One_Chart":"至少选择一种图表","Background-Background_is_NULL":"没有背景","Class_Processor":"类处理器","FS-User-Department_Name":"部门名称","MobilePad":"平板","FS-Generic-Fail_And_Restart":"任务重启","FR-Designer-Collect_OSXTips":"小提示：请按control+v来粘贴激活码","Event_Name_Type":"事件名字和类型","Hunan":"湖南省","Plugin-Memory_Alarm_Live_Time_Exp":"系统根据【检测时间】定时检测,如果某个会话的更新时间加上【超时时间】\n小于当前时间，那么就从会话池中移除;\n另外会话达到【存活时间】后会被强行移除。\n存活时间：会话从创建到被移除的时间\n检测时间：定时检测会话\n超时时间：配合检测时间，共同决定会话生死\n心跳：是否发送心跳，每发送一次心跳,对应的会话的更新时间就会更新为\n当前时间","Plugin-ChartF_SecType":"次要刻度单位","Printer-Printer_Group":"打印机组","Allow":"进入","User-defined":"自定义","FR-Designer_ToolBar_Bottom":"底部工具栏","Hyperlink-Choose":"选择(C)","BackgroundTexture-WovenMat":"编织物","Jiangsu":"江苏省","FR-Designer-Widget-Style_Standard":"标准","Chart-Address":"地址","I-xyScatterStyle_Marker":"散点图","FR-Designer_Setting-Ruler-Units":"标尺单位设置","Cache-Book-Parameters-Setting":"内存缓存属性设置","HF-Insert_Number_of_Page":"插入总页数","FormulaD-Other":"其它函数","BorderLayout-West":"西","alraedy_close":"已经关闭","FS-Plugin-SysMonitor_Total_Op_Times":"总操作次数","FS-Module-Report_Manager":"报表管理","RP_Remove_Task":"删除任务","FR-Engine_Excel-Import":"Excel导入","Title-Format":"标题格式","period":"。","Chart_BarSpacePecent":"柱宽百分比","FS-Generic-Memory_Usage":"内存使用情况","ConditionB-does_not_contain":"不包含","Deep":"深度","FS-Admin-Full_Name":"姓名","You_Choose_An_Empty_Directory":"你所选目录是空的","ChartF-ProjectID":"项目ID","Chart_Alert_Bottom":"居下","Form-View_Tree":"视图树","FS-Msg_Enable":"插件已被启用,重启服务器后生效","Chart_Axis_UnitCount":"统一计算","Plugin-ChartF_Open":"开启","is_need_word_adjust":"不固定行高导出","FR-Designer_Hide":"隐藏","ChartF-Title":"标题","FS_End_Time":"结束时间","FS_Task_Start":"任务开始后","Means":"表示","Pause":"暂停","FR-Basic_Email_Send_Failed":"邮件发送失败","Host_ Name":"主机名","FS-Plugin-SysMonitor_Report_Info":"报表信息","PrintP-Next":"下一页(N)","FR-Chart-Map_Field":"字段","template_unopened":"无法打开模板","Plugin-ChartF_New_Chart":"图表(新特性)","FR-Designer_Layout-Index":"索引","REPORTLET":"访问模板的路径的参数。","FR-Utils-New_Folder":"新建文件夹","Function_Detail":"函数明细","CellElement-Property_Table":"单元格属性表","FR-Engine_RP_Process_Name_Not_Null":"流程名称不能为空","FR-Chart-Data_Edit":"编辑","FS-Reg-Lic_Upload_Failed":"FineReport.lic上传失败, 请重试或联系我们!","FR-Designer_PageSetup-Vertically":"垂直居中","FailAndRestart":"任务重启","HighLight":"高光","FR-Server_Embedded_Server_Stop":"內置的服务器-停止","Already_Pause":"已暂停","FR-Designer_New_Value":"新值","DS-Select_Data_Column":"选择数据列","BI_Global_Config":"BI全局配置","Chart-Gantt_Error_Check":"请检查您的数据","StyleFormat-Currency":"货币","Number-Max_Int_Length":"最大整数长度","Chart-Map-Key":"地图对应值","BindColumn-Summary":"汇总","RP_Process_Name_Not_Null":"流程名称不能为空","Datasource-Convert_Charset":"编码转换","New":"新建","Chart-Summary_Method":"汇总方式","Widget-Form_Widget_Container":"表单容器","FR-Designer_Preview":"预览","Send-Email_Schedule_Action":"定时发送邮件","FS-User-Builtin_Authentification":"平台内置认证","CUSTOM_MODE":"自定义分组","FS-Web-Error_Cannot_Delete_In_Jetty":"内置的jetty服务器不支持删除插件,建议使用设计器插件管理来管理插件.","FR-Chart-XY_Van":"散点图(新特性)","HJS-Range":"范围","IS_Auto_Scale":"iframe嵌入时自动缩放","NS_cell_formula":"错误代码:1203 错误的公式参数","FRFont-Size":"大小","Plugin-ChartF_Outside":"外侧","FS-System-Settings_Button_Width":"50","Plugin-ChartF_Fixed":"固定","FR-Designer_LiteCondition_Common_Condition":"普通条件","Connect_SQL_Cannot_Null":"数据连接和SQL面板不能为空","FS-User-Delete_User":"删除用户","Chart_Line_Style":"折线样式","ExpandD-Up_Father_Cell":"上父格","Sure_To_Leave":"你确定要离开吗","Reinstate_Report":"恢复成非层式报表","Printer-Rename_Printer_Group":"重命名打印机组","Forecast":"预测","ChartF-Open-High-Low-Close":"开盘-盘高-盘低-收盘图","FR-Engine_PageSetup-Paper_Size":"纸张大小","Display-Style":"报表展示样式","WF-Assigned_User":"指定用户","ChartF-Start_Value":"起始值","Plugin-ChartF_NewGauge":"仪表盘（新特性）","Nation":"国家","FS-Monitor-Templet_Active_Days":"生命天数","FS-Setting-Home_Page":"首页","Delete_Data":"删除数据","JS_WARNING2":"  例：http://localhost:8075/WebReport/demo.js","PageSetup-Title_Start_Row":"重复标题行","Chart-Unit_Ten_Million":"千万","FS-Generic-Simple_Address":"地址","M_Format-Add_Row_at":"添加行","JS_WARNING1":"  相对报表工程目录如WebReport,如WebReport\\js下有引用的js文件test.js，则相对路径为js/test.js","FS-Schedule-Prepare_Expression":"预置表达式","Docking-Aggregate":"聚合","Allow_To_Upload_Contains":"允许上传的文件包括","Platform_Module_PostManager":"公告管理","FS-System-Applet_Need_Settings":"需要Applet打印机属性设置窗口","ConditionB-is_less_than":"小于","Utils-Repeat_ReportFooter":"重复表脚","M-New_FormBook":"新建表单","VisitTime":"访问时间","Plugin-ChartF_MainGraduationLine":"主要刻度线","FS-Plugin-SysMonitor_From":"从","FR-Designer-BBSLogin_Login-Title":"论坛账号登陆","Mobile_Widget_Table":"移动端控件列表","Err-The_value_must_be_integer":"必须为整数","FR-Engine_Modify_Schedule-Task_Name":"修改任务名称","Function-Rename_Function":"重命名函数","Preference-JDK_Home":"JDK路径","Ecp_Pwd_Short":"密码长度过短","FR-Designer_Fit-Template":"模板自适应属性","Main_Axis":"主坐标轴","Chart_Alert_Top":"居上","FS-Web-Plugin_Has_Been_Installed":"该插件已安装","HF-Insert_Page_Number":"插入页码","FR-Engine_Cluster-Member":"集群节点机器","FS-Generic-Simple_Server":"服务器","FR-Engine_Cluster-Leader":"集群主机","Highlight-Choose_Property_To_Modify":"选择要改变的属性","Chart_Float":"图表超链-联动悬浮元素","Sytle-FRFont":"字体","FR-Engine_Excel_by_location":"Excel导入, 开始位置匹配","FR-Import-Export_SVG":"SVG格式","Printer-Set_Alias":"设置别名","FR-Basic-Email_From":"发件人","ChartF-Range_of_RangeAxis":"坐标轴值范围","FR-Engine-Type_Number":"数字","FS-Schedule-Step3_Label_Width":"100","FR-Designer_Record-Number":"记录数","ECP_error_input":"密码格式不符","Form-Comma":"逗号","Form-Desin_Width":"设计宽度","Registration-Professional_Edition":"专业版","ChartF-Needle_Color":"指针颜色","Series_Name":"系列名","HyperLink_Must_Alone_Reset":"多个超链","First_Of_Week":"为周起始","INFO-Start_Converting_ReportPage_To_Html":"开始转报表页为Html","FS-Generic-Simple_Mail":"邮件","ReportD-Html_Export":"报表HTML导出属性","Attribute":"属性","FR-Designer_COMMUNITY":"社区","FR-Designer_RichText":"插入富文本","FR-Designer-Plugin_Load_Plugins_From_Server":"正在从插件商店获取数据","JS_Import_Description":"如果通过相对路径引用js: \n相对于报表工程目录如WebReport, 如WebReport\\js下有引用的js文件test.js，则相对路径为js/test.js;\n如果通过绝对路径引用js:\n示例:D:\\tomcat\\webapps\\WebReport\\WEB-INF\\scripts\\script.js","FS-Generic-APP_LAUNCHING":"APP启动画面","InRow":"行(R)","RWA-Row_Offset":"行偏移","FR-Designer_Button-OK":"知道了","Error_TableDataNameRepeat":"已经在服务器数据集中存在或者多个数据集名重复。","FR-Engine-Type_String":"字符串","LayerPageReport_Define_PageQuerySQL":"定义分页查询sql","Chart-Lat_First":"纬度在前","FR-Designer-Output_Default_Background":"默认背景","CellWrite-InsertRow_NULL":"空值","FR-Module_Designer":"设计器模块","CountStyle":"计算方式","FR-Chart-Map_Title":"标题","FR-Designer_Current_keys":"当前快捷键：","Utils-Group_Header":"","Select":"选择","DateFormat-yyyyMMdd":"yyyy年MM月dd日","M_Report-Bind_Data":"绑定数据(B)","Managed":"可管理","Please_Install":"请安装","FS-Privilege-Simple_Authorize":"授权","Build_Tree_Accord_Parent_Marked_Filed":"依赖所选数据集的父标记字段构建树","Utils-Set_Default_Database":"设为默认数据库","FS-Schedule-Output_FTP_Address":"服务器地址","The_current_list_is_empty":"当前列表为空","FS-User-Simple_Management":"用户管理","M_Help-Demo":"示例(D)","Privilege_Allocate":"权限分配","Schema":"主题","Import-Save":"保存到目录","FR-Chart-Title_NewTitle":"新建图表标题","Plugin-ChartF_NewScatter":"散点图（新特性）","FS-Schedule-Operation_Monitoring":"运行监控","Remember-Username_And_Password":"记住用户名和密码","FR-Engine_Create-Destory-Session":"本阶段创建/销毁Session数:","data_import":"数据导入","FS_Table_Edit":"编辑","FR-Designer_IS_TD_HEAVY_EXPORT":"重方式输出格子","FR-Designer_Vertical-RightToLeft":"文字竖排(从右向左)","Datasource-Param_DES":"<html>&nbsp;您可以键入\"${abc}\"做为一个参数，这里abc是参数的名称。例如：<br/>&nbsp;select * from table where id=${abc}。<br/>&nbsp;select * from table where id='${abc}'。(如果id字段为字符串类型)<\/html>","IDCard":"身份证","FR-Designer_LiteCondition_Formula":"公式","FR-Module_Engine":"引擎模块","FR-Chart-App_Update":"更新","FR-Engine_FS_BI":"决策平台","I-LineStyle_LineStackWithMarker":"堆积数据点折线图","FS-Msg_Install":"插件将在重启服务器后被启用","FR-Designer_Export_Setting":"导出配置","ECP_decode":"模板解密","M_Edit-Free_Ajust_Size":"自由调整尺寸(S)","FR-Designer_Start-Date":"起始日期","Specify":"指定","Chart_Set_Data_Sheet":"设置数据表","Des-Would_you_like_to_cover_the_current_file":"是否要覆盖当前文件","FS-Generic-Simple_Expression_Not_Null":"自定义表达式不能为空","ConditionB-AND":"与(AND)","M-Excel_File":"Excel文件(E)","FR-Engine_Fri":"五","Chart_TrendLine_Forward":"前推","Plugin-ChartF_AlertRight":"居右","DS-Define_Semantic":"定义语义层","Chart-Data_Filter":"数据筛选","Print_As_Image":"以图片方式打印( 针式打印机推荐使用 )","Event-stopedit":"编辑结束","Rotation":"旋转","View_Combo":"下拉视图","Rename":"重命名","Indent-Indentation_Unit":"缩进单位","FR-Designer_Chart_Cell":"图表超链-联动单元格","DashBoard-FormBook":"表单","FR-Designer_Delete":"删除","Datasource-Connection_failed":"连接失败","Template-Design":"模板设计","PageSetup-First_Page_Number":"起始页码","I-LineStyle_LinePercentageStackMarker":"百分比堆积数据点折线图","Form-TableTree":"表格树","Choose_to_generate_file_displayed_in_the_virtual_directory":"选择生成文件显示在的虚拟目录","ChartF-Tick_Marker_Type":"刻度类型","FR-Desinger-Plugin_Updater_UpdateAndUpgrade":"更新升级","schedule_email_notice_tip_second":"中的","PageURL":"网页URL","Comfirm_To_Save":"确认保存","FR-Designer_RWA-Help":"设置未修改不更新后，填报预览报表，记录所在单元格没有被编辑修改，则此记录不会进行更新；\n在大数据量记录查询并回填情况下，启用该设置，可以提高填报提交性能。","ChartF_Alert":"警戒","Plugin-ChartF_Section_Config":"区间配置","SelfDefineClassName":"自定义类名","Restore-Default":"恢复默认","JinanCity":"济南市","FR-Engine_Export-Excel-PageToSheet":"分页分Sheet导出","FS-Setting-Edit_Directory_Icon":"编辑目录图标","FS-Report-Analysis_Name":"分析名称","Role_Information":"角色信息","FR-Engine_RP_Report_Deadline":"填报时限","Plugin-ChartF_AlertText":"提示文字","Chart-Value_Percent":"值所占比例","FS-System-Config_Backup_Every":"每隔","Report_Not_Exist":"所选报表不存在！","Role_Source":"角色来源","FR-Plugin_Local":"本模板配置","FR-Designer_ConditionB-OR":"或(OR)","Enter_Pwd_Ecp":"请输入密码进行加密","Style-Spacing_After":"段后","REDIRECT_FROM":"权限跳转FROM的URL","Plugin-ChartF_PercentLabel":"百分比标签","Current":"当前","RP_Reach_Node":"到达该节点","FR-Engine_ConditionB-does_not_equal_to":"不等于","Chart_Title":"新建图表标题","Set_Chart_Style":"设置图表区格式","Export-CSV":"CSV格式(逗号分隔)","FS-Privilege-Role_Name_Exists":"角色名已存在","FR-Designer_Form-Button":"按钮","Printer-Rename_Printer":"重命名打印机","FR-Engine_Excel_not_found_start":"未发现Excel导入起始行列","Chart_Float_chart":"图表超链-悬浮窗图表","Cache-Policy":"缓存策略","FS-Generic-Activated_Printer":"需要激活的打印机","Plugin-ChartF_Formula":"公式","__SINGLESHEET__":"是否单页显示","FR-Engine_Delete":"删除","FS-System-PDFP_Need_Settings":"需要PDF打印机属性设置窗口","FS-System-Config_Backup_Frequency_Oneweek":"1周","New_Value":"新值","RP_Process_Type":"流程类型","HF-Whether_to_define_the_selected_type":"是否定义选中的类型","ChartF-Data-Filter":"筛选器","FR-Designer-BBSLogin_Login":"登录","IN_and_INOUT_type_not_as_cursor":"IN和INOUT类型不可以作为游标","FR-Designer_COMMUNITY_QUESTIONS":"问题求助","RP_Edit_Process":"编辑流程","Style_Name":"格式名","LayerGrade":"钻取层级","Inner_Parameter":"内置参数","FR-Chart-AutoRefresh_NotSupportIMGAndReportData":"不支持图片形式和单元格数据源","Update":"更新","FS-Mobile-User_Limit_Tip_Left":"当前许可文件仅支持","Sub_Report_Message2":"父报表不在当前运行环境下","Sub_Report_Message1":"请选择正确路径","Chart-Select_Path":"选择路径","FR-Engine-List_Filter":"列表筛选","CellWrite-Hide_Same_Cell_Vertically(Used_in_Group_Report)":"纵向隐藏相同的单元格(分组报表使用)","Collect-Use_Designer":"使用设计器","Collect-Collect_User_Information":"收集用户信息","Utils-Insert_Row":"插入行","D-ChartStyle_SubStyle":"","FR-Designer_Default_value":"参数默认值","Plugin-ChartF_Drill_Map":"钻取地图(新特性)","Sub_Report_Message3":"不能选择自身","Get_Catalog":"正在获取catalog","Value_Not_Match":"键入值不符合规范","plugin-ChartF-Radius":"圆角","Input_Keyword":"键入关键字","Device":"设备","FS-Setting-Backgroung_Type":"背景","Set-Parameter-Name":"请先设置参数名","Role_changed_isRefresh":"角色已变动，是否刷新","FS-Frame-Simple_Platform":"报表管理平台","ChartF-DeleteMainGrid":"删除主要网格线","Edit_String_To_Formula":"是否将字符串编辑为公式","Set_Submit_Event":"设置提交事件","already-saved":"已经保存","Uploaded_File":"该文件已上传","Please_Set_Repeat_First":"请先设置重复标题行和列","FR-Designer_Flash_Print":"Flash打印","Sort-Sort_Order":"排列顺序","FR-Designer_HyperLink_Must_Alone_Reset":"多个超链","FS-Schedule-Output_File_Description":"文件描述","Chart-Use_Format":"格式","Page_Total":"共","RestartAfterSet":"配置结束立刻开始","Background-Pattern":"图案","Clear_All":"清空","MainGraduationLineStyle":"主要刻度线类型","StyleAlignment-Right_To_Left":"从右向左","Using_single_template_set":"使用单模板偏移","BarStyle":"条形","FR-Desinger-Plugin_Updater_Restart_Designer":"重启设计器","Formula_Condition":"公式条件","fs_process_reporttask_tip":"表单任务:此任务可以设置报表或者表单用于展现所需数据,单击编辑属性，双击可以改名。","ExpandD-Cell_Expand_Attributes":"扩展属性","CopyRight":"版权所有","Plugin-ChartF_Layer_Null":"无","M_Insert-Hyperlink":"超级链接","CategoryName":"分类名","time(s)":"","FS-Monitor-Log_Clean_Three_Months_Ago":"三个月前","FS-Schedule-Extra_Execute_Times":"额外重复执行次数","Chart-Song_TypeFace":"宋体","Plugin-ChartF_To":"初始右边界","Add_Chart_Map":"添加地图","Exported_successfully":"导出成功","RP_Edit_Task":"编辑任务","Report-Web_Attributes":"模板Web属性","FS-Schedule-Trans_FAILED":"数据同步转换失败","Preference-Grid_Line_Color":"网格线颜色","Event-beforeemail":"Email前","Freeze-Page_Row":"冻结重复标题结束行","Form-Properties":"属性","Log_Declare_Head_Res_Write":"文件写出中","FS-Privilege-Normal_Role":"普通角色","RP_Task_Status":"任务状态","FR-Engine_RP_Invalid_Task_Or_Process":"任务名称或流程名称不符合规范","ChartF-Show_GuidLine":"牵引线","ChartF_Stock_Low":"盘低","RP_Execute_Month":"执行月","Plugin-ChartF_DisplayStrategy":"显示策略","Char-Lik_Cell":"","FR-Engine_Short-Dec":"十二","M_Window-Cascade(C)":"层叠(C)","FR-Base_Not_Exsit":"不存在于报表","Custom_Login_Page":"自定义登录页面","RP_Task_Operation":"任务操作","FR-Engine_no_title":"表头匹配失败, 直接导入Excel","M_Edit-DeleteFloat":"删除悬浮元素","File-address":"文件地址","FS-Privilege-No_Control":"不做身份验证","SQLWizard-reading":"读取中","Component_Interval":"组件间隔","FR-Engine_Execute":"执行","Choose_Use_Authority":"您可以选择使用权限来进行权限的设置","FR-Designer_IDCard":"身份证","WLayout-Border-ThreeContainer":"拥有北、西和中三块的边界布局容器，其中北部块可以根据需要调整高度，西部块可以根据需要调整宽度","Repagination":"页码重置","Chart-DS_TableData":"数据集","Opening_Report":"正在打开报表","FS-Report-RP_SelectLabel":"请选择上报标签","DONE_WORK":"已处理事务","M_File-Export-SVG":"SVG格式","Download":"下载","FR-Engine_Excel2007-not-support-pwd":"Excel2007导出不支持工作簿加密","Last_Submit_Time":"上次提交时间","Excel_formula_error":"导出公式解析错误","FS-Monitor-Templet_Release_Date":"发布日期","Chart-Float_Chart":"图表超链-悬浮窗图表","Columns":"列","FR-Engine_Block_extended":"可扩展块：","Plugin-Memory_Alarm_Msg_Body_Clear":"%时,强制清除","FR-Chart-Data_Min":"最小值","Department_Roles":"部门角色","FR-Engine_Verify_Error":"校验出错","ConditionB-Add_bracket":"添加括号","Classpath-Add_Jar":"添加Jar","template_unsaved":"无法保存模板","Privilege-Keep_Login_State":"保持登录状态","DS-Database_Query":"数据库查询","FS-Monitor-Not_Less_Than":"建议不应小于","Chart-Data_Configuration":"数据配置","FR-Designer-BBSLogin_Account":"用户名","FR-Designer_Support_QQ":"技术QQ","FR-Chart-Map_Sichuan":"四川","No_offset":"无偏移","INFO-Page_is_Generated":"页面已生成","FR-Designer_Performance_First":"性能优先","FR-Designer_Column_Measure":"列轴/度量值","Datasource-Set_Classpath":"设置Classpath","M_Edit-Bring_Forward":"上移一层(F)","DBCP_TEST_ON_BORROW":"获取连接前检验","DisplayNothingBeforeQuery":"点击查询前不显示报表内容","FR-Engine_WF-Name":"名称","Plugin-ChartF_CommonModel":"常规模式","CellWrite-Print_Zero_Value":"打印零值","FR-Designer-Widget-Style_Title_Background":"标题背景","FR-Chart-Map_Yinchuan":"银川市","Role":"角色","Plugin-ChartF_Gis_Layer":"GIS图层","Update_OfflineWrite_Lic":"当前版本不支持输出离线html报表，请升级您的lic","I-Message_SummaryGrouper":"您可以选择适当函数进行汇总显示","Plugin-ChartF_Layer_GaoDe":"高德地图","FS-Generic-RP_System_Message":"系统消息","Datasource-Are_you_sure_to_delete_the_selected_remedy_datasource":"你确定删除选中的Remedy数据源吗","StyleFormat-Scientific":"科学计数","FR-Designer-Plugin_Cannot_Update_Not_Install":"无法更新插件，请检查该插件是否已经成功安装","Field":"字段","Close_Synchronized_DataSet":"关闭同步数据集","You_have_not_made_a_report":"您还没有制作报表","FR-Chart-Map_Neimenggu":"内蒙古","FR-Engine_JavaScript-Commit_to_Database":"提交入库","FR-Designer_Refresh":"刷新","Chart-Right_Top":"右上","FR-Engine_Wed":"三","Datasource-Read_Type":"读取方式","Add_JS_warning":"请输入如实例所示的正确的url地址!","M_Insert-Shape_Line":"直线(L)","Registration-User_Email":"用户邮件","FR-Designer_Plugin_Should_Update_Title":"插件升级提醒","Plugin-ChartF_NO":"否","BuildIn":"内置","FS-CustomStyle_Toast_Res_Empty_alert":"样式响应为空！","FR-Plugin_Developer":"开发者","FS-Admin-Password_Can_Not_Be_Null":"密码不能为空","ComboCheckBox-End_Symbol":"结束符","FS-Frame-Simple_Comma":"，","Event-beforetopdf":"PDF导出前","Delivery":"传递","Chart_Date_Axis":"时间坐标轴","FS-Admin-Simple_Exit":"退出","Plugin-ChartF_UseTooltip":"使用数据点提示","Chart-Change_Chart_Style":"设置图表区域格式","Remove":"删除","Plugin-ChartF_Custom":"自定义","Plugin-Memory_Alarm_Mode_Exp":"开启调试模式的时候,服务端会每秒钟输出一次内存占用信息(info级别)","Odd":"奇数","FS-User_Login2PlatForm":"登录到服务器管理平台","Utils-Connection_can_not_be_null":"数据连接不可为空","FS-Generic-Simple_Minute":"分钟","M-File":"文件","RP_Report":"上报","BindColumn-Advanced_Summary":"高级摘要","ChartF-TickLabelIsVisible":"隐藏刻度值","Sub_Report_Description":"子报表需要存在于父表运行环境下，且两者不能为同一模板","Root":"根节点","Utils-Show_Cell_Value":"显示单元格值","This_ScheduleAction_Is_Not_Exsit":"这个定时动作不存在","FR-Engine-Tab_Layout_Width":"宽度","Plugin-ChartF_Center":"居中","FR-Engine-Sort_Sort":"排序","Unit_INCH":"英寸","FR-Base_Columns":"列","DS-Select_Database":"选择数据库","FR-Designer_WLayout-Border-ToolTips":"完整的边界布局容器，由东南西北中五块共同构成，\n其中南北块可以根据需要调整高度，东西块可以根据需要调整宽度。","FR-Engine_ConditionB-Remove_bracket":"去掉括号","FR-Designer_Tab_title":"tab标题","Unit_Hundred_Thousand":"十万","My_Computer":"我的电脑","FR-Engine_TaskEndWhenOneTime":"任务执行一次后即结束","ServerM-Face_Manager":"界面设置","__ISJMETER__":"是否JMETER测试","ChartF_ValueRange_MatchColor":"值区间配色","FR-Desinger-Plugin_Updater_Jar_Downloading":"正在等待jar包下载完成","FR-Designer_MobilePhone":"手机","Folder":"目录","Custom_Type_Set":"组合类型设置","Schedule_DEC":"","Still":"仍然","FS-Generic-Simple_Form":"表单","Prospecting_File_Error":"勘错文件导出时发生错误","Input-To_Search":"搜索选项结果","M-Popup_ChartType":"图表类型","FR-Designer_FormulaD-Array":"数组函数","Mouse_move-background":"鼠标移动到按钮上的背景，若无则不改变背景","FR-Chart-Interactive_timeSwitch":"时间切换","Utils-Total_Option":"可选项","FR-Chart-Map_Guangxi":"广西","FR-Designer_Condition_Attributes":"条件属性","Chart_Half_Transparent":"半透明","FR-Base_May":"五月","FR-Engine_ReportServerP-Previous":"上一页","FR-Designer_Formula":"公式","FR-Engine-Write_Stash_Failed_Msg":"暂存失败，请注意保存数据。","Gradient-Direction":"渐变方向","Prospecting_File":"勘错文件","FR-Base-NS_register_ipFull":"错误代码:1115 系统并发数已满","FR-Designer-BBSLogin_Connection-Failure":"网络连接失败，请检查当前网络状态","M_Help-About_Software":"关于软件","I-AreaStyle_Stack_3D":"三维堆积面积图","FS-Generic-Simple_March":"三月","Right_Top":"右上","FR-Designer_Unit_INCH":"英寸","Widget-Width":"控件宽度","RWA-BuildIn_SQL":"内置SQL","Ningxia":"宁夏回族自治区","ZhengzhouCity":"郑州市","Form-Allow_CustomData":"允许自定义值","Pink":"粉红","Column-Number-OR-Row-Number":"列号或行号","ChartF-Meter_Type":"仪表盘类型","Save":"保存","Cell-Location_And_Span":"位置和跨度","ChartF-Tick_Label":"刻度标签","Display position":"显示位置","Schedule-Mail_To":"以邮件发送到","Is_Need":"必需","Plugin-Chart_Gradient_Direction":"渐变方向","FR_FS-Handle_Affairs":"处理事务","FS-System-not_war":"非","Custom_Icon_Message1":"建议使用16 × 16规格的PNG图片","Custom_Icon_Message2":"您的操作存在不合理之处。","Custom_Icon_Message3":"图标名称已经存在。","ImgBoard":"图片面板","Plugin-Memory_Alarm_Unit_MS":"ms","FR-Chart-Text_Vertical":"竖排","Plugin-ChartF_FullScreenDisplay":"全屏展示","Rows":"行","Set_User":"用户配置","FR-Engine_ConditionB-Input_Condition_Parameter":"输入过滤条件的参数","FR-Designer_Modify":"修改","Datasource-From_Database":"数据库表","FR-Widget_Message_Letter_Space":"8","FR-Engine_Form-Action":"操作","OtherGroup_Name":"其他组的名字","Closed":"已关闭","RowSpan":"行跨度","FR-Engine_Sche-Hour":"时","NS_print_noApplet":"错误代码:1202 当前工程目录下未发现Applet包","FR-Engine_ConditionB-does_not_begin_with":"开头不是","FR-Designer-Plugin_Connect_Server_Error":"无法连接插件商店，请稍候再试","Release-To_Load_Data":"松开将加载数据","Activity":"活动","SINGLE_FILE_UPLOAD":"只支持单文件上传","SecondGraduationLine":"次要刻度线","FS-Generic-Parameter_Setting":"参数设置","Empty_Input":"输入内容为空","Month":"月","FS-Schedule-Invalid_Unsent_Email_Address":"无效的邮件地址：","RWA-Add_Field":"添加字段","FS-Setting-Custom_Homepage":"自定义首页","WF-Privilege_Setting":"权限设置","FR-Designer_FS_Name":"数据决策系统","FR-Engine-ExcelImport_Write_Match_Error_Info":"匹配模板失败，请确认文件格式是否与模板一致！","MicrosoftYaHeiInCN":"微软雅黑","Max-Decimal_Length":"最大小数长度","Form-Right_Align":"右对齐","FR-Engine-PageSetup_Landscape":"横向","Cursor_to_previous_row":"光标移到上一行为：","Name_has_Colon":"名字:","FS-Setting-Title_Only":"仅使用标题","Schedule-Unspecified_Template_File_Name":"未指定模板文件名","FR-Chart-Data_None":"无","FS-Generic-Simple_Value":"值","FR-Designer-Plugin_Jar_Expired":"Jar包过旧","Privilege-The_User_Account_Is_Expired":"此用户名已经过期","M-Report":"报表(R)","Float":"浮点型","Custom_Button_Type_Simple":"普通","Expand":"扩展","FR-Base_Short_Feb":"二","TurnOff":"关闭","ExcelImportD-Save":"保存到目录","ChartF-End_Value":"结束值","FR_Chart-Data_Range_configuration":"Data range configuration","FR-Designer_COMMUNITY_BUG":"BUG反馈","FR-Engine_Save":"保存","Provide":"提供","XiningCity":"西宁市","ChartF-Series_Name":"系列名称","Plugin-Chart_Tooltip":"提示","ReportColumns-End_at_Column":"结束分栏列序号","FR-Designer_Font-Size":"字体大小","FR-Designer-Plugin_Update":"插件更新","FR-Engine_Modify":"修改","Report-Write_Attributes_Group_Warning":"设置为单元格组的各字段中的单元格个数必须相同","Plugin-ChartF_MainType":"主要刻度单位","GroupB-Add_Condition_to_List":"是否将以下条件添加到条件列表中","Event-afterverifywrite":"校验提交后","ExportAndOutput":"导出","FS-Msg_Prompt":"提示","ReportD-Report_Write_Attributes":"报表填报属性","RP_To_Check":"待审核","FS_Old_Password":"旧密码","FS-Plugin-SysMonitor_Performance_Monitor":"性能监控","LanzhouCity":"兰州市","Registration-Standard_Edition":"标准版","FR-Engine-Print_As_Image":"以图片方式打印( 针式打印机推荐使用 )","SAP_datatype":"SAP数据类型","Row_tag":"行标签","FR-Engine_Function_Name_Should_Not_Be":"函数名不应该是","M_Report-Report_Parameter":"模板参数","FR-Engine_Right":"右","Chart-Actual_End":"实际结束","Display":"展示","Para-Shown_On_Default_Parameter_Page":"显示于默认参数页面","FS-Report-Create_Dir_Dialog_Label_width":"58","Plugin-ChartF_Gauge_Pointer_Title":"满指针仪表","Datasource-Single":"单个读取","Plugin-ChartF_Y_Direction":"y方向","Please_Drag":"请拖入行列字段、汇总字段","SetStartTime":"设定开始时间","FR-Designer_Layout_Constraints":"位置和大小","LIC-Support_Flash_Print":"Flash零客户端打印","FR-Designer_Use_ToolBar":"使用工具栏","FR-Chart-Map_Wulumuqi":"乌鲁木齐","FR-Designer-Collect_Information_Description":"描述","Docking-Undock":"不停靠","MeterAngle":"仪表盘角度","Registration-Project_Name":"项目名称","Tree-Select_Leaf_Only_Tips":"（不勾选此项时，返回值仅为用户勾选的当前节点而不包括其子节点）","FS-Setting-Generic_Setting":"通用","FS-Generic-Applet_Print":"Applet打印","EveryInterval":"每隔","One-Name_Value":"一个字段的值","Poly-Report_Component":"聚合报表组件","M_Format-Add_Row_Before":"在前面添加行(A)","LayerPageReport_CountPerPage":"每页记录数","FR-Engine_Executing_Report":"报表计算中","I-LineStyle_LinePercentageStack":"百分比堆积折线图","Already_exists":"已存在，请重新输入！","FR-Import-Export_CSV":"CSV格式(逗号分隔)","Plugin-ChartF_Needle":"指针","Vertical_Layout":"垂直布局","FS-Generic-Simple_Example":"例如","FR-Plugin-Start_Version":"支持的最低报表版本","Plugin-ChartF_SameArcPie":"等弧度玫瑰图","FR-Designer_formDesignerModule":"表单设计器模块","Utils-All_Sheets":"所有的Sheet","FormulaD-Text":"文本函数","Form-Remove_Repeat_Data":"去除重复数据","Loading_Applet":"正在加载Applet","Preference-Locale":"国际化","FR-Base_July":"七月","ParentCell_Setting":"父格设置","Hyperlink-Extends_Report_Parameters":"继承报表的参数","Set_Column_Title_End":"设置重复结尾列","Show_Grid_Column":"显示格子列","DateFormat-Custom_Warning":"注：自定义日期格式不支持格式校验","Title":"标题","FR-Engine_RP_Edit_Task":"编辑任务","FR-Engine-Write_Column_Type_Mismatch":"数据列类型不匹配 ","FR-Chart-Map_Taiwan":"台湾","Utils-Bottom_to_Top":"从下到上","NS_export_2007":"错误代码:1122 导出Excel2007需要jdk版本1.5以上","FR-Base_June":"六月","FR_FS-FailPass_ImproveYourVersion":"当前版本无此功能，请使用高级版本。","Ecp_Failed":"加密失败","Editor":"编辑器","ParameterD-Parameters_Processor":"参数处理器","NS_register_sense":"错误代码:1205 加密狗读取失败","Location":"位置","Has_Selected":"已经选择","Plugin-ChartF_TickColor":"刻度线颜色","ShowAsDownload":"用下载链接显示二进制内容","Utils-New_Directory":"","FS-Generic-Simple_Next":"下一步","FR-Chart-Import_Map":"导入地图","Jiangxi":"江西省","FS-User-Add_User_Failure":"用户添加失败，该用户名已被占用","GroupReport-GroupReport_Attributes":"分组报表属性","ChartF-High-Low-Close-Chart":"盘高-盘低-收盘图","BindColumn-Default_Father_Cell":"默认父格","Event-beforeappletprint":"Applet打印前","FR-Base_TurnOff":"关闭","ReportServerP-Import_JavaScript":"引用JavaScript","Plugin-ChartF_Height":"高","WF-Reportlet_Info":"网络报表信息","Utils-No_Data":"没有数据","FR-Chart-Value_Divided_stage":"划分阶段","FR-mobile_report_analysis":"报表解析","Suffix":"后缀","EmailPane-tips":"<html>您可以键入${abc}作为一个参数，abc为参数名称；${today()}作为公式，例如：标题正文为\"${today()}统计情况\"，收件人为\"${p},123@gmail.com,mike\"，这里mike必须是已保存在平台用户管理里的用户名<\/html>","Switch":"切换","ExpandD-Add_Datasource":"添加数据源","FS-Reg-Simple_Jar":"Jar包","Examples":"例子","Default_Certification":"默认认证","FR-Designer_Forbid_Widgets_Intersects":"禁止组件相互重叠","FR-Engine_Role":"角色","Sequenced_number":"序号","FR-Engine-Invalid_Cell":"无效的单元格","Plugin-ChartF_NewColumn":"柱形图（新特性）","FS-System-Email_Ports_and_Encryption":"端口和加密","FR-Engine_RP_Content":"内容","Function-Function_File":"函数文件","FR-Desinger-Plugin_Updater_Restore_To":"还原到","Plugin-Chart_Gradient_Color":"渐变色","Form-Semicolon":"分号","FR-Chart-Map_Multilayer":"多层地图","Where_claus":"过滤条件","Cannot_Set_Date":"不能设置日期","Plugin-ChartF_Null_Value_Break":"空值断开","FS-User-Encryption_Mode":"加密方式","WLayout-Grid-ToolTips":"网格式布局，可通过设置将整个容器平均分成N行,N列","Plugin-ChartF_Invalid_WMS":"WMS服务无效","Plugin-ChartF_Content":"内容","Datasource-Stored_Procedure":"存储过程","Registration-Develop_Edition":"开发版","DisPlay_Proportion":"显示比例","FR-Engine-Condition_Less_Than_Or_Equals":"小于或等于","Not_Exsit":"不存在于报表","BindColumn-Custom_Up_Father":"自定义上父格","M_File-Export-Excel":"Excel格式","Tree-Root_Name":"根节点名","Utils-Rename_File":"文件重命名","FS-Generic-User_Defined":"自定义","Privilege-Select_Role":"选择角色","Event-aftersubmit":"提交后","FR-Engine_RP_Task_Operations":"任务操作","LayerPageReport_PageQuery_Unsupport_Msg1":"无法自动转化成分页语句，请自定义分页SQL!","DataFunction-Sum":"求和","FR-Chart-Map_Bubble":"气泡图地图","Choose_Date_Time":"选择日期时间","Area_Name":"区域名","Unit_Ten_Thousand":"万","FR-Designer-BBSLogin_Password-Empty-Tip":"密码不能为空","ReportColumns-Columns_vertically":"列分栏","M_Insert-Shape_None":"选择图形(N)","ShenyangCity":"沈阳市","WLayout-Split-ToolTips":"按照比率可以将布局分割两部分","FS-Admin-Simple_Name":"管理员名称","Form-Colon":"冒号","RP_Add_Process":"添加流程","ChartF-Volume":"成交量","SQLWizard-remove_all":"全删除","ReportServer-Frozen_Column_Row":"冻结行列","Plugin-ChartF_MaxDiameter":"最大直径","Plugin-ChartF_Layer_Fresh":"清新","FS-User-Custom_Encryption":"自定义密码加密","Highlight-Barcode":"条形码","FS-Monitor-No_Global_Style":"缺少全局样式","Utils-Click_the_database_button_to_add_database":"点击数据按钮来添加数据库","Submit_Url":"提交地址","ParameterD-Are_you_sure_to_delete_the_selected_parameter":"你确定删除选中的参数吗?","Test_URL":"测试连接","FS-Schedule-CPR_FAILED":"快照生成：失败","UpParent":"上父格","FS-Plugin-SysMonitor_Respond_Time_Longest":"最长响应时间(ms)","Float_Element_Name":"悬浮元素名称","FS-Monitor-Max_Memory":"最大内存","FR-Server_Version_Tip_MoreInfo":"建议您所属团队使用的我方FineReport产品的设计器版本号以及部署的服务器版本号保持一致，以避免版本不一致造成的问题风险。\n假如您打开更高设计器版本制作的模板，可能打开出错，也可能丢失原有模板属性。假如您制作的模板使用的设计器版本高于您最终部署所用的服务器版本，服务器可能无法正常载入您制作的模板。","M-Page_Preview":"分页预览","HF-First_Page":"首页","Chart_Bubble_Outside":"气泡外","Plugin-ChartF_FollowMouse":"跟随鼠标","Privilege-The_Password_Of_The_User_Is_Invalid":"错误的密码","Select_Specified_Grouping":"选择自定义分组","Log_Declare_Head_Export":"报表导出中","FR-Chart-UpdateMessage_PushAuto":"是否自动推送","SetPrinterOffset":"打印机偏移","FR-Designer_Space":"空格","IDLE":"空闲","FS-System-Time_To_Live_Seconds":"最大生存时间","Plugin-ChartF_Position":"位置","Utils-Submit_Forcibly":"强行提交","Select_All":"全选","Plugin-ChartF_Layer_Custom_WMS":"自定义wms服务","FR-Engine-Write_Are_Stashed_Clear":"是否要清空暂存数据？","FS-Monitor-Log_Cleaning":"正在清理","quote":"引用","FS-Report-RP_TaskMgr":"上报任务管理","ChartF-Stagger":"交错显示","Re-lic-out-date":"lic过期","FR-Chart-Line_Style":"折线样式","Hyperlink-Reportlet_name_cannot_be_null":"网络报表名字不可为空","Platform-Create_Table":"创建表","FR-Engine_De":"的","Form-Design_Size":"设计尺寸","FR-Designer_Indent-Pixel":"像素","Deploy-Page":"部署页面","Preference-Setting_Colors":"颜色设置","FR-Base-Error_Cell":"错误的格子","FS-System-Mail_Sender_Account":"发件人帐户","SetLoginBackground":"设置登录背景图片","EnterTrueTimeFormat":"请输入正确格式的时间","FR-Chart-Map_Nanchang":"南昌市","FR-Designer_Open":"打开","GuangzhouCity":"广州市","FS-User-MD5_Encryption":"内置MD5加密","MinuteWrong":"执行时点的分钟填写错误","Group_by":"分组依据","Yuan":"元","File-File_Size_Limit":"文件大小限制","Utils-Are_you_sure_to_refresh_all":"刷新所有行将删除您所有的行设置，确定继续","FormulaD-Input_formula_in_the_text_area_below":"请在下面的文本编辑框里面输入公式","FR-Engine_Unload_Check_Msg":"有数据没有提交","FR-Designer_Applet_Print":"Applet打印","FR-Engine-Err-The_Number_Is_Less_Than_The_Minimum_Value":"值小于允许输入的最小值","FR-Engine_no_need_insert":"报表数据多于Excel数据, 不需要插入行.","FS-Generic-Simple_Yes":"是","Following_parameters_are_not_generated":"以下参数未生成","Allow_Negative":"允许负数","Widget-User_Defined_Editor":"预定义编辑器，该编辑器只能在控件管理菜单里更改其属性","FR-Engine_Fit-Vertical":"纵向自适应","Abnormal_Communication":"通信异常","FR-Designer_M_Help-Tutorial":"帮助教程","Mobile_Widget_Tree":"控件树","M_Report-Execute_Script":"运行期脚本(S)","Interval_Gap":"间隔","FR-Engine_Import":"导入","Function-Are_you_sure_to_delete_selected_function":"你确定删除选中的函数吗","FR-Engine_Session-UserName":"用户名:","Plugin-ChartF_DifferentArcPie":"不等弧度玫瑰图","Style-Left_Indent":"左缩进","Semicolon":"分号","Submit":"提交","Parameter":"参数","And_A":"及其","Not_Found_XML_File":"没有找到XML文件","Plugin-ChartF_Connect_WMP":"连接","FS-Report-Has_Parameter":"有","ReportWebAttr-Write_Css":"填报自定义样式表","MConfig-ProductName":"产品名称","Printer-Selected_Printer_Groups":"已选择的打印机组","M_Insert-Shape_Oval":"椭圆(O)","FR-Engine_ConditionB-is_empty":"为空","FR-Designer_Log":"日志","Short-Dec":"十二","FS-Schedule-Start_Policy_Immediately":"配置结束立即执行","Form-Bottom_Align":"底边对齐","BindColumn-Group":"分组","FR-Designer_Cover_None":"全不覆盖","FR-Engine_RP_Cpt_Name":"模版名称","ConditionB-Remove_bracket":"去掉括号","PrintP-Last":"末页(L)","Test":"测试","Printer-Remove_Alias":"移除别名","plugin-ChartF_MatchColor":"配色","FS-Module-MobilePush_UseIGT":"使用个推推送","FR-Designer_Surport_String_To_Formula":"支持字符串编辑为公式","FR-Desinger-Plugin_Updater_Jar_Restore":"Jar包还原","add":"添加","Undefined":"未定义","Overlapping":"重叠型","Root_Path_Cannot_Remove":"根节点不可删除","Enter-New-FileName":"请输入新的文件名","FR-Designer_EmailPane-mailContent":"邮件正文","FS-System-Config_Cleanup_Backup":"内存已满，请清除部分备份","Shandong":"山东省","Offline-Contain_Unsupport_Function":"包含不识别的公式","Hyperlink-Show_Directories":"显示快速链接栏","Excel2007-not-support-pwd":"Excel2007导出不支持工作簿加密","EditRC-Entire_column":"整列(C)","Plugin-ChartF_X_Direction":"x方向","Has_Existed":"已经存在","FR-Designer_Tooltips":"提示","Auto-Build":"自动构建","FR-Chart-Map_Liaoning":"辽宁","FS-User-User_Limit_Tip_Left":"当前许可文件仅支持","Plugin-ChartF_Import_Image":"导入图片","Data-Label":"标签","FS-Privilege-Has_No_Privilege_To_Visit":"没有权限访问","FR-Designer_Confirm":"确认","FR-Background_Image_Titled":"平铺","ChartF-Show_Labels":"显示标签","Hainan":"海南省","Utils-Matching_Items":"匹配项目","FR-Chart_MainGraduationUnit":"主要刻度单位","Plugin-ChartF_Gradual_Level":"层次渐变","BindColumn-Result_Serial_Number_Start_From_1":"序号从1开始","LIC-Support_WorkBook":"多sheet报表设计","FORMLET":"访问不同表单的路径的参数","AxisReversed":"轴逆序","FR-Engine_ConditionB-Operator":"操作符","FR-Desinger-Plugin_Updater_Update":"更新","Utils-New_Report":"新建报表","SpecifiedG-Discard_all_others":"丢弃其它所有的","Chart-Use_Address":"地址","FR-Plugin-Designer_Installed":"已安装","HJS-CC_to":"抄送","fixedTime":"定时","FR-Chart-Stock_Chart":"股价图","FR-Chart-Map_Lasa":"拉萨","ReportDir":"报表目录","Freeze-Use_In_Write":"使用填报冻结行列","REPORTLETS":"访问多张模板的路径的参数","FS-Schedule-CPR_SKIP":"快照生成：跳过","FR-Designer_Loading_Data":"正在加载数据","WLayout-Card-ToolTips":"卡片式布局，该布局容器中可以添加多个其它组件，并通过设置以展示其中的一个","FR-Chart-Series_Setting":"系列设置","Export_failed":"导出失败","FS-Plugin-SysMonitor_Number":"序号","Chart-StyleAlignment_Right":"靠右","ExpandD-Left_to_Right":"从左向右","FR-Chart-Series_Name":"系列名","Back":"返回","FR-Plugin-Plugin_Name":"插件名称","M-Save":"保存","BackgroundTexture-Newsprint":"新闻纸","FR-Base_Rows":"行","Plugin-ChartF_NewCustom":"组合图（新特性）","Load":"加载","XML_TREE_Wait":"等待刷新","FS-Generic-Synchronize_Rate":"同步频率","FR-Designer_ReportColumns-Columns":"列分栏","HJS-Current_Page":"当前页","Margin":"边距","FR-Plugin_Global":"全局配置","ChartF-Meter":"仪表盘","Import-Excel_Import":"Excel输入","FR-Chart-Area_Value":"区域值","FR-Chart-Type_Donut":"圆环图","Privilege-The_User_Account_Is_Locked":"此用户名已被锁定","Tree-Return_Full_Path":"结果返回完整层次路径","FR-Designer_SQL-View":"视图","ChartF-Values":"数值","Memory_Usage":"内存使用情况","Please-Wait":"请稍候","Cannot_Get_Date":"不能获取日期","FR-Chart-Map_Drill":"钻取层级","Width":"宽","FR-Designer_Layer-Build":"分层构建","Exchange_key":"点击互换快捷键","FR-Chart-Data_Current":"当前值","Custom_Button_Submit_URL":"提交地址","Event-beforewrite":"填报前","FR-Engine_RP_Reach_Node":"到达该节点","Text":"文本","FR-Engine_Re-not-start-in-jar":"您使用的版本不是通过JAR包启动.","URL_Certification":"URL认证","FR-Server_Version_Tip":"您当前连接的服务器版本低于您使用的设计器版本号，继续连接，您编辑的一些属性可能无法有效保存。  假如需要连接请将您的设计器版本与服务器版本保持一致","FR-Designer_Font-Family":"字体名称","DS-Text_TableData":"文本数据集","FR-Chart-Map_Jilin":"吉林","Privilege-Cannot_Load_User_Just_With_Username_When_Use_LDAP":"LDAP用户无法加载用户名","FR-Engine_Export-Excel-Page":"分页导出","Write-Display Type After Edit":"编辑后格子的值显示为控件的","Null":"空值","FS-Generic-Page_Number":"页","FR-Chart_Cell_Data":"单元格数据","FS-Module-MobilePush_Setting":"推送配置","Component_Scale":"组件缩放","FR-Designer-Plugin_Warning":"警告","FR-Designer_Columns_choosed":"选择的列","Chart-Condition_Display":"条件显示","Hyperlink-Target_Frame":"打开链接的窗口","FR-Engine_RP_Process_View":"任务流程查看","Plugin-ChartF_DifferentArcPie_Title":"异弧玫瑰图","FR-Designer_Confusion-Col-Name":"字段名称","Opened":"已开启","Style-Spacing_Before":"段前","NS_LayerReport_columns":"错误代码:1107 行式引擎不支持分栏","FR-Base-Time_Minute":"分","FR-Chart-Map_Second_Title":"第二标题","MDX_Explain":"语法格式参考MDX语法。\n例如：\nWITH\nMEMBER [Measures].[Special Discount] AS\n[Measures].[Discount Amount] * 1.5\nSELECT\n[Measures].[Special Discount] on COLUMNS,\nNON EMPTY [Product].[Product].MEMBERS  ON Rows\nFROM [Adventure Works]\nWHERE [Product].[Category].[Bikes]\n注：COLUMNS、ROWS可以使用0、1代替，查询轴只支持返回两个轴。","FR-Designer_Fit-In-Web":"Pc浏览器自适应","FR-Designer_Oracle":"所有表","Custom_Button_Type_Submit":"提交","Utils-Move_Down":"下移","FS-System-Sender_Address":"发件人地址","Transparent":"透明","Function-The_class_must_be_located_in":"该类必须放置在","FR-Designer_Simple_general_forV6":"通用查询(适用于ECC 6以上版本)","Ecp_Convert":"注：加密后reportlets文件夹的文件将转为密文。","Can_Be_Unselected":"可不选","Chart-Table_Data_Not_Found":"图表数据集没有找到","M_Format_A-Border":"边框(B)","fs_process_endtask_tip":"结束任务:此任务触发时整个流程立刻结束,单击编辑属性。","Chart_Bubble_Inside":"气泡内","Datasource-TableData_Name":"数据集名称","Border-Line":"边框粗细","Form-ComboCheckBox":"下拉复选框","Plugin-ChartF_Rectangular_Coordinate_System":"直角坐标系","HF-Move_Left":"左移","FR-Chart-Map_Xizang":"西藏","FR-Engine_Hour":"小时","Black_Font":"黑体","FR-Engine-Flash_Print_Not_Support":"当前版本不支持Flash零客户端打印, 请升级您的lic","and":"和","FR-Designer_Layout-HBox":"水平盒子布局","Plugin-ChartF_Legend_Ordinary":"普通","Set_Submit_Condition":"设置提交条件","Gradient-Color":"渐变色","FS-Setting-Style_Choice":"配色选择","HF-NewLine_Des":"可以点击上面的移动和删除按钮来操作换行符","Plugin-ChartF_NewLine":"折线图（新特性）","Series":"序列","Mail":"邮件","FR-Engine_Create-Time":"创建时间:","Chart_Interval_Back_Color":"间隔背景色","Datasource-Class_datasource_name_cannot_be_null":"程序数据源的名字不可以为空","FR-Background_Image_Extend":"拉伸","Select_A_Tree_DataSource_To_Build":"选择一个树数据集来构建","Column_tag":"列标签","Male":"男","Data_Connection_Driver_Name":"数据连接驱动器名称","FS-Report-No_Dir_Selected":"请选择除根节点以外的目录节点！","FR-Engine_FS_Name":"FS用户","ChartF-X_Axis":"X轴","FR-Base_No":"否","Plugin-Memory_Alarm_Update_Success":"保存成功","Image-Image_Files":"图片文件","Parameter-Add_Parameter":"添加参数","FS-Setting-Homepage_URL_PC":"PC","FR-Base_December":"十二月","LIC-Support_Collapable_Tree_View":"多维度分析","GROUPING_MODE":"普通分组","ComboBox":"下拉框","FS-Generic-M_Form_Preview":"表单预览","HJS-BCC_to":"密件抄送","ChartF-Line":"折线图","Event-beforetoword":"Word导出前","ChartF_OneSeriesSet":"指定系列","FR-Base_Not_exist":"不存在","BarOutSide":"柱子外侧","FR-Designer_PDF_Print":"PDF打印","LayerPageReport_WN_SubReport":"按页运算引擎暂不支持子报表","FR-Engine_Dialog":"对话框","Sub_Report":"子报表","FR-Engine-ECP_decode_failed":"解密失败, 请联系管理员检查密码文件是否存在","FR-Chart-Type_Radar":"雷达图","ChartF_Stock_Volume":"成交量","NS_exception_ps":"错误代码:1302 行高列宽超出页面大小设置","Female":"女","ReportServerP-The_name_of_printer_cannot_be_null":"打印机的名字不能为空","FR-Plugin-Plugin_Damaged":"损坏","FR-Engine-Not_NULL":"不能为空","FR-Designer_FormulaD-Logical":"逻辑函数","Server-Demo_Server":"","FR-Chart-Map_Nanning":"南宁市","I-BarStyle_PercentageStack":"百分比堆积柱形图","RP_NO_Privilege":"没有操作权限","Chart-Stock_Error":"股价图必须要有","FR-Designer_M_Help-About_Software":"关于软件","ColumnName":"列名","RP_After_Use":"后，使用","FR-Engine_Task":"任务","FR-Engine_Modify_Task_Name":"修改任务名称","DrawChart":"绘图","FS-User-Ldap_Context":"前后关系","FS-Setting-Simple_FS":"素雅","FR-Chart-Bar3DStack_Chart":"三维堆积柱形图","FR-Engine_FS_Task_Start":"任务开始后","BackgroundTexture-WhiteMarble":"白色大理石","FR-Engine-Value_Value":"数值","FS-Generic-True_Run_Interval":"正确的运行间隔时间单位","Top_And_Double_Bottom_Border_Line":"上框线和双下框线","FR-Chart_Bit_Map":"位图地图","Plugin-ChartF_Background":"背景","CrossReport_Fields":"交叉报表字段","FR-Chart-Meter_Van":"仪表盘(新特性)","FR-Chart-Direction_Horizontal":"横向","FR-Designer_italic":"斜体","FS-System-Email_Receiver":"邮件接收人","YinchuanCity":"银川市","HJS-From":"发件人","ChartB-Should_select_a_summary_column":"需要选择一个汇总列","FR-Desinger-Plugin_Updater_WorksAfterRestart":"版本，重启生效","DisplayTheLabel-In-Chart":"在图表上显示刻度单位标签","PDF-Print_Setting":"PDF打印设置","FR-Designer_Height":"高","lic-same-content":"当前环境已存在相同lic文件","FS-Privilege-Simple_Template":"模板","ChartF-XYScatter":"散点图","Verify-Error_Information":"校验出错信息","FR-Chart-Map_Guangdong":"广东省","FS-Generic-Simple_December":"十二月","Ean13_more_than_12":"Ean13码仅需输入前12位字符，最后一位由系统自动生成，超出12位部分系统将自动截取。","FR-Engine_Mobile-show":"移动终端报表展现","FS-Plugin-SysMonitor_Category":"类别","Loading_PDF":"正在加载PDF","User_Authentification_Mode":"用户认证方式","Event-startload":"加载起始","Class":"类","About-CopyRight":"版权所有","Plugin-Memory_Alarm_Interval":"内存值变化监控间隔时间(秒):","FS-Monitor-Resource_Path_Is":"配置文件路径为","Judge":"判断","Datasource-Rename_SAP_datasource":"重命名SAP数据源","NanchangCity":"南昌市","Formula_Description":"公式说明","Parent":"父","FS-Schedule-Simple_Execute_Time":"执行时间","Use_Semantic":"使用语义层","M_Format_W-Support_Write":"是否可写","Current_custom_global":"当前报表所用自定义全局样式","ReportPageSetting_Message":"-1表示自适应不限制大小","FS-Plugin-SysMonitor_Query_IP":"访问IP","FR-Designer_Filter_Conditions":"过滤条件","WLayout-Border-ToolTips":"完整的边界布局容器，由东南西北中五块共同构成，\n其中南北块可以根据需要调整高度，东西块可以根据需要调整宽度。","GroupB-Group_Columns":"分组列","Y_offset":"Y方向偏移","Registration-The_Registration_code_is_invalid":"注册码无效","Chart_Line":"折线","FS-Admin-Use_Tree_Will_Remove_User":"使用树数据集会清空已有用户数据","Ignore_All":"忽略全部","PreStyle":"预定义配色","DS-Report_Dictionary":"报表数据字典","FS-Schedule-Execute_Condition_Formula":"公式判断","Freeze-Page_Column":"冻结重复标题结束列","FR-Engine_Search":"搜索","FR-Engine_Excel-Multi_Import":"Excel联合导入","Parameter_Refresh_Waring":"刷新参数将会把当前布局恢复到默认布局，但不会改变格内容，是否继续","NS_exception_td":"错误代码:1301 数据集配置错误","Choose_Different_Server_Data":"请选择不同服务器数据集进行关联","Word":"Word","Horizontal-Split_Layout":"水平分割布局","viewModule":"数据分析模块","Registration-Purchase_Enterprise":"购买企业版","FR-Designer_Min_Height":"最小高度","Receiving_Page":"正在接收页码","Plugin-ChartF_Fixed_Column_Width":"固定柱子宽度","IS_Key_Equals_Value":"实际值和显示值相同","FR-Engine-Filter_Filter":"过滤","Only_selected_cell_can_paste_only":"只有选中单元格时才可以粘贴","FR-Chart-Style_Retro":"复古","Utils-Print[PDF]":"打印[PDF]","FR-Hyperlink_Chart_Cell":"图表超链-联动单元格","CellWrite-Merge_Extra_Blank_Cell(Used_in_Group_Report)":"合并补空行的空白格子(分组报表使用)","FR-Designer_Vertical-LeftToRight":"文字竖排(从左向右)","Web-URL":"网络表单数据源地址","FR-Base_Mon":"一","Form-Delete":"删除","Login":"登录","ChartF-Bar":"条形图","Need_Select_SAP_Task":"必须选择一个转换任务","Formula_Tips":"公式必须以\"=\"号开头！","Server-Open_Service_Manager":"打开服务管理器","Handle_Affairs":"处理事务","Plugin-ChartF_PointMap":"点地图","FR-Designer_Tree-Grade":"层","FR-Engine-Condition_Not_End_With":"结尾不是","Choose_None":"不选","CrossTable":"交叉表","FR-Chart-Map_Zhejiang":"浙江","FR-Designer-StyleAlignment_Style_Indentation":"缩进","FR-Designer_Join_Product_improve":"加入产品改良计划","FS-Plugin-SysMonitor_Operation_Print":"打印","FR-Designer_Bottom":"下","FS-Generic-Simple_Criterion":"分类标准","FR-Designer_Input_Rule":"填写规则","Form-NullLayout":"绝对定位","ChartF-Grid_Line":"网格线","ProcessManager":"流程管理","SignIn-Confirm_Closing_The_Designer":"确认退出设计器？","FR-Engine_PageSetup-Landscape":"横向","FR-Engine_RP_Deal_With_It_As_Soon_As_Possible":"请尽快处理","Current_Node_Staff":"本节点人员","Datasource-Are_you_sure_to_delete_the_selected_class_datasource":"你确定删除选中的程序数据源吗","LIC-Support_Online_Write":"填报（非多源）","Dimension":"维度","ChartF-Comb_Chart":"组合图","Basic_Setting":"基本设置","Function_Name_Should_Not_Be":"函数名不应该是","Mobile-show":"移动终端报表展现","FR-Designer_End-Date":"结束日期","Registration-Concurrency":"并发数","FR-Designer_Parameter":"参数","FS-Generic-Already_End":"已结束","M_Format_E-Cell_Expand_And_FatherCell":"扩展与父格(E)","ChartB-Add_Summary":"增加汇总","FR-Engine_pageModule":"分页模块","Include":"包括","PageSetup-Repeated_Title":"重复的标题","Chart_DiscardOtherSeries":"不保留其他图例项(系列)","Undo_Authority":"撤销前一次权限编辑的所有操作","FR-Designer_Pagination":"分页","FR-Engine_JavaScript-Commit_to_Database_Failed":"提交入库失败","FS-Generic-Simple_Send":"发送","FR-Designer_LiteCondition_Define":"定义","M_Insert-Date":"日期(D)","FS-Report-Input_Cpt_Name":"请输入报表名字","FR-Engine_Please_Set_Repeat_First":"请先设置重复标题行和列","FR-Designer_Normal":"正常","FR-Basic_Today":"今天","ChartF-Stacked":"堆积","DBCP_TEST_WHILE_IDLE":"开启空闲回收器检验","Plugin-ChartF_Axis_Rotation":"坐标系翻转","Tips:You_Can_Input_B1_To_Input_The_Data_Of_The_First_Row_Second_Column":"提示:您可以通过输入B1来写入第一行第二列的数据。","Chart-Use_Value":"值","WF-Previous_User":"先前用户","FR-Engine_LayerReport":"行式引擎","Form-Target":"目标","FR-Engine_Enter_Task_Name":"请输入任务名称","FR-Designer-Basic_Restart_Designer":"重启设计器","FS-Monitor-Total_Memory":"所有内存","EmailPane-warnings":"您尚未配置发件邮箱，请登录平台进行配置或者联系管理员","User_TableData":"用户数据集","FR-Engine_Short-Feb":"二","Feature_Name":"功能名称：","NS_exception_deathCircle":"错误代码:1303 单元格计算死循环","Chart-Chart_Alert":"警戒","DashBoard-MainFunction":"主要功能一览","FR-Basic_Loading":"正在加载","FS-Generic-Simple_Type":"类型","Docking-Fix":"固定","GroupB-Page":"分页","FR-Designer_M-Exit":"退出","Server_Usage":"服务器使用情况","StartSuccessfully":"启动成功","Modify_Column":"修改列","FR-Designer_Select":"选择","Data_Submit_Error":"数据提交出错","Plugin-ChartF_Gauge_Pointer":"多指针的仪表盘360度","FS-Privilege-Grade_Authority":"分级授权","WF-Previous_User_Relation":"与先前用户关系","FR-Chart_DataLabelInside":"数据标签内","CellWrite-Page_Before_Column":"列前分页","Custom_Button_Target_Type":"提交窗口模式","Register_Version":"注册版本","CellWrite-Flag":"标志","Utils-The-WorkBook":"模板","FR-Chart-Column_Van":"柱形图(新特性)","FR-Designer_PaperSize-Mobile-Small":"手机小屏","FR-App-Template_Form":"表单","FR-Engine_Privilege_Allocate":"权限分配","Default_value":"参数默认值","Custom_Roles":"自定义角色","FS-Monitor-Model_Using":"使用中","Want_To_Cover_It":"是否想覆盖它","NS_LayerReport_expandAttr":"错误代码:1104 行式引擎只支持从上到下扩展属性，其它属性设置均不支持","Utils-Current_Row":"当前行","Chart-Layout_Right":"右侧","FR-mobile_native_analysis":"原生解析","Divided_stage":"划分阶段","Utils-Left_to_Right_a":"从左往右","FR-Designer-Plugin_All_Plugins":"全部插件","Import_Export-Excel":"Excel格式","FS-System-Connection_Pool":"连接池","FS-Report-Add_Template_Width":"58","FR-Designer-Plugin_Plugin_Description":"插件描述","DashBoard-ChartFloat":"图表","FR-Designer-Estate_Any":"不限","Original":"原有","FR-Designer_Index":"列轴/指标","FR-Designer-Plugin_Uninstall_Successful":"插件卸载成功，请重启服务器","RP_Alert_Mode":"提醒方式","Form-EC-WebAttr-toolbar":"是否需要表单工具栏","ChartF-Funnel":"漏斗图","Plugin-ChartF_Change":"可调整","FS-Plugin-SysMonitor_Template":"模板","Chart-Area_Title":"区域标题","Chart-Default_Name":"默认","FR-Chart-Data_CombineOther":"合并剩余项为\"其它\"","FR-Engine_HJS-Specified_Pages":"指定页","Define":"定义","Chart_Exponent":"指数拟合","Reload":"重载","Export-Text":"文本文件(制表符分隔)","HF-Insert_New_Line":"插入换行符","Task_List_To_Choose":"可选任务列表","FR-Desinger-Plugin_Updater_VersionUpgrade":"版本升级：","FR-Chart-Version_Local":"当前版本","FS-Generic-HJS_CC_To":"抄送","FR-Designer_Background":"背景","GroupB-Report_Header_Page":"报表眉分页","baseModule":"基础模块","Always_Execute":"始终执行","FR-Designer-Widget-Style_Common":"普通","Free_Report_Wizard":"自由报表向导","ExtraRepeatTime":"额外重复执行次数","FR-Designer_Mobile-Horizontal":"横屏","FR-Engine_Excel_poi_2007":"错误代码:1207 导入Excel2007需要在lib目录下放置poi包","FR-Utils-App_AllFiles":"所有文件","FR-Engine-Err-The_Number_Is_Larger_Than_The_Maximum_Value":"值大于允许输入的最大值","Layer-Wake_Up_Thread_For_Page_Retriever":"唤醒取页面线程","FR-Engine_Email":"邮件","Mobile_BI":"移动决策平台","PostAttachment":"上传附件","FR-Engine_RP_Alert_Mode":"提醒方式","AddFailed":"添加失败","Edit_Button_ToolBar":"编辑按钮所在工具栏","Forbid_Drag_into_Adapt_Pane":"该对象不允许拖入表单主体","Scheduler-parameters_were_found_,_Are_you_sure_to_apply_now":"参数被发现，您是否要应用","Row-Axis":"行轴","Utils-File_type":"文件类型","FS-Schedule-Interval_Execute_Once":"执行一次","FS-Special-Sure_To_Delete":"你确定要删除这个模板吗","Year":"年","Schedule-Remove_Task":"删除任务","Chart-Link_Web":"网页链接","FR-Chart-TimeUnit_Year":"年","FR-Designer_Rename":"重命名","Preference-Menu_Configuration":"菜单配置","BackgroundTexture-Oak":"橡木","Highlight-Click_to_Choose_Property_To_Modify":"点击选择要改变的属性","FS-Monitor-Log_Setting":"日志设置","M-Page_Setup":"页面设置","FR-Base_August":"八月","AnalysisLine":"分析线","file-is-locked":"您所要打开的报表正在被其他人编辑，请稍候打开","FR-Lic_does_not_Support_Remote":"您当前使用的lic不支持远程设计功能，请升级您的lic","FR-Chart-Category_Name":"分类","Docking-Unpin":"不固定","RP_Node_Description":"节点描述","FR-Designer_Clear_All":"清除全部","FR-Engine-Loading_PDF":"正在加载PDF","Index":"列轴/指标","Chart-Stock_Volume":"成交量","Utils-Selected_Option":"已选项","NS_exception_readError":"错误代码:1305 模板文件解析出错","Need":"需要","CellWrite-Preview_Cell_Content":"预览单元格内容","FRFont-Shadow":"阴影","FR-Basic_Calendar":"日历","FS-Schedule-Please_Select":"请选择","StyleAlignment-Single_Line(Adjust_Font)":"单行显示(调整字体)","ChartF-Icon_Border_Color":"图标边框的颜色","Failed":"失败","FormulaD-Date_&_Time":"日期和时间函数","Color":"颜色","Plugin-ChartF_Location":"定位","Setting-Ruler-Units":"标尺单位设置","Datasource-Maximum_Number_of_Preview_Rows":"最大的预览行数","DS-Databse_Info_Save_Des":"全局数据库连接信息保存在全局文件\"/WEB-INF/resources/datasource.xml\"，里面供所有的模板文件调用。","ChartF-Legend_Count":"图例个数","User-DefinedType":"自定义类型","Sche-Week":"星期","Logarithmic":"对数刻度","Plugin-Chart_Alpha":"透明度","FS-Generic-Sure_To_Delete":"确认删除","FR-Basic_Report":"报表","FS-Generic-EmailPane_BCC":"密送","FS-Monitor-Suggestion_Add_Name":"建议增加名为","Description_things":"描述","Unit_Hundred_Million":"亿","ToolBar_Top":"顶部工具栏","Re-system-version":"系统版本号","FS-System-Event_Submitfailure":"提交失败","M_Window-Frozen_WindowGrid":"冻结窗格(F)","FR-Engine_FreezeWarning1":"初始值不大于尾值","Schedule-Template":"模板名称","RP_Task_Operations":"任务操作","M-Repeat-Freeze":"重复与冻结设置","Env-Invalid_User_and_Password":"非法的用户名或密码","Agency":"机构","FR-Designer-Widget-Style_Border_Color":"边框颜色","FS-Msg-Delete_Chosen":"插件已被刪除,重启服务器后生效","FS-Monitor-Suggestion_FS_Report":"模板可能被删除或者移动位置，建议删除FS报表管理里对应模板或者修改其位置","Purple":"粉紫","BorderLayout-North":"北","hasRelation":"相关","plugin-ChartF-MatchColor":"配色","Image":"图片","Utils-Switch_To_Class_Reportlet":"切换到程序网络报表","Create_Free_Report":"创建自由报表","ExpandD-Expand_Direction":"扩展方向","Env-Des2":"Servlet位置是主机名，端口，WEB应用，Servlet的组合，它应当指向一个Servlet，比如\"http://localhost:8080/WebReport/ReportServer\"。您可以选择填写主机名，端口，WEB应用，Servlet，它会自动生成您所需要的Servlet位置。","Plugin-ChartF_LineStyle":"线型","product_feedback":"产品反馈","General-ToolBar":"普通工具栏","FS-Mobile-Add_Mac_Address":"添加mac地址","Example":"例如","ReportServerP-Edit_Printer":"编辑打印机","FR-Engine_Parameter-Integer":"整型","This_Template_Has_Exist":"这个模板已经存在","I-PieStyle_Normal_Seperate":"分离饼图","Platform_Module_WidgetletManager":"主页控件库管理","Page_Number":"页","Utils-Segment_Not_existed":"不存在表字段","Actions":"任务","M_Window-Preference":"选项","Show_Blank_Column":"补充空白列","M_Help-API_Document":"二次开发的API文档(A)","FR-Designer_Form-TextArea":"文本域","Utils-Would_you_like_to_save_the_report":"","Utils-Insert_Record":"插入记录","Beijing":"北京","WF-Work_Flow":"工作流","CellWrite-Hide_Row_If_Null":"当空值时隐藏当前行","ECP_start_encode":"开始加密","Over-Sheet":"跨Sheet计算","FRFont-Effects":"特殊效果","Select_Date":"选择日期","FR-Designer_Remove":"删除","HF-Edit_Header/Footer":"编辑页眉/页脚","FR-Designer_Fit-Elementcase":"表单报表块自适应属性","FR-Designer_Form_Module":"表单模块","Frame":"框架","Chart-StyleAlignment_Bottom":"靠下","Plugin-Memory_Alarm_Heartbeat":"心跳","Event-beforepdfprint":"PDF打印前","FR-Designer-BBSLogin_Username-Empty-Tip":"用户名不能为空","FR-Designer_I_Want_To_Set_Single":"为该模板单独设置","FR-Engine-PageSetup_Portrait":"纵向","FR-Engine_SSAS-TableData":"SSAS数据集","FR-Basic-Email_Message":"内容","SAP_column_name":"SAP列名","Form-Iframe":"网页框","MSBold":"微软雅黑","FR-Designer_Connect_SQL_Cannot_Null":"数据连接和SQL面板不能为空","FR-Template-Path_chooseRightPath":"请选择正确路径","Save_Result":"保存结果","FR-Designer-Widget-Style_Frame_Style":"框架样式","INFO-Start_Reading_XML":"开始读XML","BiasD-Slope_Line":"斜线","FR-Engine_NameWidget-Name":"预定义控件名称","Plugin-Memory_Alarm_Unit_Min":"min","M_Insert-Boolean":"布尔数值(O)","Plugin-ChartF_Level":"层次","fs_process_para_message_tip":"注：编辑后会同时修改选中流程中的流程数据项","Export-Excel-LargeData-Page-Info":"请耐心等待文件的生成，所花费的时间将视数据量的大小而定，在此过程中请勿关闭当前页面或浏览器。","FR-Designer_Sche-Week":"星期","About-All_Rights_Reserved":"保留所有的权利","the_template":"该模板","ChartF-Volume-Open-High-Low-Close":"成交量-开盘-盘高-盘低-收盘图","Enlarge_Or_Reduce":"缩放","ParameterD-The_Second_List":"第二个列表","Data_Setting":"数据设置","NotSupportIMG&ReportData":"不支持图片形式和单元格数据源","Utils-Default_Value":"默认值","LIC-Support_Multi_Env":"多报表运行环境","Import-Translate":"转换","FR-Widget_Mobile_Table":"移动端控件列表","FR-Chart-Line_Van":"折线图(新特性)","TaiyuanCity":"太原市","File_Error":"文件解析错误","Cell":"单元格","FS-Web-Plugin_Install_Failed":"插件安装失败","CellWrite-Hide_Cell":"隐藏单元格","FR-Chart-Gap_Series":"系列间隔","FR-Designer-StyleAlignment_Layout_Default":"默认","CommaDismenber":"逗号","RP_Urgent":"紧急","CellWrite-ToolTip":"内容提示","MConfig-CancelButton":"取消","M_Report-Report_Columns":"报表分栏","FS-Admin-Unknown_Error":"未知错误，若无法登录请重启服务器重新设置","FS-Schedule-Simple_Execute_Time_Unit_Month":"执行月","FR-Engine_RP_Node_Name":"节点名称","File-Create-Failed":"文件创建失败","Warnning":"提醒","Return_set_name":"返回集","MainGraduationLine":"主要刻度线","ChartF-RadarAxis":"雷达轴","Height":"高度","Click-Me":"点我有惊喜哦！","FR-Designer-Form-ToolBar_Widget":"控件","Gradient_Left_Color":"渐变色左区域","Env-Des1":"请选择报表服务器所在的WEB-INF目录","M-Data_Analysis":"数据分析","BorderLayout-South":"南","FR-Chart-Axis_labelShowway":"显示方式","User_Defined_Event":"自定义事件","FR-Designer_Export-Save-Formula":"导出/编辑结果时,保留公式","DataList":"数据链","Chart-Series_Drag":"系列拖拽","FS-Monitor-Log_Copy":"日志清理后将被自动备份","FR-Engine_Confirm":"确认","I-HBarStyle_3D":"三维簇状条形图","FS-User-Do_Select_Department":"请选择部门","Sche-Thursday":"星期四","FR-Engine-Page_Number":"页码","Form-EC_heightrestrict":"手机显示限制高度","Data_Fields_will_be_displayed":"将要显示的数据字段","Chart-Scatter_Name":"散点","ParameterD-Should_select_a_reportlet_first":"需要先选择一个Reportlet","FR-Engine-NS_export_excelCellBg":"错误代码:1112 导出Excel单元格背景只支持纯色","Output_Excel":"Excel输出","FR-Engine_Hana-database":"Hana数据库","M-Popup_ChartOption":"图表选项","Utils-Merge_datasource_files_successfully":"合并数据源文件成功","Sure_To_Open_Synch_Data_Sets":"确定要开启同步数据集","FR-Engine-Condition_Not_In":"不包含于","ExpandD-Expand_Type":"扩展方式","For_Help_press F1":"寻求帮助，请按F1","FS-Plugin-SysMonitor_Template_Name":"模板名称","SQLWizard-pack_all_entities":"最小化所有实体","Perspective Projection":"透视投影","FS-Monitor-Server_Setting_Detection":"服务器配置检测","FR-Engine_Offline-ReadMe":"打开html文件进行离线填报，数据将实时保存在本地。\r\n联网后可以将本地数据提交至服务器端。\r\n若要移动文件，请拷贝整个文件夹。\r\n注：手动清除浏览器缓存(Cookie)会导致数据丢失。","After_Click_Widget_Show":"点击单元格后显示控件","StyleAlignment-Vertical":"垂直对齐","Sytle-Indentation":"缩进","Not_Allow_To_Upload_File":"是禁止上传的文件类型","Dic-Only_Can_Delete_DataDictionary":"只能删除数据字典","Cannot-Add_To_This_Area":"无法添加到该区域","FR-Engine-Sort_Descending":"降序","Plugin-ChartF_Level_Order":"层级序号","PostCode":"邮政编码","FR-Engine_Please_Enter_Role_Name":"请输入角色名称","PDF_Print":"PDF打印","FS-Admin-Authentication_failed":"验证失败","RP_Cpt_Operation":"模板操作","Verify-ToolTips":"不满足公式提示校验出错信息","FS-Template_Add_Parameter":"添加参数","StyleAlignment-Text_Style":"文本控制","Max_Peak_Limit":"最大连接数","ToolBar_Bottom":"底部工具栏","Plugin-ChartF_Up_Tree_Map":"上侧","FR-Engine_Please_Select":"请选择","Version-does-not-support-map":"您当前使用的lic不支持地图功能，请升级您的lic","FormulaD-Valid_Formula":"合法的公式","Scheudle-Invalid_Template_File_Name":"无效的模板文件名","RP_Sender":"发送人","FR-Designer_Restore_Default":"恢复默认","FR-Designer-Basic_Activation_Key_Copy_OK":"已复制到剪贴板","FS-Generic-Save_Path":"保存路径","AbsoluteLayout":"绝对定位","IS_Need_Password":"需要密码","M_Edit-Bring_to_Front":"置于顶层(T)","Task_Has_Been_Closed":"这个任务已经关闭","Needle":"指针","Parameter-Formula":"公式","Function-Program_Function":"程序函数","Plugin-ChartF_Close":"关闭","FR-Designer-Local_file":"本地文件","clickToCancel":"已经被删除，无法操作！","FR-Designer_Confusion-key":"混淆关键字","FS-Generic-Privilege_Name_Not_Match_Password":"用户名和密码不匹配","Chart-SetMainGridStyle":"设置主要网格线格式","FS-Reg-Fail_Tip":"服务器授权文件的产品版本与实际系统的版本不符，请尽快重新申请","Please_Rename":"请重命名","FR-Designer-FRFont_Line_Style":"线型","DashBoard-ReportsPrint":"零客户端报表打印","Meter-Style":"仪表盘风格","This_ScheduleTask_Is_Not_Exsit":"这个定时任务不存在","FR-Engine_STXingKai":"华文行楷","Event-showWidgets":"直接显示控件","Utils-Can_not_find_the_corresponding_TableData":"未找到对应的数据集","Plugin-ChartF_Bottom_Data_Sum":"底层数据汇总","BorderLayout-Center":"中","WF-Basis":"基本属性","FR-Designer_FormulaD-Report":"报表函数","Row_Cell":"竖格","General":"常用","FS-System-Config_Backup_Complete":"备份完成","FR-Base_Short_Dec":"十二","Sche-Sunday":"星期日","Column_Measure":"列轴/度量值","Prepare_Export":"开始导出，请稍候","FS-Mobile_Unauthorized_Users":"未授权用户","FS-Schedule-Execute_Period_Time_Unit_Month":"每月","FS-Generic-Simple_Query":"查询","FS-System-FlashP_Need_Page_Selection":"需要Flash打印页码选择窗口","StartValue":"开始值","Utils-Merge_Cell":"合并单元格","Inside":"内部","Driver":"驱动器","Chart-Use_Refresh":"刷新","FR-Engine_RP_Deliver":"分发","FS-System-Report_Manager_Detection":"报表管理检测","FR-Base_is":"是","FR-Engine_Alert":"警告","Use_FormulaGroup":"使用公式分组","Chart-Unit_Hundred_Million":"亿","ChartF-PieNoneSeperate":"不分离","FR-Basic-File_All_File_Uploaded":"所有文件已上传","Schedule-Edit_Time":"编辑时间","FR-Engine_Please_Rename":"请重命名","ReportServerP-Pre_concurrency":"优先访问的并发数","Y_Axis":"Y轴","FS-Frame-Button_Refresh":"刷新","Plugin-ChartF_NewRadar":"雷达图（新特性）","FR-Designer_Fit-App":"App自适应","ColorMatch":"配色","I-BarStyle_Normal":"簇状柱形图","FR-Designer-Widget-Title_border_color":"颜色","FR-Designer_Allow_Decimals":"允许小数","HF-Edit_Header":"编辑页眉","FR-Designer_Widget-Settings":"控件设置","FS-User-Department_Management":"机构部门管理","D-Dispaly_Divide_Result_Set_into_Groups":"将结果集进行分组","FS-Schedule-Step_Margin_Left":"22","Local-file":"本地文件","Platform":"平台","FR-Desinger-Plugin_Updater_Already_Latest_Version":"已经是最新版本","Import_Again":"重新导入","FR-Engine-Please_Install":"请安装","At_least_one_visual_worksheet":"工作簿中至少要有一张可视化工作表,如果想要删除，请先插入一张新工作表","Para-Help_Info":"您可以点击下方工具栏最左侧按钮或右键单元格来添加参数控件、查询按钮等元素","Plugin-ChartF_Layer_PlainJane":"素雅","CapsLock":"大写锁定已打开","Neimenggu":"内蒙古自治区","seconds":"秒","FR-Base_Sche_Second":"秒","Chart-Step_Index":"步骤序号","Form-Allow_Edit":"允许直接编辑","Plugin-ChartF_Rotation":"可旋转","FR-Engine_SimgleNumber":"号","FR-Designer-Plugin_Install_Failed":"插件安装失败","Form-Layout":"布局","FRFont":"字体","FR-App-File_Message":"信息","FR-Engine_Lic_Update":"当前版本不支持Flash零客户端打印, 请升级您的lic","BackgroundTexture-Granite":"花岗岩","SQLWizard-would_you_like_to_continue":"是否想继续","ChongqingInCity":"重庆市区","FR-Designer_Form-Forzen-Speed":", 并使用横向或双向自适应来提升展现速度.","FS-Plugin-SysMonitor_Query":"查询","FR-Designer-Estate_Default_Font":"默认字体","Next":"下一步","ChartF-Alpha":"不透明度","Chart-DS_Embedded_TableData":"内置数据集","FS-Frame-Delete_Data":"删除数据","FR-Designer_Add_JS_warning":"请输入如实例所示的正确的url地址!","BindColumn-Extend_the_conditions_of_fatherCell(Applied_to_the_data_contains_other_data)":"将父格子作为过滤条件(适用于父子格来自于同一个数据集)","FR-Designer_Y_Coordinate":"纵坐标","PolyAccessWarning-NotSupport":"您所访问的模板含有聚合报表，它并不支持","RP_Son_Task_Not_Complete":"子任务尚未完成","Whether_Reinstate_Report":"是否恢复原有报表","FS-Generic-Import_2":"导入","Plugin-ChartF_YES":"是","FR-Engine-Condition_Equals":"等于","Cannot_Get_Date_Format":"不能获取日期格式","FS-CustomStyle_Toast_Prompt":"提示","BindD-Need_to_select_columns_to_display":"需要选择列","I-Message_FunctionGrouper_2":"默认的\u201c$$$\u201d为当前值，相当于不做函数处理","I-Message_FunctionGrouper_1":"您可以通过函数处理的结果进行分组和显示","BorderLayout-East":"东","Waring_you":"您选中了多个单元格！","Chart-Bubble_X":"气泡值X","FS-Privilege-Simple_View":"权限项查看","Plan":"计划","WorkSheet":"自由报表","FR-Chart-Map_Henan":"河南","Active_Connection_Size":"活动连接数","Action-Type":"操作类型","FS-Report-Add_Link":"添加链接","FS-Generic-Simple_Time":"时间","Vertical-Split_Layout":"垂直分割布局","Plugin-ChartF_View_Center":"中心点","FR-Designer_Column":"列","BackgroundTexture-Sand":"沙滩","Chart-Meter_Field":"分段区域","Import-Excel_File":"Excel文件","Report-WorkFlow_Attributes":"工作流属性","FS-Generic-Report_Type":"类型","FR-Designer_Dimension":"维度","FS-Generic-I_Created":"我创建的","Chart_PaintInSeries":"系列内填充","FS-User-Delete_Template":"删除这个模板","Plugin-Memory_Alarm_Live_Time":"存活时间","FS-Mobile-Report_Cover":"报表封面","FS-Report-Simple_Path":"路径","FS-Generic-DataFunction_None":"无","ChartF-Sets_Alert_Range":"设置警戒区域","FS-Schedule-Task_Name_Should_Not_Be_Empty":"任务名称不能为空","FR-Chart-Map_Shanxi":"山西","FR-Engine_SAP-TableData":"SAP数据集","FS-User-Simple_Authentication":"认证方式","StyleFormat-Sample":"示例","SpecifiedG-New_Group":"新建组","FR-Engine-Write_Submit_Failed_Reminder":"提交失败智能提示","3D-Style":"三维格式","Setting":"选项","Please_Select":"请选择","Recursion":"递归","Printer-All_Printers":"所有打印机","FormulaD-Logical":"逻辑函数","FR-Designer_Image":"图片","FR-Basic_Cancel":"取消","FR-Engine-NS_exception_readError":"错误代码:1305 模板文件解析出错","FS-Frame-Simple_Save":"保 存","Please_Enter":"请输入","Privilege-Select_Roles":"选择角色","SAP":"SAP","ModifySecretWillRemoveUser":"修改加密方式会清空已有用户数据","FS-Admin-First_Set_Platform":"您是第一次使用报表管理平台，请先配置您的管理员用户名和密码","Printer-Alias":"别名","FR-Chart-Area_Van":"面积图(新特性)","Datasource-Database_Type":"数据库类型","Shaanxi":"陕西省","FR-Designer-Website_Url":"http://www.finereport.com/","Printer-Edit_All_Printer_Groups":"编辑所有打印机组","Custom_styles_lost":"自定义样式已丢失","Out_Border_Line":"外侧框线","Plugin-ChartF_Custom_Axis":"自定义坐标轴","FR-Utils-Please_Input_a_New_Name":"请输入新的名字","M_Edit-Clear":"清除(A)","FR-Engine_Importing":"导入中","Add_Member":"添加人员","ReportColumns-None":"不分栏","Function_browser":"函数浏览","FR-Designer_COMMUNITY_SIGN":"帆软认证","Plugin-ChartF_ValueDefinition":"值定义","FS-Schedule-Execute_Period":"调度周期","satisfy":"满足条件","FR-Engine-Choose_None":"不选","Plugin-ChartF_AlertSet":"警戒线设置","FR-Chart-Env_Directory":"图表工作目录","FS-Privilege-Post_All":"所有职务","FS-Reg-Unregister_Version":"当前版本未注册","Common_Condition":"普通条件","Plugin-ChartF_WMS_Layers":"wms图层","FR-Designer_Output_PDF":"PDF输出","FS-Reg-Unregister_Tip":"提示：当前应用的WEB-INF/resources路径下未发现服务器授权文件！请尽快导入授权文件并完成注册\n未注册版本同时可访问模板IP个数限制为2个！","Chart-Unit_Hundred_Thousand":"十万"},
    /**
     * 根据键获取国际化后的值
     * @param key 键
     * @returns {String} 国际化后的文本
     * @example
     *    FR.i18nText("Click");//输出结果为"点击"
     *    FR.i18nText("Sum({R1}, {R2}) = 3", 1,2);//输出结果为"Sum(1, 2) = 3"
     */
    i18nText: function (key) {
        var localeText = FR.i18n[key];
        if (!localeText) {
            localeText = key;
        }
        var len = arguments.length;
        if(len > 1){
            for(var i = 1;i<len;i++){
                var key = "{R"+i+"}";
                localeText = localeText.replaceAll(key, arguments[i]+"");
            }
        }
        return localeText;
    },

    /**
     * 获取不需要国际化的中文字符串
     * @param key 中文字符串对应的键
     * @returns {String} 中文字符串
     */
    plainText : function(key) {
        return this.chinese[key] || key;
    }
});if(window.FR==null){window.FR={}}$.extend(FR,{$defaultImport:function(){var a=arguments;if(a[0]!=null){a[0]=FR.servletURL+"?op=resource&resource="+a[0]}this.$import.apply(null,a)},$import:function(){var b={};function a(d,c){var f=$("head script");$.each(f,function(g,h){if(h.src.indexOf(d)!=-1){b[d]=true}});var e=$("head link");$.each(e,function(g,h){if(h.href.indexOf(d)!=-1&&c){b[d]=false;$(h).remove()}})}return function(g,e,c){a(g,c);if(b[g]===true){return}if(e==="css"){var f=document.createElement("link");
f.rel="stylesheet";f.type="text/css";f.href=g;var d=document.getElementsByTagName("head")[0];d.appendChild(f);b[g]=true}else{$.ajax({url:g,dataType:"script",async:false,complete:function(i,h){if(h=="success"){b[g]=true}}})}}}()});
$.extend(FR,{Events:{NOSELECT:"NOSELECT",EDITDATA:"EDITDATA",REMOVEDATA:"REMOVEDATA",REMOVESELF:"REMOVESELF",RESIZE:"_resize",BEFOREEDIT:"beforeedit",AFTEREDIT:"afteredit",VALUECHANGE:"valuechange",STOPEDIT:"stopedit",CHANGE:"change",EXPAND:"expand",COLLAPSE:"collapse",STATECHANGE:"statechange",CALLBACK:"callback",CLICK:"click",BEFORESTATECHANGE:"beforestatechange",DEALSELECTEDNODES:"dealselectednodes",AFTERBUILD:"afterbuild",AFTERREAD:"afterread",APPENDDATA:"appenddata",DEFAULTINIT:"defaultinit",TABCHANGE:"tabchange",TABCHANGESTART:"tabchangestart",SCROLLCHANGE:"scrollchange",AFTERINIT:"afterinit",STARTLOAD:"startload",AFTERLOAD:"afterload",INIT:"init",CELLVALUECHANGE:"cellvaluechange",BS:"beforesubmit",AS:"aftersubmit",SC:"submitcomplete",SF:"submitfailure",SS:"submitsuccess",BVW:"beforeverifywrite",AVW:"afterverifywrite",AV:"afterverify",BW:"beforewrite",AW:"afterwrite",WS:"writesuccess",WF:"writefailure",BA:"beforeappend",AA:"afterappend",BD:"beforedelete",AD:"beforedelete",UC:"unloadcheck",BTOPDF:"beforetopdf",ATOPDF:"aftertopdf",BTOEXCEL:"beforetoexcel",ATOEXCEL:"aftertoexcel",BTOWORD:"beforetoword",ATOWORD:"aftertoword",BTOIMAGE:"beforetoimage",ATOIMAGE:"aftertoimage",BTOHTML:"beforetohtml",ATOHTML:"aftertohtml",BIMEXCEL:"beforeimportexcel",AIMEXCEL:"afterimportexcel",BPDFPRINT:"beforepdfprint",APDFPRINT:"afterpdfprint",BFLASHPRINT:"beforeflashprint",AFLASHPRINT:"afterflashprint",BAPPLETPRINT:"beforeappletprint",AAPPLETPRINT:"afterappletprint",BSEVERPRINT:"beforeserverprint",ASERVERPRINT:"afterserverprint",BEMAIL:"beforeemail",AEMAIL:"afteremail",CARDCHANGE:"cardchange"}});
$.extend(Array.prototype,{indexOf:function(c){for(var b=0,a=this.length;b<a;b++){if(FR.equals(c,this[b])){return b}}return -1},lastIndexOf:function(c){for(var a=this.length,b=a-1;b>=0;b--){if(FR.equals(c,this[b])){return b}}return -1},remove:function(b){var a=this.indexOf(b);if(a!=-1){this.splice(a,1)}return this},clear:function(){while(this.length>0){this.pop()}}});(function(){$.fn.swapClass=function(b,a){return b==undefined?this.removeClass().addClass(a):this.removeClass(b).addClass(a)};$.fn.switchClass=function(b,a){if(this.hasClass(b)){return(a||a===0)?this.swapClass(b,a):false
}else{return this.swapClass(a,b)}};$.fn.isChildOf=function(a){var c=this;var e=c[0];var d=a[0];var f=e.parentNode;while(f){if(f==d){return true}else{if(!f.tagName||f.tagName.toUpperCase()=="HTML"){return false}}f=f.parentNode}return false};$.fn.isChildAndSelfOf=function(a){return(this.closest(a).length>0)};$.fn.mousewheel=function(a){return this.each(function(){var b=this;b.D=0;if($.browser.msie||$.browser.safari||$.browser.chrome){b.onmousewheel=function(){b.D=event.wheelDelta;event.returnValue=false;
a&&a.call(b)}}else{b.addEventListener("DOMMouseScroll",function(c){b.D=c.detail>0?-1:1;c.preventDefault();a&&a.call(b)},false)}})};$.extend($.Event.prototype,{stopEvent:function(){this.stopPropagation();this.preventDefault()}})})();$.extend(String,{escape:function(a){return a.replace(/('|\\)/g,"\\$1")},leftPad:function(d,b,c){var a=String(d);if(!c){c=" "}while(a.length<b){a=c+a}return a.toString()},format:function(b){var a=Array.prototype.slice.call(arguments,1);return b.replace(/\{(\d+)\}/g,function(c,d){return a[d]
})}});$.extend(String.prototype,{startWith:function(a){if(a==null||a==""||this.length===0||a.length>this.length){return false}return this.substr(0,a.length)==a},endWith:function(a){if(a==null||a==""||this.length===0||a.length>this.length){return false}return this.substring(this.length-a.length)==a},getQuery:function(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)");var c=this.substr(this.indexOf("?")+1).match(b);if(c){return unescape(c[2])}return null},appendQuery:function(a){if(!a){return this}var b=this;
if(b.indexOf("?")===-1){b+="?"}if(b.endWith("?")!==false){}else{b+="&"}$.each(a,function(c,d){if(typeof(c)==="string"){b+=c+"="+d+"&"}});b=b.substr(0,b.length-1);return b},replaceAll:function(b,a){return this.replace(new RegExp(b,"gm"),a)},perfectStart:function(a){if(this.startWith(a)){return this}else{return a+this}},allIndexOf:function(b){if(typeof b!="string"){return[]}var e=this;var a=[];var d=0;while(e.length>0){var c=e.indexOf(b);if(c===-1){break}a.push(d+c);e=e.substring(c+b.length,e.length);
d+=c+b.length}return a}});$.extend(Function.prototype,{createCallback:function(){var a=arguments;var b=this;return function(){return b.apply(window,a)}},createDelegate:function(c){var d=this;var b=arguments[1];var a=arguments[2];return function(){var f=b||arguments;if(a===true){f=Array.prototype.slice.call(arguments,0);f=f.concat(b)}else{if(typeof a=="number"){f=Array.prototype.slice.call(arguments,0);var e=[a,0].concat(b);Array.prototype.splice.apply(f,e)}}return d.apply(c||window,f)}},createInterceptor:function(b,a){if(typeof b!="function"){return this
}var c=this;return function(){b.target=this;b.method=c;if(b.apply(a||this||window,arguments)===false){return}return c.apply(this||window,arguments)}},defer:function(c,e,b,a){var d=this.createDelegate(e,b,a);if(c||c===0){return setTimeout(d,c)}d();return 0},createSequence:function(b,a){if(typeof b!="function"){return this}var c=this;return function(){var d=c.apply(this||window,arguments);b.apply(a||this||window,arguments);return d}},getNameArguments:function(){var d=this.toString();var c=/function[^\(]*\(([^\)]*)\)/.exec(d);
var b=[];if(c!=null){b=c[1].split(",")}return $.map(b,function(a){return $.trim(a)})},arguments2Json:function(){var a=arguments;var b=this.getNameArguments();var c={};$.each(b,function(d,e){if(a.length>d){c[e]=a[d]}});return c}});if(window.FR==null){window.FR={}}if(window.FR.servletURL==null){window.FR.servletURL={}}$.extend(FR,{Plugin:{validLevel:function(d,c){var a=d.version||1;var b=c.version||1;return a>=b}}});var browser=function(){var d=navigator.userAgent.toLowerCase(),b=window.opera,c={ie:/(msie\s|trident.*rv:)([\w.]+)/.test(d),opera:(!!b&&b.version),webkit:(d.indexOf(" applewebkit/")>-1),mac:(d.indexOf("macintosh")>-1),quirks:(document.compatMode=="BackCompat")};
c.gecko=(navigator.product=="Gecko"&&!c.webkit&&!c.opera&&!c.ie);var a=0;c.isInnerHtmlSuitable=true;if(c.ie){var g=d.match(/(?:msie\s([\w.]+))/);var f=d.match(/(?:trident.*rv:([\w.]+))/);if(g&&f&&g[1]&&f[1]){a=Math.max(g[1]*1,f[1]*1)}else{if(g&&g[1]){a=g[1]*1}else{if(f&&f[1]){a=f[1]*1}else{a=0}}}c.ie11Compat=document.documentMode==11;c.ie9Compat=document.documentMode==9;c.ie10Compat=document.documentMode==10;c.ie8=!!document.documentMode;c.ie8Compat=document.documentMode==8;c.ie7Compat=((a==7&&!document.documentMode)||document.documentMode==7);
c.isInnerHtmlSuitable=(a==9&&c.ie9Compat)||(a==10&&c.ie10Compat)||(c.ie&&a===11&&c.ie11Compat);c.ie6Compat=a<7;c.ie8bellow=a<8;c.ie9above=a>8;c.ie9below=a<9;c.ie11above=a>10;c.ie11below=a<11}if(c.gecko){var e=d.match(/rv:([\d\.]+)/);if(e){e=e[1].split(".");a=e[0]*10000+(e[1]||0)*100+(e[2]||0)*1}}if(/chrome\/(\d+\.\d)/i.test(d)){c.chrome=+RegExp["\x241"]}if(/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(d)&&!/chrome/i.test(d)){c.safari=+(RegExp["\x241"]||RegExp["\x242"])}if(c.opera){a=parseFloat(b.version())
}if(c.webkit){a=parseFloat(d.match(/ applewebkit\/(\d+)/)[1])}c.version=a;return c}();$.extend(FR,{Browser:{r:browser,isIE6:function(){return browser.ie6Compat},isIE7:function(){return browser.ie7Compat},isIE8:function(){return this.getIEVersion()===8},isIE9:function(){return this.getIEVersion()===9},isIE10:function(){return this.getIEVersion()===10},isIE11:function(){return browser.ie&&browser.version===11},isIE8Before:function(){return this.getIEVersion()<9},isIE6Before:function(){return this.getIEVersion()<7
},isIE7Before:function(){return this.getIEVersion()<8},isIE9Later:function(){return browser.ie9above},getIEVersion:function(){return browser.ie?browser.version:undefined},isIE:function(){return browser.ie}}});(function(){$.extend(FR,{cjkEncodeDO:function(b){if($.isPlainObject(b)){var a={};$.each(b,function(d,c){if(!(typeof c=="string")){c=FR.jsonEncode(c)}d=FR.cjkEncode(d);a[d]=FR.cjkEncode(c)});return a}return b},ajax:function(a){if(a){a.data=FR.cjkEncodeDO(a.data)}$.ajax(a)},get:function(a,c,d,b){if($.isFunction(c)){b=b||d;
d=c;c=undefined}if(c){c=FR.cjkEncodeDO(c)}$.get(a,c,d,b)},post:function(a,c,d,b){if($.isFunction(c)){b=b||d;d=c;c=undefined}if(c){c=FR.cjkEncodeDO(c)}$.post(a,c,d,b)},param:function(b){b=FR.cjkEncodeDO(b);return $.param(b)},url:function(a,b){if($.isPlainObject(b)){return a+"?"+FR.param(b)}return FR.cjkEncode(a)},buildServletUrl:function(b,a){if(a){b=$.extend({_:(""+new Date().getTime())},b)}return FR.url(FR.servletURL,b)},resource:function(a){return FR.buildServletUrl({op:"resource",resource:a})},tc:function(c,b,a){try{return c.apply(b,a)
}catch(d){FR.Msg.toast(d.toString());throw d}},pick:function(){var a,c=arguments.length;for(var b=0;b<c;b++){a=arguments[b];if(typeof a!=="undefined"&&a!==null){return a}}return null}})})();(function(){$.extend(FR,{formulaEvaluator:function(d,b,a){var c=b;return function(f){if(f||c==undefined||a){try{if(FR.SessionMgr.getSessionID()){c=FR.remoteEvaluate(d)}}catch(g){}}return c}},remoteEvaluate:function(b){var a=null;b=encodeURIComponent(b);FR.ajax({url:FR.servletURL,type:"POST",async:false,data:{op:"fr_base",cmd:"evaluate_formula",sessionID:FR.SessionMgr.getSessionID(),expression:b},timeout:5000,complete:function(d,c){a=FR.jsonDecode(d.responseText);
a=a.result}});return a}})})();(function($){var COL_IDS="ABCDEFGHIJKLMNOPQRSTUVWXYZ";$.extend(FR,{limitData:500,constant:{success:"success",failure:"failure"},emptyFn:function(){},parseINT:function(str){return parseInt(str,10)},isWidthOrHeight:function(o){if(typeof o=="number"){return o>=0}else{if(typeof o=="string"){return/^\d{1,3}%$/.exec(o)||o=="auto"||/^\d+px$/.exec(o)}}},number2Percentage:function(number){return(~~(number*100))+"%"},isArray:function(a){return Object.prototype.toString.call(a)=="[object Array]"||a instanceof jQuery
},applyStyles:function($el,styles){if(styles){if(typeof styles=="string"){var re=/\s?([a-z\-]*)\:\s?([^;]*);?/gi;var matches;while((matches=re.exec(styles))!=null){$el.css(matches[1],matches[2])}}else{if(typeof styles=="object"){$el.css(styles)}else{if(typeof styles=="function"){FR.applyStyles(dom,styles.call())}}}}},showMenuByEvent:function(o,evt,evtPosition){if(evtPosition===true){FR.showMenuByLocation(o,{left:evt.clientX,top:evt.clientY},{left:-2,top:-2})}else{if(evt.target){FR.showMenuByEl(o,$(evt.target))
}else{FR.showMenuByLocation(o,{left:evt.clientX,top:evt.clientY+10})}}},isEmptyArray:function(array){if($.isArray(array)){if(array.length===0){return true}else{if(array.length===1){return array[0]===""}}}return false},applyFunc:function(obj,func,param,defaultValue){if((typeof func)=="function"){return func.apply(obj,param?param:[])}return defaultValue},encodePrecentPlus:function(s){if(typeof(s)=="string"){s=s.replace(/%/gi,"%25");s=s.replace(/\+/gi,"%2B")}else{if(FR.isArray(s)){for(var i=0;i<s.length;
i++){s[i]=FR.encodePrecentPlus(s[i])}}}return s},showMenuByEl:function(o,$el){var menu;if($el.fr_menu&&$el.fr_menu.menu&&(FR.equals($.extend({xxxMMenu:true},o),$el.fr_menu.opts)||$el.fr_menu.menu.close())){menu=$el.fr_menu.menu}else{o.$el=$el;menu=FR.createShortMenu(o);delete o.$el}var modify=1;if($el.offset().top<menu.$menuRoot.height()+modify||$el.offset().top+$el.height()+modify+menu.$menuRoot.height()<document.body.clientHeight){var offsetTop=$el.offset().top+$el.height()+modify}else{var offsetTop=$el.offset().top-menu.$menuRoot.height()-modify
}o.xxxMMenu=true;menu.show();menu.position($el.offset().left,offsetTop);$el.fr_menu={menu:menu,opts:o}},showMenuByLocation:function(o,location,modify){if(!modify){modify={left:0,top:0}}var menu=FR.createShortMenu(o);FR.showWithMenu(menu,location,modify)},showWithMenu:function(menu,location,modify){if(location.left<menu.$menuRoot.width()+modify.left||location.left+modify.left+menu.$menuRoot.width()<document.body.clientWidth){var left=location.left+modify.left}else{var left=location.left-menu.$menuRoot.width()-modify.left
}if(location.top<menu.$menuRoot.height()+modify.top||location.top+modify.top+menu.$menuRoot.height()<document.body.clientHeight){var top=location.top+modify.top}else{var top=location.top-menu.$menuRoot.height()-modify.top}menu.show();left=$.browser.msie?left-5:left;top=$.browser.msie?top-5:top;menu.position(left,top)},versionRemind:function(o){var jo=FR.jsonDecode(o);if(jo.exception=="failpass"){var msg=FR.i18nText("FR_FS-FailPass_ImproveYourVersion");if(jo.func){msg=jo.func+", "+msg}FR.Msg.toast(msg);
return false}return true},createShortMenu:function(o){o=$.extend({minWidth:80,destroyOnClose:true},o);return new FR.frMenu(o)},doHyperlink:function(){function _doHyperlink(data){new Function(unescape(data))()}return function(evt,obj,evtPosition){if($.isArray(obj)){switch(obj.length){case 0:return;case 1:FR.doHyperlink(evt,obj[0]);break;default:var _noMenuHyperlink=function(data){return data&&(data.indexOf("chart_Change_Parameter")>=0||data.indexOf("_g().name_widgets[")>=0)};var noMenuHyperlink=[];
var otherHyperlink=[];for(var i=0;i<obj.length;i++){var data=obj[i].data;if(_noMenuHyperlink(data)){noMenuHyperlink[noMenuHyperlink.length]=obj[i]}else{otherHyperlink[otherHyperlink.length]=obj[i]}}for(var i=0;i<noMenuHyperlink.length;i++){try{_doHyperlink(noMenuHyperlink[i].data)}catch(e){FR.Msg.toast(e.message)}}switch(otherHyperlink.length){case 0:return;case 1:FR.doHyperlink(evt,otherHyperlink[0]);break;default:FR.showMenuByEvent({items:$.map(otherHyperlink,function(cfg){return{src:cfg.name,handler:_doHyperlink.createCallback(cfg.data)}
})},evt,evtPosition||false)}}}else{_doHyperlink(obj.data)}}}(),doHyperlinkByGet:function(url,para,target,feature){if(arguments.length<1){return}var options=arguments[0];if(typeof options==="object"){url=options.url||"";para=options.para||{};target=options.target;feature=options.feature}para=$.extend({_:new Date().getTime()},para);var pString="";var paras={};$.each(para,function(pName,pValue){if(FR.isArray(pValue)&&!FR.isEmptyArray(pValue)&&FR.isArray(pValue[0])){pValue=pValue.join(";")}var tmpName=FR.cjkDecode(pName);
var tmpValue=FR.cjkDecode(pValue);paras[pName]=pValue;if(tmpName!="__LOCALE__"&&tmpName!="REPORTLET"&&tmpName!="OP"){pString+="&"+encodeURIComponent(encodeURIComponent(tmpName))+"="+encodeURIComponent(encodeURIComponent(tmpValue))}});if(url.indexOf("?")==-1){url+="?";pString=pString.substring(1)}if(target&&target=="_dialog"){this.showHyperlinkDialog(url+pString,feature)}else{var targetUrl=url+pString;if(targetUrl.length>=2048&&$.browser.msie){var submitForm=$("<form method='post' target='"+target+"' action='"+url+"'></form>").hide().appendTo($("body"));
for(var i in paras){$('<input type="hidden" name="'+i+'" value=""/>').attr("value",paras[i]).appendTo(submitForm)}submitForm.submit()}else{window.open(targetUrl,target)}}},showHyperlinkDialog:function(url,feature){var isIEUnder8=$.browser.msie&&$.browser.version<9;var iframeWidth=isIEUnder8?"99%":"100%";var iframeHeight=isIEUnder8?"99%":"100%";var iframeDialog="<iframe src='' width="+iframeWidth+" height= "+iframeHeight+" scrolling='no' frameborder='0'></iframe>";iframeDialog=$(iframeDialog).attr("src",url)[0];
if(feature.split(",").length>2){var width=feature.split(",")[0];if(width.indexOf("=")!=-1){width=width.substring(width.indexOf("=")+1,width.length)}var height=feature.split(",")[1];if(height.indexOf("=")!=-1){height=height.substring(height.indexOf("=")+1,height.length)}}FR.showDialog(" ",parseInt(width)||600,parseInt(height)||400,iframeDialog)},doHyperlinkByGet4Reportlet:function(url,para,target,feature){para=$.extend({_:new Date().getTime()},para);$.each(para,function(pName,pValue){if(pName!="__LOCALE__"&&pName!="REPORTLET"&&pName!="OP"&&!$.isPlainObject(pValue)){if(FR.isArray(pValue)){para[pName]=pValue
}else{para[pName]=encodeURIComponent(encodeURIComponent(pValue))}}});var pString="__parameters__="+FR.cjkEncode(FR.jsonEncode(para));url+=url.indexOf("?")==-1?"?":"&";if(target&&target=="_dialog"){this.showHyperlinkDialog(url+pString,feature)}else{window.open(url+pString,target)}},doHyperlinkByPost:function(url,para,target,feature){var isGet=target&&target=="_dialog";$.each(para,function(pName,pValue){if(pName!="__LOCALE__"&&pName!="REPORTLET"&&pName!="OP"&&!$.isPlainObject(pValue)){if(FR.isArray(pValue)){para[pName]=pValue
}else{para[pName]=isGet?encodeURIComponent(encodeURIComponent(pValue)):encodeURIComponent(pValue)}}});if(this.$hyperlinkForm){this.$hyperlinkForm.html("")}else{this.$hyperlinkForm=($("<div>").appendTo($(document.body))).css({display:"none",position:"absolute"})}if(target==null){target="formresult"}para=FR.cjkEncode(FR.jsonEncode(para));var submitForm=$("<form method='post' target='"+target+"' action='"+url+"'></form>").appendTo(this.$hyperlinkForm);var input=$('<input type="hidden" name="__parameters__" value=""/>');
input.attr("value",para);submitForm.append(input);if(isGet){var pString="__parameters__="+para;url+=url.indexOf("?")==-1?"?":"&";this.showHyperlinkDialog(url+pString,feature)}else{submitForm.submit()}},isEmpty:function(value){var result=value===""||value===null||value===undefined;return result},isEmptyObj:function(obj){return _.isEmpty(obj)},toRE:function(str){return str.replace(/\\/g,"\\\\").replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\{/g,"\\{").replace(/\}/g,"\\}").replace(/\*/g,"\\*").replace(/\|/g,"\\|").replace(/\?/g,"\\?").replace(/\$/g,"\\$").replace(/\^/g,"\\^")
},_executeScriptFromHtml:function(html){var html_script=html.substring(0,500);var html_script_low=html_script.toLowerCase();var begin=html_script_low.indexOf("<script>");if(begin<0){return}var end=html_script_low.indexOf("<\/script>");html_script=html_script.substring(begin+8,end);try{eval(html_script)}catch(e){}},extend:function(){return function(sb,sp,overrides){if(typeof sp=="object"){overrides=sp;sp=sb;sb=function(){sp.apply(this,arguments)}}if(sp==null){console&&console.log("empty")}var F=function(){},spp=sp.prototype;
F.prototype=spp;sb.prototype=new F();sb.superclass=spp;$.extend(sb.prototype,overrides);return sb}}(),SessionMgr:function(){var sid,cp;$(window).unload(function(){$(window).unbind("unload",arguments.callee);if(sid&&cp&&FR.servletURL&&cp.rtype!="preview"&&cp.rtype!="bi"&&!cp.noClossSession){var closeSession=function(sid){FR.ajax({async:false,url:FR.servletURL,data:{op:"closesessionid",sessionID:sid}})};closeSession(sid)}});if(FR.shouldSendHeartBeat){setInterval(function(){if(sid&&cp&&FR.servletURL){FR.ajax({url:FR.servletURL,data:{sessionID:sid,_:new Date().getTime()}})
}},30000)}return{getSessionID:function(){return sid},getContentPane:function(){return cp},get:function(){return cp},register:function(id,s){sid=id;cp=s}}}(),CookieInfor:{getCookies:function(){var cookieString=document.cookie;return unescape(cookieString).split(";")},addCookie:function(name,value,temp){var newCookie=name+"="+escape(value);var liveDays=temp?temp:30;var expires=new Date();expires.setDate(expires.getDate()+liveDays);newCookie+=";expires="+expires.toGMTString();document.cookie=newCookie
},removeCookie:function(name){var expires=new Date();expires.setTime(expires.getTime()-1);document.cookie=name+"=;expires="+expires.toGMTString()},clearCookie:function(){var self=this;var $cookies=this.getCookies();$.each($cookies,function(i){var cookieName=$cookies[i].split("=")[0];self.removeCookie(cookieName)})},getCookieByName:function(name){var $cookies=this.getCookies();var re=new RegExp(name);var value=null;$.each($cookies,function(i){if($cookies[i].match(re)){value=$cookies[i].split(name+"=")[1];
return false}});return value}},cjkEncode:function(text){if(typeof text!=="string"){return text}var newText="";for(var i=0;i<text.length;i++){var code=text.charCodeAt(i);if(code>=128||code===91||code===93){newText+="["+code.toString(16)+"]"}else{newText+=text.charAt(i)}}return newText},cjkDecode:function(text){if(text==null){return""}if(!isNaN(text)||text.indexOf("[")==-1){return text}var newText="";for(var i=0;i<text.length;i++){var ch=text.charAt(i);if(ch=="["){var rightIdx=text.indexOf("]",i+1);
if(rightIdx>i+1){var subText=text.substring(i+1,rightIdx);if(subText.length>0){ch=String.fromCharCode(eval("0x"+subText))}i=rightIdx}}newText+=ch}return newText},htmlSpaceDecode:function(text){return(text==null)?"":String(text).replace(/&nbsp;/," ")},htmlEncode:function(text){return(text==null)?"":String(text).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},htmlDecode:function(text){return(text==null)?"":String(text).replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g," ")
},jsonEncode:function(o){var useHasOwn={}.hasOwnProperty?true:false;var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};var encodeString=function(s){if(/["\\\x00-\x1f]/.test(s)){return'"'+s.replace(/([\x00-\x1f\\"])/g,function(a,b){var c=m[b];if(c){return c}c=b.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"'}return'"'+s+'"'};var encodeArray=function(o){var a=["["],b,i,l=o.length,v;for(i=0;i<l;i+=1){v=o[i];switch(typeof v){case"undefined":case"function":case"unknown":break;
default:if(b){a.push(",")}a.push(v===null?"null":FR.jsonEncode(v));b=true}}a.push("]");return a.join("")};if(typeof o=="undefined"||o===null){return"null"}else{if($.isArray(o)){return encodeArray(o)}else{if(o instanceof Date){return FR.jsonEncode({__time__:o.getTime()})}else{if(typeof o=="string"){return encodeString(o)}else{if(typeof o=="number"){return isFinite(o)?String(o):"null"}else{if(typeof o=="boolean"){return String(o)}else{if($.isFunction(o)){return String(o)}else{var a=["{"],b,i,v;for(i in o){if(!useHasOwn||o.hasOwnProperty(i)){v=o[i];
switch(typeof v){case"undefined":case"unknown":break;default:if(b){a.push(",")}a.push(FR.jsonEncode(i),":",v===null?"null":FR.jsonEncode(v));b=true}}}a.push("}");return a.join("")}}}}}}}},jsonDecode:function(text){try{var jo=$.parseJSON(text);if(jo==null){jo={}}}catch(e){try{jo=new Function("return "+text)()||{}}catch(e){}if(jo==null){jo=[]}}if(!FR._hasDateInJson(text)){return jo}return(function(o){if(typeof o==="string"){return o}if(o&&o.__time__!=null){return new Date(o.__time__)}for(var a in o){if(o[a]==o||typeof o[a]=="object"||$.isFunction(o[a])){break
}o[a]=arguments.callee(o[a])}return o})(jo)},_hasDateInJson:function(json){if(!json||typeof json!=="string"){return false}return json.indexOf("__time__")!=-1},setBackground:function($dom,bg,height){var type=bg.type;if((type===4||type===2)&&$.browser.msie){if(FR.ieForFixBackground()){var url=bg.url;var bgImage=$("<img src='"+url+"' id='para-bg'>");bgImage.appendTo($dom);setSize($dom);$(window).resize(function(){setSize($dom)});function setSize($dom){var $img=$("#para-bg",$dom);setTimeout(function(){if($img.isVisible()){$img.attr("width",$dom.width());
$img.attr("height",$dom.height()||height)}},20)}}else{$.each(["background-image","background-repeat","filter","background"],function(idx,item){if(bg[item]!=null){$dom.css(item,bg[item])}})}}else{$.each(["background","background-size","background-image","background-repeat"],function(idx,item){if(bg[item]!=null){$dom.css(item,bg[item])}})}},ieForFixBackground:function(){return $.browser.msie&&$.browser.version<"9.0"},contains:function(p,c){return FR.isAncestor(p,c)?true:((!p||!c)?false:p==c)},isAncestor:function(p,c){if(!p||!c){return false
}if(p.contains&&!($.browser.safari||$.browser.chrome)){try{return p.contains(c)}catch(e){}}if(p.compareDocumentPosition){return !!(p.compareDocumentPosition(c)&16)}else{var parent=c.parentNode;while(parent){if(parent==p){return true}else{if(!parent.tagName||parent.tagName.toUpperCase()=="HTML"){return false}}parent=parent.parentNode}return false}},isNavKeyPress:function(event){if(!event){return false}var safariKeys={63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35};
var k=event.keyCode;k=($.browser.safari||$.browser.chrome)?(safariKeys[k]||k):k;return(k>=33&&k<=40)||k===13||k==FR.keyCode.TAB||k==FR.keyCode.ESCAPE},isSpecialKey:function(e){if(!e){return false}var k=e.keyCode;return(e.type=="keypress"&&e.ctrlKey)||k===9||k===13||k===40||k===27||(k===16)||(k===17)||(k>=18&&k<=20)||(k>=33&&k<=35)||(k>=36&&k<=39)||k===44||(k===13||k===229)},equals:function(v1,v2){if(FR.isNull(v1)||FR.isNull(v2)){return v1==undefined&&v2==undefined||v1==null&&v2==null}if(v1===v2){return true
}else{if($.isArray(v1)){if(v1.length==v2.length){for(var i=0;i<v1.length;i++){if(!FR.equals(v1[i],v2[i])){return false}}}else{return false}}else{if(typeof v1=="object"){var lv1=0,lv2=0;for(var i in v1){lv1++}for(var i in v2){lv2++}if(lv1!=lv2){return false}for(var a in v1){if(!FR.equals(v1[a],v2[a])){return false}}}else{return v1===v2}}}return true},isNull:function(v){return v==undefined||v==null},lengthenFileName:function(name,s){if(!name){return}if(name.lastIndexOf(".")==-1){return name+s}var leftName=name.substring(0,name.lastIndexOf("."));
var rightName=name.substring(name.lastIndexOf("."),name.length);return leftName+s+rightName},getCursorPosition:function(input){try{if(input.value==""){return 0}var cursurPosition=-1;if(input.selectionStart){cursurPosition=input.selectionStart}else{var rngSel=document.selection.createRange();var rngTxt=input.createTextRange();var flag=rngSel.getBookmark();rngTxt.collapse();rngTxt.moveToBookmark(flag);rngTxt.moveStart("character",-input.value.length);cursurPosition=rngTxt.text.length}return cursurPosition
}catch(e){return input.value.length}},setCursorPosition:function(input,pos){if(input.setSelectionRange){input.focus();input.setSelectionRange(pos,pos)}else{if(input.createTextRange){var lineChangeNum=input.value.length-input.value.replace(/\n/g,"").length;pos=pos-lineChangeNum+1;var range=input.createTextRange();range.collapse(true);range.moveEnd("character",pos);range.moveStart("character",pos);range.select()}}},id2ColumnRowStr:function(id){return id.replace(/([A-Z]+\d+)-\d+-\d+/,"$1")},id2ColumnRow:function(id){return FR.cellStr2ColumnRow(FR.id2ColumnRowStr(id))
},id2Location:function(id){var rt=FR.id2ColumnRow(id);var arr=id.split("-");rt.rptIdx=arr[1];return rt},cellStr2ColumnRow:function(name){name=$.trim(name.toUpperCase());if(!FR.isValidCellStr(name)){return null}var colStr=name.replace(/([A-Z]+)\d+/,"$1");var rowStr=name.replace(/[A-Z]+(\d+)/,"$1");var col=FR.letter2Digit(colStr)-1;var row=parseInt(rowStr)-1;return{col:col,row:row}},columnRow2CellStr:function(cr){var col=parseInt(cr.col);var row=parseInt(cr.row);if(typeof col!="number"||typeof row!="number"){return""
}return FR.digit2Letter(col+1)+(row+1)},isValidCellStr:function(str){if(str.match(/^[A-Z]+\d+$/)==null){return false}else{return true}},letter2Digit:function(abc){var len=abc.length;var col=0;for(var i=len-1;i>=0;i--){var c=abc.charAt(i);col+=(COL_IDS.indexOf(c)+1)*Math.pow(26,len-1-i)}return col},digit2Letter:function(k){var c,abcBuf="";if(typeof k!="number"||k===0||isNaN(k)||!isFinite(k)){return abcBuf}for(;k!==0;){c=k%26;if(c===0){c=26}abcBuf=COL_IDS.charAt(c-1)+abcBuf;k=(k-c)/26}return abcBuf
},byteLength:function(str){var byteLen=0,len=str.length;if(!str){return 0}for(var i=0;i<len;i++){byteLen+=str.charCodeAt(i)>255?2:1}return byteLen},keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},location:function(callback){callback.call(this,"fail",FR.i18nText("FR-Basic_Fail_Location"))
}})})(jQuery);(function(b){var a={};b.shortcut=function(d,c){if(a[d]!=null){throw ("shortcut:["+d+"] has been registed")}a[d]=c;b.extend(c.prototype,{xtype:d})};FR.createWidget=function(d,h){if(d instanceof b){return new FR.Widget({renderEl:d})}if(d.classType){return new (new Function("return "+d.classType+";")())(d)}if(!d.type){if(h!==true){return new FR.ErrorMarkWidget({renderEl:d.renderEl,message:"config type cannot be null.",width:d.width,height:d.height})}}var g=d.type.toLowerCase();var c=a[g];
try{return new c(d)}catch(f){if(h===true){throw f}else{return new FR.ErrorMarkWidget({renderEl:d.renderEl,message:FR.i18nText("FR-Base_Widget_Error_Mark_Text")+":"+d.type+",message:"+f,width:d.width,height:d.height})}}};b.fn.extend({asComponent:function(c){c=c||{};c.renderEl=b(this);return FR.createWidget(c)}})})(jQuery);if(window._g==null){window._g=FR.SessionMgr.getContentPane}$.extend(FR,{string2ints:function(h){var b=[];var g=h.split(",");for(var e=0;e<g.length;e++){var d=g[e];var f=d.split("-");
var a=parseInt(f[0]),c=a;if(f.length>1){c=parseInt(f[1])}for(var j=a;j<=c;j++){b.push(j)}}return b}});$.extend(FR,{activeBranches:function(branches,parameters,processid,taskName,serverURL,needClose){if(processid&&taskName){var it={id:processid,taskname:taskName}}else{var it=this.getProcessIDAndTaskName();if(!it.processid){FR.Msg.toast(FR.i18nText("FR_FS-Task_Has_Been_Closed"));return}}if(!it){return}if(!$.isArray(branches)){branches=[branches]}if(parameters!=null&&!$.isArray(parameters)){parameters=[parameters]
}var data=$.extend(it,{branches:branches});if(parameters){$.each(parameters,function(idx,item){if(item.value.toString().startWith("eval")){var evalValue=item.value.toString().substring(5,item.value.toString().length-1);item.value=eval(evalValue)}});data.parameters=parameters}this.ajax({url:(serverURL?serverURL:FR.servletURL)+"?op=process_exe&cmd=continue",data:data,type:"post",complete:function(res,status){if(res.responseText=="close"){FR.Msg.toast(FR.i18nText("FR_FS-Task_Has_Been_Closed"));return
}this.refreshUserTask(it)}.createDelegate(this)})},getProcessIDAndTaskName:function(){var a={};this.ajax({url:FR.servletURL+"?op=process_exe",async:false,data:{sessionID:FR.SessionMgr.getSessionID(),cmd:"values"},complete:function(c,b){a=FR.jsonDecode(c.responseText)}});return a},refreshUserTask:function(b){var a=window.parent;if(!a||!a.FS||!a.FS.Process){location.reload(true);return}a.FS.Process.refreshTask();var c="?op=process_exe&cmd=seejob&taskname="+b.taskname+"&processexecutorid="+b.id+"&processid="+b.processid;
a.FS.tabPane.addItem({title:FR.i18nText("FR_FS-Handle_Affairs")+b.id,src:c})}});$.extend(FR,{logoutApp:function(){}});
(function(a){a.extend(FR,{contentFormat:function(c,b){if(FR.isEmpty(c)){return""}var e=c.toString();if(FR.isEmpty(b)){return e}if(b.match(/^T/)){return e}else{if(b.match(/^D/)){if(!(c instanceof Date)){if(typeof c==="number"){c=new Date(c)}else{c=Date.parseDate(c+"",Date.patterns.ISO8601Long)}}if(!FR.isNull(c)){var d=b.match(/^DT/);e=FR.date2Str(c,b.substring(d?2:1))}}else{if(b.match(/E/)){e=FR._eFormat(e,b)}else{e=FR._numberFormat(e,b)}}}e=e.replace(/\¤/g,"￥");return e},_numberFormat:function(l,j){var l=l+"";
if(!(/[0-9]/.test(l))){return l}var m=j.indexOf(";");if(m>-1){if(l>=0){return FR._numberFormat(l+"",j.substring(0,m))}else{return FR._numberFormat((-l)+"",j.substr(m+1))}}var i=l.split("."),h=j.split("."),c=i[0]||"",e=h[0]||"",f=i[1]||"",b=h[1]||"";if(/[%‰]$/.test(j)){var g=/[%]$/.test(j)?"00":"000";f+=g;c+=f.substr(0,g.length);c=c.replace(/^0+/gi,"");f=f.substr(g.length).replace(/0+$/gi,"")}var k=FR._dealWithRight(f,b);if(k.leftPlus){c=parseInt(c)+1+"";c=isNaN(c)?"1":c}k=k.num;var d=FR._dealWithLeft(c,e);
if(!(/[0-9]/.test(d))){d=d+"0"}if(!(/[0-9]/.test(k))){return d+k}else{return d+"."+k}},_eFormat:function(r,d){var n=d.indexOf("E");var l=d.substr(0,n),q=d.substr(n+1);if(/^[0\.-]+$/.test(r)){r=FR._numberFormat(0,l)+"E"+FR._numberFormat(0,q)}else{var b=r<0;if(b){r=r.substr(1)}var h=(l.split(".")[0]||"").length;var o=r.indexOf(".");if(o<0){o=r.length}var j=0;r=r.replace(".","");for(var m=r.length;j<m;j++){var s=r.charAt(j);if(s<="9"&&s>="1"){break}}var p=o-j-h;var f=r.substr(j,h);var c=j+h-r.length;
if(c>0){for(var g=0;g<c;g++){f+="0"}}else{f+="."+r.substr(j+h)}f=f.replace(/^[0]+/,"");if(p<0&&q.indexOf("-")<0){q+=";-"+q}r=FR._numberFormat(f,l)+"E"+FR._numberFormat(p,q);if(b){r="-"+r}}return r},_dealWithRight:function(l,d){var q="",h=0,k=0;for(var o=d.length;k<o;k++){var b=d.charAt(k);var p=l.charAt(h);switch(b){case"0":if(FR.isEmpty(p)){p="0"}q+=p;h++;break;case"#":q+=p;h++;break;default:q+=b;break}}var n=l.substr(h);var r={};if(!FR.isEmpty(n)&&n.charAt(0)>4){r.leftPlus=true;var f=q.match(/^[0-9]+/);
if(f){var m=f[0];var e=m.length;var g=FR.parseINT(m)+1+"";if(g.length>e){g=g.substr(1)}else{g=String.leftPad(g,e,"0");r.leftPlus=false}q=q.replace(/^[0-9]+/,g)}}r.num=q;return r},_dealWithLeft:function(e,k){var h="";var l=e.length-1;var g=-1,s=-1;var m=k.length-1;for(;m>=0;m--){var b=k.charAt(m);var r=e.charAt(l);switch(b){case"0":if(FR.isEmpty(r)){r="0"}s=-1;h=r+h;l--;break;case"#":s=m;h=r+h;l--;break;case",":if(!FR.isEmpty(r)){var d=k.match(/,[#0]+/);if(d){g=d[0].length-1}h=","+h}break;default:h=b+h;
break}}if(s>-1){var t=e.substr(0,l+1);h=h.substr(0,s)+t+h.substr(s)}if(g>0){var q=h.match(/[0-9]+,/);if(q){q=q[0];var p="",f=q.length-1-g;for(;f>=0;f=f-g){p=q.substr(f,g)+","+p}var o=q.substr(0,f+g);if(!FR.isEmpty(o)){p=o+","+p}}h=h.replace(/[0-9]+,/,p)}return h},object2Number:function(b){if(b==null){return 0}if(typeof b=="number"){return b}else{var c=b+"";if(c.indexOf(".")===-1){return parseInt(c)}else{return parseFloat(c)}}},object2Date:function(c){if(c==null){return new Date()}if(c instanceof Date){return c
}else{if(typeof c=="number"){return new Date(c)}else{var d=c+"";d=d.replace(/-/g,"/");var b=new Date(d);if(!FR.isInvalidDate(b)){return b}return new Date()}}},object2Time:function(c){if(c==null){return new Date()}if(c instanceof Date){return c}else{var d=c+"";d=d.replace(/-/g,"/");var b=new Date(d);if(!FR.isInvalidDate(b)){return b}if(d.indexOf("/")===-1&&d.indexOf(":")!==-1){b=new Date("1970/01/01 "+d);if(!FR.isInvalidDate(b)){return b}}b=FR.str2Date(d,"HH:mm:ss");if(!FR.isInvalidDate(b)){return b
}return new Date()}},isInvalidDate:function(b){return b=="Invalid Date"||b=="NaN"}})})(jQuery);
FR.OB=function(a){this.options=$.extend(this._defaultConfig(),a);this._init();this._confirmEvents()};$.extend(FR.OB.prototype,{_defaultConfig:function(){return{}},_init:function(){var a=this;if(this.options.listeners!=null){$.each(this.options.listeners,function(c,b){(b.target?b.target:a)[b.once?"once":"on"](b.eventName,b.action.createDelegate(a))});delete this.options.listeners}},_confirmEvents:function(){this.fireEvent(FR.Events.AFTERINIT)},_getEvents:function(){if(!$.isArray(this.events)){this.events=[]
}return this.events},on:function(a,c){a=a.toLowerCase();var b=this._getEvents()[a];if(!$.isArray(b)){b=[];this._getEvents()[a]=b}b.push(c)},once:function(a,c){var b=function(){c.apply(this,arguments);this.un(a,b)};this.on(a,b)},un:function(a,c){a=a.toLowerCase();if(c==null){delete this._getEvents()[a]}else{var b=this._getEvents()[a];if($.isArray(b)){var d=[];$.each(b,function(e,f){if(f!=c){d.push(f)}});this._getEvents()[a]=d}}},purgeListeners:function(){this.events=[]},fireEvent:function(){var a=arguments[0].toLowerCase();
var d=this._getEvents()[a];if($.isArray(d)){var b=Array.prototype.slice.call(arguments,1);for(var c=0;c<d.length;c++){if(d[c].apply(this,b)===false){return false}}}return true}});FR.OB.capture=function(c,b,a){c.fireEvent=c.fireEvent.createInterceptor(b,a)};FR.OB.releaseCapture=function(a){a.fireEvent=FR.OB.prototype.fireEvent};
FR.widget={opts:{zIndex:8000,num:0}};FR.Widget=FR.extend(FR.OB,{_defaultConfig:function(){return $.extend(FR.Widget.superclass._defaultConfig.apply(this,arguments),{widgetName:"",disabled:false,invisible:false,usedAsEditor:false,resultWidgets:{}})},_init:function(){FR.Widget.superclass._init.apply(this,arguments);this._initRoot();this._initElementSize();this._initVisualEffects();this._initNameEffects()},_initRoot:function(){if(this.options.renderEl!=null){this.element=$(this.options.renderEl)}else{this.element=this._defaultRoot()
}if(this.options.baseCls){this.element.addClass(this.options.baseCls)}},_initElementSize:function(){var b=this.options;if(FR.isWidthOrHeight(b.width)){this.element.css({width:b.width-FR.fixBoxModelWidth(this.element)})}else{if(b.width=="auto"){this.element.width("auto")}else{if(this.isStringTypeNumber(b.width)){this.element.width(parseInt(b.width))}}}if(FR.isWidthOrHeight(b.height)){this.element.css({height:b.height-FR.fixBoxModelHeight(this.element)})}else{if(b.height=="auto"){this.element.height("auto")
}else{if(this.isStringTypeNumber(b.height)){this.element.height(parseInt(b.height))}}}var a=this;this.element.bind(FR.Events.RESIZE,function(c,d){a.doResize(d)})},isStringTypeNumber:function(a){return !isNaN(parseInt(a))},_initVisualEffects:function(){this[this.options.disabled?"disable":"enable"]();if(this.options.invisible){this.setVisible(false)}},_initNameEffects:function(){var a=this.options;if(a.widgetName){this.element.attr({widgetName:a.widgetName})}FR.widget.opts.num++;if(a.widgetName){this._addWidget(a.widgetName,this)
}else{this._addWidget("_widget_"+FR.widget.opts.num,this)}},_addWidget:function(a,b){this.options.resultWidgets[a]=b},getName:function(){return this.options.widgetName},getWidgetByName:function(a){return this.options.resultWidgets[a]},getText:function(){},setText:function(a){},getValue:function(){},setValue:function(b,a){},getType:function(){return this.options.type},isEnabled:function(){return !this.options.disabled},setEnable:function(a){if(a===true){this.options.disabled=false;this.element.addClass("ui-state-enabled");
this.element.removeClass("ui-state-disabled")}else{if(a===false){this.options.disabled=true;this.element.addClass("ui-state-disabled");this.element.removeClass("ui-state-enabled")}}},isVisible:function(){return !this.options.invisible},setVisible:function(a){if(a===true){this.options.invisible=false;this.element.show()}else{if(a===false){this.options.invisible=true;this.element.hide()}}},setSource:function(a){this.setValue(a)},couldUsedAsEditor:function(){return this.options.usedAsEditor},reset:function(){},doResize:function(f){var b=this.options;
var e=this.element;if(f){if(f.width){b.width=f.width}if(f.height){b.height=f.height}if(f.left!=null){b.left=f.left}if(f.top!=null){b.top=f.top}}else{if(b.fit===true){var d=e.parent();var c=d.width();var a=d.height();b.width=c;b.height=a}}this.element.width(b.width);this.element.height(b.height)},destroy:function(){this.element.each(function(){$(this).remove();if(FR.Browser.isIE()){this.outerHTML=""}})},_defaultRoot:function(){return $("<div/>")},disable:function(){this.setEnable(false)},enable:function(){this.setEnable(true)
},invisible:function(){this.setVisible(false)},visible:function(){this.setVisible(true)}});FR.ErrorMarkWidget=FR.extend(FR.Widget,{_defaultConfig:function(){return $.extend(FR.ErrorMarkWidget.superclass._defaultConfig.apply(),{width:120,height:24})},_init:function(){FR.ErrorMarkWidget.superclass._init.apply(this,arguments);var a=this.options;this.element.text(a.message||"");this.element.css({textAlign:"center",width:a.width,height:a.height,lineHeight:a.height+"px"})},doResize:function(a){FR.ErrorMarkWidget.superclass.doResize.call(this,a);
this.element.css({width:a.width,height:a.height,lineHeight:a.height+"px"})}});
(function(a){a.extend(FR,{Msg:function(){return{verticalOffset:0.77,horizontalOffset:1,repositionOnResize:true,overlayOpacity:0.01,overlayColor:"#FFF",draggable:true,okButton:FR.i18nText("FR-Basic_OK"),cancelButton:FR.i18nText("FR-Basic_Cancel"),dialogClass:null,style:null,textSpace:FR.i18nText("FR-Widget_Message_Letter_Space")+"px",msgStyle:function(){var b=this.style;var c="blue";a.each(["green","blue"],function(d,e){if(b&&e==b.toLowerCase()){c=b.toLowerCase()}});this.style=c},alert:function(c,b,d){FR.Keys.enable(false);
if(!c){c="Alert"}this._show(c,b,null,"alert",function(e){FR.Keys.enable(true);if(a.isFunction(d)){d(e)}},-1);if(typeof d=="number"&&d>0){setTimeout(function(){FR.Msg._hide()},d)}},confirm:function(c,b,e,d){FR.Keys.enable(false);if(!c){c="Confirm"}this._show(c,b,null,"confirm",function(f){FR.Keys.enable(true);if(e){e(f)}},d?d:-1)},prompt:function(d,b,c,f,e){FR.Keys.enable(false);if(!d){d="Prompt"}this._show(d,b,c,"prompt",function(g){FR.Keys.enable(true);if(f){f(g)}},e?e:-1)},toast:function(e){var d=-300;
if(a.browser.msie&&parseInt(a.browser.version)<8){d=-370}var c=a("body").children("div.toast");if(c.length===0){var f=60;if(a.browser.msie&&parseInt(a.browser.version)<=6){f+=a("body")[0].scrollTop}c=a("<div/>").addClass("toast").css({right:d,top:f,"z-Index":FR.widget.opts.zIndex++}).appendTo("body")}c.text(e);var b=a("body").children("div.toastIcon");if(b.length===0){b=a("<div/>").addClass("toastIcon").css({right:0,top:c.css("top"),"z-index":c.css("z-index")+1}).appendTo("body");new FR.IconButton({width:b.css("width"),height:b.css("height"),imgsrc:"fr_show_toast",renderEl:a("<div/>").appendTo(b),handler:function(){c.animate({right:-4},"slow");
setTimeout(function(){c.animate({right:d},"slow")},5000)}})}b.hide();c.animate({right:-15},"slow");(function(){c.animate({right:d},"slow",function(){b.show();b.fadeOut(5000)})}).defer(5000)},_show:function(w,j,s,d,i,p){this.msgStyle();this._hide();this._overlay("show");a("BODY").append('<div id="popup_container"><div id="popup_header" ><h1 id="popup_title"></h1></div><div id="popup_content"><div id="popup_message"></div></div></div>');if(this.dialogClass){a("#popup_container").addClass(this.dialogClass)
}var l=(a.browser.msie)?"absolute":"fixed";a("#popup_container").css({position:l,zIndex:99999,padding:0,margin:0,top:0,left:0});a("#popup_title").html(w);a("#popup_content").addClass(d);a("#popup_message").text(j);a("#popup_message").html(a("#popup_message").text().replace(/\n/g,"<br />"));var h=a("#popup_container").outerWidth();var g=a("#popup_container").outerWidth();a("#popup_container").css({minWidth:p>0?Math.max(h,p):h,maxWidth:p>0?Math.max(g,p):g});a("<div id = 'popup_close' class = 'close_mouseout' style='position: absolute;top: 0;right: 7px;width: 25px;height: 30px'>").appendTo("#popup_header").bind("mouseover",function(){a("#popup_close").removeClass("close_mouseout");
a("#popup_close").addClass("close_mouseover")}).bind("mouseout",function(){a("#popup_close").removeClass("close_mouseover");a("#popup_close").removeClass("close_click");a("#popup_close").addClass("close_mouseout")}).bind("mousedown",function(){a("#popup_close").removeClass("close_mouseover");a("#popup_close").addClass("close_click")}).bind("click",function(){FR.Msg._hide();if(i){i(null)}});j=p==-1?j:j.replace(/([\u4E00-\u9FA5\uf900-\ufa2d])/g,"aa");var m=j?j.length:0;switch(d){case"alert":a("#popup_container").css({minWidth:"400px",maxWidth:"400px",width:"400px"});
a("#popup_message").css({width:"380px",wordBreak:"break-all",fontSize:"14px",fontWeight:"bold"});var q=a("#popup_message").height();var v=q+87;v=v>150?v:150;a("#popup_container").css({height:v});a("#popup_header").css({width:"400px"});a("#popup_content").css({top:"40px",left:"10px",background:"none",padding:"0px",fontSize:"14px",textAlign:"left"});var c=new FR.createWidget({type:"quickbutton",style:this.style,text:FR.i18nText("FR-Basic_OK"),width:60,height:28,handler:function(){FR.Msg._hide();i(true)
}});var u=c.element.appendTo("#popup_container").css({position:"absolute",right:"20px",bottom:"8px",letterSpacing:FR.Msg.textSpace,textIndent:a.browser.msie&&document.documentMode<8?0:FR.Msg.textSpace});u.focus();u.keydown(function(x){if(x.keyCode===13||x.keyCode===27){u.trigger("click")}});break;case"confirm":if(j){if(m<7){a("#popup_container").css({minWidth:"233px",maxWidth:"233px",width:"233px",height:"149px"});a("#popup_content").css({left:"32px",width:"100px"});a("#popup_header").css({width:"233px"});
a("#popup_message").css({width:"100px"})}else{if(m>6&&m<11){a("#popup_container").css({minWidth:"233px",maxWidth:"233px",width:"233px",height:"149px"});a("#popup_content").css({left:"33px",width:"98px",backgroundPosition:"23px 31px"});a("#popup_header").css({width:"233px"});a("#popup_message").css({width:"98px"})}else{var n=m*17/2+16;p=p>233?p:233;var b=(n+100)>p?n+100:p;a("#popup_container").css({minWidth:b+"px",maxWidth:b+"px",width:b+"px",height:"169px"});a("#popup_content").css({left:"15.5px",width:n+"px",backgroundPosition:"23px 31px"});
a("#popup_header").css({width:b+"px"});a("#popup_message").css({width:n+"px"})}}}else{a("#popup_container").css({minWidth:"233px",maxWidth:"233px",width:"233px",height:"149px"});a("#popup_header").css({width:"233px"});a("#popup_content").css({left:"46px",top:"45px"})}var k=document.getElementById("popup_container").offsetWidth;var r=(k-140)/2-1;var c=new FR.createWidget({type:"quickbutton",style:this.style,text:FR.i18nText("FR-Basic_OK"),width:60,height:28,handler:function(){FR.Msg._hide();i(true)
}});var u=c.element.appendTo("#popup_container").css({position:"absolute",left:r+"px",bottom:"8px",letterSpacing:FR.Msg.textSpace,textIndent:a.browser.msie&&document.documentMode<8?0:FR.Msg.textSpace});var f=new FR.createWidget({type:"quickbutton",style:"gray",text:FR.i18nText("FR-Basic_Cancel"),width:60,height:28,handler:function(){FR.Msg._hide();i(false)}});var o=f.element.appendTo("#popup_container").css({position:"absolute",right:r+"px",bottom:"8px",letterSpacing:FR.Msg.textSpace,textIndent:a.browser.msie&&document.documentMode<8?0:FR.Msg.textSpace});
break;case"prompt":a("#popup_content").append('<input type="text" size="21" id="popup_prompt" >');if(j){p=p>233?p:233;var n=(m*14+15)>p-100?(m*14+15):p-100;var b=n+100;a("#popup_container").css({minWidth:b,maxWidth:b,width:b});a("#popup_header").css({width:b});a("#popup_content").css({left:"50px",top:"45px",width:n,height:"59px",padding:"0"});a("#popup_message").css({fontSize:"14px",width:n,textAlign:"left"})}else{a("#popup_container").css({minWidth:"233px",maxWidth:"233px",width:"233px"});a("#popup_header").css({width:"233px"});
a("#popup_content").css({left:"50px",top:"52px",width:"130px",height:"59px",padding:"0"});a("#popup_message").css({width:"130px"})}var k=document.getElementById("popup_container").offsetWidth;var r=(k-140)/2-1;var c=new FR.createWidget({type:"quickbutton",style:this.style,text:FR.i18nText("FR-Basic_OK"),width:60,height:28,handler:function(){var e=a("#popup_prompt").val();FR.Msg._hide();if(i){i(e)}}});var u=c.element.appendTo("#popup_container").css({position:"absolute",left:r+"px",bottom:"8px",letterSpacing:FR.Msg.textSpace,textIndent:a.browser.msie&&document.documentMode<8?0:FR.Msg.textSpace});
var f=new FR.createWidget({type:"quickbutton",style:"gray",text:FR.i18nText("FR-Basic_Cancel"),width:60,height:28,handler:function(){FR.Msg._hide();if(i){i(null)}}});var o=f.element.appendTo("#popup_container").css({position:"absolute",right:r+"px",bottom:"8px",letterSpacing:FR.Msg.textSpace,textIndent:a.browser.msie&&document.documentMode<8?0:FR.Msg.textSpace});a("#popup_prompt").width(a("#popup_message").width());if(s){a("#popup_prompt").val(s)}a("#popup_prompt").focus().select();break}this._reposition();
this._maintainPosition(true);if(this.draggable){try{a("#popup_container").draggable({handle:a("#popup_title"),onStopDrag:function(){if(a("#popup_container").offset().top<0){a("#popup_container").css({top:"0px"})}if(a("#popup_container").offset().left<0){a("#popup_container").css({left:"0px"})}}});a("#popup_title").css({cursor:"move"})}catch(t){}}},_hide:function(){a("#popup_container").remove();this._overlay("hide");this._maintainPosition(false)},_overlay:function(b){switch(b){case"show":this._overlay("hide");
a("BODY").append('<div id="popup_overlay"></div>');a("#popup_overlay").css({position:"absolute",zIndex:99998,top:"0px",left:"0px",width:"100%",height:a(document).height(),background:this.overlayColor,opacity:this.overlayOpacity});break;case"hide":a("#popup_overlay").remove();break}},_reposition:function(){var c=a(window.document).height();c=(c-a("#popup_container").outerHeight())/2+this.verticalOffset;c=c*this.verticalOffset;var b=a(window.document).width();b=(b-a("#popup_container").outerWidth())/2+this.horizontalOffset;
b=b*this.horizontalOffset;if(c<0){c=0}if(b<0){b=0}if(a.browser.msie){c=c+a(window).scrollTop()}a("#popup_container").css({top:c+"px",left:b+"px"});a("#popup_overlay").height(a(document).height())},_maintainPosition:function(b){if(this.repositionOnResize){switch(b){case true:a(window).bind("resize",function(){FR.Msg._reposition()});break;case false:a(window).unbind("resize");break}}}}}()})})(jQuery);
/*!
 * jLayout - JavaScript Layout Algorithms v0.2
 *
 * Licensed under the revised BSD License.
 * Copyright 2008, Bram Stein
 * All rights reserved.
 */
(function(){window.jLayout={layout:function(a,d){var b={},c=d||{};c.hgap=a.hgap||0;c.vgap=a.vgap||0;b.layout=function(e){return e};b.preferred=function(e){return{width:e.width(),height:e.height()}};b.minimum=function(e){return{width:0,height:0}};b.maximum=function(e){return{width:Number.MAX_VALUE,height:Number.MAX_VALUE}};return b},absolute:function(b){var g={},a=b.items||[],d=this.layout(b,g),f=b.scrollable,c=b.scrollContainer;
d.layout=function(j){var h=j.bounds(),n=j.insets(),p=h.width-(n.left+n.right),q=h.height-(n.top+n.bottom),m=0,l=0;for(var o=0;o<a.length;o++){var s=a[o];var k=(f||p==0)?s.width:Math.min(s.width,p-s.x);var r=(f||q==0)?s.height:Math.min(s.height,q-s.y);if(f){m=Math.max(m,k+s.x);l=Math.max(l,r+s.y)}s.el.bounds({x:s.x,y:s.y+(s.delta||0),width:k,height:r});s.el.doLayout()}if(c){c.bounds({x:0,y:0,width:m,height:l})}};function e(h){return function(){return{width:0,height:0}}}d.preferred=e("preferred");d.minimum=e("minimum");
d.maximum=e("maximum");return d},flow:function(h){var g={},b=this.layout(h,g),e=h.items||[],f=(h.alignment&&(h.alignment==="center"||h.alignment==="right"||h.alignment==="left")&&h.alignment)||"left",d=typeof h.hgap==="number"&&!isNaN(h.hgap)?h.hgap:5,i=typeof h.vgap==="number"&&!isNaN(h.vgap)?h.vgap:5;b.layout=function(j){var k=j.bounds(),l=j.insets(),n=0,o=e.length,r,q=[],p={width:0,height:0},m={x:l.left,y:l.top};k.width-=l.left+l.right;k.height-=l.top+l.bottom;for(;n<o;n+=1){if(e[n].el.isVisible()){r=e[n].el.preferredSize();
if((p.width+r.width)>k.width){c(q,m,p,k);q=[];m.y+=p.height;m.x=l.left;p.width=0;p.height=0}p.height=Math.max(p.height,r.height+i);p.width+=r.width+d;q.push(e[n])}}c(q,m,p,k);return j};function c(p,o,m,n){var k={x:o.x,y:o.y},l=0,j=p.length;switch(f){case"center":k.x+=(d+n.width-m.width)/2;break;case"right":k.x+=n.width-m.width+d;break}for(;l<j;l+=1){k.y=o.y;p[l].el.bounds(k);p[l].el.doLayout();k.x+=p[l].el.bounds().width+d}}function a(j){return function(n){var p=0,q=0,k=0,o,m=false,l=n.insets();for(;
p<e.length;p+=1){if(e[p].isVisible()){o=e[p][j+"Size"]();k=Math.max(k,o.height);q+=o.width}}return{width:q+l.left+l.right+(e.length-1)*d,height:k+l.top+l.bottom}}}b.preferred=a("preferred");b.minimum=a("minimum");b.maximum=a("maximum");return b},horizontal:function(h){var g={},c=this.layout(h,g),e=h.items||[],f=(h.alignment&&(h.alignment==="center"||h.alignment==="right"||h.alignment==="left")&&h.alignment)||"center",d=typeof h.hgap==="number"&&!isNaN(h.hgap)?h.hgap:2,i=typeof h.vgap==="number"&&!isNaN(h.vgap)?h.vgap:0;
c.layout=function(k){var j=k.bounds(),m=k.insets(),s=0,r=m.top+i,t=j.width-(m.left+m.right+d*2),o=0,q=j.height-(m.top+m.bottom),l=q-2*i,n,p=e.length;for(n=0;n<p;n++){var u=e[n];if(u.el.isVisible()){o+=(u.width+d)}}b(s,r,t-o+2*d,l);return k};function b(l,q,p,k){var o={x:l,y:q,width:p,height:k},m=0,j=e.length;switch(f){case"left":o.x+=0;break;case"center":o.x+=p/2;break;case"right":o.x+=p;break}for(;m<j;m++){var n=e[m];if(n.el.isVisible()){o.width=n.width;n.el.bounds(o);n.el.doLayout();o.x+=(n.width+d)
}}}function a(j){return function(m){var o=0,p=0,k=0,n,l=m.insets();for(;o<e.length;o+=1){if(e[o].el.isVisible()){n=e[o].el[j+"Size"]();k=Math.max(k,n.height);p+=e[o].width+d}}return{width:p+l.left+l.right,height:k+l.top+l.bottom}}}c.preferred=a("preferred");c.minimum=a("minimum");c.maximum=a("maximum");return c},vertical:function(b){var h={},d=this.layout(b,h),a=b.items||[],b=b,c=typeof b.hgap==="number"&&!isNaN(b.hgap)?b.hgap:0,g=typeof b.vgap==="number"&&!isNaN(b.vgap)?b.vgap:0;d.layout=function(k){var j=k.bounds(),l=k.insets(),m,o=a.length,r=l.left+c,q=l.top+g,s=j.height-(l.top+l.bottom+g*2),p=0,n=j.width-(l.left+l.right),t=n-2*c;
for(m=0;m<o;m++){var u=a[m];if(u.el.isVisible()){p+=u.height}}f(r,q,t,s-p);return k};function f(l,q,n,k){var p={x:l,y:q,width:n,height:k},m=0,j=a.length;for(;m<j;m++){var o=a[m];if(o.el.isVisible()){p.height=o.height;o.el.bounds(p);o.el.doLayout();p.y+=o.height+g}}}function e(i){return function(l){var n=0,o=0,j=0,m,k=l.insets();for(;n<a.length;n+=1){if(a[n].el.isVisible()){m=a[n].el[i+"Size"]();o=Math.max(o,m.width);j+=a[n].height+g}}return{width:o+k.left+k.right,height:j+k.top+k.bottom}}}d.preferred=e("preferred");
d.minimum=e("minimum");d.maximum=e("maximum");return d},gridLayout:function(l){var j={},f=this.layout(l,j),c=l.leftGap||0,g=l.rightGap||0,e=l.topGap||0,k=l.bottomGap||0,h=l.items||[],b=l.columns,m=l.rows,a=l.widths,i=l.heights;f.layout=function(D){var u=D.bounds();var I=D.insets(),r=u.width-(I.left+I.right)-c-g,M=u.height-(I.top+I.bottom)-e-k;var n={},C=0,o=0;if(a){for(var H=0;H<a.length;H++){var A=a[H];if(A!="auto"){n[""+H]=A;C+=A;o++}}}var q={},F=0,K=0;if(i){for(var H=0;H<i.length;H++){var t=i[""+H];
if(t!="auto"){q[H]=t;F+=t;K++}}}var G=(r-(b-1)*j.hgap-C)/(b-o),s=(M-(m-1)*j.vgap-F)/(m-K);var p=function(x,O,y,Q){if(!x){return y*(O+Q)}var w=0;for(var P=0;P<y;P++){var N=x[P];if(N=="auto"){w+=O}else{w+=N}if(P>0){w+=Q}}return w};for(var E=0;E<h.length;E++){var L=h[E];var B=n[L.column]||G,J=q[L.row]||s;var z=p(a,G,L.column,j.hgap);var v=p(i,s,L.row,j.vgap);if(L.el){L.el.bounds({x:z+c,y:v+e,width:B,height:J});L.el.doLayout()}}return D};function d(n){return function(q){if(n=="minimum"||n=="maximum"){return q[n.substring(0,3)+"Size"]()
}var s=q.bounds();var p=q.insets(),o=s.width-(p.left+p.right),r=s.height-(p.top+p.bottom),u=o-(b-1)*j.hgap,t=r-(m-1)*j.vgap;return{width:u,height:t}}}f.preferred=d("preferred");f.minimum=d("minimum");f.maximum=d("maximum");return f},tableLayout:function(m){var j={},f=this.layout(m,j),n=m.vgap,g=m.items,a=m.columnSize,l=m.rowSize,h=m.scrollContainer;f.layout=function(p){var o=p.bounds(),r=p.insets(),v=o.width-(r.left+r.right),w=o.height-(r.top+r.bottom),t=0,q=0;for(var C=0;C<g.length;C++){var A=g[C];
if(k(A)){t+=(i(C,w)+n)}else{for(var s=0;s<A.length;s++){var B=A[s];var z=c(C)-t;var u=i(C,w);q=Math.max(z+u,q);if(B==null){continue}var x={x:e(s,v),y:z};if(isNaN(B.el.width)){x.width=d(s,v)}if(isNaN(B.el.height)){x.height=u}B.element.bounds(x);B.element.doLayout()}}}if(h){h.bounds({x:0,y:0,width:v,height:q})}};function k(p){for(var o=0;o<p.length;o++){if(p[o]!=null&&p[o].element.isVisible()){return false}}return true}function e(q,p){var o=0;for(var r=0;r<q;r++){var s=a[r];if(s>0&&s<1){s=s*p}o+=s}return o
}function c(o){var q=0;for(var p=0;p<o;p++){q+=l[p]+n}return q}function d(p,o){var q=a[p];if(!isNaN(q)){if(q>0&&q<1){return q*o}return q}if(p!=a.length-1){return 0}return o-e(p,o)}function i(p,q){var o=l[p];if(!isNaN(o)){return o}if(p!=l.length-1){return 0}return q-c(p)}function b(o){return function(p){return{width:0,height:0}}}f.preferred=b("preferred");f.minimum=b("minimum");f.maximum=b("maximum");return f},borderlayout:function(i){var g={},d=this.layout(i,g),f=i.east,h=i.west,b=i.north,e=i.south,a=i.center;
d.layout=function(k){var j=k.bounds(),q=k.insets(),w=q.top,p=q.left,t=j.width-(q.left+q.right),u=j.height-(q.top+q.bottom);var l=0;var o=0;var x=t;var n=u;if(b&&b.el&&b.el.isVisible()){var m=b.height||b.el.height();b.el.bounds({x:p,y:w,width:t,height:m});l=w+m;n=u-m;b.el.doLayout()}if(e&&e.el&&e.el.isVisible()){var s=e.height||e.el.height();e.el.bounds({x:p,y:u-s,width:t,height:s});n-=s;e.el.doLayout()}if(h&&h.el&&h.el.isVisible()){var r=h.width||h.el.width();h.el.bounds({x:p,y:l,width:r,height:n});
o=p+r;x=t-r;h.el.doLayout()}if(f&&f.el&&f.el.isVisible()){var v=f.width||f.el.width();f.el.bounds({x:t-v,y:l,width:v,height:n});x=x-v;f.el.doLayout()}a.el.bounds({x:o,y:l,width:x,height:n});a.el.doLayout()};function c(j){return function(k){return{width:0,height:0}}}d.preferred=c("preferred");d.minimum=c("minimum");d.maximum=c("maximum");return d},card:function(b){var e={},c=this.layout(b,e),a=b.items;c.layout=function(h){var m=h.bounds(),g=h.insets(),f=m.width-(g.left+g.right),k=m.height-(g.top+g.bottom);
for(var j=0;j<a.length;j++){var l=a[j];if(l.el instanceof $&&l.el.isVisible()){l.el.bounds({x:g.left,y:g.top,width:f,height:k});l.el.doLayout()}}};function d(f){return function(g){return{width:0,height:0}}}c.preferred=d("preferred");c.minimum=d("minimum");c.maximum=d("maximum");return c},grid:function(h){var g={},d=this.layout(h,g),e=h.items||[],b=h.columns||e.length,i=h.rows||0;if(i>0){b=Math.floor((e.length+i-1)/i)}else{i=Math.floor((e.length+b-1)/b)}var a=h.widths||[],f=h.heights||[];$.each([{ar:a,len:b},{ar:f,len:i}],function(j,k){while(k.ar.length<k.len){k.ar[k.ar.length]=-1
}});d.layout=function(n){var m=n.bounds();var u,t,q=n.insets(),z=q.left,w=q.top,r=m.width-(q.left+q.right)-(b-1)*g.hgap,v=m.height-(q.top+q.bottom)-(i-1)*g.vgap;var l=Array.prototype.concat.call([],a),s=Array.prototype.concat.call([],f);$.each([{ar:l,len:r},{ar:s,len:v}],function(y,x){var j=0;$.each(x.ar,function(C,D){if(D>=0){x.len-=D}else{j++}});if(j>0){var B=x.len/j;$.each(x.ar,function(C,D){if(D<0){x.ar[C]=B}})}});var k=0,p=0;for(u=0;u<e.length;u++){var o=l[k],A=s[p];e[u].bounds({x:z,y:w,width:o,height:A});
if(k<b-1){z+=o+g.hgap;k++}else{w+=A+g.vgap;z=q.left;k=0;p++}e[u].doLayout()}return n};function c(j){return function(l){var t,m=0,u=0,v,p=l.insets();var r=Array.prototype.concat.call([],a),n=Array.prototype.concat.call([],f);var k=0,o=0;for(var t=0;t<e.length;t++){v=e[t][j+"Size"]();var m=r[k],u=n[o];if(a[k]<0){r[k]=Math.max(r[k],v.width)}if(f[o]<0){n[o]=Math.max(n[o],v.height)}if(k<b-1){k++}else{k=0;o++}e[t].doLayout()}var s=0;$.each(r,function(x,y){if(y>0){s+=y}});var q=0;$.each(n,function(w,x){if(x>0){q+=x
}});return{width:p.left+p.right+s+(b-1)*g.hgap,height:p.top+p.bottom+q+(i-1)*g.vgap}}}d.preferred=c("preferred");d.minimum=c("minimum");d.maximum=c("maximum");return d},center:function(a){var e={},c=this.layout(a,e),b=a.item||[];c.layout=function(g){var f=g.bounds(),i=g.insets(),m=i.left,l=i.top,j=f.width-(i.left+i.right),k=f.height-(i.top+i.bottom);var h=b.width||"auto",n=b.height||"auto";if(h==="auto"){h=j}if(n==="auto"){n=k}if(b.el){b.el.bounds({x:m+(j-h)*0.5,y:l+(k-n)*0.5,width:h,height:n});b.el.doLayout()
}};function d(f){return function(){return{width:0,height:0}}}c.preferred=d("preferred");c.minimum=d("minimum");c.maximum=d("maximum");return c}}})();
/*!
 * JSizes - JQuery plugin v0.31
 *
 * Licensed under the revised BSD License.
 * Copyright 2008, Bram Stein
 * All rights reserved.
 */
(function(b){var a=function(c){return parseFloat(c)||0};b.each(["min","max"],function(d,c){b.fn[c+"Size"]=function(g){var f,e;if(g){if(g.width){this.css(c+"-width",g.width)}if(g.height){this.css(c+"-height",g.height)}return this}else{f=this.css(c+"-width");e=this.css(c+"-height");return{width:(c==="max"&&(f==="none"||a(f)===-1)&&Number.MAX_VALUE)||a(f),height:(c==="max"&&(e==="none"||a(e)===-1)&&Number.MAX_VALUE)||a(e)}
}}});b.fn.isVisible=function(){return this.css("visibility")!=="hidden"&&this.css("display")!=="none"};b.each(["border","margin","padding"],function(d,c){b.fn[c]=function(e){if(e){if(e.top){this.css(c+"-top"+(c==="border"?"-width":""),e.top)}if(e.bottom){this.css(c+"-bottom"+(c==="border"?"-width":""),e.bottom)}if(e.left){this.css(c+"-left"+(c==="border"?"-width":""),e.left)}if(e.right){this.css(c+"-right"+(c==="border"?"-width":""),e.right)}return this}else{return{top:a(this.css(c+"-top"+(c==="border"?"-width":""))),bottom:a(this.css(c+"-bottom"+(c==="border"?"-width":""))),left:a(this.css(c+"-left"+(c==="border"?"-width":""))),right:a(this.css(c+"-right"+(c==="border"?"-width":"")))}
}}})})(jQuery);
/*!
 * jLayout JQuery Plugin v0.11
 *
 * Licensed under the revised BSD License.
 * Copyright 2008, Bram Stein
 * All rights reserved.
 */
if(jQuery&&jLayout){(function(a){a.fn.doLayout=function(){this.css({position:"absolute"});if(this.data("jlayout")){this.data("jlayout").layout(this,arguments)}};a.fn.insets=function(){var d=this.padding(),c=this.border();return{top:d.top,bottom:d.bottom+c.bottom+c.top,left:d.left,right:d.right+c.right+c.left}};a.fn.bounds=function(c){var b={hasIgnoredBounds:true};
if(c){if(!isNaN(c.x)){b.left=c.x}if(!isNaN(c.y)){b.top=c.y}if(c.width!=null){b.width=(c.width-(this.outerWidth(true)-this.width()));b.width=(b.width>=0)?b.width:c.width}if(c.height!=null){b.height=c.height-(this.outerHeight(true)-this.height());b.height=(b.height>=0)?b.height:c.height}if(a(this).data("sizeFixed")){b.width=c.width}this.css(b);var d=this.data("tmp");if(!d||!FR.equals(d,b)){this.triggerHandler(FR.Events.RESIZE,[b]);this.data("tmp",b)}return this}else{b=this.position();return{x:b.left,y:b.top,width:this.outerWidth(),height:this.outerHeight()}
}};a.each(["min","max"],function(c,b){a.fn[b+"imumSize"]=function(d){if(this.data("jlayout")){return this.data("jlayout")[b+"imum"](this)}else{return this[b+"Size"](d)}}});a.fn.preferredSize=function(){var d,e,c=this.margin(),b={width:0,height:0};if(this.data("jlayout")){b=this.data("jlayout").preferred(this);d=this.minimumSize();e=this.maximumSize();b.width+=c.left+c.right;b.height+=c.top+c.bottom;if(b.width<d.width||b.height<d.height){b.width=Math.max(b.width,d.width);b.height=Math.max(b.height,d.height)
}else{if(b.width>e.width||b.height>e.height){b.width=Math.min(b.width,e.width);b.height=Math.min(b.height,e.height)}}}else{b.width=this.bounds().width+c.left+c.right;b.height=this.bounds().height+c.top+c.bottom}return b}})(jQuery)};
jQuery.extend({unselectContents:function(){if(window.getSelection){window.getSelection().removeAllRanges()}else{if(document.selection){document.selection.empty()}}}});jQuery.fn.extend({selectContents:function(){$(this).each(function(b){var d=this;var c,a,f,e;if((f=d.ownerDocument)&&(e=f.defaultView)&&typeof e.getSelection!="undefined"&&typeof f.createRange!="undefined"&&(c=window.getSelection())&&typeof c.removeAllRanges!="undefined"){a=f.createRange();a.selectNode(d);if(b==0){c.removeAllRanges()
}c.addRange(a)}else{if(document.body&&typeof document.body.createTextRange!="undefined"&&(a=document.body.createTextRange())){a.moveToElementText(d);a.select()}}})},setCaret:function(){if(!$.browser.msie){return}var a=function(){var b=$(this).get(0);b.caretPos=document.selection.createRange().duplicate()};$(this).click(a).select(a).keyup(a)},insertAtCaret:function(c){var b=$(this).get(0);if(document.all&&b.createTextRange&&b.caretPos){var d=b.caretPos;d.text=d.text.charAt(d.text.length-1)==""?c+"":c
}else{if(b.setSelectionRange){var g=b.selectionStart;var f=b.selectionEnd;var h=b.value.substring(0,g);var e=b.value.substring(f);b.value=h+c+e;b.focus();var a=c.length;b.setSelectionRange(g+a,g+a);b.blur()}else{b.value+=c}}}});
$.extend(Date.prototype,{getTimezone:function(){return this.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,4})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")},getLastDateOfMonth:function(){return new Date(this.getFullYear(),this.getMonth(),this.getMonthDays())},getMonthDays:function(c){var b=[31,28,31,30,31,30,31,31,30,31,30,31];var a=this.getFullYear();if(typeof c=="undefined"){c=this.getMonth()}if(((0===(a%4))&&((0!==(a%100))||(0===(a%400))))&&c===1){return 29}else{return b[c]}},getWeekNumber:function(){var c=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0);
var b=c.getDay();c.setDate(c.getDate()-(b+6)%7+3);var a=c.valueOf();c.setMonth(0);c.setDate(4);return Math.round((a-c.valueOf())/(7*86400000))+1}});(function(){var compileJFmt=function(jfmt,date){var str=jfmt.str,len=jfmt.len,ch=jfmt["char"];switch(ch){case"E":str=Date._DN[date.getDay()];break;case"y":if(len<=3){str=(date.getFullYear()+"").slice(2,4)}else{str=date.getFullYear()}break;case"M":if(len>2){str=Date._MN[date.getMonth()]}else{if(len<2){str=date.getMonth()+1}else{str=String.leftPad(date.getMonth()+1+"",2,"0")
}}break;case"d":if(len>1){str=String.leftPad(date.getDate()+"",2,"0")}else{str=date.getDate()}break;case"h":var hour=date.getHours()%12;if(hour===0){hour=12}if(len>1){str=String.leftPad(hour+"",2,"0")}else{str=hour}break;case"H":if(len>1){str=String.leftPad(date.getHours()+"",2,"0")}else{str=date.getHours()}break;case"m":if(len>1){str=String.leftPad(date.getMinutes()+"",2,"0")}else{str=date.getMinutes()}break;case"s":if(len>1){str=String.leftPad(date.getSeconds()+"",2,"0")}else{str=date.getSeconds()
}break;case"a":str=date.getHours()<12?"am":"pm";break;case"z":str=date.getTimezone();break;default:str=jfmt.str;break}return str};FR.parseFmt=function(fmt){if(!fmt){return""}fmt=String(fmt).replace(/y{4,}/g,"%Y").replace(/y{2}/g,"%y").replace(/M{4,}/g,"%b").replace(/M{3}/g,"%B").replace(/M{2}/g,"%X").replace(/M{1}/g,"%x").replace(/a{1}/g,"%p");if(new RegExp("d{2,}","g").test(fmt)){fmt=fmt.replace(/d{2,}/g,"%d")}else{fmt=fmt.replace(/d{1}/g,"%e")}if(new RegExp("h{2,}","g").test(fmt)){fmt=fmt.replace(/h{2,}/g,"%I")
}else{fmt=fmt.replace(/h{1}/g,"%I")}if(new RegExp("H{2,}","g").test(fmt)){fmt=fmt.replace(/H{2,}/g,"%H")}else{fmt=fmt.replace(/H{1}/g,"%H")}fmt=fmt.replace(/m{2,}/g,"%M").replace(/s{2,}/g,"%S");return fmt};FR.matchDateFormat=function(date,format){if(typeof date!="string"||typeof format!="string"||!date||!format){return false}var zh_yMd="["+String.fromCharCode(24180)+String.fromCharCode(26376)+String.fromCharCode(26085)+"]";if(date.match(zh_yMd)){if(format.match(zh_yMd)){date=date.replaceAll(zh_yMd,"-");
format=format.replaceAll(zh_yMd,"-");if(date.endWith("-")&&format.endWith("-")){date=date.substring(0,date.length-1);format=format.substring(0,format.length-1)}}else{return false}}else{if(format.match(zh_yMd)){return false}}var isAM=null;if(format.endWith(" a")){format=format.substring(0,format.length-2);if(date.endWith(" am")||date.endWith(" pm")){isAM=date.endWith(" am");date=date.substring(0,date.length-3)}else{return false}}if(date.replace(/[0-9]/g,"")!=format.replace(/[YyMmDdHhSsa]/g,"")){return false
}var formatStr=format;var dateStr=date;var formatArr=[];var dateArr=[];if(format.indexOf(" ")==-1){dateArr=shortMatch(dateStr,formatStr);if(!dateArr){return false}}else{var ff=format.split(" ");var dd=date.split(" ");for(var i=0;i<ff.length;i++){var temp=shortMatch(dd[i],ff[i]);if(!temp){return false}else{dateArr=dateArr.concat(temp)}}}function shortMatch(str,fmt){var da=[];var fa=[];if(fmt.match(/[-/:.]/)){fa=fmt.split(/[-/:.]/);formatArr=formatArr.concat(fa);var da=str.split(/[-/:.]/);return da
}while(fmt.length>0){var reg=new RegExp(fmt.substring(0,1)+"+");var f=fmt.match(reg).toString();fa.push(f);formatArr.push(f);fmt=fmt.substring(f.length)}var len=0;for(var i=0;i<fa.length;i++){var tmpLen=0;if(fa[i].length===1){if(i==fa.length-1){tmpLen=str.length-len}else{if(i==fa.length-2){switch(str.length-len){case 2:tmpLen=1;break;case 3:if(invalidStr(str.substring(len,len+2),fa[i])||fa[i+1].length===2){tmpLen=1}else{if(fa[i+1].length===1&&invalidStr(str.substring(len+1,len+3),fa[i+1])){tmpLen=2
}else{tmpLen=1}}break;case 4:tmpLen=2;break;default:return false}}}}else{tmpLen=fa[i].length}da[i]=str.substring(len,len+tmpLen);len+=tmpLen}return da}function invalidStr(str,fm){return str.match(/[Mh]/)&&parseInt(fm,10)>12||str.match(/[d]/)&&parseInt(fm,10)>31||str.match(/[H]/)&&parseInt(fm,10)>23||str.match(/[ms]/)&&parseInt(fm,10)>59}if(formatArr.length!=dateArr.length){return false}else{for(var i=0;i<formatArr.length;i++){var ff=formatArr[i].replace(/ /g,"");var vv=dateArr[i].replace(/ /g,"");
if(ff.length===1&&((vv.length===2&&vv.startWith("0"))||vv.length>2)||ff.length===2&&vv.length!==2||ff.length===4&&vv.length!==4){return false}}var que=["y","M","d","h","H","m","s"];for(var i=0;i<formatArr.length;i++){if(formatArr[i].match(/[yMd]/)){for(var j=i+1;j<formatArr.length;j++){if(formatArr[j].match(/[yMd]/)&&que.indexOf(formatArr[i].substring(0,1))>que.indexOf(formatArr[j].substring(0,1))){var tmp=formatArr[i];formatArr[i]=formatArr[j];formatArr[j]=tmp;tmp=dateArr[i];dateArr[i]=dateArr[j];
dateArr[j]=tmp}}}}if(!format.match(/[hHms]/)){var dt="";for(var i=0;i<dateArr.length;i++){var yMd=formatArr[i]=="yy"?"20"+dateArr[i]:dateArr[i];dt=dt.length===0?yMd:dt+"/"+yMd}var res=new Date(dt);if(!FR.isInvalidDate(res)){if(!inMonthRange(res)){return false}return res}else{if(!FR.isInvalidDate(new Date(dt+"/01"))){return new Date(dt+"/01")}else{if(!FR.isInvalidDate(new Date(dt+"/01/01"))){return new Date(dt+"/01/01")}}}}else{if(checkHms(date)){return date}var dt="";var spt=false;for(var i=0;i<formatArr.length;
i++){if(formatArr[i].match(/[yMd]/)){var yMd=formatArr[i]=="yy"?"20"+dateArr[i]:dateArr[i];dt=dt.length===0?yMd:dt+"/"+yMd}else{var hms=dateArr[i];if(formatArr[i].indexOf("h")!=-1&&isAM===false&&parseInt(hms)<12){hms=parseInt(hms)+12}if(!spt){dt=dt+" "+hms;spt=true}else{dt=dt+":"+hms}}}var res=new Date(dt);if(!inMonthRange(res)){return false}return res}}function checkHms(timeStr){var parts;if(FR.isEmpty(timeStr)){return false}parts=timeStr.split(":");if(FR.isEmpty(parts)){return false}for(i=0;i<parts.length;
i++){if(isNaN(parts[i])){return false}}if(parts.length===2){h=parts[0];m=parts[1];if(format.match(/[s]/)){if(h<0||h>59){return false}if(m<0||m>59){return false}}else{if(h<0||h>23){return false}if(m<0||m>59){return false}}return true}else{if(parts.length===3){h=parts[0];m=parts[1];s=parts[3];if(h<0||h>23){return false}if(m<0||m>59){return false}if(s<0||s>59){return false}}}return true}function inMonthRange(res){var d,m;for(var i=0;i<formatArr.length;i++){if(formatArr[i].indexOf("d")!=-1){d=dateArr[i].replace(/^[0]/,"")
}else{if(formatArr[i].indexOf("M")!=-1){m=dateArr[i].replace(/^[0]/,"")}}}if(d==null||m==null){return true}return parseInt(d)==res.getDate()&&parseInt(m)==res.getMonth()+1}};FR.str2Date=function(str,format){if(typeof str!="string"||typeof format!="string"){return null}var fmt=FR.parseFmt(format);return Date.parseDateTime(str,fmt)};FR.date2Str=function(date,format){if(!date){return""}var len=format.length,result="";if(len>0){var flagch=format.charAt(0),start=0,str=flagch;for(var i=1;i<len;i++){var ch=format.charAt(i);
if(flagch!==ch){result+=compileJFmt({"char":flagch,str:str,len:i-start},date);flagch=ch;start=i;str=flagch}else{str+=ch}}result+=compileJFmt({"char":flagch,str:str,len:len-start},date)}return result};Date.patterns={ISO8601Long:"Y-m-d H:i:s",ISO8601Short:"Y-m-d",ShortDate:"n/j/Y",LongDate:"l, F d, Y",FullDateTime:"l, F d, Y g:i:s A",MonthDay:"F d",ShortTime:"g:i A",LongTime:"g:i:s A",SortableDateTime:"Y-m-d\\TH:i:s",UniversalSortableDateTime:"Y-m-d H:i:sO",YearMonth:"F, Y"};Date.parseFunctions={count:0};
Date.parseRegexes=[];Date.formatFunctions={count:0};Date._MN=[FR.i18nText("FR-Base_January"),FR.i18nText("FR-Base_February"),FR.i18nText("FR-Base_March"),FR.i18nText("FR-Base_April"),FR.i18nText("FR-Base_May"),FR.i18nText("FR-Base_June"),FR.i18nText("FR-Base_July"),FR.i18nText("FR-Base_August"),FR.i18nText("FR-Base_September"),FR.i18nText("FR-Base_October"),FR.i18nText("FR-Base_November"),FR.i18nText("FR-Base_December")];Date._SMN=[FR.i18nText("FR-Base_Short-Jan"),FR.i18nText("FR-Base_Short-Feb"),FR.i18nText("FR-Base_Short-Mar"),FR.i18nText("FR-Base_Short-Apr"),FR.i18nText("FR-Base_Short-May"),FR.i18nText("FR-Base_Short-Jun"),FR.i18nText("FR-Base_Short-Jul"),FR.i18nText("FR-Base_Short-Aug"),FR.i18nText("FR-Base_Short-Sep"),FR.i18nText("FR-Base_Short-Oct"),FR.i18nText("FR-Base_Short-Nov"),FR.i18nText("FR-Base_Short-Dec")];
Date._DN=[FR.i18nText("FR-Base_Sche-Sunday"),FR.i18nText("FR-Base_Sche-Monday"),FR.i18nText("FR-Base_Sche-Tuesday"),FR.i18nText("FR-Base_Sche-Wednesday"),FR.i18nText("FR-Base_Sche-Thursday"),FR.i18nText("FR-Base_Sche-Friday"),FR.i18nText("FR-Base_Sche-Saturday")];Date._SDN=[FR.i18nText("FR-Base_Sun"),FR.i18nText("FR-Base_Mon"),FR.i18nText("FR-Base_Tue"),FR.i18nText("FR-Base_Wed"),FR.i18nText("FR-Base_Thu"),FR.i18nText("FR-Base_Fri"),FR.i18nText("FR-Base_Sat")];Date.y2kYear=50;Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};
Date.getMonthNumber=function(name){return Date.monthNumbers[name.substring(0,1).toUpperCase()+name.substring(1,3).toLowerCase()]};Date.parseDate=function(input,format){if(Date.parseFunctions[format]==null){Date.createParser(format)}var func=Date.parseFunctions[format];return Date[func](input)};Date.createParser=function(format){var funcName="parse"+Date.parseFunctions.count++;var regexNum=Date.parseRegexes.length;var currentGroup=1;Date.parseFunctions[format]=funcName;var code="Date."+funcName+" = function(input){\nvar y = -1, m = -1, d = -1, h = -1, i = -1, s = -1, ms = -1, o, z, u, v;\nvar d = new Date();\ny = d.getFullYear();\nm = d.getMonth();\nd = d.getDate();\nvar results = input.match(Date.parseRegexes["+regexNum+"]);\nif (results && results.length > 0) {";
var regex="";var special=false;var ch="";for(var i=0;i<format.length;++i){ch=format.charAt(i);if(!special&&ch=="\\"){special=true}else{if(special){special=false;regex+=String.escape(ch)}else{var obj=Date.formatCodeToRegex(ch,currentGroup);currentGroup+=obj.g;regex+=obj.s;if(obj.g&&obj.c){code+=obj.c}}}}code+="if (u)\n{v = new Date(u * 1000);}else if (y >= 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0 && ms >= 0)\n{v = new Date(y, m, d, h, i, s, ms);}\nelse if (y >= 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0)\n{v = new Date(y, m, d, h, i, s);}\nelse if (y >= 0 && m >= 0 && d > 0 && h >= 0 && i >= 0)\n{v = new Date(y, m, d, h, i);}\nelse if (y >= 0 && m >= 0 && d > 0 && h >= 0)\n{v = new Date(y, m, d, h);}\nelse if (y >= 0 && m >= 0 && d > 0)\n{v = new Date(y, m, d);}\nelse if (y >= 0 && m >= 0)\n{v = new Date(y, m);}\nelse if (y >= 0)\n{v = new Date(y);}\n}return (v && (z || o))?\n    (z ? v.add(Date.SECOND, (v.getTimezoneOffset() * 60) + (z*1)) :\n        v.add(Date.HOUR, (v.getGMTOffset() / 100) + (o / -100))) : v\n;}";
Date.parseRegexes[regexNum]=new RegExp("^"+regex+"$","i");eval(code)};Date.parseDateTime=function(str,fmt){var today=new Date();var y=0;var m=0;var d=1;var a=str.split(/\W+/);if(fmt.toLowerCase()=="%y%x"||fmt.toLowerCase()=="%y%x%d"){var tempStr=a.join("");var yearlength=4;var otherlength=2;a[0]=tempStr.substring(0,yearlength);a[1]=tempStr.substring(yearlength,yearlength+otherlength);a[2]=tempStr.substring(yearlength+otherlength,yearlength+otherlength*2)}var b=fmt.match(/%./g);var i=0,j=0;var hr=0;
var min=0;var sec=0;for(i=0;i<a.length;++i){if(!a[i]){continue}switch(b[i]){case"%d":case"%e":d=parseInt(a[i],10);break;case"%X":m=parseInt(a[i],10)-1;break;case"%x":m=parseInt(a[i],10)-1;break;case"%Y":case"%y":y=parseInt(a[i],10);(y<100)&&(y+=(y>29)?1900:2000);break;case"%b":case"%B":for(j=0;j<12;++j){if(Date._MN[j].substr(0,a[i].length).toLowerCase()==a[i].toLowerCase()){m=j;break}}break;case"%H":case"%I":case"%k":case"%l":hr=parseInt(a[i],10);break;case"%P":case"%p":if(/pm/i.test(a[i])&&hr<12){hr+=12
}else{if(/am/i.test(a[i])&&hr>=12){hr-=12}}break;case"%M":min=parseInt(a[i],10);case"%S":sec=parseInt(a[i],10);break}}if(isNaN(y)){y=today.getFullYear()}if(isNaN(m)){m=today.getMonth()}if(isNaN(d)){d=today.getDate()}if(isNaN(hr)){hr=today.getHours()}if(isNaN(min)){min=today.getMinutes()}if(isNaN(sec)){sec=today.getSeconds()}if(y!==0){return new Date(y,m,d,hr,min,sec)}y=0;m=-1;d=0;for(i=0;i<a.length;++i){if(a[i].search(/[a-zA-Z]+/)!=-1){var t=-1;for(j=0;j<12;++j){if(Date._MN[j].substr(0,a[i].length).toLowerCase()==a[i].toLowerCase()){t=j;
break}}if(t!=-1){if(m!=-1){d=m+1}m=t}}else{if(parseInt(a[i],10)<=12&&m==-1){m=a[i]-1}else{if(parseInt(a[i],10)>31&&y===0){y=parseInt(a[i],10);(y<100)&&(y+=(y>29)?1900:2000)}else{if(d===0){d=a[i]}}}}}if(y===0){y=today.getFullYear()}if(m!==-1&&d!==0){return new Date(y,m,d,hr,min,sec)}return today};Date.formatCodeToRegex=function(character,currentGroup){switch(character){case"d":return{g:1,c:"d = parseInt(results["+currentGroup+"], 10);\n",s:"(\\d{2})"};case"D":for(var a=[],i=0;i<7;a.push(Date._SDN[i]),++i){}return{g:0,c:null,s:"(?:"+a.join("|")+")"};
case"j":return{g:1,c:"d = parseInt(results["+currentGroup+"], 10);\n",s:"(\\d{1,2})"};case"l":return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"};case"N":return{g:0,c:null,s:"[1-7]"};case"S":return{g:0,c:null,s:"(?:st|nd|rd|th)"};case"w":return{g:0,c:null,s:"[0-6]"};case"z":return{g:0,c:null,s:"(?:\\d{1,3}"};case"W":return{g:0,c:null,s:"(?:\\d{2})"};case"F":return{g:1,c:"m = parseInt(Date.getMonthNumber(results["+currentGroup+"]), 10);\n",s:"("+Date._MN.join("|")+")"};case"m":return{g:1,c:"m = parseInt(results["+currentGroup+"], 10) - 1;\n",s:"(\\d{2})"};
case"M":for(var a=[],i=0;i<12;a.push(Date._SMN[i]),++i){}return{g:1,c:"m = parseInt(Date.getMonthNumber(results["+currentGroup+"]), 10);\n",s:"("+a.join("|")+")"};case"n":return{g:1,c:"m = parseInt(results["+currentGroup+"], 10) - 1;\n",s:"(\\d{1,2})"};case"t":return{g:0,c:null,s:"(?:\\d{2})"};case"L":return{g:0,c:null,s:"(?:1|0)"};case"o":case"Y":return{g:1,c:"y = parseInt(results["+currentGroup+"], 10);\n",s:"(\\d{4})"};case"y":return{g:1,c:"var ty = parseInt(results["+currentGroup+"], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"};
case"a":return{g:1,c:"if (results["+currentGroup+"] == 'am') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(am|pm)"};case"A":return{g:1,c:"if (results["+currentGroup+"] == 'AM') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(AM|PM)"};case"g":case"G":return{g:1,c:"h = parseInt(results["+currentGroup+"], 10);\n",s:"(\\d{1,2})"};case"h":case"H":return{g:1,c:"h = parseInt(results["+currentGroup+"], 10);\n",s:"(\\d{2})"};case"i":return{g:1,c:"i = parseInt(results["+currentGroup+"], 10);\n",s:"(\\d{2})"};
case"s":return{g:1,c:"s = parseInt(results["+currentGroup+"], 10);\n",s:"(\\d{2})"};case"u":return{g:1,c:"ms = parseInt(results["+currentGroup+"], 10);\n",s:"(\\d{3})"};case"O":return{g:1,c:["o = results[",currentGroup,"];\n","var sn = o.substring(0,1);\n","var hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60);\n","var mn = o.substring(3,5) % 60;\n","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))?\n","    (sn + String.leftPad(hr, 2, 0) + String.leftPad(mn, 2, 0)) : null;\n"].join(""),s:"([+\\-]\\d{4})"};
case"P":return{g:1,c:["o = results[",currentGroup,"];\n","var sn = o.substring(0,1);\n","var hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60);\n","var mn = o.substring(4,6) % 60;\n","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))?\n","    (sn + String.leftPad(hr, 2, 0) + String.leftPad(mn, 2, 0)) : null;\n"].join(""),s:"([+\\-]\\d{2}:\\d{2})"};case"T":return{g:0,c:null,s:"[A-Z]{1,4}"};case"Z":return{g:1,c:"z = results["+currentGroup+"] * 1;\nz = (-43200 <= z && z <= 50400)? z : null;\n",s:"([+\\-]?\\d{1,5})"};
case"c":var df=Date.formatCodeToRegex,calc=[];var arr=[df("Y",1),df("m",2),df("d",3),df("h",4),df("i",5),df("s",6),df("P",7)];for(var i=0,l=arr.length;i<l;++i){calc.push(arr[i].c)}return{g:1,c:calc.join(""),s:arr[0].s+"-"+arr[1].s+"-"+arr[2].s+"T"+arr[3].s+":"+arr[4].s+":"+arr[5].s+arr[6].s};case"U":return{g:1,c:"u = parseInt(results["+currentGroup+"], 10);\n",s:"(-?\\d+)"};default:return{g:0,c:null,s:character.replace(/([.*+?^$}{()|[\]\/\\])/g,"\\$1")}}};if(FR.Browser.r.safari){Date.brokenSetMonth=Date.prototype.setMonth;
Date.prototype.setMonth=function(num){if(num<=-1){var n=Math.ceil(-num);var back_year=Math.ceil(n/12);var month=(n%12)?12-n%12:0;this.setFullYear(this.getFullYear()-back_year);return Date.brokenSetMonth.call(this,month)}else{return Date.brokenSetMonth.apply(this,arguments)}}}})();
(function(a){FR.Layout=FR.extend(FR.Widget,{_defaultConfig:function(){return a.extend(FR.Layout.superclass._defaultConfig.apply(),{scrollable:false,scrollx:false,scrolly:false,widgetBackground:null,border:null,onClick:null})},_init:function(){FR.Layout.superclass._init.apply(this,arguments);this._init4Margin();this._init4Style();this._init4Scroll();this._init4Click()},_init4Margin:function(){if(this.options.marginTop){this.element.css("marginTop",this.options.marginTop);this.marginHeight=(this.marginHeight||0)+parseInt(this.options.marginTop)
}if(this.options.marginLeft){this.element.css("marginLeft",this.options.marginLeft);this.marginWidth=(this.marginWidth||0)+parseInt(this.options.marginLeft)}if(this.options.marginBottom){this.element.css("marginBottom",this.options.marginBottom);this.marginHeight=(this.marginHeight||0)+parseInt(this.options.marginBottom)}if(this.options.marginRight){this.element.css("marginRight",this.options.marginRight);this.marginWidth=(this.marginWidth||0)+parseInt(this.options.marginRight)}},_init4Style:function(){this._initBackGround();
var b=this.options.border;if(b){this.element.css("border-style",b.type);this.element.css("border-color",b.color);this.element.css("border-width",b.width);if(b.corner){this.element.css("border-radius","15px 15px 15px 15px");if(a.browser.msie){this.element.addClass("ie-border-radius")}}if(!(a.browser.msie&&a.browser.version<"9.0")){this.element.css("box-shadow",b.borderStyle)}}},_initBackGround:function(){if(!this.options.widgetBackground){return}if(this.options.type&&this.options.type=="fit"){this._initFitBackground();
return}var b=this.options.widgetOpacity;if(!b){this.element.css("background",this.options.widgetBackground.background);return}this.$background=a("<div class='widgetBackground'></div>");this.$background.css("filter","alpha(opacity="+b*100+")");this.$background.css("opacity",b);this.element.css("background",this.options.widgetBackground.background);this.$background.prependTo(this.element)},_initFitBackground:function(){var d=this.element.parent();var e=this.element.margin();var b=this.element.width()+(e.left||0)+(e.right||0);
var c=this.element.height()+(e.top||0)+(e.bottom||0);if(this.$background&&d.has(this.$background).length>0){this.$background.css("width",(b||0));this.$background.css("height",(c||0));this.$background.css("top",this.element.css("top"));this.$background.css("left",this.element.css("left"));return}this.$background=a("<div class='widgetBackground'></div>");this.$background.css("position","absolute");var f=this.options.widgetOpacity;if(f){this.$background.css("filter","alpha(opacity="+f*100+")");this.$background.css("opacity",f)
}this.$background.css("width",(b||0));this.$background.css("height",(c||0));FR.setBackground(this.$background,this.options.widgetBackground,c);this.$background.prependTo(d)},_init4Scroll:function(){if(!this.options.scrollable){this.element.css("overflow","hidden")}else{this.element.css("overflow","auto")}if(this.options.scrollx){this.element.css({"overflow-x":"auto","overflow-y":"hidden"})}if(this.options.scrolly){this.element.css({"overflow-x":"hidden","overflow-y":"auto"})}},_init4Click:function(){var b=this;
this.element.click(function(d){b.fireEvent(FR.Events.CLICK,d)});var c=this.options;if(a.isFunction(c.onClick)){this.element.bind("click",c.onClick.createDelegate(this))}},doLayout:function(){this.element.doLayout(arguments)},setMinSize:function(){if(this.element.length>0&&this.element[0].tagName=="BODY"){var b=this.element.minimumSize();this.element.css({"min-width":b.width,"min-height":b.height});a("html").css("overflow","auto")}},_confirmEvents:function(){}});FR.AbsoluteLayout=FR.extend(FR.Layout,{_defaultConfig:function(){return a.extend(FR.AbsoluteLayout.superclass._defaultConfig.apply(),{baseCls:"fr-absolutelayout",scrollable:false})
},_init:function(){FR.AbsoluteLayout.superclass._init.apply(this,arguments);var g=this.options;this.element.addClass(g.baseCls);if(!a.isArray(g.items)){g.items=[];return}var d=g.items,f,b=d.length;g.widgets=[];var j=this.element;if(g.scrollable){j=a('<div class="fr-core-layout-scrollable">').css({position:"absolute",top:0,left:0}).appendTo(this.element);g.scrollContainer=j}for(f=0;f<b;f++){var c=d[f];if(!c.style){c.style=g.style}if(c.type){c.el=c}if(c.el.type){var h=FR.createWidget(a.extend(c.el,{resultWidgets:g.resultWidgets}));
g.widgets.push(h);var e=h.element;e.css({left:c.x,top:c.y,position:"absolute"});d[f].el=e;j.append(e);h.doResize({width:c.width,height:c.height})}else{if(c.el instanceof a){var e=c.el;e.css({left:c.x,top:c.y,position:"absolute"});j.append(e)}}}this.element.data("jlayout",jLayout.absolute(g));if(a.browser.msie&&!a.support.boxModel){if(g.height===0){g.height=1}if(g.width===0){g.width=1}}},doResize:function(f){FR.AbsoluteLayout.superclass.doResize.call(this,f);var d=this.options;this.element.css({width:(f?(f.width||d.width):d.width),height:f?(f.height||d.height):d.height,left:f?(f.left||d.left):d.left,top:f?(f.top||d.top):d.top});
for(var c=0,b=this.options.widgets.length;c<b;c++){var e=this.options.widgets[c];if(a.isFunction(e.doResize)){e.doResize({})}}},doLayout:function(){FR.AbsoluteLayout.superclass.doLayout.apply(this,arguments);for(var c=0,b=this.options.widgets.length;c<b;c++){var d=this.options.widgets[c];if(a.isFunction(d.doLayout)){d.doLayout()}}}});a.shortcut("absolute",FR.AbsoluteLayout);FR.FlowLayout=FR.extend(FR.Layout,{_defaultConfig:function(){return a.extend(FR.FlowLayout.superclass._defaultConfig.apply(),{hgap:5,vgap:5,baseCls:"fr-flowlayout"})
},_init:function(){FR.FlowLayout.superclass._init.apply(this,arguments);var g=this.options;this.element.addClass(g.baseCls);var d=g.items,f,b=d.length;g.widgets=[];for(f=0;f<b;f++){var c=d[f];if(c.el&&c.el.type){if(!c.el.style){c.el.style=g.style}var h=FR.createWidget(a.extend(c.el,{resultWidgets:g.resultWidgets}));g.widgets.push(h);var e=h.element;d[f].el=e;this.element.append(e)}else{if(c.el instanceof a){this.element.append(c.el)}}}this.element.data("jlayout",jLayout.flow(g))},doResize:function(c){FR.FlowLayout.superclass.doResize.call(this,c);
var b=this.options;this.element.css({width:b.width,height:b.height,left:b.left,top:b.top})},doLayout:function(){FR.FlowLayout.superclass.doLayout.apply(this,arguments)}});a.shortcut("flow",FR.FlowLayout);FR.GridLayout=FR.extend(FR.Layout,{_defaultConfig:function(){return a.extend(FR.GridLayout.superclass._defaultConfig.apply(),{hgap:0,vgap:0,leftGap:0,rightGap:0,topGap:0,bottomGap:0,baseCls:"fr-gridlayout"})},_init:function(){FR.GridLayout.superclass._init.apply(this,arguments);var g=this.options;
this.element.addClass(g.baseCls);var d=g.items,b=d.length;g.widgets=[];for(var e=0;e<b;e++){var c=d[e];if(c.el.type){if(!c.el.style){c.el.style=g.style}var h=FR.createWidget(a.extend(c.el,{resultWidgets:g.resultWidgets}));g.widgets.push(h);var f=h.element}else{f=c.el}c.el=f;this.element.append(f)}this.element.data("jlayout",jLayout.gridLayout(g))},doResize:function(c){FR.GridLayout.superclass.doResize.call(this,c);var b=this.options;this.element.css({width:(c?(c.width||b.width):b.width),height:(c?(c.height||b.height):b.height),left:c?(c.left||b.left):b.left,top:c?(c.top||b.top):b.top})
},doLayout:function(){FR.GridLayout.superclass.doLayout.apply(this,arguments)}});a.shortcut("grid",FR.GridLayout);FR.FrozenGridLayout=FR.extend(FR.Layout,{_init:function(){FR.FrozenGridLayout.superclass._init.apply(this,arguments);var c=this.element;var b=this.options;a.each(b.items||[],function(d,e){if(e.parent()[0]!=c[0]){e.appendTo(c)}});c.data("jlayout",jLayout.grid(b))},doLayout:function(){this.element.doLayout()},doResize:function(c){FR.FrozenGridLayout.superclass.doResize.apply(this,arguments);
var b=this.options;this.element.css({width:(c?(c.width||b.width):b.width)-(this.marginWidth||0),height:(c?(c.height||b.height):b.height)-(this.marginHeight||0),left:c?(c.left||b.left):b.left,top:c?(c.top||b.top):b.top})}});a.shortcut("frozengrid",FR.FrozenGridLayout);FR.TableLayout=FR.extend(FR.Layout,{_defaultConfig:function(){return a.extend(FR.TableLayout.superclass._defaultConfig.apply(),{baseCls:"fr-layout-table",vgap:5,items:[],columnSize:[],rowSize:[],scrollable:false})},_init:function(){FR.TableLayout.superclass._init.apply(this,arguments);
var f=this.options;var b=f.items;var k=this.element;if(f.scrollable){k=a('<div class="fr-core-layout-scrollable">').css({position:"absolute",top:0,left:0}).appendTo(this.element);f.scrollContainer=k}for(var d=0;d<b.length;d++){var h=b[d];for(var c=0;c<h.length;c++){var e=h[c];if(e==null){continue}if(e&&e.el&&e.el.type){if(!e.el.style){e.el.style=f.style}var g=FR.createWidget(a.extend(e.el,{resultWidgets:f.resultWidgets}));e.element=g.element}else{if(e&&e.el instanceof a){e.element=e.el}}k.append(e.element)
}}this.element.data("jlayout",jLayout.tableLayout(f))},setRowVisible:function(c,b){if(a.isArray(c)){for(var g=0;g<c.length;g++){this.setRowVisible(c[g],b)}}else{var e=this.options.items[c];for(var d=0;d<e.length;d++){var f=e[d];if(f&&f.element){if(b===true){f.element.show()}else{f.element.hide()}}}}},isRowVisible:function(b){var d=this.options.items[b];for(var c=0;c<d.length;c++){var e=d[c];if(e&&e.element){if(!e.element.isVisible()){return false}}}return true},refreshRowSize:function(b){this.options.rowSize=b;
this.element.data("jlayout",jLayout.tableLayout(this.options));this.doLayout()},doResize:function(c){FR.TableLayout.superclass.doResize.call(this,c);var b=this.options;this.element.css({width:(c?(c.width||b.width):b.width),height:(c?(c.height||b.height):b.height),left:c?(c.left||b.left):b.left,top:c?(c.top||b.top):b.top});this.doLayout()},doLayout:function(){FR.TableLayout.superclass.doLayout.apply(this,arguments)}});a.shortcut("tablelayout",FR.TableLayout);FR.BorderLayout=FR.extend(FR.Layout,{_defaultConfig:function(){return a.extend(FR.BorderLayout.superclass._defaultConfig.apply(),{baseCls:"fr-quick-border-layout"})
},_init:function(){FR.BorderLayout.superclass._init.apply(this,arguments);var f=this.options;var b=f.items;var d=["north","south","east","west","center"];this.regionField={};for(var c=0;c<b.length;c++){var e=b[c];var h=e.region;if(d.indexOf(h)!=-1){if(e.el&&e.el.type){if(!e.el.style){e.el.style=f.style}var g=FR.createWidget(a.extend(e.el,{width:e.width,height:e.height,resultWidgets:f.resultWidgets}));e.el=g.element}this.element.append(e.el);this.regionField[h]=e}}this.element.data("jlayout",jLayout.borderlayout(this.regionField))
},setRegionWH:function(c,b){if(!c||isNaN(b)){return}switch(c){case"north":this.regionField.north.height=b;break;case"south":this.regionField.south.height=b;break;case"east":this.regionField.east.width=b;break;case"west":this.regionField.west.width=b;break;default:}this.element.data("jlayout",jLayout.borderlayout(this.regionField))},doResize:function(c){FR.BorderLayout.superclass.doResize.call(this,c);var b=this.options;this.element.css({width:(c?(c.width||b.width):b.width),height:(c?(c.height||b.height):b.height),left:c?(c.left||b.left):b.left,top:c?(c.top||b.top):b.top});
this.doLayout()},doLayout:function(){FR.BorderLayout.superclass.doLayout.apply(this,arguments)}});a.shortcut("border",FR.BorderLayout);FR.CenterLayout=FR.extend(FR.Layout,{_defaultConfig:function(){return a.extend(FR.CenterLayout.superclass._defaultConfig.apply(),{baseCls:"fr-quick-center-layout"})},_init:function(){FR.CenterLayout.superclass._init.apply(this,arguments);var c=this.options,b=c.item;if(b&&b.el){if(b.el.type){if(!b.el.style){b.el.style=c.style}var d=FR.createWidget(a.extend(b.el,{width:b.width,height:b.height,resultWidgets:c.resultWidgets}));
b.el=d.element}else{if(!(b.el instanceof a)){FR.Msg.toast("el must be a widget or a jQuery element!");b.el=a("<div>")}}this.element.append(b.el)}this.element.data("jlayout",jLayout.center(c))},doLayout:function(){FR.CenterLayout.superclass.doLayout.apply(this,arguments)}});a.shortcut("center",FR.CenterLayout);FR.CardLayout=FR.extend(FR.Layout,{_defaultConfig:function(){return a.extend(FR.CardLayout.superclass._defaultConfig.apply(),{baseCls:"fr-quick-card-layout",defaultShowIndex:0,hideAction:null,showAction:null})
},_init:function(){FR.CardLayout.superclass._init.apply(this,arguments);var b=this.options;this.name2Index={};this.cardsHasCreated=[];this._initNameMap();this.showCardByIndex(b.defaultShowIndex)},_initNameMap:function(){var b=this.options.items;for(var d=0;d<b.length;d++){var c;if(b[d].el){c=b[d].el.widgetName}else{c=b[d].widgetName}if(!FR.isEmpty(c)){this.name2Index[c]=d}}},showPaneByIndex:function(b){this.showCardByIndex(b)},showCardByIndex:function(f){var b=this.options;var g=b.items;this.showIndex=f;
for(var e=0;e<this.cardsHasCreated.length;e++){var i=this.cardsHasCreated[e];var c=g[i];this._hideItem(c)}if(f>-1&&f<g.length){var j=this.cardsHasCreated.indexOf(f);if(j==-1){var k=g[f];if(!k.el){k.el=k}if(k&&k.el&&k.el.type){var d=FR.createWidget(a.extend(k.el,{resultWidgets:b.resultWidgets}));k.el=d.element}k.el.hide();this.element.append(k.el);this.cardsHasCreated.push(f);this.element.data("jlayout",jLayout.card(b));this._showItem(k)}else{c=g[f];this._showItem(c)}}this.doLayout()},_hideItem:function(c){var b=this.options;
if(a.isFunction(b.hideAction)){b.hideAction.apply(this,[c])}else{c.el.hide()}},_showItem:function(b){b.el.show()},getShowIndex:function(){return this.showIndex?this.showIndex:this.options.defaultShowIndex},showPaneByName:function(b){return this.showCardByName(b)},showCardByName:function(b){if(FR.isEmpty(b)){return}this.showCardByIndex(this.name2Index[b.toUpperCase()])},doResize:function(c){FR.CardLayout.superclass.doResize.call(this,c);var b=this.options;this.element.css({width:(c?(c.width||b.width):b.width),height:(c?(c.height||b.height):b.height),left:c?(c.left||b.left):b.left,top:c?(c.top||b.top):b.top});
this.doLayout()},doLayout:function(){FR.CardLayout.superclass.doLayout.apply(this,arguments)}});a.shortcut("card",FR.CardLayout)})(jQuery);
(function(){var a;var c;var b;$.extend(FR,{showConfirmDialog:function(d){FR.showUpdateDialog(d)},showUpdateDialog:function(d){var f=$.extend({title:" ",text4OK:FR.i18nText("FR-Basic_OK"),text4Cancel:FR.i18nText("FR-Basic_Cancel"),onOK:FR.emptyFn(),onCancel:FR.emptyFn(),destroyOnClose:true,width:400,height:300,modal:true,confirm:true,doSize:true,border:true,closable:true,contentUrl:null,contentHtml:null,contentWidget:null,contentText:null,tools:null,style:null},d);var e=new FR.Dialog(f);e.setVisible(true)
},showDialog:function(e){if(arguments.length>1){var h=arguments[3];if(typeof arguments[3]==="string"){h="<div>"+arguments[3]+"</div>"}var f=arguments[1]?Math.min($(window.document).width(),arguments[1]):400;var d=arguments[2]?Math.min($(window.document).height(),arguments[2]):300;var g={title:arguments[0]||""+(FR.PROJECTNAME==null?"":" "+FR.PROJECTNAME),width:f,height:d,contentHtml:h||""};e=$.extend(true,{modal:true,doSize:true,border:true,closable:true,destroyOnClose:$.browser.msie?true:false},arguments[4],g)
}if(!a||$.browser.msie){if(a){FR.destroyDialog()}a=new FR.Dialog(e)}else{a.setTitle(e.title||"");a.setContent({type:"contentHtml",content:e.contentHtml})}a.doResize({width:e.width,height:e.height});a.setVisible(true)},showIframeDialog:function(d){if(typeof d=="string"){d={url:d}}var e;if(d.url){d.url=d.url+((/\?/.test(d.url)?"&":"?")+"_="+$.now());e=$("<iframe width='100%' height='100%' scrolling='no' frameborder='0'>");e.attr("src",d.url)}else{if(d.iframe){e=$(d.iframe);if(d.widget){e.asComponent(d.widget)
}}else{e=$("<iframe width='100%' height='100%' scrolling='no' frameborder='0'>")}}return FR.showDialog(d.title,d.width||350,d.height||480,e)},showAsyncDialog:function(d){FR.showLoadingDialog(d);var e=d.callback;FR.ajax($.extend({type:"POST",complete:function(g,f){FR.hideLoadingDialog();if(typeof(e)=="function"){e(g,f)}}},d))},closeDialog:function(){if(a!=null){a.setVisible(false)}},showLoadingDialog:function(d){d=d||{};d.width=d.width||200;d.height=d.height||80;d.title=d.title||FR.i18nText("FR-Basic_Loading");
d.closable=d.closable||false;d.modal=true;d.animate=0;d.contentHtml="<div class='fr-core-panel-loading'>"+(d.text?d.text:FR.i18nText("FR-Basic_Loading"))+"</div>";if(c==null){c=new FR.Dialog(d)}else{c.setTitle(d.title);c.doResize({width:d.width,height:d.height});c.setContent({type:"contentHtml",content:d.contentHtml})}c.setVisible(true)},hideLoadingDialog:function(){if(c!=null){c.setVisible(false)}},destroyDialog:function(){if(a!=null){a.destroy();a=null}},showEmailDialog:function(e){e=e||{};e.width=e.width||400;
e.height=e.height||410;e.title=FR.i18nText("FR-Basic_Email");e.onFinish=e.onFinish||FR.emptyFn();var h=12,f="simsun",p="#4C4C4C",l=e.sessionID||"",i=20,j=8000,m=37,n=71;var g=[{text:FR.i18nText("FR-Export_PDF"),value:"PDF"},{text:FR.i18nText("FR-Export_Excel"),value:"Excel"},{text:FR.i18nText("FR-Export_Word"),value:"Word"},{text:FR.i18nText("FR-Export_SVG"),value:"SVG"}];var k=21;var d=FR.createWidget({type:"tablelayout",columnSize:[90,26,245],rowSize:[k,k,k,k,k,k,90,k],vgap:10,items:[[{el:{type:"label",color:p,value:FR.i18nText("FR-Basic-Email_From"),fontsize:h,verticalcenter:true,textalign:"right",fontfamily:f}},{el:$("<div>")},{el:{type:"border",items:[{region:"east",el:$("<div>"),width:n},{region:"center",el:{type:"text",widgetName:"FROM",disabled:true,watermark:"loading data..."}}]}}],[{el:{type:"label",color:p,value:FR.i18nText("HJS-Mail_to"),fontsize:h,verticalcenter:true,textalign:"right",fontfamily:f}},{el:$("<div>")},{el:{type:"border",items:[{region:"east",el:$("<div>"),width:n},{region:"center",el:{type:"combocheckbox",widgetName:"TO",directEdit:true,widgetUrl:FR.servletURL+"?op=fr_email&cmd=get_contacts_name&sessionID="+l,supportTag:true}}]}}],[{el:{type:"label",color:p,value:FR.i18nText("HJS-CC_to"),fontsize:h,verticalcenter:true,textalign:"right",fontfamily:f}},{el:$("<div>")},{el:{type:"border",items:[{region:"east",el:$("<div>"),width:n},{region:"center",el:{type:"combocheckbox",widgetName:"CC",directEdit:true,widgetUrl:FR.servletURL+"?op=fr_email&cmd=get_contacts_name&sessionID="+l,supportTag:true}}]}}],[{el:{type:"label",color:p,value:FR.i18nText("HJS-BCC_to"),fontsize:h,verticalcenter:true,textalign:"right",fontfamily:f}},{el:$("<div>")},{el:{type:"border",items:[{region:"east",el:$("<div>"),width:n},{region:"center",el:{type:"combocheckbox",widgetName:"BCC",directEdit:true,widgetUrl:FR.servletURL+"?op=fr_email&cmd=get_contacts_name&sessionID="+l,supportTag:true}}]}}],[{el:{type:"label",color:p,value:FR.i18nText("FR-Basic-Email_Format"),fontsize:h,textalign:"right",fontfamily:f}},{el:$("<div>")},{el:{type:"border",items:[{region:"east",el:$("<div>"),width:n},{region:"center",el:{type:"combo",widgetName:"FORMAT",model:"local",directEdit:true,items:g}}]}}],[{el:{type:"label",color:p,value:FR.i18nText("FR-Basic-Email_Subject"),fontsize:h,verticalcenter:true,textalign:"right",fontfamily:f}},{el:$("<div>")},{el:{type:"border",items:[{region:"east",el:$("<div>"),width:m},{region:"center",el:{type:"text",widgetName:"SUBJECT"}}]}}],[{el:{type:"border",items:[{region:"north",height:k,el:{type:"label",color:p,value:FR.i18nText("FR-Basic-Email_Message"),fontsize:h,textalign:"right",fontfamily:f}},{region:"center",el:$("<div>")}]}},{el:$("<div>")},{el:{type:"textarea",widgetName:"MESSAGE",fontsize:h}}],[{el:$("<div>")},{el:$("<div>")},{el:{type:"checkbox",widgetName:"ISSHOWTPL",text:FR.i18nText("Email-Can_Preview_Report_Content")}}]]});
FR.ajax({url:FR.servletURL,type:"POST",data:{op:"fr_dialog",cmd:"write_email_dialog",sessionID:l},complete:function(q,o){var r=d.getWidgetByName("FROM");r.removeWaterMark();if(o=="success"){r.setValue(q.responseText)}}});e.onOK=function(){FR.showLoadingDialog({title:FR.i18nText("FR-Basic_Email"),text:FR.i18nText("FR-Basic-Email_Sending")+"..."});FR.ajax({url:FR.servletURL,type:"POST",data:{op:"fr_email",cmd:"deal_email",sessionID:l,FROM:d.getWidgetByName("FROM").getValue(),TO:d.getWidgetByName("TO").getValue(),SUBJECT:d.getWidgetByName("SUBJECT").getValue(),CC:d.getWidgetByName("CC").getValue(),BCC:d.getWidgetByName("BCC").getValue(),MESSAGE:d.getWidgetByName("MESSAGE").getValue(),FORMAT:d.getWidgetByName("FORMAT").getValue(),ISSHOWTPL:d.getWidgetByName("ISSHOWTPL").getValue()},complete:function(q,o){e.onFinish.apply();
if(o=="success"){var r=FR.jsonDecode(q.responseText);var s;if(r.status=="success"){s=FR.i18nText("FR-Basic_Email_Send_Success")}else{s=FR.i18nText("FR-Basic_Email_Send_Failed")+"\n"+FR.i18nText("FR-Basic_Email_Send_Error")}FR.hideLoadingDialog();FR.Msg.alert(FR.i18nText("FR-Basic_Email"),s,j)}}})};e.contentWidget={type:"border",items:[{region:"north",el:$("<div>"),height:i},{region:"center",el:d.element}]};FR.showUpdateDialog(e)},showUploadDialog:function(f){f.title=FR.i18nText("FR-Basic_File_Upload");
if(b==null){b=new FR.Dialog(f)}b.options=$.extend({url:"",el:this,allowTypes:"",err:"",callback:FR.emptyFn,autoUpload:false,beforeAction:FR.emptyFn,afterAction:FR.emptyFn},f);b.doResize({width:b.options.autoUpload?360:440,height:300});var d=$('<input type="file" name="file" size="35" style="width:320px"/>').change(function(){FR.autoSubmit(b.options,b.$form)});var e=$('<input type="button" value="'+FR.i18nText("FR-Basic_OK")+'" style="width:80px;margin-top:10px;"/>').click(function(){FR.autoSubmit(b.options,b.$form)
});if(b.options.autoUpload){b.$form=$('<form enctype="multipart/form-data" style="padding:10px"></form>').append(d)}else{b.$form=$('<form enctype="multipart/form-data" style="padding:10px"><input name="file" type="file" size="35" style="width:320px"/></form>').append(e)}b.setContent({type:"contentHtml",content:b.$form});b.setVisible(true)},preloadImgs:function(e){for(var d=0;d<e.length;d++){jQuery("<img>").attr("src",e[d])}},autoSubmit:function(g,f){var d=$("input:file",f);if(!d.val()){FR.Msg.toast(FR.i18nText("Function-The_selected_file_cannot_be_null")+"!");
return}else{if(g.allowTypes){var e=d.val().substring(d.val().lastIndexOf(".")+1);if(g.allowTypes&&g.allowTypes.indexOf(e)==-1){FR.Msg.toast(g.err?g.err:(e+FR.i18nText("FR-Basic_File_Not_Allow_To_Upload")+","+FR.i18nText("FR-Basic_File_Allow_To_Upload_Contains")+g.allowTypes));return false}}else{if(g.filter){if(d.val().toLowerCase().indexOf("."+g.filter)==-1){FR.Msg.toast(FR.i18nText("FR-Basic_File_Should_Select_Excel_File"));return}}}}FR.showLoadingDialog({width:310,height:80});if($.isFunction(g.beforeAction)){g.beforeAction()
}FR.domFormSubmit(f,{url:g.url,timeout:3000000},function(i,h){FR.hideLoadingDialog();if(b){b.setVisible(false)}if($.isFunction(g.callback)){g.callback(i,h,g.el)}if($.isFunction(g.afterAction)){g.afterAction()}})},__fileSizeFormat__:function(f){if(!f){return""}var e=0;var d=["B","KB","MB","GB","TB"];var g=f+d[e];while(f>1024&&e<d.length-1){f=f/1024;e++}g=f.toFixed(2)+d[e];return g}})})();$.extend(FR,{sentMail:function(a){FR.showLoadingDialog({title:FR.i18nText("FR-Basic_Email"),text:FR.i18nText("FR-Basic-Email_Sending")+"..."});
FR.ajax({url:FR.servletURL,type:"POST",data:{op:"fr_email",cmd:"sent_email",sessionID:FR.SessionMgr.getSessionID(),mailXML:a.xmlconf,paraMap:a.paraMap||{}},complete:function(c,b){if(b=="success"){var d=FR.jsonDecode(c.responseText);var e;if(d.status=="success"){e=FR.i18nText("FR-Basic_Email_Send_Success")}else{e=FR.i18nText("FR-Basic_Email_Send_Failed")+"\n"+FR.i18nText("FR-Basic_Email_Send_Error")}FR.hideLoadingDialog();FR.Msg.alert(FR.i18nText("FR-Basic_Email"),e,8000)}}})},correctPNG:function(d){if(d instanceof $){d=d[0]
}var b=(d.id)?"id='"+d.id+"' ":"";var e=(d.className)?"class='"+d.className+"' ":"";var f=(d.title)?"title='"+d.title+"' ":"title='"+d.alt+"' ";var c="display:inline-block;"+d.style.cssText;if(d.align=="left"){c="float:left;"+c}if(d.align=="right"){c="float:right;"+c}if(d.parentElement.href){c="cursor:hand;"+c}var a="<span "+b+e+f+'style="width:'+d.width+"px; height:"+d.height+"px;"+c+";filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+d.src+"', sizingMethod='scale');\"></span>";d.outerHTML=a
},open:function(a){var b="";var d=/[a-zA-z]+:\/\/[^\s]*/;var c=/\/[^\s]*/;if(a.match(d)||a.match(c)){b=a}else{b="http://"+a}window.open(b)},fixBoxModelWidth:function(a){if($.support.boxModel){return a.outerWidth()-a.width()}else{return 0}},fixBoxModelHeight:function(a){if($.support.boxModel){return a.outerHeight()-a.height()}else{return 0}},encrypt:function(f,e){if(f==""){return""}f=escape(f);if(!e||e==""){var e="655"}e=escape(e);if(e==null||e.length<=0){alert("Please enter a password with which to encrypt the message.");
return null}var k="";for(var i=0;i<e.length;i++){k+=e.charCodeAt(i).toString()}var g=Math.floor(k.length/5);var b=parseInt(k.charAt(g)+k.charAt(g*2)+k.charAt(g*3)+k.charAt(g*4)+k.charAt(g*5));var a=Math.ceil(e.length/2);var h=Math.pow(2,31)-1;if(b<2){alert("Algorithm cannot find a suitable hash. Please choose a different password. \nPossible considerations are to choose a more complex or longer password.");return null}var c=Math.round(Math.random()*1000000000)%100000000;k+=c;while(k.length>10){k=(parseInt(k.substring(0,10))+parseInt(k.substring(10,k.length),10)).toString()
}k=(b*k+a)%h;var d="";var j="";for(var i=0;i<f.length;i++){d=parseInt(f.charCodeAt(i)^Math.floor((k/h)*255));if(d<16){j+="0"+d.toString(16)}else{j+=d.toString(16)}k=(b*k+a)%h}c=c.toString(16);while(c.length<8){c="0"+c}j+=c;return j},decrypt:function(g,f){if(g==""){return""}if(!f||f==""){var f="655"}f=escape(f);if(g==null||g.length<8){return}if(f==null||f.length<=0){return}var l="";for(var j=0;j<f.length;j++){l+=f.charCodeAt(j).toString()}var h=Math.floor(l.length/5);var a=l.charAt(h)+l.charAt(h*2)+l.charAt(h*3)+l.charAt(h*4);
if(h*5<l.length){a+=l.charAt(h*5)}var c=parseInt(a);var b=Math.round(f.length/2);var i=Math.pow(2,31)-1;var d=parseInt(g.substring(g.length-8,g.length),16);g=g.substring(0,g.length-8);l+=d;while(l.length>10){l=(parseInt(l.substring(0,10),10)+parseInt(l.substring(10,l.length),10)).toString()}l=(c*l+b)%i;var e="";var k="";for(var j=0;j<g.length;j+=2){e=parseInt(parseInt(g.substring(j,j+2),16)^Math.floor((l/i)*255));k+=String.fromCharCode(e);l=(c*l+b)%i}return unescape(k)},clone:function(a){if($.isPlainObject(a)){return $.extend(true,{},a)
}return a}});$.extend(FR,{Keys:function(){var a=[];var b=true;$(document).keydown(function(d){if(b){if(a.length>0){var c=a[0];if($.isFunction(c)){c.call(window,d)}else{if($.isFunction(c.fn)){c.fn.call(c.scope||window,d)}}}}});return{reg:function(c){a.remove(c);a.unshift(c)},unreg:function(c){a.remove(c)},enable:function(c){if(typeof c=="boolean"){b=c}else{return b}}}}()});$.extend(FR,{HtmlLoader:function(){return{load:function(o){var cfg=$.extend({type:"GET",timeout:30000},o||{});cfg.callback=cfg.callback||FR.emptyFn;
var self=o.el;var animation=cfg.animation||this.loadingEffect;FR.ajax({url:cfg.url,type:cfg.type,async:cfg.params.async===false?false:true,dataType:"html",data:$.extend({_:new Date().getTime(),__boxModel__:$.support.boxModel},cfg.params),timeout:cfg.timeout,beforeSend:function(){animation.call(self,$.extend(o,{show:true}))},complete:function(res,status){var html=res.responseText;if(html==""||html.indexOf(FR.i18nText("FR-Server-All_Error")+FR.i18nText("FR-Engine_Page"))!=-1){window.needLoadMore=false
}var scripts=[];if(cfg.scripts===true){var hd=document.getElementsByTagName("head")[0];var re=/(?:<script([^>]*)?>)((?:\n|\r|.)*?)(?:<\/script>)/ig;var srcRe=/\ssrc=([\'\"])(.*?)\1/i;var typeRe=/\stype=([\'\"])(.*?)\1/i;var match;while(match=re.exec(html)){var attrs=match[1];var srcMatch=attrs?attrs.match(srcRe):false;if(srcMatch&&srcMatch[2]){var s=document.createElement("script");s.src=srcMatch[2];var typeMatch=attrs.match(typeRe);if(typeMatch&&typeMatch[2]){s.type=typeMatch[2]}hd.appendChild(s)
}else{if(match[2]&&match[2].length>0){scripts.push(match[2])}}}html=html.replace(/(?:<script([^>]*)?>)((?:\n|\r|.)*?)(?:<\/script>)/ig,"")}animation.call(self,$.extend(o,{show:false}));if(o.notReplaceBody){var iframeStart=html.indexOf("iframe");var start=html.indexOf("<body");if(start>-1&&iframeStart==-1){html=html.substr(start);start=html.indexOf(">");var end=html.indexOf("</body>");if(start>-1){html=html.substr(start+1,end-start-1)}}}if($.isFunction(cfg.loadHtml)){cfg.loadHtml.apply(self,[html])
}else{self.html(html)}$.each(scripts,function(i,n){if(window.execScript){window.execScript(n)}else{window.eval(n)}});self.each(cfg.callback,[res.responseText,status,res]);if(FR.Browser.isIE6()){setTimeout(function(){if(!$("div.pageContentDIV")[0]){return}var tr=$(".pageContentDIV tr").last();if(tr[0]&&!tr.height()&&!tr.is(":visible")){tr.show()}var tds=$(".pageContentDIV td");for(var i=0,len=tds.length;i<len;i++){var td=$(tds[i]);if(td.attr("rowspan")===1){td.attr("rowspan",1);break}}},25)}}});return this
},loadingMoreData:function(config){this.loading(config)},loading:function(conf){var config=$.extend({show:false,forceDisplay:false,cssConfig:null,loadingMoreData:false},conf||{});var el=config.el;var $indicator=el.data("indicator");if(!$indicator){$indicator=$("<div class='loading-indicator'>"+FR.i18nText("FR-Basic_Loading")+"</div>");var o=config.loadingMoreData?{position:"relative",width:"56px"}:{position:"absolute",left:0,top:0};if(config.cssConfig){$.extend(o,config.cssConfig)}$indicator.css(o);
el.data("indicator",$indicator)}if(!config.show){$indicator.detach()}else{if(config.show&&!$indicator.is(":visible")){$indicator.css("top",el.scrollTop());el.append($indicator)}}},loadingEffect:function(cfg){var el=cfg.el;var config=$.extend({show:false,overflow:false},cfg||{});var $indicator=el.data("indicator");if(!$indicator){$indicator=$("<div class='load-indicator'></div>");$("<div class='loading-ec-indicator'></div>").appendTo($indicator);$("<div class ='text-indicator' style='font-size:11pt'>"+FR.i18nText("FR-Basic_Loading")+"</div>").appendTo($indicator);
var o={position:"fixed",margin:"auto",left:"0px",right:"0px",top:"0px",bottom:"0px",height:"64px",width:"64px"};$indicator.css(o);el.data("indicator",$indicator)}if(!config.show){$indicator.detach();el.css("overflow","auto");el.css("overflow",config.overflow||"auto")}else{if(config.show&&!$indicator.is(":visible")){el.append($indicator);el.css("overflow","hidden")}}}}}()});
(function($){$.extend($,{clearwatermarks:function(){$("[wmwrap='true']").find("input,textarea").watermark({remove:true})},addwatermarks:function(){$("[watermark]").each(function(num,el){$(el).watermark($(el).attr("watermark"))})},watermark:function(o){var defaultOffsetLeft=3;o.el=$(o.el);if(o.remove){if($.browser.msie){if(o.el.parent().attr("wmwrap")=="true"){o.el.parent().replaceWith(o.el)}}else{o.el.removeAttr("placeholder")}}else{if(o.clear){if($.browser.msie){if($("label.fr-watermark-label",o.el.parent())){$("label.fr-watermark-label",o.el.parent()).hide()
}}else{o.el.attr("placeholder","")}}else{if($.browser.msie){if(o.el.parent().attr("wmwrap")!="true"){o.el=o.el.wrap("<span wmwrap='true'/>");var l=$("<label/>").addClass("fr-watermark-label");if(o.html){l.html(o.html)}if(o.cls){l.addClass(o.cls)}if(o.css){l.css(o.css)}l.css({position:"absolute",left:defaultOffsetLeft+"px",top:"",display:"inline",cursor:"text",width:o.el.width(),height:o.el.height(),overflow:"hidden","font-size":"9pt","white-space":"nowrap"});if(o.isEditable){l.css("left",o.offsetLeft||defaultOffsetLeft)
}l.css("line-height",(o.el.height()+($.support.boxModel?4:0))+"px");if(!o.cls&&!o.css){l.css("color",l.getwatermarkcolor())}var focus=function(){l.hide()};var blur=function(){if(!o.el.val()){l.show()}else{l.hide()}};var click=function(){o.el.focus()};if(o.inherit){if(typeof o.inherit=="string"){l.css(o.inherit,o.el.css(o.inherit))}else{for(var x=0;x<o.inherit.length;x++){l.css(o.inherit[x],o.el.css(o.inherit[x]))}}}if(!o.el.attr("disabled")){o.el.focus(focus).blur(blur);o.el[0].onpropertychange=function(){if(!o.el.val()){l.show()
}else{l.hide()}};l.click(click)}o.el.before(l);if(o.el.val()){l.hide()}}}else{o.el.attr("placeholder",o.html);o.el.focus(function(){o.el.removeAttr("placeholder")}).blur(function(){o.el.attr("placeholder",o.html)})}}}return o.el}});$.fn.watermark=function(o,isEditable){var offestLeft=this.offset().left;return this.each(function(){if(typeof(o)=="string"){try{o=eval("("+o+")")}catch(ex){o={html:o}}if(typeof(o)=="number"){o={html:o}}}o.el=this;o.offsetLeft=offestLeft;o.isEditable=isEditable;return $.watermark(o)
})};$.fn.watermarkValueChange=function(){};$.fn.getwatermarkcolor=function(){return"rgb(204, 204, 204)"}})(jQuery);$().ready(function(){$.addwatermarks()});
(function($){var otherButton=[];var d=$("<div style='position:absolute;top:-1000px;width:100px;height:100px;padding:5px'></div>").appendTo("body");$._boxModel=parseInt(d.width())===100;d.remove();$.fn._outerWidth=function(el){if(el==undefined){if(this[0]==window){return this.width()||document.body.clientWidth}return this.outerWidth()||0}return this.each(function(){if($._boxModel){$(this).width(el-($(this).outerWidth()-$(this).width()))}else{$(this).width(el)}})};$.fn._outerHeight=function(el){if(el==undefined){if(this[0]==window){return this.height()||document.body.clientHeight
}return this.outerHeight()||0}return this.each(function(){if($._boxModel){$(this).height(el-($(this).outerHeight()-$(this).height()))}else{$(this).height(el)}})};FR.Panel=FR.extend(FR.Widget,{_defaultConfig:function(){return $.extend(FR.Panel.superclass._defaultConfig.apply(this,arguments),{baseCls:"fr-core-panel",titleHeight:25,headerBackground:null,borderRadius:false,fit:false,doSize:true,border:false,borderWidth:1,closable:false,maximizable:false,minimizable:false,collapsible:false,autoScroll:true,closed:false,animate:true,width:300,height:200,tools:null,style:null,onBeforeClose:null,onClose:null})
},_init:function(){var o=this.options;this.headerHeight=(!FR.isEmpty(o.title))?o.titleHeight:(o.miniExpand?8:0);if(typeof o.height=="number"){o.height+=(!FR.isEmpty(o.title))?o.titleHeight:0}FR.Panel.superclass._init.apply(this,arguments);var self=this;var defaultStyle="blue";$.each(["gray","green","blue"],function(i,item){if(o.style&&item==o.style.toLowerCase()){defaultStyle=o.style.toLowerCase()}});o.style=defaultStyle;this.element.addClass(o.baseCls);this._addContent();if((typeof o.height=="number"&&o.height>this.headerHeight)||typeof o.height!="number"){this._addHeader()
}this._addBorder();if(o.doSize===true){this.doResize({width:o.width,height:o.height})}if(o.closed===true){this.element.hide()}if(o.css){this.element.css(o.css)}this.on("_resize",function(){if(self.options._resize){self.options._resize()}})},_addContent:function(){var opts=this.options;var top=FR.isEmpty(opts.title)?0:opts.titleHeight;this.panelBody=$('<div class="fr-core-panel-body"></div>').css({position:"absolute",top:top,left:0}).appendTo(this.element);this.$contentPane=this._createContentPane();
this._loadContent(false)},_createContentPane:function(){if(this.options.autoScroll===false){this.panelBody.css({overflow:"hidden"})}return this.panelBody},_addBorder:function(){var o=this.options;if(o.border===true){if(this.$header){this.$header.removeClass("fr-core-panel-header-noborder")}this.borderFix4width=o.borderWidth*2;this.borderFix4height=o.borderWidth*2;this.panelBody.addClass("fr-core-panel-body-border").removeClass("fr-core-panel-body-noborder").css({borderWidth:o.borderWidth});if(!FR.isEmpty(o.title)){this.borderFix4height=o.borderWidth;
this.panelBody.css({borderTop:"none"})}}else{if(this.$header){this.$header.addClass("fr-core-panel-header-noborder")}this.panelBody.removeClass("fr-core-panel-body-border").addClass("fr-core-panel-body-noborder")}},_loadContent:function(forced){var opts=this.options;var ct=this.$contentPane;if(opts.contentUrl&&(!opts.isLoaded||forced===true)){opts.isLoaded=false;ct.html($('<div class="fr-core-panel-loading"></div>').html("loading..."));FR.ajax({url:opts.contentUrl,type:"POST",complete:function(res,status){var ht=res.responseText;
if($.isFunction(opts.callback)){opts.callback(ct,ht)}else{ct.html(ht)}opts.isLoaded=true}})}else{if(opts.contentWidget){if(opts.contentWidget.type){opts.contentWidget.style=opts.style;opts.contentWidget=FR.createWidget(opts.contentWidget)}$.extend(opts.resultWidgets,opts.contentWidget.options.resultWidgets);ct.append(opts.contentWidget.element)}else{if(opts.contentHtml){ct.html(opts.contentHtml);if(typeof opts.contentHtml==="object"){var newEl=$(opts.contentHtml)[0];if(newEl.tagName=="IFRAME"){var topHeight=FR.isEmpty(opts.title)?0:opts.titleHeight;
var loadTop=topHeight-opts.height;var $loading=$('<div class="fr-core-panel-loading" style="position: relative"></div>').css({width:opts.width,height:30,top:loadTop}).html(FR.i18nText("FR-Basic_Loading")+"...");if(!opts.noLoading){ct.append($loading)}if(newEl.attachEvent){newEl.attachEvent("onload",function(){$loading.remove()})}else{newEl.onload=function(){$loading.remove()}}}}}else{if(opts.contentText){ct.text(opts.contentText)}}}}},_addHeader:function(){var self=this;var opts=this.options;if(!FR.isEmpty(opts.title)){this.$header=$('<div class="fr-core-panel-header"></div>').addClass("fr-core-panel-style-"+opts.style).css({position:"absolute",top:0,left:0}).appendTo(this.element);
if(!opts.borderRadius){this.$header.css({borderRadius:0})}if(opts.headerBackground){this.$header.css({background:opts.headerBackground})}var fix=$.support.boxModel?2:0;this.$innerHeader=$('<div class="fr-core-panel-header-inner"></div>').css({position:"absolute",top:0,left:0}).appendTo(this.$header);this.$titleText=$("<div></div>").text(opts.title).addClass("fr-core-panel-title").appendTo(this.$innerHeader);this.rightDistance=7;if(opts.closable){$('<div class="fr-core-panel-tool-close"></div>').css({position:"absolute",top:0,right:this.rightDistance,width:25,height:opts.titleHeight-fix}).mouseout(function(){$(this).removeClass("fr-core-panel-tool-close-hover").removeClass("fr-core-panel-tool-close-down").removeClass("fr-core-panel-tool-over").addClass("fr-core-panel-tool-close")
}).mousedown(function(e){$(this).removeClass("fr-core-panel-tool-close-hover").addClass("fr-core-panel-tool-close-down")}).mouseover(function(){$(this).removeClass("fr-core-panel-tool-close").addClass("fr-core-panel-tool-over").addClass("fr-core-panel-tool-close-hover")}).bind("click",function(){self.doClose()}).appendTo(this.$innerHeader);this.rightDistance+=24}if(opts.tools){for(var i=opts.tools.length-1;i>=0;i--){var item=opts.tools[i];var itemWidth=item.width||24,itemHeight=item.height||opts.titleHeight-fix;
var t=$("<div></div>").css({position:"absolute",top:0,width:itemWidth,height:itemHeight,lineHeight:itemHeight+"px"}).addClass(item.iconCls).hover(function(){$(this).addClass("fr-core-panel-tool-over");$(this).addClass(item.iconCls+"-over")},function(){$(this).removeClass("fr-core-panel-tool-over");$(this).removeClass(item.iconCls+"-over")}).mousedown(function(){$(this).addClass(item.iconCls+"-click")}).mouseleave(function(){$(this).removeClass(item.iconCls+"-over");$(this).removeClass(item.iconCls+"-click")
}).mouseup(function(){$(this).removeClass(item.iconCls+"-click")}).appendTo(this.$innerHeader);item.el=t;item.width=itemWidth;if(item.invisible){t.hide()}if(item.handler){if($.isFunction(item.handler)){t.bind("click",item.handler.createDelegate(t))}else{if(typeof(item.handler)==="object"){if($.isFunction(item.handler.mousedown)){t.mousedown(item.handler.mousedown.createDelegate(t))}if($.isFunction(item.handler.mouseleave)){t.mouseleave(item.handler.mouseleave.createDelegate(t))}if($.isFunction(item.handler.mouseup)){t.mouseup(item.handler.mouseup.createDelegate(t))
}}else{t.bind("click",eval(item.handler))}}}if($.isArray(item.hover)&&item.hover.length>1){t.hover(item.hover[0].createDelegate(t),item.hover[1].createDelegate(t))}if(item.text){t.text(item.text)}if(item.styleText){FR.applyStyles(t,item.styleText)}}this._modifyToolsPosition()}this.panelBody.removeClass("fr-core-panel-body-noheader")}else{if(opts.miniExpand){var header=$("<div class='parameter-container-collapse'></div>").appendTo(self.element);header.css({position:"absolute",top:opts.height-8,left:0,width:"100%",height:"8px",background:"none repeat scroll 0 0 #EEEEEE"});
var collapseImagWrapper=$("<div/>").css({width:"112px",height:"8px","margin-left":"auto","margin-right":"auto",position:"relative"}).appendTo(header);var collapseImag=$("<div class='parameter-container-collapseimg-up'/>").appendTo(collapseImagWrapper).click(eval(opts.miniExpand.handler))}else{this.panelBody.addClass("fr-core-panel-body-noheader")}}},setTitle:function(title){if(this.$innerHeader){this.$innerHeader.find(">div.fr-core-panel-title").html(title)}},setToolVisible:function(index,visible){var opts=this.options;
var ct=opts.tools[index];if(ct&&ct.el&&ct.el.isVisible()!=visible){visible?ct.el.show():ct.el.hide();this._modifyToolsPosition()}},_modifyToolsPosition:function(){var rd=this.rightDistance,opts=this.options;for(var i=opts.tools.length-1;i>=0;i--){var item=opts.tools[i];if(item.el&&item.el.isVisible()){item.el.css({right:rd});rd+=item.width}}},doOpen:function(){this.element.show();this.options.closed=false;if($.isFunction(this.options.onOpen)){this.options.onOpen.call(this)}},doClose:function(){var self=this;
this.element.hide(self.options.animate?"fast":0,function(){if($.isFunction(self.options.onBeforeClose)){self.options.onBeforeClose.call(self)}self.options.closed=true;if($.isFunction(self.options.onClose)){self.options.onClose.call(self)}})},doMove:function(give){var opts=this.options;if(give){if(give.left!=null){opts.left=give.left}if(give.top!=null){opts.top=give.top}}this.element.css({left:opts.left,top:opts.top});if($.isFunction(opts.onMove)){opts.onMove.apply(this,[opts.left,opts.top])}},enable:function(){if(this.mask){this.mask.hide()
}},disable:function(){if(!this.mask){this.mask=$("<div/>").addClass("fr-core-window-mask").appendTo(this.element);this.mask.css({zIndex:FR.widget.opts.zIndex++,width:this.element.width()?this.element.width():this.options.width,height:this.element.height()?this.element.height():this.options.height,background:"gray"})}this.mask.show()},doResize:function(give){var opts=this.options;var self=this;if(give){if(give.width){opts.width=give.width}if(give.height){opts.height=give.height}if(give.left!=null){opts.left=give.left
}if(give.top!=null){opts.top=give.top}}if(opts.fit===true){var p=this.element.parent();opts.width=p.width();opts.height=p.height()}this.element.css({left:opts.left,top:opts.top});if(opts.cls){this.element.addClass(opts.cls)}if(this.$header&&opts.headerCls){this.$header.addClass(opts.headerCls)}if(opts.bodyCls){this.panelBody.addClass(opts.bodyCls)}if(!isNaN(opts.width)){if($.support.boxModel===true){var panelWidth=opts.width-(this.element.outerWidth()-this.element.width());this.element.width(panelWidth);
if(!FR.isEmpty(opts.title)&&this.$header){this.$header.width(panelWidth-(this.$header.outerWidth()-this.$header.width()));this.$innerHeader.width(panelWidth-(this.$header.outerWidth()-this.$header.width()))}this.panelBody.width(panelWidth-(this.panelBody.outerWidth()-this.panelBody.width()))}else{this.element.width(opts.width);if(!FR.isEmpty(opts.title)&&this.$header){this.$header.width(opts.width);this.$innerHeader.width(opts.width)}this.panelBody.width(opts.width-this.borderFix4width)}}else{this.element.width("auto");
this.panelBody.width("auto")}if(!isNaN(opts.height)){if($.support.boxModel===true){var panelHeight=opts.height-(this.element.outerHeight()-this.element.height());this.element.height(panelHeight);if(!FR.isEmpty(opts.title)&&this.$header){this.$header.height(this.headerHeight-(this.$header.outerHeight()-this.$header.height()));this.$innerHeader.height(this.headerHeight-(this.$header.outerHeight()-this.$header.height()));this.$titleText.css({lineHeight:this.headerHeight-(this.$header.outerHeight()-this.$header.height())+"px"})
}this.panelBody.height(panelHeight-this.headerHeight-(this.panelBody.outerHeight()-this.panelBody.height()))}else{this.element.height(opts.height);if(!FR.isEmpty(opts.title)&&this.$header){this.$header.height(this.headerHeight);this.$innerHeader.height(this.headerHeight);this.$titleText.css({lineHeight:this.headerHeight+"px"})}this.panelBody.height(opts.height-this.headerHeight-this.borderFix4height)}}else{this.element.height("auto");this.$contentPane.height("auto")}if($.isFunction(opts.onResize)){opts.onResize.apply(this,[opts.width,opts.height])
}this._resizeContentWidget();this.fireEvent(FR.Events.RESIZE);this.element.doLayout()},_resizeContentWidget:function(){var opts=this.options;var pbodystylestring=this.$contentPane.attr("style");var pbodyheight=parseInt(pbodystylestring.replace(/.*height\:\s*(\d+).*/gi,"$1"));var pbodywidth=parseInt(pbodystylestring.replace(/.* width\:\s*(\d+).*/gi,"$1"));if(opts.contentWidget){opts.contentWidget.doResize({width:this.$contentPane.width(),height:pbodyheight})}else{if(opts.contentHtml&&FR.Browser.isIE6()){$(opts.contentHtml).css({width:pbodywidth,height:pbodyheight})
}}}});$.shortcut("panel",FR.Panel);FR.ConfirmPane=FR.extend(FR.Panel,{_defaultConfig:function(){return $.extend(FR.ConfirmPane.superclass._defaultConfig.apply(this,arguments),{text4OK:FR.i18nText("FR-Basic_OK"),text4Cancel:FR.i18nText("FR-Basic_Cancel"),width4OK:80,width4Cancel:80,height4OK:28,height4Cancel:28,controlPaneHeight:40,btnsGap:20,firstBtnMargin:20,needSeparate:false,btnsAlignment:"right",closeAfterAction:true,onOK:null,onCancel:null})},_init:function(){FR.ConfirmPane.superclass._init.apply(this,arguments)
},_createContentPane:function(){var opts=this.options;var $contentPane=$('<div class="fr-core-panel-content">').css({position:"absolute",top:0,left:0}).appendTo(this.panelBody);var self=this;this.okdiv=$('<div style="position:absolute"/>').appendTo(this.panelBody);this.canceldiv=$('<div style="position:absolute"/>').appendTo(this.panelBody);if(!FR.isEmpty(opts.text4OK)){self.okButton=new FR.createWidget({type:"quickbutton",text:opts.text4OK,width:opts.width4OK,height:opts.height4OK,style:opts.style,handler:function(){if($.isFunction(self.options.onOK)){var result=self.options.onOK.apply(self);
if(result===false){return}}if(self.options.closeAfterAction){self.doClose()}}});this.okButton.element.appendTo(this.okdiv);this.okdiv.css({width:opts.width4OK,height:opts.height4OK})}if(!FR.isEmpty(opts.text4Cancel)){self.cancelButton=new FR.createWidget({type:"quickbutton",text:opts.text4Cancel,width:opts.width4Cancel,height:opts.height4Cancel,handler:function(){if($.isFunction(self.options.onCancel)){self.options.onCancel.apply(self)}if(self.options.closeAfterAction){self.doClose()}}});this.cancelButton.element.appendTo(this.canceldiv);
this.canceldiv.css({width:opts.width4Cancel,height:opts.height4Cancel})}if(opts.needSeparate){$contentPane.addClass("fr-core-panel-content-separate");this.okdiv&&this.okdiv.css("margin-top",opts.needSeparate+"px");this.canceldiv&&this.canceldiv.css("margin-top",opts.needSeparate+"px")}return $contentPane},doResize:function(give){FR.ConfirmPane.superclass.doResize.apply(this,arguments);var opts=this.options;var alignment=opts.btnsAlignment;var oktop=0,canceltop=0,okalign=0,cancelalign=0;var height=opts.height;
if(opts.needSeparate){height=height-opts.needSeparate}if(!isNaN(height)){if($.support.boxModel===true){this.$contentPane.css({height:height-this.headerHeight-opts.controlPaneHeight-(this.$contentPane.outerHeight()-this.$contentPane.height()),width:opts.width-(this.panelBody.outerWidth()-this.panelBody.width())})}else{this.$contentPane.css({height:height-this.headerHeight-opts.controlPaneHeight,width:opts.width})}}oktop=height-this.headerHeight-opts.controlPaneHeight;canceltop=height-this.headerHeight-opts.controlPaneHeight;
if(alignment=="right"){okalign=opts.width4Cancel+opts.firstBtnMargin+opts.btnsGap;cancelalign=opts.firstBtnMargin}else{if(alignment=="left"){okalign=opts.firstBtnMargin;cancelalign=opts.width4OK+opts.firstBtnMargin+opts.btnsGap}else{var allWidth=opts.width4OK+opts.width4Cancel+opts.btnsGap;var Left=(opts.width-allWidth)/2;okalign=Left;cancelalign=Left+opts.width4OK+opts.btnsGap;alignment="left"}}if(this.okButton){this.okdiv.css("top",oktop);this.okdiv.css(alignment,okalign)}if(this.cancelButton){this.canceldiv.css("top",canceltop);
this.canceldiv.css(alignment,cancelalign)}this._resizeContentWidget()}});$.shortcut("confirm",FR.ConfirmPane);FR.ButtonPane=FR.extend(FR.Panel,{_defaultConfig:function(){return $.extend(FR.ButtonPane.superclass._defaultConfig.apply(this,arguments),{text4Cancel:FR.i18nText("FR-Basic_Cancel"),width4Cancel:80,button4Other:[],controlPaneHeight:40,btnsAlignment:"right",closeAfterAction:true})},_init:function(){FR.ButtonPane.superclass._init.apply(this,arguments)},_createContentPane:function(){var opts=this.options;
var $contentPane=$('<div class="fr-core-panel-content">').css({position:"absolute",top:0,left:0}).appendTo(this.panelBody);var other=opts.button4Other;this.otherButton=[];this.otherButtonWrap=[];for(var i=0;i<other.length;i++){this.otherButtonWrap[i]=$('<div style="position:absolute"/>').appendTo(this.panelBody);this.otherButton[i]=new FR.createWidget({type:"quickbutton",text:other[i].bT,width:other[i].bW?other[i].bW:80,baseCls:other[i].baseCls?other[i].baseCls:"",invisible:other[i].invisible,style:opts.style,handler:function(){var onAct=this.element.data("func");
if($.isFunction(onAct)){onAct.apply(self)}var aftAct=this.element.data("aftfunc");if(aftAct){self.doClose()}}});this.otherButton[i].element.appendTo(this.otherButtonWrap[i]);this.otherButtonWrap[i].css({width:other[i].bW,height:opts.height4Cancel});this.otherButton[i].element.data("func",other[i].bF?other[i].bF:FR.emptyFn());this.otherButton[i].element.data("aftfunc",other[i].bC?other[i].bC:false)}var self=this;this.canceldiv=$('<div style="position:absolute"/>').appendTo(this.panelBody);this.cancelButton=new FR.createWidget({type:"quickbutton",text:opts.text4Cancel,width:opts.width4Cancel,height:opts.height4Cancel,handler:function(){if($.isFunction(self.options.onCancel)){self.options.onCancel.apply(self)
}if(self.options.closeAfterAction){self.doClose()}}});this.cancelButton.element.appendTo(this.canceldiv);this.canceldiv.css({width:opts.width4Cancel,height:opts.height4Cancel});if(opts.needSeparate){$contentPane.addClass("fr-core-panel-content-separate");this.canceldiv&&this.canceldiv.css("margin-top",opts.needSeparate+"px");for(var i=0;i<this.otherButtonWrap.length;i++){this.otherButtonWrap[i]&&this.otherButtonWrap[i].css("margin-top",opts.needSeparate+"px")}}return $contentPane},doResize:function(give){FR.ButtonPane.superclass.doResize.apply(this,arguments);
var opts=this.options;var other=opts.button4Other;var alignment=opts.btnsAlignment;var canceltop=0,cancelalign=0;var height=opts.height;if(opts.needSeparate){height=height-opts.needSeparate}if(!isNaN(height)){if($.support.boxModel===true){this.$contentPane.css({height:height-this.headerHeight-opts.controlPaneHeight-(this.$contentPane.outerHeight()-this.$contentPane.height()),width:opts.width-(this.panelBody.outerWidth()-this.panelBody.width())})}else{this.$contentPane.css({height:height-this.headerHeight-opts.controlPaneHeight,width:opts.width})
}}canceltop=height-this.headerHeight-opts.controlPaneHeight;var alignment=opts.btnsAlignment;if(alignment=="right"){var right=opts.width4Cancel+40;this.canceldiv.css(alignment,20);this.canceldiv.css("top",canceltop);for(var i=0;i<other.length;i++){this.otherButtonWrap[i].css(alignment,right);this.otherButtonWrap[i].css("top",canceltop);right=right+other[i].bW+20}}else{if(alignment=="left"){var left=opts.width4Cancel+40;this.canceldiv.css(alignment,20);this.canceldiv.css("top",canceltop);for(var i=0;
i<other.length;i++){this.otherButtonWrap[i].css(alignment,left);this.otherButtonWrap[i].css("top",canceltop);left=left+other[i].bW+20}}else{var allWidth=0;for(var i=0;i<other.length;i++){allWidth=allWidth+other[i].bW+20}allWidth=allWidth+opts.width4Cancel;var otherLeft=(opts.width-allWidth)/2;for(var i=0;i<other.length;i++){this.otherButtonWrap[i].css("left",otherLeft);this.otherButtonWrap[i].css("top",canceltop);otherLeft=otherLeft+other[i].bW+20}this.cancelButton.element.css("left",otherLeft)}}this._resizeContentWidget()
}});$.shortcut("otherbutton",FR.ButtonPane);FR.Window=FR.extend(FR.Widget,{_defaultConfig:function(){return $.extend(FR.Window.superclass._defaultConfig.apply(),{baseCls:"fr-core-window",title:"Window",titleHeight:30,modal:true,confirm:false,otherButton:false,closable:true,collapsible:false,closed:true,destroyOnClose:false,width:300,height:200,resizeable:true,draggable:true})},_init:function(){FR.Window.superclass._init.apply(this,arguments);var o=this.options;var win=this.win;if(!$.support.boxModel){win.doResize({width:o.width,height:o.height})
}var self=this;if(this.mask){this.mask.remove()}if(o.modal===true){this.mask=$('<div class="fr-core-window-mask"></div>').appendTo("body");this.mask.css({zIndex:FR.widget.opts.zIndex++,width:this._getPageArea().width,height:this._getPageArea().height,display:"none"});$(window).resize(function(){self.mask.css({width:self._getPageArea().width,height:self._getPageArea().height})})}this.element.css({zIndex:FR.widget.opts.zIndex++});if(win.options.left==null){var width=win.options.width;if(isNaN(width)){width=this.element.outerWidth()
}var l=$(window).width();if(FR.Browser.isIE8Before()){l=$(window.document).width()}win.options.left=(l-width)/2+$(document).scrollLeft()}if(win.options.top==null){var height=win.options.height;if(isNaN(height)){height=this.element.outerHeight()}var h=$(window).height();if(FR.Browser.isIE8Before()){h=$(window.document).height()}win.options.top=(h-height)/2+$(document).scrollTop()}win.doMove();this.setVisible(!o.closed);if(this.options.draggable){this.element.draggable({handle:">div.fr-core-panel-header",onStartDrag:function(e){if(self.mask){self.mask.css("z-index",FR.widget.opts.zIndex.zIndex++)
}if(self.shadow){self.shadow.css("z-index",FR.widget.opts.zIndex.zIndex++)}self.element.css("z-index",FR.widget.opts.zIndex.zIndex++);var $contentDiv=$(self.element.children()[0]);$contentDiv.css("z-index",0);var top=$contentDiv.css("top");var height=$contentDiv.css("height");var width=$contentDiv.css("width");var $transparentDiv=$('<div id="transparent-background" style="position:absolute;filter:alpha(opacity=50);opacity:0.5;"></div>');$transparentDiv.css("left","0px").css("top",top).css("width",width).css("height",height);
$transparentDiv.css("z-index",1);self.element.append($transparentDiv);if(!self.proxy){self.proxy=$('<div class="fr-core-window-proxy"></div>').insertAfter(self.element)}self.proxy.css({display:"none",zIndex:FR.widget.opts.zIndex.zIndex++,left:e.data.left,top:e.data.top});self.proxy._outerWidth(self.element._outerWidth());self.proxy._outerHeight(self.element._outerHeight());setTimeout(function(){if(self.proxy){self.proxy.show()}},500)},onDrag:function(e){var pluginLimit=FR.Window.PluginDialogLimit;
if(pluginLimit){e.data.top=pluginLimit.onDrag.pluginTopFn(e.data.top,self.element._outerHeight(),self._getPageArea().height);e.data.left=pluginLimit.onDrag.pluginLeftFn(e.data.left,self.element._outerWidth(),self._getPageArea().width)}self.proxy.css({display:"block",left:e.data.left,top:e.data.top});return false},onStopDrag:function(e){$("#transparent-background").remove();self.proxy.remove();self.proxy=null}})}if(this.options.resizeable){this.element.resizable({onStartResize:function(e){if(!self.pmask){self.pmask=$('<div class="fr-core-window-proxy-mask"></div>').insertAfter(self.element)
}self.pmask.css({zIndex:FR.widget.opts.zIndex++,left:e.data.left,top:e.data.top,width:self.element._outerWidth(),height:self.element._outerHeight()});if(!self.proxy){self.proxy=$('<div class="fr-core-window-proxy"></div>').insertAfter(self.element)}self.proxy.css({zIndex:FR.widget.opts.zIndex++,left:e.data.left,top:e.data.top});self.proxy._outerWidth(e.data.width);self.proxy._outerHeight(e.data.height)},onResize:function(e){if(!self.proxy){return}self.proxy.css({left:e.data.left,top:e.data.top});
self.proxy._outerWidth(e.data.width);self.proxy._outerHeight(e.data.height);return false},onStopResize:function(e){var pluginLimit=FR.Window.PluginDialogLimit;if(pluginLimit){e.data.height=pluginLimit.onResize.pluginHeightFn(e.data.top,self.element._outerHeight(),self._getPageArea().height);e.data.width=pluginLimit.onResize.pluginWidthFn(e.data.left,self.element._outerWidth(),self._getPageArea().width);e.data.top=pluginLimit.onResize.pluginTopFn(e.data.top,self.element._outerHeight(),self._getPageArea().height);
e.data.left=pluginLimit.onResize.pluginLeftFn(e.data.left,self.element._outerWidth(),self._getPageArea().width)}$.extend(self.options,{left:e.data.left,top:e.data.top,width:e.data.width,height:e.data.height});self.doResize({top:self.options.top,left:self.options.left,width:self.options.width,height:self.options.height});self.pmask.remove();self.pmask=null;if(self.proxy){self.proxy.remove();self.proxy=null}}})}},_defaultRoot:function(){var o=this.options,override=o.override;if(FR.Browser.isIE()&&!FR.Browser.r.quirks){o.baseCls+=" fr-core-window-no-hack"
}var self=this;var panelType;if(o.confirm){panelType="confirm"}else{if(o.otherButton){panelType="otherbutton"}else{panelType="panel"}}var winOpts=$.extend({},o,{type:panelType,height:o.height-o.titleHeight,fit:false,renderEl:$("<div/>").appendTo("body"),doSize:true,border:true,borderRadius:"auto",cls:o.baseCls,headerCls:"fr-core-window-header",bodyCls:"fr-core-window-body",onClose:function(){if(self.mask){self.mask.hide()}if(o.destroyOnClose){self.destroy()}},onOpen:function(){if(self.mask){self.mask.show()
}},onResize:function(width,heigh){if($.isFunction(o.onDialogResize)){o.onDialogResize()}},onMove:function(left,top){}},override);this.win=FR.createWidget(winOpts);return this.win.element},_getPageArea:function(){if(document.compatMode=="BackCompat"){return{width:Math.max(document.body.scrollWidth,document.body.clientWidth),height:Math.max(document.body.scrollHeight,document.body.clientHeight)}}else{return{width:Math.max(document.documentElement.scrollWidth,document.documentElement.clientWidth),height:Math.max(document.documentElement.scrollHeight,document.documentElement.clientHeight)}
}},doClose:function(){this.win.doClose()},doResize:function(give){this.win.doResize(give)},setTitle:function(title){this.win.setTitle(title)},setContent:function(c){this.win.options[c.type]=c.content;this.win._loadContent(true);if(FR.Browser.isIE8Before()){var self=this;setTimeout(function(){self.doResize({width:undefined,height:undefined})},150)}},setVisible:function(flag){if(flag===true&&this.win.options.closed===true){this.win.doOpen()}else{if(flag===false&&this.win.options.closed===false){this.win.doClose()
}}},destroy:function(){this.element.remove();this.mask.remove()}});$.shortcut("window",FR.Window);FR.Dialog=FR.extend(FR.Window,{});$.shortcut("dialog",FR.Dialog)})(jQuery);
(function(a){FR.QuickList=FR.extend(FR.Widget,{_defaultConfig:function(){return a.extend(FR.QuickList.superclass._defaultConfig.apply(this,arguments),{baseCls:"fr-core-list",width:200,height:400,itemHeight:24,items:[],listItems:[],itemCanBeSelect:false,tools:null,alwaysShowTools:true,onItemToolClick:null,onItemSelect:null,async:null,dataFilter:null,valueField:"value",showField:"text",onBeforeItemCreate:null,scrollLoading:false,max:200})},_init:function(){FR.QuickList.superclass._init.apply(this,arguments);
var c=this.options;var b=this;this.element.css({width:c.width,height:c.height}).scroll(function(){b._onScroll(this)});if(c.async){this._addItemsByAjax()}else{this._addItemsByDefault()}},_addItemsByAjax:function(){var d=this.options,b=this;var c=d.async;var e=a('<div class="fr-core-panel-loading"></div>').css({width:100,height:30}).html(FR.i18nText("FR-Engine_Loading")+"...");this.element.append(e);FR.ajax({url:c.url,data:c.data,type:c.type?c.type:"POST",complete:function(h,f){if(f=="success"){e.remove();
var g=FR.jsonDecode(h.responseText);if(a.isArray(g)){d.items=g;if(!d.index){d.index=0}if(d.index<d.items.length&&d.items.length>d.max){d.need2Scroll=true}b._addItemsByDefault()}FR.applyFunc(b,d.onAsyncSuccess,[g],false)}}})},_onScroll:function(b){var c=this.options;if(!c.scrollLoading){return}if(c.need2Scroll&&a(b).scrollTop()+a(b).height()>=b.scrollHeight){if(c.isLoadingData){return}c.isLoadingData=true;this._addItemsByDefault();c.isLoadingData=false}},_addItemsByDefault:function(){var d=this.options;
if(!d.scrollLoading){d.max=d.items.length}if(d.items&&d.items.length>0){for(var b=d.index;b<d.index+d.max;b++){if(b>=d.items.length){d.need2Scroll=false;d.index=d.items.length;return false}var c=FR.applyFunc(this,d.dataFilter,[d.items[b]],d.items[b]);this.addItem(c)}d.index=d.index+d.max}},addItem:function(c,f){var b=this;var e=this.options;a.extend(c,{height:e.itemHeight,tools:e.tools,alwaysShowTools:e.alwaysShowTools,onItemToolClick:e.onItemToolClick,beforeSelect:e.beforeSelect,itemCanBeSelect:e.itemCanBeSelect,onCustomItemSelect:e.onCustomItemSelect,tooltype:e.tooltype,toolUnEditAble:e.toolUnEditAble,paddingRight:e.paddingRight,toolMargin:e.toolMargin,valueField:e.valueField,showField:e.showField,paddingLeft:e.paddingLeft,onBeforeItemCreate:e.onBeforeItemCreate,onItemSelect:function(){for(var g=0;
g<e.listItems.length;g++){var h=e.listItems[g];if(h!=this){h.doUnselect()}else{b.selectedIndex=g;if(a.isFunction(e.onItemSelect)){e.onItemSelect.apply(h)}}}},onToolClick:function(){for(var g=0;g<e.listItems.length;g++){var h=e.listItems[g];if(h===this){return g}}}});var d=new FR.ListItem(c);if(f){e.listItems.unshift(d);this.element.prepend(d.element)}else{e.listItems.push(d);this.element.append(d.element)}},refresh:function(b){var c=this.options;this.clear();if(b&&b.async){c.async=b.async;this._addItemsByAjax()
}else{if(c.async){this._addItemsByAjax()}}},clear:function(){this.element.empty();this.options.items=[];this.options.listItems=[];this.options.index=0;this.options.need2Scroll=false},remove:function(b){var c=this.options.listItems[b];this.options.listItems.remove(c);a(this.element.children()[b]).remove()},showToolByIndex:function(b){this.element.find("div[toolid="+b+"]").show();this.options.tools[b].invisible=false},hideToolByIndex:function(b){this.element.find("div[toolid="+b+"]").hide();this.options.tools[b].invisible=true
},getValueAtIndex:function(b){return this.options.listItems[b].getValue()},getTextAtIndex:function(b){return this.options.listItems[b].getText()},setTextAtIndex:function(b,c){return this.options.listItems[b].setText(c)},getValue:function(){if(this.options.tooltype==="check"){var b=[];for(var c=0;c<this.options.listItems.length;c++){b.push(this.options.listItems[c].getValue())}return b}if(!this.options.listItems[this.selectedIndex]){return null}return this.options.listItems[this.selectedIndex].getValue()
},getText:function(){if(this.options.tooltype==="check"){var b=[];for(var c=0;c<this.options.listItems.length;c++){b.push(this.options.listItems[c].getText())}return b}if(!this.options.listItems[this.selectedIndex]){return null}return this.options.listItems[this.selectedIndex].getText()},getAllItemText:function(){var b=[];for(var c=0;c<this.options.listItems.length;c++){b.push(this.options.listItems[c].getText())}return b},getItemLength:function(){return this.options.listItems.length},selectItemByIndex:function(b,c){this.options.listItems[b].doSelect(0,c);
this.selectedIndex=b;this.scrollToIndex(b)},getSelectedIndex:function(){return this.selectedIndex},removeSelect:function(){if(this.selectedIndex>=0){this.options.listItems[this.selectedIndex].doUnselect(0)}},clearState:function(){if(this.options.tooltype==="check"){var b=this.options.listItems;for(var c=0;c<b.length;c++){for(var d=0;d<this.options.tools.length;d++){b[c].doUnselect(d)}}}},setValue:function(c){for(var b=0;b<this.options.listItems.length;b++){var d=this.options.listItems[b];if(d.getValue()===c){d.doSelect();
this.selectedIndex=b;this.scrollToIndex(b)}else{d.doUnselect()}}},scrollToIndex:function(b){var d=this.element.height();var c=this.options.itemHeight*(b+1)-d;if(c>0){this.element.scrollTop(c)}else{this.element.scrollTop(0)}},setSelectedText:function(b){this.options.listItems[this.selectedIndex].setText(b)},getItemById:function(d){var c=this.options.listItems;for(var b=0;b<c.length;b++){if(c[b].options.id===d){return c[b]}}},selectByData:function(e){var c=this.options.listItems;for(var d=0;d<e.length;
d++){for(var b=0;b<c.length;b++){if(c[b].options.id===e[d].id){for(var f=0;f<this.options.tools.length;f++){if(e[d][this.options.tools[f].name]&&e[d][this.options.tools[f].name]!==0){c[b].doSelect(f)}}}}}},selectByText:function(e){var c=this.options.listItems;for(var d=0;d<e.length;d++){for(var b=0;b<c.length;b++){if(c[b].options.text===e[d].text){for(var f=0;f<this.options.tools.length;f++){if(e[d][this.options.tools[f].name]&&e[d][this.options.tools[f].name]!==0){c[b].doSelect(f)}}}}}},hasNodeSelect:function(d){var c=this.options.listItems;
for(var b=0;b<c.length;b++){var e=c[b];if(e.options[e.toolName[d]]===1){return true}}return false},selectAll:function(d){var c=this.options.listItems;for(var b=0;b<c.length;b++){c[b].onToolDivClick(c[b].toolDivs[d],new a.Event(),true)}},deSelectAll:function(d){var c=this.options.listItems;for(var b=0;b<c.length;b++){c[b].onToolDivClick(c[b].toolDivs[d],new a.Event(),false)}}});a.shortcut("quicklist",FR.QuickList);FR.ListItem=FR.extend(FR.Widget,{_defaultConfig:function(){return a.extend(FR.ListItem.superclass._defaultConfig.apply(this,arguments),{baseCls:"fr-core-list-item",paddingLeft:12,paddingRight:1,showField:"text",valueField:"value",onItemSelect:null,onBeforeItemCreate:null})
},_init:function(){FR.ListItem.superclass._init.apply(this,arguments);var b=this.options,l=this;FR.applyFunc(this,b.onBeforeItemCreate,[this.element,b],false);var c=b[b.showField];this.$text=a("<span/>").text(c).css({height:b.height,lineHeight:b.height+"px","padding-left":b.paddingLeft}).attr("title",c).appendTo(this.element);this.toolDivs=[];this.toolName=[];if(b.tools&&b.tools.length>0){var k=b.paddingRight;for(var d=0,g=b.tools.length;d<g;d++){var f=b.tools[d];this.toolName.push(f.name);var h=a("<div>").data("tool",f).data("index",d).css({position:"absolute",right:k,top:0,width:f.width||b.height,height:b.height,lineHeight:b.height+"px"}).appendTo(this.element);
if(b.toolMargin){h.css("margin-right",b.toolMargin);k+=b.toolMargin}if(!b.alwaysShowTools){h.hide();var j=function(){a(this).show()}.createDelegate(h);var e=function(){a(this).hide()}.createDelegate(h);this.element.hover(j,e)}if(b.tooltype==="check"){h.addClass("fs_tool_checkoff");if(b.toolUnEditAble){h.addClass("fs_tool_disabled")}if(b[f.name]===1){h.addClass("fs_tool_checkon")}h.click(function(i){l.onToolDivClick(this,i)})}if(f.iconCls){h.addClass(f.iconCls);h.mousedown(function(){a(this).addClass(a(this).data("tool").iconCls4Click)
}).mouseleave(function(){a(this).removeClass(a(this).data("tool").iconCls4Click)}).mouseup(function(m){a(this).removeClass(a(this).data("tool").iconCls4Click);if(a.isFunction(b.onToolClick)){var i=b.onToolClick.call(l)}if(a.isFunction(b.onItemToolClick)){b.onItemToolClick.call(this,a(this).data("index"),i,m)}m.stopEvent()});if(f.iconCls4Hover){h.hover(function(){a(this).addClass(a(this).data("tool").iconCls4Hover)},function(){a(this).removeClass(a(this).data("tool").iconCls4Hover)})}}h.attr("toolid",d);
if(this.options.tools[d].invisible){h.hide()}k+=(f.width||b.height);this.toolDivs.push(h)}}this.element.hover(function(){a(this).addClass("fr-core-list-item-hover")},function(){a(this).removeClass("fr-core-list-item-hover")});if(b.itemCanBeSelect){this.element.bind("mouseup",function(){l.doSelect();if(a.isFunction(b.onItemSelect)){b.onItemSelect.apply(l)}if(a.isFunction(b.onCustomItemSelect)){b.onCustomItemSelect.apply(l)}})}},onToolDivClick:function(g,j,c){var h=this.options;if(h.toolUnEditAble){return
}var i=a(g).data("index");var f=!a(g).hasClass("fs_tool_checkon");if(c===true||c===false){f=c}if(a.isFunction(h.onToolClick)){var d=h.onToolClick.call(this)}if(a.isFunction(h.beforeSelect)){var b=h.beforeSelect.call(g,i,d,f,j);if(b==="wait"){return}}if(!f){this.doUnselect(i)}else{this.doSelect(i)}if(a.isFunction(h.onItemToolClick)){h.onItemToolClick.call(g,i,d,f,j)}},getText:function(){return this.options[this.options.showField]},getValue:function(){var e=this.options;if(e.tooltype==="check"){var b={id:e.id,value:e[e.valueField]};
for(var c=0;c<this.options.tools.length;c++){var d=this.options.tools[c].name;b[d]=this.options[d]}return b}return e[e.valueField]},doSelect:function(b,d){this.element.addClass("fr-core-list-item-selected");if(this.options.tooltype==="check"){this.options[this.toolName[b]]=1;this.toolDivs[b].addClass("fs_tool_checkon")}if(d===true){var c=this.options;if(a.isFunction(c.onItemSelect)){c.onItemSelect.apply(this)}if(a.isFunction(c.onCustomItemSelect)){c.onCustomItemSelect.apply(this)}}},doUnselect:function(c){var b=this;
if(this.options.tooltype==="check"){this.options[this.toolName[c]]=0;this.toolDivs[c].removeClass("fs_tool_checkon")}var d=0;a.each(this.toolName,function(e,f){d|=b.options[f]});if(!d){this.element.removeClass("fr-core-list-item-selected")}},setText:function(c){var b=this.options;b[b.showField]=c;this.$text.text(c).attr("title",c)}})})(jQuery);
(function(a){FR.QuickButton=FR.extend(FR.Widget,{_defaultConfig:function(){return a.extend(FR.QuickButton.superclass._defaultConfig.apply(this,arguments),{baseCls:"fr-core-btn",alignment:"center",text:null,icon:null,iconPath:null,width:80,height:28,iconWidth:24,iconHeight:16,style:null})},_init:function(){FR.QuickButton.superclass._init.apply(this,arguments);var d=this.options;var c=this;var e="gray";a.each(["gray","green","blue"],function(f,g){if(d.style&&g==d.style.toLowerCase()){e=d.style.toLowerCase()
}});var b="fr-core-btn-hover-"+e;this.element.addClass("fr-core-btn-style-"+e);this.$inner=a("<div class='fr-core-btn-inner'></div>").appendTo(this.element);this.$text=a("<span class='fr-core-btn-text' onselectstart='return false'></span>").appendTo(this.$inner);this._initTextFont();this.$text.css({textAlign:d.alignment});if(d.text){this.$text.text(d.text)}d.iconWidth=(d.icon||d.iconPath)?d.iconWidth:0;if(d.iconWidth>0){this.$icon=a("<span class='fr-core-btn-icon'></span>").css({position:"absolute",width:d.iconWidth,height:d.iconHeight,top:0,left:0}).appendTo(this.$inner);
if(d.icon){if(d.icon.indexOf("css:")!=-1){d.icon=d.icon.substring(4)}this.$icon.addClass(d.icon)}else{if(d.iconPath){this.$icon.css({background:"url('"+d.iconPath+"') no-repeat center"})}}}this.$text.css({left:d.iconWidth});this.doResize({width:d.width,height:d.height});if(a.isFunction(d.handler)){this.on(FR.Events.CLICK,d.handler.createDelegate(d.scope||this))}this.element.hover(function(){a(this).addClass(b)},function(){a(this).removeClass(b)});this.$inner.click(function(f){c.fireEvent(FR.Events.CLICK,f)
})},_initTextFont:function(){var b=this.options;if(b.color){this.$text.css("color",b.color)}if(b.decoration){this.$text.css("text-decoration",b.decoration)}if(b.fontsize){this.$text.css("fontSize",b.fontsize)}if(b.fontweight){this.$text.css("fontWeight",b.fontweight)}if(b.fontstyle){this.$text.css("fontStyle",b.fontstyle)}if(b.fontfamily){this.$text.css("fontFamily",b.fontfamily)}},setValue:function(b){if(!FR.isEmpty(b)){this.$text.text(b)}},getValue:function(){return this.$text.text()},setText:function(b){this.setValue(b)
},getText:function(){return this.getValue()},doResize:function(g){var d=this.options;if(g){if(g.width){d.width=g.width}if(g.height){d.height=g.height}if(g.left!=null){d.left=g.left}if(g.top!=null){d.top=g.top}}if(d.left||d.top){this.element.css({position:"absolute",left:d.left,top:d.top})}if(!isNaN(d.width)){var c=d.width;var f=0;if(a.support.boxModel===true){f=(this.element.outerWidth()-this.element.width())}if(!g.hasIgnoredBounds){c=c-f}this.element.css({width:c});this.$inner.css({width:c});this.$text.css({width:c-d.iconWidth})
}if(!isNaN(d.height)){var b=d.height;var e=0;if(a.support.boxModel===true){e=this.element.outerHeight()-this.element.height();this.$icon&&this.$icon.css({height:d.iconHeight,top:(this.element.outerHeight()-this.$icon.outerHeight())/2-e})}else{this.$icon&&this.$icon.css({height:d.iconHeight,top:(d.height-d.iconHeight)/2})}if(!g.hasIgnoredBounds){b=b-e}this.element.css({height:b});this.$text.css("line-height",b+"px");this.$text.css("height",b);this.$inner.css("height",b);this.$text.css("display","block")
}}});a.shortcut("quickbutton",FR.QuickButton)})(jQuery);
(function(a){FR.QuickGrid=FR.extend(FR.Widget,{NAV:{FIRSTPAGE:"first",PREVPAGE:"prev",NEXTPAGE:"next",LASTPAGE:"last",JUMPPAGE:"jump"},_defaultConfig:function(){return a.extend(FR.QuickGrid.superclass._defaultConfig.call(),{baseCls:"fr-grid",baseId:null,marginLeft:10,marginRight:10,items:[],columnsConfig:[],page:false,autoPage:true,pageCount:15,footAlign:"bottom",isFootShow:true,isHeadShow:true,multiSelect:false,intervalColor:false,isInitWithData:true,async:null,hasHoverCls:true,onPageTurn:null,onAsyncSuccess:null,onAsyncError:null,onBeforeRowCreate:null,onAfterRowCreate:null,onBeforeHeadCreate:null,onAfterHeadCreate:null,localeArray:[]})
},_init:function(){FR.QuickGrid.superclass._init.apply(this,arguments);this.$container=a('<div class="fr-grid-table"/>');this.element.append(this.$container);this.activedPage=1;var b=this.options;if(b.baseId){this.element.attr("id",b.baseId)}if(b.isInitWithData){this.refresh()}else{this._initWidth();this.$table=a('<table cellPadding="0" cellSpacing="0"/>');this._onCreateHead();this._onCreateFoot();this.$table.appendTo(this.$container)}},refresh:function(c){var b=this,d=this.options;if(a.isArray(c)){this.options.items=c;
this.reBuild()}else{if(d.async){FR.ajax({url:d.async.url,type:d.async.type?d.async.type:"POST",data:d.async.data,success:function(f,e){FR.applyFunc(b,d.onAsyncSuccess,[f,e,c]);b.reBuild()},error:function(f,e){FR.applyFunc(b,d.onAsyncError,[f,e,c])}})}else{this.reBuild()}}},reBuild:function(){if(this.options.multiSelect){this.allBoxes=[]}if(this.$table){this.$table.remove();this.$table=null}this._initWidth();this.$table=a('<table cellPadding="0" cellSpacing="0"/>');this._onCreateHead();this._onCreateTable();
this._onCreateFoot();this._bindEvts();this.$container.append(this.$table)},_initWidth:function(){var d=0,e=this.options;for(var c=0,b=e.columnsConfig.length;c<b;c++){d+=e.columnsConfig[c].width}if(e.multiSelect){d+=25}d+=e.marginLeft;d+=e.marginRight;e.width=d;this.element.width(d)},_onCreateHead:function(){var b=this.options,i=this;var d=b.isHeadShow;this.$head=a("<thead/>");var e=a("<tr/>").appendTo(this.$head);FR.applyFunc(this,b.onBeforeHeadCreate,[e],false);a("<td/>").append(a("<div/>").width(b.marginLeft)).appendTo(e);
if(b.multiSelect){this.$AllCheck=new FR.CheckBox({width:25,listeners:[{eventName:FR.Events.STATECHANGE,action:function(){if(!i.allBoxes){return}var l=this.isSelected();for(var m=0,k=i.allBoxes.length;m<k;m++){var n=i.allBoxes[m];n.setValue(l)}}}]});a("<td/>").append(this.$AllCheck.element).appendTo(e)}for(var c=0,f=b.columnsConfig.length;c<f;c++){var h=b.columnsConfig[c];var g=a("<td/>").width(this._calculateWidth(h));var j=FR.applyFunc(this,h.onHeadCellCreate,[c,h],false);if(j===false){g.css("text-align",h.textAlign?h.textAlign:"left").text(h.value?h.value:h.key)
}else{g.append(j)}g.appendTo(e)}a("<td/>").append(a("<div/>").width(b.marginRight)).appendTo(e);FR.applyFunc(this,b.onAfterHeadCreate,[e],false);if(d){this.$table.append(this.$head)}},_calculateWidth:function(b){if(b){if(b.width>0&&b.width<1){return b.width*this.element.width()}else{return b.width}}return 0},_onCreateTable:function(){this.$tbody=a("<tbody/>");var f=this.options;var d=f.items;if(f.page&&f.autoPage){this.totalpages=Math.ceil(f.items.length/f.pageCount);d=f.items.slice(f.pageCount*(this.activedPage-1),f.pageCount*this.activedPage)
}for(var e=0,c=d.length;e<c;e++){var b=this.onCreateRow(e,d[e]);this.$tbody.append(b)}this.$table.append(this.$tbody)},_onCreateFoot:function(){var l=this,d=this.options,c=this.NAV;if(!d.page){return}if(this.$foot){this.$foot.remove();this.$foot=null}this.$foot=a('<div class="fr-grid-foot"/>').css({"margin-left":d.width-240-d.marginRight});var j=new FR.IconButton({imgsrc:"fr-grid-foot-first",width:24,height:24,handler:function(){l.activedPage=1;if(!FR.applyFunc(l,d.onPageTurn,[l.activedPage,d.pageCount,c.FIRSTPAGE],false)){l.reBuild()
}}});var e=new FR.IconButton({imgsrc:"fr-grid-foot-prev",width:24,height:24,handler:function(){l.activedPage--;if(!FR.applyFunc(l,d.onPageTurn,[l.activedPage,d.pageCount,c.PREVPAGE],false)){l.reBuild()}}});var g=new FR.IconButton({imgsrc:"fr-grid-foot-next",width:24,height:24,handler:function(){l.activedPage++;if(!FR.applyFunc(l,d.onPageTurn,[l.activedPage,d.pageCount,c.NEXTPAGE],false)){l.reBuild()}}});var i=new FR.IconButton({imgsrc:"fr-grid-foot-last",width:24,height:24,handler:function(){l.activedPage=l.totalpages;
if(!FR.applyFunc(l,d.onPageTurn,[l.activedPage,d.pageCount,c.LASTPAGE],false)){l.reBuild()}}});var f=a('<input class="fr-grid-foot-loader" type="text"/>').val(this.activedPage).keydown(function(m){if(m.keyCode===13){l.activedPage=a(this).val();if(!FR.applyFunc(l,d.onPageTurn,[l.activedPage,d.pageCount,c.JUMPPAGE],false)){l.reBuild()}m.stopEvent()}});var h=this.totalpages?this.totalpages:1;if(this.activedPage>=h){i.setEnable(false);g.setEnable(false)}if(this.activedPage<=1){e.setEnable(false);j.setEnable(false)
}var b=a('<div class="fr-grid-foot-page"/>').text(" /"+h+" "+FR.i18nText("FR-Basic_Page_Number"));var k=a("<table/>").attr({id:"fr-grid-foot-table",cellPadding:0,cellSpacing:0});a("<tr/>").append(a("<td/>").append(j.element)).append(a("<td>").append(e.element)).append(a("<td/>").addClass("fr-grid-foot-pageshow").append(f).append(b)).append(a("<td/>").append(g.element)).append(a("<td/>").append(i.element)).appendTo(k);this.$foot.append(k);if(d.footAlign=="top"){this.$foot.prependTo(this.element)}else{this.$foot.appendTo(this.element)
}},_bindEvts:function(){var b=this,d=this.options;var c=function(g){var h=g.target;var f=g.type;var e=b._getTargetDom(h,"TR");if(!e){return}if(f==="mousedown"){FR.applyFunc(b,d.onRowMouseDown,[e],false)}else{if(f==="mouseover"){d.hasHoverCls&&e.addClass("hover");FR.applyFunc(b,d.onRowMouseOver,[e],false)}else{if(f==="mouseout"){e.removeClass("hover");FR.applyFunc(b,d.onRowMouseOut,[e],false)}else{if(f==="mouseup"){FR.applyFunc(b,d.onRowClick,[e],false)}}}}};this.element.bind("mousedown",c).bind("mouseover",c).bind("mouseup",c).bind("mouseout",c)
},_getTargetDom:function(b,c){while(b&&b.tagName){if(b.tagName.toUpperCase()!==c.toUpperCase()){b=b.parentNode}else{return a(b)}}return null},onCreateRow:function(c,j){var e=this.options,k=this;var h=a("<tr/>");FR.applyFunc(this,e.onBeforeRowCreate,[h,c,j],false);a("<td/>").width(e.marginLeft).appendTo(h);if(e.multiSelect){var b=new FR.CheckBox({width:25,gridRowData:j,listeners:[{eventName:FR.Events.STATECHANGE,action:function(){if(!k.$AllCheck){return}if(this.isSelected()){var m=true;for(var n=0,l=k.allBoxes.length;
n<l;n++){var o=k.allBoxes[n];if(!o.isSelected()){m=false;break}}k.$AllCheck.setValue(m)}else{k.$AllCheck.setValue(false)}}}]});this.allBoxes.push(b);a("<td/>").append(b.element).appendTo(h)}for(var f=0,g=e.columnsConfig.length;f<g;f++){var d=e.columnsConfig[f];var i=this.onCellCreate(c,f,j,d);i.appendTo(h)}if(e.intervalColor&&c%2===0){h.addClass("even")}a("<td/>").width(e.marginRight).appendTo(h);FR.applyFunc(this,e.onAfterRowCreate,[h,c,j],false);return h},onCellCreate:function(e,i,d,b){var h=a("<td/>"),c=this;
var f=FR.applyFunc(this,b.onCellCreate,[e,i,d,b],false);if(f===false){if(!FR.isEmpty(b.value)){var g=a.inArray(b.key,c.options.localeArray)==-1?d[b.key]:FR.i18nText(d[b.key]);f=a('<div class="cell"/>').width(c._calculateWidth(b)).text(g).attr("title",g).appendTo(h)}}else{h.append(f)}h.click(function(){FR.applyFunc(c,b.onCellClick,[e,i,d,b,f],false)});FR.applyStyles(f,b.css);return h},getValue:function(){return this.options.items},addRowData:function(d){var c=this,e=this.options;if(e.async){}else{var b=this.onCreateRow(this.options.items.length,d);
this.options.items.push(d);b.appendTo(this.$tbody)}},getSelectedData:function(){var c=[];if(this.allBoxes){for(var d=0,b=this.allBoxes.length;d<b;d++){var e=this.allBoxes[d];if(e.isSelected()){c.push(e.options.gridRowData)}}}return c}});a.shortcut("quickgrid",FR.QuickGrid)}(jQuery));
(function(a){FR.progressBar=function(f,d){function b(h){var g;FR.ajax({type:"POST",url:FR.servletURL,cache:false,data:{op:"export",cmd:"export_polling",sessionID:h,type:d,data:new Date().getTime()},async:false,success:function(l,j){var m=FR.jsonDecode(l);if(m.isExporting){if(a("#progressBar").length<=0){var n=a('<div id = "progressBar"></div>').appendTo("body");var i=a("<div>"+FR.i18nText("FR-Engine_Exporting")+"...</div>").appendTo(a("#progressBar"));if(!FR.Browser.r.gecko){var k=a('<div id="transparent_mask" style="position:absolute;filter:alpha(opacity=50);opacity:0.5;"></div>');
k.css("left","0px").css("top","0px").css("width","100%").css("height","100%").css("z-index",2001).appendTo("body");n.addClass("progressBar");i.addClass("progressBarTips")}}}else{a("#progressBar").remove();while(document.getElementById("transparent_mask")){document.getElementById("transparent_mask").remove()}g=true}}});return g}var e=function(){if(!b(f)){return}clearInterval(c)};var c=setInterval(e,5000)}}(jQuery));
(function(a){FR.layoutFrozen=function(i,j){var g=a(".frozen-center",i);var f=a(".frozen-corner",i);var e=a(".frozen-north",i);var h=a(".frozen-west",i);if(g.length>0||f.length>0||e.length>0||h.length>0){var d=function(){var q=j;var p=0;var m=a(window.document).height()-e.height();var n="bottom";var r=contentPane.$contentPane.data("TabPane");if(r){n=r.options.tabPosition;if(n=="bottom"){q+=r.options.tabHeight}}var s=a(".x-toolbar");for(var o=0;o<s.length;o++){if(a(s[o]).position().top>j){q+=a(".x-toolbar").height()
}}if(a(".parameter-container").height()>0){var t=a(".parameter-container-collapse").parent();var k=t.isVisible();var l=t.height();if(k&&q<l){q+=l}else{if(!k&&q>l){q-=l}}}m-=q;return m};var b=function(){var r;var n=d();var k=a(".pageContentDIV",this.$contentPane);var l=k.hasClass("contentDIV");var o=false;if(a(".frozen-table",i).length>0){o=true}if(l){var m=parseInt(a(".report-background").css("left"));if(FR.Browser.isIE8Before()){m=parseInt(a("#fr-page-content").css("left"))}m=isNaN(m)?0:m;var s=k.width();
var q=Math.min(a(".content-container").width(),s)-m;a(".frozen-page").css("width",q);r=q;if(r==s){r-=m}var p=parseInt(a(".report-background").css("top"));p=isNaN(p)?0:p;n-=(p+24);r-=f.width()}else{if(o){r=a(window.document).width()-i.offset().left-h.width()}else{r=a(window.document).width()-h.width()}n-=a(".HF-footer").height();n-=a(".HF-header").height()}g.width(r);e.width(r);g.height(n);h.height(n)};var c=function(){if(h.width()===0&&e.height()===0){i=a(".sheet-container");var k=a(".frozen-center",i).length;
for(var m=0;m<k;m++){var l=a(a(".frozen-west",i)[m]);var n=a(a(".frozen-north",i)[m]);if(l.width()!==0&&n.height()!==0){h=l;e=n;g=a(a(".frozen-center",i)[m]);f=a(a(".frozen-corner",i)[m]);break}}}};b();g.scroll(function(){e.scrollLeft(g.scrollLeft());h.scrollTop(g.scrollTop())}.createDelegate(this));h.scroll(function(){g.scrollTop(h.scrollTop())}.createDelegate(this));if(FR.Browser.isIE()){e.scroll(function(){g.scrollLeft(e.scrollLeft())}.createDelegate(this))}window.onresize=function(){if(self.resizeid!=null){clearTimeout(self.resizeid);
self.resizeid=null}self.resizeid=setTimeout(function(){c();b()},200)}}}})(jQuery);
(function(a){a.fn.extend({__scroll2View__:function(b,d){var e=a(b)[0];return a.each(this,function(p,h){var g=a(h).offset();var i=a(e).offset();var k=g.left-i.left+e.scrollLeft,s=g.top-i.top+e.scrollTop,o=s+h.offsetHeight,f=k+h.offsetWidth;var c=e.clientHeight;var m=parseInt(e.scrollTop,10);var q=parseInt(e.scrollLeft,10);var j=m+c;var n=q+e.clientWidth;if(h.offsetHeight>c||s<m){e.scrollTop=s}else{if(o>j){e.scrollTop=o-c}}if(d!==false){if(h.offsetWidth>e.clientWidth||k<q){e.scrollLeft=k}else{if(f>n){e.scrollLeft=f-e.clientWidth
}}e.scrollLeft=e.scrollLeft}})}})})(jQuery);
(function(a){FR.BasePane=FR.extend(FR.Widget,{type:"basepane",zoom:1,_defaultConfig:function(){return a.extend(FR.BasePane.superclass._defaultConfig.apply(this,arguments),{})},_init:function(){FR.BasePane.superclass._init.apply(this,arguments)},autoScale:function(){if(window!=top&&this.$contentPane&&this.options.autoScale){var c=a(".pageContentDIV",this.$contentPane);if(c){var b=c.height();var e=c.width();var d=a(window.document).height();var f=a(window.document).width();this.scale(d/b)}}},scale:(function(){var b=[0.25,0.5,0.75,1,1.2,1.5,2];
return function(f){if(f==="+"){for(var e=0,c=b.length;e<c;e++){if(b[e]>this.zoom){return this.scale(b[e])}}if(e==b.length){return this.scale(b[b.length-1])}}else{if(f==="-"){for(var e=(b.length-1);e>=0;e--){if(b[e]<this.zoom){return this.scale(b[e])}}if(e<0){return this.scale(b[0])}}else{if(typeof f=="number"){if(this.$contentPane){var d=a(".pageContentDIV",this.$contentPane);if(FR.Browser.r.gecko){d.css("-moz-transform","scale("+f+","+f+")");d.css("-moz-transform-origin","top left")}else{if(FR.Browser.r.webkit){d.css("-webkit-transform","scale("+f+","+f+")");
d.css("-webkit-transform-origin","top left")}else{if(FR.Browser.r.opera){d.css("-o-transform","scale("+f+","+f+")");d.css("-o-transform-origin","top left")}else{d.css("zoom",f)}}}this.zoom=f;this.fireEvent("zoomchanged")}}else{return this.zoom}}}}})(),loadReportPane:function(c){this.fireEvent(FR.Events.INIT);c=c||{};c.param=a.extend({showType:1},c.param);var b=[];if(c.param.html){this.parameterEl=this._createFormParameterPane(c,b)}this.$contentPane=this._createContentPane(c.sheets,c.browserbg,c.$paraContainer);
b.push({region:"center",el:this.$contentPane});this._doReportPaneLayout(b,c);this.initContentPane();if(this.parameterEl==null){this.loadContentPane()}else{if(c.param.delay===false){this.parameterCommit()}}this.delay=c.param.delay},_doReportPaneLayout:function(d,e){var c=this;var f=new FR.BorderLayout({items:d,renderEl:this.options.renderEl});a(window).bind("resize",function(){if(c.resizeid!=null){clearTimeout(c.resizeid);c.resizeid=null}c.resizeid=setTimeout(function(){if(e.$paraContainer){e.$paraContainer.width=document.body.offsetWidth
}var g=f.getWidgetByName(e.alignLayoutName);if(g){g.element.css("width",e.param.width);c.addParaPaneScrollBar(e.$paraContainer,g.element,e.param.height,c.scrollHeight)}f.doLayout()},200)});var b=f.getWidgetByName(e.alignLayoutName);if(b){this.addParaPaneScrollBar(e.$paraContainer,b.element,e.param.height,this.scrollHeight)}e.onCollapse=function(h,i,g){f.getWidgetByName(i).setVisible(!h);f.setRegionWH("north",g);f.doLayout()};e.onCalculate=function(g,i,h){e.param.height=g;h.height(g+i);f.doLayout()
};f.doLayout()},_createContentPane:function(d,b,c){d=d||[];var e=a("div.content-container");if(e.length!==1){e=a("<div id='content-container'>").appendTo(this.element).addClass("content-container")}e.css({overflow:"hidden"});if(d&&d.length>1){this._initSheetTabPane(e,d,b.background)}else{e.css("overflow","auto").css("border-top","0px")}if(b.background!=null){if(FR.Browser.isIE()){e.css("background",b.background+" fixed");if(FR.Browser.isIE6()&&c){e.css("background-position","0px "+c.height()+"px 0px 0px")
}}else{e.css("background",b.background)}}return e},addParaPaneScrollBar:function(c,d,e,b){if(c){c.hScrollPane({mover:d,showArrow:false,top:e,height:b,dragable:false,easing:false,mousewheel:{bind:false,moveLength:500}})}},showPageSetupDialog:function(s){s=s||{};s.width=s.width||390;s.height=s.height||295;s.title=FR.i18nText("PageSetup-Page_Setup");var y=12,f="#4C4C4C",z="simsun",p=s.sessionID||"",k=s.reportIndex,d=10,c=25,n=162,r=21,w=234;var g=[{text:"Letter",value:"Letter"},{text:"A2",value:"A2"},{text:"Legal",value:"Legal"},{text:"A0",value:"A0"},{text:"A1",value:"A1"},{text:"Note",value:"Note"},{text:"A3",value:"A3"},{text:"A4",value:"A4"},{text:"A5",value:"A5"},{text:"A6",value:"A6"},{text:"A7",value:"A7"},{text:"A8",value:"A8"},{text:"B0",value:"B0"},{text:"B1",value:"B1"},{text:"B2",value:"B2"},{text:"B3",value:"B3"},{text:"B4",value:"B4"},{text:"B5",value:"B5"},{text:"Tabloid",value:"Tabloid"},{text:"Ledger",value:"Ledger"},{text:"Halfletter",value:"Halfletter"}];
var t=FR.createWidget({type:"tablelayout",columnSize:[72,16,302],rowSize:[r,52,52],vgap:20,items:[[{el:{type:"label",value:FR.i18nText("FR-Engine-PageSetup_Orientation"),fontsize:y,verticalcenter:true,textalign:"right",fontfamily:z}},{el:a("<div>")},{el:{type:"border",items:[{region:"center",el:{type:"radio",widgetName:"portrait",text:FR.i18nText("FR-Engine-PageSetup_Portrait"),fontSize:y,listeners:[{eventName:"statechange",action:function(){if(this.getValue()){var o=t.getWidgetByName("landscape");
if(o){o.setValue(false)}}}}]}},{region:"east",width:w,el:{type:"radio",widgetName:"landscape",text:FR.i18nText("FR-Engine-PageSetup_Landscape"),fontSize:y,listeners:[{eventName:"statechange",action:function(){if(this.getValue()){var o=t.getWidgetByName("portrait");if(o){o.setValue(false)}}}}]}}]}}],[{el:{type:"label",value:FR.i18nText("FR-Engine-PageSetup_Paper_Size"),fontsize:y,textalign:"right",fontfamily:z}},{el:a("<div>")},{el:{type:"border",items:[{region:"north",height:r,el:{type:"border",items:[{region:"center",el:{type:"radio",widgetName:"predefined",text:FR.i18nText("FR-Engine-PageSetup_Predefined"),fontSize:y,listeners:[{eventName:"afteredit",action:function(){var A=this.getValue();
var o=t.getWidgetByName("papaersize_setup");if(A===false){o.setRowVisible(0,false)}else{o.setRowVisible(0,true)}o.doLayout()}},{eventName:"statechange",action:function(){var A=t.getWidgetByName("papaersize_setup");if(this.getValue()){A.setRowVisible(1,false);var o=t.getWidgetByName("customed");if(o){o.setValue(false)}}else{A.setRowVisible(1,true)}A.doLayout()}}]}},{region:"east",width:w,el:{type:"radio",widgetName:"customed",text:FR.i18nText("FR-Engine_Custom"),fontSize:y,listeners:[{eventName:"afteredit",action:function(){var A=this.getValue();
var o=t.getWidgetByName("papaersize_setup");if(A===false){o.setRowVisible(1,false)}else{o.setRowVisible(1,true)}o.doLayout()}},{eventName:"statechange",action:function(){var o=t.getWidgetByName("papaersize_setup");if(this.getValue()){o.setRowVisible(0,false);var A=t.getWidgetByName("predefined");if(A){A.setValue(false)}}else{o.setRowVisible(0,true)}o.doLayout()}}]}}]}},{region:"center",height:d,el:a("<div>")},{region:"south",height:r,el:{type:"tablelayout",widgetName:"papaersize_setup",columnSize:[302],rowSize:[r,r],vgap:0,items:[[{el:{type:"border",items:[{region:"center",el:{type:"combo",widgetName:"paperSize",allowBlank:false,directEdit:true,items:g,fontSize:y,listeners:[{eventName:"afteredit",action:function(){FR.ajax({url:FR.servletURL,type:"POST",data:{op:"fr_utils",cmd:"utils_papersize",paperSize:this.getValue()},complete:function(o){var A=FR.jsonDecode(o.responseText);
t.getWidgetByName("user_width").setValue(A.width);t.getWidgetByName("user_height").setValue(A.height);t.getWidgetByName("predefined").setValue(true);t.getWidgetByName("customed").reset()}})}}]}},{region:"east",width:n,el:a("<div>")}]}}],[{el:{type:"tablelayout",columnSize:[12,12,60,5,21,14,12,12,60,5,21,68],rowSize:[r],vgap:0,items:[[{el:{type:"label",value:FR.i18nText("FR-Engine_Width"),fontsize:y}},{el:a("<div>")},{el:{type:"number",widgetName:"user_width",fontSize:y}},{el:a("<div>")},{el:{type:"label",value:"mm",fontsize:y,color:f,fontfamily:"tahoma"}},{el:a("<div>")},{el:{type:"label",value:FR.i18nText("FR-Engine_Height"),fontsize:y}},{el:a("<div>")},{el:{type:"number",widgetName:"user_height",fontSize:y}},{el:a("<div>")},{el:{type:"label",value:"mm",fontsize:y,color:f,fontfamily:"tahoma"}},{el:a("<div>")}]]}}]]}}]}}],[{el:{type:"label",value:FR.i18nText("FR-Engine-PageSetup_Margin"),fontsize:y,textalign:"right",fontfamily:z}},{el:a("<div>")},{el:{type:"tablelayout",columnSize:[12,12,60,5,21,14,12,12,60,5,21,68],rowSize:[r,r],vgap:10,items:[[{el:{type:"label",value:FR.i18nText("FR-Engine_Top"),fontsize:y}},{el:a("<div>")},{el:{type:"number",widgetName:"margin_top",fontSize:y}},{el:a("<div>")},{el:{type:"label",value:"mm",fontsize:y,color:f,fontfamily:"tahoma"}},{el:a("<div>")},{el:{type:"label",value:FR.i18nText("FR-Engine_Bottom"),fontsize:y}},{el:a("<div>")},{el:{type:"number",widgetName:"margin_bottom",fontSize:y}},{el:a("<div>")},{el:{type:"label",value:"mm",fontsize:y,color:f,fontfamily:"tahoma"}},{el:a("<div>")}],[{el:{type:"label",value:FR.i18nText("FR-Engine_Left"),fontsize:y}},{el:a("<div>")},{el:{type:"number",widgetName:"margin_left",fontSize:y}},{el:a("<div>")},{el:{type:"label",value:"mm",fontsize:y,color:f,fontfamily:"tahoma"}},{el:a("<div>")},{el:{type:"label",value:FR.i18nText("FR-Engine_Right"),fontsize:y}},{el:a("<div>")},{el:{type:"number",widgetName:"margin_right",fontSize:y}},{el:a("<div>")},{el:{type:"label",value:"mm",fontsize:y,color:f,fontfamily:"tahoma"}},{el:a("<div>")}]]}}]]});
var l=t.getWidgetByName("predefined");var i=t.getWidgetByName("customed");var m=t.getWidgetByName("portrait");var x=t.getWidgetByName("landscape");var q=t.getWidgetByName("paperSize");var v=t.getWidgetByName("user_width");var h=t.getWidgetByName("user_height");var u=t.getWidgetByName("margin_top");var b=t.getWidgetByName("margin_bottom");var j=t.getWidgetByName("margin_left");var e=t.getWidgetByName("margin_right");FR.ajax({url:FR.servletURL,type:"POST",data:{op:"fr_dialog",cmd:"read_page_setup_tpl",sessionID:p,reportIndex:k},complete:function(B,A){var o=FR.jsonDecode(B.responseText);
if(o!=null){l.setValue(o.predefined);if(l.getValue()){t.getWidgetByName("papaersize_setup").setRowVisible(0,true);t.getWidgetByName("papaersize_setup").setRowVisible(1,false)}else{t.getWidgetByName("papaersize_setup").setRowVisible(0,false);t.getWidgetByName("papaersize_setup").setRowVisible(1,true)}t.getWidgetByName("papaersize_setup").doLayout();i.setValue(o.customed);m.setValue(o.portrait);x.setValue(o.landscape);q.setValue(o.paperSize);v.setValue(o.user_width);h.setValue(o.user_height);u.setValue(o.margin_top);
b.setValue(o.margin_bottom);j.setValue(o.margin_left);e.setValue(o.margin_right)}}});s.onOK=function(){FR.ajax({url:FR.servletURL,type:"POST",data:{op:"fr_dialog",cmd:"change_page_setup",sessionID:p,reportIndex:k,predefined:l.getValue(),customed:i.getValue(),portrait:m.getValue(),landscape:x.getValue(),paperSize:q.getValue(),user_width:v.getValue(),user_height:h.getValue(),margin_top:u.getValue(),margin_bottom:b.getValue(),margin_left:j.getValue(),margin_right:e.getValue()},complete:function(){FR.closeDialog()
}})};s.contentWidget={type:"border",items:[{region:"north",el:a("<div>"),height:c},{region:"center",el:t.element}]};FR.showUpdateDialog(s)},_sheetPositionPane:function(){var b;var c;FR.ajax({url:FR.servletURL,type:"POST",async:false,data:{op:"fr_write",cmd:"sheet_position",sessionID:FR.SessionMgr.getSessionID(),_:new Date().getTime()},timeout:5000,complete:function(e,d){b=e.responseText}});switch(b){case"1":c="top";break;case"3":c="bottom";break;default:c="bottom";break}return c},_initSheetTabPane:function(f,c,d){var b=this._sheetPositionPane();
var e=new FR.TabPane({background:d,items:c,tabPosition:b,renderEl:f});f.data("TabPane",e)},_initParameterFormPane:function(){return a("<div>").appendTo(this.element).addClass("parameter-container")},_createFormParameterPane:function(c,s){var d=8;c.alignLayoutName="__layout4align__";var k=this,l=c.param;var t=l.html;k.scrollHeight=6;var q=0,m=0;for(var p=0;p<t.items.length;p++){var r=t.items[p];q=Math.max(q,r.x+r.width);m=Math.max(m,r.y+r.height)}var n=l.height-m;var f;var o=l.width>document.body.offsetWidth?k.scrollHeight:0;
var e=a("<div class='parameter-container' style='overflow: auto;'>").css({height:l.height+o+d,width:document.body.offsetWidth});c.$paraContainer=e;t.onCalculate=function(i){if(a.isFunction(c.onCalculate)){c.onCalculate.call(this,i+n,d,e)}};var h=a("<div class='parameter-container-collapseimg-up' style='cursor: pointer'></div>").click(function(){var i=new Date();k.lastResizeTime=i;setTimeout(function(){if(i==k.lastResizeTime){delete k.lastResizeTime;e.animate({height:(k.hasCollapsed?"+=":"-=")+l.height},"fast",function(){k.hasCollapsed=!k.hasCollapsed;
h.switchClass("parameter-container-collapseimg-down","parameter-container-collapseimg-up");if(a.isFunction(c.onCollapse)){c.onCollapse.call(this,k.hasCollapsed,c.alignLayoutName,e.height());k.doAfterCollapse()}})}},222)});var g="left";switch(l.alignLocation){case 0:g="left";break;case 1:g="center";break;case 2:g="right";break;default:g="left"}var b=a('<div class="pmeter-container"></div>').css({height:l.height,width:l.width});var j={renderEl:e,type:"border",items:[{region:"south",height:d,el:{type:"horizontal",items:[{el:h,width:120}]}},{region:"center",el:{type:"horizontal",width:l.width,minWidth:l.width,widgetName:c.alignLayoutName,alignment:g,items:[{el:b,width:q}]}}]};
this._setBackground(l,e);if(l.showType===1){s.push({region:"north",el:j,height:l.height+d+o})}if(l.showType===0){e.css({position:"absolute",width:l.width,height:l.height}).appendTo("body");t.listeners=[{once:true,eventName:"submitcomplete",action:function(){FR.closeDialog()}}];t.renderEl=e;f=new FR.contentForm(t)}else{t.renderEl=b;t.container=e;f=new FR.contentForm(t)}if(l.showType===0){f.doLayout();FR.showDialog({title:l.paramWindowTitle,width:l.width+20,height:l.height+45,contentHtml:e})}return f
},_setBackground:function(c,b){var d=c.parambg;if(d!=null){FR.setBackground(b,d)}},doAfterCollapse:function(){},afterLoad:function(){},parameterCommit:function(b){if(a.isFunction(this.parameterEl.formSubmit)){this.parameterEl.formSubmit({url:FR.servletURL+"?op=fr_dialog&cmd=parameters_d&sessionID="+_g().currentSessionID,callback:function(){_g().loadContentPane(b)}})}},makeHighlight:function(e,g,k){var l=this;if(!g){g="click"}var b=a("div.content-container");var j=a("tr",b);var i=function(p,o){var n=p.children();
for(var m=0;m<n.length;m++){var q=n.eq(m);o.push(q[0].style.backgroundColor);q[0].style.backgroundColor=e}};var c=function(p){if(!a(p.target).is("td")){return}var o=a(p.target).parent();if(a(p.target).attr("hv")){o=o.closest("td").parent()}if(f!=null){if(k===true){var n=f.children();for(var m=0;m<n.length;m++){var q=n.eq(m);q[0].style.backgroundColor=h[m]==""?"White":h[m]}h.length=0;if(o[0]!=f[0]){i(o,h);f=o;return}}else{f[0].style.backgroundColor="White";if(o[0]!=f[0]){o[0].style.backgroundColor=(o[0].style.backgroundColor==e?"White":e);
f=o;return}}f=null;return}f=o;if(k===true){i(o,h)}else{o[0].style.backgroundColor=(o[0].style.backgroundColor==e?"White":e)}};var f=null;var h=[];var d=g.indexOf("over")!=-1?"mouseover":"click";if(window.highfun!=null){b.unbind(d,window.highfun)}window.highfun=function(m){c(m)};b.bind(d,window.highfun)},initContentPane:function(){var e=FR.Report.Plugin.Panel.Events;if(a.isArray(e)){for(var d=0,b=e.length;d<b;d++){var c=e[d];this.on(c.name,c.action.createDelegate(this))}}},pdfPrint:function(b){if(this.fireEvent(FR.Events.BPDFPRINT)===false){return
}if(FR.Browser.isIE()){FR.doPDFPrint(this.currentSessionID,b)}else{window.open(FR.servletURL+"?op=fr_pdfprint&cmd=native&sessionID="+this.currentSessionID,"_blank");this.fireEvent(FR.Events.APDFPRINT)}},setAppearRefresh:function(){}})})(jQuery);
(function($){var $PrintDiv,$PDFReader,$flashIframe,$appletDiv,showFlashPrintSetting,fitPaper,showAppletPrintSetting=null;var appletJarName="/fr-applet-8.0.jar";function isShowFlashPrintSetting(){if(typeof showFlashPrintSetting!="boolean"){$(function(){FR.ajax({url:FR.servletURL,data:{op:"flash_print",cmd:"get_fp_setting"},async:false,complete:function(res,status){if(status=="success"){showFlashPrintSetting=res.responseText=="true"}}})})}return showFlashPrintSetting}function isPrintAsPPAPI(){var isPPAPI=false;
var type="application/x-shockwave-flash";var mimeTypes=navigator.mimeTypes;var endsWith=function(str,suffix){return str.indexOf(suffix,str.length-suffix.length)!==-1};if(mimeTypes&&mimeTypes[type]&&mimeTypes[type].enabledPlugin&&(mimeTypes[type].enabledPlugin.filename==="pepflashplayer.dll"||mimeTypes[type].enabledPlugin.filename==="libpepflashplayer.so"||mimeTypes[type].enabledPlugin.filename=="PepperFlashPlayer.plugin"||endsWith(mimeTypes[type].enabledPlugin.filename,"Chrome.plugin"))){isPPAPI=true
}return isPPAPI}function isFitPaper(){if(!fitPaper){$(function(){FR.ajax({url:FR.servletURL,data:{op:"flash_print",cmd:"fit_fs_paper"},async:false,complete:function(res,status){if(status=="success"){fitPaper=res.responseText=="true"}}})})}return fitPaper}function supportPDFPrint(){return FR.Browser.isIE()}function supportCodebase(){return FR.Browser.isIE()}function isShowAppletPrintSetting(){if(typeof showAppletPrintSetting!="boolean"){$(function(){FR.ajax({url:FR.servletURL,data:{op:"fr_applet",cmd:"applet_print_setting"},async:false,complete:function(res,status){if(status=="success"){showAppletPrintSetting=res.responseText=="true"
}}})})}return showAppletPrintSetting}function isAppletPrintOver(sessionID){var appletPrintOver;FR.ajax({url:FR.servletURL,data:{op:"fr_applet",cmd:"is_printover",sessionID:sessionID,data:new Date().getTime()},async:false,complete:function(res,status){if(status=="success"){appletPrintOver=res.responseText=="true"}}});return appletPrintOver}function isSingleSheetFunc(sessionID){var isSingleSheet;FR.ajax({url:FR.servletURL,data:{op:"fr_applet",cmd:"is_singleSheet",sessionID:sessionID},async:false,complete:function(res,status){if(status=="success"){isSingleSheet=res.responseText=="true"
}}});return isSingleSheet}function checkPDFPrint(sessionID,popupSetup){FR.ajax({url:FR.servletURL,type:"POST",data:{op:"fr_pdfprint",cmd:"pt_check",sessionID:sessionID},complete:function(res,status){var resText=res.responseText;if("ok"==resText){(function(){FR.closeDialog();if(popupSetup===true){$PDFReader[0].print()}else{$PDFReader[0].printAllFit(true)}if(_g()){_g().fireEvent("afterpdfprint")}}).defer(2000)}else{if("gening"==resText){checkPDFPrint.defer(300,this,[sessionID,popupSetup])}else{FR.Msg.toast(resText)
}}}})}function __getSessionID__(opts){var config={};if(arguments.length===1){config=arguments[0]}else{if(arguments.length===2){config.url=arguments[0];$.extend(config,arguments[1])}}var sessionID=null;var udata;config.url=config.url.replace("op=","op_=");if(config&&config.form){var $form=$(config.form);udata=$.param($form.serializeArray().concat([{name:"op",value:"getSessionID"}]))}else{if(config&&config.formid){$form=$("#"+config.formid);udata=$.param($form.serializeArray().concat([{name:"op",value:"getSessionID"}]))
}else{if(config&&config.data){udata=$.extend({op:"getSessionID"},config.data)}else{udata={op:"getSessionID"}}}}FR.ajax({url:config.url,type:"POST",data:udata,async:false,complete:function(res,status){if(status=="success"){sessionID=res.responseText}}});return sessionID}$.extend(FR,{doPDFPrint:function(sessionID,popupSetup){var isShowDialog=false;FR.ajax({url:FR.servletURL,data:{op:"fr_pdfprint",cmd:"pdf_print_setting"},type:"POST",async:false,complete:function(res,status){isShowDialog=res.responseText==="true"
}});var config={url:FR.servletURL+"?sessionID="+sessionID,isPopUp:isShowDialog};FR.doURLPDFPrint(config)},doURLPDFPrint:function(config){var url=arguments[0];var isPopUp;if(typeof url=="string"){isPopUp=arguments[1];config=arguments[2]}else{url=config.url;isPopUp=config.isPopUp}var sessionID=__getSessionID__(url,config);if(!supportPDFPrint()){window.open(FR.servletURL+"?op=fr_pdfprint&cmd=native&sessionID="+sessionID,"_blank");return}if(FR.Report.Plugin.Print.pdfURLPrint){FR.Report.Plugin.Print.pdfURLPrint(sessionID);
return}if($PrintDiv==null){$PrintDiv=$("<div>").appendTo("body")}FR.showDialog(FR.i18nText("FR-Engine_Printing"),250,100,FR.i18nText("FR-Engine-Loading_Component")+"...");FR.ajax({url:FR.servletURL,data:{sessionID:sessionID,op:"fr_pdfprint",cmd:"pt_print",frandom:Math.random()},type:"POST",complete:function(res,status){if(status=="success"){var resText=res.responseText;if(resText=="timeout"){FR.closeDialog();return}$PrintDiv[0].innerHTML=res.responseText;$PDFReader=$PrintDiv.find("Object");try{$PDFReader[0].gotoFirstPage();
FR.showDialog(FR.i18nText("FR-Engine_Printing"),250,100,FR.i18nText("FR-Engine-Loading_PDF")+"...");checkPDFPrint.defer(300,this,[sessionID,isPopUp])}catch(e){var content='<div style="text-align:center;">'+FR.i18nText("FR-Engine-Please_Install")+' <a href="http://www.adobe.com/products/reader/" target="_blank">Adobe Reader</a>.</div>';FR.showDialog(FR.i18nText("FR-Engine_Alert"),200,80,content)}}}})},doURLAppletPrint:function(config){var url=arguments[0];var isShowDialog;var pageIndex;var loadJVM;
var printerName;var choosePrinter;var copies;if(typeof url=="string"){isShowDialog=arguments[1];if(isShowDialog==undefined||!(typeof isShowDialog=="boolean")){isShowDialog=isShowAppletPrintSetting()}config=arguments[2]}else{url=config.url;isShowDialog=config.isPopUp;pageIndex=config.pageIndex;loadJVM=config.loadJVM;choosePrinter=config.choosePrinter;printerName=config.printerName;copies=config.copies?config.copies:1;if(isShowDialog==undefined||!(typeof isShowDialog=="boolean")){isShowDialog=isShowAppletPrintSetting()
}}var index=0;var isIE9=FR.Browser.isIE9();if(isShowDialog){var dialog=new FR.Dialog({title:FR.i18nText("FR-Engine_Setting"),confirm:true,resizeable:false,width:450,height:190,contentWidget:{type:"tablelayout",columnSize:[20,100,155,150],rowSize:[10,20,20,20],vgap:10,items:[[{el:$("<div>")}],[{el:$("<div>")},{el:{type:"radio",widgetName:"All_Pages",text:FR.i18nText("HJS-All_Pages"),selected:true,fontSize:12,fontFamily:"SimSun",listeners:[{eventName:FR.Events.STATECHANGE,action:function(){if(this.isSelected()){dialog.getWidgetByName("Specified_Pages").setSelected(false)
}}}]}},{el:$("<div>")},{el:$("<div>")}],[{el:$("<div>")},{el:{type:"radio",widgetName:"Specified_Pages",text:FR.i18nText("HJS-Specified_Pages")+":",fontSize:12,fontFamily:"SimSun",listeners:[{eventName:FR.Events.STATECHANGE,action:function(){if(this.isSelected()){dialog.getWidgetByName("All_Pages").setSelected(false)}}}]}},{el:{type:"text",width:"155px",fontSize:12,fontFamily:"SimSun",widgetName:"CurrentPageNum",value:"1-1"}},{el:{type:"label",fontsize:12,fontFamily:"SimSun",textalign:"right",value:"("+FR.i18nText("FR-Engine_Example")+": 2,5,7-10,12)"}}],[{el:$("<div>")},{el:{type:"label",value:FR.i18nText("FR-Engine_Print_Copy")+": ",fontSize:12,fontFamily:"SimSun",textalign:"left"}},{el:{type:"text",width:"155px",fontSize:12,fontFamily:"SimSun",widgetName:"Copies_txt",value:"1"}}]]},onOK:function(){FR.closeDialog();
if(dialog.getWidgetByName("Specified_Pages").isSelected()){index=dialog.getWidgetByName("CurrentPageNum").getValue()}copies=dialog.getWidgetByName("Copies_txt").getValue();if($appletDiv==null){$appletDiv=$("<div>").appendTo("body")}var sessionID=__getSessionID__(url,config);if(url.indexOf("reportlet")!=-1||url.indexOf("resultlets")!=-1||(config&&config.data&&config.data.reportlets)){if(url.indexOf("?")!=-1){url+="&_="+new Date().getTime()}else{url+="?_="+new Date().getTime()}var sessionID=__getSessionID__(url,config);
url=FR.servletURL+"?sessionID="+sessionID}var isSingleSheet=isSingleSheetFunc(sessionID);var attributes=null;var parameters=null;if(supportCodebase()){attributes={codebase:FR.server+"/jre.exe"};parameters={code:"com.fr.print.PrintApplet",archive:FR.server+appletJarName,url:FR.serverURL+url+"&op=fr_applet&cmd=print",isIE9:isIE9,isShowDialog:isShowDialog||choosePrinter,printerName:printerName,index:index,copies:copies,isSingleSheet:isSingleSheet}}else{attributes={code:"com.fr.print.PrintApplet.class",archive:FR.server+appletJarName,width:0,height:0};
parameters={url:FR.serverURL+url+"&op=fr_applet&cmd=print",isIE9:isIE9,isShowDialog:isShowDialog||choosePrinter,printerName:printerName,index:index,copies:copies,isSingleSheet:isSingleSheet}}deployJava.runApplet(attributes,parameters,"1.4");FR.closeDialog();var isOverFunc=function(){if(!isAppletPrintOver(sessionID)){return}clearInterval(sh);if(_g()){_g().fireEvent("afterappletprint")}$("applet").remove()};var sh=setInterval(isOverFunc,3000)},onCancel:function(){index=0;FR.closeDialog()}});dialog.setVisible(true)
}else{if(pageIndex!=undefined&&(typeof pageIndex=="number")){index=pageIndex}var sessionID=__getSessionID__(url,config);if(url.indexOf("reportlet")!=-1||url.indexOf("resultlets")!=-1||(config&&config.data&&config.data.reportlets)){if(url.indexOf("?")!=-1){url+="&_="+new Date().getTime()}else{url+="?_="+new Date().getTime()}var sessionID=__getSessionID__(url,config);url=FR.servletURL+"?sessionID="+sessionID}var isSingleSheet=isSingleSheetFunc(sessionID);if(supportCodebase()){attributes={codebase:FR.server+"/jre.exe"};
parameters={code:"com.fr.print.PrintApplet",archive:FR.server+appletJarName,url:FR.serverURL+url+"&op=fr_applet&cmd=print",isIE9:isIE9,isShowDialog:isShowDialog,printerName:printerName,index:index,isSingleSheet:isSingleSheet}}else{var attributes={code:"com.fr.print.PrintApplet.class",archive:FR.server+appletJarName,width:0,height:0};var parameters={url:FR.serverURL+url+"&op=fr_applet&cmd=print",isIE9:isIE9,index:index,isShowDialog:isShowDialog,printerName:printerName,isSingleSheet:isSingleSheet,copies:copies}
}deployJava.runApplet(attributes,parameters,"1.4");FR.closeDialog();var isOverFunc=function(){if(!isAppletPrintOver(sessionID)){return}clearInterval(sh);if(_g()){_g().fireEvent("afterappletprint")}$("applet").remove()};var sh=setInterval(isOverFunc,3000)}},doAppletPrint:function(sessionID,choosePrinter,printerName){var url=FR.servletURL+"?sessionID="+sessionID;if(_g().fireEvent("beforeappletprint")===false){return}var config={url:url,choosePrinter:choosePrinter,printerName:printerName};FR.doURLAppletPrint(config)
},doFlashPrint:function(sessionID,currentPageIndex){if(_g().fireEvent("beforeflashprint")===false){return}var fitPaper=isFitPaper();FR.doPrintURL(FR.servletURL+"?sessionID="+sessionID,currentPageIndex,fitPaper)},doPrintURL:function(url,currentPageIndex,fitPaper,config){var config=arguments[3];if(config==undefined){config={url:url,pageIndex:currentPageIndex,isAutoZoom:fitPaper}}FR.doURLFlashPrint(config)},isInstalledFlash:function(){if(this.$i_flash===true){return true}var i_flash=false;var n=navigator;
if(n.plugins&&n.plugins.length){for(var ii=0;ii<n.plugins.length;ii++){if(n.plugins[ii]&&n.plugins[ii].name.indexOf("Shockwave Flash")!=-1){i_flash=true;break}}}else{if(window.ActiveXObject){for(var ii=11;ii>=2;ii--){try{var fl=eval("new ActiveXObject('ShockwaveFlash.ShockwaveFlash."+ii+"');");if(fl){i_flash=true;break}}catch(e){}}}}this.$i_flash=i_flash;return i_flash},flashInstall:function(){var content;FR.ajax({type:"POST",url:FR.servletURL+"?op=flash_print&cmd=get_fp_installpath",complete:function(res,status){if(status=="success"){var path=res.responseText;
if(typeof path=="string"&&path.length>0&&path.length<150){content='<div style="text-align:center;">'+FR.i18nText("FR-Engine-Please_Install")+' <a href="'+path+'">FlashPlayer</a>.<br>'+FR.i18nText("FR-Engine-Restart_Browser_After_Installation")+"</div>"}}if(!content){content='<div style="text-align:center;">'+FR.i18nText("FR-Engine-Please_Install")+' <a href="http://get.adobe.com/flashplayer/" target="_blank">FlashPlayer</a>.<br>'+FR.i18nText("FR-Engine-Restart_Browser_After_Installation")+"</div>"
}FR.showDialog(FR.i18nText("FR-Engine_Alert"),305,75,content)}})},doURLFlashPrint:function(config){var url=arguments[0];var currentPageIndex;var isShowDialog;var isAutoZoom;if(typeof url=="string"){isShowDialog=arguments[1];isAutoZoom=isFitPaper();if(isShowDialog==undefined||!(typeof isShowDialog=="boolean")){isShowDialog=isShowFlashPrintSetting()}config=arguments[2]}else{url=config.url;currentPageIndex=config.pageIndex;isShowDialog=config.isPopUp;isAutoZoom=config.isAutoZoom;if(isShowDialog==undefined||!(typeof isShowDialog=="boolean")){isShowDialog=isShowFlashPrintSetting()
}if(isAutoZoom==undefined||!(typeof isAutoZoom=="boolean")){isAutoZoom=isFitPaper()}}if(FR.isInstalledFlash()===true){if($flashIframe==null){FR.__flash__=function(){FR.doPrintURL.call(this,url,currentPageIndex,isAutoZoom,config);delete FR.__flash__};$flashIframe=$("<iframe>").css({position:"absolute",left:-1000,top:-1000}).attr("src",FR.servletURL+"?op=resource&resource=/com/fr/web/core/printer.html").appendTo("body")}else{var checkVersion=FR.Browser.isIE()&&(FR.Browser.isIE8Before()||!$.support.boxModel);
var fm=checkVersion?$flashIframe[0].contentWindow.flashMovie:$flashIframe[0].contentDocument.flashMovie;if(fm!=null&&fm.doLoadFlash!=null){var servletURL=url.split("?")[0];currentPageIndex=currentPageIndex||1;var sessionID=__getSessionID__(url,config);var isPPAPIPrint=isPrintAsPPAPI();FR.ajax({type:"POST",url:servletURL,data:{sessionID:sessionID,op:"flash_print",cmd:"get_fp_pageinfo"},complete:function(res,status){if(!FR.versionRemind(res.responseText)){return}var message_array=res.responseText.split("?");
var info_array=message_array[0].split(";");if(info_array[0].indexOf("FAILPASS")!=-1){FR.Msg.toast(FR.i18nText("FR-Engine-Flash_Print_Not_Support"));return}var init_page_setting="1-"+info_array[0];var offset=message_array.length>1?message_array[1].split(";"):["0.0","0.0"];var print_fn=function(page_setting,isAutoZoom,paperinfo,isPrintAsImage,isPPAPIPrint){FR.showDialog(FR.i18nText("FR-Engine_Print"),250,100,FR.i18nText("FR-Engine_Start_Print")+"...");fm.doLoadFlash(servletURL,sessionID,FR.string2ints(page_setting).join(","),isAutoZoom,paperinfo,isPrintAsImage,isPPAPIPrint);
$flashIframe=null;if(_g()){_g().fireEvent("afterflashprint")}};if(isShowDialog){var dialog=new FR.Dialog({title:FR.i18nText("FR-Engine_Setting"),confirm:true,resizeable:false,width:450,height:280,contentWidget:{type:"border",width:420,height:240,items:[{region:"north",el:{type:"tablelayout",columnSize:[20,100,155,150],rowSize:[10,20,20,20],height:120,vgap:10,items:[[{el:$("<div>")}],[{el:$("<div>")},{el:{type:"radio",fontSize:12,fontFamily:"SimSun",widgetName:"All_Pages",text:FR.i18nText("HJS-All_Pages"),selected:true,only_be_selected:true,listeners:[{eventName:FR.Events.STATECHANGE,action:function(){if(this.isSelected()){dialog.getWidgetByName("Current_Page").setSelected(false);
dialog.getWidgetByName("Specified_Pages").setSelected(false)}}}]}},{el:$("<div>")},{el:$("<div>")}],[{el:$("<div>")},{el:{type:"radio",fontSize:12,fontFamily:"SimSun",widgetName:"Current_Page",text:FR.i18nText("HJS-Current_Page")+":",only_be_selected:true,listeners:[{eventName:FR.Events.STATECHANGE,action:function(){if(this.isSelected()){dialog.getWidgetByName("All_Pages").setSelected(false);dialog.getWidgetByName("Specified_Pages").setSelected(false)}}}]}},{el:{type:"label",fontsize:12,fontFamily:"SimSun",value:FR.i18nText("FR-Engine-Page_Number")+" "+FR.i18nText("FR-Engine_Is")+" "+currentPageIndex}},{el:$("<div>")}],[{el:$("<div>")},{el:{type:"radio",fontSize:12,fontFamily:"SimSun",widgetName:"Specified_Pages",text:FR.i18nText("HJS-Specified_Pages")+":",only_be_selected:true,listeners:[{eventName:FR.Events.STATECHANGE,action:function(){if(this.isSelected()){dialog.getWidgetByName("All_Pages").setSelected(false);
dialog.getWidgetByName("Current_Page").setSelected(false)}}}]}},{el:{type:"text",fontSize:12,fontFamily:"SimSun",widgetName:"SpecifiedPagesNum",value:"1-2"}},{el:{type:"label",fontsize:12,fontFamily:"SimSun",textalign:"right",value:"("+FR.i18nText("FR-Engine_Example")+" : 2,5,7-10,12)"}}]]}},{region:"center",el:{type:"tablelayout",columnSize:[16,300],rowSize:[20,20],vgap:0,items:[[{el:$("<div>")},{el:{type:"checkbox",fontSize:12,fontFamily:"SimSun",widgetName:"AsImage",text:FR.i18nText("FR-Engine-Print_As_Image"),selected:false,disabled:false}}],[{el:$("<div>")},{el:{type:"checkbox",widgetName:"FitPaperSize",fontSize:12,fontFamily:"SimSun",text:FR.i18nText("Print-Print_To_Fit_Paper_Size"),selected:isFitPaper(),disabled:false}}]]}},{region:"south",el:{type:"tablelayout",columnSize:[20,300],rowSize:[25],height:35,items:[[{el:$("<div>")},{el:{type:"label",fontsize:16,fontFamily:"SimSun",color:"red",value:FR.i18nText("FR-Engine-Print_Set_Printer_Offset")+": X="+offset[0]+"mm Y="+offset[1]+"mm"}}]]}}]},onOK:function(){FR.closeDialog();
if(dialog.getWidgetByName("Current_Page").isSelected()){init_page_setting=currentPageIndex+""}else{if(dialog.getWidgetByName("Specified_Pages").isSelected()){init_page_setting=dialog.getWidgetByName("SpecifiedPagesNum").getValue()}}var printAsImage=dialog.getWidgetByName("AsImage").isSelected();var isFit=dialog.getWidgetByName("FitPaperSize").isSelected();print_fn(init_page_setting,isFit,info_array[1]?info_array[1]:"",printAsImage,isPPAPIPrint)},onCancel:function(){FR.closeDialog()}});dialog.setVisible(true)
}else{print_fn(init_page_setting,isAutoZoom,info_array[1]?info_array[1]:"",false,isPPAPIPrint)}}})}else{FR.flashInstall()}}}else{FR.flashInstall()}}})})(jQuery);
var deployJava={debug:null,firefoxJavaVersion:null,myInterval:null,preInstallJREList:null,returnPage:null,brand:null,locale:null,installType:null,EAInstallEnabled:false,EarlyAccessURL:null,getJavaURL:"http://java.sun.com/webapps/getjava/BrowserRedirect?host=java.com",appleRedirectPage:"http://www.apple.com/support/downloads/",oldMimeType:"application/npruntime-scriptable-plugin;DeploymentToolkit",mimeType:"application/java-deployment-toolkit",launchButtonPNG:"http://java.sun.com/products/jfc/tsc/articles/swing2d/webstart.png",browserName:null,browserName2:null,getJREs:function(){var e=[];
if(deployJava.isPluginInstalled()){var d=deployJava.getPlugin();var a=d.jvms;for(var c=0;c<a.getLength();c++){e[c]=a.get(c).version}}else{var b=deployJava.getBrowser();if(b=="MSIE"){if(deployJava.testUsingActiveX("1.7.0")){e[0]="1.7.0"}else{if(deployJava.testUsingActiveX("1.6.0")){e[0]="1.6.0"}else{if(deployJava.testUsingActiveX("1.5.0")){e[0]="1.5.0"}else{if(deployJava.testUsingActiveX("1.4.2")){e[0]="1.4.2"}else{if(deployJava.testForMSVM()){e[0]="1.1"}}}}}}else{if(b=="Netscape Family"){deployJava.getJPIVersionUsingMimeType();
if(deployJava.firefoxJavaVersion!=null){e[0]=deployJava.firefoxJavaVersion}else{if(deployJava.testUsingMimeTypes("1.7")){e[0]="1.7.0"}else{if(deployJava.testUsingMimeTypes("1.6")){e[0]="1.6.0"}else{if(deployJava.testUsingMimeTypes("1.5")){e[0]="1.5.0"}else{if(deployJava.testUsingMimeTypes("1.4.2")){e[0]="1.4.2"}else{if(deployJava.browserName2=="Safari"){if(deployJava.testUsingPluginsArray("1.7.0")){e[0]="1.7.0"}else{if(deployJava.testUsingPluginsArray("1.6")){e[0]="1.6.0"}else{if(deployJava.testUsingPluginsArray("1.5")){e[0]="1.5.0"
}else{if(deployJava.testUsingPluginsArray("1.4.2")){e[0]="1.4.2"}}}}}}}}}}}}}if(deployJava.debug){for(var c=0;c<e.length;++c){alert("We claim to have detected Java SE "+e[c])}}return e},installJRE:function(b){var a=false;if(deployJava.isPluginInstalled()){if(deployJava.getPlugin().installJRE(b)){deployJava.refresh();if(deployJava.returnPage!=null){document.location=deployJava.returnPage}return true}else{return false}}else{return deployJava.installLatestJRE()}},installLatestJRE:function(){if(deployJava.isPluginInstalled()){if(deployJava.getPlugin().installLatestJRE()){deployJava.refresh();
if(deployJava.returnPage!=null){document.location=deployJava.returnPage}return true}else{return false}}else{var b=deployJava.getBrowser();var a=navigator.platform.toLowerCase();if((deployJava.EAInstallEnabled=="true")&&(a.indexOf("win")!=-1)&&(deployJava.EarlyAccessURL!=null)){deployJava.preInstallJREList=deployJava.getJREs();if(deployJava.returnPage!=null){deployJava.myInterval=setInterval("deployJava.poll()",3000)}location.href=deployJava.EarlyAccessURL;return false}else{if(b=="MSIE"){return deployJava.IEInstall()
}else{if((b=="Netscape Family")&&(a.indexOf("win32")!=-1)){return deployJava.FFInstall()}else{location.href=deployJava.getJavaURL+((deployJava.returnPage!=null)?("&returnPage="+deployJava.returnPage):"")+((deployJava.locale!=null)?("&locale="+deployJava.locale):"")+((deployJava.brand!=null)?("&brand="+deployJava.brand):"")}}return false}}},runApplet:function(b,f,d){if(d=="undefined"||d==null){d="1.1"}var e="^(\\d+)(?:\\.(\\d+)(?:\\.(\\d+)(?:_(\\d+))?)?)?$";var a=d.match(e);if(deployJava.returnPage==null){deployJava.returnPage=document.location
}if(a!=null){var c=deployJava.getBrowser();if((c!="?")&&("Safari"!=deployJava.browserName2)){if(deployJava.versionCheck(d+"+")){deployJava.writeAppletTag(b,f)}else{if(b&&b.codebase){deployJava.writeAppletTag(b,f)}else{if(deployJava.installJRE(d+"+")){deployJava.refresh();location.href=document.location;deployJava.writeAppletTag(b,f)}}}}else{deployJava.writeAppletTag(b,f)}}else{if(deployJava.debug){alert("Invalid minimumVersion argument to runApplet():"+d)}}},writeAppletTag:function(a,f){deployJava.writePluginTag();
if($("applet").length>0){$("body").append($("applet"));return}if($("#AppletPrinter").length>0){$("#AppletPrinter").remove()}if(FR.Browser.isIE()){var h=[];var d="<OBJECT ID='AppletPrinter' name='AppletPrinter' WIDTH='0' HEIGHT='0' CLASSID='clsid:8AD9C840-044E-11D1-B3E9-00805F499D93'";var c=false;for(var e in a){d+=(" "+e+'="'+a[e]+'"')}d+=">";h[h.length]=d;if(f!="undefined"&&f!=null){for(var g in f){d='<param name="'+g+'" value="'+f[g]+'">';h[h.length]=d}}h[h.length]=("</OBJECT>");$("body").append(h.join(""))
}else{var h=[];var d="<applet ";var c=false;for(var e in a){d+=(" "+e+'="'+a[e]+'"');if(e=="code"){c=true}}if(!c){d+=(' code="dummy"')}d+=">";h[h.length]=d;if(f!="undefined"&&f!=null){var b=false;for(var g in f){if(g=="codebase_lookup"){b=true}d='<param name="'+g+'" value="'+f[g]+'">';h[h.length]=d}if(!b){h[h.length]=('<param name="codebase_lookup" value="false">')}}h[h.length]=("</applet>");$("body").append(h.join(""))}},versionCheck:function(h){var c=0;var f="^(\\d+)(?:\\.(\\d+)(?:\\.(\\d+)(?:_(\\d+))?)?)?(\\*|\\+)?$";
var a=h.match(f);if(a!=null){var e=true;var b=[];for(var d=1;d<a.length;++d){if((typeof a[d]=="string")&&(a[d]!="")){b[c]=a[d];c++}}if(b[b.length-1]=="+"){e=false;b.length--}else{if(b[b.length-1]=="*"){b.length--}}var g=deployJava.getJREs();for(var d=0;d<g.length;++d){if(deployJava.compareVersionToPattern(g[d],b,e)){return true}}return false}else{alert("Invalid versionPattern passed to versionCheck: "+h);return false}},isWebStartInstalled:function(d){var c=deployJava.getBrowser();if((c=="?")||("Safari"==deployJava.browserName2)){return true
}if(d=="undefined"||d==null){d="1.4.2"}var b=false;var e="^(\\d+)(?:\\.(\\d+)(?:\\.(\\d+)(?:_(\\d+))?)?)?$";var a=d.match(e);if(a!=null){b=deployJava.versionCheck(d+"+")}else{if(deployJava.debug){alert("Invalid minimumVersion argument to isWebStartInstalled(): "+d)}b=deployJava.versionCheck("1.4.2+")}return b},getJPIVersionUsingMimeType:function(){for(var b=0;b<navigator.mimeTypes.length;++b){var c=navigator.mimeTypes[b].type;var a=c.match(/^application\/x-java-applet;jpi-version=(.*)$/);if(a!=null){deployJava.firefoxJavaVersion=a[1];
if("Opera"!=deployJava.browserName2){break}}}},launchWebStartApplication:function(a){return false},createWebStartLaunchButtonEx:function(c,b){if(deployJava.returnPage==null){deployJava.returnPage=c}var a="javascript:deployJava.launchWebStartApplication('"+c+"');";document.write('<a href="'+a+'" onMouseOver="window.status=\'\'; return true;"><img src="'+deployJava.launchButtonPNG+'" border="0" /></a>')},createWebStartLaunchButton:function(c,b){if(deployJava.returnPage==null){deployJava.returnPage=c
}var a="javascript:if (!deployJava.isWebStartInstalled(&quot;"+b+"&quot;)) {if (deployJava.installLatestJRE()) {if (deployJava.launch(&quot;"+c+"&quot;)) {}}} else {if (deployJava.launch(&quot;"+c+"&quot;)) {}}";document.write('<a href="'+a+'" onMouseOver="window.status=\'\'; return true;"><img src="'+deployJava.launchButtonPNG+'" border="0" /></a>')},launch:function(a){document.location=a;return true},isPluginInstalled:function(){var a=deployJava.getPlugin();if(a&&a.jvms){return true}else{return false
}},isAutoUpdateEnabled:function(){if(deployJava.isPluginInstalled()){return deployJava.getPlugin().isAutoUpdateEnabled()}return false},setAutoUpdateEnabled:function(){if(deployJava.isPluginInstalled()){return deployJava.getPlugin().setAutoUpdateEnabled()}return false},setInstallerType:function(a){deployJava.installType=a;if(deployJava.isPluginInstalled()){return deployJava.getPlugin().setInstallerType(a)}return false},setAdditionalPackages:function(a){if(deployJava.isPluginInstalled()){return deployJava.getPlugin().setAdditionalPackages(a)
}return false},setEarlyAccess:function(a){deployJava.EAInstallEnabled=a},isPlugin2:function(){if(deployJava.isPluginInstalled()){if(deployJava.versionCheck("1.6.0_10+")){try{return deployJava.getPlugin().isPlugin2()}catch(a){}}}return false},allowPlugin:function(){deployJava.getBrowser();var a=("Safari"!=deployJava.browserName2&&"Opera"!=deployJava.browserName2);return a},getPlugin:function(){deployJava.refresh();var a=null;if(deployJava.allowPlugin()){a=document.getElementById("deployJavaPlugin")
}return a},compareVersionToPattern:function(f,b,c){var g="^(\\d+)(?:\\.(\\d+)(?:\\.(\\d+)(?:_(\\d+))?)?)?$";var h=f.match(g);if(h!=null){var e=0;var j=[];for(var d=1;d<h.length;++d){if((typeof h[d]=="string")&&(h[d]!="")){j[e]=h[d];e++}}var a=Math.min(j.length,b.length);if(c){for(var d=0;d<a;++d){if(j[d]!=b[d]){return false}}return true}else{for(var d=0;d<a;++d){if(j[d]<b[d]){return false}else{if(j[d]>b[d]){return true}}}return true}}else{return false}},getBrowser:function(){if(deployJava.browserName==null){var a=navigator.userAgent.toLowerCase();
if(deployJava.debug){alert("userAgent -> "+a)}if(a.indexOf("msie")!=-1){deployJava.browserName="MSIE";deployJava.browserName2="MSIE"}else{if(a.indexOf("firefox")!=-1){deployJava.browserName="Netscape Family";deployJava.browserName2="Firefox"}else{if(a.indexOf("chrome")!=-1){deployJava.browserName="Netscape Family";deployJava.browserName2="Chrome"}else{if(a.indexOf("safari")!=-1){deployJava.browserName="Netscape Family";deployJava.browserName2="Safari"}else{if(a.indexOf("mozilla")!=-1){deployJava.browserName="Netscape Family";
deployJava.browserName2="Other"}else{if(a.indexOf("opera")!=-1){deployJava.browserName="Netscape Family";deployJava.browserName2="Opera"}else{deployJava.browserName="?";deployJava.browserName2="unknown"}}}}}}if(deployJava.debug){alert("Detected browser name:"+deployJava.browserName+", "+deployJava.browserName2)}}return deployJava.browserName},testUsingActiveX:function(a){var c="JavaWebStart.isInstalled."+a+".0";if(!ActiveXObject){if(deployJava.debug){alert("Browser claims to be IE, but no ActiveXObject object?")
}return false}try{return(new ActiveXObject(c)!=null)}catch(b){return false}},testForMSVM:function(){var b="{08B0E5C0-4FCB-11CF-AAA5-00401C608500}";if(typeof oClientCaps!="undefined"){var a=oClientCaps.getComponentVersion(b,"ComponentID");if((a=="")||(a=="5,0,5000,0")){return false}else{return true}}else{return false}},testUsingMimeTypes:function(b){if(!navigator.mimeTypes){if(deployJava.debug){alert("Browser claims to be Netscape family, but no mimeTypes[] array?")}return false}for(var c=0;c<navigator.mimeTypes.length;
++c){s=navigator.mimeTypes[c].type;var a=s.match(/^application\/x-java-applet\x3Bversion=(1\.8|1\.7|1\.6|1\.5|1\.4\.2)$/);if(a!=null){if(deployJava.compareVersions(a[1],b)){return true}}}return false},testUsingPluginsArray:function(b){if((!navigator.plugins)||(!navigator.plugins.length)){return false}var a=navigator.platform.toLowerCase();for(var c=0;c<navigator.plugins.length;++c){s=navigator.plugins[c].description;if(s.search(/^Java Switchable Plug-in (Cocoa)/)!=-1){if(deployJava.compareVersions("1.5.0",b)){return true
}}else{if(s.search(/^Java/)!=-1){if(a.indexOf("win")!=-1){if(deployJava.compareVersions("1.5.0",b)||deployJava.compareVersions("1.6.0",b)){return true}}}}}if(deployJava.compareVersions("1.5.0",b)){return true}return false},IEInstall:function(){location.href=deployJava.getJavaURL+((deployJava.returnPage!=null)?("&returnPage="+deployJava.returnPage):"")+((deployJava.locale!=null)?("&locale="+deployJava.locale):"")+((deployJava.brand!=null)?("&brand="+deployJava.brand):"")+((deployJava.installType!=null)?("&type="+deployJava.installType):"");
return false},done:function(b,a){},FFInstall:function(){location.href=deployJava.getJavaURL+((deployJava.returnPage!=null)?("&returnPage="+deployJava.returnPage):"")+((deployJava.locale!=null)?("&locale="+deployJava.locale):"")+((deployJava.brand!=null)?("&brand="+deployJava.brand):"")+((deployJava.installType!=null)?("&type="+deployJava.installType):"");return false},compareVersions:function(f,g){var d=f.split(".");var c=g.split(".");for(var e=0;e<d.length;++e){d[e]=Number(d[e])}for(var e=0;e<c.length;
++e){c[e]=Number(c[e])}if(d.length===2){d[2]=0}if(d[0]>c[0]){return true}if(d[0]<c[0]){return false}if(d[1]>c[1]){return true}if(d[1]<c[1]){return false}if(d[2]>c[2]){return true}if(d[2]<c[2]){return false}return true},enableAlerts:function(){deployJava.browserName=null;deployJava.debug=true},poll:function(){deployJava.refresh();var a=deployJava.getJREs();if((deployJava.preInstallJREList.length===0)&&(a.length!==0)){clearInterval(deployJava.myInterval);if(deployJava.returnPage!=null){location.href=deployJava.returnPage
}}if((deployJava.preInstallJREList.length!==0)&&(a.length!==0)&&(deployJava.preInstallJREList[0]!=a[0])){clearInterval(deployJava.myInterval);if(deployJava.returnPage!=null){location.href=deployJava.returnPage}}},writePluginTag:function(){if(deployJava.isWritePluginTag){return}deployJava.isWritePluginTag=true;var a=deployJava.getBrowser();if(a=="MSIE"){$("body").append('<object classid="clsid:CAFEEFAC-DEC7-0000-0001-ABCDEFFEDCBA" id="deployJavaPlugin" width="0" height="0"></object>')}else{if(a=="Netscape Family"&&deployJava.allowPlugin()){deployJava.writeEmbedTag()
}}},refresh:function(){navigator.plugins.refresh(false);var a=deployJava.getBrowser();if(a=="Netscape Family"&&deployJava.allowPlugin()){var b=document.getElementById("deployJavaPlugin");if(b==null){deployJava.writeEmbedTag()}}},writeEmbedTag:function(){var a=false;var c;if(navigator.mimeTypes!=null){for(var b=0;b<navigator.mimeTypes.length;b++){if(navigator.mimeTypes[b].type==deployJava.mimeType){if(navigator.mimeTypes[b].enabledPlugin){c=('<embed id="deployJavaPlugin" type="'+deployJava.mimeType+'" hidden="true"/>');
a=true}}}if(!a){for(var b=0;b<navigator.mimeTypes.length;b++){if(navigator.mimeTypes[b].type==deployJava.oldMimeType){if(navigator.mimeTypes[b].enabledPlugin){c=('<embed id="deployJavaPlugin" type="'+deployJava.oldMimeType+'" hidden="true" />')}}}}if(c){$("body").append(c)}}},do_initialize:function(){if(deployJava.locale==null){var b=null;if(b==null){try{b=navigator.userLanguage}catch(a){}}if(b==null){try{b=navigator.systemLanguage}catch(a){}}if(b==null){try{b=navigator.language}catch(a){}}if(b!=null){b.replace("-","_");
deployJava.locale=b}}}};deployJava.do_initialize();
FR.Report=FR.Report||{};FR.Report.Plugin=FR.Report.Plugin||{};FR.Report.Plugin.OpenOnNewTabpane={};FR.Report.Plugin.Panel=FR.Report.Plugin.Panel||{};FR.Report.Plugin.Panel.Events=[];FR.Report.Plugin.Print=FR.Report.Plugin.Print||{};FR.Report.Plugin.Write=FR.Report.Plugin.Write||{};FR.Report.Plugin.Fit=FR.Report.Plugin.Fit||{};
(function ($) {
    $.extend(FR.Msg, {
        toast: function(message){
            var $tabContent = $("div.fs-tab-content");
            if($tabContent.length === 0){
                this.reportToast(message);
            }
            else{
                this.fsToast(message);
            }
        },
        fsToast: function(message){
            var toTop = -50;
            var $dv = $("div.fs-tab-content").children('div.customToast');
            $dv.css({
                opacity: 0
            });
            if ($dv.length === 0) {
                $dv = $("<div/>").addClass('customToast').css({
                    top: toTop
                }).appendTo("div.fs-tab-content");
            }
            $dv.text(message);
            $dv.show();
            $dv.animate({
                top: 0,
                opacity: 0.8
            }, 200);
            (function() {
                $dv.animate({
                    top: toTop,
                    opacity: 0
                }, 200);
            }).defer(3000);
            (function() {
                $dv.hide();
            }).defer(3200);
        },
        reportToast: function(message){
            var toTop = -50;
            var $dv = $("body").children('div.customToast');
            if ($dv.length === 0) {
                $dv = $("<div/>").addClass('customToast').css({
                    top: toTop
                }).appendTo("body");
            }
            $dv.text(message);
            $dv.animate({
                top: 0
            }, 200);
            (function() {
                $dv.animate({
                    top: toTop
                }, 200);
            }).defer(3000);
        }
    });
})(jQuery);
/**
 * Created by eason on 15/8/10.
 */
(function(){

    if (!window.Element) {
        Element = function() {};

        Element.prototype.matches = function(el, selector){
            var parent = el.parentNode
            var match = query(selector, parent)
            var len = match.length

            if (parent) {
                if (len) {
                    while (len--) {
                        if (match[len] == el) {
                            return true
                        }
                    }
                    return false
                } else {
                    return false
                }
            } else {
                var parent = document.createElement('div')
                parent.appendChild(el)
                match = query(selector, parent)
                parent.removeChild(el)
                return !!match.length
            }
        }
    }

    if(!window.CSSStyleDeclaration){
        window.CSSStyleDeclaration = function(){};

        CSSStyleDeclaration.prototype.getProperty = function(a) {
            return this.getAttribute(a);
        };

        CSSStyleDeclaration.prototype.setProperty = function(a,b) {
            return this.setAttribute(a,b);
        };

        CSSStyleDeclaration.prototype.removeProperty = function(a) {
            return this.removeAttribute(a);
        };
    }

    if (!Function.prototype.bind) {
        Function.prototype.bind = function() {
            if (typeof this !== 'function') {
                // closest thing possible to the ECMAScript 5
                // internal IsCallable function
                throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');
            }

            var __method = this;
            var args = Array.prototype.slice.call(arguments);
            var object=args.shift();
            return function() {
                return __method.apply(object,
                    args.concat(Array.prototype.slice.call(arguments)));
            }
        };
    }

    if(!Array.isArray){
        Array.isArray = function(value){
            return Object.prototype.toString.apply(value) === '[object Array]';
        }
    }

    // Production steps of ECMA-262, Edition 5, 15.4.4.19
    // Reference: http://es5.github.io/#x15.4.4.19
    if (!Array.prototype.map) {

        Array.prototype.map = function(callback, thisArg) {

            var T, A, k;

            if (this == null) {
                throw new TypeError(' this is null or not defined');
            }

            // 1. Let O be the result of calling ToObject passing the |this|
            //    value as the argument.
            var O = Object(this);

            // 2. Let lenValue be the result of calling the Get internal
            //    method of O with the argument "length".
            // 3. Let len be ToUint32(lenValue).
            var len = O.length >>> 0;

            // 4. If IsCallable(callback) is false, throw a TypeError exception.
            // See: http://es5.github.com/#x9.11
            if (typeof callback !== 'function') {
                throw new TypeError(callback + ' is not a function');
            }

            // 5. If thisArg was supplied, let T be thisArg; else let T be undefined.
            if (arguments.length > 1) {
                T = thisArg;
            }

            // 6. Let A be a new array created as if by the expression new Array(len)
            //    where Array is the standard built-in constructor with that name and
            //    len is the value of len.
            A = new Array(len);

            // 7. Let k be 0
            k = 0;

            // 8. Repeat, while k < len
            while (k < len) {

                var kValue, mappedValue;

                // a. Let Pk be ToString(k).
                //   This is implicit for LHS operands of the in operator
                // b. Let kPresent be the result of calling the HasProperty internal
                //    method of O with argument Pk.
                //   This step can be combined with c
                // c. If kPresent is true, then
                if (k in O) {

                    // i. Let kValue be the result of calling the Get internal
                    //    method of O with argument Pk.
                    kValue = O[k];

                    // ii. Let mappedValue be the result of calling the Call internal
                    //     method of callback with T as the this value and argument
                    //     list containing kValue, k, and O.
                    mappedValue = callback.call(T, kValue, k, O);

                    // iii. Call the DefineOwnProperty internal method of A with arguments
                    // Pk, Property Descriptor
                    // { Value: mappedValue,
                    //   Writable: true,
                    //   Enumerable: true,
                    //   Configurable: true },
                    // and false.

                    // In browsers that support Object.defineProperty, use the following:
                    // Object.defineProperty(A, k, {
                    //   value: mappedValue,
                    //   writable: true,
                    //   enumerable: true,
                    //   configurable: true
                    // });

                    // For best browser support, use the following:
                    A[k] = mappedValue;
                }
                // d. Increase k by 1.
                k++;
            }

            // 9. return A
            return A;
        };
    }

    if (!Array.prototype.reduce) {
        Array.prototype.reduce = function(callback /*, initialValue*/) {
            'use strict';
            if (this == null) {
                throw new TypeError('Array.prototype.reduce called on null or undefined');
            }
            if (typeof callback !== 'function') {
                throw new TypeError(callback + ' is not a function');
            }
            var t = Object(this), len = t.length >>> 0, k = 0, value;
            if (arguments.length == 2) {
                value = arguments[1];
            } else {
                while (k < len && !(k in t)) {
                    k++;
                }
                if (k >= len) {
                    throw new TypeError('Reduce of empty array with no initial value');
                }
                value = t[k++];
            }
            for (; k < len; k++) {
                if (k in t) {
                    value = callback(value, t[k], k, t);
                }
            }
            return value;
        };
    }

    if (!Array.prototype.filter) {
        Array.prototype.filter = function(fun/*, thisArg*/) {
            'use strict';

            if (this === void 0 || this === null) {
                throw new TypeError();
            }

            var t = Object(this);
            var len = t.length >>> 0;
            if (typeof fun !== 'function') {
                throw new TypeError();
            }

            var res = [];
            var thisArg = arguments.length >= 2 ? arguments[1] : void 0;
            for (var i = 0; i < len; i++) {
                if (i in t) {
                    var val = t[i];

                    // NOTE: Technically this should Object.defineProperty at
                    //       the next index, as push can be affected by
                    //       properties on Object.prototype and Array.prototype.
                    //       But that method's new, and collisions should be
                    //       rare, so use the more-compatible alternative.
                    if (fun.call(thisArg, val, i, t)) {
                        res.push(val);
                    }
                }
            }

            return res;
        };
    }

    if(!Array.prototype.forEach){
        if (!Array.prototype.forEach) {
            Array.prototype.forEach = function(callback, thisArg) {
                var T, k;
                if (this == null) {
                    throw new TypeError(' this is null or not defined');
                }
                var O = Object(this);
                var len = O.length >>> 0;

                if (typeof callback !== "function") {
                    throw new TypeError(callback + ' is not a function');
                }

                if (arguments.length > 1) {
                    T = thisArg;
                }

                k = 0;
                while (k < len) {
                    var kValue;
                    if (k in O) {
                        kValue = O[k];
                        callback.call(T, kValue, k, O);
                    }
                    k++;
                }
            };
        }
    }

    if (!Array.prototype.indexOf) {
        Array.prototype.indexOf = function(searchElement, fromIndex) {

            var k;

            if (this == null) {
                throw new TypeError('"this" is null or not defined');
            }

            var o = Object(this);

            var len = o.length >>> 0;

            if (len === 0) {
                return -1;
            }

            var n = +fromIndex || 0;

            if (Math.abs(n) === Infinity) {
                n = 0;
            }

            if (n >= len) {
                return -1;
            }

            k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);

            while (k < len) {
                if (k in o && o[k] === searchElement) {
                    return k;
                }
                k++;
            }
            return -1;
        };
    }
}());

/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2015 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/master/LICENSE
 */

// vim: ts=4 sts=4 sw=4 expandtab

// Add semicolon to prevent IIFE from being passed as argument to concatenated code.
;

// UMD (Universal Module Definition)
// see https://github.com/umdjs/umd/blob/master/returnExports.js
(function (root, factory) {
    'use strict';

    /* global define, exports, module */
    if (typeof define === 'function' && define.amd) {
        // AMD. Register as an anonymous module.
        define(factory);
    } else if (typeof exports === 'object') {
        // Node. Does not work with strict CommonJS, but
        // only CommonJS-like enviroments that support module.exports,
        // like Node.
        module.exports = factory();
    } else {
        // Browser globals (root is window)
        root.returnExports = factory();
    }
}(this, function () {

    var call = Function.prototype.call;
    var prototypeOfObject = Object.prototype;
    var owns = call.bind(prototypeOfObject.hasOwnProperty);
    var propertyIsEnumerable = call.bind(prototypeOfObject.propertyIsEnumerable);
    var toStr = call.bind(prototypeOfObject.toString);

// If JS engine supports accessors creating shortcuts.
    var defineGetter;
    var defineSetter;
    var lookupGetter;
    var lookupSetter;
    var supportsAccessors = owns(prototypeOfObject, '__defineGetter__');
    if (supportsAccessors) {
        /* eslint-disable no-underscore-dangle */
        defineGetter = call.bind(prototypeOfObject.__defineGetter__);
        defineSetter = call.bind(prototypeOfObject.__defineSetter__);
        lookupGetter = call.bind(prototypeOfObject.__lookupGetter__);
        lookupSetter = call.bind(prototypeOfObject.__lookupSetter__);
        /* eslint-enable no-underscore-dangle */
    }

// ES5 15.2.3.2
// http://es5.github.com/#x15.2.3.2
    if (!Object.getPrototypeOf) {
        // https://github.com/es-shims/es5-shim/issues#issue/2
        // http://ejohn.org/blog/objectgetprototypeof/
        // recommended by fschaefer on github
        //
        // sure, and webreflection says ^_^
        // ... this will nerever possibly return null
        // ... Opera Mini breaks here with infinite loops
        Object.getPrototypeOf = function getPrototypeOf(object) {
            /* eslint-disable no-proto */
            var proto = object.__proto__;
            /* eslint-enable no-proto */
            if (proto || proto === null) {
                return proto;
            } else if (toStr(object.constructor) === '[object Function]') {
                return object.constructor.prototype;
            } else if (!(object instanceof Object)) {
                // Correctly return null for Objects created with `Object.create(null)`
                // (shammed or native) or `{ __proto__: null}`.  Also returns null for
                // cross-realm objects on browsers that lack `__proto__` support (like
                // IE <11), but that's the best we can do.
                return null;
            } else {
                return prototypeOfObject;
            }
        };
    }

// ES5 15.2.3.3
// http://es5.github.com/#x15.2.3.3

    var doesGetOwnPropertyDescriptorWork = function doesGetOwnPropertyDescriptorWork(object) {
        try {
            object.sentinel = 0;
            return Object.getOwnPropertyDescriptor(object, 'sentinel').value === 0;
        } catch (exception) {
            return false;
        }
    };

// check whether getOwnPropertyDescriptor works if it's given. Otherwise, shim partially.
    if (Object.defineProperty) {
        var getOwnPropertyDescriptorWorksOnObject = doesGetOwnPropertyDescriptorWork({});
        var getOwnPropertyDescriptorWorksOnDom = typeof document === 'undefined' ||
            doesGetOwnPropertyDescriptorWork(document.createElement('div'));
        if (!getOwnPropertyDescriptorWorksOnDom || !getOwnPropertyDescriptorWorksOnObject) {
            var getOwnPropertyDescriptorFallback = Object.getOwnPropertyDescriptor;
        }
    }

    if (!Object.getOwnPropertyDescriptor || getOwnPropertyDescriptorFallback) {
        var ERR_NON_OBJECT = 'Object.getOwnPropertyDescriptor called on a non-object: ';

        /* eslint-disable no-proto */
        Object.getOwnPropertyDescriptor = function getOwnPropertyDescriptor(object, property) {
            if ((typeof object !== 'object' && typeof object !== 'function') || object === null) {
                throw new TypeError(ERR_NON_OBJECT + object);
            }

            // make a valiant attempt to use the real getOwnPropertyDescriptor
            // for I8's DOM elements.
            if (getOwnPropertyDescriptorFallback) {
                try {
                    return getOwnPropertyDescriptorFallback.call(Object, object, property);
                } catch (exception) {
                    // try the shim if the real one doesn't work
                }
            }

            var descriptor;

            // If object does not owns property return undefined immediately.
            if (!owns(object, property)) {
                return descriptor;
            }

            // If object has a property then it's for sure `configurable`, and
            // probably `enumerable`. Detect enumerability though.
            descriptor = {
                enumerable: propertyIsEnumerable(object, property),
                configurable: true
            };

            // If JS engine supports accessor properties then property may be a
            // getter or setter.
            if (supportsAccessors) {
                // Unfortunately `__lookupGetter__` will return a getter even
                // if object has own non getter property along with a same named
                // inherited getter. To avoid misbehavior we temporary remove
                // `__proto__` so that `__lookupGetter__` will return getter only
                // if it's owned by an object.
                var prototype = object.__proto__;
                var notPrototypeOfObject = object !== prototypeOfObject;
                // avoid recursion problem, breaking in Opera Mini when
                // Object.getOwnPropertyDescriptor(Object.prototype, 'toString')
                // or any other Object.prototype accessor
                if (notPrototypeOfObject) {
                    object.__proto__ = prototypeOfObject;
                }

                var getter = lookupGetter(object, property);
                var setter = lookupSetter(object, property);

                if (notPrototypeOfObject) {
                    // Once we have getter and setter we can put values back.
                    object.__proto__ = prototype;
                }

                if (getter || setter) {
                    if (getter) {
                        descriptor.get = getter;
                    }
                    if (setter) {
                        descriptor.set = setter;
                    }
                    // If it was accessor property we're done and return here
                    // in order to avoid adding `value` to the descriptor.
                    return descriptor;
                }
            }

            // If we got this far we know that object has an own property that is
            // not an accessor so we set it as a value and return descriptor.
            descriptor.value = object[property];
            descriptor.writable = true;
            return descriptor;
        };
        /* eslint-enable no-proto */
    }

// ES5 15.2.3.4
// http://es5.github.com/#x15.2.3.4
    if (!Object.getOwnPropertyNames) {
        Object.getOwnPropertyNames = function getOwnPropertyNames(object) {
            return Object.keys(object);
        };
    }

// ES5 15.2.3.5
// http://es5.github.com/#x15.2.3.5
    if (!Object.create) {

        // Contributed by Brandon Benvie, October, 2012
        var createEmpty;
        var supportsProto = !({ __proto__: null } instanceof Object);
        // the following produces false positives
        // in Opera Mini => not a reliable check
        // Object.prototype.__proto__ === null

        // Check for document.domain and active x support
        // No need to use active x approach when document.domain is not set
        // see https://github.com/es-shims/es5-shim/issues/150
        // variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346
        /* global ActiveXObject */
        var shouldUseActiveX = function shouldUseActiveX() {
            // return early if document.domain not set
            if (!document.domain) {
                return false;
            }

            try {
                return !!new ActiveXObject('htmlfile');
            } catch (exception) {
                return false;
            }
        };

        // This supports IE8 when document.domain is used
        // see https://github.com/es-shims/es5-shim/issues/150
        // variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346
        var getEmptyViaActiveX = function getEmptyViaActiveX() {
            var empty;
            var xDoc;

            xDoc = new ActiveXObject('htmlfile');

            xDoc.write('<script><\/script>');
            xDoc.close();

            empty = xDoc.parentWindow.Object.prototype;
            xDoc = null;

            return empty;
        };

        // The original implementation using an iframe
        // before the activex approach was added
        // see https://github.com/es-shims/es5-shim/issues/150
        var getEmptyViaIFrame = function getEmptyViaIFrame() {
            var iframe = document.createElement('iframe');
            var parent = document.body || document.documentElement;
            var empty;

            iframe.style.display = 'none';
            parent.appendChild(iframe);
            /* eslint-disable no-script-url */
            iframe.src = 'javascript:';
            /* eslint-enable no-script-url */

            empty = iframe.contentWindow.Object.prototype;
            parent.removeChild(iframe);
            iframe = null;

            return empty;
        };

        /* global document */
        if (supportsProto || typeof document === 'undefined') {
            createEmpty = function () {
                return { __proto__: null };
            };
        } else {
            // In old IE __proto__ can't be used to manually set `null`, nor does
            // any other method exist to make an object that inherits from nothing,
            // aside from Object.prototype itself. Instead, create a new global
            // object and *steal* its Object.prototype and strip it bare. This is
            // used as the prototype to create nullary objects.
            createEmpty = function () {
                // Determine which approach to use
                // see https://github.com/es-shims/es5-shim/issues/150
                var empty = shouldUseActiveX() ? getEmptyViaActiveX() : getEmptyViaIFrame();

                delete empty.constructor;
                delete empty.hasOwnProperty;
                delete empty.propertyIsEnumerable;
                delete empty.isPrototypeOf;
                delete empty.toLocaleString;
                delete empty.toString;
                delete empty.valueOf;

                var Empty = function Empty() {};
                Empty.prototype = empty;
                // short-circuit future calls
                createEmpty = function () {
                    return new Empty();
                };
                return new Empty();
            };
        }

        Object.create = function create(prototype, properties) {

            var object;
            var Type = function Type() {}; // An empty constructor.

            if (prototype === null) {
                object = createEmpty();
            } else {
                if (typeof prototype !== 'object' && typeof prototype !== 'function') {
                    // In the native implementation `parent` can be `null`
                    // OR *any* `instanceof Object`  (Object|Function|Array|RegExp|etc)
                    // Use `typeof` tho, b/c in old IE, DOM elements are not `instanceof Object`
                    // like they are in modern browsers. Using `Object.create` on DOM elements
                    // is...err...probably inappropriate, but the native version allows for it.
                    throw new TypeError('Object prototype may only be an Object or null'); // same msg as Chrome
                }
                Type.prototype = prototype;
                object = new Type();
                // IE has no built-in implementation of `Object.getPrototypeOf`
                // neither `__proto__`, but this manually setting `__proto__` will
                // guarantee that `Object.getPrototypeOf` will work as expected with
                // objects created using `Object.create`
                /* eslint-disable no-proto */
                object.__proto__ = prototype;
                /* eslint-enable no-proto */
            }

            if (properties !== void 0) {
                Object.defineProperties(object, properties);
            }

            return object;
        };
    }

// ES5 15.2.3.6
// http://es5.github.com/#x15.2.3.6

// Patch for WebKit and IE8 standard mode
// Designed by hax <hax.github.com>
// related issue: https://github.com/es-shims/es5-shim/issues#issue/5
// IE8 Reference:
//     http://msdn.microsoft.com/en-us/library/dd282900.aspx
//     http://msdn.microsoft.com/en-us/library/dd229916.aspx
// WebKit Bugs:
//     https://bugs.webkit.org/show_bug.cgi?id=36423

    var doesDefinePropertyWork = function doesDefinePropertyWork(object) {
        try {
            Object.defineProperty(object, 'sentinel', {});
            return 'sentinel' in object;
        } catch (exception) {
            return false;
        }
    };

// check whether defineProperty works if it's given. Otherwise,
// shim partially.
    if (Object.defineProperty) {
        var definePropertyWorksOnObject = doesDefinePropertyWork({});
        var definePropertyWorksOnDom = typeof document === 'undefined' ||
            doesDefinePropertyWork(document.createElement('div'));
        if (!definePropertyWorksOnObject || !definePropertyWorksOnDom) {
            var definePropertyFallback = Object.defineProperty,
                definePropertiesFallback = Object.defineProperties;
        }
    }

    if (!Object.defineProperty || definePropertyFallback) {
        var ERR_NON_OBJECT_DESCRIPTOR = 'Property description must be an object: ';
        var ERR_NON_OBJECT_TARGET = 'Object.defineProperty called on non-object: ';
        var ERR_ACCESSORS_NOT_SUPPORTED = 'getters & setters can not be defined on this javascript engine';

        Object.defineProperty = function defineProperty(object, property, descriptor) {
            if ((typeof object !== 'object' && typeof object !== 'function') || object === null) {
                throw new TypeError(ERR_NON_OBJECT_TARGET + object);
            }
            if ((typeof descriptor !== 'object' && typeof descriptor !== 'function') || descriptor === null) {
                throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR + descriptor);
            }
            // make a valiant attempt to use the real defineProperty
            // for I8's DOM elements.
            if (definePropertyFallback) {
                try {
                    return definePropertyFallback.call(Object, object, property, descriptor);
                } catch (exception) {
                    // try the shim if the real one doesn't work
                }
            }

            // If it's a data property.
            if ('value' in descriptor) {
                // fail silently if 'writable', 'enumerable', or 'configurable'
                // are requested but not supported
                /*
                 // alternate approach:
                 if ( // can't implement these features; allow false but not true
                 ('writable' in descriptor && !descriptor.writable) ||
                 ('enumerable' in descriptor && !descriptor.enumerable) ||
                 ('configurable' in descriptor && !descriptor.configurable)
                 ))
                 throw new RangeError(
                 'This implementation of Object.defineProperty does not support configurable, enumerable, or writable.'
                 );
                 */

                if (supportsAccessors && (lookupGetter(object, property) || lookupSetter(object, property))) {
                    // As accessors are supported only on engines implementing
                    // `__proto__` we can safely override `__proto__` while defining
                    // a property to make sure that we don't hit an inherited
                    // accessor.
                    /* eslint-disable no-proto */
                    var prototype = object.__proto__;
                    object.__proto__ = prototypeOfObject;
                    // Deleting a property anyway since getter / setter may be
                    // defined on object itself.
                    delete object[property];
                    object[property] = descriptor.value;
                    // Setting original `__proto__` back now.
                    object.__proto__ = prototype;
                    /* eslint-enable no-proto */
                } else {
                    object[property] = descriptor.value;
                }
            } else {
                if (!supportsAccessors && (('get' in descriptor) || ('set' in descriptor))) {
                    throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);
                }
                // If we got that far then getters and setters can be defined !!
                if ('get' in descriptor) {
                    defineGetter(object, property, descriptor.get);
                }
                if ('set' in descriptor) {
                    defineSetter(object, property, descriptor.set);
                }
            }
            return object;
        };
    }

// ES5 15.2.3.7
// http://es5.github.com/#x15.2.3.7
    if (!Object.defineProperties || definePropertiesFallback) {
        Object.defineProperties = function defineProperties(object, properties) {
            // make a valiant attempt to use the real defineProperties
            if (definePropertiesFallback) {
                try {
                    return definePropertiesFallback.call(Object, object, properties);
                } catch (exception) {
                    // try the shim if the real one doesn't work
                }
            }

            Object.keys(properties).forEach(function (property) {
                if (property !== '__proto__') {
                    Object.defineProperty(object, property, properties[property]);
                }
            });
            return object;
        };
    }

// ES5 15.2.3.8
// http://es5.github.com/#x15.2.3.8
    if (!Object.seal) {
        Object.seal = function seal(object) {
            if (Object(object) !== object) {
                throw new TypeError('Object.seal can only be called on Objects.');
            }
            // this is misleading and breaks feature-detection, but
            // allows "securable" code to "gracefully" degrade to working
            // but insecure code.
            return object;
        };
    }

// ES5 15.2.3.9
// http://es5.github.com/#x15.2.3.9
    if (!Object.freeze) {
        Object.freeze = function freeze(object) {
            if (Object(object) !== object) {
                throw new TypeError('Object.freeze can only be called on Objects.');
            }
            // this is misleading and breaks feature-detection, but
            // allows "securable" code to "gracefully" degrade to working
            // but insecure code.
            return object;
        };
    }

// detect a Rhino bug and patch it
    try {
        Object.freeze(function () {});
    } catch (exception) {
        Object.freeze = (function (freezeObject) {
            return function freeze(object) {
                if (typeof object === 'function') {
                    return object;
                } else {
                    return freezeObject(object);
                }
            };
        }(Object.freeze));
    }

// ES5 15.2.3.10
// http://es5.github.com/#x15.2.3.10
    if (!Object.preventExtensions) {
        Object.preventExtensions = function preventExtensions(object) {
            if (Object(object) !== object) {
                throw new TypeError('Object.preventExtensions can only be called on Objects.');
            }
            // this is misleading and breaks feature-detection, but
            // allows "securable" code to "gracefully" degrade to working
            // but insecure code.
            return object;
        };
    }

// ES5 15.2.3.11
// http://es5.github.com/#x15.2.3.11
    if (!Object.isSealed) {
        Object.isSealed = function isSealed(object) {
            if (Object(object) !== object) {
                throw new TypeError('Object.isSealed can only be called on Objects.');
            }
            return false;
        };
    }

// ES5 15.2.3.12
// http://es5.github.com/#x15.2.3.12
    if (!Object.isFrozen) {
        Object.isFrozen = function isFrozen(object) {
            if (Object(object) !== object) {
                throw new TypeError('Object.isFrozen can only be called on Objects.');
            }
            return false;
        };
    }

// ES5 15.2.3.13
// http://es5.github.com/#x15.2.3.13
    if (!Object.isExtensible) {
        Object.isExtensible = function isExtensible(object) {
            // 1. If Type(O) is not Object throw a TypeError exception.
            if (Object(object) !== object) {
                throw new TypeError('Object.isExtensible can only be called on Objects.');
            }
            // 2. Return the Boolean value of the [[Extensible]] internal property of O.
            var name = '';
            while (owns(object, name)) {
                name += '?';
            }
            object[name] = true;
            var returnValue = owns(object, name);
            delete object[name];
            return returnValue;
        };
    }

}));
// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
// http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
// ┌────────────────────────────────────────────────────────────┐ \\
// │ Eve 0.4.2 - JavaScript Events Library                      │ \\
// ├────────────────────────────────────────────────────────────┤ \\
// │ Author Dmitry Baranovskiy (http://dmitry.baranovskiy.com/) │ \\
// └────────────────────────────────────────────────────────────┘ \\
(function (glob, factory) {
    if (typeof define === "function" && define.amd) {
        define("eve", function() {
            return factory();
        });
    } else if (typeof exports === "object") {
        module.exports = factory();
    } else {
        glob.eve = factory();
    }
}(this, function(){
    var version = "0.4.2",
        has = "hasOwnProperty",
        separator = /[\.\/]/,
        wildcard = "*",
        fun = function () {},
        numsort = function (a, b) {
            return a - b;
        },
        current_event,
        stop,
        events = {n: {}},
    /*\
     * eve
     [ method ]

     * Fires event with given `name`, given scope and other parameters.

     > Arguments

     - name (string) name of the *event*, dot (`.`) or slash (`/`) separated
     - scope (object) context for the event handlers
     - varargs (...) the rest of arguments will be sent to event handlers

     = (object) array of returned values from the listeners
     \*/
        eve = function (name, scope) {
            name = String(name);
            var e = events,
                oldstop = stop,
                args = Array.prototype.slice.call(arguments, 2),
                listeners = eve.listeners(name),
                z = 0,
                f = false,
                l,
                indexed = [],
                queue = {},
                out = [],
                ce = current_event,
                errors = [];
            current_event = name;
            stop = 0;
            for (var i = 0, ii = listeners.length; i < ii; i++) if ("zIndex" in listeners[i]) {
                indexed.push(listeners[i].zIndex);
                if (listeners[i].zIndex < 0) {
                    queue[listeners[i].zIndex] = listeners[i];
                }
            }
            indexed.sort(numsort);
            while (indexed[z] < 0) {
                l = queue[indexed[z++]];
                out.push(l.apply(scope, args));
                if (stop) {
                    stop = oldstop;
                    return out;
                }
            }
            for (i = 0; i < ii; i++) {
                l = listeners[i];
                if ("zIndex" in l) {
                    if (l.zIndex == indexed[z]) {
                        out.push(l.apply(scope, args));
                        if (stop) {
                            break;
                        }
                        do {
                            z++;
                            l = queue[indexed[z]];
                            l && out.push(l.apply(scope, args));
                            if (stop) {
                                break;
                            }
                        } while (l)
                    } else {
                        queue[l.zIndex] = l;
                    }
                } else {
                    out.push(l.apply(scope, args));
                    if (stop) {
                        break;
                    }
                }
            }
            stop = oldstop;
            current_event = ce;
            return out.length ? out : null;
        };
    // Undocumented. Debug only.
    eve._events = events;
    /*\
     * eve.listeners
     [ method ]

     * Internal method which gives you array of all event handlers that will be triggered by the given `name`.

     > Arguments

     - name (string) name of the event, dot (`.`) or slash (`/`) separated

     = (array) array of event handlers
     \*/
    eve.listeners = function (name) {
        var names = name.split(separator),
            e = events,
            item,
            items,
            k,
            i,
            ii,
            j,
            jj,
            nes,
            es = [e],
            out = [];
        for (i = 0, ii = names.length; i < ii; i++) {
            nes = [];
            for (j = 0, jj = es.length; j < jj; j++) {
                e = es[j].n;
                items = [e[names[i]], e[wildcard]];
                k = 2;
                while (k--) {
                    item = items[k];
                    if (item) {
                        nes.push(item);
                        out = out.concat(item.f || []);
                    }
                }
            }
            es = nes;
        }
        return out;
    };

    /*\
     * eve.on
     [ method ]
     **
     * Binds given event handler with a given name. You can use wildcards “`*`” for the names:
     | eve.on("*.under.*", f);
     | eve("mouse.under.floor"); // triggers f
     * Use @eve to trigger the listener.
     **
     > Arguments
     **
     - name (string) name of the event, dot (`.`) or slash (`/`) separated, with optional wildcards
     - f (function) event handler function
     **
     = (function) returned function accepts a single numeric parameter that represents z-index of the handler. It is an optional feature and only used when you need to ensure that some subset of handlers will be invoked in a given order, despite of the order of assignment.
     > Example:
     | eve.on("mouse", eatIt)(2);
     | eve.on("mouse", scream);
     | eve.on("mouse", catchIt)(1);
     * This will ensure that `catchIt()` function will be called before `eatIt()`.
     *
     * If you want to put your handler before non-indexed handlers, specify a negative value.
     * Note: I assume most of the time you don’t need to worry about z-index, but it’s nice to have this feature “just in case”.
     \*/
    eve.on = function (name, f) {
        name = String(name);
        if (typeof f != "function") {
            return function () {};
        }
        var names = name.split(separator),
            e = events;
        for (var i = 0, ii = names.length; i < ii; i++) {
            e = e.n;
            e = e.hasOwnProperty(names[i]) && e[names[i]] || (e[names[i]] = {n: {}});
        }
        e.f = e.f || [];
        for (i = 0, ii = e.f.length; i < ii; i++) if (e.f[i] == f) {
            return fun;
        }
        e.f.push(f);
        return function (zIndex) {
            if (+zIndex == +zIndex) {
                f.zIndex = +zIndex;
            }
        };
    };
    /*\
     * eve.f
     [ method ]
     **
     * Returns function that will fire given event with optional arguments.
     * Arguments that will be passed to the result function will be also
     * concated to the list of final arguments.
     | el.onclick = eve.f("click", 1, 2);
     | eve.on("click", function (a, b, c) {
     |     console.log(a, b, c); // 1, 2, [event object]
     | });
     > Arguments
     - event (string) event name
     - varargs (…) and any other arguments
     = (function) possible event handler function
     \*/
    eve.f = function (event) {
        var attrs = [].slice.call(arguments, 1);
        return function () {
            eve.apply(null, [event, null].concat(attrs).concat([].slice.call(arguments, 0)));
        };
    };
    /*\
     * eve.stop
     [ method ]
     **
     * Is used inside an event handler to stop the event, preventing any subsequent listeners from firing.
     \*/
    eve.stop = function () {
        stop = 1;
    };
    /*\
     * eve.nt
     [ method ]
     **
     * Could be used inside event handler to figure out actual name of the event.
     **
     > Arguments
     **
     - subname (string) #optional subname of the event
     **
     = (string) name of the event, if `subname` is not specified
     * or
     = (boolean) `true`, if current event’s name contains `subname`
     \*/
    eve.nt = function (subname) {
        if (subname) {
            return new RegExp("(?:\\.|\\/|^)" + subname + "(?:\\.|\\/|$)").test(current_event);
        }
        return current_event;
    };
    /*\
     * eve.nts
     [ method ]
     **
     * Could be used inside event handler to figure out actual name of the event.
     **
     **
     = (array) names of the event
     \*/
    eve.nts = function () {
        return current_event.split(separator);
    };
    /*\
     * eve.off
     [ method ]
     **
     * Removes given function from the list of event listeners assigned to given name.
     * If no arguments specified all the events will be cleared.
     **
     > Arguments
     **
     - name (string) name of the event, dot (`.`) or slash (`/`) separated, with optional wildcards
     - f (function) event handler function
     \*/
    /*\
     * eve.unbind
     [ method ]
     **
     * See @eve.off
     \*/
    eve.off = eve.unbind = function (name, f) {
        if (!name) {
            eve._events = events = {n: {}};
            return;
        }
        var names = name.split(separator),
            e,
            key,
            splice,
            i, ii, j, jj,
            cur = [events];
        for (i = 0, ii = names.length; i < ii; i++) {
            for (j = 0; j < cur.length; j += splice.length - 2) {
                splice = [j, 1];
                e = cur[j].n;
                if (names[i] != wildcard) {
                    if (e[names[i]]) {
                        splice.push(e[names[i]]);
                    }
                } else {
                    for (key in e) if (e[has](key)) {
                        splice.push(e[key]);
                    }
                }
                cur.splice.apply(cur, splice);
            }
        }
        for (i = 0, ii = cur.length; i < ii; i++) {
            e = cur[i];
            while (e.n) {
                if (f) {
                    if (e.f) {
                        for (j = 0, jj = e.f.length; j < jj; j++) if (e.f[j] == f) {
                            e.f.splice(j, 1);
                            break;
                        }
                        !e.f.length && delete e.f;
                    }
                    for (key in e.n) if (e.n[has](key) && e.n[key].f) {
                        var funcs = e.n[key].f;
                        for (j = 0, jj = funcs.length; j < jj; j++) if (funcs[j] == f) {
                            funcs.splice(j, 1);
                            break;
                        }
                        !funcs.length && delete e.n[key].f;
                    }
                } else {
                    delete e.f;
                    for (key in e.n) if (e.n[has](key) && e.n[key].f) {
                        delete e.n[key].f;
                    }
                }
                e = e.n;
            }
        }
    };
    /*\
     * eve.once
     [ method ]
     **
     * Binds given event handler with a given name to only run once then unbind itself.
     | eve.once("login", f);
     | eve("login"); // triggers f
     | eve("login"); // no listeners
     * Use @eve to trigger the listener.
     **
     > Arguments
     **
     - name (string) name of the event, dot (`.`) or slash (`/`) separated, with optional wildcards
     - f (function) event handler function
     **
     = (function) same return function as @eve.on
     \*/
    eve.once = function (name, f) {
        var f2 = function () {
            eve.unbind(name, f2);
            return f.apply(this, arguments);
        };
        return eve.on(name, f2);
    };
    /*\
     * eve.version
     [ property (string) ]
     **
     * Current version of the library.
     \*/
    eve.version = version;
    eve.toString = function () {
        return "You are running Eve " + version;
    };

    return eve;
}));

// ┌────────────────────────────────────────────────────────────────────┐ \\
// │ Rapha?l 2.1.4 - JavaScript Vector Library                      │ \\
// ├────────────────────────────────────────────────────────────────────┤ \\
// │ Core Module                                                        │ \\
// ├────────────────────────────────────────────────────────────────────┤ \\
// │ Licensed under the MIT (http://raphaeljs.com/license.html) license.│ \\
// └────────────────────────────────────────────────────────────────────┘ \\

(function (glob, factory) {
    if (typeof define === "function" && define.amd) {
        define("raphael.core", ["eve"], function(eve) {
            return factory(eve);
        });
    } else if (typeof exports === "object") {
        module.exports = factory(require("eve"));
    } else {
        glob.Raphael = factory(glob.eve);
    }
}(this, function (eve) {
    /*\
     * Raphael
     [ method ]
     **
     * Creates a canvas object on which to draw.
     * You must do this first, as all future calls to drawing methods
     * from this instance will be bound to this canvas.
     > Parameters
     **
     - container (HTMLElement|string) DOM element or its ID which is going to be a parent for drawing surface
     - width (number)
     - height (number)
     - callback (function) #optional callback function which is going to be executed in the context of newly created paper
     * or
     - x (number)
     - y (number)
     - width (number)
     - height (number)
     - callback (function) #optional callback function which is going to be executed in the context of newly created paper
     * or
     - all (array) (first 3 or 4 elements in the array are equal to [containerID, width, height] or [x, y, width, height]. The rest are element descriptions in format {type: type, <attributes>}). See @Paper.add.
     - callback (function) #optional callback function which is going to be executed in the context of newly created paper
     * or
     - onReadyCallback (function) function that is going to be called on DOM ready event. You can also subscribe to this event via Eve’s “DOMLoad” event. In this case method returns `undefined`.
     = (object) @Paper
     > Usage
     | // Each of the following examples create a canvas
     | // that is 320px wide by 200px high.
     | // Canvas is created at the viewport’s 10,50 coordinate.
     | var paper = Raphael(10, 50, 320, 200);
     | // Canvas is created at the top left corner of the #notepad element
     | // (or its top right corner in dir="rtl" elements)
     | var paper = Raphael(document.getElementById("notepad"), 320, 200);
     | // Same as above
     | var paper = Raphael("notepad", 320, 200);
     | // Image dump
     | var set = Raphael(["notepad", 320, 200, {
     |     type: "rect",
     |     x: 10,
     |     y: 10,
     |     width: 25,
     |     height: 25,
     |     stroke: "#f00"
     | }, {
     |     type: "text",
     |     x: 30,
     |     y: 40,
     |     text: "Dump"
     | }]);
     \*/
    function R(first) {
        if (R.is(first, "function")) {
            return loaded ? first() : eve.on("raphael.DOMload", first);
        } else if (R.is(first, array)) {
            return R._engine.create[apply](R, first.splice(0, 3 + R.is(first[0], nu))).add(first);
        } else {
            var args = Array.prototype.slice.call(arguments, 0);
            if (R.is(args[args.length - 1], "function")) {
                var f = args.pop();
                return loaded ? f.call(R._engine.create[apply](R, args)) : eve.on("raphael.DOMload", function () {
                    f.call(R._engine.create[apply](R, args));
                });
            } else {
                return R._engine.create[apply](R, arguments);
            }
        }
    }
    R.version = "2.1.4";
    R.eve = eve;
    var loaded,
        separator = /[, ]+/,
        elements = {circle: 1, rect: 1, path: 1, ellipse: 1, text: 1, image: 1},
        formatrg = /\{(\d+)\}/g,
        proto = "prototype",
        has = "hasOwnProperty",
        g = {
            doc: document,
            win: window
        },
        oldRaphael = {
            was: Object.prototype[has].call(g.win, "Raphael"),
            is: g.win.Raphael
        },
        Paper = function () {
            /*\
             * Paper.ca
             [ property (object) ]
             **
             * Shortcut for @Paper.customAttributes
             \*/
            /*\
             * Paper.customAttributes
             [ property (object) ]
             **
             * If you have a set of attributes that you would like to represent
             * as a function of some number you can do it easily with custom attributes:
             > Usage
             | paper.customAttributes.hue = function (num) {
             |     num = num % 1;
             |     return {fill: "hsb(" + num + ", 0.75, 1)"};
             | };
             | // Custom attribute “hue” will change fill
             | // to be given hue with fixed saturation and brightness.
             | // Now you can use it like this:
             | var c = paper.circle(10, 10, 10).attr({hue: .45});
             | // or even like this:
             | c.animate({hue: 1}, 1e3);
             |
             | // You could also create custom attribute
             | // with multiple parameters:
             | paper.customAttributes.hsb = function (h, s, b) {
             |     return {fill: "hsb(" + [h, s, b].join(",") + ")"};
             | };
             | c.attr({hsb: "0.5 .8 1"});
             | c.animate({hsb: [1, 0, 0.5]}, 1e3);
             \*/
            this.ca = this.customAttributes = {};
        },
        paperproto,
        appendChild = "appendChild",
        apply = "apply",
        concat = "concat",
        supportsTouch = ('ontouchstart' in g.win) || g.win.DocumentTouch && g.doc instanceof DocumentTouch, //taken from Modernizr touch test
        E = "",
        S = " ",
        Str = String,
        split = "split",
        events = "click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[split](S),
        touchMap = {
            mousedown: "touchstart",
            mousemove: "touchmove",
            mouseup: "touchend"
        },
        lowerCase = Str.prototype.toLowerCase,
        math = Math,
        mmax = math.max,
        mmin = math.min,
        abs = math.abs,
        pow = math.pow,
        PI = math.PI,
        nu = "number",
        string = "string",
        array = "array",
        toString = "toString",
        fillString = "fill",
        objectToString = Object.prototype.toString,
        paper = {},
        push = "push",
        ISURL = R._ISURL = /^url\(['"]?(.+?)['"]?\)$/i,
        colourRegExp = /^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,
        isnan = {"NaN": 1, "Infinity": 1, "-Infinity": 1},
        bezierrg = /^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,
        round = math.round,
        setAttribute = "setAttribute",
        toFloat = parseFloat,
        toInt = parseInt,
        upperCase = Str.prototype.toUpperCase,
        availableAttrs = R._availableAttrs = {
            "arrow-end": "none",
            "arrow-start": "none",
            blur: 0,
            "clip-rect": "0 0 1e9 1e9",
            cursor: "default",
            cx: 0,
            cy: 0,
            fill: "#fff",
            "fill-opacity": 1,
            font: '10px "Arial"',
            "font-family": '"Arial"',
            "font-size": "10",
            "font-style": "normal",
            "font-weight": 400,
            gradient: 0,
            height: 0,
            href: "http://raphaeljs.com/",
            "letter-spacing": 0,
            opacity: 1,
            path: "M0,0",
            r: 0,
            rx: 0,
            ry: 0,
            src: "",
            stroke: "#000",
            "stroke-dasharray": "",
            "stroke-linecap": "butt",
            "stroke-linejoin": "butt",
            "stroke-miterlimit": 0,
            "stroke-opacity": 1,
            "stroke-width": 1,
            target: "_blank",
            "text-anchor": "middle",
            title: "Raphael",
            transform: "",
            width: 0,
            x: 0,
            y: 0
        },
        availableAnimAttrs = R._availableAnimAttrs = {
            blur: nu,
            "clip-rect": "csv",
            cx: nu,
            cy: nu,
            fill: "colour",
            "fill-opacity": nu,
            "font-size": nu,
            height: nu,
            opacity: nu,
            path: "path",
            r: nu,
            rx: nu,
            ry: nu,
            stroke: "colour",
            "stroke-opacity": nu,
            "stroke-width": nu,
            transform: "transform",
            width: nu,
            x: nu,
            y: nu
        },
        whitespace = /[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]/g,
        commaSpaces = /[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,
        hsrg = {hs: 1, rg: 1},
        p2s = /,?([achlmqrstvxz]),?/gi,
        pathCommand = /([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,
        tCommand = /([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,
        pathValues = /(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/ig,
        radial_gradient = R._radial_gradient = /^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,
        eldata = {},
        sortByKey = function (a, b) {
            return a.key - b.key;
        },
        sortByNumber = function (a, b) {
            return toFloat(a) - toFloat(b);
        },
        fun = function () {},
        pipe = function (x) {
            return x;
        },
        rectPath = R._rectPath = function (x, y, w, h, r) {
            if (r) {
                return [["M", x + r, y], ["l", w - r * 2, 0], ["a", r, r, 0, 0, 1, r, r], ["l", 0, h - r * 2], ["a", r, r, 0, 0, 1, -r, r], ["l", r * 2 - w, 0], ["a", r, r, 0, 0, 1, -r, -r], ["l", 0, r * 2 - h], ["a", r, r, 0, 0, 1, r, -r], ["z"]];
            }
            return [["M", x, y], ["l", w, 0], ["l", 0, h], ["l", -w, 0], ["z"]];
        },
        ellipsePath = function (x, y, rx, ry) {
            if (ry == null) {
                ry = rx;
            }
            return [["M", x, y], ["m", 0, -ry], ["a", rx, ry, 0, 1, 1, 0, 2 * ry], ["a", rx, ry, 0, 1, 1, 0, -2 * ry], ["z"]];
        },
        getPath = R._getPath = {
            path: function (el) {
                return el.attr("path");
            },
            circle: function (el) {
                var a = el.attrs;
                return ellipsePath(a.cx, a.cy, a.r);
            },
            ellipse: function (el) {
                var a = el.attrs;
                return ellipsePath(a.cx, a.cy, a.rx, a.ry);
            },
            rect: function (el) {
                var a = el.attrs;
                return rectPath(a.x, a.y, a.width, a.height, a.r);
            },
            image: function (el) {
                var a = el.attrs;
                return rectPath(a.x, a.y, a.width, a.height);
            },
            text: function (el) {
                var bbox = el._getBBox();
                return rectPath(bbox.x, bbox.y, bbox.width, bbox.height);
            },
            set : function(el) {
                var bbox = el._getBBox();
                return rectPath(bbox.x, bbox.y, bbox.width, bbox.height);
            }
        },
    /*\
     * Raphael.mapPath
     [ method ]
     **
     * Transform the path string with given matrix.
     > Parameters
     - path (string) path string
     - matrix (object) see @Matrix
     = (string) transformed path string
     \*/
        mapPath = R.mapPath = function (path, matrix) {
            if (!matrix) {
                return path;
            }
            var x, y, i, j, ii, jj, pathi;
            path = path2curve(path);
            for (i = 0, ii = path.length; i < ii; i++) {
                pathi = path[i];
                for (j = 1, jj = pathi.length; j < jj; j += 2) {
                    x = matrix.x(pathi[j], pathi[j + 1]);
                    y = matrix.y(pathi[j], pathi[j + 1]);
                    pathi[j] = x;
                    pathi[j + 1] = y;
                }
            }
            return path;
        };

    R._g = g;
    /*\
     * Raphael.type
     [ property (string) ]
     **
     * Can be “SVG”, “VML” or empty, depending on browser support.
     \*/
    R.type = (g.win.SVGAngle || g.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure", "1.1") ? "SVG" : "VML");
    if (R.type == "VML") {
        var d = g.doc.createElement("div"),
            b;
        d.innerHTML = '<v:shape adj="1"/>';
        b = d.firstChild;
        b.style.behavior = "url(#default#VML)";
        if (!(b && typeof b.adj == "object")) {
            return (R.type = E);
        }
        d = null;
    }
    /*\
     * Raphael.svg
     [ property (boolean) ]
     **
     * `true` if browser supports SVG.
     \*/
    /*\
     * Raphael.vml
     [ property (boolean) ]
     **
     * `true` if browser supports VML.
     \*/
    R.svg = !(R.vml = R.type == "VML");
    R._Paper = Paper;
    /*\
     * Raphael.fn
     [ property (object) ]
     **
     * You can add your own method to the canvas. For example if you want to draw a pie chart,
     * you can create your own pie chart function and ship it as a Rapha?l plugin. To do this
     * you need to extend the `Raphael.fn` object. You should modify the `fn` object before a
     * Rapha?l instance is created, otherwise it will take no effect. Please note that the
     * ability for namespaced plugins was removed in Raphael 2.0. It is up to the plugin to
     * ensure any namespacing ensures proper context.
     > Usage
     | Raphael.fn.arrow = function (x1, y1, x2, y2, size) {
     |     return this.path( ... );
     | };
     | // or create namespace
     | Raphael.fn.mystuff = {
     |     arrow: function () {…},
     |     star: function () {…},
     |     // etc…
     | };
     | var paper = Raphael(10, 10, 630, 480);
     | // then use it
     | paper.arrow(10, 10, 30, 30, 5).attr({fill: "#f00"});
     | paper.mystuff.arrow();
     | paper.mystuff.star();
     \*/
    R.fn = paperproto = Paper.prototype = R.prototype;
    R._id = 0;
    R._oid = 0;
    /*\
     * Raphael.is
     [ method ]
     **
     * Handful of replacements for `typeof` operator.
     > Parameters
     - o (…) any object or primitive
     - type (string) name of the type, i.e. “string”, “function”, “number”, etc.
     = (boolean) is given value is of given type
     \*/
    R.is = function (o, type) {
        type = lowerCase.call(type);
        if (type == "finite") {
            return !isnan[has](+o);
        }
        if (type == "array") {
            return o instanceof Array;
        }
        return  (type == "null" && o === null) ||
            (type == typeof o && o !== null) ||
            (type == "object" && o === Object(o)) ||
            (type == "array" && Array.isArray && Array.isArray(o)) ||
            objectToString.call(o).slice(8, -1).toLowerCase() == type;
    };

    function clone(obj) {
        if (typeof obj == "function" || Object(obj) !== obj) {
            return obj;
        }
        var res = new obj.constructor;
        for (var key in obj) if (obj[has](key)) {
            res[key] = clone(obj[key]);
        }
        return res;
    }

    /*\
     * Raphael.angle
     [ method ]
     **
     * Returns angle between two or three points
     > Parameters
     - x1 (number) x coord of first point
     - y1 (number) y coord of first point
     - x2 (number) x coord of second point
     - y2 (number) y coord of second point
     - x3 (number) #optional x coord of third point
     - y3 (number) #optional y coord of third point
     = (number) angle in degrees.
     \*/
    R.angle = function (x1, y1, x2, y2, x3, y3) {
        if (x3 == null) {
            var x = x1 - x2,
                y = y1 - y2;
            if (!x && !y) {
                return 0;
            }
            return (180 + math.atan2(-y, -x) * 180 / PI + 360) % 360;
        } else {
            return R.angle(x1, y1, x3, y3) - R.angle(x2, y2, x3, y3);
        }
    };
    /*\
     * Raphael.rad
     [ method ]
     **
     * Transform angle to radians
     > Parameters
     - deg (number) angle in degrees
     = (number) angle in radians.
     \*/
    R.rad = function (deg) {
        return deg % 360 * PI / 180;
    };
    /*\
     * Raphael.deg
     [ method ]
     **
     * Transform angle to degrees
     > Parameters
     - rad (number) angle in radians
     = (number) angle in degrees.
     \*/
    R.deg = function (rad) {
        return Math.round ((rad * 180 / PI% 360)* 1000) / 1000;
    };
    /*\
     * Raphael.snapTo
     [ method ]
     **
     * Snaps given value to given grid.
     > Parameters
     - values (array|number) given array of values or step of the grid
     - value (number) value to adjust
     - tolerance (number) #optional tolerance for snapping. Default is `10`.
     = (number) adjusted value.
     \*/
    R.snapTo = function (values, value, tolerance) {
        tolerance = R.is(tolerance, "finite") ? tolerance : 10;
        if (R.is(values, array)) {
            var i = values.length;
            while (i--) if (abs(values[i] - value) <= tolerance) {
                return values[i];
            }
        } else {
            values = +values;
            var rem = value % values;
            if (rem < tolerance) {
                return value - rem;
            }
            if (rem > values - tolerance) {
                return value - rem + values;
            }
        }
        return value;
    };

    /*\
     * Raphael.createUUID
     [ method ]
     **
     * Returns RFC4122, version 4 ID
     \*/
    var createUUID = R.createUUID = (function (uuidRegEx, uuidReplacer) {
        return function () {
            return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(uuidRegEx, uuidReplacer).toUpperCase();
        };
    })(/[xy]/g, function (c) {
        var r = math.random() * 16 | 0,
            v = c == "x" ? r : (r & 3 | 8);
        return v.toString(16);
    });

    /*\
     * Raphael.setWindow
     [ method ]
     **
     * Used when you need to draw in `&lt;iframe>`. Switched window to the iframe one.
     > Parameters
     - newwin (window) new window object
     \*/
    R.setWindow = function (newwin) {
        eve("raphael.setWindow", R, g.win, newwin);
        g.win = newwin;
        g.doc = g.win.document;
        if (R._engine.initWin) {
            R._engine.initWin(g.win);
        }
    };
    var toHex = function (color) {
            if (R.vml) {
                // http://dean.edwards.name/weblog/2009/10/convert-any-colour-value-to-hex-in-msie/
                var trim = /^\s+|\s+$/g;
                var bod;
                try {
                    var docum = new ActiveXObject("htmlfile");
                    docum.write("<body>");
                    docum.close();
                    bod = docum.body;
                } catch(e) {
                    bod = createPopup().document.body;
                }
                var range = bod.createTextRange();
                toHex = cacher(function (color) {
                    try {
                        bod.style.color = Str(color).replace(trim, E);
                        var value = range.queryCommandValue("ForeColor");
                        value = ((value & 255) << 16) | (value & 65280) | ((value & 16711680) >>> 16);
                        return "#" + ("000000" + value.toString(16)).slice(-6);
                    } catch(e) {
                        return "none";
                    }
                });
            } else {
                var i = g.doc.createElement("i");
                i.title = "Rapha\xebl Colour Picker";
                i.style.display = "none";
                g.doc.body.appendChild(i);
                toHex = cacher(function (color) {
                    i.style.color = color;
                    return g.doc.defaultView.getComputedStyle(i, E).getPropertyValue("color");
                });
            }
            return toHex(color);
        },
        hsbtoString = function () {
            return "hsb(" + [this.h, this.s, this.b] + ")";
        },
        hsltoString = function () {
            return "hsl(" + [this.h, this.s, this.l] + ")";
        },
        rgbtoString = function () {
            return this.hex;
        },
        prepareRGB = function (r, g, b) {
            if (g == null && R.is(r, "object") && "r" in r && "g" in r && "b" in r) {
                b = r.b;
                g = r.g;
                r = r.r;
            }
            if (g == null && R.is(r, string)) {
                var clr = R.getRGB(r);
                r = clr.r;
                g = clr.g;
                b = clr.b;
            }
            if (r > 1 || g > 1 || b > 1) {
                r /= 255;
                g /= 255;
                b /= 255;
            }

            return [r, g, b];
        },
        packageRGB = function (r, g, b, o) {
            r *= 255;
            g *= 255;
            b *= 255;
            var rgb = {
                r: r,
                g: g,
                b: b,
                hex: R.rgb(r, g, b),
                toString: rgbtoString
            };
            R.is(o, "finite") && (rgb.opacity = o);
            return rgb;
        };

    /*\
     * Raphael.color
     [ method ]
     **
     * Parses the color string and returns object with all values for the given color.
     > Parameters
     - clr (string) color string in one of the supported formats (see @Raphael.getRGB)
     = (object) Combined RGB & HSB object in format:
     o {
     o     r (number) red,
     o     g (number) green,
     o     b (number) blue,
     o     hex (string) color in HTML/CSS format: #??????,
     o     error (boolean) `true` if string can’t be parsed,
     o     h (number) hue,
     o     s (number) saturation,
     o     v (number) value (brightness),
     o     l (number) lightness
     o }
     \*/
    R.color = function (clr) {
        var rgb;
        if (R.is(clr, "object") && "h" in clr && "s" in clr && "b" in clr) {
            rgb = R.hsb2rgb(clr);
            clr.r = rgb.r;
            clr.g = rgb.g;
            clr.b = rgb.b;
            clr.hex = rgb.hex;
        } else if (R.is(clr, "object") && "h" in clr && "s" in clr && "l" in clr) {
            rgb = R.hsl2rgb(clr);
            clr.r = rgb.r;
            clr.g = rgb.g;
            clr.b = rgb.b;
            clr.hex = rgb.hex;
        } else {
            if (R.is(clr, "string")) {
                clr = R.getRGB(clr);
            }
            if (R.is(clr, "object") && "r" in clr && "g" in clr && "b" in clr) {
                rgb = R.rgb2hsl(clr);
                clr.h = rgb.h;
                clr.s = rgb.s;
                clr.l = rgb.l;
                rgb = R.rgb2hsb(clr);
                clr.v = rgb.b;
            } else {
                clr = {hex: "none"};
                clr.r = clr.g = clr.b = clr.h = clr.s = clr.v = clr.l = -1;
            }
        }
        clr.toString = rgbtoString;
        return clr;
    };
    /*\
     * Raphael.hsb2rgb
     [ method ]
     **
     * Converts HSB values to RGB object.
     > Parameters
     - h (number) hue
     - s (number) saturation
     - v (number) value or brightness
     = (object) RGB object in format:
     o {
     o     r (number) red,
     o     g (number) green,
     o     b (number) blue,
     o     hex (string) color in HTML/CSS format: #??????
     o }
     \*/
    R.hsb2rgb = function (h, s, v, o) {
        if (this.is(h, "object") && "h" in h && "s" in h && "b" in h) {
            v = h.b;
            s = h.s;
            o = h.o;
            h = h.h;
        }
        h *= 360;
        var R, G, B, X, C;
        h = (h % 360) / 60;
        C = v * s;
        X = C * (1 - abs(h % 2 - 1));
        R = G = B = v - C;

        h = ~~h;
        R += [C, X, 0, 0, X, C][h];
        G += [X, C, C, X, 0, 0][h];
        B += [0, 0, X, C, C, X][h];
        return packageRGB(R, G, B, o);
    };
    /*\
     * Raphael.hsl2rgb
     [ method ]
     **
     * Converts HSL values to RGB object.
     > Parameters
     - h (number) hue
     - s (number) saturation
     - l (number) luminosity
     = (object) RGB object in format:
     o {
     o     r (number) red,
     o     g (number) green,
     o     b (number) blue,
     o     hex (string) color in HTML/CSS format: #??????
     o }
     \*/
    R.hsl2rgb = function (h, s, l, o) {
        if (this.is(h, "object") && "h" in h && "s" in h && "l" in h) {
            l = h.l;
            s = h.s;
            h = h.h;
        }
        if (h > 1 || s > 1 || l > 1) {
            h /= 360;
            s /= 100;
            l /= 100;
        }
        h *= 360;
        var R, G, B, X, C;
        h = (h % 360) / 60;
        C = 2 * s * (l < .5 ? l : 1 - l);
        X = C * (1 - abs(h % 2 - 1));
        R = G = B = l - C / 2;

        h = ~~h;
        R += [C, X, 0, 0, X, C][h];
        G += [X, C, C, X, 0, 0][h];
        B += [0, 0, X, C, C, X][h];
        return packageRGB(R, G, B, o);
    };
    /*\
     * Raphael.rgb2hsb
     [ method ]
     **
     * Converts RGB values to HSB object.
     > Parameters
     - r (number) red
     - g (number) green
     - b (number) blue
     = (object) HSB object in format:
     o {
     o     h (number) hue
     o     s (number) saturation
     o     b (number) brightness
     o }
     \*/
    R.rgb2hsb = function (r, g, b) {
        b = prepareRGB(r, g, b);
        r = b[0];
        g = b[1];
        b = b[2];

        var H, S, V, C;
        V = mmax(r, g, b);
        C = V - mmin(r, g, b);
        H = (C == 0 ? null :
                V == r ? (g - b) / C :
                    V == g ? (b - r) / C + 2 :
                    (r - g) / C + 4
        );
        H = ((H + 360) % 6) * 60 / 360;
        S = C == 0 ? 0 : C / V;
        return {h: H, s: S, b: V, toString: hsbtoString};
    };
    /*\
     * Raphael.rgb2hsl
     [ method ]
     **
     * Converts RGB values to HSL object.
     > Parameters
     - r (number) red
     - g (number) green
     - b (number) blue
     = (object) HSL object in format:
     o {
     o     h (number) hue
     o     s (number) saturation
     o     l (number) luminosity
     o }
     \*/
    R.rgb2hsl = function (r, g, b) {
        b = prepareRGB(r, g, b);
        r = b[0];
        g = b[1];
        b = b[2];

        var H, S, L, M, m, C;
        M = mmax(r, g, b);
        m = mmin(r, g, b);
        C = M - m;
        H = (C == 0 ? null :
            M == r ? (g - b) / C :
                M == g ? (b - r) / C + 2 :
                (r - g) / C + 4);
        H = ((H + 360) % 6) * 60 / 360;
        L = (M + m) / 2;
        S = (C == 0 ? 0 :
            L < .5 ? C / (2 * L) :
            C / (2 - 2 * L));
        return {h: H, s: S, l: L, toString: hsltoString};
    };
    R._path2string = function () {
        return this.join(",").replace(p2s, "$1");
    };
    function repush(array, item) {
        for (var i = 0, ii = array.length; i < ii; i++) if (array[i] === item) {
            return array.push(array.splice(i, 1)[0]);
        }
    }
    function cacher(f, scope, postprocessor) {
        function newf() {
            var arg = Array.prototype.slice.call(arguments, 0),
                args = arg.join("\u2400"),
                cache = newf.cache = newf.cache || {},
                count = newf.count = newf.count || [];
            if (cache[has](args)) {
                repush(count, args);
                return postprocessor ? postprocessor(cache[args]) : cache[args];
            }
            count.length >= 1e3 && delete cache[count.shift()];
            count.push(args);
            cache[args] = f[apply](scope, arg);
            return postprocessor ? postprocessor(cache[args]) : cache[args];
        }
        return newf;
    }

    var preload = R._preload = function (src, f) {
        var img = g.doc.createElement("img");
        img.style.cssText = "position:absolute;left:-9999em;top:-9999em";
        img.onload = function () {
            f.call(this);
            this.onload = null;
            g.doc.body.removeChild(this);
        };
        img.onerror = function () {
            g.doc.body.removeChild(this);
        };
        g.doc.body.appendChild(img);
        img.src = src;
    };

    function clrToString() {
        return this.hex;
    }

    /*\
     * Raphael.getRGB
     [ method ]
     **
     * Parses colour string as RGB object
     > Parameters
     - colour (string) colour string in one of formats:
     # <ul>
     #     <li>Colour name (“<code>red</code>”, “<code>green</code>”, “<code>cornflowerblue</code>”, etc)</li>
     #     <li>#??? — shortened HTML colour: (“<code>#000</code>”, “<code>#fc0</code>”, etc)</li>
     #     <li>#?????? — full length HTML colour: (“<code>#000000</code>”, “<code>#bd2300</code>”)</li>
     #     <li>rgb(???, ???, ???) — red, green and blue channels’ values: (“<code>rgb(200,&nbsp;100,&nbsp;0)</code>”)</li>
     #     <li>rgb(???%, ???%, ???%) — same as above, but in %: (“<code>rgb(100%,&nbsp;175%,&nbsp;0%)</code>”)</li>
     #     <li>hsb(???, ???, ???) — hue, saturation and brightness values: (“<code>hsb(0.5,&nbsp;0.25,&nbsp;1)</code>”)</li>
     #     <li>hsb(???%, ???%, ???%) — same as above, but in %</li>
     #     <li>hsl(???, ???, ???) — same as hsb</li>
     #     <li>hsl(???%, ???%, ???%) — same as hsb</li>
     # </ul>
     = (object) RGB object in format:
     o {
     o     r (number) red,
     o     g (number) green,
     o     b (number) blue
     o     hex (string) color in HTML/CSS format: #??????,
     o     error (boolean) true if string can’t be parsed
     o }
     \*/
    R.getRGB = cacher(function (colour) {
        if (!colour || !!((colour = Str(colour)).indexOf("-") + 1)) {
            return {r: -1, g: -1, b: -1, hex: "none", error: 1, toString: clrToString};
        }
        if (colour == "none") {
            return {r: -1, g: -1, b: -1, hex: "none", toString: clrToString};
        }
        !(hsrg[has](colour.toLowerCase().substring(0, 2)) || colour.charAt() == "#") && (colour = toHex(colour));
        var res,
            red,
            green,
            blue,
            opacity,
            t,
            values,
            rgb = colour.match(colourRegExp);
        if (rgb) {
            if (rgb[2]) {
                blue = toInt(rgb[2].substring(5), 16);
                green = toInt(rgb[2].substring(3, 5), 16);
                red = toInt(rgb[2].substring(1, 3), 16);
            }
            if (rgb[3]) {
                blue = toInt((t = rgb[3].charAt(3)) + t, 16);
                green = toInt((t = rgb[3].charAt(2)) + t, 16);
                red = toInt((t = rgb[3].charAt(1)) + t, 16);
            }
            if (rgb[4]) {
                values = rgb[4][split](commaSpaces);
                red = toFloat(values[0]);
                values[0].slice(-1) == "%" && (red *= 2.55);
                green = toFloat(values[1]);
                values[1].slice(-1) == "%" && (green *= 2.55);
                blue = toFloat(values[2]);
                values[2].slice(-1) == "%" && (blue *= 2.55);
                rgb[1].toLowerCase().slice(0, 4) == "rgba" && (opacity = toFloat(values[3]));
                values[3] && values[3].slice(-1) == "%" && (opacity /= 100);
            }
            if (rgb[5]) {
                values = rgb[5][split](commaSpaces);
                red = toFloat(values[0]);
                values[0].slice(-1) == "%" && (red *= 2.55);
                green = toFloat(values[1]);
                values[1].slice(-1) == "%" && (green *= 2.55);
                blue = toFloat(values[2]);
                values[2].slice(-1) == "%" && (blue *= 2.55);
                (values[0].slice(-3) == "deg" || values[0].slice(-1) == "\xb0") && (red /= 360);
                rgb[1].toLowerCase().slice(0, 4) == "hsba" && (opacity = toFloat(values[3]));
                values[3] && values[3].slice(-1) == "%" && (opacity /= 100);
                return R.hsb2rgb(red, green, blue, opacity);
            }
            if (rgb[6]) {
                values = rgb[6][split](commaSpaces);
                red = toFloat(values[0]);
                values[0].slice(-1) == "%" && (red *= 2.55);
                green = toFloat(values[1]);
                values[1].slice(-1) == "%" && (green *= 2.55);
                blue = toFloat(values[2]);
                values[2].slice(-1) == "%" && (blue *= 2.55);
                (values[0].slice(-3) == "deg" || values[0].slice(-1) == "\xb0") && (red /= 360);
                rgb[1].toLowerCase().slice(0, 4) == "hsla" && (opacity = toFloat(values[3]));
                values[3] && values[3].slice(-1) == "%" && (opacity /= 100);
                return R.hsl2rgb(red, green, blue, opacity);
            }
            rgb = {r: red, g: green, b: blue, toString: clrToString};
            rgb.hex = "#" + (16777216 | blue | (green << 8) | (red << 16)).toString(16).slice(1);
            R.is(opacity, "finite") && (rgb.opacity = opacity);
            return rgb;
        }
        return {r: -1, g: -1, b: -1, hex: "none", error: 1, toString: clrToString};
    }, R);
    /*\
     * Raphael.hsb
     [ method ]
     **
     * Converts HSB values to hex representation of the colour.
     > Parameters
     - h (number) hue
     - s (number) saturation
     - b (number) value or brightness
     = (string) hex representation of the colour.
     \*/
    R.hsb = cacher(function (h, s, b) {
        return R.hsb2rgb(h, s, b).hex;
    });
    /*\
     * Raphael.hsl
     [ method ]
     **
     * Converts HSL values to hex representation of the colour.
     > Parameters
     - h (number) hue
     - s (number) saturation
     - l (number) luminosity
     = (string) hex representation of the colour.
     \*/
    R.hsl = cacher(function (h, s, l) {
        return R.hsl2rgb(h, s, l).hex;
    });
    /*\
     * Raphael.rgb
     [ method ]
     **
     * Converts RGB values to hex representation of the colour.
     > Parameters
     - r (number) red
     - g (number) green
     - b (number) blue
     = (string) hex representation of the colour.
     \*/
    R.rgb = cacher(function (r, g, b) {
        function round(x) { return (x + 0.5) | 0; }
        return "#" + (16777216 | round(b) | (round(g) << 8) | (round(r) << 16)).toString(16).slice(1);
    });
    /*\
     * Raphael.getColor
     [ method ]
     **
     * On each call returns next colour in the spectrum. To reset it back to red call @Raphael.getColor.reset
     > Parameters
     - value (number) #optional brightness, default is `0.75`
     = (string) hex representation of the colour.
     \*/
    R.getColor = function (value) {
        var start = this.getColor.start = this.getColor.start || {h: 0, s: 1, b: value || .75},
            rgb = this.hsb2rgb(start.h, start.s, start.b);
        start.h += .075;
        if (start.h > 1) {
            start.h = 0;
            start.s -= .2;
            start.s <= 0 && (this.getColor.start = {h: 0, s: 1, b: start.b});
        }
        return rgb.hex;
    };
    /*\
     * Raphael.getColor.reset
     [ method ]
     **
     * Resets spectrum position for @Raphael.getColor back to red.
     \*/
    R.getColor.reset = function () {
        delete this.start;
    };

    // http://schepers.cc/getting-to-the-point
    function catmullRom2bezier(crp, z) {
        var d = [];
        for (var i = 0, iLen = crp.length; iLen - 2 * !z > i; i += 2) {
            var p = [
                {x: +crp[i - 2], y: +crp[i - 1]},
                {x: +crp[i],     y: +crp[i + 1]},
                {x: +crp[i + 2], y: +crp[i + 3]},
                {x: +crp[i + 4], y: +crp[i + 5]}
            ];
            if (z) {
                if (!i) {
                    p[0] = {x: +crp[iLen - 2], y: +crp[iLen - 1]};
                } else if (iLen - 4 == i) {
                    p[3] = {x: +crp[0], y: +crp[1]};
                } else if (iLen - 2 == i) {
                    p[2] = {x: +crp[0], y: +crp[1]};
                    p[3] = {x: +crp[2], y: +crp[3]};
                }
            } else {
                if (iLen - 4 == i) {
                    p[3] = p[2];
                } else if (!i) {
                    p[0] = {x: +crp[i], y: +crp[i + 1]};
                }
            }
            d.push(["C",
                (-p[0].x + 6 * p[1].x + p[2].x) / 6,
                (-p[0].y + 6 * p[1].y + p[2].y) / 6,
                (p[1].x + 6 * p[2].x - p[3].x) / 6,
                (p[1].y + 6*p[2].y - p[3].y) / 6,
                p[2].x,
                p[2].y
            ]);
        }

        return d;
    }
    /*\
     * Raphael.parsePathString
     [ method ]
     **
     * Utility method
     **
     * Parses given path string into an array of arrays of path segments.
     > Parameters
     - pathString (string|array) path string or array of segments (in the last case it will be returned straight away)
     = (array) array of segments.
     \*/
    R.parsePathString = function (pathString) {
        if (!pathString) {
            return null;
        }
        var pth = paths(pathString);
        if (pth.arr) {
            return pathClone(pth.arr);
        }

        var paramCounts = {a: 7, c: 6, h: 1, l: 2, m: 2, r: 4, q: 4, s: 4, t: 2, v: 1, z: 0},
            data = [];
        if (R.is(pathString, array) && R.is(pathString[0], array)) { // rough assumption
            data = pathClone(pathString);
        }
        if (!data.length) {
            Str(pathString).replace(pathCommand, function (a, b, c) {
                var params = [],
                    name = b.toLowerCase();
                c.replace(pathValues, function (a, b) {
                    b && params.push(+b);
                });
                if (name == "m" && params.length > 2) {
                    data.push([b][concat](params.splice(0, 2)));
                    name = "l";
                    b = b == "m" ? "l" : "L";
                }
                if (name == "r") {
                    data.push([b][concat](params));
                } else while (params.length >= paramCounts[name]) {
                    data.push([b][concat](params.splice(0, paramCounts[name])));
                    if (!paramCounts[name]) {
                        break;
                    }
                }
            });
        }
        data.toString = R._path2string;
        pth.arr = pathClone(data);
        return data;
    };
    /*\
     * Raphael.parseTransformString
     [ method ]
     **
     * Utility method
     **
     * Parses given path string into an array of transformations.
     > Parameters
     - TString (string|array) transform string or array of transformations (in the last case it will be returned straight away)
     = (array) array of transformations.
     \*/
    R.parseTransformString = cacher(function (TString) {
        if (!TString) {
            return null;
        }
        var paramCounts = {r: 3, s: 4, t: 2, m: 6},
            data = [];
        if (R.is(TString, array) && R.is(TString[0], array)) { // rough assumption
            data = pathClone(TString);
        }
        if (!data.length) {
            Str(TString).replace(tCommand, function (a, b, c) {
                var params = [],
                    name = lowerCase.call(b);
                c.replace(pathValues, function (a, b) {
                    b && params.push(+b);
                });
                data.push([b][concat](params));
            });
        }
        data.toString = R._path2string;
        return data;
    });
    // PATHS
    var paths = function (ps) {
        var p = paths.ps = paths.ps || {};
        if (p[ps]) {
            p[ps].sleep = 100;
        } else {
            p[ps] = {
                sleep: 100
            };
        }
        setTimeout(function () {
            for (var key in p) if (p[has](key) && key != ps) {
                p[key].sleep--;
                !p[key].sleep && delete p[key];
            }
        });
        return p[ps];
    };
    /*\
     * Raphael.findDotsAtSegment
     [ method ]
     **
     * Utility method
     **
     * Find dot coordinates on the given cubic bezier curve at the given t.
     > Parameters
     - p1x (number) x of the first point of the curve
     - p1y (number) y of the first point of the curve
     - c1x (number) x of the first anchor of the curve
     - c1y (number) y of the first anchor of the curve
     - c2x (number) x of the second anchor of the curve
     - c2y (number) y of the second anchor of the curve
     - p2x (number) x of the second point of the curve
     - p2y (number) y of the second point of the curve
     - t (number) position on the curve (0..1)
     = (object) point information in format:
     o {
     o     x: (number) x coordinate of the point
     o     y: (number) y coordinate of the point
     o     m: {
     o         x: (number) x coordinate of the left anchor
     o         y: (number) y coordinate of the left anchor
     o     }
     o     n: {
     o         x: (number) x coordinate of the right anchor
     o         y: (number) y coordinate of the right anchor
     o     }
     o     start: {
     o         x: (number) x coordinate of the start of the curve
     o         y: (number) y coordinate of the start of the curve
     o     }
     o     end: {
     o         x: (number) x coordinate of the end of the curve
     o         y: (number) y coordinate of the end of the curve
     o     }
     o     alpha: (number) angle of the curve derivative at the point
     o }
     \*/
    R.findDotsAtSegment = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t) {
        var t1 = 1 - t,
            t13 = pow(t1, 3),
            t12 = pow(t1, 2),
            t2 = t * t,
            t3 = t2 * t,
            x = t13 * p1x + t12 * 3 * t * c1x + t1 * 3 * t * t * c2x + t3 * p2x,
            y = t13 * p1y + t12 * 3 * t * c1y + t1 * 3 * t * t * c2y + t3 * p2y,
            mx = p1x + 2 * t * (c1x - p1x) + t2 * (c2x - 2 * c1x + p1x),
            my = p1y + 2 * t * (c1y - p1y) + t2 * (c2y - 2 * c1y + p1y),
            nx = c1x + 2 * t * (c2x - c1x) + t2 * (p2x - 2 * c2x + c1x),
            ny = c1y + 2 * t * (c2y - c1y) + t2 * (p2y - 2 * c2y + c1y),
            ax = t1 * p1x + t * c1x,
            ay = t1 * p1y + t * c1y,
            cx = t1 * c2x + t * p2x,
            cy = t1 * c2y + t * p2y,
            alpha = (90 - math.atan2(mx - nx, my - ny) * 180 / PI);
        (mx > nx || my < ny) && (alpha += 180);
        return {
            x: x,
            y: y,
            m: {x: mx, y: my},
            n: {x: nx, y: ny},
            start: {x: ax, y: ay},
            end: {x: cx, y: cy},
            alpha: alpha
        };
    };
    /*\
     * Raphael.bezierBBox
     [ method ]
     **
     * Utility method
     **
     * Return bounding box of a given cubic bezier curve
     > Parameters
     - p1x (number) x of the first point of the curve
     - p1y (number) y of the first point of the curve
     - c1x (number) x of the first anchor of the curve
     - c1y (number) y of the first anchor of the curve
     - c2x (number) x of the second anchor of the curve
     - c2y (number) y of the second anchor of the curve
     - p2x (number) x of the second point of the curve
     - p2y (number) y of the second point of the curve
     * or
     - bez (array) array of six points for bezier curve
     = (object) point information in format:
     o {
     o     min: {
     o         x: (number) x coordinate of the left point
     o         y: (number) y coordinate of the top point
     o     }
     o     max: {
     o         x: (number) x coordinate of the right point
     o         y: (number) y coordinate of the bottom point
     o     }
     o }
     \*/
    R.bezierBBox = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y) {
        if (!R.is(p1x, "array")) {
            p1x = [p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y];
        }
        var bbox = curveDim.apply(null, p1x);
        return {
            x: bbox.min.x,
            y: bbox.min.y,
            x2: bbox.max.x,
            y2: bbox.max.y,
            width: bbox.max.x - bbox.min.x,
            height: bbox.max.y - bbox.min.y
        };
    };
    /*\
     * Raphael.isPointInsideBBox
     [ method ]
     **
     * Utility method
     **
     * Returns `true` if given point is inside bounding boxes.
     > Parameters
     - bbox (string) bounding box
     - x (string) x coordinate of the point
     - y (string) y coordinate of the point
     = (boolean) `true` if point inside
     \*/
    R.isPointInsideBBox = function (bbox, x, y) {
        return x >= bbox.x && x <= bbox.x2 && y >= bbox.y && y <= bbox.y2;
    };
    /*\
     * Raphael.isBBoxIntersect
     [ method ]
     **
     * Utility method
     **
     * Returns `true` if two bounding boxes intersect
     > Parameters
     - bbox1 (string) first bounding box
     - bbox2 (string) second bounding box
     = (boolean) `true` if they intersect
     \*/
    R.isBBoxIntersect = function (bbox1, bbox2) {
        var i = R.isPointInsideBBox;
        return i(bbox2, bbox1.x, bbox1.y)
            || i(bbox2, bbox1.x2, bbox1.y)
            || i(bbox2, bbox1.x, bbox1.y2)
            || i(bbox2, bbox1.x2, bbox1.y2)
            || i(bbox1, bbox2.x, bbox2.y)
            || i(bbox1, bbox2.x2, bbox2.y)
            || i(bbox1, bbox2.x, bbox2.y2)
            || i(bbox1, bbox2.x2, bbox2.y2)
            || (bbox1.x < bbox2.x2 && bbox1.x > bbox2.x || bbox2.x < bbox1.x2 && bbox2.x > bbox1.x)
            && (bbox1.y < bbox2.y2 && bbox1.y > bbox2.y || bbox2.y < bbox1.y2 && bbox2.y > bbox1.y);
    };
    function base3(t, p1, p2, p3, p4) {
        var t1 = -3 * p1 + 9 * p2 - 9 * p3 + 3 * p4,
            t2 = t * t1 + 6 * p1 - 12 * p2 + 6 * p3;
        return t * t2 - 3 * p1 + 3 * p2;
    }
    function bezlen(x1, y1, x2, y2, x3, y3, x4, y4, z) {
        if (z == null) {
            z = 1;
        }
        z = z > 1 ? 1 : z < 0 ? 0 : z;
        var z2 = z / 2,
            n = 12,
            Tvalues = [-0.1252,0.1252,-0.3678,0.3678,-0.5873,0.5873,-0.7699,0.7699,-0.9041,0.9041,-0.9816,0.9816],
            Cvalues = [0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],
            sum = 0;
        for (var i = 0; i < n; i++) {
            var ct = z2 * Tvalues[i] + z2,
                xbase = base3(ct, x1, x2, x3, x4),
                ybase = base3(ct, y1, y2, y3, y4),
                comb = xbase * xbase + ybase * ybase;
            sum += Cvalues[i] * math.sqrt(comb);
        }
        return z2 * sum;
    }
    function getTatLen(x1, y1, x2, y2, x3, y3, x4, y4, ll) {
        if (ll < 0 || bezlen(x1, y1, x2, y2, x3, y3, x4, y4) < ll) {
            return;
        }
        var t = 1,
            step = t / 2,
            t2 = t - step,
            l,
            e = .01;
        l = bezlen(x1, y1, x2, y2, x3, y3, x4, y4, t2);
        while (abs(l - ll) > e) {
            step /= 2;
            t2 += (l < ll ? 1 : -1) * step;
            l = bezlen(x1, y1, x2, y2, x3, y3, x4, y4, t2);
        }
        return t2;
    }
    function intersect(x1, y1, x2, y2, x3, y3, x4, y4) {
        if (
            mmax(x1, x2) < mmin(x3, x4) ||
            mmin(x1, x2) > mmax(x3, x4) ||
            mmax(y1, y2) < mmin(y3, y4) ||
            mmin(y1, y2) > mmax(y3, y4)
        ) {
            return;
        }
        var nx = (x1 * y2 - y1 * x2) * (x3 - x4) - (x1 - x2) * (x3 * y4 - y3 * x4),
            ny = (x1 * y2 - y1 * x2) * (y3 - y4) - (y1 - y2) * (x3 * y4 - y3 * x4),
            denominator = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);

        if (!denominator) {
            return;
        }
        var px = nx / denominator,
            py = ny / denominator,
            px2 = +px.toFixed(2),
            py2 = +py.toFixed(2);
        if (
            px2 < +mmin(x1, x2).toFixed(2) ||
            px2 > +mmax(x1, x2).toFixed(2) ||
            px2 < +mmin(x3, x4).toFixed(2) ||
            px2 > +mmax(x3, x4).toFixed(2) ||
            py2 < +mmin(y1, y2).toFixed(2) ||
            py2 > +mmax(y1, y2).toFixed(2) ||
            py2 < +mmin(y3, y4).toFixed(2) ||
            py2 > +mmax(y3, y4).toFixed(2)
        ) {
            return;
        }
        return {x: px, y: py};
    }
    function inter(bez1, bez2) {
        return interHelper(bez1, bez2);
    }
    function interCount(bez1, bez2) {
        return interHelper(bez1, bez2, 1);
    }
    function interHelper(bez1, bez2, justCount) {
        var bbox1 = R.bezierBBox(bez1),
            bbox2 = R.bezierBBox(bez2);
        if (!R.isBBoxIntersect(bbox1, bbox2)) {
            return justCount ? 0 : [];
        }
        var l1 = bezlen.apply(0, bez1),
            l2 = bezlen.apply(0, bez2),
            n1 = mmax(~~(l1 / 5), 1),
            n2 = mmax(~~(l2 / 5), 1),
            dots1 = [],
            dots2 = [],
            xy = {},
            res = justCount ? 0 : [];
        for (var i = 0; i < n1 + 1; i++) {
            var p = R.findDotsAtSegment.apply(R, bez1.concat(i / n1));
            dots1.push({x: p.x, y: p.y, t: i / n1});
        }
        for (i = 0; i < n2 + 1; i++) {
            p = R.findDotsAtSegment.apply(R, bez2.concat(i / n2));
            dots2.push({x: p.x, y: p.y, t: i / n2});
        }
        for (i = 0; i < n1; i++) {
            for (var j = 0; j < n2; j++) {
                var di = dots1[i],
                    di1 = dots1[i + 1],
                    dj = dots2[j],
                    dj1 = dots2[j + 1],
                    ci = abs(di1.x - di.x) < .001 ? "y" : "x",
                    cj = abs(dj1.x - dj.x) < .001 ? "y" : "x",
                    is = intersect(di.x, di.y, di1.x, di1.y, dj.x, dj.y, dj1.x, dj1.y);
                if (is) {
                    if (xy[is.x.toFixed(4)] == is.y.toFixed(4)) {
                        continue;
                    }
                    xy[is.x.toFixed(4)] = is.y.toFixed(4);
                    var t1 = di.t + abs((is[ci] - di[ci]) / (di1[ci] - di[ci])) * (di1.t - di.t),
                        t2 = dj.t + abs((is[cj] - dj[cj]) / (dj1[cj] - dj[cj])) * (dj1.t - dj.t);
                    if (t1 >= 0 && t1 <= 1.001 && t2 >= 0 && t2 <= 1.001) {
                        if (justCount) {
                            res++;
                        } else {
                            res.push({
                                x: is.x,
                                y: is.y,
                                t1: mmin(t1, 1),
                                t2: mmin(t2, 1)
                            });
                        }
                    }
                }
            }
        }
        return res;
    }
    /*\
     * Raphael.pathIntersection
     [ method ]
     **
     * Utility method
     **
     * Finds intersections of two paths
     > Parameters
     - path1 (string) path string
     - path2 (string) path string
     = (array) dots of intersection
     o [
     o     {
     o         x: (number) x coordinate of the point
     o         y: (number) y coordinate of the point
     o         t1: (number) t value for segment of path1
     o         t2: (number) t value for segment of path2
     o         segment1: (number) order number for segment of path1
     o         segment2: (number) order number for segment of path2
     o         bez1: (array) eight coordinates representing beziér curve for the segment of path1
     o         bez2: (array) eight coordinates representing beziér curve for the segment of path2
     o     }
     o ]
     \*/
    R.pathIntersection = function (path1, path2) {
        return interPathHelper(path1, path2);
    };
    R.pathIntersectionNumber = function (path1, path2) {
        return interPathHelper(path1, path2, 1);
    };
    function interPathHelper(path1, path2, justCount) {
        path1 = R._path2curve(path1);
        path2 = R._path2curve(path2);
        var x1, y1, x2, y2, x1m, y1m, x2m, y2m, bez1, bez2,
            res = justCount ? 0 : [];
        for (var i = 0, ii = path1.length; i < ii; i++) {
            var pi = path1[i];
            if (pi[0] == "M") {
                x1 = x1m = pi[1];
                y1 = y1m = pi[2];
            } else {
                if (pi[0] == "C") {
                    bez1 = [x1, y1].concat(pi.slice(1));
                    x1 = bez1[6];
                    y1 = bez1[7];
                } else {
                    bez1 = [x1, y1, x1, y1, x1m, y1m, x1m, y1m];
                    x1 = x1m;
                    y1 = y1m;
                }
                for (var j = 0, jj = path2.length; j < jj; j++) {
                    var pj = path2[j];
                    if (pj[0] == "M") {
                        x2 = x2m = pj[1];
                        y2 = y2m = pj[2];
                    } else {
                        if (pj[0] == "C") {
                            bez2 = [x2, y2].concat(pj.slice(1));
                            x2 = bez2[6];
                            y2 = bez2[7];
                        } else {
                            bez2 = [x2, y2, x2, y2, x2m, y2m, x2m, y2m];
                            x2 = x2m;
                            y2 = y2m;
                        }
                        var intr = interHelper(bez1, bez2, justCount);
                        if (justCount) {
                            res += intr;
                        } else {
                            for (var k = 0, kk = intr.length; k < kk; k++) {
                                intr[k].segment1 = i;
                                intr[k].segment2 = j;
                                intr[k].bez1 = bez1;
                                intr[k].bez2 = bez2;
                            }
                            res = res.concat(intr);
                        }
                    }
                }
            }
        }
        return res;
    }
    /*\
     * Raphael.isPointInsidePath
     [ method ]
     **
     * Utility method
     **
     * Returns `true` if given point is inside a given closed path.
     > Parameters
     - path (string) path string
     - x (number) x of the point
     - y (number) y of the point
     = (boolean) true, if point is inside the path
     \*/
    R.isPointInsidePath = function (path, x, y) {
        var bbox = R.pathBBox(path);
        return R.isPointInsideBBox(bbox, x, y) &&
            interPathHelper(path, [["M", x, y], ["H", bbox.x2 + 10]], 1) % 2 == 1;
    };
    R._removedFactory = function (methodname) {
        return function () {
            eve("raphael.log", null, "Rapha\xebl: you are calling to method \u201c" + methodname + "\u201d of removed object", methodname);
        };
    };
    /*\
     * Raphael.pathBBox
     [ method ]
     **
     * Utility method
     **
     * Return bounding box of a given path
     > Parameters
     - path (string) path string
     = (object) bounding box
     o {
     o     x: (number) x coordinate of the left top point of the box
     o     y: (number) y coordinate of the left top point of the box
     o     x2: (number) x coordinate of the right bottom point of the box
     o     y2: (number) y coordinate of the right bottom point of the box
     o     width: (number) width of the box
     o     height: (number) height of the box
     o     cx: (number) x coordinate of the center of the box
     o     cy: (number) y coordinate of the center of the box
     o }
     \*/
    var pathDimensions = R.pathBBox = function (path) {
            var pth = paths(path);
            if (pth.bbox) {
                return clone(pth.bbox);
            }
            if (!path) {
                return {x: 0, y: 0, width: 0, height: 0, x2: 0, y2: 0};
            }
            path = path2curve(path);
            var x = 0,
                y = 0,
                X = [],
                Y = [],
                p;
            for (var i = 0, ii = path.length; i < ii; i++) {
                p = path[i];
                if (p[0] == "M") {
                    x = p[1];
                    y = p[2];
                    X.push(x);
                    Y.push(y);
                } else {
                    var dim = curveDim(x, y, p[1], p[2], p[3], p[4], p[5], p[6]);
                    X = X[concat](dim.min.x, dim.max.x);
                    Y = Y[concat](dim.min.y, dim.max.y);
                    x = p[5];
                    y = p[6];
                }
            }
            var xmin = mmin[apply](0, X),
                ymin = mmin[apply](0, Y),
                xmax = mmax[apply](0, X),
                ymax = mmax[apply](0, Y),
                width = xmax - xmin,
                height = ymax - ymin,
                bb = {
                    x: xmin,
                    y: ymin,
                    x2: xmax,
                    y2: ymax,
                    width: width,
                    height: height,
                    cx: xmin + width / 2,
                    cy: ymin + height / 2
                };
            pth.bbox = clone(bb);
            return bb;
        },
        pathClone = function (pathArray) {
            var res = clone(pathArray);
            res.toString = R._path2string;
            return res;
        },
        pathToRelative = R._pathToRelative = function (pathArray) {
            var pth = paths(pathArray);
            if (pth.rel) {
                return pathClone(pth.rel);
            }
            if (!R.is(pathArray, array) || !R.is(pathArray && pathArray[0], array)) { // rough assumption
                pathArray = R.parsePathString(pathArray);
            }
            var res = [],
                x = 0,
                y = 0,
                mx = 0,
                my = 0,
                start = 0;
            if (pathArray[0][0] == "M") {
                x = pathArray[0][1];
                y = pathArray[0][2];
                mx = x;
                my = y;
                start++;
                res.push(["M", x, y]);
            }
            for (var i = start, ii = pathArray.length; i < ii; i++) {
                var r = res[i] = [],
                    pa = pathArray[i];
                if (pa[0] != lowerCase.call(pa[0])) {
                    r[0] = lowerCase.call(pa[0]);
                    switch (r[0]) {
                        case "a":
                            r[1] = pa[1];
                            r[2] = pa[2];
                            r[3] = pa[3];
                            r[4] = pa[4];
                            r[5] = pa[5];
                            r[6] = +(pa[6] - x).toFixed(3);
                            r[7] = +(pa[7] - y).toFixed(3);
                            break;
                        case "v":
                            r[1] = +(pa[1] - y).toFixed(3);
                            break;
                        case "m":
                            mx = pa[1];
                            my = pa[2];
                        default:
                            for (var j = 1, jj = pa.length; j < jj; j++) {
                                r[j] = +(pa[j] - ((j % 2) ? x : y)).toFixed(3);
                            }
                    }
                } else {
                    r = res[i] = [];
                    if (pa[0] == "m") {
                        mx = pa[1] + x;
                        my = pa[2] + y;
                    }
                    for (var k = 0, kk = pa.length; k < kk; k++) {
                        res[i][k] = pa[k];
                    }
                }
                var len = res[i].length;
                switch (res[i][0]) {
                    case "z":
                        x = mx;
                        y = my;
                        break;
                    case "h":
                        x += +res[i][len - 1];
                        break;
                    case "v":
                        y += +res[i][len - 1];
                        break;
                    default:
                        x += +res[i][len - 2];
                        y += +res[i][len - 1];
                }
            }
            res.toString = R._path2string;
            pth.rel = pathClone(res);
            return res;
        },
        pathToAbsolute = R._pathToAbsolute = function (pathArray) {
            var pth = paths(pathArray);
            if (pth.abs) {
                return pathClone(pth.abs);
            }
            if (!R.is(pathArray, array) || !R.is(pathArray && pathArray[0], array)) { // rough assumption
                pathArray = R.parsePathString(pathArray);
            }
            if (!pathArray || !pathArray.length) {
                return [["M", 0, 0]];
            }
            var res = [],
                x = 0,
                y = 0,
                mx = 0,
                my = 0,
                start = 0;
            if (pathArray[0][0] == "M") {
                x = +pathArray[0][1];
                y = +pathArray[0][2];
                mx = x;
                my = y;
                start++;
                res[0] = ["M", x, y];
            }
            var crz = pathArray.length == 3 && pathArray[0][0] == "M" && pathArray[1][0].toUpperCase() == "R" && pathArray[2][0].toUpperCase() == "Z";
            for (var r, pa, i = start, ii = pathArray.length; i < ii; i++) {
                res.push(r = []);
                pa = pathArray[i];
                if (pa[0] != upperCase.call(pa[0])) {
                    r[0] = upperCase.call(pa[0]);
                    switch (r[0]) {
                        case "A":
                            r[1] = pa[1];
                            r[2] = pa[2];
                            r[3] = pa[3];
                            r[4] = pa[4];
                            r[5] = pa[5];
                            r[6] = +(pa[6] + x);
                            r[7] = +(pa[7] + y);
                            break;
                        case "V":
                            r[1] = +pa[1] + y;
                            break;
                        case "H":
                            r[1] = +pa[1] + x;
                            break;
                        case "R":
                            var dots = [x, y][concat](pa.slice(1));
                            for (var j = 2, jj = dots.length; j < jj; j++) {
                                dots[j] = +dots[j] + x;
                                dots[++j] = +dots[j] + y;
                            }
                            res.pop();
                            res = res[concat](catmullRom2bezier(dots, crz));
                            break;
                        case "M":
                            mx = +pa[1] + x;
                            my = +pa[2] + y;
                        default:
                            for (j = 1, jj = pa.length; j < jj; j++) {
                                r[j] = +pa[j] + ((j % 2) ? x : y);
                            }
                    }
                } else if (pa[0] == "R") {
                    dots = [x, y][concat](pa.slice(1));
                    res.pop();
                    res = res[concat](catmullRom2bezier(dots, crz));
                    r = ["R"][concat](pa.slice(-2));
                } else {
                    for (var k = 0, kk = pa.length; k < kk; k++) {
                        r[k] = pa[k];
                    }
                }
                switch (r[0]) {
                    case "Z":
                        x = mx;
                        y = my;
                        break;
                    case "H":
                        x = r[1];
                        break;
                    case "V":
                        y = r[1];
                        break;
                    case "M":
                        mx = r[r.length - 2];
                        my = r[r.length - 1];
                    default:
                        x = r[r.length - 2];
                        y = r[r.length - 1];
                }
            }
            res.toString = R._path2string;
            pth.abs = pathClone(res);
            return res;
        },
        l2c = function (x1, y1, x2, y2) {
            return [x1, y1, x2, y2, x2, y2];
        },
        q2c = function (x1, y1, ax, ay, x2, y2) {
            var _13 = 1 / 3,
                _23 = 2 / 3;
            return [
                _13 * x1 + _23 * ax,
                _13 * y1 + _23 * ay,
                _13 * x2 + _23 * ax,
                _13 * y2 + _23 * ay,
                x2,
                y2
            ];
        },
        a2c = function (x1, y1, rx, ry, angle, large_arc_flag, sweep_flag, x2, y2, recursive) {
            // for more information of where this math came from visit:
            // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes
            var _120 = PI * 120 / 180,
                rad = PI / 180 * (+angle || 0),
                res = [],
                xy,
                rotate = cacher(function (x, y, rad) {
                    var X = x * math.cos(rad) - y * math.sin(rad),
                        Y = x * math.sin(rad) + y * math.cos(rad);
                    return {x: X, y: Y};
                });
            if (!recursive) {
                xy = rotate(x1, y1, -rad);
                x1 = xy.x;
                y1 = xy.y;
                xy = rotate(x2, y2, -rad);
                x2 = xy.x;
                y2 = xy.y;
                var cos = math.cos(PI / 180 * angle),
                    sin = math.sin(PI / 180 * angle),
                    x = (x1 - x2) / 2,
                    y = (y1 - y2) / 2;
                var h = (x * x) / (rx * rx) + (y * y) / (ry * ry);
                if (h > 1) {
                    h = math.sqrt(h);
                    rx = h * rx;
                    ry = h * ry;
                }
                var rx2 = rx * rx,
                    ry2 = ry * ry,
                    k = (large_arc_flag == sweep_flag ? -1 : 1) *
                        math.sqrt(abs((rx2 * ry2 - rx2 * y * y - ry2 * x * x) / (rx2 * y * y + ry2 * x * x))),
                    cx = k * rx * y / ry + (x1 + x2) / 2,
                    cy = k * -ry * x / rx + (y1 + y2) / 2,
                    f1 = math.asin(((y1 - cy) / ry).toFixed(9)),
                    f2 = math.asin(((y2 - cy) / ry).toFixed(9));

                f1 = x1 < cx ? PI - f1 : f1;
                f2 = x2 < cx ? PI - f2 : f2;
                f1 < 0 && (f1 = PI * 2 + f1);
                f2 < 0 && (f2 = PI * 2 + f2);
                if (sweep_flag && f1 > f2) {
                    f1 = f1 - PI * 2;
                }
                if (!sweep_flag && f2 > f1) {
                    f2 = f2 - PI * 2;
                }
            } else {
                f1 = recursive[0];
                f2 = recursive[1];
                cx = recursive[2];
                cy = recursive[3];
            }
            var df = f2 - f1;
            if (abs(df) > _120) {
                var f2old = f2,
                    x2old = x2,
                    y2old = y2;
                f2 = f1 + _120 * (sweep_flag && f2 > f1 ? 1 : -1);
                x2 = cx + rx * math.cos(f2);
                y2 = cy + ry * math.sin(f2);
                res = a2c(x2, y2, rx, ry, angle, 0, sweep_flag, x2old, y2old, [f2, f2old, cx, cy]);
            }
            df = f2 - f1;
            var c1 = math.cos(f1),
                s1 = math.sin(f1),
                c2 = math.cos(f2),
                s2 = math.sin(f2),
                t = math.tan(df / 4),
                hx = 4 / 3 * rx * t,
                hy = 4 / 3 * ry * t,
                m1 = [x1, y1],
                m2 = [x1 + hx * s1, y1 - hy * c1],
                m3 = [x2 + hx * s2, y2 - hy * c2],
                m4 = [x2, y2];
            m2[0] = 2 * m1[0] - m2[0];
            m2[1] = 2 * m1[1] - m2[1];
            if (recursive) {
                return [m2, m3, m4][concat](res);
            } else {
                res = [m2, m3, m4][concat](res).join()[split](",");
                var newres = [];
                for (var i = 0, ii = res.length; i < ii; i++) {
                    newres[i] = i % 2 ? rotate(res[i - 1], res[i], rad).y : rotate(res[i], res[i + 1], rad).x;
                }
                return newres;
            }
        },
        findDotAtSegment = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t) {
            var t1 = 1 - t;
            return {
                x: pow(t1, 3) * p1x + pow(t1, 2) * 3 * t * c1x + t1 * 3 * t * t * c2x + pow(t, 3) * p2x,
                y: pow(t1, 3) * p1y + pow(t1, 2) * 3 * t * c1y + t1 * 3 * t * t * c2y + pow(t, 3) * p2y
            };
        },
        curveDim = cacher(function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y) {
            var a = (c2x - 2 * c1x + p1x) - (p2x - 2 * c2x + c1x),
                b = 2 * (c1x - p1x) - 2 * (c2x - c1x),
                c = p1x - c1x,
                t1 = (-b + math.sqrt(b * b - 4 * a * c)) / 2 / a,
                t2 = (-b - math.sqrt(b * b - 4 * a * c)) / 2 / a,
                y = [p1y, p2y],
                x = [p1x, p2x],
                dot;
            abs(t1) > "1e12" && (t1 = .5);
            abs(t2) > "1e12" && (t2 = .5);
            if (t1 > 0 && t1 < 1) {
                dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t1);
                x.push(dot.x);
                y.push(dot.y);
            }
            if (t2 > 0 && t2 < 1) {
                dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t2);
                x.push(dot.x);
                y.push(dot.y);
            }
            a = (c2y - 2 * c1y + p1y) - (p2y - 2 * c2y + c1y);
            b = 2 * (c1y - p1y) - 2 * (c2y - c1y);
            c = p1y - c1y;
            t1 = (-b + math.sqrt(b * b - 4 * a * c)) / 2 / a;
            t2 = (-b - math.sqrt(b * b - 4 * a * c)) / 2 / a;
            abs(t1) > "1e12" && (t1 = .5);
            abs(t2) > "1e12" && (t2 = .5);
            if (t1 > 0 && t1 < 1) {
                dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t1);
                x.push(dot.x);
                y.push(dot.y);
            }
            if (t2 > 0 && t2 < 1) {
                dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t2);
                x.push(dot.x);
                y.push(dot.y);
            }
            return {
                min: {x: mmin[apply](0, x), y: mmin[apply](0, y)},
                max: {x: mmax[apply](0, x), y: mmax[apply](0, y)}
            };
        }),
        path2curve = R._path2curve = cacher(function (path, path2) {
            var pth = !path2 && paths(path);
            if (!path2 && pth.curve) {
                return pathClone(pth.curve);
            }
            var p = pathToAbsolute(path),
                p2 = path2 && pathToAbsolute(path2),
                attrs = {x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null},
                attrs2 = {x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null},
                processPath = function (path, d, pcom) {
                    var nx, ny, tq = {T:1, Q:1};
                    if (!path) {
                        return ["C", d.x, d.y, d.x, d.y, d.x, d.y];
                    }
                    !(path[0] in tq) && (d.qx = d.qy = null);
                    switch (path[0]) {
                        case "M":
                            d.X = path[1];
                            d.Y = path[2];
                            break;
                        case "A":
                            path = ["C"][concat](a2c[apply](0, [d.x, d.y][concat](path.slice(1))));
                            break;
                        case "S":
                            if (pcom == "C" || pcom == "S") { // In "S" case we have to take into account, if the previous command is C/S.
                                nx = d.x * 2 - d.bx;          // And reflect the previous
                                ny = d.y * 2 - d.by;          // command's control point relative to the current point.
                            }
                            else {                            // or some else or nothing
                                nx = d.x;
                                ny = d.y;
                            }
                            path = ["C", nx, ny][concat](path.slice(1));
                            break;
                        case "T":
                            if (pcom == "Q" || pcom == "T") { // In "T" case we have to take into account, if the previous command is Q/T.
                                d.qx = d.x * 2 - d.qx;        // And make a reflection similar
                                d.qy = d.y * 2 - d.qy;        // to case "S".
                            }
                            else {                            // or something else or nothing
                                d.qx = d.x;
                                d.qy = d.y;
                            }
                            path = ["C"][concat](q2c(d.x, d.y, d.qx, d.qy, path[1], path[2]));
                            break;
                        case "Q":
                            d.qx = path[1];
                            d.qy = path[2];
                            path = ["C"][concat](q2c(d.x, d.y, path[1], path[2], path[3], path[4]));
                            break;
                        case "L":
                            path = ["C"][concat](l2c(d.x, d.y, path[1], path[2]));
                            break;
                        case "H":
                            path = ["C"][concat](l2c(d.x, d.y, path[1], d.y));
                            break;
                        case "V":
                            path = ["C"][concat](l2c(d.x, d.y, d.x, path[1]));
                            break;
                        case "Z":
                            path = ["C"][concat](l2c(d.x, d.y, d.X, d.Y));
                            break;
                    }
                    return path;
                },
                fixArc = function (pp, i) {
                    if (pp[i].length > 7) {
                        pp[i].shift();
                        var pi = pp[i];
                        while (pi.length) {
                            pcoms1[i]="A"; // if created multiple C:s, their original seg is saved
                            p2 && (pcoms2[i]="A"); // the same as above
                            pp.splice(i++, 0, ["C"][concat](pi.splice(0, 6)));
                        }
                        pp.splice(i, 1);
                        ii = mmax(p.length, p2 && p2.length || 0);
                    }
                },
                fixM = function (path1, path2, a1, a2, i) {
                    if (path1 && path2 && path1[i][0] == "M" && path2[i][0] != "M") {
                        path2.splice(i, 0, ["M", a2.x, a2.y]);
                        a1.bx = 0;
                        a1.by = 0;
                        a1.x = path1[i][1];
                        a1.y = path1[i][2];
                        ii = mmax(p.length, p2 && p2.length || 0);
                    }
                },
                pcoms1 = [], // path commands of original path p
                pcoms2 = [], // path commands of original path p2
                pfirst = "", // temporary holder for original path command
                pcom = ""; // holder for previous path command of original path
            for (var i = 0, ii = mmax(p.length, p2 && p2.length || 0); i < ii; i++) {
                p[i] && (pfirst = p[i][0]); // save current path command

                if (pfirst != "C") // C is not saved yet, because it may be result of conversion
                {
                    pcoms1[i] = pfirst; // Save current path command
                    i && ( pcom = pcoms1[i-1]); // Get previous path command pcom
                }
                p[i] = processPath(p[i], attrs, pcom); // Previous path command is inputted to processPath

                if (pcoms1[i] != "A" && pfirst == "C") pcoms1[i] = "C"; // A is the only command
                // which may produce multiple C:s
                // so we have to make sure that C is also C in original path

                fixArc(p, i); // fixArc adds also the right amount of A:s to pcoms1

                if (p2) { // the same procedures is done to p2
                    p2[i] && (pfirst = p2[i][0]);
                    if (pfirst != "C")
                    {
                        pcoms2[i] = pfirst;
                        i && (pcom = pcoms2[i-1]);
                    }
                    p2[i] = processPath(p2[i], attrs2, pcom);

                    if (pcoms2[i]!="A" && pfirst=="C") pcoms2[i]="C";

                    fixArc(p2, i);
                }
                fixM(p, p2, attrs, attrs2, i);
                fixM(p2, p, attrs2, attrs, i);
                var seg = p[i],
                    seg2 = p2 && p2[i],
                    seglen = seg.length,
                    seg2len = p2 && seg2.length;
                attrs.x = seg[seglen - 2];
                attrs.y = seg[seglen - 1];
                attrs.bx = toFloat(seg[seglen - 4]) || attrs.x;
                attrs.by = toFloat(seg[seglen - 3]) || attrs.y;
                attrs2.bx = p2 && (toFloat(seg2[seg2len - 4]) || attrs2.x);
                attrs2.by = p2 && (toFloat(seg2[seg2len - 3]) || attrs2.y);
                attrs2.x = p2 && seg2[seg2len - 2];
                attrs2.y = p2 && seg2[seg2len - 1];
            }
            if (!p2) {
                pth.curve = pathClone(p);
            }
            return p2 ? [p, p2] : p;
        }, null, pathClone),
        parseDots = R._parseDots = cacher(function (gradient) {
            var dots = [];
            for (var i = 0, ii = gradient.length; i < ii; i++) {
                var dot = {},
                    par = gradient[i].match(/^([^:]*):?([\d\.]*)/);
                dot.color = R.getRGB(par[1]);
                if (dot.color.error) {
                    return null;
                }
                dot.opacity = dot.color.opacity;
                dot.color = dot.color.hex;
                par[2] && (dot.offset = par[2] + "%");
                dots.push(dot);
            }
            for (i = 1, ii = dots.length - 1; i < ii; i++) {
                if (!dots[i].offset) {
                    var start = toFloat(dots[i - 1].offset || 0),
                        end = 0;
                    for (var j = i + 1; j < ii; j++) {
                        if (dots[j].offset) {
                            end = dots[j].offset;
                            break;
                        }
                    }
                    if (!end) {
                        end = 100;
                        j = ii;
                    }
                    end = toFloat(end);
                    var d = (end - start) / (j - i + 1);
                    for (; i < j; i++) {
                        start += d;
                        dots[i].offset = start + "%";
                    }
                }
            }
            return dots;
        }),
        tear = R._tear = function (el, paper) {
            el == paper.top && (paper.top = el.prev);
            el == paper.bottom && (paper.bottom = el.next);
            el.next && (el.next.prev = el.prev);
            el.prev && (el.prev.next = el.next);
        },
        tofront = R._tofront = function (el, paper) {
            if (paper.top === el) {
                return;
            }
            tear(el, paper);
            el.next = null;
            el.prev = paper.top;
            paper.top.next = el;
            paper.top = el;
        },
        toback = R._toback = function (el, paper) {
            if (paper.bottom === el) {
                return;
            }
            tear(el, paper);
            el.next = paper.bottom;
            el.prev = null;
            paper.bottom.prev = el;
            paper.bottom = el;
        },
        insertafter = R._insertafter = function (el, el2, paper) {
            tear(el, paper);
            el2 == paper.top && (paper.top = el);
            el2.next && (el2.next.prev = el);
            el.next = el2.next;
            el.prev = el2;
            el2.next = el;
        },
        insertbefore = R._insertbefore = function (el, el2, paper) {
            tear(el, paper);
            el2 == paper.bottom && (paper.bottom = el);
            el2.prev && (el2.prev.next = el);
            el.prev = el2.prev;
            el2.prev = el;
            el.next = el2;
        },
    /*\
     * Raphael.toMatrix
     [ method ]
     **
     * Utility method
     **
     * Returns matrix of transformations applied to a given path
     > Parameters
     - path (string) path string
     - transform (string|array) transformation string
     = (object) @Matrix
     \*/
        toMatrix = R.toMatrix = function (path, transform) {
            var bb = pathDimensions(path),
                el = {
                    _: {
                        transform: E
                    },
                    getBBox: function () {
                        return bb;
                    }
                };
            extractTransform(el, transform);
            return el.matrix;
        },
    /*\
     * Raphael.transformPath
     [ method ]
     **
     * Utility method
     **
     * Returns path transformed by a given transformation
     > Parameters
     - path (string) path string
     - transform (string|array) transformation string
     = (string) path
     \*/
        transformPath = R.transformPath = function (path, transform) {
            return mapPath(path, toMatrix(path, transform));
        },
        extractTransform = R._extractTransform = function (el, tstr) {
            if (tstr == null) {
                return el._.transform;
            }
            tstr = Str(tstr).replace(/\.{3}|\u2026/g, el._.transform || E);
            var tdata = R.parseTransformString(tstr),
                deg = 0,
                dx = 0,
                dy = 0,
                sx = 1,
                sy = 1,
                _ = el._,
                m = new Matrix;
            _.transform = tdata || [];
            if (tdata) {
                for (var i = 0, ii = tdata.length; i < ii; i++) {
                    var t = tdata[i],
                        tlen = t.length,
                        command = Str(t[0]).toLowerCase(),
                        absolute = t[0] != command,
                        inver = absolute ? m.invert() : 0,
                        x1,
                        y1,
                        x2,
                        y2,
                        bb;
                    if (command == "t" && tlen == 3) {
                        if (absolute) {
                            x1 = inver.x(0, 0);
                            y1 = inver.y(0, 0);
                            x2 = inver.x(t[1], t[2]);
                            y2 = inver.y(t[1], t[2]);
                            m.translate(x2 - x1, y2 - y1);
                        } else {
                            m.translate(t[1], t[2]);
                        }
                    } else if (command == "r") {
                        if (tlen == 2) {
                            bb = bb || el.getBBox(1);
                            m.rotate(t[1], bb.x + bb.width / 2, bb.y + bb.height / 2);
                            deg += t[1];
                        } else if (tlen == 4) {
                            if (absolute) {
                                x2 = inver.x(t[2], t[3]);
                                y2 = inver.y(t[2], t[3]);
                                m.rotate(t[1], x2, y2);
                            } else {
                                m.rotate(t[1], t[2], t[3]);
                            }
                            deg += t[1];
                        }
                    } else if (command == "s") {
                        if (tlen == 2 || tlen == 3) {
                            bb = bb || el.getBBox(1);
                            m.scale(t[1], t[tlen - 1], bb.x + bb.width / 2, bb.y + bb.height / 2);
                            sx *= t[1];
                            sy *= t[tlen - 1];
                        } else if (tlen == 5) {
                            if (absolute) {
                                x2 = inver.x(t[3], t[4]);
                                y2 = inver.y(t[3], t[4]);
                                m.scale(t[1], t[2], x2, y2);
                            } else {
                                m.scale(t[1], t[2], t[3], t[4]);
                            }
                            sx *= t[1];
                            sy *= t[2];
                        }
                    } else if (command == "m" && tlen == 7) {
                        m.add(t[1], t[2], t[3], t[4], t[5], t[6]);
                    }
                    _.dirtyT = 1;
                    el.matrix = m;
                }
            }

            /*\
             * Element.matrix
             [ property (object) ]
             **
             * Keeps @Matrix object, which represents element transformation
             \*/
            el.matrix = m;

            _.sx = sx;
            _.sy = sy;
            _.deg = deg;
            _.dx = dx = m.e;
            _.dy = dy = m.f;

            if (sx == 1 && sy == 1 && !deg && _.bbox) {
                _.bbox.x += +dx;
                _.bbox.y += +dy;
            } else {
                _.dirtyT = 1;
            }
        },
        getEmpty = function (item) {
            var l = item[0];
            switch (l.toLowerCase()) {
                case "t": return [l, 0, 0];
                case "m": return [l, 1, 0, 0, 1, 0, 0];
                case "r": if (item.length == 4) {
                    return [l, 0, item[2], item[3]];
                } else {
                    return [l, 0];
                }
                case "s": if (item.length == 5) {
                    return [l, 1, 1, item[3], item[4]];
                } else if (item.length == 3) {
                    return [l, 1, 1];
                } else {
                    return [l, 1];
                }
            }
        },
        equaliseTransform = R._equaliseTransform = function (t1, t2) {
            t2 = Str(t2).replace(/\.{3}|\u2026/g, t1);
            t1 = R.parseTransformString(t1) || [];
            t2 = R.parseTransformString(t2) || [];
            var maxlength = mmax(t1.length, t2.length),
                from = [],
                to = [],
                i = 0, j, jj,
                tt1, tt2;
            for (; i < maxlength; i++) {
                tt1 = t1[i] || getEmpty(t2[i]);
                tt2 = t2[i] || getEmpty(tt1);
                if ((tt1[0] != tt2[0]) ||
                    (tt1[0].toLowerCase() == "r" && (tt1[2] != tt2[2] || tt1[3] != tt2[3])) ||
                    (tt1[0].toLowerCase() == "s" && (tt1[3] != tt2[3] || tt1[4] != tt2[4]))
                ) {
                    return;
                }
                from[i] = [];
                to[i] = [];
                for (j = 0, jj = mmax(tt1.length, tt2.length); j < jj; j++) {
                    j in tt1 && (from[i][j] = tt1[j]);
                    j in tt2 && (to[i][j] = tt2[j]);
                }
            }
            return {
                from: from,
                to: to
            };
        };
    R._getContainer = function (x, y, w, h) {
        var container;
        container = h == null && !R.is(x, "object") ? g.doc.getElementById(x) : x;
        if (container == null) {
            return;
        }
        if (container.tagName) {
            if (y == null) {
                return {
                    container: container,
                    width: container.style.pixelWidth || container.offsetWidth,
                    height: container.style.pixelHeight || container.offsetHeight
                };
            } else {
                return {
                    container: container,
                    width: y,
                    height: w
                };
            }
        }
        return {
            container: 1,
            x: x,
            y: y,
            width: w,
            height: h
        };
    };
    /*\
     * Raphael.pathToRelative
     [ method ]
     **
     * Utility method
     **
     * Converts path to relative form
     > Parameters
     - pathString (string|array) path string or array of segments
     = (array) array of segments.
     \*/
    R.pathToRelative = pathToRelative;
    R._engine = {};
    /*\
     * Raphael.path2curve
     [ method ]
     **
     * Utility method
     **
     * Converts path to a new path where all segments are cubic bezier curves.
     > Parameters
     - pathString (string|array) path string or array of segments
     = (array) array of segments.
     \*/
    R.path2curve = path2curve;
    /*\
     * Raphael.matrix
     [ method ]
     **
     * Utility method
     **
     * Returns matrix based on given parameters.
     > Parameters
     - a (number)
     - b (number)
     - c (number)
     - d (number)
     - e (number)
     - f (number)
     = (object) @Matrix
     \*/
    R.matrix = function (a, b, c, d, e, f) {
        return new Matrix(a, b, c, d, e, f);
    };
    function Matrix(a, b, c, d, e, f) {
        if (a != null) {
            this.a = +a;
            this.b = +b;
            this.c = +c;
            this.d = +d;
            this.e = +e;
            this.f = +f;
        } else {
            this.a = 1;
            this.b = 0;
            this.c = 0;
            this.d = 1;
            this.e = 0;
            this.f = 0;
        }
    }
    (function (matrixproto) {
        /*\
         * Matrix.add
         [ method ]
         **
         * Adds given matrix to existing one.
         > Parameters
         - a (number)
         - b (number)
         - c (number)
         - d (number)
         - e (number)
         - f (number)
         or
         - matrix (object) @Matrix
         \*/
        matrixproto.add = function (a, b, c, d, e, f) {
            var out = [[], [], []],
                m = [[this.a, this.c, this.e], [this.b, this.d, this.f], [0, 0, 1]],
                matrix = [[a, c, e], [b, d, f], [0, 0, 1]],
                x, y, z, res;

            if (a && a instanceof Matrix) {
                matrix = [[a.a, a.c, a.e], [a.b, a.d, a.f], [0, 0, 1]];
            }

            for (x = 0; x < 3; x++) {
                for (y = 0; y < 3; y++) {
                    res = 0;
                    for (z = 0; z < 3; z++) {
                        res += m[x][z] * matrix[z][y];
                    }
                    out[x][y] = res;
                }
            }
            this.a = out[0][0];
            this.b = out[1][0];
            this.c = out[0][1];
            this.d = out[1][1];
            this.e = out[0][2];
            this.f = out[1][2];
        };
        /*\
         * Matrix.invert
         [ method ]
         **
         * Returns inverted version of the matrix
         = (object) @Matrix
         \*/
        matrixproto.invert = function () {
            var me = this,
                x = me.a * me.d - me.b * me.c;
            return new Matrix(me.d / x, -me.b / x, -me.c / x, me.a / x, (me.c * me.f - me.d * me.e) / x, (me.b * me.e - me.a * me.f) / x);
        };
        /*\
         * Matrix.clone
         [ method ]
         **
         * Returns copy of the matrix
         = (object) @Matrix
         \*/
        matrixproto.clone = function () {
            return new Matrix(this.a, this.b, this.c, this.d, this.e, this.f);
        };
        /*\
         * Matrix.translate
         [ method ]
         **
         * Translate the matrix
         > Parameters
         - x (number)
         - y (number)
         \*/
        matrixproto.translate = function (x, y) {
            this.add(1, 0, 0, 1, x, y);
        };
        /*\
         * Matrix.scale
         [ method ]
         **
         * Scales the matrix
         > Parameters
         - x (number)
         - y (number) #optional
         - cx (number) #optional
         - cy (number) #optional
         \*/
        matrixproto.scale = function (x, y, cx, cy) {
            y == null && (y = x);
            (cx || cy) && this.add(1, 0, 0, 1, cx, cy);
            this.add(x, 0, 0, y, 0, 0);
            (cx || cy) && this.add(1, 0, 0, 1, -cx, -cy);
        };
        /*\
         * Matrix.rotate
         [ method ]
         **
         * Rotates the matrix
         > Parameters
         - a (number)
         - x (number)
         - y (number)
         \*/
        matrixproto.rotate = function (a, x, y) {
            a = R.rad(a);
            x = x || 0;
            y = y || 0;
            var cos = +math.cos(a).toFixed(9),
                sin = +math.sin(a).toFixed(9);
            this.add(cos, sin, -sin, cos, x, y);
            this.add(1, 0, 0, 1, -x, -y);
        };
        /*\
         * Matrix.x
         [ method ]
         **
         * Return x coordinate for given point after transformation described by the matrix. See also @Matrix.y
         > Parameters
         - x (number)
         - y (number)
         = (number) x
         \*/
        matrixproto.x = function (x, y) {
            return x * this.a + y * this.c + this.e;
        };
        /*\
         * Matrix.y
         [ method ]
         **
         * Return y coordinate for given point after transformation described by the matrix. See also @Matrix.x
         > Parameters
         - x (number)
         - y (number)
         = (number) y
         \*/
        matrixproto.y = function (x, y) {
            return x * this.b + y * this.d + this.f;
        };
        matrixproto.get = function (i) {
            return +this[Str.fromCharCode(97 + i)].toFixed(4);
        };
        matrixproto.toString = function () {
            return R.svg ?
            "matrix(" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)].join() + ")" :
                [this.get(0), this.get(2), this.get(1), this.get(3), 0, 0].join();
        };
        matrixproto.toFilter = function () {
            return "progid:DXImageTransform.Microsoft.Matrix(M11=" + this.get(0) +
                ", M12=" + this.get(2) + ", M21=" + this.get(1) + ", M22=" + this.get(3) +
                ", Dx=" + this.get(4) + ", Dy=" + this.get(5) + ", sizingmethod='auto expand')";
        };
        matrixproto.offset = function () {
            return [this.e.toFixed(4), this.f.toFixed(4)];
        };
        function norm(a) {
            return a[0] * a[0] + a[1] * a[1];
        }
        function normalize(a) {
            var mag = math.sqrt(norm(a));
            a[0] && (a[0] /= mag);
            a[1] && (a[1] /= mag);
        }
        /*\
         * Matrix.split
         [ method ]
         **
         * Splits matrix into primitive transformations
         = (object) in format:
         o dx (number) translation by x
         o dy (number) translation by y
         o scalex (number) scale by x
         o scaley (number) scale by y
         o shear (number) shear
         o rotate (number) rotation in deg
         o isSimple (boolean) could it be represented via simple transformations
         \*/
        matrixproto.split = function () {
            var out = {};
            // translation
            out.dx = this.e;
            out.dy = this.f;

            // scale and shear
            var row = [[this.a, this.c], [this.b, this.d]];
            out.scalex = math.sqrt(norm(row[0]));
            normalize(row[0]);

            out.shear = row[0][0] * row[1][0] + row[0][1] * row[1][1];
            row[1] = [row[1][0] - row[0][0] * out.shear, row[1][1] - row[0][1] * out.shear];

            out.scaley = math.sqrt(norm(row[1]));
            normalize(row[1]);
            out.shear /= out.scaley;

            // rotation
            var sin = -row[0][1],
                cos = row[1][1];
            if (cos < 0) {
                out.rotate = R.deg(math.acos(cos));
                if (sin < 0) {
                    out.rotate = 360 - out.rotate;
                }
            } else {
                out.rotate = R.deg(math.asin(sin));
            }

            out.isSimple = !+out.shear.toFixed(9) && (out.scalex.toFixed(9) == out.scaley.toFixed(9) || !out.rotate);
            out.isSuperSimple = !+out.shear.toFixed(9) && out.scalex.toFixed(9) == out.scaley.toFixed(9) && !out.rotate;
            out.noRotation = !+out.shear.toFixed(9) && !out.rotate;
            return out;
        };
        /*\
         * Matrix.toTransformString
         [ method ]
         **
         * Return transform string that represents given matrix
         = (string) transform string
         \*/
        matrixproto.toTransformString = function (shorter) {
            var s = shorter || this[split]();
            if (s.isSimple) {
                s.scalex = +s.scalex.toFixed(4);
                s.scaley = +s.scaley.toFixed(4);
                s.rotate = +s.rotate.toFixed(4);
                return  (s.dx || s.dy ? "t" + [s.dx, s.dy] : E) +
                    (s.scalex != 1 || s.scaley != 1 ? "s" + [s.scalex, s.scaley, 0, 0] : E) +
                    (s.rotate ? "r" + [s.rotate, 0, 0] : E);
            } else {
                return "m" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)];
            }
        };
    })(Matrix.prototype);

    var preventDefault = function () {
            this.returnValue = false;
        },
        preventTouch = function () {
            return this.originalEvent.preventDefault();
        },
        stopPropagation = function () {
            this.cancelBubble = true;
        },
        stopTouch = function () {
            return this.originalEvent.stopPropagation();
        },
        getEventPosition = function (e) {
            var scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,
                scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft;

            return {
                x: e.clientX + scrollX,
                y: e.clientY + scrollY
            };
        },
        addEvent = (function () {
            if (g.doc.addEventListener) {
                return function (obj, type, fn, element) {
                    var f = function (e) {
                        var pos = getEventPosition(e);
                        return fn.call(element, e, pos.x, pos.y);
                    };
                    obj.addEventListener(type, f, false);

                    if (supportsTouch && touchMap[type]) {
                        var _f = function (e) {
                            var pos = getEventPosition(e),
                                olde = e;

                            for (var i = 0, ii = e.targetTouches && e.targetTouches.length; i < ii; i++) {
                                if (e.targetTouches[i].target == obj) {
                                    e = e.targetTouches[i];
                                    e.originalEvent = olde;
                                    e.preventDefault = preventTouch;
                                    e.stopPropagation = stopTouch;
                                    break;
                                }
                            }

                            return fn.call(element, e, pos.x, pos.y);
                        };
                        obj.addEventListener(touchMap[type], _f, false);
                    }

                    return function () {
                        obj.removeEventListener(type, f, false);

                        if (supportsTouch && touchMap[type])
                            obj.removeEventListener(touchMap[type], _f, false);

                        return true;
                    };
                };
            } else if (g.doc.attachEvent) {
                return function (obj, type, fn, element) {
                    var f = function (e) {
                        e = e || g.win.event;
                        var scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,
                            scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft,
                            x = e.clientX + scrollX,
                            y = e.clientY + scrollY;
                        e.preventDefault = e.preventDefault || preventDefault;
                        e.stopPropagation = e.stopPropagation || stopPropagation;
                        return fn.call(element, e, x, y);
                    };
                    obj.attachEvent("on" + type, f);
                    var detacher = function () {
                        obj.detachEvent("on" + type, f);
                        return true;
                    };
                    return detacher;
                };
            }
        })(),
        drag = [],
        dragMove = function (e) {
            var x = e.clientX,
                y = e.clientY,
                scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,
                scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft,
                dragi,
                j = drag.length;
            while (j--) {
                dragi = drag[j];
                if (supportsTouch && e.touches) {
                    var i = e.touches.length,
                        touch;
                    while (i--) {
                        touch = e.touches[i];
                        if (touch.identifier == dragi.el._drag.id) {
                            x = touch.clientX;
                            y = touch.clientY;
                            (e.originalEvent ? e.originalEvent : e).preventDefault();
                            break;
                        }
                    }
                } else {
                    e.preventDefault();
                }
                var node = dragi.el.node,
                    o,
                    next = node.nextSibling,
                    parent = node.parentNode,
                    display = node.style.display;
                g.win.opera && parent.removeChild(node);
                node.style.display = "none";
                o = dragi.el.paper.getElementByPoint(x, y);
                node.style.display = display;
                g.win.opera && (next ? parent.insertBefore(node, next) : parent.appendChild(node));
                o && eve("raphael.drag.over." + dragi.el.id, dragi.el, o);
                x += scrollX;
                y += scrollY;
                eve("raphael.drag.move." + dragi.el.id, dragi.move_scope || dragi.el, x - dragi.el._drag.x, y - dragi.el._drag.y, x, y, e);
            }
        },
        dragUp = function (e) {
            R.unmousemove(dragMove).unmouseup(dragUp);
            var i = drag.length,
                dragi;
            while (i--) {
                dragi = drag[i];
                dragi.el._drag = {};
                eve("raphael.drag.end." + dragi.el.id, dragi.end_scope || dragi.start_scope || dragi.move_scope || dragi.el, e);
            }
            drag = [];
        },
    /*\
     * Raphael.el
     [ property (object) ]
     **
     * You can add your own method to elements. This is usefull when you want to hack default functionality or
     * want to wrap some common transformation or attributes in one method. In difference to canvas methods,
     * you can redefine element method at any time. Expending element methods wouldn’t affect set.
     > Usage
     | Raphael.el.red = function () {
     |     this.attr({fill: "#f00"});
     | };
     | // then use it
     | paper.circle(100, 100, 20).red();
     \*/
        elproto = R.el = {};
    /*\
     * Element.click
     [ method ]
     **
     * Adds event handler for click for the element.
     > Parameters
     - handler (function) handler for the event
     = (object) @Element
     \*/
    /*\
     * Element.unclick
     [ method ]
     **
     * Removes event handler for click for the element.
     > Parameters
     - handler (function) #optional handler for the event
     = (object) @Element
     \*/

    /*\
     * Element.dblclick
     [ method ]
     **
     * Adds event handler for double click for the element.
     > Parameters
     - handler (function) handler for the event
     = (object) @Element
     \*/
    /*\
     * Element.undblclick
     [ method ]
     **
     * Removes event handler for double click for the element.
     > Parameters
     - handler (function) #optional handler for the event
     = (object) @Element
     \*/

    /*\
     * Element.mousedown
     [ method ]
     **
     * Adds event handler for mousedown for the element.
     > Parameters
     - handler (function) handler for the event
     = (object) @Element
     \*/
    /*\
     * Element.unmousedown
     [ method ]
     **
     * Removes event handler for mousedown for the element.
     > Parameters
     - handler (function) #optional handler for the event
     = (object) @Element
     \*/

    /*\
     * Element.mousemove
     [ method ]
     **
     * Adds event handler for mousemove for the element.
     > Parameters
     - handler (function) handler for the event
     = (object) @Element
     \*/
    /*\
     * Element.unmousemove
     [ method ]
     **
     * Removes event handler for mousemove for the element.
     > Parameters
     - handler (function) #optional handler for the event
     = (object) @Element
     \*/

    /*\
     * Element.mouseout
     [ method ]
     **
     * Adds event handler for mouseout for the element.
     > Parameters
     - handler (function) handler for the event
     = (object) @Element
     \*/
    /*\
     * Element.unmouseout
     [ method ]
     **
     * Removes event handler for mouseout for the element.
     > Parameters
     - handler (function) #optional handler for the event
     = (object) @Element
     \*/

    /*\
     * Element.mouseover
     [ method ]
     **
     * Adds event handler for mouseover for the element.
     > Parameters
     - handler (function) handler for the event
     = (object) @Element
     \*/
    /*\
     * Element.unmouseover
     [ method ]
     **
     * Removes event handler for mouseover for the element.
     > Parameters
     - handler (function) #optional handler for the event
     = (object) @Element
     \*/

    /*\
     * Element.mouseup
     [ method ]
     **
     * Adds event handler for mouseup for the element.
     > Parameters
     - handler (function) handler for the event
     = (object) @Element
     \*/
    /*\
     * Element.unmouseup
     [ method ]
     **
     * Removes event handler for mouseup for the element.
     > Parameters
     - handler (function) #optional handler for the event
     = (object) @Element
     \*/

    /*\
     * Element.touchstart
     [ method ]
     **
     * Adds event handler for touchstart for the element.
     > Parameters
     - handler (function) handler for the event
     = (object) @Element
     \*/
    /*\
     * Element.untouchstart
     [ method ]
     **
     * Removes event handler for touchstart for the element.
     > Parameters
     - handler (function) #optional handler for the event
     = (object) @Element
     \*/

    /*\
     * Element.touchmove
     [ method ]
     **
     * Adds event handler for touchmove for the element.
     > Parameters
     - handler (function) handler for the event
     = (object) @Element
     \*/
    /*\
     * Element.untouchmove
     [ method ]
     **
     * Removes event handler for touchmove for the element.
     > Parameters
     - handler (function) #optional handler for the event
     = (object) @Element
     \*/

    /*\
     * Element.touchend
     [ method ]
     **
     * Adds event handler for touchend for the element.
     > Parameters
     - handler (function) handler for the event
     = (object) @Element
     \*/
    /*\
     * Element.untouchend
     [ method ]
     **
     * Removes event handler for touchend for the element.
     > Parameters
     - handler (function) #optional handler for the event
     = (object) @Element
     \*/

    /*\
     * Element.touchcancel
     [ method ]
     **
     * Adds event handler for touchcancel for the element.
     > Parameters
     - handler (function) handler for the event
     = (object) @Element
     \*/
    /*\
     * Element.untouchcancel
     [ method ]
     **
     * Removes event handler for touchcancel for the element.
     > Parameters
     - handler (function) #optional handler for the event
     = (object) @Element
     \*/
    for (var i = events.length; i--;) {
        (function (eventName) {
            R[eventName] = elproto[eventName] = function (fn, scope) {
                if (R.is(fn, "function")) {
                    this.events = this.events || [];
                    this.events.push({name: eventName, f: fn, unbind: addEvent(this.shape || this.node || g.doc, eventName, fn, scope || this)});
                }
                return this;
            };
            R["un" + eventName] = elproto["un" + eventName] = function (fn) {
                var events = this.events || [],
                    l = events.length;
                while (l--){
                    if (events[l].name == eventName && (R.is(fn, "undefined") || events[l].f == fn)) {
                        events[l].unbind();
                        events.splice(l, 1);
                        !events.length && delete this.events;
                    }
                }
                return this;
            };
        })(events[i]);
    }

    /*\
     * Element.data
     [ method ]
     **
     * Adds or retrieves given value asociated with given key.
     **
     * See also @Element.removeData
     > Parameters
     - key (string) key to store data
     - value (any) #optional value to store
     = (object) @Element
     * or, if value is not specified:
     = (any) value
     * or, if key and value are not specified:
     = (object) Key/value pairs for all the data associated with the element.
     > Usage
     | for (var i = 0, i < 5, i++) {
     |     paper.circle(10 + 15 * i, 10, 10)
     |          .attr({fill: "#000"})
     |          .data("i", i)
     |          .click(function () {
     |             alert(this.data("i"));
     |          });
     | }
     \*/
    elproto.data = function (key, value) {
        var data = eldata[this.id] = eldata[this.id] || {};
        if (arguments.length == 0) {
            return data;
        }
        if (arguments.length == 1) {
            if (R.is(key, "object")) {
                for (var i in key) if (key[has](i)) {
                    this.data(i, key[i]);
                }
                return this;
            }
            eve("raphael.data.get." + this.id, this, data[key], key);
            return data[key];
        }
        data[key] = value;
        eve("raphael.data.set." + this.id, this, value, key);
        return this;
    };

    elproto.datum = function(){
        return arguments.length == 0 ? this._bindData : ((this._bindData = arguments[0]), this);
    };

    /*\
     * Element.removeData
     [ method ]
     **
     * Removes value associated with an element by given key.
     * If key is not provided, removes all the data of the element.
     > Parameters
     - key (string) #optional key
     = (object) @Element
     \*/
    elproto.removeData = function (key) {
        if (key == null) {
            eldata[this.id] = {};
        } else {
            eldata[this.id] && delete eldata[this.id][key];
        }
        return this;
    };
    /*\
     * Element.getData
     [ method ]
     **
     * Retrieves the element data
     = (object) data
     \*/
    elproto.getData = function () {
        return clone(eldata[this.id] || {});
    };
    /*\
     * Element.hover
     [ method ]
     **
     * Adds event handlers for hover for the element.
     > Parameters
     - f_in (function) handler for hover in
     - f_out (function) handler for hover out
     - icontext (object) #optional context for hover in handler
     - ocontext (object) #optional context for hover out handler
     = (object) @Element
     \*/
    elproto.hover = function (f_in, f_out, scope_in, scope_out) {
        return this.mouseover(f_in, scope_in).mouseout(f_out, scope_out || scope_in);
    };
    /*\
     * Element.unhover
     [ method ]
     **
     * Removes event handlers for hover for the element.
     > Parameters
     - f_in (function) handler for hover in
     - f_out (function) handler for hover out
     = (object) @Element
     \*/
    elproto.unhover = function (f_in, f_out) {
        return this.unmouseover(f_in).unmouseout(f_out);
    };
    var draggable = [];
    /*\
     * Element.drag
     [ method ]
     **
     * Adds event handlers for drag of the element.
     > Parameters
     - onmove (function) handler for moving
     - onstart (function) handler for drag start
     - onend (function) handler for drag end
     - mcontext (object) #optional context for moving handler
     - scontext (object) #optional context for drag start handler
     - econtext (object) #optional context for drag end handler
     * Additionaly following `drag` events will be triggered: `drag.start.<id>` on start,
     * `drag.end.<id>` on end and `drag.move.<id>` on every move. When element will be dragged over another element
     * `drag.over.<id>` will be fired as well.
     *
     * Start event and start handler will be called in specified context or in context of the element with following parameters:
     o x (number) x position of the mouse
     o y (number) y position of the mouse
     o event (object) DOM event object
     * Move event and move handler will be called in specified context or in context of the element with following parameters:
     o dx (number) shift by x from the start point
     o dy (number) shift by y from the start point
     o x (number) x position of the mouse
     o y (number) y position of the mouse
     o event (object) DOM event object
     * End event and end handler will be called in specified context or in context of the element with following parameters:
     o event (object) DOM event object
     = (object) @Element
     \*/
    elproto.drag = function (onmove, onstart, onend, move_scope, start_scope, end_scope) {
        function start(e) {
            (e.originalEvent || e).preventDefault();
            var x = e.clientX,
                y = e.clientY,
                scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,
                scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft;
            this._drag.id = e.identifier;
            if (supportsTouch && e.touches) {
                var i = e.touches.length, touch;
                while (i--) {
                    touch = e.touches[i];
                    this._drag.id = touch.identifier;
                    if (touch.identifier == this._drag.id) {
                        x = touch.clientX;
                        y = touch.clientY;
                        break;
                    }
                }
            }
            this._drag.x = x + scrollX;
            this._drag.y = y + scrollY;
            !drag.length && R.mousemove(dragMove).mouseup(dragUp);
            drag.push({el: this, move_scope: move_scope, start_scope: start_scope, end_scope: end_scope});
            onstart && eve.on("raphael.drag.start." + this.id, onstart);
            onmove && eve.on("raphael.drag.move." + this.id, onmove);
            onend && eve.on("raphael.drag.end." + this.id, onend);
            eve("raphael.drag.start." + this.id, start_scope || move_scope || this, e.clientX + scrollX, e.clientY + scrollY, e);
        }
        this._drag = {};
        draggable.push({el: this, start: start});
        this.mousedown(start);
        return this;
    };
    /*\
     * Element.onDragOver
     [ method ]
     **
     * Shortcut for assigning event handler for `drag.over.<id>` event, where id is id of the element (see @Element.id).
     > Parameters
     - f (function) handler for event, first argument would be the element you are dragging over
     \*/
    elproto.onDragOver = function (f) {
        f ? eve.on("raphael.drag.over." + this.id, f) : eve.unbind("raphael.drag.over." + this.id);
    };
    /*\
     * Element.undrag
     [ method ]
     **
     * Removes all drag event handlers from given element.
     \*/
    elproto.undrag = function () {
        var i = draggable.length;
        while (i--) if (draggable[i].el == this) {
            this.unmousedown(draggable[i].start);
            draggable.splice(i, 1);
            eve.unbind("raphael.drag.*." + this.id);
        }
        !draggable.length && R.unmousemove(dragMove).unmouseup(dragUp);
        drag = [];
    };
    /*\
     * Paper.circle
     [ method ]
     **
     * Draws a circle.
     **
     > Parameters
     **
     - x (number) x coordinate of the centre
     - y (number) y coordinate of the centre
     - r (number) radius
     = (object) Rapha?l element object with type “circle”
     **
     > Usage
     | var c = paper.circle(50, 50, 40);
     \*/
    paperproto.circle = function (x, y, r) {
        var out = R._engine.circle(this, x || 0, y || 0, r || 0);
        this.__set__ && this.__set__.push(out);
        return out;
    };
    /*\
     * Paper.rect
     [ method ]
     *
     * Draws a rectangle.
     **
     > Parameters
     **
     - x (number) x coordinate of the top left corner
     - y (number) y coordinate of the top left corner
     - width (number) width
     - height (number) height
     - r (number) #optional radius for rounded corners, default is 0
     = (object) Rapha?l element object with type “rect”
     **
     > Usage
     | // regular rectangle
     | var c = paper.rect(10, 10, 50, 50);
     | // rectangle with rounded corners
     | var c = paper.rect(40, 40, 50, 50, 10);
     \*/
    paperproto.rect = function (x, y, w, h, r) {
        var out = R._engine.rect(this, x || 0, y || 0, w || 0, h || 0, r || 0);
        this.__set__ && this.__set__.push(out);
        return out;
    };
    /*\
     * Paper.ellipse
     [ method ]
     **
     * Draws an ellipse.
     **
     > Parameters
     **
     - x (number) x coordinate of the centre
     - y (number) y coordinate of the centre
     - rx (number) horizontal radius
     - ry (number) vertical radius
     = (object) Rapha?l element object with type “ellipse”
     **
     > Usage
     | var c = paper.ellipse(50, 50, 40, 20);
     \*/
    paperproto.ellipse = function (x, y, rx, ry) {
        var out = R._engine.ellipse(this, x || 0, y || 0, rx || 0, ry || 0);
        this.__set__ && this.__set__.push(out);
        return out;
    };
    /*\
     * Paper.path
     [ method ]
     **
     * Creates a path element by given path data string.
     > Parameters
     - pathString (string) #optional path string in SVG format.
     * Path string consists of one-letter commands, followed by comma seprarated arguments in numercal form. Example:
     | "M10,20L30,40"
     * Here we can see two commands: “M”, with arguments `(10, 20)` and “L” with arguments `(30, 40)`. Upper case letter mean command is absolute, lower case—relative.
     *
     # <p>Here is short list of commands available, for more details see <a href="http://www.w3.org/TR/SVG/paths.html#PathData" title="Details of a path's data attribute's format are described in the SVG specification.">SVG path string format</a>.</p>
     # <table><thead><tr><th>Command</th><th>Name</th><th>Parameters</th></tr></thead><tbody>
     # <tr><td>M</td><td>moveto</td><td>(x y)+</td></tr>
     # <tr><td>Z</td><td>closepath</td><td>(none)</td></tr>
     # <tr><td>L</td><td>lineto</td><td>(x y)+</td></tr>
     # <tr><td>H</td><td>horizontal lineto</td><td>x+</td></tr>
     # <tr><td>V</td><td>vertical lineto</td><td>y+</td></tr>
     # <tr><td>C</td><td>curveto</td><td>(x1 y1 x2 y2 x y)+</td></tr>
     # <tr><td>S</td><td>smooth curveto</td><td>(x2 y2 x y)+</td></tr>
     # <tr><td>Q</td><td>quadratic Bézier curveto</td><td>(x1 y1 x y)+</td></tr>
     # <tr><td>T</td><td>smooth quadratic Bézier curveto</td><td>(x y)+</td></tr>
     # <tr><td>A</td><td>elliptical arc</td><td>(rx ry x-axis-rotation large-arc-flag sweep-flag x y)+</td></tr>
     # <tr><td>R</td><td><a href="http://en.wikipedia.org/wiki/Catmull–Rom_spline#Catmull.E2.80.93Rom_spline">Catmull-Rom curveto</a>*</td><td>x1 y1 (x y)+</td></tr></tbody></table>
     * * “Catmull-Rom curveto” is a not standard SVG command and added in 2.0 to make life easier.
     * Note: there is a special case when path consist of just three commands: “M10,10R…z”. In this case path will smoothly connects to its beginning.
     > Usage
     | var c = paper.path("M10 10L90 90");
     | // draw a diagonal line:
     | // move to 10,10, line to 90,90
     * For example of path strings, check out these icons: http://raphaeljs.com/icons/
     \*/
    paperproto.path = function (pathString) {
        pathString && !R.is(pathString, string) && !R.is(pathString[0], array) && (pathString += E);
        var out = R._engine.path(R.format[apply](R, arguments), this);
        this.__set__ && this.__set__.push(out);
        return out;
    };
    /*\
     * Paper.image
     [ method ]
     **
     * Embeds an image into the surface.
     **
     > Parameters
     **
     - src (string) URI of the source image
     - x (number) x coordinate position
     - y (number) y coordinate position
     - width (number) width of the image
     - height (number) height of the image
     = (object) Rapha?l element object with type “image”
     **
     > Usage
     | var c = paper.image("apple.png", 10, 10, 80, 80);
     \*/
    paperproto.image = function (src, x, y, w, h) {
        var out = R._engine.image(this, src || "about:blank", x || 0, y || 0, w || 0, h || 0);
        this.__set__ && this.__set__.push(out);
        return out;
    };
    /*\
     * Paper.text
     [ method ]
     **
     * Draws a text string. If you need line breaks, put “\n” in the string.
     **
     > Parameters
     **
     - x (number) x coordinate position
     - y (number) y coordinate position
     - text (string) The text string to draw
     = (object) Rapha?l element object with type “text”
     **
     > Usage
     | var t = paper.text(50, 50, "Rapha?l\nkicks\nbutt!");
     \*/
    paperproto.text = function (x, y, text) {
        var out = R._engine.text(this, x || 0, y || 0, Str(text));
        this.__set__ && this.__set__.push(out);
        return out;
    };
    /*\
     * Paper.set
     [ method ]
     **
     * Creates array-like object to keep and operate several elements at once.
     * Warning: it doesn’t create any elements for itself in the page, it just groups existing elements.
     * Sets act as pseudo elements — all methods available to an element can be used on a set.
     = (object) array-like object that represents set of elements
     **
     > Usage
     | var st = paper.set();
     | st.push(
     |     paper.circle(10, 10, 5),
     |     paper.circle(30, 10, 5)
     | );
     | st.attr({fill: "red"}); // changes the fill of both circles
     \*/
    paperproto.set = function (itemsArray) {
        !R.is(itemsArray, "array") && (itemsArray = Array.prototype.splice.call(arguments, 0, arguments.length));
        var out = new Set(itemsArray);
        this.__set__ && this.__set__.push(out);
        out["paper"] = this;
        out["type"] = "set";
        return out;
    };
    /*\
     * Paper.setStart
     [ method ]
     **
     * Creates @Paper.set. All elements that will be created after calling this method and before calling
     * @Paper.setFinish will be added to the set.
     **
     > Usage
     | paper.setStart();
     | paper.circle(10, 10, 5),
     | paper.circle(30, 10, 5)
     | var st = paper.setFinish();
     | st.attr({fill: "red"}); // changes the fill of both circles
     \*/
    paperproto.setStart = function (set) {
        this.__set__ = set || this.set();
    };
    /*\
     * Paper.setFinish
     [ method ]
     **
     * See @Paper.setStart. This method finishes catching and returns resulting set.
     **
     = (object) set
     \*/
    paperproto.setFinish = function (set) {
        var out = this.__set__;
        delete this.__set__;
        return out;
    };
    /*\
     * Paper.getSize
     [ method ]
     **
     * Obtains current paper actual size.
     **
     = (object)
     \*/
    paperproto.getSize = function () {
        var container = this.canvas.parentNode;
        return {
            width: container.offsetWidth,
            height: container.offsetHeight
        };
    };
    /*\
     * Paper.setSize
     [ method ]
     **
     * If you need to change dimensions of the canvas call this method
     **
     > Parameters
     **
     - width (number) new width of the canvas
     - height (number) new height of the canvas
     \*/
    paperproto.setSize = function (width, height) {
        return R._engine.setSize.call(this, width, height);
    };
    /*\
     * Paper.setViewBox
     [ method ]
     **
     * Sets the view box of the paper. Practically it gives you ability to zoom and pan whole paper surface by
     * specifying new boundaries.
     **
     > Parameters
     **
     - x (number) new x position, default is `0`
     - y (number) new y position, default is `0`
     - w (number) new width of the canvas
     - h (number) new height of the canvas
     - fit (boolean) `true` if you want graphics to fit into new boundary box
     \*/
    paperproto.setViewBox = function (x, y, w, h, fit) {
        return R._engine.setViewBox.call(this, x, y, w, h, fit);
    };
    /*\
     * Paper.top
     [ property ]
     **
     * Points to the topmost element on the paper
     \*/
    /*\
     * Paper.bottom
     [ property ]
     **
     * Points to the bottom element on the paper
     \*/
    paperproto.top = paperproto.bottom = null;
    /*\
     * Paper.raphael
     [ property ]
     **
     * Points to the @Raphael object/function
     \*/
    paperproto.raphael = R;
    var getOffset = function (elem) {
        var box = elem.getBoundingClientRect(),
            doc = elem.ownerDocument,
            body = doc.body,
            docElem = doc.documentElement,
            clientTop = docElem.clientTop || body.clientTop || 0, clientLeft = docElem.clientLeft || body.clientLeft || 0,
            top  = box.top  + (g.win.pageYOffset || docElem.scrollTop || body.scrollTop ) - clientTop,
            left = box.left + (g.win.pageXOffset || docElem.scrollLeft || body.scrollLeft) - clientLeft;
        return {
            y: top,
            x: left
        };
    };
    /*\
     * Paper.getElementByPoint
     [ method ]
     **
     * Returns you topmost element under given point.
     **
     = (object) Rapha?l element object
     > Parameters
     **
     - x (number) x coordinate from the top left corner of the window
     - y (number) y coordinate from the top left corner of the window
     > Usage
     | paper.getElementByPoint(mouseX, mouseY).attr({stroke: "#f00"});
     \*/
    paperproto.getElementByPoint = function (x, y) {
        var paper = this,
            svg = paper.canvas,
            target = g.doc.elementFromPoint(x, y);
        if (g.win.opera && target.tagName == "svg") {
            var so = getOffset(svg),
                sr = svg.createSVGRect();
            sr.x = x - so.x;
            sr.y = y - so.y;
            sr.width = sr.height = 1;
            var hits = svg.getIntersectionList(sr, null);
            if (hits.length) {
                target = hits[hits.length - 1];
            }
        }
        if (!target) {
            return null;
        }
        while (target.parentNode && target != svg.parentNode && !target.raphael) {
            target = target.parentNode;
        }
        target == paper.canvas.parentNode && (target = svg);
        target = target && target.raphael ? paper.getById(target.raphaelid) : null;
        return target;
    };

    /*\
     * Paper.getElementsByBBox
     [ method ]
     **
     * Returns set of elements that have an intersecting bounding box
     **
     > Parameters
     **
     - bbox (object) bbox to check with
     = (object) @Set
     \*/
    paperproto.getElementsByBBox = function (bbox) {
        var set = this.set();
        this.forEach(function (el) {
            if (R.isBBoxIntersect(el.getBBox(), bbox)) {
                set.push(el);
            }
        });
        return set;
    };

    /*\
     * Paper.getById
     [ method ]
     **
     * Returns you element by its internal ID.
     **
     > Parameters
     **
     - id (number) id
     = (object) Rapha?l element object
     \*/
    paperproto.getById = function (id) {
        var bot = this.bottom;
        while (bot) {
            if (bot.id == id) {
                return bot;
            }
            bot = bot.next;
        }
        return null;
    };
    /*\
     * Paper.forEach
     [ method ]
     **
     * Executes given function for each element on the paper
     *
     * If callback function returns `false` it will stop loop running.
     **
     > Parameters
     **
     - callback (function) function to run
     - thisArg (object) context object for the callback
     = (object) Paper object
     > Usage
     | paper.forEach(function (el) {
     |     el.attr({ stroke: "blue" });
     | });
     \*/
    paperproto.forEach = function (callback, thisArg) {
        var bot = this.bottom;
        while (bot) {
            if (callback.call(thisArg, bot) === false) {
                return this;
            }
            bot = bot.next;
        }
        return this;
    };
    /*\
     * Paper.getElementsByPoint
     [ method ]
     **
     * Returns set of elements that have common point inside
     **
     > Parameters
     **
     - x (number) x coordinate of the point
     - y (number) y coordinate of the point
     = (object) @Set
     \*/
    paperproto.getElementsByPoint = function (x, y) {
        var set = this.set();
        this.forEach(function (el) {
            if (el.isPointInside(x, y)) {
                set.push(el);
            }
        });
        return set;
    };
    function x_y() {
        return this.x + S + this.y;
    }
    function x_y_w_h() {
        return this.x + S + this.y + S + this.width + " \xd7 " + this.height;
    }
    /*\
     * Element.isPointInside
     [ method ]
     **
     * Determine if given point is inside this element’s shape
     **
     > Parameters
     **
     - x (number) x coordinate of the point
     - y (number) y coordinate of the point
     = (boolean) `true` if point inside the shape
     \*/
    elproto.isPointInside = function (x, y) {
        var rp = this.realPath = getPath[this.type](this);
        if (this.attr('transform') && this.attr('transform').length) {
            rp = R.transformPath(rp, this.attr('transform'));
        }
        return R.isPointInsidePath(rp, x, y);
    };
    /*\
     * Element.getBBox
     [ method ]
     **
     * Return bounding box for a given element
     **
     > Parameters
     **
     - isWithoutTransform (boolean) flag, `true` if you want to have bounding box before transformations. Default is `false`.
     = (object) Bounding box object:
     o {
     o     x: (number) top left corner x
     o     y: (number) top left corner y
     o     x2: (number) bottom right corner x
     o     y2: (number) bottom right corner y
     o     width: (number) width
     o     height: (number) height
     o }
     \*/
    elproto.getBBox = function (isWithoutTransform) {
        if (this.removed) {
            return {};
        }
        var _ = this._;
        if (isWithoutTransform) {
            if (_.dirty || !_.bboxwt) {
                this.realPath = getPath[this.type](this);
                _.bboxwt = pathDimensions(this.realPath);
                _.bboxwt.toString = x_y_w_h;
                _.dirty = 0;
            }
            return _.bboxwt;
        }
        if (_.dirty || _.dirtyT || !_.bbox) {
            if (_.dirty || !this.realPath) {
                _.bboxwt = 0;
                this.realPath = getPath[this.type](this);
            }
            _.bbox = pathDimensions(mapPath(this.realPath, this.matrix));
            _.bbox.toString = x_y_w_h;
            _.dirty = _.dirtyT = 0;
        }
        return _.bbox;
    };
    /*\
     * Element.clone
     [ method ]
     **
     = (object) clone of a given element
     **
     \*/
    elproto.clone = function () {
        if (this.removed) {
            return null;
        }
        var out = this.paper[this.type]().attr(this.attr());
        this.__set__ && this.__set__.push(out);
        return out;
    };
    /*\
     * Element.glow
     [ method ]
     **
     * Return set of elements that create glow-like effect around given element. See @Paper.set.
     *
     * Note: Glow is not connected to the element. If you change element attributes it won’t adjust itself.
     **
     > Parameters
     **
     - glow (object) #optional parameters object with all properties optional:
     o {
     o     width (number) size of the glow, default is `10`
     o     fill (boolean) will it be filled, default is `false`
     o     opacity (number) opacity, default is `0.5`
     o     offsetx (number) horizontal offset, default is `0`
     o     offsety (number) vertical offset, default is `0`
     o     color (string) glow colour, default is `black`
     o }
     = (object) @Paper.set of elements that represents glow
     \*/
    elproto.glow = function (glow) {
        if (this.type == "text") {
            return null;
        }
        glow = glow || {};
        var s = {
                width: (glow.width || 10) + (+this.attr("stroke-width") || 1),
                fill: glow.fill || false,
                opacity: glow.opacity == null ? .5 : glow.opacity,
                offsetx: glow.offsetx || 0,
                offsety: glow.offsety || 0,
                color: glow.color || "#000"
            },
            c = s.width / 2,
            r = this.paper,
            out = r.set(),
            path = this.realPath || getPath[this.type](this);
        path = this.matrix ? mapPath(path, this.matrix) : path;
        for (var i = 1; i < c + 1; i++) {
            out.push(r.path(path).attr({
                stroke: s.color,
                fill: s.fill ? s.color : "none",
                "stroke-linejoin": "round",
                "stroke-linecap": "round",
                "stroke-width": +(s.width / c * i).toFixed(3),
                opacity: +(s.opacity / c).toFixed(3)
            }));
        }
        return out.insertBefore(this).translate(s.offsetx, s.offsety);
    };
    var curveslengths = {},
        getPointAtSegmentLength = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, length) {
            if (length == null) {
                return bezlen(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y);
            } else {
                return R.findDotsAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, getTatLen(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, length));
            }
        },
        getLengthFactory = function (istotal, subpath) {
            return function (path, length, onlystart) {
                path = path2curve(path);
                var x, y, p, l, sp = "", subpaths = {}, point,
                    len = 0;
                for (var i = 0, ii = path.length; i < ii; i++) {
                    p = path[i];
                    if (p[0] == "M") {
                        x = +p[1];
                        y = +p[2];
                    } else {
                        l = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6]);
                        if (len + l > length) {
                            if (subpath && !subpaths.start) {
                                point = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6], length - len);
                                sp += ["C" + point.start.x, point.start.y, point.m.x, point.m.y, point.x, point.y];
                                if (onlystart) {return sp;}
                                subpaths.start = sp;
                                sp = ["M" + point.x, point.y + "C" + point.n.x, point.n.y, point.end.x, point.end.y, p[5], p[6]].join();
                                len += l;
                                x = +p[5];
                                y = +p[6];
                                continue;
                            }
                            if (!istotal && !subpath) {
                                point = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6], length - len);
                                return {x: point.x, y: point.y, alpha: point.alpha};
                            }
                        }
                        len += l;
                        x = +p[5];
                        y = +p[6];
                    }
                    sp += p.shift() + p;
                }
                subpaths.end = sp;
                point = istotal ? len : subpath ? subpaths : R.findDotsAtSegment(x, y, p[0], p[1], p[2], p[3], p[4], p[5], 1);
                point.alpha && (point = {x: point.x, y: point.y, alpha: point.alpha});
                return point;
            };
        };
    var getTotalLength = getLengthFactory(1),
        getPointAtLength = getLengthFactory(),
        getSubpathsAtLength = getLengthFactory(0, 1);
    /*\
     * Raphael.getTotalLength
     [ method ]
     **
     * Returns length of the given path in pixels.
     **
     > Parameters
     **
     - path (string) SVG path string.
     **
     = (number) length.
     \*/
    R.getTotalLength = getTotalLength;
    /*\
     * Raphael.getPointAtLength
     [ method ]
     **
     * Return coordinates of the point located at the given length on the given path.
     **
     > Parameters
     **
     - path (string) SVG path string
     - length (number)
     **
     = (object) representation of the point:
     o {
     o     x: (number) x coordinate
     o     y: (number) y coordinate
     o     alpha: (number) angle of derivative
     o }
     \*/
    R.getPointAtLength = getPointAtLength;
    /*\
     * Raphael.getSubpath
     [ method ]
     **
     * Return subpath of a given path from given length to given length.
     **
     > Parameters
     **
     - path (string) SVG path string
     - from (number) position of the start of the segment
     - to (number) position of the end of the segment
     **
     = (string) pathstring for the segment
     \*/
    R.getSubpath = function (path, from, to) {
        if (this.getTotalLength(path) - to < 1e-6) {
            return getSubpathsAtLength(path, from).end;
        }
        var a = getSubpathsAtLength(path, to, 1);
        return from ? getSubpathsAtLength(a, from).end : a;
    };
    /*\
     * Element.getTotalLength
     [ method ]
     **
     * Returns length of the path in pixels. Only works for element of “path” type.
     = (number) length.
     \*/
    elproto.getTotalLength = function () {
        var path = this.getPath();
        if (!path) {
            return;
        }

        if (this.node.getTotalLength) {
            return this.node.getTotalLength();
        }

        return getTotalLength(path);
    };
    /*\
     * Element.getPointAtLength
     [ method ]
     **
     * Return coordinates of the point located at the given length on the given path. Only works for element of “path” type.
     **
     > Parameters
     **
     - length (number)
     **
     = (object) representation of the point:
     o {
     o     x: (number) x coordinate
     o     y: (number) y coordinate
     o     alpha: (number) angle of derivative
     o }
     \*/
    elproto.getPointAtLength = function (length) {
        var path = this.getPath();
        if (!path) {
            return;
        }

        return getPointAtLength(path, length);
    };
    /*\
     * Element.getPath
     [ method ]
     **
     * Returns path of the element. Only works for elements of “path” type and simple elements like circle.
     = (object) path
     **
     \*/
    elproto.getPath = function () {
        var path,
            getPath = R._getPath[this.type];

        if (this.type == "text" || this.type == "set") {
            return;
        }

        if (getPath) {
            path = getPath(this);
        }

        return path;
    };
    /*\
     * Element.getSubpath
     [ method ]
     **
     * Return subpath of a given element from given length to given length. Only works for element of “path” type.
     **
     > Parameters
     **
     - from (number) position of the start of the segment
     - to (number) position of the end of the segment
     **
     = (string) pathstring for the segment
     \*/
    elproto.getSubpath = function (from, to) {
        var path = this.getPath();
        if (!path) {
            return;
        }

        return R.getSubpath(path, from, to);
    };
    /*\
     * Raphael.easing_formulas
     [ property ]
     **
     * Object that contains easing formulas for animation. You could extend it with your own. By default it has following list of easing:
     # <ul>
     #     <li>“linear”</li>
     #     <li>“&lt;” or “easeIn” or “ease-in”</li>
     #     <li>“>” or “easeOut” or “ease-out”</li>
     #     <li>“&lt;>” or “easeInOut” or “ease-in-out”</li>
     #     <li>“backIn” or “back-in”</li>
     #     <li>“backOut” or “back-out”</li>
     #     <li>“elastic”</li>
     #     <li>“bounce”</li>
     # </ul>
     # <p>See also <a href="http://raphaeljs.com/easing.html">Easing demo</a>.</p>
     \*/
    var ef = R.easing_formulas = {
        linear: function (n) {
            return n;
        },
        "<": function (n) {
            return pow(n, 1.7);
        },
        ">": function (n) {
            return pow(n, .48);
        },
        "<>": function (n) {
            var q = .48 - n / 1.04,
                Q = math.sqrt(.1734 + q * q),
                x = Q - q,
                X = pow(abs(x), 1 / 3) * (x < 0 ? -1 : 1),
                y = -Q - q,
                Y = pow(abs(y), 1 / 3) * (y < 0 ? -1 : 1),
                t = X + Y + .5;
            return (1 - t) * 3 * t * t + t * t * t;
        },
        backIn: function (n) {
            var s = 1.70158;
            return n * n * ((s + 1) * n - s);
        },
        backOut: function (n) {
            n = n - 1;
            var s = 1.70158;
            return n * n * ((s + 1) * n + s) + 1;
        },
        elastic: function (n) {
            if (n == !!n) {
                return n;
            }
            return pow(2, -10 * n) * math.sin((n - .075) * (2 * PI) / .3) + 1;
        },
        bounce: function (n) {
            var s = 7.5625,
                p = 2.75,
                l;
            if (n < (1 / p)) {
                l = s * n * n;
            } else {
                if (n < (2 / p)) {
                    n -= (1.5 / p);
                    l = s * n * n + .75;
                } else {
                    if (n < (2.5 / p)) {
                        n -= (2.25 / p);
                        l = s * n * n + .9375;
                    } else {
                        n -= (2.625 / p);
                        l = s * n * n + .984375;
                    }
                }
            }
            return l;
        }
    };
    ef.easeIn = ef["ease-in"] = ef["<"];
    ef.easeOut = ef["ease-out"] = ef[">"];
    ef.easeInOut = ef["ease-in-out"] = ef["<>"];
    ef["back-in"] = ef.backIn;
    ef["back-out"] = ef.backOut;

    var animationElements = [],
        requestAnimFrame = window.requestAnimationFrame       ||
            window.webkitRequestAnimationFrame ||
            window.mozRequestAnimationFrame    ||
            window.oRequestAnimationFrame      ||
            window.msRequestAnimationFrame     ||
            function (callback) {
                setTimeout(callback, 16);
            },
        animation = function () {
            var Now = +new Date,
                l = 0;
            for (; l < animationElements.length; l++) {
                var e = animationElements[l];
                if (e.el.removed || e.paused) {
                    continue;
                }
                var time = Now - e.start,
                    ms = e.ms,
                    easing = e.easing,
                    from = e.from,
                    diff = e.diff,
                    to = e.to,
                    t = e.t,
                    that = e.el,
                    set = {},
                    now,
                    init = {},
                    key;
                if (e.initstatus) {
                    time = (e.initstatus * e.anim.top - e.prev) / (e.percent - e.prev) * ms;
                    e.status = e.initstatus;
                    delete e.initstatus;
                    e.stop && animationElements.splice(l--, 1);
                } else {
                    e.status = (e.prev + (e.percent - e.prev) * (time / ms)) / e.anim.top;
                }
                if (time < 0) {
                    continue;
                }
                if (time < ms) {
                    var pos = easing(time / ms);
                    for (var attr in from) if (from[has](attr)) {
                        switch (availableAnimAttrs[attr]) {
                            case nu:
                                now = +from[attr] + pos * ms * diff[attr];
                                break;
                            case "colour":
                                now = "rgb(" + [
                                        upto255(round(from[attr].r + pos * ms * diff[attr].r)),
                                        upto255(round(from[attr].g + pos * ms * diff[attr].g)),
                                        upto255(round(from[attr].b + pos * ms * diff[attr].b))
                                    ].join(",") + ")";
                                break;
                            case "path":
                                now = [];
                                for (var i = 0, ii = from[attr].length; i < ii; i++) {
                                    now[i] = [from[attr][i][0]];
                                    for (var j = 1, jj = from[attr][i].length; j < jj; j++) {
                                        now[i][j] = +from[attr][i][j] + pos * ms * diff[attr][i][j];
                                    }
                                    now[i] = now[i].join(S);
                                }
                                now = now.join(S);
                                break;
                            case "transform":
                                if (diff[attr].real) {
                                    now = [];
                                    for (i = 0, ii = from[attr].length; i < ii; i++) {
                                        now[i] = [from[attr][i][0]];
                                        for (j = 1, jj = from[attr][i].length; j < jj; j++) {
                                            now[i][j] = from[attr][i][j] + pos * ms * diff[attr][i][j];
                                        }
                                    }
                                } else {
                                    var get = function (i) {
                                        return +from[attr][i] + pos * ms * diff[attr][i];
                                    };
                                    // now = [["r", get(2), 0, 0], ["t", get(3), get(4)], ["s", get(0), get(1), 0, 0]];
                                    now = [["m", get(0), get(1), get(2), get(3), get(4), get(5)]];
                                }
                                break;
                            case "csv":
                                if (attr == "clip-rect") {
                                    now = [];
                                    i = 4;
                                    while (i--) {
                                        now[i] = +from[attr][i] + pos * ms * diff[attr][i];
                                    }
                                }
                                break;
                            default:
                                var from2 = [][concat](from[attr]);
                                now = [];
                                i = that.paper.customAttributes[attr].length;
                                while (i--) {
                                    now[i] = +from2[i] + pos * ms * diff[attr][i];
                                }
                                break;
                        }
                        set[attr] = now;
                    }
                    that.attr(set);
                    (function (id, that, anim) {
                        setTimeout(function () {
                            eve("raphael.anim.frame." + id, that, anim);
                        });
                    })(that.id, that, e.anim);
                } else {
                    (function(f, el, a) {
                        setTimeout(function() {
                            eve("raphael.anim.frame." + el.id, el, a);
                            eve("raphael.anim.finish." + el.id, el, a);
                            R.is(f, "function") && f.call(el);
                        });
                    })(e.callback, that, e.anim);
                    that.attr(to);
                    animationElements.splice(l--, 1);
                    if (e.repeat > 1 && !e.next) {
                        for (key in to) if (to[has](key)) {
                            init[key] = e.totalOrigin[key];
                        }
                        e.el.attr(init);
                        runAnimation(e.anim, e.el, e.anim.percents[0], null, e.totalOrigin, e.repeat - 1);
                    }
                    if (e.next && !e.stop) {
                        runAnimation(e.anim, e.el, e.next, null, e.totalOrigin, e.repeat);
                    }
                }
            }
            animationElements.length && requestAnimFrame(animation);
        },
        upto255 = function (color) {
            return color > 255 ? 255 : color < 0 ? 0 : color;
        };
    /*\
     * Element.animateWith
     [ method ]
     **
     * Acts similar to @Element.animate, but ensure that given animation runs in sync with another given element.
     **
     > Parameters
     **
     - el (object) element to sync with
     - anim (object) animation to sync with
     - params (object) #optional final attributes for the element, see also @Element.attr
     - ms (number) #optional number of milliseconds for animation to run
     - easing (string) #optional easing type. Accept on of @Raphael.easing_formulas or CSS format: `cubic&#x2010;bezier(XX,&#160;XX,&#160;XX,&#160;XX)`
     - callback (function) #optional callback function. Will be called at the end of animation.
     * or
     - element (object) element to sync with
     - anim (object) animation to sync with
     - animation (object) #optional animation object, see @Raphael.animation
     **
     = (object) original element
     \*/
    elproto.animateWith = function (el, anim, params, ms, easing, callback) {
        var element = this;
        if (element.removed) {
            callback && callback.call(element);
            return element;
        }
        var a = params instanceof Animation ? params : R.animation(params, ms, easing, callback),
            x, y;
        runAnimation(a, element, a.percents[0], null, element.attr());
        for (var i = 0, ii = animationElements.length; i < ii; i++) {
            if (animationElements[i].anim == anim && animationElements[i].el == el) {
                animationElements[ii - 1].start = animationElements[i].start;
                break;
            }
        }
        return element;
        //
        //
        // var a = params ? R.animation(params, ms, easing, callback) : anim,
        //     status = element.status(anim);
        // return this.animate(a).status(a, status * anim.ms / a.ms);
    };
    function CubicBezierAtTime(t, p1x, p1y, p2x, p2y, duration) {
        var cx = 3 * p1x,
            bx = 3 * (p2x - p1x) - cx,
            ax = 1 - cx - bx,
            cy = 3 * p1y,
            by = 3 * (p2y - p1y) - cy,
            ay = 1 - cy - by;
        function sampleCurveX(t) {
            return ((ax * t + bx) * t + cx) * t;
        }
        function solve(x, epsilon) {
            var t = solveCurveX(x, epsilon);
            return ((ay * t + by) * t + cy) * t;
        }
        function solveCurveX(x, epsilon) {
            var t0, t1, t2, x2, d2, i;
            for(t2 = x, i = 0; i < 8; i++) {
                x2 = sampleCurveX(t2) - x;
                if (abs(x2) < epsilon) {
                    return t2;
                }
                d2 = (3 * ax * t2 + 2 * bx) * t2 + cx;
                if (abs(d2) < 1e-6) {
                    break;
                }
                t2 = t2 - x2 / d2;
            }
            t0 = 0;
            t1 = 1;
            t2 = x;
            if (t2 < t0) {
                return t0;
            }
            if (t2 > t1) {
                return t1;
            }
            while (t0 < t1) {
                x2 = sampleCurveX(t2);
                if (abs(x2 - x) < epsilon) {
                    return t2;
                }
                if (x > x2) {
                    t0 = t2;
                } else {
                    t1 = t2;
                }
                t2 = (t1 - t0) / 2 + t0;
            }
            return t2;
        }
        return solve(t, 1 / (200 * duration));
    }
    elproto.onAnimation = function (f) {
        f ? eve.on("raphael.anim.frame." + this.id, f) : eve.unbind("raphael.anim.frame." + this.id);
        return this;
    };
    function Animation(anim, ms) {
        var percents = [],
            newAnim = {};
        this.ms = ms;
        this.times = 1;
        if (anim) {
            for (var attr in anim) if (anim[has](attr)) {
                newAnim[toFloat(attr)] = anim[attr];
                percents.push(toFloat(attr));
            }
            percents.sort(sortByNumber);
        }
        this.anim = newAnim;
        this.top = percents[percents.length - 1];
        this.percents = percents;
    }
    /*\
     * Animation.delay
     [ method ]
     **
     * Creates a copy of existing animation object with given delay.
     **
     > Parameters
     **
     - delay (number) number of ms to pass between animation start and actual animation
     **
     = (object) new altered Animation object
     | var anim = Raphael.animation({cx: 10, cy: 20}, 2e3);
     | circle1.animate(anim); // run the given animation immediately
     | circle2.animate(anim.delay(500)); // run the given animation after 500 ms
     \*/
    Animation.prototype.delay = function (delay) {
        var a = new Animation(this.anim, this.ms);
        a.times = this.times;
        a.del = +delay || 0;
        return a;
    };
    /*\
     * Animation.repeat
     [ method ]
     **
     * Creates a copy of existing animation object with given repetition.
     **
     > Parameters
     **
     - repeat (number) number iterations of animation. For infinite animation pass `Infinity`
     **
     = (object) new altered Animation object
     \*/
    Animation.prototype.repeat = function (times) {
        var a = new Animation(this.anim, this.ms);
        a.del = this.del;
        a.times = math.floor(mmax(times, 0)) || 1;
        return a;
    };
    function runAnimation(anim, element, percent, status, totalOrigin, times) {
        percent = toFloat(percent);
        var params,
            isInAnim,
            isInAnimSet,
            percents = [],
            next,
            prev,
            timestamp,
            ms = anim.ms,
            from = {},
            to = {},
            diff = {};
        if (status) {
            for (i = 0, ii = animationElements.length; i < ii; i++) {
                var e = animationElements[i];
                if (e.el.id == element.id && e.anim == anim) {
                    if (e.percent != percent) {
                        animationElements.splice(i, 1);
                        isInAnimSet = 1;
                    } else {
                        isInAnim = e;
                    }
                    element.attr(e.totalOrigin);
                    break;
                }
            }
        } else {
            status = +to; // NaN
        }
        for (var i = 0, ii = anim.percents.length; i < ii; i++) {
            if (anim.percents[i] == percent || anim.percents[i] > status * anim.top) {
                percent = anim.percents[i];
                prev = anim.percents[i - 1] || 0;
                ms = ms / anim.top * (percent - prev);
                next = anim.percents[i + 1];
                params = anim.anim[percent];
                break;
            } else if (status) {
                element.attr(anim.anim[anim.percents[i]]);
            }
        }
        if (!params) {
            return;
        }
        if (!isInAnim) {
            for (var attr in params) if (params[has](attr)) {
                if (availableAnimAttrs[has](attr) || element.paper.customAttributes[has](attr)) {
                    from[attr] = element.attr(attr);
                    (from[attr] == null) && (from[attr] = availableAttrs[attr]);
                    to[attr] = params[attr];
                    switch (availableAnimAttrs[attr]) {
                        case nu:
                            diff[attr] = (to[attr] - from[attr]) / ms;
                            break;
                        case "colour":
                            from[attr] = R.getRGB(from[attr]);
                            var toColour = R.getRGB(to[attr]);
                            diff[attr] = {
                                r: (toColour.r - from[attr].r) / ms,
                                g: (toColour.g - from[attr].g) / ms,
                                b: (toColour.b - from[attr].b) / ms
                            };
                            break;
                        case "path":
                            var pathes = path2curve(from[attr], to[attr]),
                                toPath = pathes[1];
                            from[attr] = pathes[0];
                            diff[attr] = [];
                            for (i = 0, ii = from[attr].length; i < ii; i++) {
                                diff[attr][i] = [0];
                                for (var j = 1, jj = from[attr][i].length; j < jj; j++) {
                                    diff[attr][i][j] = (toPath[i][j] - from[attr][i][j]) / ms;
                                }
                            }
                            break;
                        case "transform":
                            var _ = element._,
                                eq = equaliseTransform(_[attr], to[attr]);
                            if (eq) {
                                from[attr] = eq.from;
                                to[attr] = eq.to;
                                diff[attr] = [];
                                diff[attr].real = true;
                                for (i = 0, ii = from[attr].length; i < ii; i++) {
                                    diff[attr][i] = [from[attr][i][0]];
                                    for (j = 1, jj = from[attr][i].length; j < jj; j++) {
                                        diff[attr][i][j] = (to[attr][i][j] - from[attr][i][j]) / ms;
                                    }
                                }
                            } else {
                                var m = (element.matrix || new Matrix),
                                    to2 = {
                                        _: {transform: _.transform},
                                        getBBox: function () {
                                            return element.getBBox(1);
                                        }
                                    };
                                from[attr] = [
                                    m.a,
                                    m.b,
                                    m.c,
                                    m.d,
                                    m.e,
                                    m.f
                                ];
                                extractTransform(to2, to[attr]);
                                to[attr] = to2._.transform;
                                diff[attr] = [
                                    (to2.matrix.a - m.a) / ms,
                                    (to2.matrix.b - m.b) / ms,
                                    (to2.matrix.c - m.c) / ms,
                                    (to2.matrix.d - m.d) / ms,
                                    (to2.matrix.e - m.e) / ms,
                                    (to2.matrix.f - m.f) / ms
                                ];
                                // from[attr] = [_.sx, _.sy, _.deg, _.dx, _.dy];
                                // var to2 = {_:{}, getBBox: function () { return element.getBBox(); }};
                                // extractTransform(to2, to[attr]);
                                // diff[attr] = [
                                //     (to2._.sx - _.sx) / ms,
                                //     (to2._.sy - _.sy) / ms,
                                //     (to2._.deg - _.deg) / ms,
                                //     (to2._.dx - _.dx) / ms,
                                //     (to2._.dy - _.dy) / ms
                                // ];
                            }
                            break;
                        case "csv":
                            var values = Str(params[attr])[split](separator),
                                from2 = Str(from[attr])[split](separator);
                            if (attr == "clip-rect") {
                                from[attr] = from2;
                                diff[attr] = [];
                                i = from2.length;
                                while (i--) {
                                    diff[attr][i] = (values[i] - from[attr][i]) / ms;
                                }
                            }
                            to[attr] = values;
                            break;
                        default:
                            values = [][concat](params[attr]);
                            from2 = [][concat](from[attr]);
                            diff[attr] = [];
                            i = element.paper.customAttributes[attr].length;
                            while (i--) {
                                diff[attr][i] = ((values[i] || 0) - (from2[i] || 0)) / ms;
                            }
                            break;
                    }
                }
            }
            var easing = params.easing,
                easyeasy = R.easing_formulas[easing];
            if (!easyeasy) {
                easyeasy = Str(easing).match(bezierrg);
                if (easyeasy && easyeasy.length == 5) {
                    var curve = easyeasy;
                    easyeasy = function (t) {
                        return CubicBezierAtTime(t, +curve[1], +curve[2], +curve[3], +curve[4], ms);
                    };
                } else {
                    easyeasy = pipe;
                }
            }
            timestamp = params.start || anim.start || +new Date;
            e = {
                anim: anim,
                percent: percent,
                timestamp: timestamp,
                start: timestamp + (anim.del || 0),
                status: 0,
                initstatus: status || 0,
                stop: false,
                ms: ms,
                easing: easyeasy,
                from: from,
                diff: diff,
                to: to,
                el: element,
                callback: params.callback,
                prev: prev,
                next: next,
                repeat: times || anim.times,
                origin: element.attr(),
                totalOrigin: totalOrigin
            };
            animationElements.push(e);
            if (status && !isInAnim && !isInAnimSet) {
                e.stop = true;
                e.start = new Date - ms * status;
                if (animationElements.length == 1) {
                    return animation();
                }
            }
            if (isInAnimSet) {
                e.start = new Date - e.ms * status;
            }
            animationElements.length == 1 && requestAnimFrame(animation);
        } else {
            isInAnim.initstatus = status;
            isInAnim.start = new Date - isInAnim.ms * status;
        }
        eve("raphael.anim.start." + element.id, element, anim);
    }
    /*\
     * Raphael.animation
     [ method ]
     **
     * Creates an animation object that can be passed to the @Element.animate or @Element.animateWith methods.
     * See also @Animation.delay and @Animation.repeat methods.
     **
     > Parameters
     **
     - params (object) final attributes for the element, see also @Element.attr
     - ms (number) number of milliseconds for animation to run
     - easing (string) #optional easing type. Accept one of @Raphael.easing_formulas or CSS format: `cubic&#x2010;bezier(XX,&#160;XX,&#160;XX,&#160;XX)`
     - callback (function) #optional callback function. Will be called at the end of animation.
     **
     = (object) @Animation
     \*/
    R.animation = function (params, ms, easing, callback) {
        if (params instanceof Animation) {
            return params;
        }
        if (R.is(easing, "function") || !easing) {
            callback = callback || easing || null;
            easing = null;
        }
        params = Object(params);
        ms = +ms || 0;
        var p = {},
            json,
            attr;
        for (attr in params) if (params[has](attr) && toFloat(attr) != attr && toFloat(attr) + "%" != attr) {
            json = true;
            p[attr] = params[attr];
        }
        if (!json) {
            // if percent-like syntax is used and end-of-all animation callback used
            if(callback){
                // find the last one
                var lastKey = 0;
                for(var i in params){
                    var percent = toInt(i);
                    if(params[has](i) && percent > lastKey){
                        lastKey = percent;
                    }
                }
                lastKey += '%';
                // if already defined callback in the last keyframe, skip
                !params[lastKey].callback && (params[lastKey].callback = callback);
            }
            return new Animation(params, ms);
        } else {
            easing && (p.easing = easing);
            callback && (p.callback = callback);
            return new Animation({100: p}, ms);
        }
    };
    /*\
     * Element.animate
     [ method ]
     **
     * Creates and starts animation for given element.
     **
     > Parameters
     **
     - params (object) final attributes for the element, see also @Element.attr
     - ms (number) number of milliseconds for animation to run
     - easing (string) #optional easing type. Accept one of @Raphael.easing_formulas or CSS format: `cubic&#x2010;bezier(XX,&#160;XX,&#160;XX,&#160;XX)`
     - callback (function) #optional callback function. Will be called at the end of animation.
     * or
     - animation (object) animation object, see @Raphael.animation
     **
     = (object) original element
     \*/
    elproto.animate = function (params, ms, easing, callback) {
        var element = this;
        if (element.removed) {
            callback && callback.call(element);
            return element;
        }
        var anim = params instanceof Animation ? params : R.animation(params, ms, easing, callback);
        runAnimation(anim, element, anim.percents[0], null, element.attr());
        return element;
    };
    /*\
     * Element.setTime
     [ method ]
     **
     * Sets the status of animation of the element in milliseconds. Similar to @Element.status method.
     **
     > Parameters
     **
     - anim (object) animation object
     - value (number) number of milliseconds from the beginning of the animation
     **
     = (object) original element if `value` is specified
     * Note, that during animation following events are triggered:
     *
     * On each animation frame event `anim.frame.<id>`, on start `anim.start.<id>` and on end `anim.finish.<id>`.
     \*/
    elproto.setTime = function (anim, value) {
        if (anim && value != null) {
            this.status(anim, mmin(value, anim.ms) / anim.ms);
        }
        return this;
    };
    /*\
     * Element.status
     [ method ]
     **
     * Gets or sets the status of animation of the element.
     **
     > Parameters
     **
     - anim (object) #optional animation object
     - value (number) #optional 0 – 1. If specified, method works like a setter and sets the status of a given animation to the value. This will cause animation to jump to the given position.
     **
     = (number) status
     * or
     = (array) status if `anim` is not specified. Array of objects in format:
     o {
     o     anim: (object) animation object
     o     status: (number) status
     o }
     * or
     = (object) original element if `value` is specified
     \*/
    elproto.status = function (anim, value) {
        var out = [],
            i = 0,
            len,
            e;
        if (value != null) {
            runAnimation(anim, this, -1, mmin(value, 1));
            return this;
        } else {
            len = animationElements.length;
            for (; i < len; i++) {
                e = animationElements[i];
                if (e.el.id == this.id && (!anim || e.anim == anim)) {
                    if (anim) {
                        return e.status;
                    }
                    out.push({
                        anim: e.anim,
                        status: e.status
                    });
                }
            }
            if (anim) {
                return 0;
            }
            return out;
        }
    };
    /*\
     * Element.pause
     [ method ]
     **
     * Stops animation of the element with ability to resume it later on.
     **
     > Parameters
     **
     - anim (object) #optional animation object
     **
     = (object) original element
     \*/
    elproto.pause = function (anim) {
        for (var i = 0; i < animationElements.length; i++) if (animationElements[i].el.id == this.id && (!anim || animationElements[i].anim == anim)) {
            if (eve("raphael.anim.pause." + this.id, this, animationElements[i].anim) !== false) {
                animationElements[i].paused = true;
            }
        }
        return this;
    };
    /*\
     * Element.resume
     [ method ]
     **
     * Resumes animation if it was paused with @Element.pause method.
     **
     > Parameters
     **
     - anim (object) #optional animation object
     **
     = (object) original element
     \*/
    elproto.resume = function (anim) {
        for (var i = 0; i < animationElements.length; i++) if (animationElements[i].el.id == this.id && (!anim || animationElements[i].anim == anim)) {
            var e = animationElements[i];
            if (eve("raphael.anim.resume." + this.id, this, e.anim) !== false) {
                delete e.paused;
                this.status(e.anim, e.status);
            }
        }
        return this;
    };
    /*\
     * Element.stop
     [ method ]
     **
     * Stops animation of the element.
     **
     > Parameters
     **
     - anim (object) #optional animation object
     **
     = (object) original element
     \*/
    elproto.stop = function (anim) {
        for (var i = 0; i < animationElements.length; i++) if (animationElements[i].el.id == this.id && (!anim || animationElements[i].anim == anim)) {
            if (eve("raphael.anim.stop." + this.id, this, animationElements[i].anim) !== false) {
                animationElements.splice(i--, 1);
            }
        }
        return this;
    };
    function stopAnimation(paper) {
        for (var i = 0; i < animationElements.length; i++) if (animationElements[i].el.paper == paper) {
            animationElements.splice(i--, 1);
        }
    }
    eve.on("raphael.remove", stopAnimation);
    eve.on("raphael.clear", stopAnimation);
    elproto.toString = function () {
        return "Rapha\xebl\u2019s object";
    };

    // Set
    var Set = function (items) {
            this.items = [];
            this.length = 0;
            this.type = "set";
            if (items) {
                for (var i = 0, ii = items.length; i < ii; i++) {
                    if (items[i] && (items[i].constructor == elproto.constructor || items[i].constructor == Set)) {
                        this[this.items.length] = this.items[this.items.length] = items[i];
                        this.length++;
                    }
                }
            }
        },
        setproto = Set.prototype;
    /*\
     * Set.push
     [ method ]
     **
     * Adds each argument to the current set.
     = (object) original element
     \*/
    setproto.push = function () {
        var item,
            len;
        for (var i = 0, ii = arguments.length; i < ii; i++) {
            item = arguments[i];
            if (item && (item.constructor == elproto.constructor || item.constructor == Set)) {
                len = this.items.length;
                this[len] = this.items[len] = item;
                this.length++;
            }
        }
        return this;
    };
    /*\
     * Set.pop
     [ method ]
     **
     * Removes last element and returns it.
     = (object) element
     \*/
    setproto.pop = function () {
        this.length && delete this[this.length--];
        return this.items.pop();
    };
    /*\
     * Set.forEach
     [ method ]
     **
     * Executes given function for each element in the set.
     *
     * If function returns `false` it will stop loop running.
     **
     > Parameters
     **
     - callback (function) function to run
     - thisArg (object) context object for the callback
     = (object) Set object
     \*/
    setproto.forEach = function (callback, thisArg) {
        for (var i = 0, ii = this.items.length; i < ii; i++) {
            if (callback.call(thisArg, this.items[i], i) === false) {
                return this;
            }
        }
        return this;
    };
    for (var method in elproto) if (elproto[has](method)) {
        setproto[method] = (function (methodname) {
            return function () {
                var arg = arguments;
                return this.forEach(function (el) {
                    el[methodname][apply](el, arg);
                });
            };
        })(method);
    }
    setproto.attr = function (name, value) {
        if (name && R.is(name, array) && R.is(name[0], "object")) {
            for (var j = 0, jj = name.length; j < jj; j++) {
                this.items[j].attr(name[j]);
            }
        } else {
            for (var i = 0, ii = this.items.length; i < ii; i++) {
                this.items[i].attr(name, value);
            }
        }
        return this;
    };
    /*\
     * Set.clear
     [ method ]
     **
     * Removes all elements from the set
     \*/
    setproto.clear = function () {
        while (this.length) {
            this.pop();
        }
    };
    /*\
     * Set.splice
     [ method ]
     **
     * Removes given element from the set
     **
     > Parameters
     **
     - index (number) position of the deletion
     - count (number) number of element to remove
     - insertion… (object) #optional elements to insert
     = (object) set elements that were deleted
     \*/
    setproto.splice = function (index, count, insertion) {
        index = index < 0 ? mmax(this.length + index, 0) : index;
        count = mmax(0, mmin(this.length - index, count));
        var tail = [],
            todel = [],
            args = [],
            i;
        for (i = 2; i < arguments.length; i++) {
            args.push(arguments[i]);
        }
        for (i = 0; i < count; i++) {
            todel.push(this[index + i]);
        }
        for (; i < this.length - index; i++) {
            tail.push(this[index + i]);
        }
        var arglen = args.length;
        for (i = 0; i < arglen + tail.length; i++) {
            this.items[index + i] = this[index + i] = i < arglen ? args[i] : tail[i - arglen];
        }
        i = this.items.length = this.length -= count - arglen;
        while (this[i]) {
            delete this[i++];
        }
        return new Set(todel);
    };
    /*\
     * Set.exclude
     [ method ]
     **
     * Removes given element from the set
     **
     > Parameters
     **
     - element (object) element to remove
     = (boolean) `true` if object was found & removed from the set
     \*/
    setproto.exclude = function (el) {
        for (var i = 0, ii = this.length; i < ii; i++) if (this[i] == el) {
            this.splice(i, 1);
            return true;
        }
    };
    setproto.animate = function (params, ms, easing, callback) {
        (R.is(easing, "function") || !easing) && (callback = easing || null);
        var len = this.items.length,
            i = len,
            item,
            set = this,
            collector;
        if (!len) {
            return this;
        }
        callback && (collector = function () {
            !--len && callback.call(set);
        });
        easing = R.is(easing, string) ? easing : collector;
        var anim = R.animation(params, ms, easing, collector);
        item = this.items[--i].animate(anim);
        while (i--) {
            this.items[i] && !this.items[i].removed && this.items[i].animateWith(item, anim, anim);
            (this.items[i] && !this.items[i].removed) || len--;
        }
        return this;
    };
    setproto.insertAfter = function (el) {
        var i = this.items.length;
        while (i--) {
            this.items[i].insertAfter(el);
        }
        return this;
    };
    setproto.getBBox = function () {
        var x = [],
            y = [],
            x2 = [],
            y2 = [];
        for (var i = this.items.length; i--;) if (!this.items[i].removed) {
            var box = this.items[i].getBBox();
            x.push(box.x);
            y.push(box.y);
            x2.push(box.x + box.width);
            y2.push(box.y + box.height);
        }
        x = mmin[apply](0, x);
        y = mmin[apply](0, y);
        x2 = mmax[apply](0, x2);
        y2 = mmax[apply](0, y2);
        return {
            x: x,
            y: y,
            x2: x2,
            y2: y2,
            width: x2 - x,
            height: y2 - y
        };
    };
    setproto.clone = function (s) {
        s = this.paper.set();
        for (var i = 0, ii = this.items.length; i < ii; i++) {
            s.push(this.items[i].clone());
        }
        return s;
    };
    setproto.toString = function () {
        return "Rapha\xebl\u2018s set";
    };

    setproto.glow = function(glowConfig) {
        var ret = this.paper.set();
        this.forEach(function(shape, index){
            var g = shape.glow(glowConfig);
            if(g != null){
                g.forEach(function(shape2, index2){
                    ret.push(shape2);
                });
            }
        });
        return ret;
    };


    /*\
     * Set.isPointInside
     [ method ]
     **
     * Determine if given point is inside this set’s elements
     **
     > Parameters
     **
     - x (number) x coordinate of the point
     - y (number) y coordinate of the point
     = (boolean) `true` if point is inside any of the set's elements
     \*/
    setproto.isPointInside = function (x, y) {
        var isPointInside = false;
        this.forEach(function (el) {
            if (el.isPointInside(x, y)) {
                isPointInside = true;
                return false; // stop loop
            }
        });
        return isPointInside;
    };

    /*\
     * Raphael.registerFont
     [ method ]
     **
     * Adds given font to the registered set of fonts for Rapha?l. Should be used as an internal call from within Cufón’s font file.
     * Returns original parameter, so it could be used with chaining.
     # <a href="http://wiki.github.com/sorccu/cufon/about">More about Cufón and how to convert your font form TTF, OTF, etc to JavaScript file.</a>
     **
     > Parameters
     **
     - font (object) the font to register
     = (object) the font you passed in
     > Usage
     | Cufon.registerFont(Raphael.registerFont({…}));
     \*/
    R.registerFont = function (font) {
        if (!font.face) {
            return font;
        }
        this.fonts = this.fonts || {};
        var fontcopy = {
                w: font.w,
                face: {},
                glyphs: {}
            },
            family = font.face["font-family"];
        for (var prop in font.face) if (font.face[has](prop)) {
            fontcopy.face[prop] = font.face[prop];
        }
        if (this.fonts[family]) {
            this.fonts[family].push(fontcopy);
        } else {
            this.fonts[family] = [fontcopy];
        }
        if (!font.svg) {
            fontcopy.face["units-per-em"] = toInt(font.face["units-per-em"], 10);
            for (var glyph in font.glyphs) if (font.glyphs[has](glyph)) {
                var path = font.glyphs[glyph];
                fontcopy.glyphs[glyph] = {
                    w: path.w,
                    k: {},
                    d: path.d && "M" + path.d.replace(/[mlcxtrv]/g, function (command) {
                        return {l: "L", c: "C", x: "z", t: "m", r: "l", v: "c"}[command] || "M";
                    }) + "z"
                };
                if (path.k) {
                    for (var k in path.k) if (path[has](k)) {
                        fontcopy.glyphs[glyph].k[k] = path.k[k];
                    }
                }
            }
        }
        return font;
    };
    /*\
     * Paper.getFont
     [ method ]
     **
     * Finds font object in the registered fonts by given parameters. You could specify only one word from the font name, like “Myriad” for “Myriad Pro”.
     **
     > Parameters
     **
     - family (string) font family name or any word from it
     - weight (string) #optional font weight
     - style (string) #optional font style
     - stretch (string) #optional font stretch
     = (object) the font object
     > Usage
     | paper.print(100, 100, "Test string", paper.getFont("Times", 800), 30);
     \*/
    paperproto.getFont = function (family, weight, style, stretch) {
        stretch = stretch || "normal";
        style = style || "normal";
        weight = +weight || {normal: 400, bold: 700, lighter: 300, bolder: 800}[weight] || 400;
        if (!R.fonts) {
            return;
        }
        var font = R.fonts[family];
        if (!font) {
            var name = new RegExp("(^|\\s)" + family.replace(/[^\w\d\s+!~.:_-]/g, E) + "(\\s|$)", "i");
            for (var fontName in R.fonts) if (R.fonts[has](fontName)) {
                if (name.test(fontName)) {
                    font = R.fonts[fontName];
                    break;
                }
            }
        }
        var thefont;
        if (font) {
            for (var i = 0, ii = font.length; i < ii; i++) {
                thefont = font[i];
                if (thefont.face["font-weight"] == weight && (thefont.face["font-style"] == style || !thefont.face["font-style"]) && thefont.face["font-stretch"] == stretch) {
                    break;
                }
            }
        }
        return thefont;
    };
    /*\
     * Paper.print
     [ method ]
     **
     * Creates path that represent given text written using given font at given position with given size.
     * Result of the method is path element that contains whole text as a separate path.
     **
     > Parameters
     **
     - x (number) x position of the text
     - y (number) y position of the text
     - string (string) text to print
     - font (object) font object, see @Paper.getFont
     - size (number) #optional size of the font, default is `16`
     - origin (string) #optional could be `"baseline"` or `"middle"`, default is `"middle"`
     - letter_spacing (number) #optional number in range `-1..1`, default is `0`
     - line_spacing (number) #optional number in range `1..3`, default is `1`
     = (object) resulting path element, which consist of all letters
     > Usage
     | var txt = r.print(10, 50, "print", r.getFont("Museo"), 30).attr({fill: "#fff"});
     \*/
    paperproto.print = function (x, y, string, font, size, origin, letter_spacing, line_spacing) {
        origin = origin || "middle"; // baseline|middle
        letter_spacing = mmax(mmin(letter_spacing || 0, 1), -1);
        line_spacing = mmax(mmin(line_spacing || 1, 3), 1);
        var letters = Str(string)[split](E),
            shift = 0,
            notfirst = 0,
            path = E,
            scale;
        R.is(font, "string") && (font = this.getFont(font));
        if (font) {
            scale = (size || 16) / font.face["units-per-em"];
            var bb = font.face.bbox[split](separator),
                top = +bb[0],
                lineHeight = bb[3] - bb[1],
                shifty = 0,
                height = +bb[1] + (origin == "baseline" ? lineHeight + (+font.face.descent) : lineHeight / 2);
            for (var i = 0, ii = letters.length; i < ii; i++) {
                if (letters[i] == "\n") {
                    shift = 0;
                    curr = 0;
                    notfirst = 0;
                    shifty += lineHeight * line_spacing;
                } else {
                    var prev = notfirst && font.glyphs[letters[i - 1]] || {},
                        curr = font.glyphs[letters[i]];
                    shift += notfirst ? (prev.w || font.w) + (prev.k && prev.k[letters[i]] || 0) + (font.w * letter_spacing) : 0;
                    notfirst = 1;
                }
                if (curr && curr.d) {
                    path += R.transformPath(curr.d, ["t", shift * scale, shifty * scale, "s", scale, scale, top, height, "t", (x - top) / scale, (y - height) / scale]);
                }
            }
        }
        return this.path(path).attr({
            fill: "#000",
            stroke: "none"
        });
    };

    /*\
     * Paper.add
     [ method ]
     **
     * Imports elements in JSON array in format `{type: type, <attributes>}`
     **
     > Parameters
     **
     - json (array)
     = (object) resulting set of imported elements
     > Usage
     | paper.add([
     |     {
     |         type: "circle",
     |         cx: 10,
     |         cy: 10,
     |         r: 5
     |     },
     |     {
     |         type: "rect",
     |         x: 10,
     |         y: 10,
     |         width: 10,
     |         height: 10,
     |         fill: "#fc0"
     |     }
     | ]);
     \*/
    paperproto.add = function (json) {
        if (R.is(json, "array")) {
            var res = this.set(),
                i = 0,
                ii = json.length,
                j;
            for (; i < ii; i++) {
                j = json[i] || {};
                elements[has](j.type) && res.push(this[j.type]().attr(j));
            }
        }
        return res;
    };

    /*\
     * Raphael.format
     [ method ]
     **
     * Simple format function. Replaces construction of type “`{<number>}`” to the corresponding argument.
     **
     > Parameters
     **
     - token (string) string to format
     - … (string) rest of arguments will be treated as parameters for replacement
     = (string) formated string
     > Usage
     | var x = 10,
     |     y = 20,
     |     width = 40,
     |     height = 50;
     | // this will draw a rectangular shape equivalent to "M10,20h40v50h-40z"
     | paper.path(Raphael.format("M{0},{1}h{2}v{3}h{4}z", x, y, width, height, -width));
     \*/
    R.format = function (token, params) {
        var args = R.is(params, array) ? [0][concat](params) : arguments;
        token && R.is(token, string) && args.length - 1 && (token = token.replace(formatrg, function (str, i) {
            return args[++i] == null ? E : args[i];
        }));
        return token || E;
    };
    /*\
     * Raphael.fullfill
     [ method ]
     **
     * A little bit more advanced format function than @Raphael.format. Replaces construction of type “`{<name>}`” to the corresponding argument.
     **
     > Parameters
     **
     - token (string) string to format
     - json (object) object which properties will be used as a replacement
     = (string) formated string
     > Usage
     | // this will draw a rectangular shape equivalent to "M10,20h40v50h-40z"
     | paper.path(Raphael.fullfill("M{x},{y}h{dim.width}v{dim.height}h{dim['negative width']}z", {
     |     x: 10,
     |     y: 20,
     |     dim: {
     |         width: 40,
     |         height: 50,
     |         "negative width": -40
     |     }
     | }));
     \*/
    R.fullfill = (function () {
        var tokenRegex = /\{([^\}]+)\}/g,
            objNotationRegex = /(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g, // matches .xxxxx or ["xxxxx"] to run over object properties
            replacer = function (all, key, obj) {
                var res = obj;
                key.replace(objNotationRegex, function (all, name, quote, quotedName, isFunc) {
                    name = name || quotedName;
                    if (res) {
                        if (name in res) {
                            res = res[name];
                        }
                        typeof res == "function" && isFunc && (res = res());
                    }
                });
                res = (res == null || res == obj ? all : res) + "";
                return res;
            };
        return function (str, obj) {
            return String(str).replace(tokenRegex, function (all, key) {
                return replacer(all, key, obj);
            });
        };
    })();
    /*\
     * Raphael.ninja
     [ method ]
     **
     * If you want to leave no trace of Rapha?l (Well, Rapha?l creates only one global variable `Raphael`, but anyway.) You can use `ninja` method.
     * Beware, that in this case plugins could stop working, because they are depending on global variable existence.
     **
     = (object) Raphael object
     > Usage
     | (function (local_raphael) {
     |     var paper = local_raphael(10, 10, 320, 200);
     |     …
     | })(Raphael.ninja());
     \*/
    R.ninja = function () {
        oldRaphael.was ? (g.win.Raphael = oldRaphael.is) : delete Raphael;
        return R;
    };
    /*\
     * Raphael.st
     [ property (object) ]
     **
     * You can add your own method to elements and sets. It is wise to add a set method for each element method
     * you added, so you will be able to call the same method on sets too.
     **
     * See also @Raphael.el.
     > Usage
     | Raphael.el.red = function () {
     |     this.attr({fill: "#f00"});
     | };
     | Raphael.st.red = function () {
     |     this.forEach(function (el) {
     |         el.red();
     |     });
     | };
     | // then use it
     | paper.set(paper.circle(100, 100, 20), paper.circle(110, 100, 20)).red();
     \*/
    R.st = setproto;

    eve.on("raphael.DOMload", function () {
        loaded = true;
    });

    // Firefox <3.6 fix: http://webreflection.blogspot.com/2009/11/195-chars-to-help-lazy-loading.html
    (function (doc, loaded, f) {
        if (doc.readyState == null && doc.addEventListener){
            doc.addEventListener(loaded, f = function () {
                doc.removeEventListener(loaded, f, false);
                doc.readyState = "complete";
            }, false);
            doc.readyState = "loading";
        }
        function isLoaded() {
            (/in/).test(doc.readyState) ? setTimeout(isLoaded, 9) : R.eve("raphael.DOMload");
        }
        isLoaded();
    })(document, "DOMContentLoaded");

    return R;
}));

// ┌─────────────────────────────────────────────────────────────────────┐ \\
// │ Rapha?l 2.1.4 - JavaScript Vector Library                       │ \\
// ├─────────────────────────────────────────────────────────────────────┤ \\
// │ SVG Module                                                          │ \\
// ├─────────────────────────────────────────────────────────────────────┤ \\
// │ Copyright (c) 2008-2011 Dmitry Baranovskiy (http://raphaeljs.com)   │ \\
// │ Copyright (c) 2008-2011 Sencha Labs (http://sencha.com)             │ \\
// │ Licensed under the MIT (http://raphaeljs.com/license.html) license. │ \\
// └─────────────────────────────────────────────────────────────────────┘ \\

(function (glob, factory) {
    if (typeof define === "function" && define.amd) {
        define("raphael.svg", ["raphael.core"], function(raphael) {
            return factory(raphael);
        });
    } else if (typeof exports === "object") {
        factory(require("raphael.core"));
    } else {
        factory(glob.Raphael);
    }
}(this, function(R) {
    if (R && !R.svg) {
        return;
    }

    var has = "hasOwnProperty",
        Str = String,
        toFloat = parseFloat,
        toInt = parseInt,
        math = Math,
        mmax = math.max,
        abs = math.abs,
        pow = math.pow,
        separator = /[, ]+/,
        eve = R.eve,
        E = "",
        S = " ";
    var xlink = "http://www.w3.org/1999/xlink",
        markers = {
            block: "M5,0 0,2.5 5,5z",
            classic: "M5,0 0,2.5 5,5 3.5,3 3.5,2z",
            diamond: "M2.5,0 5,2.5 2.5,5 0,2.5z",
            open: "M6,1 1,3.5 6,6",
            oval: "M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"
        },
        markerCounter = {};
    R.toString = function () {
        return  "Your browser supports SVG.\nYou are running Rapha\xebl " + this.version;
    };
    var $ = function (el, attr) {
            if (attr) {
                if (typeof el == "string") {
                    el = $(el);
                }
                for (var key in attr) if (attr[has](key)) {
                    if (key.substring(0, 6) == "xlink:") {
                        el.setAttributeNS(xlink, key.substring(6), Str(attr[key]));
                    } else {
                        el.setAttribute(key, Str(attr[key]));
                    }
                }
            } else {
                el = R._g.doc.createElementNS("http://www.w3.org/2000/svg", el);
                el.style && (el.style.webkitTapHighlightColor = "rgba(0,0,0,0)");
            }
            return el;
        },
        addGradientFill = function (element, gradient) {
            var type = "linear",
                id = element.id + gradient,
                fx = .5, fy = .5,
                o = element.node,
                SVG = element.paper,
                s = o.style,
                el = R._g.doc.getElementById(id);
            if (!el) {
                gradient = Str(gradient).replace(R._radial_gradient, function (all, _fx, _fy) {
                    type = "radial";
                    if (_fx && _fy) {
                        fx = toFloat(_fx);
                        fy = toFloat(_fy);
                        var dir = ((fy > .5) * 2 - 1);
                        pow(fx - .5, 2) + pow(fy - .5, 2) > .25 &&
                        (fy = math.sqrt(.25 - pow(fx - .5, 2)) * dir + .5) &&
                        fy != .5 &&
                        (fy = fy.toFixed(5) - 1e-5 * dir);
                    }
                    return E;
                });
                gradient = gradient.split(/\s*\-\s*/);
                if (type == "linear") {
                    var angle = gradient.shift();
                    angle = -toFloat(angle);
                    if (isNaN(angle)) {
                        return null;
                    }
                    var vector = [0, 0, math.cos(R.rad(angle)), math.sin(R.rad(angle))],
                        max = 1 / (mmax(abs(vector[2]), abs(vector[3])) || 1);
                    vector[2] *= max;
                    vector[3] *= max;
                    if (vector[2] < 0) {
                        vector[0] = -vector[2];
                        vector[2] = 0;
                    }
                    if (vector[3] < 0) {
                        vector[1] = -vector[3];
                        vector[3] = 0;
                    }
                }
                var dots = R._parseDots(gradient);
                if (!dots) {
                    return null;
                }
                id = id.replace(/[\(\)\s,\xb0#]/g, "_");

                if (element.gradient && id != element.gradient.id) {
                    SVG.defs.removeChild(element.gradient);
                    delete element.gradient;
                }

                if (!element.gradient) {
                    el = $(type + "Gradient", {id: id});
                    element.gradient = el;
                    $(el, type == "radial" ? {
                        fx: fx,
                        fy: fy
                    } : {
                        x1: vector[0],
                        y1: vector[1],
                        x2: vector[2],
                        y2: vector[3],
                        gradientTransform: element.matrix.invert()
                    });
                    SVG.defs.appendChild(el);
                    for (var i = 0, ii = dots.length; i < ii; i++) {
                        el.appendChild($("stop", {
                            offset: dots[i].offset ? dots[i].offset : i ? "100%" : "0%",
                            "stop-color": dots[i].color || "#fff",
                            "stop-opacity": isFinite(dots[i].opacity) ? dots[i].opacity : 1
                        }));
                    }
                }
            }
            $(o, {
                fill: "url('" + document.location.origin + document.location.pathname + "#" + id + "')",
                opacity: 1,
                "fill-opacity": 1
            });
            s.fill = E;
            s.opacity = 1;
            s.fillOpacity = 1;
            return 1;
        },
        updatePosition = function (o) {
            var bbox = o.getBBox(1);
            $(o.pattern, {patternTransform: o.matrix.invert() + " translate(" + bbox.x + "," + bbox.y + ")"});
        },
        addArrow = function (o, value, isEnd) {
            if (o.type == "path") {
                var values = Str(value).toLowerCase().split("-"),
                    p = o.paper,
                    se = isEnd ? "end" : "start",
                    node = o.node,
                    attrs = o.attrs,
                    stroke = attrs["stroke-width"],
                    i = values.length,
                    type = "classic",
                    from,
                    to,
                    dx,
                    refX,
                    attr,
                    w = 3,
                    h = 3,
                    t = 5;
                while (i--) {
                    switch (values[i]) {
                        case "block":
                        case "classic":
                        case "oval":
                        case "diamond":
                        case "open":
                        case "none":
                            type = values[i];
                            break;
                        case "wide": h = 5; break;
                        case "narrow": h = 2; break;
                        case "long": w = 5; break;
                        case "short": w = 2; break;
                    }
                }
                if (type == "open") {
                    w += 2;
                    h += 2;
                    t += 2;
                    dx = 1;
                    refX = isEnd ? 4 : 1;
                    attr = {
                        fill: "none",
                        stroke: attrs.stroke
                    };
                } else {
                    refX = dx = w / 2;
                    attr = {
                        fill: attrs.stroke,
                        stroke: "none"
                    };
                }
                if (o._.arrows) {
                    if (isEnd) {
                        o._.arrows.endPath && markerCounter[o._.arrows.endPath]--;
                        o._.arrows.endMarker && markerCounter[o._.arrows.endMarker]--;
                    } else {
                        o._.arrows.startPath && markerCounter[o._.arrows.startPath]--;
                        o._.arrows.startMarker && markerCounter[o._.arrows.startMarker]--;
                    }
                } else {
                    o._.arrows = {};
                }
                if (type != "none") {
                    var pathId = "raphael-marker-" + type,
                        markerId = "raphael-marker-" + se + type + w + h + "-obj" + o.id;
                    if (!R._g.doc.getElementById(pathId)) {
                        p.defs.appendChild($($("path"), {
                            "stroke-linecap": "round",
                            d: markers[type],
                            id: pathId
                        }));
                        markerCounter[pathId] = 1;
                    } else {
                        markerCounter[pathId]++;
                    }
                    var marker = R._g.doc.getElementById(markerId),
                        use;
                    if (!marker) {
                        marker = $($("marker"), {
                            id: markerId,
                            markerHeight: h,
                            markerWidth: w,
                            orient: "auto",
                            refX: refX,
                            refY: h / 2
                        });
                        use = $($("use"), {
                            "xlink:href": "#" + pathId,
                            transform: (isEnd ? "rotate(180 " + w / 2 + " " + h / 2 + ") " : E) + "scale(" + w / t + "," + h / t + ")",
                            "stroke-width": (1 / ((w / t + h / t) / 2)).toFixed(4)
                        });
                        marker.appendChild(use);
                        p.defs.appendChild(marker);
                        markerCounter[markerId] = 1;
                    } else {
                        markerCounter[markerId]++;
                        use = marker.getElementsByTagName("use")[0];
                    }
                    $(use, attr);
                    var delta = dx * (type != "diamond" && type != "oval");
                    if (isEnd) {
                        from = o._.arrows.startdx * stroke || 0;
                        to = R.getTotalLength(attrs.path) - delta * stroke;
                    } else {
                        from = delta * stroke;
                        to = R.getTotalLength(attrs.path) - (o._.arrows.enddx * stroke || 0);
                    }
                    attr = {};
                    attr["marker-" + se] = "url(#" + markerId + ")";
                    if (to || from) {
                        attr.d = R.getSubpath(attrs.path, from, to);
                    }
                    $(node, attr);
                    o._.arrows[se + "Path"] = pathId;
                    o._.arrows[se + "Marker"] = markerId;
                    o._.arrows[se + "dx"] = delta;
                    o._.arrows[se + "Type"] = type;
                    o._.arrows[se + "String"] = value;
                } else {
                    if (isEnd) {
                        from = o._.arrows.startdx * stroke || 0;
                        to = R.getTotalLength(attrs.path) - from;
                    } else {
                        from = 0;
                        to = R.getTotalLength(attrs.path) - (o._.arrows.enddx * stroke || 0);
                    }
                    o._.arrows[se + "Path"] && $(node, {d: R.getSubpath(attrs.path, from, to)});
                    delete o._.arrows[se + "Path"];
                    delete o._.arrows[se + "Marker"];
                    delete o._.arrows[se + "dx"];
                    delete o._.arrows[se + "Type"];
                    delete o._.arrows[se + "String"];
                }
                for (attr in markerCounter) if (markerCounter[has](attr) && !markerCounter[attr]) {
                    var item = R._g.doc.getElementById(attr);
                    item && item.parentNode.removeChild(item);
                }
            }
        },
        dasharray = {
            "-": [3, 1],
            ".": [1, 1],
            "-.": [3, 1, 1, 1],
            "-..": [3, 1, 1, 1, 1, 1],
            ". ": [1, 3],
            "- ": [4, 3],
            "--": [8, 3],
            "- .": [4, 3, 1, 3],
            "--.": [8, 3, 1, 3],
            "--..": [8, 3, 1, 3, 1, 3]
        },
        addDashes = function (o, value, params) {
            value = dasharray[Str(value).toLowerCase()];
            if (value) {
                var width = o.attrs["stroke-width"] || "1",
                    butt = {round: width, square: width, butt: 0}[o.attrs["stroke-linecap"] || params["stroke-linecap"]] || 0,
                    dashes = [],
                    i = value.length;
                while (i--) {
                    dashes[i] = value[i] * width + ((i % 2) ? 1 : -1) * butt;
                }
                $(o.node, {"stroke-dasharray": dashes.join(",")});
            }
            else {
                $(o.node, {"stroke-dasharray": "none"});
            }
        },
        setFillAndStroke = function (o, params) {
            var node = o.node,
                attrs = o.attrs,
                vis = node.style.visibility;
            node.style.visibility = "hidden";
            for (var att in params) {
                if (params[has](att)) {
                    if (!R._availableAttrs[has](att)) {
                        continue;
                    }
                    var value = params[att];
                    attrs[att] = value;
                    switch (att) {
                        case "blur":
                            o.blur(value);
                            break;
                        case "title":
                            var title = node.getElementsByTagName("title");

                            // Use the existing <title>.
                            if (title.length && (title = title[0])) {
                                title.firstChild.nodeValue = value;
                            } else {
                                title = $("title");
                                var val = R._g.doc.createTextNode(value);
                                title.appendChild(val);
                                node.appendChild(title);
                            }
                            break;
                        case "href":
                        case "target":
                            var pn = node.parentNode;
                            if (pn.tagName.toLowerCase() != "a") {
                                var hl = $("a");
                                pn.insertBefore(hl, node);
                                hl.appendChild(node);
                                pn = hl;
                            }
                            if (att == "target") {
                                pn.setAttributeNS(xlink, "show", value == "blank" ? "new" : value);
                            } else {
                                pn.setAttributeNS(xlink, att, value);
                            }
                            break;
                        case "cursor":
                            node.style.cursor = value;
                            break;
                        case "transform":
                            o.transform(value);
                            break;
                        case "arrow-start":
                            addArrow(o, value);
                            break;
                        case "arrow-end":
                            addArrow(o, value, 1);
                            break;
                        case "clip-rect":
                            var rect = Str(value).split(separator);
                            if (rect.length == 4) {
                                o.clip && o.clip.parentNode.parentNode.removeChild(o.clip.parentNode);
                                var el = $("clipPath"),
                                    rc = $("rect");
                                el.id = R.createUUID();
                                $(rc, {
                                    x: rect[0],
                                    y: rect[1],
                                    width: rect[2],
                                    height: rect[3]
                                });
                                el.appendChild(rc);
                                o.paper.defs.appendChild(el);
                                $(node, {"clip-path": "url(#" + el.id + ")"});
                                o.clip = rc;
                            }
                            if (!value) {
                                var path = node.getAttribute("clip-path");
                                if (path) {
                                    var clip = R._g.doc.getElementById(path.replace(/(^url\(#|\)$)/g, E));
                                    clip && clip.parentNode.removeChild(clip);
                                    $(node, {"clip-path": E});
                                    delete o.clip;
                                }
                            }
                            break;
                        case "path":
                            if (o.type == "path") {
                                $(node, {d: value ? attrs.path = R._pathToAbsolute(value) : "M0,0"});
                                o._.dirty = 1;
                                if (o._.arrows) {
                                    "startString" in o._.arrows && addArrow(o, o._.arrows.startString);
                                    "endString" in o._.arrows && addArrow(o, o._.arrows.endString, 1);
                                }
                            }
                            break;
                        case "width":
                            node.setAttribute(att, value);
                            o._.dirty = 1;
                            if (attrs.fx) {
                                att = "x";
                                value = attrs.x;
                            } else {
                                break;
                            }
                        case "x":
                            if (attrs.fx) {
                                value = -attrs.x - (attrs.width || 0);
                            }
                        case "rx":
                            if (att == "rx" && o.type == "rect") {
                                break;
                            }
                        case "cx":
                            node.setAttribute(att, value);
                            o.pattern && updatePosition(o);
                            o._.dirty = 1;
                            break;
                        case "height":
                            node.setAttribute(att, value);
                            o._.dirty = 1;
                            if (attrs.fy) {
                                att = "y";
                                value = attrs.y;
                            } else {
                                break;
                            }
                        case "y":
                            if (attrs.fy) {
                                value = -attrs.y - (attrs.height || 0);
                            }
                        case "ry":
                            if (att == "ry" && o.type == "rect") {
                                break;
                            }
                        case "cy":
                            node.setAttribute(att, value);
                            o.pattern && updatePosition(o);
                            o._.dirty = 1;
                            break;
                        case "r":
                            if (o.type == "rect") {
                                $(node, {rx: value, ry: value});
                            } else {
                                node.setAttribute(att, value);
                            }
                            o._.dirty = 1;
                            break;
                        case "src":
                            if (o.type == "image") {
                                node.setAttributeNS(xlink, "href", value);
                            }
                            break;
                        case "stroke-width":
                            if (o._.sx != 1 || o._.sy != 1) {
                                value /= mmax(abs(o._.sx), abs(o._.sy)) || 1;
                            }
                            node.setAttribute(att, value);
                            if (attrs["stroke-dasharray"]) {
                                addDashes(o, attrs["stroke-dasharray"], params);
                            }
                            if (o._.arrows) {
                                "startString" in o._.arrows && addArrow(o, o._.arrows.startString);
                                "endString" in o._.arrows && addArrow(o, o._.arrows.endString, 1);
                            }
                            break;
                        case "stroke-dasharray":
                            addDashes(o, value, params);
                            break;
                        case "fill":
                            var isURL = Str(value).match(R._ISURL);
                            if (isURL) {
                                el = $("pattern");
                                var ig = $("image");
                                el.id = R.createUUID();
                                $(el, {x: 0, y: 0, patternUnits: "userSpaceOnUse", height: 1, width: 1});
                                $(ig, {x: 0, y: 0, "xlink:href": isURL[1]});
                                el.appendChild(ig);

                                (function (el) {
                                    R._preload(isURL[1], function () {
                                        var w = this.offsetWidth,
                                            h = this.offsetHeight;
                                        $(el, {width: w, height: h});
                                        $(ig, {width: w, height: h});
                                    });
                                })(el);
                                o.paper.defs.appendChild(el);
                                $(node, {fill: "url(#" + el.id + ")"});
                                o.pattern = el;
                                o.pattern && updatePosition(o);
                                break;
                            }
                            var clr = R.getRGB(value);
                            if (!clr.error) {
                                delete params.gradient;
                                delete attrs.gradient;
                                !R.is(attrs.opacity, "undefined") &&
                                R.is(params.opacity, "undefined") &&
                                $(node, {opacity: attrs.opacity});
                                !R.is(attrs["fill-opacity"], "undefined") &&
                                R.is(params["fill-opacity"], "undefined") &&
                                $(node, {"fill-opacity": attrs["fill-opacity"]});
                            } else if ((o.type == "circle" || o.type == "ellipse" || Str(value).charAt() != "r") && addGradientFill(o, value)) {
                                if ("opacity" in attrs || "fill-opacity" in attrs) {
                                    var gradient = R._g.doc.getElementById(node.getAttribute("fill").replace(/^url\(#|\)$/g, E));
                                    if (gradient) {
                                        var stops = gradient.getElementsByTagName("stop");
                                        $(stops[stops.length - 1], {"stop-opacity": ("opacity" in attrs ? attrs.opacity : 1) * ("fill-opacity" in attrs ? attrs["fill-opacity"] : 1)});
                                    }
                                }
                                attrs.gradient = value;
                                attrs.fill = "none";
                                break;
                            }
                            clr[has]("opacity") && $(node, {"fill-opacity": clr.opacity > 1 ? clr.opacity / 100 : clr.opacity});
                        case "stroke":
                            clr = R.getRGB(value);
                            node.setAttribute(att, clr.hex);
                            att == "stroke" && clr[has]("opacity") && $(node, {"stroke-opacity": clr.opacity > 1 ? clr.opacity / 100 : clr.opacity});
                            if (att == "stroke" && o._.arrows) {
                                "startString" in o._.arrows && addArrow(o, o._.arrows.startString);
                                "endString" in o._.arrows && addArrow(o, o._.arrows.endString, 1);
                            }
                            break;
                        case "gradient":
                            (o.type == "circle" || o.type == "ellipse" || Str(value).charAt() != "r") && addGradientFill(o, value);
                            break;
                        case "opacity":
                            if (attrs.gradient && !attrs[has]("stroke-opacity")) {
                                $(node, {"stroke-opacity": value > 1 ? value / 100 : value});
                            }
                        // fall
                        case "fill-opacity":
                            if (attrs.gradient) {
                                gradient = R._g.doc.getElementById(node.getAttribute("fill").replace(/^url\(#|\)$/g, E));
                                if (gradient) {
                                    stops = gradient.getElementsByTagName("stop");
                                    $(stops[stops.length - 1], {"stop-opacity": value});
                                }
                                break;
                            }
                        default:
                            att == "font-size" && (value = toInt(value, 10) + "px");
                            var cssrule = att.replace(/(\-.)/g, function (w) {
                                return w.substring(1).toUpperCase();
                            });
                            node.style[cssrule] = value;
                            o._.dirty = 1;
                            node.setAttribute(att, value);
                            break;
                    }
                }
            }

            tuneText(o, params);
            node.style.visibility = vis;
        },
        leading = 1.2,
        tuneText = function (el, params) {
            if (el.type != "text" || !(params[has]("text") || params[has]("font") || params[has]("font-size") || params[has]("x") || params[has]("y"))) {
                return;
            }
            var a = el.attrs,
                node = el.node,
                fontSize = node.firstChild ? toInt(R._g.doc.defaultView.getComputedStyle(node.firstChild, E).getPropertyValue("font-size"), 10) : 10;

            if (params[has]("text")) {
                a.text = params.text;
                while (node.firstChild) {
                    node.removeChild(node.firstChild);
                }
                var texts = Str(params.text).split("\n"),
                    tspans = [],
                    tspan;
                for (var i = 0, ii = texts.length; i < ii; i++) {
                    tspan = $("tspan");
                    i && $(tspan, {dy: fontSize * leading, x: a.x});
                    tspan.appendChild(R._g.doc.createTextNode(texts[i]));
                    node.appendChild(tspan);
                    tspans[i] = tspan;
                }
            } else {
                tspans = node.getElementsByTagName("tspan");
                for (i = 0, ii = tspans.length; i < ii; i++) if (i) {
                    $(tspans[i], {dy: fontSize * leading, x: a.x});
                } else {
                    $(tspans[0], {dy: 0});
                }
            }
            $(node, {x: a.x, y: a.y});
            el._.dirty = 1;
            var bb = el._getBBox(),
                dif = a.y - (bb.y + bb.height / 2);
            dif && R.is(dif, "finite") && $(tspans[0], {dy: dif});
        },
        getRealNode = function (node) {
            if (node.parentNode && node.parentNode.tagName.toLowerCase() === "a") {
                return node.parentNode;
            } else {
                return node;
            }
        },
        Element = function (node, svg) {
            var X = 0,
                Y = 0;
            /*\
             * Element.node
             [ property (object) ]
             **
             * Gives you a reference to the DOM object, so you can assign event handlers or just mess around.
             **
             * Note: Don’t mess with it.
             > Usage
             | // draw a circle at coordinate 10,10 with radius of 10
             | var c = paper.circle(10, 10, 10);
             | c.node.onclick = function () {
             |     c.attr("fill", "red");
             | };
             \*/
            this[0] = this.node = node;
            /*\
             * Element.raphael
             [ property (object) ]
             **
             * Internal reference to @Raphael object. In case it is not available.
             > Usage
             | Raphael.el.red = function () {
             |     var hsb = this.paper.raphael.rgb2hsb(this.attr("fill"));
             |     hsb.h = 1;
             |     this.attr({fill: this.paper.raphael.hsb2rgb(hsb).hex});
             | }
             \*/
            node.raphael = true;
            /*\
             * Element.id
             [ property (number) ]
             **
             * Unique id of the element. Especially useful when you want to listen to events of the element,
             * because all events are fired in format `<module>.<action>.<id>`. Also useful for @Paper.getById method.
             \*/
            this.id = R._oid++;
            node.raphaelid = this.id;
            this.matrix = R.matrix();
            this.realPath = null;
            /*\
             * Element.paper
             [ property (object) ]
             **
             * Internal reference to “paper” where object drawn. Mainly for use in plugins and element extensions.
             > Usage
             | Raphael.el.cross = function () {
             |     this.attr({fill: "red"});
             |     this.paper.path("M10,10L50,50M50,10L10,50")
             |         .attr({stroke: "red"});
             | }
             \*/
            this.paper = svg;
            this.attrs = this.attrs || {};
            this._ = {
                transform: [],
                sx: 1,
                sy: 1,
                deg: 0,
                dx: 0,
                dy: 0,
                dirty: 1
            };
            !svg.bottom && (svg.bottom = this);
            /*\
             * Element.prev
             [ property (object) ]
             **
             * Reference to the previous element in the hierarchy.
             \*/
            this.prev = svg.top;
            svg.top && (svg.top.next = this);
            svg.top = this;
            /*\
             * Element.next
             [ property (object) ]
             **
             * Reference to the next element in the hierarchy.
             \*/
            this.next = null;
        },
        elproto = R.el;

    Element.prototype = elproto;
    elproto.constructor = Element;

    R._engine.path = function (pathString, SVG) {
        var el = $("path");
        SVG.canvas && SVG.canvas.appendChild(el);
        var p = new Element(el, SVG);
        p.type = "path";
        setFillAndStroke(p, {
            fill: "none",
            stroke: "#000",
            path: pathString
        });
        return p;
    };
    /*\
     * Element.rotate
     [ method ]
     **
     * Deprecated! Use @Element.transform instead.
     * Adds rotation by given angle around given point to the list of
     * transformations of the element.
     > Parameters
     - deg (number) angle in degrees
     - cx (number) #optional x coordinate of the centre of rotation
     - cy (number) #optional y coordinate of the centre of rotation
     * If cx & cy aren’t specified centre of the shape is used as a point of rotation.
     = (object) @Element
     \*/
    elproto.rotate = function (deg, cx, cy) {
        if (this.removed) {
            return this;
        }
        deg = Str(deg).split(separator);
        if (deg.length - 1) {
            cx = toFloat(deg[1]);
            cy = toFloat(deg[2]);
        }
        deg = toFloat(deg[0]);
        (cy == null) && (cx = cy);
        if (cx == null || cy == null) {
            var bbox = this.getBBox(1);
            cx = bbox.x + bbox.width / 2;
            cy = bbox.y + bbox.height / 2;
        }
        this.transform(this._.transform.concat([["r", deg, cx, cy]]));
        return this;
    };
    /*\
     * Element.scale
     [ method ]
     **
     * Deprecated! Use @Element.transform instead.
     * Adds scale by given amount relative to given point to the list of
     * transformations of the element.
     > Parameters
     - sx (number) horisontal scale amount
     - sy (number) vertical scale amount
     - cx (number) #optional x coordinate of the centre of scale
     - cy (number) #optional y coordinate of the centre of scale
     * If cx & cy aren’t specified centre of the shape is used instead.
     = (object) @Element
     \*/
    elproto.scale = function (sx, sy, cx, cy) {
        if (this.removed) {
            return this;
        }
        sx = Str(sx).split(separator);
        if (sx.length - 1) {
            sy = toFloat(sx[1]);
            cx = toFloat(sx[2]);
            cy = toFloat(sx[3]);
        }
        sx = toFloat(sx[0]);
        (sy == null) && (sy = sx);
        (cy == null) && (cx = cy);
        if (cx == null || cy == null) {
            var bbox = this.getBBox(1);
        }
        cx = cx == null ? bbox.x + bbox.width / 2 : cx;
        cy = cy == null ? bbox.y + bbox.height / 2 : cy;
        this.transform(this._.transform.concat([["s", sx, sy, cx, cy]]));
        return this;
    };
    /*\
     * Element.translate
     [ method ]
     **
     * Deprecated! Use @Element.transform instead.
     * Adds translation by given amount to the list of transformations of the element.
     > Parameters
     - dx (number) horisontal shift
     - dy (number) vertical shift
     = (object) @Element
     \*/
    elproto.translate = function (dx, dy) {
        if (this.removed) {
            return this;
        }
        dx = Str(dx).split(separator);
        if (dx.length - 1) {
            dy = toFloat(dx[1]);
        }
        dx = toFloat(dx[0]) || 0;
        dy = +dy || 0;
        this.transform(this._.transform.concat([["t", dx, dy]]));
        return this;
    };
    /*\
     * Element.transform
     [ method ]
     **
     * Adds transformation to the element which is separate to other attributes,
     * i.e. translation doesn’t change `x` or `y` of the rectange. The format
     * of transformation string is similar to the path string syntax:
     | "t100,100r30,100,100s2,2,100,100r45s1.5"
     * Each letter is a command. There are four commands: `t` is for translate, `r` is for rotate, `s` is for
     * scale and `m` is for matrix.
     *
     * There are also alternative “absolute” translation, rotation and scale: `T`, `R` and `S`. They will not take previous transformation into account. For example, `...T100,0` will always move element 100 px horisontally, while `...t100,0` could move it vertically if there is `r90` before. Just compare results of `r90t100,0` and `r90T100,0`.
     *
     * So, the example line above could be read like “translate by 100, 100; rotate 30° around 100, 100; scale twice around 100, 100;
     * rotate 45° around centre; scale 1.5 times relative to centre”. As you can see rotate and scale commands have origin
     * coordinates as optional parameters, the default is the centre point of the element.
     * Matrix accepts six parameters.
     > Usage
     | var el = paper.rect(10, 20, 300, 200);
     | // translate 100, 100, rotate 45°, translate -100, 0
     | el.transform("t100,100r45t-100,0");
     | // if you want you can append or prepend transformations
     | el.transform("...t50,50");
     | el.transform("s2...");
     | // or even wrap
     | el.transform("t50,50...t-50-50");
     | // to reset transformation call method with empty string
     | el.transform("");
     | // to get current value call it without parameters
     | console.log(el.transform());
     > Parameters
     - tstr (string) #optional transformation string
     * If tstr isn’t specified
     = (string) current transformation string
     * else
     = (object) @Element
     \*/
    elproto.transform = function (tstr) {
        var _ = this._;
        if (tstr == null) {
            return _.transform;
        }
        R._extractTransform(this, tstr);

        this.clip && $(this.clip, {transform: this.matrix.invert()});
        this.pattern && updatePosition(this);
        this.node && $(this.node, {transform: this.matrix});

        if (_.sx != 1 || _.sy != 1) {
            var sw = this.attrs[has]("stroke-width") ? this.attrs["stroke-width"] : 1;
            this.attr({"stroke-width": sw});
        }

        return this;
    };
    /*\
     * Element.hide
     [ method ]
     **
     * Makes element invisible. See @Element.show.
     = (object) @Element
     \*/
    elproto.hide = function () {
        if(!this.removed) this.node.style.display = "none";
        return this;
    };
    /*\
     * Element.show
     [ method ]
     **
     * Makes element visible. See @Element.hide.
     = (object) @Element
     \*/
    elproto.show = function () {
        if(!this.removed) this.node.style.display = "";
        return this;
    };
    /*\
     * Element.remove
     [ method ]
     **
     * Removes element from the paper.
     \*/
    elproto.remove = function () {
        var node = getRealNode(this.node);
        if (this.removed || !node.parentNode) {
            return;
        }
        var paper = this.paper;
        paper.__set__ && paper.__set__.exclude(this);
        eve.unbind("raphael.*.*." + this.id);
        if (this.gradient) {
            paper.defs.removeChild(this.gradient);
        }
        R._tear(this, paper);

        node.parentNode.removeChild(node);

        // Remove custom data for element
        this.removeData();

        for (var i in this) {
            this[i] = typeof this[i] == "function" ? R._removedFactory(i) : null;
        }
        this.removed = true;
    };
    elproto._getBBox = function () {
        if (this.node.style.display == "none") {
            this.show();
            var hide = true;
        }
        var canvasHidden = false,
            containerStyle;
        if (this.paper.canvas.parentElement) {
            containerStyle = this.paper.canvas.parentElement.style;
        } //IE10+ can't find parentElement
        else if (this.paper.canvas.parentNode) {
            containerStyle = this.paper.canvas.parentNode.style;
        }

        if(containerStyle && containerStyle.display == "none") {
            canvasHidden = true;
            containerStyle.display = "";
        }
        var bbox = {};
        try {
            bbox = this.node.getBBox();
        } catch(e) {
            // Firefox 3.0.x, 25.0.1 (probably more versions affected) play badly here - possible fix
            bbox = {
                x: this.node.clientLeft,
                y: this.node.clientTop,
                width: this.node.clientWidth,
                height: this.node.clientHeight
            }
        } finally {
            bbox = bbox || {};
            if(canvasHidden){
                containerStyle.display = "none";
            }
        }
        hide && this.hide();
        return bbox;
    };
    /*\
     * Element.attr
     [ method ]
     **
     * Sets the attributes of the element.
     > Parameters
     - attrName (string) attribute’s name
     - value (string) value
     * or
     - params (object) object of name/value pairs
     * or
     - attrName (string) attribute’s name
     * or
     - attrNames (array) in this case method returns array of current values for given attribute names
     = (object) @Element if attrsName & value or params are passed in.
     = (...) value of the attribute if only attrsName is passed in.
     = (array) array of values of the attribute if attrsNames is passed in.
     = (object) object of attributes if nothing is passed in.
     > Possible parameters
     # <p>Please refer to the <a href="http://www.w3.org/TR/SVG/" title="The W3C Recommendation for the SVG language describes these properties in detail.">SVG specification</a> for an explanation of these parameters.</p>
     o arrow-end (string) arrowhead on the end of the path. The format for string is `<type>[-<width>[-<length>]]`. Possible types: `classic`, `block`, `open`, `oval`, `diamond`, `none`, width: `wide`, `narrow`, `medium`, length: `long`, `short`, `midium`.
     o clip-rect (string) comma or space separated values: x, y, width and height
     o cursor (string) CSS type of the cursor
     o cx (number) the x-axis coordinate of the center of the circle, or ellipse
     o cy (number) the y-axis coordinate of the center of the circle, or ellipse
     o fill (string) colour, gradient or image
     o fill-opacity (number)
     o font (string)
     o font-family (string)
     o font-size (number) font size in pixels
     o font-weight (string)
     o height (number)
     o href (string) URL, if specified element behaves as hyperlink
     o opacity (number)
     o path (string) SVG path string format
     o r (number) radius of the circle, ellipse or rounded corner on the rect
     o rx (number) horisontal radius of the ellipse
     o ry (number) vertical radius of the ellipse
     o src (string) image URL, only works for @Element.image element
     o stroke (string) stroke colour
     o stroke-dasharray (string) [“”, “none”, “`-`”, “`.`”, “`-.`”, “`-..`”, “`. `”, “`- `”, “`--`”, “`- .`”, “`--.`”, “`--..`”]
     o stroke-linecap (string) [“`butt`”, “`square`”, “`round`”]
     o stroke-linejoin (string) [“`bevel`”, “`round`”, “`miter`”]
     o stroke-miterlimit (number)
     o stroke-opacity (number)
     o stroke-width (number) stroke width in pixels, default is '1'
     o target (string) used with href
     o text (string) contents of the text element. Use `\n` for multiline text
     o text-anchor (string) [“`start`”, “`middle`”, “`end`”], default is “`middle`”
     o title (string) will create tooltip with a given text
     o transform (string) see @Element.transform
     o width (number)
     o x (number)
     o y (number)
     > Gradients
     * Linear gradient format: “`?angle?-?colour?[-?colour?[:?offset?]]*-?colour?`”, example: “`90-#fff-#000`” – 90°
     * gradient from white to black or “`0-#fff-#f00:20-#000`” – 0° gradient from white via red (at 20%) to black.
     *
     * radial gradient: “`r[(?fx?, ?fy?)]?colour?[-?colour?[:?offset?]]*-?colour?`”, example: “`r#fff-#000`” –
     * gradient from white to black or “`r(0.25, 0.75)#fff-#000`” – gradient from white to black with focus point
     * at 0.25, 0.75. Focus point coordinates are in 0..1 range. Radial gradients can only be applied to circles and ellipses.
     > Path String
     # <p>Please refer to <a href="http://www.w3.org/TR/SVG/paths.html#PathData" title="Details of a path’s data attribute’s format are described in the SVG specification.">SVG documentation regarding path string</a>. Rapha?l fully supports it.</p>
     > Colour Parsing
     # <ul>
     #     <li>Colour name (“<code>red</code>”, “<code>green</code>”, “<code>cornflowerblue</code>”, etc)</li>
     #     <li>#??? — shortened HTML colour: (“<code>#000</code>”, “<code>#fc0</code>”, etc)</li>
     #     <li>#?????? — full length HTML colour: (“<code>#000000</code>”, “<code>#bd2300</code>”)</li>
     #     <li>rgb(???, ???, ???) — red, green and blue channels’ values: (“<code>rgb(200,&nbsp;100,&nbsp;0)</code>”)</li>
     #     <li>rgb(???%, ???%, ???%) — same as above, but in %: (“<code>rgb(100%,&nbsp;175%,&nbsp;0%)</code>”)</li>
     #     <li>rgba(???, ???, ???, ???) — red, green and blue channels’ values: (“<code>rgba(200,&nbsp;100,&nbsp;0, .5)</code>”)</li>
     #     <li>rgba(???%, ???%, ???%, ???%) — same as above, but in %: (“<code>rgba(100%,&nbsp;175%,&nbsp;0%, 50%)</code>”)</li>
     #     <li>hsb(???, ???, ???) — hue, saturation and brightness values: (“<code>hsb(0.5,&nbsp;0.25,&nbsp;1)</code>”)</li>
     #     <li>hsb(???%, ???%, ???%) — same as above, but in %</li>
     #     <li>hsba(???, ???, ???, ???) — same as above, but with opacity</li>
     #     <li>hsl(???, ???, ???) — almost the same as hsb, see <a href="http://en.wikipedia.org/wiki/HSL_and_HSV" title="HSL and HSV - Wikipedia, the free encyclopedia">Wikipedia page</a></li>
     #     <li>hsl(???%, ???%, ???%) — same as above, but in %</li>
     #     <li>hsla(???, ???, ???, ???) — same as above, but with opacity</li>
     #     <li>Optionally for hsb and hsl you could specify hue as a degree: “<code>hsl(240deg,&nbsp;1,&nbsp;.5)</code>” or, if you want to go fancy, “<code>hsl(240°,&nbsp;1,&nbsp;.5)</code>”</li>
     # </ul>
     \*/
    elproto.attr = function (name, value) {
        if (this.removed) {
            return this;
        }
        if (name == null) {
            var res = {};
            for (var a in this.attrs) if (this.attrs[has](a)) {
                res[a] = this.attrs[a];
            }
            res.gradient && res.fill == "none" && (res.fill = res.gradient) && delete res.gradient;
            res.transform = this._.transform;
            return res;
        }
        if (value == null && R.is(name, "string")) {
            if (name == "fill" && this.attrs.fill == "none" && this.attrs.gradient) {
                return this.attrs.gradient;
            }
            if (name == "transform") {
                return this._.transform;
            }
            var names = name.split(separator),
                out = {};
            for (var i = 0, ii = names.length; i < ii; i++) {
                name = names[i];
                if (name in this.attrs) {
                    out[name] = this.attrs[name];
                } else if (R.is(this.paper.customAttributes[name], "function")) {
                    out[name] = this.paper.customAttributes[name].def;
                } else {
                    out[name] = R._availableAttrs[name];
                }
            }
            return ii - 1 ? out : out[names[0]];
        }
        if (value == null && R.is(name, "array")) {
            out = {};
            for (i = 0, ii = name.length; i < ii; i++) {
                out[name[i]] = this.attr(name[i]);
            }
            return out;
        }
        if (value != null) {
            var params = {};
            params[name] = value;
        } else if (name != null && R.is(name, "object")) {
            params = name;
        }
        for (var key in params) {
            eve("raphael.attr." + key + "." + this.id, this, params[key]);
        }
        for (key in this.paper.customAttributes) if (this.paper.customAttributes[has](key) && params[has](key) && R.is(this.paper.customAttributes[key], "function")) {
            var par = this.paper.customAttributes[key].apply(this, [].concat(params[key]));
            this.attrs[key] = params[key];
            for (var subkey in par) if (par[has](subkey)) {
                params[subkey] = par[subkey];
            }
        }
        setFillAndStroke(this, params);
        return this;
    };
    /*\
     * Element.toFront
     [ method ]
     **
     * Moves the element so it is the closest to the viewer’s eyes, on top of other elements.
     = (object) @Element
     \*/
    elproto.toFront = function () {
        if (this.removed) {
            return this;
        }
        var node = getRealNode(this.node);
        node.parentNode.appendChild(node);
        var svg = this.paper;
        svg.top != this && R._tofront(this, svg);
        return this;
    };
    /*\
     * Element.toBack
     [ method ]
     **
     * Moves the element so it is the furthest from the viewer’s eyes, behind other elements.
     = (object) @Element
     \*/
    elproto.toBack = function () {
        if (this.removed) {
            return this;
        }
        var node = getRealNode(this.node);
        var parentNode = node.parentNode;
        parentNode.insertBefore(node, parentNode.firstChild);
        R._toback(this, this.paper);
        var svg = this.paper;
        return this;
    };
    /*\
     * Element.insertAfter
     [ method ]
     **
     * Inserts current object after the given one.
     = (object) @Element
     \*/
    elproto.insertAfter = function (element) {
        if (this.removed || !element) {
            return this;
        }

        var node = getRealNode(this.node);
        var afterNode = getRealNode(element.node || element[element.length - 1].node);
        if (afterNode.nextSibling) {
            afterNode.parentNode.insertBefore(node, afterNode.nextSibling);
        } else {
            afterNode.parentNode.appendChild(node);
        }
        R._insertafter(this, element, this.paper);
        return this;
    };
    /*\
     * Element.insertBefore
     [ method ]
     **
     * Inserts current object before the given one.
     = (object) @Element
     \*/
    elproto.insertBefore = function (element) {
        if (this.removed || !element) {
            return this;
        }

        var node = getRealNode(this.node);
        var beforeNode = getRealNode(element.node || element[0].node);
        beforeNode.parentNode.insertBefore(node, beforeNode);
        R._insertbefore(this, element, this.paper);
        return this;
    };
    elproto.blur = function (size) {
        // Experimental. No Safari support. Use it on your own risk.
        var t = this;
        if (+size !== 0) {
            var fltr = $("filter"),
                blur = $("feGaussianBlur");
            t.attrs.blur = size;
            fltr.id = R.createUUID();
            $(blur, {stdDeviation: +size || 1.5});
            fltr.appendChild(blur);
            t.paper.defs.appendChild(fltr);
            t._blur = fltr;
            $(t.node, {filter: "url(#" + fltr.id + ")"});
        } else {
            if (t._blur) {
                t._blur.parentNode.removeChild(t._blur);
                delete t._blur;
                delete t.attrs.blur;
            }
            t.node.removeAttribute("filter");
        }
        return t;
    };
    R._engine.circle = function (svg, x, y, r) {
        var el = $("circle");
        svg.canvas && svg.canvas.appendChild(el);
        var res = new Element(el, svg);
        res.attrs = {cx: x, cy: y, r: r, fill: "none", stroke: "#000"};
        res.type = "circle";
        $(el, res.attrs);
        return res;
    };
    R._engine.rect = function (svg, x, y, w, h, r) {
        var el = $("rect");
        svg.canvas && svg.canvas.appendChild(el);
        var res = new Element(el, svg);
        res.attrs = {x: x, y: y, width: w, height: h, rx: r || 0, ry: r || 0, fill: "none", stroke: "#000"};
        res.type = "rect";
        $(el, res.attrs);
        return res;
    };
    R._engine.ellipse = function (svg, x, y, rx, ry) {
        var el = $("ellipse");
        svg.canvas && svg.canvas.appendChild(el);
        var res = new Element(el, svg);
        res.attrs = {cx: x, cy: y, rx: rx, ry: ry, fill: "none", stroke: "#000"};
        res.type = "ellipse";
        $(el, res.attrs);
        return res;
    };
    R._engine.image = function (svg, src, x, y, w, h) {
        var el = $("image");
        $(el, {x: x, y: y, width: w, height: h, preserveAspectRatio: "none"});
        el.setAttributeNS(xlink, "href", src);
        svg.canvas && svg.canvas.appendChild(el);
        var res = new Element(el, svg);
        res.attrs = {x: x, y: y, width: w, height: h, src: src};
        res.type = "image";
        return res;
    };
    R._engine.text = function (svg, x, y, text) {
        var el = $("text");
        svg.canvas && svg.canvas.appendChild(el);
        var res = new Element(el, svg);
        res.attrs = {
            x: x,
            y: y,
            "text-anchor": "middle",
            text: text,
            "font-family": R._availableAttrs["font-family"],
            "font-size": R._availableAttrs["font-size"],
            stroke: "none",
            fill: "#000"
        };
        res.type = "text";
        setFillAndStroke(res, res.attrs);
        return res;
    };
    R._engine.setSize = function (width, height) {
        this.width = width || this.width;
        this.height = height || this.height;
        this.canvas.setAttribute("width", this.width);
        this.canvas.setAttribute("height", this.height);
        if (this._viewBox) {
            this.setViewBox.apply(this, this._viewBox);
        }
        return this;
    };
    R._engine.create = function () {
        var con = R._getContainer.apply(0, arguments),
            container = con && con.container,
            x = con.x,
            y = con.y,
            width = con.width,
            height = con.height;
        if (!container) {
            throw new Error("SVG container not found.");
        }
        var cnvs = $("svg"),
            css = "overflow:hidden;",
            isFloating;
        x = x || 0;
        y = y || 0;
        width = width || 512;
        height = height || 342;
        $(cnvs, {
            height: height,
            version: 1.1,
            width: width,
            xmlns: "http://www.w3.org/2000/svg",
            "xmlns:xlink": "http://www.w3.org/1999/xlink"
        });
        if (container == 1) {
            cnvs.style.cssText = css + "position:absolute;left:" + x + "px;top:" + y + "px";
            R._g.doc.body.appendChild(cnvs);
            isFloating = 1;
        } else {
            cnvs.style.cssText = css + "position:relative";
            if (container.firstChild) {
                container.insertBefore(cnvs, container.firstChild);
            } else {
                container.appendChild(cnvs);
            }
        }
        container = new R._Paper;
        container.width = width;
        container.height = height;
        container.canvas = cnvs;
        container.clear();
        container._left = container._top = 0;
        isFloating && (container.renderfix = function () {});
        container.renderfix();
        return container;
    };
    R._engine.setViewBox = function (x, y, w, h, fit) {
        eve("raphael.setViewBox", this, this._viewBox, [x, y, w, h, fit]);
        var paperSize = this.getSize(),
            size = mmax(w / paperSize.width, h / paperSize.height),
            top = this.top,
            aspectRatio = fit ? "xMidYMid meet" : "xMinYMin",
            vb,
            sw;
        if (x == null) {
            if (this._vbSize) {
                size = 1;
            }
            delete this._vbSize;
            vb = "0 0 " + this.width + S + this.height;
        } else {
            this._vbSize = size;
            vb = x + S + y + S + w + S + h;
        }
        $(this.canvas, {
            viewBox: vb,
            preserveAspectRatio: aspectRatio
        });
        while (size && top) {
            sw = "stroke-width" in top.attrs ? top.attrs["stroke-width"] : 1;
            top.attr({"stroke-width": sw});
            top._.dirty = 1;
            top._.dirtyT = 1;
            top = top.prev;
        }
        this._viewBox = [x, y, w, h, !!fit];
        return this;
    };
    /*\
     * Paper.renderfix
     [ method ]
     **
     * Fixes the issue of Firefox and IE9 regarding subpixel rendering. If paper is dependant
     * on other elements after reflow it could shift half pixel which cause for lines to lost their crispness.
     * This method fixes the issue.
     **
     Special thanks to Mariusz Nowak (http://www.medikoo.com/) for this method.
     \*/
    R.prototype.renderfix = function () {
        var cnvs = this.canvas,
            s = cnvs.style,
            pos;
        try {
            pos = cnvs.getScreenCTM() || cnvs.createSVGMatrix();
        } catch (e) {
            pos = cnvs.createSVGMatrix();
        }
        var left = -pos.e % 1,
            top = -pos.f % 1;
        if (left || top) {
            if (left) {
                this._left = (this._left + left) % 1;
                s.left = this._left + "px";
            }
            if (top) {
                this._top = (this._top + top) % 1;
                s.top = this._top + "px";
            }
        }
    };
    /*\
     * Paper.clear
     [ method ]
     **
     * Clears the paper, i.e. removes all the elements.
     \*/
    R.prototype.clear = function () {
        R.eve("raphael.clear", this);
        var c = this.canvas;
        while (c.firstChild) {
            c.removeChild(c.firstChild);
        }
        this.bottom = this.top = null;
        (this.desc = $("desc")).appendChild(R._g.doc.createTextNode("Created with Rapha\xebl " + R.version));
        c.appendChild(this.desc);
        c.appendChild(this.defs = $("defs"));
    };
    /*\
     * Paper.remove
     [ method ]
     **
     * Removes the paper from the DOM.
     \*/
    R.prototype.remove = function () {
        eve("raphael.remove", this);
        this.canvas.parentNode && this.canvas.parentNode.removeChild(this.canvas);
        for (var i in this) {
            this[i] = typeof this[i] == "function" ? R._removedFactory(i) : null;
        }
    };
    var setproto = R.st;
    for (var method in elproto) if (elproto[has](method) && !setproto[has](method)) {
        setproto[method] = (function (methodname) {
            return function () {
                var arg = arguments;
                return this.forEach(function (el) {
                    el[methodname].apply(el, arg);
                });
            };
        })(method);
    }
}));

// ┌─────────────────────────────────────────────────────────────────────┐ \\
// │ Rapha?l 2.1.4 - JavaScript Vector Library                       │ \\
// ├─────────────────────────────────────────────────────────────────────┤ \\
// │ VML Module                                                          │ \\
// ├─────────────────────────────────────────────────────────────────────┤ \\
// │ Copyright (c) 2008-2011 Dmitry Baranovskiy (http://raphaeljs.com)   │ \\
// │ Copyright (c) 2008-2011 Sencha Labs (http://sencha.com)             │ \\
// │ Licensed under the MIT (http://raphaeljs.com/license.html) license. │ \\
// └─────────────────────────────────────────────────────────────────────┘ \\

(function (glob, factory) {
    if (typeof define === "function" && define.amd) {
        define("raphael.vml", ["raphael.core"], function(raphael) {
            return factory(raphael);
        });
    } else if (typeof exports === "object") {
        factory(require("raphael"));
    } else {
        factory(glob.Raphael);
    }
}(this, function(R) {
    if (R && !R.vml) {
        return;
    }

    var has = "hasOwnProperty",
        Str = String,
        toFloat = parseFloat,
        math = Math,
        round = math.round,
        mmax = math.max,
        mmin = math.min,
        abs = math.abs,
        fillString = "fill",
        separator = /[, ]+/,
        eve = R.eve,
        ms = " progid:DXImageTransform.Microsoft",
        S = " ",
        E = "",
        map = {M: "m", L: "l", C: "c", Z: "x", m: "t", l: "r", c: "v", z: "x"},
        bites = /([clmz]),?([^clmz]*)/gi,
        blurregexp = / progid:\S+Blur\([^\)]+\)/g,
        val = /-?[^,\s-]+/g,
        cssDot = "position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)",
        zoom = 21600,
        pathTypes = {path: 1, rect: 1, image: 1},
        ovalTypes = {circle: 1, ellipse: 1},
        path2vml = function (path) {
            var total =  /[ahqstv]/ig,
                command = R._pathToAbsolute;
            Str(path).match(total) && (command = R._path2curve);
            total = /[clmz]/g;
            if (command == R._pathToAbsolute && !Str(path).match(total)) {
                var res = Str(path).replace(bites, function (all, command, args) {
                    var vals = [],
                        isMove = command.toLowerCase() == "m",
                        res = map[command];
                    args.replace(val, function (value) {
                        if (isMove && vals.length == 2) {
                            res += vals + map[command == "m" ? "l" : "L"];
                            vals = [];
                        }
                        vals.push(round(value * zoom));
                    });
                    return res + vals;
                });
                return res;
            }
            var pa = command(path), p, r;
            res = [];
            for (var i = 0, ii = pa.length; i < ii; i++) {
                p = pa[i];
                r = pa[i][0].toLowerCase();
                r == "z" && (r = "x");
                for (var j = 1, jj = p.length; j < jj; j++) {
                    r += round(p[j] * zoom) + (j != jj - 1 ? "," : E);
                }
                res.push(r);
            }
            return res.join(S);
        },
        compensation = function (deg, dx, dy) {
            var m = R.matrix();
            m.rotate(-deg, .5, .5);
            return {
                dx: m.x(dx, dy),
                dy: m.y(dx, dy)
            };
        },
        setCoords = function (p, sx, sy, dx, dy, deg) {
            var _ = p._,
                m = p.matrix,
                fillpos = _.fillpos,
                o = p.node,
                s = o.style,
                y = 1,
                flip = "",
                dxdy,
                kx = zoom / sx,
                ky = zoom / sy;
            s.visibility = "hidden";
            if (!sx || !sy) {
                return;
            }
            o.coordsize = abs(kx) + S + abs(ky);
            s.rotation = deg * (sx * sy < 0 ? -1 : 1);
            if (deg) {
                var c = compensation(deg, dx, dy);
                dx = c.dx;
                dy = c.dy;
            }
            sx < 0 && (flip += "x");
            sy < 0 && (flip += " y") && (y = -1);
            s.flip = flip;
            o.coordorigin = (dx * -kx) + S + (dy * -ky);
            if (fillpos || _.fillsize) {
                var fill = o.getElementsByTagName(fillString);
                fill = fill && fill[0];
                o.removeChild(fill);
                if (fillpos) {
                    c = compensation(deg, m.x(fillpos[0], fillpos[1]), m.y(fillpos[0], fillpos[1]));
                    fill.position = c.dx * y + S + c.dy * y;
                }
                if (_.fillsize) {
                    fill.size = _.fillsize[0] * abs(sx) + S + _.fillsize[1] * abs(sy);
                }
                o.appendChild(fill);
            }
            s.visibility = "visible";
        };
    R.toString = function () {
        return  "Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\xebl " + this.version;
    };
    var addArrow = function (o, value, isEnd) {
            var values = Str(value).toLowerCase().split("-"),
                se = isEnd ? "end" : "start",
                i = values.length,
                type = "classic",
                w = "medium",
                h = "medium";
            while (i--) {
                switch (values[i]) {
                    case "block":
                    case "classic":
                    case "oval":
                    case "diamond":
                    case "open":
                    case "none":
                        type = values[i];
                        break;
                    case "wide":
                    case "narrow": h = values[i]; break;
                    case "long":
                    case "short": w = values[i]; break;
                }
            }
            var stroke = o.node.getElementsByTagName("stroke")[0];
            stroke[se + "arrow"] = type;
            stroke[se + "arrowlength"] = w;
            stroke[se + "arrowwidth"] = h;
        },
        setFillAndStroke = function (o, params) {
            // o.paper.canvas.style.display = "none";
            o.attrs = o.attrs || {};
            var node = o.node,
                a = o.attrs,
                s = node.style,
                xy,
                newpath = pathTypes[o.type] && (params.x != a.x || params.y != a.y || params.width != a.width || params.height != a.height || params.cx != a.cx || params.cy != a.cy || params.rx != a.rx || params.ry != a.ry || params.r != a.r),
                isOval = ovalTypes[o.type] && (a.cx != params.cx || a.cy != params.cy || a.r != params.r || a.rx != params.rx || a.ry != params.ry),
                res = o;


            for (var par in params) if (params[has](par)) {
                a[par] = params[par];
            }
            if (newpath) {
                a.path = R._getPath[o.type](o);
                o._.dirty = 1;
            }
            params.href && (node.href = params.href);
            params.title && (node.title = params.title);
            params.target && (node.target = params.target);
            params.cursor && (s.cursor = params.cursor);
            "blur" in params && o.blur(params.blur);
            if (params.path && o.type == "path" || newpath) {
                node.path = path2vml(~Str(a.path).toLowerCase().indexOf("r") ? R._pathToAbsolute(a.path) : a.path);
                o._.dirty = 1;
                if (o.type == "image") {
                    o._.fillpos = [a.x, a.y];
                    o._.fillsize = [a.width, a.height];
                    setCoords(o, 1, 1, 0, 0, 0);
                }
            }
            "transform" in params && o.transform(params.transform);
            if (isOval) {
                var cx = +a.cx,
                    cy = +a.cy,
                    rx = +a.rx || +a.r || 0,
                    ry = +a.ry || +a.r || 0;
                node.path = R.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x", round((cx - rx) * zoom), round((cy - ry) * zoom), round((cx + rx) * zoom), round((cy + ry) * zoom), round(cx * zoom));
                o._.dirty = 1;
            }
            if ("clip-rect" in params) {
                var rect = Str(params["clip-rect"]).split(separator);
                if (rect.length == 4) {
                    rect[2] = +rect[2] + (+rect[0]);
                    rect[3] = +rect[3] + (+rect[1]);
                    var div = node.clipRect || R._g.doc.createElement("div"),
                        dstyle = div.style;
                    dstyle.clip = R.format("rect({1}px {2}px {3}px {0}px)", rect);
                    if (!node.clipRect) {
                        dstyle.position = "absolute";
                        dstyle.top = 0;
                        dstyle.left = 0;
                        dstyle.width = o.paper.width + "px";
                        dstyle.height = o.paper.height + "px";
                        node.parentNode.insertBefore(div, node);
                        div.appendChild(node);
                        node.clipRect = div;
                    }
                }
                if (!params["clip-rect"]) {
                    node.clipRect && (node.clipRect.style.clip = "auto");
                }
            }
            if (o.textpath) {
                var textpathStyle = o.textpath.style;
                params.font && (textpathStyle.font = params.font);
                params["font-family"] && (textpathStyle.fontFamily = '"' + params["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g, E) + '"');
                params["font-size"] && (textpathStyle.fontSize = params["font-size"]);
                params["font-weight"] && (textpathStyle.fontWeight = params["font-weight"]);
                params["font-style"] && (textpathStyle.fontStyle = params["font-style"]);
            }
            if ("arrow-start" in params) {
                addArrow(res, params["arrow-start"]);
            }
            if ("arrow-end" in params) {
                addArrow(res, params["arrow-end"], 1);
            }
            if (params.opacity != null ||
                params["stroke-width"] != null ||
                params.fill != null ||
                params.src != null ||
                params.stroke != null ||
                params["stroke-width"] != null ||
                params["stroke-opacity"] != null ||
                params["fill-opacity"] != null ||
                params["stroke-dasharray"] != null ||
                params["stroke-miterlimit"] != null ||
                params["stroke-linejoin"] != null ||
                params["stroke-linecap"] != null) {
                var fill = node.getElementsByTagName(fillString),
                    newfill = false;
                fill = fill && fill[0];
                !fill && (newfill = fill = createNode(fillString));
                if (o.type == "image" && params.src) {
                    fill.src = params.src;
                }
                params.fill && (fill.on = true);
                if (fill.on == null || params.fill == "none" || params.fill === null) {
                    fill.on = false;
                }
                if (fill.on && params.fill) {
                    var isURL = Str(params.fill).match(R._ISURL);
                    if (isURL) {
                        fill.parentNode == node && node.removeChild(fill);
                        fill.rotate = true;
                        fill.src = isURL[1];
                        fill.type = "tile";
                        var bbox = o.getBBox(1);
                        fill.position = bbox.x + S + bbox.y;
                        o._.fillpos = [bbox.x, bbox.y];

                        R._preload(isURL[1], function () {
                            o._.fillsize = [this.offsetWidth, this.offsetHeight];
                        });
                    } else {
                        fill.color = R.getRGB(params.fill).hex;
                        fill.src = E;
                        fill.type = "solid";
                        if (R.getRGB(params.fill).error && (res.type in {circle: 1, ellipse: 1} || Str(params.fill).charAt() != "r") && addGradientFill(res, params.fill, fill)) {
                            a.fill = "none";
                            a.gradient = params.fill;
                            fill.rotate = false;
                        }
                    }
                }
                if ("fill-opacity" in params || "opacity" in params) {
                    var opacity = ((+a["fill-opacity"] + 1 || 2) - 1) * ((+a.opacity + 1 || 2) - 1) * ((+R.getRGB(params.fill).o + 1 || 2) - 1);
                    opacity = mmin(mmax(opacity, 0), 1);
                    fill.opacity = opacity;
                    if (fill.src) {
                        fill.color = "none";
                    }
                }
                node.appendChild(fill);
                var stroke = (node.getElementsByTagName("stroke") && node.getElementsByTagName("stroke")[0]),
                    newstroke = false;
                !stroke && (newstroke = stroke = createNode("stroke"));
                if ((params.stroke && params.stroke != "none") ||
                    params["stroke-width"] ||
                    params["stroke-opacity"] != null ||
                    params["stroke-dasharray"] ||
                    params["stroke-miterlimit"] ||
                    params["stroke-linejoin"] ||
                    params["stroke-linecap"]) {
                    stroke.on = true;
                }
                (params.stroke == "none" || params.stroke === null || stroke.on == null || params.stroke == 0 || params["stroke-width"] == 0) && (stroke.on = false);
                var strokeColor = R.getRGB(params.stroke);
                stroke.on && params.stroke && (stroke.color = strokeColor.hex);
                opacity = ((+a["stroke-opacity"] + 1 || 2) - 1) * ((+a.opacity + 1 || 2) - 1) * ((+strokeColor.o + 1 || 2) - 1);
                var width = (toFloat(params["stroke-width"]) || 1) * .75;
                opacity = mmin(mmax(opacity, 0), 1);
                params["stroke-width"] == null && (width = a["stroke-width"]);
                params["stroke-width"] && (stroke.weight = width);
                width && width < 1 && (opacity *= width) && (stroke.weight = 1);
                stroke.opacity = opacity;

                params["stroke-linejoin"] && (stroke.joinstyle = params["stroke-linejoin"] || "miter");
                stroke.miterlimit = params["stroke-miterlimit"] || 8;
                params["stroke-linecap"] && (stroke.endcap = params["stroke-linecap"] == "butt" ? "flat" : params["stroke-linecap"] == "square" ? "square" : "round");
                if ("stroke-dasharray" in params) {
                    var dasharray = {
                        "-": "shortdash",
                        ".": "shortdot",
                        "-.": "shortdashdot",
                        "-..": "shortdashdotdot",
                        ". ": "dot",
                        "- ": "dash",
                        "--": "longdash",
                        "- .": "dashdot",
                        "--.": "longdashdot",
                        "--..": "longdashdotdot"
                    };
                    stroke.dashstyle = dasharray[has](params["stroke-dasharray"]) ? dasharray[params["stroke-dasharray"]] : E;
                }
                newstroke && node.appendChild(stroke);
            }
            if (res.type == "text") {
                res.paper.canvas.style.display = E;
                var span = res.paper.span,
                    m = 100,
                    fontSize = a.font && a.font.match(/\d+(?:\.\d*)?(?=px)/);
                s = span.style;
                a.font && (s.font = a.font);
                a["font-family"] && (s.fontFamily = a["font-family"]);
                a["font-weight"] && (s.fontWeight = a["font-weight"]);
                a["font-style"] && (s.fontStyle = a["font-style"]);
                fontSize = toFloat(a["font-size"] || fontSize && fontSize[0]) || 10;
                s.fontSize = fontSize * m + "px";
                res.textpath.string && (span.innerHTML = Str(res.textpath.string).replace(/</g, "&#60;").replace(/&/g, "&#38;").replace(/\n/g, "<br>"));
                var brect = span.getBoundingClientRect();
                res.W = a.w = (brect.right - brect.left) / m;
                res.H = a.h = (brect.bottom - brect.top) / m;
                // res.paper.canvas.style.display = "none";
                res.X = a.x;
                res.Y = a.y + res.H / 2;

                ("x" in params || "y" in params) && (res.path.v = R.format("m{0},{1}l{2},{1}", round(a.x * zoom), round(a.y * zoom), round(a.x * zoom) + 1));
                var dirtyattrs = ["x", "y", "text", "font", "font-family", "font-weight", "font-style", "font-size"];
                for (var d = 0, dd = dirtyattrs.length; d < dd; d++) if (dirtyattrs[d] in params) {
                    res._.dirty = 1;
                    break;
                }

                // text-anchor emulation
                switch (a["text-anchor"]) {
                    case "start":
                        res.textpath.style["v-text-align"] = "left";
                        res.bbx = res.W / 2;
                        break;
                    case "end":
                        res.textpath.style["v-text-align"] = "right";
                        res.bbx = -res.W / 2;
                        break;
                    default:
                        res.textpath.style["v-text-align"] = "center";
                        res.bbx = 0;
                        break;
                }
                res.textpath.style["v-text-kern"] = true;
            }
            // res.paper.canvas.style.display = E;
        },
        addGradientFill = function (o, gradient, fill) {
            o.attrs = o.attrs || {};
            var attrs = o.attrs,
                pow = Math.pow,
                opacity,
                oindex,
                type = "linear",
                fxfy = ".5 .5";
            o.attrs.gradient = gradient;
            gradient = Str(gradient).replace(R._radial_gradient, function (all, fx, fy) {
                type = "radial";
                if (fx && fy) {
                    fx = toFloat(fx);
                    fy = toFloat(fy);
                    pow(fx - .5, 2) + pow(fy - .5, 2) > .25 && (fy = math.sqrt(.25 - pow(fx - .5, 2)) * ((fy > .5) * 2 - 1) + .5);
                    fxfy = fx + S + fy;
                }
                return E;
            });
            gradient = gradient.split(/\s*\-\s*/);
            if (type == "linear") {
                var angle = gradient.shift();
                angle = -toFloat(angle);
                if (isNaN(angle)) {
                    return null;
                }
            }
            var dots = R._parseDots(gradient);
            if (!dots) {
                return null;
            }
            o = o.shape || o.node;
            if (dots.length) {
                o.removeChild(fill);
                fill.on = true;
                fill.method = "none";
                fill.color = dots[0].color;
                fill.color2 = dots[dots.length - 1].color;
                var clrs = [];
                for (var i = 0, ii = dots.length; i < ii; i++) {
                    dots[i].offset && clrs.push(dots[i].offset + S + dots[i].color);
                }
                fill.colors = clrs.length ? clrs.join() : "0% " + fill.color;
                if (type == "radial") {
                    fill.type = "gradientTitle";
                    fill.focus = "100%";
                    fill.focussize = "0 0";
                    fill.focusposition = fxfy;
                    fill.angle = 0;
                } else {
                    // fill.rotate= true;
                    fill.type = "gradient";
                    fill.angle = (270 - angle) % 360;
                }
                o.appendChild(fill);
            }
            return 1;
        },
        Element = function (node, vml) {
            this[0] = this.node = node;
            node.raphael = true;
            this.id = R._oid++;
            node.raphaelid = this.id;
            this.X = 0;
            this.Y = 0;
            this.attrs = {};
            this.paper = vml;
            this.matrix = R.matrix();
            this._ = {
                transform: [],
                sx: 1,
                sy: 1,
                dx: 0,
                dy: 0,
                deg: 0,
                dirty: 1,
                dirtyT: 1
            };
            !vml.bottom && (vml.bottom = this);
            this.prev = vml.top;
            vml.top && (vml.top.next = this);
            vml.top = this;
            this.next = null;
        };
    var elproto = R.el;

    Element.prototype = elproto;
    elproto.constructor = Element;
    elproto.transform = function (tstr) {
        if (tstr == null) {
            return this._.transform;
        }
        var vbs = this.paper._viewBoxShift,
            vbt = vbs ? "s" + [vbs.scale, vbs.scale] + "-1-1t" + [vbs.dx, vbs.dy] : E,
            oldt;
        if (vbs) {
            oldt = tstr = Str(tstr).replace(/\.{3}|\u2026/g, this._.transform || E);
        }
        R._extractTransform(this, vbt + tstr);
        var matrix = this.matrix.clone(),
            skew = this.skew,
            o = this.node,
            split,
            isGrad = ~Str(this.attrs.fill).indexOf("-"),
            isPatt = !Str(this.attrs.fill).indexOf("url(");
        matrix.translate(1, 1);
        if (isPatt || isGrad || this.type == "image") {
            skew.matrix = "1 0 0 1";
            skew.offset = "0 0";
            split = matrix.split();
            if ((isGrad && split.noRotation) || !split.isSimple) {
                o.style.filter = matrix.toFilter();
                var bb = this.getBBox(),
                    bbt = this.getBBox(1),
                    dx = bb.x - bbt.x,
                    dy = bb.y - bbt.y;
                o.coordorigin = (dx * -zoom) + S + (dy * -zoom);
                setCoords(this, 1, 1, dx, dy, 0);
            } else {
                o.style.filter = E;
                setCoords(this, split.scalex, split.scaley, split.dx, split.dy, split.rotate);
            }
        } else {
            o.style.filter = E;
            skew.matrix = Str(matrix);
            skew.offset = matrix.offset();
        }
        if (oldt !== null) { // empty string value is true as well
            this._.transform = oldt;
            R._extractTransform(this, oldt);
        }
        return this;
    };
    elproto.rotate = function (deg, cx, cy) {
        if (this.removed) {
            return this;
        }
        if (deg == null) {
            return;
        }
        deg = Str(deg).split(separator);
        if (deg.length - 1) {
            cx = toFloat(deg[1]);
            cy = toFloat(deg[2]);
        }
        deg = toFloat(deg[0]);
        (cy == null) && (cx = cy);
        if (cx == null || cy == null) {
            var bbox = this.getBBox(1);
            cx = bbox.x + bbox.width / 2;
            cy = bbox.y + bbox.height / 2;
        }
        this._.dirtyT = 1;
        this.transform(this._.transform.concat([["r", deg, cx, cy]]));
        return this;
    };
    elproto.translate = function (dx, dy) {
        if (this.removed) {
            return this;
        }
        dx = Str(dx).split(separator);
        if (dx.length - 1) {
            dy = toFloat(dx[1]);
        }
        dx = toFloat(dx[0]) || 0;
        dy = +dy || 0;
        if (this._.bbox) {
            this._.bbox.x += dx;
            this._.bbox.y += dy;
        }
        this.transform(this._.transform.concat([["t", dx, dy]]));
        return this;
    };
    elproto.scale = function (sx, sy, cx, cy) {
        if (this.removed) {
            return this;
        }
        sx = Str(sx).split(separator);
        if (sx.length - 1) {
            sy = toFloat(sx[1]);
            cx = toFloat(sx[2]);
            cy = toFloat(sx[3]);
            isNaN(cx) && (cx = null);
            isNaN(cy) && (cy = null);
        }
        sx = toFloat(sx[0]);
        (sy == null) && (sy = sx);
        (cy == null) && (cx = cy);
        if (cx == null || cy == null) {
            var bbox = this.getBBox(1);
        }
        cx = cx == null ? bbox.x + bbox.width / 2 : cx;
        cy = cy == null ? bbox.y + bbox.height / 2 : cy;

        this.transform(this._.transform.concat([["s", sx, sy, cx, cy]]));
        this._.dirtyT = 1;
        return this;
    };
    elproto.hide = function () {
        !this.removed && (this.node.style.display = "none");
        return this;
    };
    elproto.show = function () {
        !this.removed && (this.node.style.display = E);
        return this;
    };
    // Needed to fix the vml setViewBox issues
    elproto.auxGetBBox = R.el.getBBox;
    elproto.getBBox = function(){
        var b = this.auxGetBBox();
        if (this.paper && this.paper._viewBoxShift)
        {
            var c = {};
            var z = 1/this.paper._viewBoxShift.scale;
            c.x = b.x - this.paper._viewBoxShift.dx;
            c.x *= z;
            c.y = b.y - this.paper._viewBoxShift.dy;
            c.y *= z;
            c.width  = b.width  * z;
            c.height = b.height * z;
            c.x2 = c.x + c.width;
            c.y2 = c.y + c.height;
            return c;
        }
        return b;
    };
    elproto._getBBox = function () {
        if (this.removed) {
            return {};
        }
        return {
            x: this.X + (this.bbx || 0) - this.W / 2,
            y: this.Y - this.H,
            width: this.W,
            height: this.H
        };
    };
    elproto.remove = function () {
        if (this.removed || !this.node.parentNode) {
            return;
        }
        this.paper.__set__ && this.paper.__set__.exclude(this);
        R.eve.unbind("raphael.*.*." + this.id);
        R._tear(this, this.paper);
        this.node.parentNode.removeChild(this.node);
        this.shape && this.shape.parentNode.removeChild(this.shape);
        for (var i in this) {
            this[i] = typeof this[i] == "function" ? R._removedFactory(i) : null;
        }
        this.removed = true;
    };
    elproto.attr = function (name, value) {
        if (this.removed) {
            return this;
        }
        if (name == null) {
            var res = {};
            for (var a in this.attrs) if (this.attrs[has](a)) {
                res[a] = this.attrs[a];
            }
            res.gradient && res.fill == "none" && (res.fill = res.gradient) && delete res.gradient;
            res.transform = this._.transform;
            return res;
        }
        if (value == null && R.is(name, "string")) {
            if (name == fillString && this.attrs.fill == "none" && this.attrs.gradient) {
                return this.attrs.gradient;
            }
            var names = name.split(separator),
                out = {};
            for (var i = 0, ii = names.length; i < ii; i++) {
                name = names[i];
                if (name in this.attrs) {
                    out[name] = this.attrs[name];
                } else if (R.is(this.paper.customAttributes[name], "function")) {
                    out[name] = this.paper.customAttributes[name].def;
                } else {
                    out[name] = R._availableAttrs[name];
                }
            }
            return ii - 1 ? out : out[names[0]];
        }
        if (this.attrs && value == null && R.is(name, "array")) {
            out = {};
            for (i = 0, ii = name.length; i < ii; i++) {
                out[name[i]] = this.attr(name[i]);
            }
            return out;
        }
        var params;
        if (value != null) {
            params = {};
            params[name] = value;
        }
        value == null && R.is(name, "object") && (params = name);
        for (var key in params) {
            eve("raphael.attr." + key + "." + this.id, this, params[key]);
        }
        if (params) {
            for (key in this.paper.customAttributes) if (this.paper.customAttributes[has](key) && params[has](key) && R.is(this.paper.customAttributes[key], "function")) {
                var par = this.paper.customAttributes[key].apply(this, [].concat(params[key]));
                this.attrs[key] = params[key];
                for (var subkey in par) if (par[has](subkey)) {
                    params[subkey] = par[subkey];
                }
            }
            // this.paper.canvas.style.display = "none";
            if (params.text && this.type == "text") {
                this.textpath.string = params.text;
            }
            setFillAndStroke(this, params);
            // this.paper.canvas.style.display = E;
        }
        return this;
    };
    elproto.toFront = function () {
        !this.removed && this.node.parentNode.appendChild(this.node);
        this.paper && this.paper.top != this && R._tofront(this, this.paper);
        return this;
    };
    elproto.toBack = function () {
        if (this.removed) {
            return this;
        }
        if (this.node.parentNode.firstChild != this.node) {
            this.node.parentNode.insertBefore(this.node, this.node.parentNode.firstChild);
            R._toback(this, this.paper);
        }
        return this;
    };
    elproto.insertAfter = function (element) {
        if (this.removed) {
            return this;
        }
        if (element.constructor == R.st.constructor) {
            element = element[element.length - 1];
        }
        if (element.node.nextSibling) {
            element.node.parentNode.insertBefore(this.node, element.node.nextSibling);
        } else {
            element.node.parentNode.appendChild(this.node);
        }
        R._insertafter(this, element, this.paper);
        return this;
    };
    elproto.insertBefore = function (element) {
        if (this.removed) {
            return this;
        }
        if (element.constructor == R.st.constructor) {
            element = element[0];
        }
        element.node.parentNode.insertBefore(this.node, element.node);
        R._insertbefore(this, element, this.paper);
        return this;
    };
    elproto.blur = function (size) {
        var s = this.node.runtimeStyle,
            f = s.filter;
        f = f.replace(blurregexp, E);
        if (+size !== 0) {
            this.attrs.blur = size;
            s.filter = f + S + ms + ".Blur(pixelradius=" + (+size || 1.5) + ")";
            s.margin = R.format("-{0}px 0 0 -{0}px", round(+size || 1.5));
        } else {
            s.filter = f;
            s.margin = 0;
            delete this.attrs.blur;
        }
        return this;
    };

    R._engine.path = function (pathString, vml) {
        var el = createNode("shape");
        el.style.cssText = cssDot;
        el.coordsize = zoom + S + zoom;
        el.coordorigin = vml.coordorigin;
        var p = new Element(el, vml),
            attr = {fill: "none", stroke: "#000"};
        pathString && (attr.path = pathString);
        p.type = "path";
        p.path = [];
        p.Path = E;
        setFillAndStroke(p, attr);
        vml.canvas.appendChild(el);
        var skew = createNode("skew");
        skew.on = true;
        el.appendChild(skew);
        p.skew = skew;
        p.transform(E);
        return p;
    };
    R._engine.rect = function (vml, x, y, w, h, r) {
        var path = R._rectPath(x, y, w, h, r),
            res = vml.path(path),
            a = res.attrs;
        res.X = a.x = x;
        res.Y = a.y = y;
        res.W = a.width = w;
        res.H = a.height = h;
        a.r = r;
        a.path = path;
        res.type = "rect";
        return res;
    };
    R._engine.ellipse = function (vml, x, y, rx, ry) {
        var res = vml.path(),
            a = res.attrs;
        res.X = x - rx;
        res.Y = y - ry;
        res.W = rx * 2;
        res.H = ry * 2;
        res.type = "ellipse";
        setFillAndStroke(res, {
            cx: x,
            cy: y,
            rx: rx,
            ry: ry
        });
        return res;
    };
    R._engine.circle = function (vml, x, y, r) {
        var res = vml.path(),
            a = res.attrs;
        res.X = x - r;
        res.Y = y - r;
        res.W = res.H = r * 2;
        res.type = "circle";
        setFillAndStroke(res, {
            cx: x,
            cy: y,
            r: r
        });
        return res;
    };
    R._engine.image = function (vml, src, x, y, w, h) {
        var path = R._rectPath(x, y, w, h),
            res = vml.path(path).attr({stroke: "none"}),
            a = res.attrs,
            node = res.node,
            fill = node.getElementsByTagName(fillString)[0];
        a.src = src;
        res.X = a.x = x;
        res.Y = a.y = y;
        res.W = a.width = w;
        res.H = a.height = h;
        a.path = path;
        res.type = "image";
        fill.parentNode == node && node.removeChild(fill);
        fill.rotate = true;
        fill.src = src;
        fill.type = "tile";
        res._.fillpos = [x, y];
        res._.fillsize = [w, h];
        node.appendChild(fill);
        setCoords(res, 1, 1, 0, 0, 0);
        return res;
    };
    R._engine.text = function (vml, x, y, text) {
        var el = createNode("shape"),
            path = createNode("path"),
            o = createNode("textpath");
        x = x || 0;
        y = y || 0;
        text = text || "";
        path.v = R.format("m{0},{1}l{2},{1}", round(x * zoom), round(y * zoom), round(x * zoom) + 1);
        path.textpathok = true;
        o.string = Str(text);
        o.on = true;
        el.style.cssText = cssDot;
        el.coordsize = zoom + S + zoom;
        el.coordorigin = "0 0";
        var p = new Element(el, vml),
            attr = {
                fill: "#000",
                stroke: "none",
                font: R._availableAttrs.font,
                text: text
            };
        p.shape = el;
        p.path = path;
        p.textpath = o;
        p.type = "text";
        p.attrs.text = Str(text);
        p.attrs.x = x;
        p.attrs.y = y;
        p.attrs.w = 1;
        p.attrs.h = 1;
        setFillAndStroke(p, attr);
        el.appendChild(o);
        el.appendChild(path);
        vml.canvas.appendChild(el);
        var skew = createNode("skew");
        skew.on = true;
        el.appendChild(skew);
        p.skew = skew;
        p.transform(E);
        return p;
    };
    R._engine.setSize = function (width, height) {
        var cs = this.canvas.style;
        this.width = width;
        this.height = height;
        width == +width && (width += "px");
        height == +height && (height += "px");
        cs.width = width;
        cs.height = height;
        cs.clip = "rect(0 " + width + " " + height + " 0)";
        if (this._viewBox) {
            R._engine.setViewBox.apply(this, this._viewBox);
        }
        return this;
    };
    R._engine.setViewBox = function (x, y, w, h, fit) {
        R.eve("raphael.setViewBox", this, this._viewBox, [x, y, w, h, fit]);
        var paperSize = this.getSize(),
            width = paperSize.width,
            height = paperSize.height,
            H, W;
        if (fit) {
            H = height / h;
            W = width / w;
            if (w * H < width) {
                x -= (width - w * H) / 2 / H;
            }
            if (h * W < height) {
                y -= (height - h * W) / 2 / W;
            }
        }
        this._viewBox = [x, y, w, h, !!fit];
        this._viewBoxShift = {
            dx: -x,
            dy: -y,
            scale: paperSize
        };
        this.forEach(function (el) {
            el.transform("...");
        });
        return this;
    };
    var createNode;
    R._engine.initWin = function (win) {
        var doc = win.document;
        if (doc.styleSheets.length < 31) {
            doc.createStyleSheet().addRule(".rvml", "behavior:url(#default#VML)");
        } else {
            // no more room, add to the existing one
            // http://msdn.microsoft.com/en-us/library/ms531194%28VS.85%29.aspx
            doc.styleSheets[0].addRule(".rvml", "behavior:url(#default#VML)");
        }
        try {
            !doc.namespaces.rvml && doc.namespaces.add("rvml", "urn:schemas-microsoft-com:vml");
            createNode = function (tagName) {
                return doc.createElement('<rvml:' + tagName + ' class="rvml">');
            };
        } catch (e) {
            createNode = function (tagName) {
                return doc.createElement('<' + tagName + ' xmlns="urn:schemas-microsoft.com:vml" class="rvml">');
            };
        }
    };
    R._engine.initWin(R._g.win);
    R._engine.create = function () {
        var con = R._getContainer.apply(0, arguments),
            container = con.container,
            height = con.height,
            s,
            width = con.width,
            x = con.x,
            y = con.y;
        if (!container) {
            throw new Error("VML container not found.");
        }
        var res = new R._Paper,
            c = res.canvas = R._g.doc.createElement("div"),
            cs = c.style;
        x = x || 0;
        y = y || 0;
        width = width || 512;
        height = height || 342;
        res.width = width;
        res.height = height;
        width == +width && (width += "px");
        height == +height && (height += "px");
        res.coordsize = zoom * 1e3 + S + zoom * 1e3;
        res.coordorigin = "0 0";
        res.span = R._g.doc.createElement("span");
        res.span.style.cssText = "position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;";
        c.appendChild(res.span);
        cs.cssText = R.format("top:0;left:0;display:inline-block;position:absolute;clip:rect(0 {0} {1} 0);", width, height);
        if (container == 1) {
            R._g.doc.body.appendChild(c);
            cs.left = x + "px";
            cs.top = y + "px";
            cs.position = "absolute";
        } else {
            if (container.firstChild) {
                container.insertBefore(c, container.firstChild);
            } else {
                container.appendChild(c);
            }
        }
        res.renderfix = function () {};
        return res;
    };
    R.prototype.clear = function () {
        R.eve("raphael.clear", this);
        this.canvas.innerHTML = E;
        this.span = R._g.doc.createElement("span");
        this.span.style.cssText = "position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";
        this.canvas.appendChild(this.span);
        this.bottom = this.top = null;
    };
    R.prototype.remove = function () {
        R.eve("raphael.remove", this);
        this.canvas.parentNode.removeChild(this.canvas);
        for (var i in this) {
            this[i] = typeof this[i] == "function" ? R._removedFactory(i) : null;
        }
        return true;
    };

    var setproto = R.st;
    for (var method in elproto) if (elproto[has](method) && !setproto[has](method)) {
        setproto[method] = (function (methodname) {
            return function () {
                var arg = arguments;
                return this.forEach(function (el) {
                    el[methodname].apply(el, arg);
                });
            };
        })(method);
    }
}));

// ┌────────────────────────────────────────────────────────────────────┐ \\
// │ Rapha?l 2.1.4 - JavaScript Vector Library                      │ \\
// ├────────────────────────────────────────────────────────────────────┤ \\
// │ Copyright ? 2008-2012 Dmitry Baranovskiy (http://raphaeljs.com)    │ \\
// │ Copyright ? 2008-2012 Sencha Labs (http://sencha.com)              │ \\
// ├────────────────────────────────────────────────────────────────────┤ \\
// │ Licensed under the MIT (http://raphaeljs.com/license.html) license.│ \\
// └────────────────────────────────────────────────────────────────────┘ \\

(function (glob, factory) {
    if (typeof define === "function" && define.amd) {
        define("raphael", ["raphael.core", "raphael.svg", "raphael.vml"], function(Raphael) {
            return factory(Raphael);
        });
    } else if (typeof exports === "object") {
        var raphael = require("raphael.core");

        require("raphael.svg");
        require("raphael.vml");

        module.exports = factory(raphael);
    } else {
        //glob.Raphael = factory(glob.Raphael);
    }
}(this, function (Raphael) {
    return Raphael.ninja();
}));
/*
 Leaflet 1.0.0-rc.1 (6ea195a), a JS library for interactive maps. http://leafletjs.com
 (c) 2010-2015 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */
(function (window, document, undefined) {
    var L = {
        version: '1.0.0-rc.1'
    };

    function expose() {
        var oldL = window.L;

        L.noConflict = function () {
            window.L = oldL;
            return this;
        };

        window.L = L;
    }

// define Leaflet for Node module pattern loaders, including Browserify
    if (typeof module === 'object' && typeof module.exports === 'object') {
        module.exports = L;

// define Leaflet as an AMD module
    } else if (typeof define === 'function' && define.amd) {
        define(L);
    }

// define Leaflet as a global L variable, saving the original L to restore later if needed
    if (typeof window !== 'undefined') {
        expose();
    }



    /*
     * @namespace Util
     *
     * Various utility functions, used by Leaflet internally.
     */

    L.Util = {

        // @function extend(dest: Object, src?: Object): Object
        // Merges the properties of the `src` object (or multiple objects) into `dest` object and returns the latter. Has an `L.extend` shortcut.
        extend: function (dest) {
            var i, j, len, src;

            for (j = 1, len = arguments.length; j < len; j++) {
                src = arguments[j];
                for (i in src) {
                    dest[i] = src[i];
                }
            }
            return dest;
        },

        // @function create(proto: Object, properties?: Object): Object
        // Compatibility polyfill for [Object.create](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/create)
        create: Object.create || (function () {
            function F() {}
            return function (proto) {
                F.prototype = proto;
                return new F();
            };
        })(),

        // @function bind(fn: Function, …): Function
        // Returns a new function bound to the arguments passed, like [Function.prototype.bind](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function/bind).
        // Has a `L.bind()` shortcut.
        bind: function (fn, obj) {
            var slice = Array.prototype.slice;

            if (fn.bind) {
                return fn.bind.apply(fn, slice.call(arguments, 1));
            }

            var args = slice.call(arguments, 2);

            return function () {
                return fn.apply(obj, args.length ? args.concat(slice.call(arguments)) : arguments);
            };
        },

        // @function stamp(obj: Object): Number
        // Returns the unique ID of an object, assiging it one if it doesn't have it.
        stamp: function (obj) {
            /*eslint-disable */
            obj._leaflet_id = obj._leaflet_id || ++L.Util.lastId;
            return obj._leaflet_id;
            /*eslint-enable */
        },

        // @property lastId: Number
        // Last unique ID used by [`stamp()`](#util-stamp)
        lastId: 0,

        // @function throttle(fn: Function, time: Number, context: Object): Function
        // Returns a function which executes function `fn` with the given scope `context`
        // (so that the `this` keyword refers to `context` inside `fn`'s code). The arguments received by the bound function will be any arguments passed when binding the function, followed by any arguments passed when invoking the bound function. Has an `L.bind` shortcut.
        throttle: function (fn, time, context) {
            var lock, args, wrapperFn, later;

            later = function () {
                // reset lock and call if queued
                lock = false;
                if (args) {
                    wrapperFn.apply(context, args);
                    args = false;
                }
            };

            wrapperFn = function () {
                if (lock) {
                    // called too soon, queue to call later
                    args = arguments;

                } else {
                    // call and lock until later
                    fn.apply(context, arguments);
                    setTimeout(later, time);
                    lock = true;
                }
            };

            return wrapperFn;
        },

        // @function wrapNum(num: Number, range: Number[], includeMax?: Boolean): Number
        // Returns the number `num` modulo `range` in such a way so it lies within
        // `range[0]` and `range[1]`. The returned value will be always smaller than
        // `range[1]` unless `includeMax` is set to `true`.
        wrapNum: function (x, range, includeMax) {
            var max = range[1],
                min = range[0],
                d = max - min;
            return x === max && includeMax ? x : ((x - min) % d + d) % d + min;
        },

        // @function falseFn(): Function
        // Returns a function which always returns `false`.
        falseFn: function () { return false; },

        // @function formatNum(num: Number, digits?: Number): Number
        // Returns the number `num` rounded to `digits` decimals, or to 5 decimals by default.
        formatNum: function (num, digits) {
            var pow = Math.pow(10, digits || 5);
            return Math.round(num * pow) / pow;
        },

        // @function trim(str: String): String
        // Compatibility polyfill for [String.prototype.trim](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String/Trim)
        trim: function (str) {
            return str.trim ? str.trim() : str.replace(/^\s+|\s+$/g, '');
        },

        // @function splitWords(str: String): String[]
        // Trims and splits the string on whitespace and returns the array of parts.
        splitWords: function (str) {
            return L.Util.trim(str).split(/\s+/);
        },

        // @function setOptions(obj: Object: options: Object): Object
        // Merges the given properties to the `options` of the `obj` object, returning the resulting options. See `Class options`. Has an `L.setOptions` shortcut.
        setOptions: function (obj, options) {
            if (!obj.hasOwnProperty('options')) {
                obj.options = obj.options ? L.Util.create(obj.options) : {};
            }
            for (var i in options) {
                obj.options[i] = options[i];
            }
            return obj.options;
        },

        // @function getParamString(obj: Object, existingUrl?: String, uppercase?: Boolean): String
        // Converts an object into a parameter URL string, e.g. `{a: "foo", b: "bar"}`
        // translates to `'?a=foo&b=bar'`. If `existingUrl` is set, the parameters will
        // be appended at the end. If `uppercase` is `true`, the parameter names will
        // be uppercased (e.g. `'?A=foo&B=bar'`)
        getParamString: function (obj, existingUrl, uppercase) {
            var params = [];
            for (var i in obj) {
                params.push(encodeURIComponent(uppercase ? i.toUpperCase() : i) + '=' + encodeURIComponent(obj[i]));
            }
            return ((!existingUrl || existingUrl.indexOf('?') === -1) ? '?' : '&') + params.join('&');
        },

        // @template (str: String, data: Object)
        // Simple templating facility, accepts a template string of the form `'Hello {a}, {b}'`
        // and a data object like `{a: 'foo', b: 'bar'}`, returns evaluated string
        // `('Hello foo, bar')`. You can also specify functions instead of strings for
        // data values — they will be evaluated passing `data` as an argument.
        template: function (str, data) {
            return str.replace(L.Util.templateRe, function (str, key) {
                var value = data[key];

                if (value === undefined) {
                    throw new Error('No value provided for variable ' + str);

                } else if (typeof value === 'function') {
                    value = value(data);
                }
                return value;
            });
        },

        templateRe: /\{ *([\w_\-]+) *\}/g,

        // @function isArray(obj): Boolean
        // Compatibility polyfill for [Array.isArray](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray)
        isArray: Array.isArray || function (obj) {
            return (Object.prototype.toString.call(obj) === '[object Array]');
        },

        // @function indexOf: Number
        // Compatibility polyfill for [Array.prototype.indexOf](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf)
        indexOf: function (array, el) {
            for (var i = 0; i < array.length; i++) {
                if (array[i] === el) { return i; }
            }
            return -1;
        },

        // @property emptyImageUrl: String
        // Data URI string containing a base64-encoded empty GIF image.
        // Used as a hack to free memory from unused images on WebKit-powered
        // mobile devices (by setting image `src` to this string).
        emptyImageUrl: 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs='
    };

    (function () {
        // inspired by http://paulirish.com/2011/requestanimationframe-for-smart-animating/

        function getPrefixed(name) {
            return window['webkit' + name] || window['moz' + name] || window['ms' + name];
        }

        var lastTime = 0;

        // fallback for IE 7-8
        function timeoutDefer(fn) {
            var time = +new Date(),
                timeToCall = Math.max(0, 16 - (time - lastTime));

            lastTime = time + timeToCall;
            return window.setTimeout(fn, timeToCall);
        }

        var requestFn = window.requestAnimationFrame || getPrefixed('RequestAnimationFrame') || timeoutDefer,
            cancelFn = window.cancelAnimationFrame || getPrefixed('CancelAnimationFrame') ||
                getPrefixed('CancelRequestAnimationFrame') || function (id) { window.clearTimeout(id); };


        // @function requestAnimFrame(fn: Function, context?: Object, immediate?: Boolean): requestId: Number
        // Schedules `fn` to be executed when the browser repaints. `fn` is bound to
        // `context` if given. When `immediate` is set, `fn` is called immediately if
        // the browser doesn't have native support for
        // [`window.requestAnimationFrame`](https://developer.mozilla.org/docs/Web/API/window/requestAnimationFrame),
        // otherwise it's delayed. Returns an id that can be used to cancel the request.
        L.Util.requestAnimFrame = function (fn, context, immediate) {
            if (immediate && requestFn === timeoutDefer) {
                fn.call(context);
            } else {
                return requestFn.call(window, L.bind(fn, context));
            }
        };

        // @function cancelAnimFrame(id: Number)
        // Cancels a previous `requestAnimFrame`. See also [window.cancelAnimationFrame](https://developer.mozilla.org/docs/Web/API/window/cancelAnimationFrame).
        L.Util.cancelAnimFrame = function (id) {
            if (id) {
                cancelFn.call(window, id);
            }
        };
    })();

// shortcuts for most used utility functions
    L.extend = L.Util.extend;
    L.bind = L.Util.bind;
    L.stamp = L.Util.stamp;
    L.setOptions = L.Util.setOptions;




// @class Class
// @aka L.Class

// @section
// @uninheritable

// Thanks to John Resig and Dean Edwards for inspiration!

    L.Class = function () {};

    L.Class.extend = function (props) {

        // @function extend(props: Object): Function
        // [Extends the current class](#class-inheritance) given the properties to be included.
        // Returns a Javascript function that is a class constructor (to be called with `new`).
        var NewClass = function () {

            // call the constructor
            if (this.initialize) {
                this.initialize.apply(this, arguments);
            }

            // call all constructor hooks
            this.callInitHooks();
        };

        var parentProto = NewClass.__super__ = this.prototype;

        var proto = L.Util.create(parentProto);
        proto.constructor = NewClass;

        NewClass.prototype = proto;

        // inherit parent's statics
        for (var i in this) {
            if (this.hasOwnProperty(i) && i !== 'prototype') {
                NewClass[i] = this[i];
            }
        }

        // mix static properties into the class
        if (props.statics) {
            L.extend(NewClass, props.statics);
            delete props.statics;
        }

        // mix includes into the prototype
        if (props.includes) {
            L.Util.extend.apply(null, [proto].concat(props.includes));
            delete props.includes;
        }

        // merge options
        if (proto.options) {
            props.options = L.Util.extend(L.Util.create(proto.options), props.options);
        }

        // mix given properties into the prototype
        L.extend(proto, props);

        proto._initHooks = [];

        // add method for calling all hooks
        proto.callInitHooks = function () {

            if (this._initHooksCalled) { return; }

            if (parentProto.callInitHooks) {
                parentProto.callInitHooks.call(this);
            }

            this._initHooksCalled = true;

            for (var i = 0, len = proto._initHooks.length; i < len; i++) {
                proto._initHooks[i].call(this);
            }
        };

        return NewClass;
    };


// @function include(properties: Object)
// [Includes a mixin](#class-includes) into the current class.
    L.Class.include = function (props) {
        L.extend(this.prototype, props);
        return this;
    };

// @function mergeOptions(options: Object)
// [Merges `options`](#class-options) into the defaults of the class.
    L.Class.mergeOptions = function (options) {
        L.extend(this.prototype.options, options);
        return this;
    };

// @function addInitHook(fn: Function)
// Adds a [constructor hook](#class-constructor-hooks) to the class.
    L.Class.addInitHook = function (fn) { // (Function) || (String, args...)
        var args = Array.prototype.slice.call(arguments, 1);

        var init = typeof fn === 'function' ? fn : function () {
            this[fn].apply(this, args);
        };

        this.prototype._initHooks = this.prototype._initHooks || [];
        this.prototype._initHooks.push(init);
        return this;
    };



    /*
     * @class Evented
     * @aka L.Evented
     * @inherits Class
     *
     * A set of methods shared between event-powered classes (like `Map` and `Marker`). Generally, events allow you to execute some function when something happens with an object (e.g. the user clicks on the map, causing the map to fire `'click'` event).
     *
     * @example
     *
     * ```js
     * map.on('click', function(e) {
     * 	alert(e.latlng);
     * } );
     * ```
     *
     * Leaflet deals with event listeners by reference, so if you want to add a listener and then remove it, define it as a function:
     *
     * ```js
     * function onClick(e) { ... }
     *
     * map.on('click', onClick);
     * map.off('click', onClick);
     * ```
     */


    L.Evented = L.Class.extend({

        /* @method on(type: String, fn: Function, context?: Object): this
         * Adds a listener function (`fn`) to a particular event type of the object. You can optionally specify the context of the listener (object the this keyword will point to). You can also pass several space-separated types (e.g. `'click dblclick'`).
         *
         * @alternative
         * @method on(eventMap: Object): this
         * Adds a set of type/listener pairs, e.g. `{click: onClick, mousemove: onMouseMove}`
         */
        on: function (types, fn, context) {

            // types can be a map of types/handlers
            if (typeof types === 'object') {
                for (var type in types) {
                    // we don't process space-separated events here for performance;
                    // it's a hot path since Layer uses the on(obj) syntax
                    this._on(type, types[type], fn);
                }

            } else {
                // types can be a string of space-separated words
                types = L.Util.splitWords(types);

                for (var i = 0, len = types.length; i < len; i++) {
                    this._on(types[i], fn, context);
                }
            }

            return this;
        },

        /* @method off(type: String, fn?: Function, context?: Object): this
         * Removes a previously added listener function. If no function is specified, it will remove all the listeners of that particular event from the object. Note that if you passed a custom context to `on`, you must pass the same context to `off` in order to remove the listener.
         *
         * @alternative
         * @method off(eventMap: Object): this
         * Removes a set of type/listener pairs.
         *
         * @alternative
         * @method off: this
         * Removes all listeners to all events on the object.
         */
        off: function (types, fn, context) {

            if (!types) {
                // clear all listeners if called without arguments
                delete this._events;

            } else if (typeof types === 'object') {
                for (var type in types) {
                    this._off(type, types[type], fn);
                }

            } else {
                types = L.Util.splitWords(types);

                for (var i = 0, len = types.length; i < len; i++) {
                    this._off(types[i], fn, context);
                }
            }

            return this;
        },

        // attach listener (without syntactic sugar now)
        _on: function (type, fn, context) {

            var events = this._events = this._events || {},
                contextId = context && context !== this && L.stamp(context);

            if (contextId) {
                // store listeners with custom context in a separate hash (if it has an id);
                // gives a major performance boost when firing and removing events (e.g. on map object)

                var indexKey = type + '_idx',
                    indexLenKey = type + '_len',
                    typeIndex = events[indexKey] = events[indexKey] || {},
                    id = L.stamp(fn) + '_' + contextId;

                if (!typeIndex[id]) {
                    typeIndex[id] = {fn: fn, ctx: context};

                    // keep track of the number of keys in the index to quickly check if it's empty
                    events[indexLenKey] = (events[indexLenKey] || 0) + 1;
                }

            } else {
                // individual layers mostly use "this" for context and don't fire listeners too often
                // so simple array makes the memory footprint better while not degrading performance

                events[type] = events[type] || [];
                events[type].push({fn: fn});
            }
        },

        _off: function (type, fn, context) {
            var events = this._events,
                indexKey = type + '_idx',
                indexLenKey = type + '_len';

            if (!events) { return; }

            if (!fn) {
                // clear all listeners for a type if function isn't specified
                delete events[type];
                delete events[indexKey];
                delete events[indexLenKey];
                return;
            }

            var contextId = context && context !== this && L.stamp(context),
                listeners, i, len, listener, id;

            if (contextId) {
                id = L.stamp(fn) + '_' + contextId;
                listeners = events[indexKey];

                if (listeners && listeners[id]) {
                    listener = listeners[id];
                    delete listeners[id];
                    events[indexLenKey]--;
                }

            } else {
                listeners = events[type];

                if (listeners) {
                    for (i = 0, len = listeners.length; i < len; i++) {
                        if (listeners[i].fn === fn) {
                            listener = listeners[i];
                            listeners.splice(i, 1);
                            break;
                        }
                    }
                }
            }

            // set the removed listener to noop so that's not called if remove happens in fire
            if (listener) {
                listener.fn = L.Util.falseFn;
            }
        },

        // @method fire(type: String, data?: Object, propagate?: Boolean): this
        // Fires an event of the specified type. You can optionally provide an data
        // object — the first argument of the listener function will contain its
        // properties. The event might can optionally be propagated to event parents.
        fire: function (type, data, propagate) {
            if (!this.listens(type, propagate)) { return this; }

            var event = L.Util.extend({}, data, {type: type, target: this}),
                events = this._events;

            if (events) {
                var typeIndex = events[type + '_idx'],
                    i, len, listeners, id;

                if (events[type]) {
                    // make sure adding/removing listeners inside other listeners won't cause infinite loop
                    listeners = events[type].slice();

                    for (i = 0, len = listeners.length; i < len; i++) {
                        listeners[i].fn.call(this, event);
                    }
                }

                // fire event for the context-indexed listeners as well
                for (id in typeIndex) {
                    typeIndex[id].fn.call(typeIndex[id].ctx, event);
                }
            }

            if (propagate) {
                // propagate the event to parents (set with addEventParent)
                this._propagateEvent(event);
            }

            return this;
        },

        // @method listens(type: String): Boolean
        // Returns `true` if a particular event type has any listeners attached to it.
        listens: function (type, propagate) {
            var events = this._events;

            if (events && (events[type] || events[type + '_len'])) { return true; }

            if (propagate) {
                // also check parents for listeners if event propagates
                for (var id in this._eventParents) {
                    if (this._eventParents[id].listens(type, propagate)) { return true; }
                }
            }
            return false;
        },

        // @method once(…): this
        // Behaves as [`on(…)`](#evented-on), except the listener will only get fired once and then removed.
        once: function (types, fn, context) {

            if (typeof types === 'object') {
                for (var type in types) {
                    this.once(type, types[type], fn);
                }
                return this;
            }

            var handler = L.bind(function () {
                this
                    .off(types, fn, context)
                    .off(types, handler, context);
            }, this);

            // add a listener that's executed once and removed after that
            return this
                .on(types, fn, context)
                .on(types, handler, context);
        },

        // @method addEventParent(obj: Evented): this
        // Adds an event parent - an `Evented` that will receive propagated events
        addEventParent: function (obj) {
            this._eventParents = this._eventParents || {};
            this._eventParents[L.stamp(obj)] = obj;
            return this;
        },

        // @method removeEventParent(obj: Evented): this
        // Removes an event parent, so it will stop receiving propagated events
        removeEventParent: function (obj) {
            if (this._eventParents) {
                delete this._eventParents[L.stamp(obj)];
            }
            return this;
        },

        _propagateEvent: function (e) {
            for (var id in this._eventParents) {
                this._eventParents[id].fire(e.type, L.extend({layer: e.target}, e), true);
            }
        }
    });

    var proto = L.Evented.prototype;

// aliases; we should ditch those eventually

// @method addEventListener(…): this
// Alias to [`on(…)`](#evented-on)
    proto.addEventListener = proto.on;

// @method removeEventListener(…): this
// Alias to [`off(…)`](#evented-off)

// @method clearAllEventListeners(…): this
// Alias to [`off()`](#evented-off)
    proto.removeEventListener = proto.clearAllEventListeners = proto.off;

// @method addOneTimeEventListener(…): this
// Alias to [`once(…)`](#evented-once)
    proto.addOneTimeEventListener = proto.once;

// @method fireEvent(…): this
// Alias to [`fire(…)`](#evented-fire)
    proto.fireEvent = proto.fire;

// @method hasEventListeners(…): Boolean
// Alias to [`listens(…)`](#evented-listens)
    proto.hasEventListeners = proto.listens;

    L.Mixin = {Events: proto};



    /*
     * @namespace Browser
     * @aka L.Browser
     *
     * A namespace with static properties for browser/feature detection used by Leaflet internally.
     *
     * @example
     *
     * ```js
     * if (L.Browser.ielt9) {
     *   alert('Upgrade your browser, dude!');
     * }
     * ```
     */

    (function () {

        var ua = navigator.userAgent.toLowerCase(),
            doc = document.documentElement,

            ie = 'ActiveXObject' in window,

            webkit    = ua.indexOf('webkit') !== -1,
            phantomjs = ua.indexOf('phantom') !== -1,
            android23 = ua.search('android [23]') !== -1,
            chrome    = ua.indexOf('chrome') !== -1,
            gecko     = ua.indexOf('gecko') !== -1  && !webkit && !window.opera && !ie,

            mobile = typeof orientation !== 'undefined' || ua.indexOf('mobile') !== -1,
            msPointer = !window.PointerEvent && window.MSPointerEvent,
            pointer = window.PointerEvent || msPointer,

            ie3d = ie && ('transition' in doc.style),
            webkit3d = ('WebKitCSSMatrix' in window) && ('m11' in new window.WebKitCSSMatrix()) && !android23,
            gecko3d = 'MozPerspective' in doc.style,
            opera12 = 'OTransition' in doc.style;

        var touch = !window.L_NO_TOUCH && (pointer || 'ontouchstart' in window ||
            (window.DocumentTouch && document instanceof window.DocumentTouch));

        L.Browser = {

            // @property ie: Boolean
            // `true` for all Internet Explorer versions (not Edge).
            ie: ie,

            // @property ielt9: Boolean
            // `true` for Internet Explorer versions less than 9.
            ielt9: ie && !document.addEventListener,

            // @property edge: Boolean
            // `true` for the Edge web browser.
            edge: 'msLaunchUri' in navigator && !('documentMode' in document),

            // @property webkit: Boolean
            // `true` for webkit-based browsers like Chrome and Safari (including mobile versions).
            webkit: webkit,

            // @property gecko: Boolean
            // `true` for gecko-based browsers like Firefox.
            gecko: gecko,

            // @property android: Boolean
            // `true` for any browser running on an Android platform.
            android: ua.indexOf('android') !== -1,

            // @property android23: Boolean
            // `true` for browsers running on Android 2 or Android 3.
            android23: android23,

            // @property chrome: Boolean
            // `true` for the Chrome browser.
            chrome: chrome,

            // @property safari: Boolean
            // `true` for the Safari browser.
            safari: !chrome && ua.indexOf('safari') !== -1,


            // @property ie3d: Boolean
            // `true` for all Internet Explorer versions supporting CSS transforms.
            ie3d: ie3d,

            // @property webkit3d: Boolean
            // `true` for webkit-based browsers supporting CSS transforms.
            webkit3d: webkit3d,

            // @property gecko3d: Boolean
            // `true` for gecko-based browsers supporting CSS transforms.
            gecko3d: gecko3d,

            // @property opera12: Boolean
            // `true` for the Opera browser supporting CSS transforms (version 12 or later).
            opera12: opera12,

            // @property any3d: Boolean
            // `true` for all browsers supporting CSS transforms.
            any3d: !window.L_DISABLE_3D && (ie3d || webkit3d || gecko3d) && !opera12 && !phantomjs,


            // @property mobile: Boolean
            // `true` for all browsers running in a mobile device.
            mobile: mobile,

            // @property mobileWebkit: Boolean
            // `true` for all webkit-based browsers in a mobile device.
            mobileWebkit: mobile && webkit,

            // @property mobileWebkit3d: Boolean
            // `true` for all webkit-based browsers in a mobile device supporting CSS transforms.
            mobileWebkit3d: mobile && webkit3d,

            // @property mobileOpera: Boolean
            // `true` for the Opera browser in a mobile device.
            mobileOpera: mobile && window.opera,

            // @property mobileGecko: Boolean
            // `true` for gecko-based browsers running in a mobile device.
            mobileGecko: mobile && gecko,


            // @property touch: Boolean
            // `true` for all browsers supporting [touch events](https://developer.mozilla.org/docs/Web/API/Touch_events).
            touch: !!touch,

            // @property msPointer: Boolean
            // `true` for browsers implementing the Microsoft touch events model (notably IE10).
            msPointer: !!msPointer,

            // @property pointer: Boolean
            // `true` for all browsers supporting [pointer events](https://msdn.microsoft.com/en-us/library/dn433244%28v=vs.85%29.aspx).
            pointer: !!pointer,


            // @property retina: Boolean
            // `true` for browsers on a high-resolution "retina" screen.
            retina: (window.devicePixelRatio || (window.screen.deviceXDPI / window.screen.logicalXDPI)) > 1
        };

    }());



    /*
     * @class Point
     * @aka L.Point
     *
     * Represents a point with `x` and `y` coordinates in pixels.
     *
     * @example
     *
     * ```js
     * var point = L.point(200, 300);
     * ```
     *
     * All Leaflet methods and options that accept `Point` objects also accept them in a simple Array form (unless noted otherwise), so these lines are equivalent:
     *
     * ```js
     * map.panBy([200, 300]);
     * map.panBy(L.point(200, 300));
     * ```
     */

    L.Point = function (x, y, round) {
        this.x = (round ? Math.round(x) : x);
        this.y = (round ? Math.round(y) : y);
    };

    L.Point.prototype = {

        // @method clone(): Point
        // Returns a copy of the current point.
        clone: function () {
            return new L.Point(this.x, this.y);
        },

        // @method add(otherPoint: Point): Point
        // Returns the result of addition of the current and the given points.
        add: function (point) {
            // non-destructive, returns a new point
            return this.clone()._add(L.point(point));
        },

        _add: function (point) {
            // destructive, used directly for performance in situations where it's safe to modify existing point
            this.x += point.x;
            this.y += point.y;
            return this;
        },

        // @method subtract(otherPoint: Point): Point
        // Returns the result of subtraction of the given point from the current.
        subtract: function (point) {
            return this.clone()._subtract(L.point(point));
        },

        _subtract: function (point) {
            this.x -= point.x;
            this.y -= point.y;
            return this;
        },

        // @method divideBy(num: Number): Point
        // Returns the result of division of the current point by the given number.
        divideBy: function (num) {
            return this.clone()._divideBy(num);
        },

        _divideBy: function (num) {
            this.x /= num;
            this.y /= num;
            return this;
        },

        // @method multiplyBy(num: Number): Point
        // Returns the result of multiplication of the current point by the given number.
        multiplyBy: function (num) {
            return this.clone()._multiplyBy(num);
        },

        _multiplyBy: function (num) {
            this.x *= num;
            this.y *= num;
            return this;
        },

        // @method scaleBy(scale: Point): Point
        // Multiply each coordinate of the current point by each coordinate of
        // `scale`. In linear algebra terms, multiply the point by the
        // [scaling matrix](https://en.wikipedia.org/wiki/Scaling_%28geometry%29#Matrix_representation)
        // defined by `scale`.
        scaleBy: function (point) {
            return new L.Point(this.x * point.x, this.y * point.y);
        },

        // @method unscaleBy(scale: Point): Point
        // Inverse of `scaleBy`. Divide each coordinate of the current point by
        // each coordinate of `scale`.
        unscaleBy: function (point) {
            return new L.Point(this.x / point.x, this.y / point.y);
        },

        // @method round(): Point
        // Returns a copy of the current point with rounded coordinates.
        round: function () {
            return this.clone()._round();
        },

        _round: function () {
            this.x = Math.round(this.x);
            this.y = Math.round(this.y);
            return this;
        },

        // @method floor(): Point
        // Returns a copy of the current point with floored coordinates (rounded down).
        floor: function () {
            return this.clone()._floor();
        },

        _floor: function () {
            this.x = Math.floor(this.x);
            this.y = Math.floor(this.y);
            return this;
        },

        // @method ceil(): Point
        // Returns a copy of the current point with ceiled coordinates (rounded up).
        ceil: function () {
            return this.clone()._ceil();
        },

        _ceil: function () {
            this.x = Math.ceil(this.x);
            this.y = Math.ceil(this.y);
            return this;
        },

        // @method distanceTo(otherPoint: Point): Number
        // Returns the cartesian distance between the current and the given points.
        distanceTo: function (point) {
            point = L.point(point);

            var x = point.x - this.x,
                y = point.y - this.y;

            return Math.sqrt(x * x + y * y);
        },

        // @method equals(otherPoint: Point): Boolean
        // Returns `true` if the given point has the same coordinates.
        equals: function (point) {
            point = L.point(point);

            return point.x === this.x &&
                point.y === this.y;
        },

        // @method contains(otherPoint: Point): Boolean
        // Returns `true` if both coordinates of the given point are less than the corresponding current point coordinates (in absolute values).
        contains: function (point) {
            point = L.point(point);

            return Math.abs(point.x) <= Math.abs(this.x) &&
                Math.abs(point.y) <= Math.abs(this.y);
        },

        // @method toString(): String
        // Returns a string representation of the point for debugging purposes.
        toString: function () {
            return 'Point(' +
                L.Util.formatNum(this.x) + ', ' +
                L.Util.formatNum(this.y) + ')';
        }
    };

// @factory L.point(x: Number, y: Number, round?: Boolean)
// Creates a Point object with the given `x` and `y` coordinates. If optional `round` is set to true, rounds the `x` and `y` values.

// @alternative
// @factory L.point(coords: Number[])
// Expects an array of the form `[x, y]` instead.
    L.point = function (x, y, round) {
        if (x instanceof L.Point) {
            return x;
        }
        if (L.Util.isArray(x)) {
            return new L.Point(x[0], x[1]);
        }
        if (x === undefined || x === null) {
            return x;
        }
        return new L.Point(x, y, round);
    };



    /*
     * @class Bounds
     * @aka L.Bounds
     *
     * Represents a rectangular area in pixel coordinates.
     *
     * @example
     *
     * ```js
     * var p1 = L.point(10, 10),
     * p2 = L.point(40, 60),
     * bounds = L.bounds(p1, p2);
     * ```
     *
     * All Leaflet methods that accept `Bounds` objects also accept them in a simple Array form (unless noted otherwise), so the bounds example above can be passed like this:
     *
     * ```js
     * otherBounds.intersects([[10, 10], [40, 60]]);
     * ```
     */

    L.Bounds = function (a, b) {
        if (!a) { return; }

        var points = b ? [a, b] : a;

        for (var i = 0, len = points.length; i < len; i++) {
            this.extend(points[i]);
        }
    };

    L.Bounds.prototype = {
        // @method extend(point: Point): this
        // Extends the bounds to contain the given point.
        extend: function (point) { // (Point)
            point = L.point(point);

            // @property min: Point
            // The top left corner of the rectangle.
            // @property max: Point
            // The bottom right corner of the rectangle.
            if (!this.min && !this.max) {
                this.min = point.clone();
                this.max = point.clone();
            } else {
                this.min.x = Math.min(point.x, this.min.x);
                this.max.x = Math.max(point.x, this.max.x);
                this.min.y = Math.min(point.y, this.min.y);
                this.max.y = Math.max(point.y, this.max.y);
            }
            return this;
        },

        // @method getCenter(round?: Boolean): Point
        // Returns the center point of the bounds.
        getCenter: function (round) {
            return new L.Point(
                (this.min.x + this.max.x) / 2,
                (this.min.y + this.max.y) / 2, round);
        },

        // @method getBottomLeft(): Point
        // Returns the bottom-left point of the bounds.
        getBottomLeft: function () {
            return new L.Point(this.min.x, this.max.y);
        },

        // @method getTopRight(): Point
        // Returns the top-right point of the bounds.
        getTopRight: function () { // -> Point
            return new L.Point(this.max.x, this.min.y);
        },

        // @method getSize(): Point
        // Returns the size of the given bounds
        getSize: function () {
            return this.max.subtract(this.min);
        },

        // @method contains(otherBounds: Bounds): Boolean
        // Returns `true` if the rectangle contains the given one.
        // @alternative
        // @method contains(point: Point): Boolean
        // Returns `true` if the rectangle contains the given poing.
        contains: function (obj) {
            var min, max;

            if (typeof obj[0] === 'number' || obj instanceof L.Point) {
                obj = L.point(obj);
            } else {
                obj = L.bounds(obj);
            }

            if (obj instanceof L.Bounds) {
                min = obj.min;
                max = obj.max;
            } else {
                min = max = obj;
            }

            return (min.x >= this.min.x) &&
                (max.x <= this.max.x) &&
                (min.y >= this.min.y) &&
                (max.y <= this.max.y);
        },

        // @method intersects(otherBounds: Bounds): Boolean
        // Returns `true` if the rectangle intersects the given bounds. Two bounds
        // intersect if they have at least one point in common.
        intersects: function (bounds) { // (Bounds) -> Boolean
            bounds = L.bounds(bounds);

            var min = this.min,
                max = this.max,
                min2 = bounds.min,
                max2 = bounds.max,
                xIntersects = (max2.x >= min.x) && (min2.x <= max.x),
                yIntersects = (max2.y >= min.y) && (min2.y <= max.y);

            return xIntersects && yIntersects;
        },

        // @method overlaps(otherBounds: Bounds): Boolean
        // Returns `true` if the rectangle overlaps the given bounds. Two bounds
        // overlap if their intersection is an area.
        overlaps: function (bounds) { // (Bounds) -> Boolean
            bounds = L.bounds(bounds);

            var min = this.min,
                max = this.max,
                min2 = bounds.min,
                max2 = bounds.max,
                xOverlaps = (max2.x > min.x) && (min2.x < max.x),
                yOverlaps = (max2.y > min.y) && (min2.y < max.y);

            return xOverlaps && yOverlaps;
        },

        isValid: function () {
            return !!(this.min && this.max);
        }
    };


// @factory L.bounds(topLeft: Point, bottomRight: Point)
// Creates a Bounds object from two coordinates (usually top-left and bottom-right corners).
// @alternative
// @factory L.bounds(points: Point[])
// Creates a Bounds object from the points it contains
    L.bounds = function (a, b) {
        if (!a || a instanceof L.Bounds) {
            return a;
        }
        return new L.Bounds(a, b);
    };



    /*
     * @class Transformation
     * @aka L.Transformation
     *
     * Represents an affine transformation: a set of coefficients `a`, `b`, `c`, `d`
     * for transforming a point of a form `(x, y)` into `(a*x + b, c*y + d)` and doing
     * the reverse. Used by Leaflet in its projections code.
     *
     * @example
     *
     * ```js
     * var transformation = new L.Transformation(2, 5, -1, 10),
     * 	p = L.point(1, 2),
     * 	p2 = transformation.transform(p), //  L.point(7, 8)
     * 	p3 = transformation.untransform(p2); //  L.point(1, 2)
     * ```
     */


// factory new L.Transformation(a: Number, b: Number, c: Number, d: Number)
// Creates a `Transformation` object with the given coefficients.
    L.Transformation = function (a, b, c, d) {
        this._a = a;
        this._b = b;
        this._c = c;
        this._d = d;
    };

    L.Transformation.prototype = {
        // @method transform(point: Point, scale?: Number)
        // Returns a transformed point, optionally multiplied by the given scale.
        // Only accepts real `L.Point` instances, not arrays.
        transform: function (point, scale) { // (Point, Number) -> Point
            return this._transform(point.clone(), scale);
        },

        // destructive transform (faster)
        _transform: function (point, scale) {
            scale = scale || 1;
            point.x = scale * (this._a * point.x + this._b);
            point.y = scale * (this._c * point.y + this._d);
            return point;
        },

        // @method untransform(point: Point, scale?: Number)
        // Returns the reverse transformation of the given point, optionally divided
        // by the given scale. Only accepts real `L.Point` instances, not arrays.
        untransform: function (point, scale) {
            scale = scale || 1;
            return new L.Point(
                (point.x / scale - this._b) / this._a,
                (point.y / scale - this._d) / this._c);
        }
    };



    /*
     * @namespace DomUtil
     *
     * Utility functions to work with the [DOM](https://developer.mozilla.org/docs/Web/API/Document_Object_Model)
     * tree, used by Leaflet internally.
     *
     * Most functions expecting or returning a `HTMLElement` also work for
     * SVG elements. The only difference is that classes refer to CSS classes
     * in HTML and SVG classes in SVG.
     */

    L.DomUtil = {

        // @function get(id: String|HTMLElement): HTMLElement
        // Returns an element given its DOM id, or returns the element itself
        // if it was passed directly.
        get: function (id) {
            return typeof id === 'string' ? document.getElementById(id) : id;
        },

        // @function getStyle(el: HTMLElement, styleAttrib: String): String
        // Returns the value for a certain style attribute on an element,
        // including computed values or values set through CSS.
        getStyle: function (el, style) {

            var value = el.style[style] || (el.currentStyle && el.currentStyle[style]);

            if ((!value || value === 'auto') && document.defaultView) {
                var css = document.defaultView.getComputedStyle(el, null);
                value = css ? css[style] : null;
            }

            return value === 'auto' ? null : value;
        },

        // @function create(tagName: String, className?: String, container?: HTMLElement): HTMLElement
        // Creates an HTML element with `tagName`, sets its class to `className`, and optionally appends it to `container` element.
        create: function (tagName, className, container) {

            var el = document.createElement(tagName);
            el.className = className;

            if (container) {
                container.appendChild(el);
            }

            return el;
        },

        // @function remove(el: HTMLElement)
        // Removes `el` from its parent element
        remove: function (el) {
            var parent = el.parentNode;
            if (parent) {
                parent.removeChild(el);
            }
        },

        // @function empty(el: HTMLElement)
        // Removes all of `el`'s children elements from `el`
        empty: function (el) {
            while (el.firstChild) {
                el.removeChild(el.firstChild);
            }
        },

        // @function toFront(el: HTMLElement)
        // Makes `el` the last children of its parent, so it renders in front of the other children.
        toFront: function (el) {
            el.parentNode.appendChild(el);
        },

        // @function toBack(el: HTMLElement)
        // Makes `el` the first children of its parent, so it renders back from the other children.
        toBack: function (el) {
            var parent = el.parentNode;
            parent.insertBefore(el, parent.firstChild);
        },

        // @function hasClass(el: HTMLElement, name: String): Boolean
        // Returns `true` if the element's class attribute contains `name`.
        hasClass: function (el, name) {
            if (el.classList !== undefined) {
                return el.classList.contains(name);
            }
            var className = L.DomUtil.getClass(el);
            return className.length > 0 && new RegExp('(^|\\s)' + name + '(\\s|$)').test(className);
        },

        // @function addClass(el: HTMLElement, name: String)
        // Adds `name` to the element's class attribute.
        addClass: function (el, name) {
            if (el.classList !== undefined) {
                var classes = L.Util.splitWords(name);
                for (var i = 0, len = classes.length; i < len; i++) {
                    el.classList.add(classes[i]);
                }
            } else if (!L.DomUtil.hasClass(el, name)) {
                var className = L.DomUtil.getClass(el);
                L.DomUtil.setClass(el, (className ? className + ' ' : '') + name);
            }
        },

        // @function removeClass(el: HTMLElement, name: String)
        // Removes `name` from the element's class attribute.
        removeClass: function (el, name) {
            if (el.classList !== undefined) {
                el.classList.remove(name);
            } else {
                L.DomUtil.setClass(el, L.Util.trim((' ' + L.DomUtil.getClass(el) + ' ').replace(' ' + name + ' ', ' ')));
            }
        },

        // @function setClass(el: HTMLElement, name: String)
        // Sets the element's class.
        setClass: function (el, name) {
            if (el.className.baseVal === undefined) {
                el.className = name;
            } else {
                // in case of SVG element
                el.className.baseVal = name;
            }
        },

        // @function getClass(el: HTMLElement): String
        // Returns the element's class.
        getClass: function (el) {
            return el.className.baseVal === undefined ? el.className : el.className.baseVal;
        },

        // @function setOpacity(el: HTMLElement, opacity: Number)
        // Set the opacity of an element (including old IE support).
        // `opacity` must be a number from `0` to `1`.
        setOpacity: function (el, value) {

            if ('opacity' in el.style) {
                el.style.opacity = value;

            } else if ('filter' in el.style) {
                L.DomUtil._setOpacityIE(el, value);
            }
        },

        _setOpacityIE: function (el, value) {
            var filter = false,
                filterName = 'DXImageTransform.Microsoft.Alpha';

            // filters collection throws an error if we try to retrieve a filter that doesn't exist
            try {
                filter = el.filters.item(filterName);
            } catch (e) {
                // don't set opacity to 1 if we haven't already set an opacity,
                // it isn't needed and breaks transparent pngs.
                if (value === 1) { return; }
            }

            value = Math.round(value * 100);

            if (filter) {
                filter.Enabled = (value !== 100);
                filter.Opacity = value;
            } else {
                el.style.filter += ' progid:' + filterName + '(opacity=' + value + ')';
            }
        },

        // @function testProp(props: String[]): String|false
        // Goes through the array of style names and returns the first name
        // that is a valid style name for an element. If no such name is found,
        // it returns false. Useful for vendor-prefixed styles like `transform`.
        testProp: function (props) {

            var style = document.documentElement.style;

            for (var i = 0; i < props.length; i++) {
                if (props[i] in style) {
                    return props[i];
                }
            }
            return false;
        },

        // @function setTransform(el: HTMLElement, offset: Point, scale?: Number)
        // Resets the 3D CSS transform of `el` so it is translated by `offset` pixels
        // and optionally scaled by `scale`. Does not have an effect if the
        // browser doesn't support 3D CSS transforms.
        setTransform: function (el, offset, scale) {
            var pos = offset || new L.Point(0, 0);

            el.style[L.DomUtil.TRANSFORM] =
                (L.Browser.ie3d ?
                'translate(' + pos.x + 'px,' + pos.y + 'px)' :
                'translate3d(' + pos.x + 'px,' + pos.y + 'px,0)') +
                (scale ? ' scale(' + scale + ')' : '');
        },

        // @function setPosition(el: HTMLElement, position: Point)
        // Sets the position of `el` to coordinates specified by `position`,
        // using CSS translate or top/left positioning depending on the browser
        // (used by Leaflet internally to position its layers).
        setPosition: function (el, point) { // (HTMLElement, Point[, Boolean])

            /*eslint-disable */
            el._leaflet_pos = point;
            /*eslint-enable */

            if (L.Browser.any3d) {
                L.DomUtil.setTransform(el, point);
            } else {
                el.style.left = point.x + 'px';
                el.style.top = point.y + 'px';
            }
        },

        // @function getPosition(el: HTMLElement): Point
        // Returns the coordinates of an element previously positioned with setPosition.
        getPosition: function (el) {
            // this method is only used for elements previously positioned using setPosition,
            // so it's safe to cache the position for performance

            return el._leaflet_pos || new L.Point(0, 0);
        }
    };


    (function () {
        // prefix style property names

        // @property TRANSFORM: String
        // Vendor-prefixed fransform style name (e.g. `'webkitTransform'` for WebKit).
        L.DomUtil.TRANSFORM = L.DomUtil.testProp(
            ['transform', 'WebkitTransform', 'OTransform', 'MozTransform', 'msTransform']);


        // webkitTransition comes first because some browser versions that drop vendor prefix don't do
        // the same for the transitionend event, in particular the Android 4.1 stock browser

        // @property TRANSITION: String
        // Vendor-prefixed transform style name.
        var transition = L.DomUtil.TRANSITION = L.DomUtil.testProp(
            ['webkitTransition', 'transition', 'OTransition', 'MozTransition', 'msTransition']);

        L.DomUtil.TRANSITION_END =
            transition === 'webkitTransition' || transition === 'OTransition' ? transition + 'End' : 'transitionend';

        // @function disableTextSelection()
        // Prevents the user from generating `selectstart` DOM events, usually generated
        // when the user drags the mouse through a page with text. Used internally
        // by Leaflet to override the behaviour of any click-and-drag interaction on
        // the map. Affects drag interactions on the whole document.

        // @function enableTextSelection()
        // Cancels the effects of a previous [`L.DomUtil.disableTextSelection`](#domutil-disabletextselection).
        if ('onselectstart' in document) {
            L.DomUtil.disableTextSelection = function () {
                L.DomEvent.on(window, 'selectstart', L.DomEvent.preventDefault);
            };
            L.DomUtil.enableTextSelection = function () {
                L.DomEvent.off(window, 'selectstart', L.DomEvent.preventDefault);
            };

        } else {
            var userSelectProperty = L.DomUtil.testProp(
                ['userSelect', 'WebkitUserSelect', 'OUserSelect', 'MozUserSelect', 'msUserSelect']);

            L.DomUtil.disableTextSelection = function () {
                if (userSelectProperty) {
                    var style = document.documentElement.style;
                    this._userSelect = style[userSelectProperty];
                    style[userSelectProperty] = 'none';
                }
            };
            L.DomUtil.enableTextSelection = function () {
                if (userSelectProperty) {
                    document.documentElement.style[userSelectProperty] = this._userSelect;
                    delete this._userSelect;
                }
            };
        }

        // @function disableImageDrag()
        // As [`L.DomUtil.disableTextSelection`](#domutil-disabletextselection), but
        // for `dragstart` DOM events, usually generated when the user drags an image.
        L.DomUtil.disableImageDrag = function () {
            L.DomEvent.on(window, 'dragstart', L.DomEvent.preventDefault);
        };

        // @function enableImageDrag()
        // Cancels the effects of a previous [`L.DomUtil.disableImageDrag`](#domutil-disabletextselection).
        L.DomUtil.enableImageDrag = function () {
            L.DomEvent.off(window, 'dragstart', L.DomEvent.preventDefault);
        };

        // @function preventOutline(el: HTMLElement)
        // Makes the [outline](https://developer.mozilla.org/docs/Web/CSS/outline)
        // of the element `el` invisible. Used internally by Leaflet to prevent
        // focusable elements from displaying an outline when the user performs a
        // drag interaction on them.
        L.DomUtil.preventOutline = function (element) {
            while (element.tabIndex === -1) {
                element = element.parentNode;
            }
            if (!element || !element.style) { return; }
            L.DomUtil.restoreOutline();
            this._outlineElement = element;
            this._outlineStyle = element.style.outline;
            element.style.outline = 'none';
            L.DomEvent.on(window, 'keydown', L.DomUtil.restoreOutline, this);
        };

        // @function restoreOutline()
        // Cancels the effects of a previous [`L.DomUtil.preventOutline`]().
        L.DomUtil.restoreOutline = function () {
            if (!this._outlineElement) { return; }
            this._outlineElement.style.outline = this._outlineStyle;
            delete this._outlineElement;
            delete this._outlineStyle;
            L.DomEvent.off(window, 'keydown', L.DomUtil.restoreOutline, this);
        };
    })();



    /* @class LatLng
     * @aka L.LatLng
     *
     * Represents a geographical point with a certain latitude and longitude.
     *
     * @example
     *
     * ```
     * var latlng = L.latLng(50.5, 30.5);
     * ```
     *
     * All Leaflet methods that accept LatLng objects also accept them in a simple Array form and simple object form (unless noted otherwise), so these lines are equivalent:
     *
     * ```
     * map.panTo([50, 30]);
     * map.panTo({lon: 30, lat: 50});
     * map.panTo({lat: 50, lng: 30});
     * map.panTo(L.latLng(50, 30));
     * ```
     */

    L.LatLng = function (lat, lng, alt) {
        if (isNaN(lat) || isNaN(lng)) {
            throw new Error('Invalid LatLng object: (' + lat + ', ' + lng + ')');
        }

        // @property lat: Number
        // Latitude in degrees
        this.lat = +lat;

        // @property lng: Number
        // Longitude in degrees
        this.lng = +lng;

        // @property alt: Number
        // Altitude in meters (optional)
        if (alt !== undefined) {
            this.alt = +alt;
        }
    };

    L.LatLng.prototype = {
        // @method equals(otherLatLng: LatLng, maxMargin?: Number): Boolean
        // Returns `true` if the given `LatLng` point is at the same position (within a small margin of error). The margin of error can be overriden by setting `maxMargin` to a small number.
        equals: function (obj, maxMargin) {
            if (!obj) { return false; }

            obj = L.latLng(obj);

            var margin = Math.max(
                Math.abs(this.lat - obj.lat),
                Math.abs(this.lng - obj.lng));

            return margin <= (maxMargin === undefined ? 1.0E-9 : maxMargin);
        },

        // @method toString(): String
        // Returns a string representation of the point (for debugging purposes).
        toString: function (precision) {
            return 'LatLng(' +
                L.Util.formatNum(this.lat, precision) + ', ' +
                L.Util.formatNum(this.lng, precision) + ')';
        },

        // @method distanceTo(otherLatLng: LatLng): Number
        // Returns the distance (in meters) to the given `LatLng` calculated using the [Haversine formula](http://en.wikipedia.org/wiki/Haversine_formula).
        distanceTo: function (other) {
            return L.CRS.Earth.distance(this, L.latLng(other));
        },

        // @method wrap(): LatLng
        // Returns a new `LatLng` object with the longitude wrapped so it's always between -180 and +180 degrees.
        wrap: function () {
            return L.CRS.Earth.wrapLatLng(this);
        },

        // @method toBounds(sizeInMeters: Number): LatLngBounds
        // Returns a new `LatLngBounds` object in which each boundary is `sizeInMeters` meters apart from the `LatLng`.
        toBounds: function (sizeInMeters) {
            var latAccuracy = 180 * sizeInMeters / 40075017,
                lngAccuracy = latAccuracy / Math.cos((Math.PI / 180) * this.lat);

            return L.latLngBounds(
                [this.lat - latAccuracy, this.lng - lngAccuracy],
                [this.lat + latAccuracy, this.lng + lngAccuracy]);
        },

        clone: function () {
            return new L.LatLng(this.lat, this.lng, this.alt);
        }
    };



// @factory L.latLng(latitude: Number, longitude: Number, altitude?: Number): LatLng
// Creates an object representing a geographical point with the given latitude and longitude (and optionally altitude).

// @alternative
// @factory L.latLng(coords: Array): LatLng
// Expects an array of the form `[Number, Number]` or `[Number, Number, Number]` instead.

// @alternative
// @factory L.latLng(coords: Object): LatLng
// Expects an plain object of the form `{lat: Number, lng: Number}` or `{lat: Number, lng: Number, alt: Number}` instead.

    L.latLng = function (a, b, c) {
        if (a instanceof L.LatLng) {
            return a;
        }
        if (L.Util.isArray(a) && typeof a[0] !== 'object') {
            if (a.length === 3) {
                return new L.LatLng(a[0], a[1], a[2]);
            }
            if (a.length === 2) {
                return new L.LatLng(a[0], a[1]);
            }
            return null;
        }
        if (a === undefined || a === null) {
            return a;
        }
        if (typeof a === 'object' && 'lat' in a) {
            return new L.LatLng(a.lat, 'lng' in a ? a.lng : a.lon, a.alt);
        }
        if (b === undefined) {
            return null;
        }
        return new L.LatLng(a, b, c);
    };



    /*
     * @class LatLngBounds
     * @aka L.LatLngBounds
     *
     * Represents a rectangular geographical area on a map.
     *
     * @example
     *
     * ```js
     * var southWest = L.latLng(40.712, -74.227),
     * northEast = L.latLng(40.774, -74.125),
     * bounds = L.latLngBounds(southWest, northEast);
     * ```
     *
     * All Leaflet methods that accept LatLngBounds objects also accept them in a simple Array form (unless noted otherwise), so the bounds example above can be passed like this:
     *
     * ```js
     * map.fitBounds([
     * 	[40.712, -74.227],
     * 	[40.774, -74.125]
     * ]);
     * ```
     */

    L.LatLngBounds = function (southWest, northEast) { // (LatLng, LatLng) or (LatLng[])
        if (!southWest) { return; }

        var latlngs = northEast ? [southWest, northEast] : southWest;

        for (var i = 0, len = latlngs.length; i < len; i++) {
            this.extend(latlngs[i]);
        }
    };

    L.LatLngBounds.prototype = {

        // @method extend(latlng: LatLng): this
        // Extend the bounds to contain the given point

        // @alternative
        // @method extend(otherBounds: LatLngBounds): this
        // Extend the bounds to contain the given bounds
        extend: function (obj) {
            var sw = this._southWest,
                ne = this._northEast,
                sw2, ne2;

            if (obj instanceof L.LatLng) {
                sw2 = obj;
                ne2 = obj;

            } else if (obj instanceof L.LatLngBounds) {
                sw2 = obj._southWest;
                ne2 = obj._northEast;

                if (!sw2 || !ne2) { return this; }

            } else {
                return obj ? this.extend(L.latLng(obj) || L.latLngBounds(obj)) : this;
            }

            if (!sw && !ne) {
                this._southWest = new L.LatLng(sw2.lat, sw2.lng);
                this._northEast = new L.LatLng(ne2.lat, ne2.lng);
            } else {
                sw.lat = Math.min(sw2.lat, sw.lat);
                sw.lng = Math.min(sw2.lng, sw.lng);
                ne.lat = Math.max(ne2.lat, ne.lat);
                ne.lng = Math.max(ne2.lng, ne.lng);
            }

            return this;
        },

        // @method pad(bufferRatio: Number): LatLngBounds
        // Returns bigger bounds created by extending the current bounds by a given percentage in each direction.
        pad: function (bufferRatio) {
            var sw = this._southWest,
                ne = this._northEast,
                heightBuffer = Math.abs(sw.lat - ne.lat) * bufferRatio,
                widthBuffer = Math.abs(sw.lng - ne.lng) * bufferRatio;

            return new L.LatLngBounds(
                new L.LatLng(sw.lat - heightBuffer, sw.lng - widthBuffer),
                new L.LatLng(ne.lat + heightBuffer, ne.lng + widthBuffer));
        },

        // @method getCenter(): LatLng
        // Returns the center point of the bounds.
        getCenter: function () {
            return new L.LatLng(
                (this._southWest.lat + this._northEast.lat) / 2,
                (this._southWest.lng + this._northEast.lng) / 2);
        },

        // @method getSouthWest(): LatLng
        // Returns the south-west point of the bounds.
        getSouthWest: function () {
            return this._southWest;
        },

        // @method getNorthEast(): LatLng
        // Returns the north-east point of the bounds.
        getNorthEast: function () {
            return this._northEast;
        },

        // @method getNorthWest(): LatLng
        // Returns the north-west point of the bounds.
        getNorthWest: function () {
            return new L.LatLng(this.getNorth(), this.getWest());
        },

        // @method getSouthEast(): LatLng
        // Returns the south-east point of the bounds.
        getSouthEast: function () {
            return new L.LatLng(this.getSouth(), this.getEast());
        },

        // @method getWest(): Number
        // Returns the west longitude of the bounds
        getWest: function () {
            return this._southWest.lng;
        },

        // @method getSouth(): Number
        // Returns the south latitude of the bounds
        getSouth: function () {
            return this._southWest.lat;
        },

        // @method getEast(): Number
        // Returns the east longitude of the bounds
        getEast: function () {
            return this._northEast.lng;
        },

        // @method getNorth(): Number
        // Returns the north latitude of the bounds
        getNorth: function () {
            return this._northEast.lat;
        },

        // @method contains(otherBounds: LatLngBounds): Boolean
        // Returns `true` if the rectangle contains the given one.

        // @alternative
        // @method contains (latlng: LatLng): Boolean
        // Returns `true` if the rectangle contains the given point.
        contains: function (obj) { // (LatLngBounds) or (LatLng) -> Boolean
            if (typeof obj[0] === 'number' || obj instanceof L.LatLng) {
                obj = L.latLng(obj);
            } else {
                obj = L.latLngBounds(obj);
            }

            var sw = this._southWest,
                ne = this._northEast,
                sw2, ne2;

            if (obj instanceof L.LatLngBounds) {
                sw2 = obj.getSouthWest();
                ne2 = obj.getNorthEast();
            } else {
                sw2 = ne2 = obj;
            }

            return (sw2.lat >= sw.lat) && (ne2.lat <= ne.lat) &&
                (sw2.lng >= sw.lng) && (ne2.lng <= ne.lng);
        },

        // @method intersects(otherBounds: LatLngBounds): Boolean
        // Returns `true` if the rectangle intersects the given bounds. Two bounds intersect if they have at least one point in common.
        intersects: function (bounds) {
            bounds = L.latLngBounds(bounds);

            var sw = this._southWest,
                ne = this._northEast,
                sw2 = bounds.getSouthWest(),
                ne2 = bounds.getNorthEast(),

                latIntersects = (ne2.lat >= sw.lat) && (sw2.lat <= ne.lat),
                lngIntersects = (ne2.lng >= sw.lng) && (sw2.lng <= ne.lng);

            return latIntersects && lngIntersects;
        },

        // @method overlaps(otherBounds: Bounds): Boolean
        // Returns `true` if the rectangle overlaps the given bounds. Two bounds overlap if their intersection is an area.
        overlaps: function (bounds) {
            bounds = L.latLngBounds(bounds);

            var sw = this._southWest,
                ne = this._northEast,
                sw2 = bounds.getSouthWest(),
                ne2 = bounds.getNorthEast(),

                latOverlaps = (ne2.lat > sw.lat) && (sw2.lat < ne.lat),
                lngOverlaps = (ne2.lng > sw.lng) && (sw2.lng < ne.lng);

            return latOverlaps && lngOverlaps;
        },

        // @method toBBoxString(): String
        // Returns a string with bounding box coordinates in a 'southwest_lng,southwest_lat,northeast_lng,northeast_lat' format. Useful for sending requests to web services that return geo data.
        toBBoxString: function () {
            return [this.getWest(), this.getSouth(), this.getEast(), this.getNorth()].join(',');
        },

        // @method equals(otherBounds: LatLngBounds): Boolean
        // Returns `true` if the rectangle is equivalent (within a small margin of error) to the given bounds.
        equals: function (bounds) {
            if (!bounds) { return false; }

            bounds = L.latLngBounds(bounds);

            return this._southWest.equals(bounds.getSouthWest()) &&
                this._northEast.equals(bounds.getNorthEast());
        },

        // @method isValid(): Boolean
        // Returns `true` if the bounds are properly initialized.
        isValid: function () {
            return !!(this._southWest && this._northEast);
        }
    };

// TODO International date line?

// @factory L.latLngBounds(southWest: LatLng, northEast: LatLng)
// Creates a `LatLngBounds` object by defining south-west and north-east corners of the rectangle.

// @alternative
// @factory L.latLngBounds(latlngs: LatLng[])
// Creates a `LatLngBounds` object defined by the geographical points it contains. Very useful for zooming the map to fit a particular set of locations with [`fitBounds`](#map-fitbounds).
    L.latLngBounds = function (a, b) {
        if (a instanceof L.LatLngBounds) {
            return a;
        }
        return new L.LatLngBounds(a, b);
    };



    /*
     * @namespace Projection
     * @section
     * Leaflet comes with a set of already defined Projections out of the box:
     *
     * @projection L.Projection.LonLat
     *
     * Equirectangular, or Plate Carree projection — the most simple projection,
     * mostly used by GIS enthusiasts. Directly maps `x` as longitude, and `y` as
     * latitude. Also suitable for flat worlds, e.g. game maps. Used by the
     * `EPSG:3395` and `Simple` CRS.
     */

    L.Projection = {};

    L.Projection.LonLat = {
        project: function (latlng) {
            return new L.Point(latlng.lng, latlng.lat);
        },

        unproject: function (point) {
            return new L.LatLng(point.y, point.x);
        },

        bounds: L.bounds([-180, -90], [180, 90])
    };



    /*
     * @namespace Projection
     * @projection L.Projection.SphericalMercator
     *
     * Spherical Mercator projection — the most common projection for online maps,
     * used by almost all free and commercial tile providers. Assumes that Earth is
     * a sphere. Used by the `EPSG:3857` CRS.
     */

    L.Projection.SphericalMercator = {

        R: 6378137,
        MAX_LATITUDE: 85.0511287798,

        project: function (latlng) {
            var d = Math.PI / 180,
                max = this.MAX_LATITUDE,
                lat = Math.max(Math.min(max, latlng.lat), -max),
                sin = Math.sin(lat * d);

            return new L.Point(
                this.R * latlng.lng * d,
                this.R * Math.log((1 + sin) / (1 - sin)) / 2);
        },

        unproject: function (point) {
            var d = 180 / Math.PI;

            return new L.LatLng(
                (2 * Math.atan(Math.exp(point.y / this.R)) - (Math.PI / 2)) * d,
                point.x * d / this.R);
        },

        bounds: (function () {
            var d = 6378137 * Math.PI;
            return L.bounds([-d, -d], [d, d]);
        })()
    };



    /*
     * @class CRS
     * @aka L.CRS
     * Abstract class that defines coordinate reference systems for projecting
     * geographical points into pixel (screen) coordinates and back (and to
     * coordinates in other units for WMS services). See
     * [spatial reference system](http://en.wikipedia.org/wiki/Coordinate_reference_system).
     *
     * Leaflet defines the most usual CRSs by default. If you want to use a
     * CRS not defined by default, take a look at the
     * [Proj4Leaflet](https://github.com/kartena/Proj4Leaflet) plugin.
     */

    L.CRS = {
        // @method latLngToPoint(latlng: LatLng, zoom: Number): Point
        // Projects geographical coordinates into pixel coordinates for a given zoom.
        latLngToPoint: function (latlng, zoom) {
            var projectedPoint = this.projection.project(latlng),
                scale = this.scale(zoom);

            return this.transformation._transform(projectedPoint, scale);
        },

        // @method pointToLatLng(point: Point, zoom: Number): LatLng
        // The inverse of `latLngToPoint`. Projects pixel coordinates on a given
        // zoom into geographical coordinates.
        pointToLatLng: function (point, zoom) {
            var scale = this.scale(zoom),
                untransformedPoint = this.transformation.untransform(point, scale);

            return this.projection.unproject(untransformedPoint);
        },

        // @method project(latlng: LatLng): Point
        // Projects geographical coordinates into coordinates in units accepted for
        // this CRS (e.g. meters for EPSG:3857, for passing it to WMS services).
        project: function (latlng) {
            return this.projection.project(latlng);
        },

        // @method unproject(point: Point): LatLng
        // Given a projected coordinate returns the corresponding LatLng.
        // The inverse of `project`.
        unproject: function (point) {
            return this.projection.unproject(point);
        },

        // @method scale(zoom: Number): Number
        // Returns the scale used when transforming projected coordinates into
        // pixel coordinates for a particular zoom. For example, it returns
        // `256 * 2^zoom` for Mercator-based CRS.
        scale: function (zoom) {
            return 256 * Math.pow(2, zoom);
        },

        // @method zoom(scale: Number): Number
        // Inverse of `scale()`, returns the zoom level corresponding to a scale
        // factor of `scale`.
        zoom: function (scale) {
            return Math.log(scale / 256) / Math.LN2;
        },

        // @method getProjectedBounds(zoom): Bounds
        // Returns the projection's bounds scaled and transformed for the provided `zoom`.
        getProjectedBounds: function (zoom) {
            if (this.infinite) { return null; }

            var b = this.projection.bounds,
                s = this.scale(zoom),
                min = this.transformation.transform(b.min, s),
                max = this.transformation.transform(b.max, s);

            return L.bounds(min, max);
        },

        // @property code: String
        // Standard code name of the CRS passed into WMS services (e.g. `'EPSG:3857'`)
        //
        // @property wrapLng: Number[]
        // An array of two numbers defining whether the longitude coordinate axis
        // wraps around a given range and how. Defaults to `[-180, 180]` in most
        // geographical CRSs.
        //
        // @property wrapLat: Number[]
        // Like `wrapLng`, but for the latitude axis.

        // wrapLng: [min, max],
        // wrapLat: [min, max],

        // @property infinite: Boolean = false
        // If true, the coordinate space will be unbounded (infinite in both axes)
        infinite: false,

        // @method wrapLatLng(latlng: LatLng): LatLng
        // Returns a `LatLng` where lat and lng has been wrapped according to the
        // CRS's `wrapLat` and `wrapLng` properties, if they are outside the CRS's bounds.
        wrapLatLng: function (latlng) {
            var lng = this.wrapLng ? L.Util.wrapNum(latlng.lng, this.wrapLng, true) : latlng.lng,
                lat = this.wrapLat ? L.Util.wrapNum(latlng.lat, this.wrapLat, true) : latlng.lat,
                alt = latlng.alt;

            return L.latLng(lat, lng, alt);
        }
    };



    /*
     * @namespace CRS
     * @crs L.CRS.Simple
     *
     * A simple CRS that maps longitude and latitude into `x` and `y` directly.
     * May be used for maps of flat surfaces (e.g. game maps). Note that the `y`
     * axis should still be inverted (going from bottom to top).
     */

    L.CRS.Simple = L.extend({}, L.CRS, {
        projection: L.Projection.LonLat,
        transformation: new L.Transformation(1, 0, -1, 0),

        scale: function (zoom) {
            return Math.pow(2, zoom);
        },

        zoom: function (scale) {
            return Math.log(scale) / Math.LN2;
        },

        distance: function (latlng1, latlng2) {
            var dx = latlng2.lng - latlng1.lng,
                dy = latlng2.lat - latlng1.lat;

            return Math.sqrt(dx * dx + dy * dy);
        },

        infinite: true
    });



    /*
     * @namespace CRS
     * @crs L.CRS.Earth
     *
     * Serves as the base for CRS that are global such that they cover the earth.
     * Can only be used as the base for other CRS and cannot be used directly,
     * since it does not have a `code`, `projection` or `transformation`.
     */

    L.CRS.Earth = L.extend({}, L.CRS, {
        wrapLng: [-180, 180],

        // Mean Earth Radius, as recommended for use by
        // the International Union of Geodesy and Geophysics,
        // see http://rosettacode.org/wiki/Haversine_formula
        R: 6371000,

        // distance between two geographical points using spherical law of cosines approximation
        distance: function (latlng1, latlng2) {
            var rad = Math.PI / 180,
                lat1 = latlng1.lat * rad,
                lat2 = latlng2.lat * rad,
                a = Math.sin(lat1) * Math.sin(lat2) +
                    Math.cos(lat1) * Math.cos(lat2) * Math.cos((latlng2.lng - latlng1.lng) * rad);

            return this.R * Math.acos(Math.min(a, 1));
        }
    });



    /*
     * @namespace CRS
     * @crs L.CRS.EPSG3857
     *
     * The most common CRS for online maps, used by almost all free and commercial
     * tile providers. Uses Spherical Mercator projection. Set in by default in
     * Map's `crs` option.
     */

    L.CRS.EPSG3857 = L.extend({}, L.CRS.Earth, {
        code: 'EPSG:3857',
        projection: L.Projection.SphericalMercator,

        transformation: (function () {
            var scale = 0.5 / (Math.PI * L.Projection.SphericalMercator.R);
            return new L.Transformation(scale, 0.5, -scale, 0.5);
        }())
    });

    L.CRS.EPSG900913 = L.extend({}, L.CRS.EPSG3857, {
        code: 'EPSG:900913'
    });



    /*
     * @namespace CRS
     * @crs L.CRS.EPSG4326
     *
     * A common CRS among GIS enthusiasts. Uses simple Equirectangular projection.
     */

    L.CRS.EPSG4326 = L.extend({}, L.CRS.Earth, {
        code: 'EPSG:4326',
        projection: L.Projection.LonLat,
        transformation: new L.Transformation(1 / 180, 1, -1 / 180, 0.5)
    });



    /*
     * @class Map
     * @aka L.Map
     * @inherits Evented
     *
     * The central class of the API — it is used to create a map on a page and manipulate it.
     *
     * @example
     *
     * ```js
     * // initialize the map on the "map" div with a given center and zoom
     * var map = L.map('map', {
     * 	center: [51.505, -0.09],
     * 	zoom: 13
     * });
     * ```
     *
     */

    L.Map = L.Evented.extend({

        options: {
            // @section Map State Options
            // @option crs: CRS = L.CRS.EPSG3857
            // The [Coordinate Reference System](#crs) to use. Don't change this if you're not
            // sure what it means.
            crs: L.CRS.EPSG3857,

            // @option center: LatLng = undefined
            // Initial geographic center of the map
            center: undefined,

            // @option zoom: Number = undefined
            // Initial map zoom level
            zoom: undefined,

            // @option minZoom: Number = undefined
            // Minimum zoom level of the map. Overrides any `minZoom` option set on map layers.
            minZoom: undefined,

            // @option maxZoom: Number = undefined
            // Maximum zoom level of the map. Overrides any `maxZoom` option set on map layers.
            maxZoom: undefined,

            // @option layers: Layer[] = []
            // Array of layers that will be added to the map initially
            layers: [],

            // @option maxBounds: LatLngBounds = null
            // When this option is set, the map restricts the view to the given
            // geographical bounds, bouncing the user back when he tries to pan
            // outside the view. To set the restriction dynamically, use
            // [`setMaxBounds`](#map-setmaxbounds) method.
            maxBounds: undefined,

            // @option renderer: Renderer = *
            // The default method for drawing vector layers on the map. `L.SVG`
            // or `L.Canvas` by default depending on browser support.
            renderer: undefined,


            // @section Animation Options
            // @option fadeAnimation: Boolean = true
            // Whether the tile fade animation is enabled. By default it's enabled
            // in all browsers that support CSS3 Transitions except Android.
            fadeAnimation: true,

            // @option markerZoomAnimation: Boolean = true
            // Whether markers animate their zoom with the zoom animation, if disabled
            // they will disappear for the length of the animation. By default it's
            // enabled in all browsers that support CSS3 Transitions except Android.
            markerZoomAnimation: true,

            // @option transform3DLimit: Number = 2^23
            // Defines the maximum size of a CSS translation transform. The default
            // value should not be changed unless a web browser positions layers in
            // the wrong place after doing a large `panBy`.
            transform3DLimit: 8388608, // Precision limit of a 32-bit float

            // @section Interaction Options
            // @option zoomSnap: Number = 1
            // Forces the map's zoom level to always be a multiple of this, particularly
            // right after a [`fitBounds()`](#map-fitbounds) or a pinch-zoom.
            // By default, the zoom level snaps to the nearest integer; lower values
            // (e.g. `0.5` or `0.1`) allow for greater granularity. A value of `0`
            // means the zoom level will not be snapped after `fitBounds` or a pinch-zoom.
            zoomSnap: 1,

            // @option zoomDelta: Number = 1
            // Controls how much the map's zoom level will change after a
            // [`zoomIn()`](#map-zoomin), [`zoomOut()`](#map-zoomout), pressing `+`
            // or `-` on the keyboard, or using the [zoom controls](#control-zoom).
            // Values smaller than `1` (e.g. `0.5`) allow for greater granularity.
            zoomDelta: 1,

            // @option trackResize: Boolean = true
            // Whether the map automatically handles browser window resize to update itself.
            trackResize: true
        },

        initialize: function (id, options) { // (HTMLElement or String, Object)
            options = L.setOptions(this, options);

            this._initContainer(id);
            this._initLayout();

            // hack for https://github.com/Leaflet/Leaflet/issues/1980
            this._onResize = L.bind(this._onResize, this);

            this._initEvents();

            if (options.maxBounds) {
                this.setMaxBounds(options.maxBounds);
            }

            if (options.zoom !== undefined) {
                this._zoom = this._limitZoom(options.zoom);
            }

            if (options.center && options.zoom !== undefined) {
                this.setView(L.latLng(options.center), options.zoom, {reset: true});
            }

            this._handlers = [];
            this._layers = {};
            this._zoomBoundLayers = {};
            this._sizeChanged = true;

            this.callInitHooks();

            this._addLayers(this.options.layers);
        },


        // @section Methods for modifying map state

        // @method setView(center: LatLnt, zoom: Number, options?: Zoom/Pan options): this
        // Sets the view of the map (geographical center and zoom) with the given
        // animation options.
        setView: function (center, zoom) {
            // replaced by animation-powered implementation in Map.PanAnimation.js
            zoom = zoom === undefined ? this.getZoom() : zoom;
            this._resetView(L.latLng(center), zoom);
            return this;
        },

        // @method setZoom(zoom: Number, options: Zoom/Pan options): this
        // Sets the zoom of the map.
        setZoom: function (zoom, options) {
            if (!this._loaded) {
                this._zoom = zoom;
                return this;
            }
            return this.setView(this.getCenter(), zoom, {zoom: options});
        },

        // @method zoomIn(delta?: Number, options?: Zoom options): this
        // Increases the zoom of the map by `delta` ([`zoomDelta`](#map-zoomdelta) by default).
        zoomIn: function (delta, options) {
            delta = delta || (L.Browser.any3d ? this.options.zoomDelta : 1);
            return this.setZoom(this._zoom + delta, options);
        },

        // @method zoomOut(delta?: Number, options?: Zoom options): this
        // Decreases the zoom of the map by `delta` ([`zoomDelta`](#map-zoomdelta) by default).
        zoomOut: function (delta, options) {
            delta = delta || (L.Browser.any3d ? this.options.zoomDelta : 1);
            return this.setZoom(this._zoom - delta, options);
        },

        // @method setZoomAround(latlng: LatLng, zoom: Number, options: Zoom options): this
        // Zooms the map while keeping a specified geographical point on the map
        // stationary (e.g. used internally for scroll zoom and double-click zoom).
        // @alternative
        // @method setZoomAround(offset: Point, zoom: Number, options: Zoom options): this
        // Zooms the map while keeping a specified pixel on the map (relative to the top-left corner) stationary.
        setZoomAround: function (latlng, zoom, options) {
            var scale = this.getZoomScale(zoom),
                viewHalf = this.getSize().divideBy(2),
                containerPoint = latlng instanceof L.Point ? latlng : this.latLngToContainerPoint(latlng),

                centerOffset = containerPoint.subtract(viewHalf).multiplyBy(1 - 1 / scale),
                newCenter = this.containerPointToLatLng(viewHalf.add(centerOffset));

            return this.setView(newCenter, zoom, {zoom: options});
        },

        _getBoundsCenterZoom: function (bounds, options) {

            options = options || {};
            bounds = bounds.getBounds ? bounds.getBounds() : L.latLngBounds(bounds);

            var paddingTL = L.point(options.paddingTopLeft || options.padding || [0, 0]),
                paddingBR = L.point(options.paddingBottomRight || options.padding || [0, 0]),

                zoom = this.getBoundsZoom(bounds, false, paddingTL.add(paddingBR));

            zoom = (typeof options.maxZoom === 'number') ? Math.min(options.maxZoom, zoom) : zoom;

            var paddingOffset = paddingBR.subtract(paddingTL).divideBy(2),

                swPoint = this.project(bounds.getSouthWest(), zoom),
                nePoint = this.project(bounds.getNorthEast(), zoom),
                center = this.unproject(swPoint.add(nePoint).divideBy(2).add(paddingOffset), zoom);

            return {
                center: center,
                zoom: zoom
            };
        },

        // @method fitBounds(bounds: LatLngBounds, options: fitBounds options): this
        // Sets a map view that contains the given geographical bounds with the
        // maximum zoom level possible.
        fitBounds: function (bounds, options) {

            bounds = L.latLngBounds(bounds);

            if (!bounds.isValid()) {
                throw new Error('Bounds are not valid.');
            }

            var target = this._getBoundsCenterZoom(bounds, options);
            return this.setView(target.center, target.zoom, options);
        },

        // @method fitWorld(options?: fitBounds options): this
        // Sets a map view that mostly contains the whole world with the maximum
        // zoom level possible.
        fitWorld: function (options) {
            return this.fitBounds([[-90, -180], [90, 180]], options);
        },

        // @method panTo(latlng: LatLng, options?: Pan options): this
        // Pans the map to a given center.
        panTo: function (center, options) { // (LatLng)
            return this.setView(center, this._zoom, {pan: options});
        },

        // @method panBy(offset: Point): this
        // Pans the map by a given number of pixels (animated).
        panBy: function (offset) { // (Point)
            // replaced with animated panBy in Map.PanAnimation.js
            this.fire('movestart');

            this._rawPanBy(L.point(offset));

            this.fire('move');
            return this.fire('moveend');
        },

        // @method setMaxBounds(bounds: Bounds): this
        // Restricts the map view to the given bounds (see the [maxBounds](#map-maxbounds) option).
        setMaxBounds: function (bounds) {
            bounds = L.latLngBounds(bounds);

            if (!bounds) {
                return this.off('moveend', this._panInsideMaxBounds);
            } else if (this.options.maxBounds) {
                this.off('moveend', this._panInsideMaxBounds);
            }

            this.options.maxBounds = bounds;

            if (this._loaded) {
                this._panInsideMaxBounds();
            }

            return this.on('moveend', this._panInsideMaxBounds);
        },

        // @method setMinZoom(zoom: Number): this
        // Sets the lower limit for the available zoom levels (see the [minZoom](#map-minzoom) option).
        setMinZoom: function (zoom) {
            this.options.minZoom = zoom;

            if (this._loaded && this.getZoom() < this.options.minZoom) {
                return this.setZoom(zoom);
            }

            return this;
        },

        // @method setMaxZoom(zoom: Number): this
        // Sets the upper limit for the available zoom levels (see the [maxZoom](#map-maxzoom) option).
        setMaxZoom: function (zoom) {
            this.options.maxZoom = zoom;

            if (this._loaded && (this.getZoom() > this.options.maxZoom)) {
                return this.setZoom(zoom);
            }

            return this;
        },

        // @method panInsideBounds(bounds: LatLngBounds, options?: Pan options): this
        // Pans the map to the closest view that would lie inside the given bounds (if it's not already), controlling the animation using the options specific, if any.
        panInsideBounds: function (bounds, options) {
            this._enforcingBounds = true;
            var center = this.getCenter(),
                newCenter = this._limitCenter(center, this._zoom, L.latLngBounds(bounds));

            if (!center.equals(newCenter)) {
                this.panTo(newCenter, options);
            }

            this._enforcingBounds = false;
            return this;
        },

        // @method invalidateSize(options: Zoom/Pan options): this
        // Checks if the map container size changed and updates the map if so —
        // call it after you've changed the map size dynamically, also animating
        // pan by default. If `options.pan` is `false`, panning will not occur.
        // If `options.debounceMoveend` is `true`, it will delay `moveend` event so
        // that it doesn't happen often even if the method is called many
        // times in a row.

        // @alternative
        // @method invalidateSize(animate: Boolean): this
        // Checks if the map container size changed and updates the map if so —
        // call it after you've changed the map size dynamically, also animating
        // pan by default.
        invalidateSize: function (options) {
            if (!this._loaded) { return this; }

            options = L.extend({
                animate: false,
                pan: true
            }, options === true ? {animate: true} : options);

            var oldSize = this.getSize();
            this._sizeChanged = true;
            this._lastCenter = null;

            var newSize = this.getSize(),
                oldCenter = oldSize.divideBy(2).round(),
                newCenter = newSize.divideBy(2).round(),
                offset = oldCenter.subtract(newCenter);

            if (!offset.x && !offset.y) { return this; }

            if (options.animate && options.pan) {
                this.panBy(offset);

            } else {
                if (options.pan) {
                    this._rawPanBy(offset);
                }

                this.fire('move');

                if (options.debounceMoveend) {
                    clearTimeout(this._sizeTimer);
                    this._sizeTimer = setTimeout(L.bind(this.fire, this, 'moveend'), 200);
                } else {
                    this.fire('moveend');
                }
            }

            // @section Map state change events
            // @event resize: Event
            // Fired when the map is resized.
            return this.fire('resize', {
                oldSize: oldSize,
                newSize: newSize
            });
        },

        // @section Methods for modifying map state
        // @method stop(): this
        // Stops the currently running `panTo` or `flyTo` animation, if any.
        stop: function () {
            this.setZoom(this._limitZoom(this._zoom));
            if (!this.options.zoomSnap) {
                this.fire('viewreset');
            }
            return this._stop();
        },


        // TODO handler.addTo
        // TODO Appropiate docs section?
        // @section Other Methods
        // @method addHandler(name: String, HandlerClass: Function): this
        // Adds a new `Handler` to the map, given its name and constructor function.
        addHandler: function (name, HandlerClass) {
            if (!HandlerClass) { return this; }

            var handler = this[name] = new HandlerClass(this);

            this._handlers.push(handler);

            if (this.options[name]) {
                handler.enable();
            }

            return this;
        },

        // @method remove(): this
        // Destroys the map and clears all related event listeners.
        remove: function () {

            this._initEvents(true);

            try {
                // throws error in IE6-8
                delete this._container._leaflet;
            } catch (e) {
                this._container._leaflet = undefined;
            }

            L.DomUtil.remove(this._mapPane);

            if (this._clearControlPos) {
                this._clearControlPos();
            }

            this._clearHandlers();

            if (this._loaded) {
                // @section Map state change events
                // @event unload: Event
                // Fired when the map is destroyed with [remove](#map-remove) method.
                this.fire('unload');
            }

            for (var i in this._layers) {
                this._layers[i].remove();
            }

            return this;
        },

        // @section Other Methods
        // @method createPane(name: String, container?: HTMLElement): HTMLElement
        // Creates a new map pane with the given name if it doesn't exist already,
        // then returns it. The pane is created as a children of `container`, or
        // as a children of the main map pane if not set.
        createPane: function (name, container) {
            var className = 'leaflet-pane' + (name ? ' leaflet-' + name.replace('Pane', '') + '-pane' : ''),
                pane = L.DomUtil.create('div', className, container || this._mapPane);

            if (name) {
                this._panes[name] = pane;
            }
            return pane;
        },

        // @section Methods for Getting Map State

        // @method getCenter(): LatLng
        // Returns the geographical center of the map view
        getCenter: function () {
            this._checkIfLoaded();

            if (this._lastCenter && !this._moved()) {
                return this._lastCenter;
            }
            return this.layerPointToLatLng(this._getCenterLayerPoint());
        },

        // @method getZoom(): Number
        // Returns the current zoom level of the map view
        getZoom: function () {
            return this._zoom;
        },

        // @method getBounds(): LatLngBounds
        // Returns the geographical bounds visible in the current map view
        getBounds: function () {
            var bounds = this.getPixelBounds(),
                sw = this.unproject(bounds.getBottomLeft()),
                ne = this.unproject(bounds.getTopRight());

            return new L.LatLngBounds(sw, ne);
        },

        // @method getMinZoom(): Number
        // Returns the minimum zoom level of the map (if set in the `minZoom` option of the map or of any layers), or `0` by default.
        getMinZoom: function () {
            return this.options.minZoom === undefined ? this._layersMinZoom || 0 : this.options.minZoom;
        },

        // @method getMaxZoom(): Number
        // Returns the maximum zoom level of the map (if set in the `maxZoom` option of the map or of any layers).
        getMaxZoom: function () {
            return this.options.maxZoom === undefined ?
                (this._layersMaxZoom === undefined ? Infinity : this._layersMaxZoom) :
                this.options.maxZoom;
        },

        // @method getBoundsZoom(bounds: LatLngBounds, inside?: Boolean): Number
        // Returns the maximum zoom level on which the given bounds fit to the map
        // view in its entirety. If `inside` (optional) is set to `true`, the method
        // instead returns the minimum zoom level on which the map view fits into
        // the given bounds in its entirety.
        getBoundsZoom: function (bounds, inside, padding) { // (LatLngBounds[, Boolean, Point]) -> Number
            bounds = L.latLngBounds(bounds);
            padding = L.point(padding || [0, 0]);

            var zoom = this.getZoom() || 0,
                min = this.getMinZoom(),
                max = this.getMaxZoom(),
                nw = bounds.getNorthWest(),
                se = bounds.getSouthEast(),
                size = this.getSize(),
                boundsSize = this.project(se, zoom).subtract(this.project(nw, zoom)).add(padding),
                snap = L.Browser.any3d ? this.options.zoomSnap : 1;

            var scale = Math.min(size.x / boundsSize.x, size.y / boundsSize.y);
            zoom = this.getScaleZoom(scale, zoom);

            if (snap) {
                zoom = Math.round(zoom / (snap / 100)) * (snap / 100); // don't jump if within 1% of a snap level
                zoom = inside ? Math.ceil(zoom / snap) * snap : Math.floor(zoom / snap) * snap;
            }

            return Math.max(min, Math.min(max, zoom));
        },

        // @method getSize(): Point
        // Returns the current size of the map container (in pixels).
        getSize: function () {
            if (!this._size || this._sizeChanged) {
                this._size = new L.Point(
                    this._container.clientWidth,
                    this._container.clientHeight);

                this._sizeChanged = false;
            }
            return this._size.clone();
        },

        // @method getPixelBounds(): Bounds
        // Returns the bounds of the current map view in projected pixel
        // coordinates (sometimes useful in layer and overlay implementations).
        getPixelBounds: function (center, zoom) {
            var topLeftPoint = this._getTopLeftPoint(center, zoom);
            return new L.Bounds(topLeftPoint, topLeftPoint.add(this.getSize()));
        },

        // TODO: Check semantics - isn't the pixel origin the 0,0 coord relative to
        // the map pane? "left point of the map layer" can be confusing, specially
        // since there can be negative offsets.
        // @method getPixelOrigin(): Point
        // Returns the projected pixel coordinates of the top left point of
        // the map layer (useful in custom layer and overlay implementations).
        getPixelOrigin: function () {
            this._checkIfLoaded();
            return this._pixelOrigin;
        },

        // @method getPixelWorldBounds(zoom?: Number): Bounds
        // Returns the world's bounds in pixel coordinates for zoom level `zoom`.
        // If `zoom` is omitted, the map's current zoom level is used.
        getPixelWorldBounds: function (zoom) {
            return this.options.crs.getProjectedBounds(zoom === undefined ? this.getZoom() : zoom);
        },

        // @section Other Methods

        // @method getPane(pane: String|HTMLElement): HTMLElement
        // Returns a map pane, given its name or its HTML element (its identity).
        getPane: function (pane) {
            return typeof pane === 'string' ? this._panes[pane] : pane;
        },

        // @method getPanes(): Object
        // Returns a plain object containing the names of all panes as keys and
        // the panes as values.
        getPanes: function () {
            return this._panes;
        },

        // @method getContainer: HTMLElement
        // Returns the HTML element that contains the map.
        getContainer: function () {
            return this._container;
        },


        // @section Conversion Methods

        // @method getZoomScale(toZoom: Number, fromZoom: Number): Number
        // Returns the scale factor to be applied to a map transition from zoom level
        // `fromZoom` to `toZoom`. Used internally to help with zoom animations.
        getZoomScale: function (toZoom, fromZoom) {
            // TODO replace with universal implementation after refactoring projections
            var crs = this.options.crs;
            fromZoom = fromZoom === undefined ? this._zoom : fromZoom;
            return crs.scale(toZoom) / crs.scale(fromZoom);
        },

        // @method getScaleZoom(scale: Number, fromZoom: Number): Number
        // Returns the zoom level that the map would end up at, if it is at `fromZoom`
        // level and everything is scaled by a factor of `scale`. Inverse of
        // [`getZoomScale`](#map-getZoomScale).
        getScaleZoom: function (scale, fromZoom) {
            var crs = this.options.crs;
            fromZoom = fromZoom === undefined ? this._zoom : fromZoom;
            return crs.zoom(scale * crs.scale(fromZoom));
        },

        // @method project(latlng: LatLng, zoom: Number): Point
        // Projects a geographical coordinate `LatLng` according to the projection
        // of the map's CRS, then scales it according to `zoom` and the CRS's
        // `Transformation`. The result is pixel coordinate relative to
        // the CRS origin.
        project: function (latlng, zoom) {
            zoom = zoom === undefined ? this._zoom : zoom;
            return this.options.crs.latLngToPoint(L.latLng(latlng), zoom);
        },

        // @method unproject(point: Point, zoom: Number): LatLng
        // Inverse of [`project`](#map-project).
        unproject: function (point, zoom) {
            zoom = zoom === undefined ? this._zoom : zoom;
            return this.options.crs.pointToLatLng(L.point(point), zoom);
        },

        // @method layerPointToLatLng(point: Point): LatLng
        // Given a pixel coordinate relative to the [origin pixel](#map-getpixelorigin),
        // returns the corresponding geographical coordinate (for the current zoom level).
        layerPointToLatLng: function (point) {
            var projectedPoint = L.point(point).add(this.getPixelOrigin());
            return this.unproject(projectedPoint);
        },

        // @method latLngToLayerPoint(latlng: LatLng): Point
        // Given a geographical coordinate, returns the corresponding pixel coordinate
        // relative to the [origin pixel](#map-getpixelorigin).
        latLngToLayerPoint: function (latlng) {
            var projectedPoint = this.project(L.latLng(latlng))._round();
            return projectedPoint._subtract(this.getPixelOrigin());
        },

        // @method wrapLatLng(latlng: LatLng): LatLng
        // Returns a `LatLng` where `lat` and `lng` has been wrapped according to the
        // map's CRS's `wrapLat` and `wrapLng` properties, if they are outside the
        // CRS's bounds.
        // By default this means longitude is wrapped around the dateline so its
        // value is between -180 and +180 degrees.
        wrapLatLng: function (latlng) {
            return this.options.crs.wrapLatLng(L.latLng(latlng));
        },

        // @method distance(latlng1: LatLng, latlng2: LatLng): Number
        // Returns the distance between two geographical coordinates according to
        // the map's CRS. By default this measures distance in meters.
        distance: function (latlng1, latlng2) {
            return this.options.crs.distance(L.latLng(latlng1), L.latLng(latlng2));
        },

        // @method containerPointToLayerPoint(point: Point): Point
        // Given a pixel coordinate relative to the map container, returns the corresponding
        // pixel coordinate relative to the [origin pixel](#map-getpixelorigin).
        containerPointToLayerPoint: function (point) { // (Point)
            return L.point(point).subtract(this._getMapPanePos());
        },

        // @method layerPointToContainerPoint(point: Point): Point
        // Given a pixel coordinate relative to the [origin pixel](#map-getpixelorigin),
        // returns the corresponding pixel coordinate relative to the map container.
        layerPointToContainerPoint: function (point) { // (Point)
            return L.point(point).add(this._getMapPanePos());
        },

        // @method containerPointToLatLng(point: Point): Point
        // Given a pixel coordinate relative to the map container, returns
        // the corresponding geographical coordinate (for the current zoom level).
        containerPointToLatLng: function (point) {
            var layerPoint = this.containerPointToLayerPoint(L.point(point));
            return this.layerPointToLatLng(layerPoint);
        },

        // @method latLngToContainerPoint(latlng: LatLng): Point
        // Given a geographical coordinate, returns the corresponding pixel coordinate
        // relative to the map container.
        latLngToContainerPoint: function (latlng) {
            return this.layerPointToContainerPoint(this.latLngToLayerPoint(L.latLng(latlng)));
        },

        // @method mouseEventToContainerPoint(ev: MouseEvent): Point
        // Given a MouseEvent object, returns the pixel coordinate relative to the
        // map container where the event took place.
        mouseEventToContainerPoint: function (e) {
            return L.DomEvent.getMousePosition(e, this._container);
        },

        // @method mouseEventToLayerPoint(ev: MouseEvent): Point
        // Given a MouseEvent object, returns the pixel coordinate relative to
        // the [origin pixel](#map-getpixelorigin) where the event took place.
        mouseEventToLayerPoint: function (e) {
            return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e));
        },

        // @method mouseEventToLatLng(ev: MouseEvent): LatLng
        // Given a MouseEvent object, returns geographical coordinate where the
        // event took place.
        mouseEventToLatLng: function (e) { // (MouseEvent)
            return this.layerPointToLatLng(this.mouseEventToLayerPoint(e));
        },


        // map initialization methods

        _initContainer: function (id) {
            var container = this._container = L.DomUtil.get(id);

            if (!container) {
                throw new Error('Map container not found.');
            } else if (container._leaflet) {
                throw new Error('Map container is already initialized.');
            }

            L.DomEvent.addListener(container, 'scroll', this._onScroll, this);
            container._leaflet = true;
        },

        _initLayout: function () {
            var container = this._container;

            this._fadeAnimated = this.options.fadeAnimation && L.Browser.any3d;

            L.DomUtil.addClass(container, 'leaflet-container' +
                (L.Browser.touch ? ' leaflet-touch' : '') +
                (L.Browser.retina ? ' leaflet-retina' : '') +
                (L.Browser.ielt9 ? ' leaflet-oldie' : '') +
                (L.Browser.safari ? ' leaflet-safari' : '') +
                (this._fadeAnimated ? ' leaflet-fade-anim' : ''));

            var position = L.DomUtil.getStyle(container, 'position');

            if (position !== 'absolute' && position !== 'relative' && position !== 'fixed') {
                container.style.position = 'relative';
            }

            this._initPanes();

            if (this._initControlPos) {
                this._initControlPos();
            }
        },

        _initPanes: function () {
            var panes = this._panes = {};
            this._paneRenderers = {};

            // @section
            //
            // Panes are DOM elements used to control the ordering of layers on the map. You
            // can access panes with [`map.getPane`](#map-getpane) or
            // [`map.getPanes`](#map-getpanes) methods. New panes can be created with the
            // [`map.createPane`](#map-createpane) method.
            //
            // Every map has the following default panes that differ only in zIndex.
            //
            // @pane mapPane: HTMLElement = 'auto'
            // Pane that contains all other map panes

            this._mapPane = this.createPane('mapPane', this._container);
            L.DomUtil.setPosition(this._mapPane, new L.Point(0, 0));

            // @pane tilePane: HTMLElement = 2
            // Pane for tile layers
            this.createPane('tilePane');
            // @pane overlayPane: HTMLElement = 4
            // Pane for overlays like polylines and polygons
            this.createPane('shadowPane');
            // @pane shadowPane: HTMLElement = 5
            // Pane for overlay shadows (e.g. marker shadows)
            this.createPane('overlayPane');
            // @pane markerPane: HTMLElement = 6
            // Pane for marker icons
            this.createPane('markerPane');
            // @pane popupPane: HTMLElement = 7
            // Pane for popups.
            this.createPane('popupPane');

            if (!this.options.markerZoomAnimation) {
                L.DomUtil.addClass(panes.markerPane, 'leaflet-zoom-hide');
                L.DomUtil.addClass(panes.shadowPane, 'leaflet-zoom-hide');
            }
        },


        // private methods that modify map state

        // @section Map state change events
        _resetView: function (center, zoom) {
            L.DomUtil.setPosition(this._mapPane, new L.Point(0, 0));

            var loading = !this._loaded;
            this._loaded = true;
            zoom = this._limitZoom(zoom);

            this.fire('viewprereset');

            var zoomChanged = this._zoom !== zoom;
            this
                ._moveStart(zoomChanged)
                ._move(center, zoom)
                ._moveEnd(zoomChanged);

            // @event viewreset: Event
            // Fired when the map needs to redraw its content (this usually happens
            // on map zoom or load). Very useful for creating custom overlays.
            this.fire('viewreset');

            // @event load: Event
            // Fired when the map is initialized (when its center and zoom are set
            // for the first time).
            if (loading) {
                this.fire('load');
            }
        },

        _moveStart: function (zoomChanged) {
            // @event zoomstart: Event
            // Fired when the map zoom is about to change (e.g. before zoom animation).
            // @event movestart: Event
            // Fired when the view of the map starts changing (e.g. user starts dragging the map).
            if (zoomChanged) {
                this.fire('zoomstart');
            }
            return this.fire('movestart');
        },

        _move: function (center, zoom, data) {
            if (zoom === undefined) {
                zoom = this._zoom;
            }
            var zoomChanged = this._zoom !== zoom;

            this._zoom = zoom;
            this._lastCenter = center;
            this._pixelOrigin = this._getNewPixelOrigin(center);

            // @event zoom: Event
            // Fired repeteadly during any change in zoom level, including zoom
            // and fly animations.
            if (zoomChanged || (data && data.pinch)) {	// Always fire 'zoom' if pinching because #3530
                this.fire('zoom', data);
            }

            // @event move: Event
            // Fired repeteadly during any movement of the map, including pan and
            // fly animations.
            return this.fire('move', data);
        },

        _moveEnd: function (zoomChanged) {
            // @event zoomend: Event
            // Fired when the map has changed, after any animations.
            if (zoomChanged) {
                this.fire('zoomend');
            }

            // @event moveend: Event
            // Fired when the center of the map stops changing (e.g. user stopped
            // dragging the map).
            return this.fire('moveend');
        },

        _stop: function () {
            L.Util.cancelAnimFrame(this._flyToFrame);
            if (this._panAnim) {
                this._panAnim.stop();
            }
            return this;
        },

        _rawPanBy: function (offset) {
            L.DomUtil.setPosition(this._mapPane, this._getMapPanePos().subtract(offset));
        },

        _getZoomSpan: function () {
            return this.getMaxZoom() - this.getMinZoom();
        },

        _panInsideMaxBounds: function () {
            if (!this._enforcingBounds) {
                this.panInsideBounds(this.options.maxBounds);
            }
        },

        _checkIfLoaded: function () {
            if (!this._loaded) {
                throw new Error('Set map center and zoom first.');
            }
        },

        // DOM event handling

        // @section Interaction events
        _initEvents: function (remove) {
            if (!L.DomEvent) { return; }

            this._targets = {};
            this._targets[L.stamp(this._container)] = this;

            var onOff = remove ? 'off' : 'on';

            // @event click: MouseEvent
            // Fired when the user clicks (or taps) the map.
            // @event dblclick: MouseEvent
            // Fired when the user double-clicks (or double-taps) the map.
            // @event mousedown: MouseEvent
            // Fired when the user pushes the mouse button on the map.
            // @event mouseup: MouseEvent
            // Fired when the user releases the mouse button on the map.
            // @event mouseover: MouseEvent
            // Fired when the mouse enters the map.
            // @event mouseout: MouseEvent
            // Fired when the mouse leaves the map.
            // @event mousemove: MouseEvent
            // Fired while the mouse moves over the map.
            // @event contextmenu: MouseEvent
            // Fired when the user pushes the right mouse button on the map, prevents
            // default browser context menu from showing if there are listeners on
            // this event. Also fired on mobile when the user holds a single touch
            // for a second (also called long press).
            // @event keypress: Event
            // Fired when the user presses a key from the keyboard while the map is focused.
            L.DomEvent[onOff](this._container, 'click dblclick mousedown mouseup ' +
                'mouseover mouseout mousemove contextmenu keypress', this._handleDOMEvent, this);

            if (this.options.trackResize) {
                L.DomEvent[onOff](window, 'resize', this._onResize, this);
            }

            if (L.Browser.any3d && this.options.transform3DLimit) {
                this[onOff]('moveend', this._onMoveEnd);
            }
        },

        _onResize: function () {
            L.Util.cancelAnimFrame(this._resizeRequest);
            this._resizeRequest = L.Util.requestAnimFrame(
                function () { this.invalidateSize({debounceMoveend: true}); }, this);
        },

        _onScroll: function () {
            this._container.scrollTop  = 0;
            this._container.scrollLeft = 0;
        },

        _onMoveEnd: function () {
            var pos = this._getMapPanePos();
            if (Math.max(Math.abs(pos.x), Math.abs(pos.y)) >= this.options.transform3DLimit) {
                // https://bugzilla.mozilla.org/show_bug.cgi?id=1203873 but Webkit also have
                // a pixel offset on very high values, see: http://jsfiddle.net/dg6r5hhb/
                this._resetView(this.getCenter(), this.getZoom());
            }
        },

        _findEventTargets: function (e, type) {
            var targets = [],
                target,
                isHover = type === 'mouseout' || type === 'mouseover',
                src = e.target || e.srcElement,
                dragging = false;

            while (src) {
                target = this._targets[L.stamp(src)];
                if (target && (type === 'click' || type === 'preclick') && !e._simulated && this._draggableMoved(target)) {
                    // Prevent firing click after you just dragged an object.
                    dragging = true;
                    break;
                }
                if (target && target.listens(type, true)) {
                    if (isHover && !L.DomEvent._isExternalTarget(src, e)) { break; }
                    targets.push(target);
                    if (isHover) { break; }
                }
                if (src === this._container) { break; }
                src = src.parentNode;
            }
            if (!targets.length && !dragging && !isHover && L.DomEvent._isExternalTarget(src, e)) {
                targets = [this];
            }
            return targets;
        },

        _handleDOMEvent: function (e) {
            if (!this._loaded || L.DomEvent._skipped(e)) { return; }

            var type = e.type === 'keypress' && e.keyCode === 13 ? 'click' : e.type;

            if (e.type === 'click') {
                // Fire a synthetic 'preclick' event which propagates up (mainly for closing popups).
                // @event preclick: MouseEvent
                // Fired before mouse click on the map (sometimes useful when you
                // want something to happen on click before any existing click
                // handlers start running).
                var synth = L.Util.extend({}, e);
                synth.type = 'preclick';
                this._handleDOMEvent(synth);
            }

            if (type === 'mousedown') {
                // prevents outline when clicking on keyboard-focusable element
                L.DomUtil.preventOutline(e.target || e.srcElement);
            }

            this._fireDOMEvent(e, type);
        },

        _fireDOMEvent: function (e, type, targets) {

            if (e._stopped) { return; }

            // Find the layer the event is propagating from and its parents.
            targets = (targets || []).concat(this._findEventTargets(e, type));

            if (!targets.length) { return; }

            var target = targets[0];
            if (type === 'contextmenu' && target.listens(type, true)) {
                L.DomEvent.preventDefault(e);
            }

            var data = {
                originalEvent: e
            };

            if (e.type !== 'keypress') {
                var isMarker = target instanceof L.Marker;
                data.containerPoint = isMarker ?
                    this.latLngToContainerPoint(target.getLatLng()) : this.mouseEventToContainerPoint(e);
                data.layerPoint = this.containerPointToLayerPoint(data.containerPoint);
                data.latlng = isMarker ? target.getLatLng() : this.layerPointToLatLng(data.layerPoint);
            }

            for (var i = 0; i < targets.length; i++) {
                targets[i].fire(type, data, true);
                if (data.originalEvent._stopped ||
                    (targets[i].options.nonBubblingEvents && L.Util.indexOf(targets[i].options.nonBubblingEvents, type) !== -1)) { return; }
            }
        },

        _draggableMoved: function (obj) {
            obj = obj.options.draggable ? obj : this;
            return (obj.dragging && obj.dragging.moved()) || (this.boxZoom && this.boxZoom.moved());
        },

        _clearHandlers: function () {
            for (var i = 0, len = this._handlers.length; i < len; i++) {
                this._handlers[i].disable();
            }
        },

        // @section Other Methods

        // @method whenReady(fn: Function, context?: Object): this
        // Runs the given function `fn` when the map gets initialized with
        // a view (center and zoom) and at least one layer, or immediately
        // if it's already initialized, optionally passing a function context.
        whenReady: function (callback, context) {
            if (this._loaded) {
                callback.call(context || this, {target: this});
            } else {
                this.on('load', callback, context);
            }
            return this;
        },


        // private methods for getting map state

        _getMapPanePos: function () {
            return L.DomUtil.getPosition(this._mapPane) || new L.Point(0, 0);
        },

        _moved: function () {
            var pos = this._getMapPanePos();
            return pos && !pos.equals([0, 0]);
        },

        _getTopLeftPoint: function (center, zoom) {
            var pixelOrigin = center && zoom !== undefined ?
                this._getNewPixelOrigin(center, zoom) :
                this.getPixelOrigin();
            return pixelOrigin.subtract(this._getMapPanePos());
        },

        _getNewPixelOrigin: function (center, zoom) {
            var viewHalf = this.getSize()._divideBy(2);
            return this.project(center, zoom)._subtract(viewHalf)._add(this._getMapPanePos())._round();
        },

        _latLngToNewLayerPoint: function (latlng, zoom, center) {
            var topLeft = this._getNewPixelOrigin(center, zoom);
            return this.project(latlng, zoom)._subtract(topLeft);
        },

        // layer point of the current center
        _getCenterLayerPoint: function () {
            return this.containerPointToLayerPoint(this.getSize()._divideBy(2));
        },

        // offset of the specified place to the current center in pixels
        _getCenterOffset: function (latlng) {
            return this.latLngToLayerPoint(latlng).subtract(this._getCenterLayerPoint());
        },

        // adjust center for view to get inside bounds
        _limitCenter: function (center, zoom, bounds) {

            if (!bounds) { return center; }

            var centerPoint = this.project(center, zoom),
                viewHalf = this.getSize().divideBy(2),
                viewBounds = new L.Bounds(centerPoint.subtract(viewHalf), centerPoint.add(viewHalf)),
                offset = this._getBoundsOffset(viewBounds, bounds, zoom);

            // If offset is less than a pixel, ignore.
            // This prevents unstable projections from getting into
            // an infinite loop of tiny offsets.
            if (offset.round().equals([0, 0])) {
                return center;
            }

            return this.unproject(centerPoint.add(offset), zoom);
        },

        // adjust offset for view to get inside bounds
        _limitOffset: function (offset, bounds) {
            if (!bounds) { return offset; }

            var viewBounds = this.getPixelBounds(),
                newBounds = new L.Bounds(viewBounds.min.add(offset), viewBounds.max.add(offset));

            return offset.add(this._getBoundsOffset(newBounds, bounds));
        },

        // returns offset needed for pxBounds to get inside maxBounds at a specified zoom
        _getBoundsOffset: function (pxBounds, maxBounds, zoom) {
            var projectedMaxBounds = L.bounds(
                this.project(maxBounds.getNorthEast(), zoom),
                this.project(maxBounds.getSouthWest(), zoom)
                ),
                minOffset = projectedMaxBounds.min.subtract(pxBounds.min),
                maxOffset = projectedMaxBounds.max.subtract(pxBounds.max),

                dx = this._rebound(minOffset.x, -maxOffset.x),
                dy = this._rebound(minOffset.y, -maxOffset.y);

            return new L.Point(dx, dy);
        },

        _rebound: function (left, right) {
            return left + right > 0 ?
            Math.round(left - right) / 2 :
            Math.max(0, Math.ceil(left)) - Math.max(0, Math.floor(right));
        },

        _limitZoom: function (zoom) {
            var min = this.getMinZoom(),
                max = this.getMaxZoom(),
                snap = L.Browser.any3d ? this.options.zoomSnap : 1;
            if (snap) {
                zoom = Math.round(zoom / snap) * snap;
            }
            return Math.max(min, Math.min(max, zoom));
        }
    });

// @section

// @factory L.map(id: String, options?: Map options)
// Instantiates a map object given the DOM ID of a `<div>` element
// and optionally an object literal with `Map options`.
//
// @alternative
// @factory L.map(el: HTMLElement, options?: Map options)
// Instantiates a map object given an instance of a `<div>` HTML element
// and optionally an object literal with `Map options`.
    L.map = function (id, options) {
        return new L.Map(id, options);
    };




    /*
     * @class Layer
     * @inherits Evented
     * @aka L.Layer
     * @aka ILayer
     *
     * A set of methods from the Layer base class that all Leaflet layers use.
     * Inherits all methods, options and events from `L.Evented`.
     *
     * @example
     *
     * ```js
     * var layer = L.Marker(latlng).addTo(map);
     * layer.addTo(map);
     * layer.remove();
     * ```
     *
     * @event add: Event
     * Fired after the layer is added to a map
     *
     * @event remove: Event
     * Fired after the layer is removed from a map
     */


    L.Layer = L.Evented.extend({

        // Classes extending `L.Layer` will inherit the following options:
        options: {
            // @option pane: String = 'overlayPane'
            // By default the layer will be added to the map's [overlay pane](#map-overlaypane). Overriding this option will cause the layer to be placed on another pane by default.
            pane: 'overlayPane',
            nonBubblingEvents: []  // Array of events that should not be bubbled to DOM parents (like the map)
        },

        /* @section
         * Classes extending `L.Layer` will inherit the following methods:
         *
         * @method addTo(map: Map): this
         * Adds the layer to the given map
         */
        addTo: function (map) {
            map.addLayer(this);
            return this;
        },

        // @method remove: this
        // Removes the layer from the map it is currently active on.
        remove: function () {
            return this.removeFrom(this._map || this._mapToAdd);
        },

        // @method removeFrom(map: Map): this
        // Removes the layer from the given map
        removeFrom: function (obj) {
            if (obj) {
                obj.removeLayer(this);
            }
            return this;
        },

        // @method getPane(name? : String): HTMLElement
        // Returns the `HTMLElement` representing the named pane on the map. If `name` is omitted, returns the pane for this layer.
        getPane: function (name) {
            return this._map.getPane(name ? (this.options[name] || name) : this.options.pane);
        },

        addInteractiveTarget: function (targetEl) {
            this._map._targets[L.stamp(targetEl)] = this;
            return this;
        },

        removeInteractiveTarget: function (targetEl) {
            delete this._map._targets[L.stamp(targetEl)];
            return this;
        },

        _layerAdd: function (e) {
            var map = e.target;

            // check in case layer gets added and then removed before the map is ready
            if (!map.hasLayer(this)) { return; }

            this._map = map;
            this._zoomAnimated = map._zoomAnimated;

            if (this.getEvents) {
                map.on(this.getEvents(), this);
            }

            this.onAdd(map);

            if (this.getAttribution && this._map.attributionControl) {
                this._map.attributionControl.addAttribution(this.getAttribution());
            }

            this.fire('add');
            map.fire('layeradd', {layer: this});
        }
    });

    /* @section Extension methods
     * @uninheritable
     *
     * Every layer should extend from `L.Layer` and (re-)implement the following methods.
     *
     * @method onAdd(map: Map): this
     * Should contain code that creates DOM elements for the layer, adds them to `map panes` where they should belong and puts listeners on relevant map events. Called on [`map.addLayer(layer)`](#map-addlayer).
     *
     * @method onRemove(map: Map): this
     * Should contain all clean up code that removes the layer's elements from the DOM and removes listeners previously added in [`onAdd`](#layer-onadd). Called on [`map.removeLayer(layer)`](#map-removelayer).
     *
     * @method getEvents(): Object
     * This optional method should return an object like `{ viewreset: this._reset }` for [`addEventListener`](#event-addeventlistener). These events will be automatically added and removed from the map with your layer.
     *
     * @method getAttribution(): String
     * This optional method should return a string containing HTML to be shown on the `Attribution control` whenever the layer is visible.
     *
     * @method beforeAdd(map: Map): this
     * Optional method. Called on [`map.addLayer(layer)`](#map-addlayer), before the layer is added to the map, before events are initialized, without waiting until the map is in a usable state. Use for early initialization only.
     */


    /* @namespace Map
     * @section Layer events
     *
     * @event layeradd: LayerEvent
     * Fired when a new layer is added to the map.
     *
     * @event layerremove: LayerEvent
     * Fired when some layer is removed from the map
     *
     * @section Methods for Layers and Controls
     */
    L.Map.include({
        // @method addLayer(layer: Layer): this
        // Adds the given layer to the map
        addLayer: function (layer) {
            var id = L.stamp(layer);
            if (this._layers[id]) { return layer; }
            this._layers[id] = layer;

            layer._mapToAdd = this;

            if (layer.beforeAdd) {
                layer.beforeAdd(this);
            }

            this.whenReady(layer._layerAdd, layer);

            return this;
        },

        // @method removeLayer(layer: Layer): this
        // Removes the given layer from the map.
        removeLayer: function (layer) {
            var id = L.stamp(layer);

            if (!this._layers[id]) { return this; }

            if (this._loaded) {
                layer.onRemove(this);
            }

            if (layer.getAttribution && this.attributionControl) {
                this.attributionControl.removeAttribution(layer.getAttribution());
            }

            if (layer.getEvents) {
                this.off(layer.getEvents(), layer);
            }

            delete this._layers[id];

            if (this._loaded) {
                this.fire('layerremove', {layer: layer});
                layer.fire('remove');
            }

            layer._map = layer._mapToAdd = null;

            return this;
        },

        // @method hasLayer(layer: Layer): Boolean
        // Returns `true` if the given layer is currently added to the map
        hasLayer: function (layer) {
            return !!layer && (L.stamp(layer) in this._layers);
        },

        /* @method eachLayer(fn: Function, context?: Object): this
         * Iterates over the layers of the map, optionally specifying context of the iterator function.
         * ```
         * map.eachLayer(function(layer){
         *     layer.bindPopup('Hello');
         * });
         * ```
         */
        eachLayer: function (method, context) {
            for (var i in this._layers) {
                method.call(context, this._layers[i]);
            }
            return this;
        },

        _addLayers: function (layers) {
            layers = layers ? (L.Util.isArray(layers) ? layers : [layers]) : [];

            for (var i = 0, len = layers.length; i < len; i++) {
                this.addLayer(layers[i]);
            }
        },

        _addZoomLimit: function (layer) {
            if (isNaN(layer.options.maxZoom) || !isNaN(layer.options.minZoom)) {
                this._zoomBoundLayers[L.stamp(layer)] = layer;
                this._updateZoomLevels();
            }
        },

        _removeZoomLimit: function (layer) {
            var id = L.stamp(layer);

            if (this._zoomBoundLayers[id]) {
                delete this._zoomBoundLayers[id];
                this._updateZoomLevels();
            }
        },

        _updateZoomLevels: function () {
            var minZoom = Infinity,
                maxZoom = -Infinity,
                oldZoomSpan = this._getZoomSpan();

            for (var i in this._zoomBoundLayers) {
                var options = this._zoomBoundLayers[i].options;

                minZoom = options.minZoom === undefined ? minZoom : Math.min(minZoom, options.minZoom);
                maxZoom = options.maxZoom === undefined ? maxZoom : Math.max(maxZoom, options.maxZoom);
            }

            this._layersMaxZoom = maxZoom === -Infinity ? undefined : maxZoom;
            this._layersMinZoom = minZoom === Infinity ? undefined : minZoom;

            // @section Map state change events
            // @event zoomlevelschange: Event
            // Fired when the number of zoomlevels on the map is changed due
            // to adding or removing a layer.
            if (oldZoomSpan !== this._getZoomSpan()) {
                this.fire('zoomlevelschange');
            }
        }
    });



    /*
     * @namespace Projection
     * @projection L.Projection.Mercator
     *
     * Elliptical Mercator projection — more complex than Spherical Mercator. Takes into account that Earth is a geoid, not a perfect sphere. Used by the EPSG:3395 CRS.
     */

    L.Projection.Mercator = {
        R: 6378137,
        R_MINOR: 6356752.314245179,

        bounds: L.bounds([-20037508.34279, -15496570.73972], [20037508.34279, 18764656.23138]),

        project: function (latlng) {
            var d = Math.PI / 180,
                r = this.R,
                y = latlng.lat * d,
                tmp = this.R_MINOR / r,
                e = Math.sqrt(1 - tmp * tmp),
                con = e * Math.sin(y);

            var ts = Math.tan(Math.PI / 4 - y / 2) / Math.pow((1 - con) / (1 + con), e / 2);
            y = -r * Math.log(Math.max(ts, 1E-10));

            return new L.Point(latlng.lng * d * r, y);
        },

        unproject: function (point) {
            var d = 180 / Math.PI,
                r = this.R,
                tmp = this.R_MINOR / r,
                e = Math.sqrt(1 - tmp * tmp),
                ts = Math.exp(-point.y / r),
                phi = Math.PI / 2 - 2 * Math.atan(ts);

            for (var i = 0, dphi = 0.1, con; i < 15 && Math.abs(dphi) > 1e-7; i++) {
                con = e * Math.sin(phi);
                con = Math.pow((1 - con) / (1 + con), e / 2);
                dphi = Math.PI / 2 - 2 * Math.atan(ts * con) - phi;
                phi += dphi;
            }

            return new L.LatLng(phi * d, point.x * d / r);
        }
    };



    /*
     * @namespace CRS
     * @crs L.CRS.EPSG3395
     *
     * Rarely used by some commercial tile providers. Uses Elliptical Mercator projection.
     */

    L.CRS.EPSG3395 = L.extend({}, L.CRS.Earth, {
        code: 'EPSG:3395',
        projection: L.Projection.Mercator,

        transformation: (function () {
            var scale = 0.5 / (Math.PI * L.Projection.Mercator.R);
            return new L.Transformation(scale, 0.5, -scale, 0.5);
        }())
    });



    /*
     * @class GridLayer
     * @inherits Layer
     * @aka L.GridLayer
     *
     * Generic class for handling a tiled grid of HTML elements. This is the base class for all tile layers and replaces `TileLayer.Canvas`.
     * GridLayer can be extended to create a tiled grid of HTML Elements like `<canvas>`, `<img>` or `<div>`. GridLayer will handle creating and animating these DOM elements for you.
     *
     *
     * @section Synchronous usage
     * @example
     *
     * To create a custom layer, extend GridLayer and impliment the `createTile()` method, which will be passed a `Point` object with the `x`, `y`, and `z` (zoom level) coordinates to draw your tile.
     *
     * ```js
     * var CanvasLayer = L.GridLayer.extend({
     *     createTile: function(coords){
     *         // create a <canvas> element for drawing
     *         var tile = L.DomUtil.create('canvas', 'leaflet-tile');
     *
     *         // setup tile width and height according to the options
     *         var size = this.getTileSize();
     *         tile.width = size.x;
     *         tile.height = size.y;
     *
     *         // get a canvas context and draw something on it using coords.x, coords.y and coords.z
     *         var ctx = canvas.getContext('2d');
     *
     *         // return the tile so it can be rendered on screen
     *         return tile;
     *     }
     * });
     * ```
     *
     * @section Asynchrohous usage
     * @example
     *
     * Tile creation can also be asyncronous, this is useful when using a third-party drawing library. Once the tile is finsihed drawing it can be passed to the done() callback.
     *
     * ```js
     * var CanvasLayer = L.GridLayer.extend({
     *     createTile: function(coords, done){
     *         var error;
     *
     *         // create a <canvas> element for drawing
     *         var tile = L.DomUtil.create('canvas', 'leaflet-tile');
     *
     *         // setup tile width and height according to the options
     *         var size = this.getTileSize();
     *         tile.width = size.x;
     *         tile.height = size.y;
     *
     *         // draw something and pass the tile to the done() callback
     *         done(error, tile);
     *     }
     * });
     * ```
     *
     * @section
     */


    L.GridLayer = L.Layer.extend({

        options: {
            // @option tileSize: Number|Point = 256
            // Width and height of tiles in the grid. Use a number if width and height are equal, or `L.point(width, height)` otherwise.
            tileSize: 256,

            // @option opacity: Number = 1.0
            // Opacity of the tiles. Can be used in the `createTile()` function.
            opacity: 1,

            // @option updateWhenIdle: Boolean = depends
            // If `false`, new tiles are loaded during panning, otherwise only after it (for better performance). `true` by default on mobile browsers, otherwise `false`.
            updateWhenIdle: L.Browser.mobile,

            // @option updateInterval: Number = 200
            // Tiles will not update more than once every `updateInterval` milliseconds.
            updateInterval: 200,

            // @option attribution: String = null
            // String to be shown in the attribution control, describes the layer data, e.g. "? Mapbox".
            attribution: null,

            // @option zIndex: Number = 1
            // The explicit zIndex of the tile layer.
            zIndex: 1,

            // @option bounds: LatLngBounds = undefined
            // If set, tiles will only be loaded inside inside the set `LatLngBounds`.
            bounds: null,

            // @option minZoom: Number = 0
            // The minimum zoom level that tiles will be loaded at. By default the entire map.
            minZoom: 0,

            // @option maxZoom: Number = undefined
            // The maximum zoom level that tiles will be loaded at.
//		maxZoom: undefined,

            // @option noWrap: Boolean = false
            // Whether the layer is wrapped around the antimeridian. If `true`, the
            // GridLayer will only be displayed once at low zoom levels.
            noWrap: false,

            // @option pane: String = 'tilePane'
            // `Map pane` where the grid layer will be added.
            pane: 'tilePane'
        },

        initialize: function (options) {
            options = L.setOptions(this, options);
        },

        onAdd: function () {
            this._initContainer();

            this._levels = {};
            this._tiles = {};

            this._resetView();
            this._update();
        },

        beforeAdd: function (map) {
            map._addZoomLimit(this);
        },

        onRemove: function (map) {
            this._removeAllTiles();
            L.DomUtil.remove(this._container);
            map._removeZoomLimit(this);
            this._container = null;
            this._tileZoom = null;
        },

        // @method bringToFront: this
        // Brings the tile layer to the top of all tile layers.
        bringToFront: function () {
            if (this._map) {
                L.DomUtil.toFront(this._container);
                this._setAutoZIndex(Math.max);
            }
            return this;
        },

        // @method bringToBack: this
        // Brings the tile layer to the bottom of all tile layers.
        bringToBack: function () {
            if (this._map) {
                L.DomUtil.toBack(this._container);
                this._setAutoZIndex(Math.min);
            }
            return this;
        },

        // @method getAttribution: String
        // Used by the `attribution control`, returns the [attribution option](#gridlayer-attribution).
        getAttribution: function () {
            return this.options.attribution;
        },

        // @method getContainer: String
        // Returns the HTML element that contains the tiles for this layer.
        getContainer: function () {
            return this._container;
        },

        // @method setOpacity(opacity: Number): this
        // Changes the [opacity](#gridlayer-opacity) of the grid layer.
        setOpacity: function (opacity) {
            this.options.opacity = opacity;
            this._updateOpacity();
            return this;
        },

        // @method setZIndex(zIndex: Number): this
        // Changes the [zIndex](#gridlayer-zindex) of the grid layer.
        setZIndex: function (zIndex) {
            this.options.zIndex = zIndex;
            this._updateZIndex();

            return this;
        },

        // @method isLoading: Boolean
        // Returns `true` if any tile in the grid layer has not finished loading.
        isLoading: function () {
            return this._loading;
        },

        // @method redraw: this
        // Causes the layer to clear all the tiles and request them again.
        redraw: function () {
            if (this._map) {
                this._removeAllTiles();
                this._update();
            }
            return this;
        },

        getEvents: function () {
            var events = {
                viewprereset: this._invalidateAll,
                viewreset: this._resetView,
                zoom: this._resetView,
                moveend: this._onMoveEnd
            };

            if (!this.options.updateWhenIdle) {
                // update tiles on move, but not more often than once per given interval
                if (!this._onMove) {
                    this._onMove = L.Util.throttle(this._onMoveEnd, this.options.updateInterval, this);
                }

                events.move = this._onMove;
            }

            if (this._zoomAnimated) {
                events.zoomanim = this._animateZoom;
            }

            return events;
        },

        // @section Extension methods
        // Layers extending `GridLayer` shall reimplement the following method.
        // @method createTile(coords: Object, done?: Function): HTMLElement
        // Called only internally, must be overriden by classes extending `GridLayer`.
        // Returns the `HTMLElement` corresponding to the given `coords`. If the `done` callback
        // is specified, it must be called when the tile has finished loading and drawing.
        createTile: function () {
            return document.createElement('div');
        },

        // @section
        // @method getTileSize: Point
        // Normalizes the [tileSize option](#gridlayer-tilesize) into a point. Used by the `createTile()` method.
        getTileSize: function () {
            var s = this.options.tileSize;
            return s instanceof L.Point ? s : new L.Point(s, s);
        },

        _updateZIndex: function () {
            if (this._container && this.options.zIndex !== undefined && this.options.zIndex !== null) {
                this._container.style.zIndex = this.options.zIndex;
            }
        },

        _setAutoZIndex: function (compare) {
            // go through all other layers of the same pane, set zIndex to max + 1 (front) or min - 1 (back)

            var layers = this.getPane().children,
                edgeZIndex = -compare(-Infinity, Infinity); // -Infinity for max, Infinity for min

            for (var i = 0, len = layers.length, zIndex; i < len; i++) {

                zIndex = layers[i].style.zIndex;

                if (layers[i] !== this._container && zIndex) {
                    edgeZIndex = compare(edgeZIndex, +zIndex);
                }
            }

            if (isFinite(edgeZIndex)) {
                this.options.zIndex = edgeZIndex + compare(-1, 1);
                this._updateZIndex();
            }
        },

        _updateOpacity: function () {
            if (!this._map) { return; }

            // IE doesn't inherit filter opacity properly, so we're forced to set it on tiles
            if (L.Browser.ielt9) { return; }

            L.DomUtil.setOpacity(this._container, this.options.opacity);

            var now = +new Date(),
                nextFrame = false,
                willPrune = false;

            for (var key in this._tiles) {
                var tile = this._tiles[key];
                if (!tile.current || !tile.loaded) { continue; }

                var fade = Math.min(1, (now - tile.loaded) / 200);

                L.DomUtil.setOpacity(tile.el, fade);
                if (fade < 1) {
                    nextFrame = true;
                } else {
                    if (tile.active) { willPrune = true; }
                    tile.active = true;
                }
            }

            if (willPrune && !this._noPrune) { this._pruneTiles(); }

            if (nextFrame) {
                L.Util.cancelAnimFrame(this._fadeFrame);
                this._fadeFrame = L.Util.requestAnimFrame(this._updateOpacity, this);
            }
        },

        _initContainer: function () {
            if (this._container) { return; }

            this._container = L.DomUtil.create('div', 'leaflet-layer');
            this._updateZIndex();

            if (this.options.opacity < 1) {
                this._updateOpacity();
            }

            this.getPane().appendChild(this._container);
        },

        _updateLevels: function () {

            var zoom = this._tileZoom,
                maxZoom = this.options.maxZoom;

            if (zoom === undefined) { return undefined; }

            for (var z in this._levels) {
                if (this._levels[z].el.children.length || z === zoom) {
                    this._levels[z].el.style.zIndex = maxZoom - Math.abs(zoom - z);
                } else {
                    L.DomUtil.remove(this._levels[z].el);
                    this._removeTilesAtZoom(z);
                    delete this._levels[z];
                }
            }

            var level = this._levels[zoom],
                map = this._map;

            if (!level) {
                level = this._levels[zoom] = {};

                level.el = L.DomUtil.create('div', 'leaflet-tile-container leaflet-zoom-animated', this._container);
                level.el.style.zIndex = maxZoom;

                level.origin = map.project(map.unproject(map.getPixelOrigin()), zoom).round();
                level.zoom = zoom;

                this._setZoomTransform(level, map.getCenter(), map.getZoom());

                // force the browser to consider the newly added element for transition
                L.Util.falseFn(level.el.offsetWidth);
            }

            this._level = level;

            return level;
        },

        _pruneTiles: function () {
            if (!this._map) {
                return;
            }

            var key, tile;

            var zoom = this._map.getZoom();
            if (zoom > this.options.maxZoom ||
                zoom < this.options.minZoom) {
                this._removeAllTiles();
                return;
            }

            for (key in this._tiles) {
                tile = this._tiles[key];
                tile.retain = tile.current;
            }

            for (key in this._tiles) {
                tile = this._tiles[key];
                if (tile.current && !tile.active) {
                    var coords = tile.coords;
                    if (!this._retainParent(coords.x, coords.y, coords.z, coords.z - 5)) {
                        this._retainChildren(coords.x, coords.y, coords.z, coords.z + 2);
                    }
                }
            }

            for (key in this._tiles) {
                if (!this._tiles[key].retain) {
                    this._removeTile(key);
                }
            }
        },

        _removeTilesAtZoom: function (zoom) {
            for (var key in this._tiles) {
                if (this._tiles[key].coords.z !== zoom) {
                    continue;
                }
                this._removeTile(key);
            }
        },

        _removeAllTiles: function () {
            for (var key in this._tiles) {
                this._removeTile(key);
            }
        },

        _invalidateAll: function () {
            for (var z in this._levels) {
                L.DomUtil.remove(this._levels[z].el);
                delete this._levels[z];
            }
            this._removeAllTiles();

            this._tileZoom = null;
        },

        _retainParent: function (x, y, z, minZoom) {
            var x2 = Math.floor(x / 2),
                y2 = Math.floor(y / 2),
                z2 = z - 1,
                coords2 = new L.Point(+x2, +y2);
            coords2.z = +z2;

            var key = this._tileCoordsToKey(coords2),
                tile = this._tiles[key];

            if (tile && tile.active) {
                tile.retain = true;
                return true;

            } else if (tile && tile.loaded) {
                tile.retain = true;
            }

            if (z2 > minZoom) {
                return this._retainParent(x2, y2, z2, minZoom);
            }

            return false;
        },

        _retainChildren: function (x, y, z, maxZoom) {

            for (var i = 2 * x; i < 2 * x + 2; i++) {
                for (var j = 2 * y; j < 2 * y + 2; j++) {

                    var coords = new L.Point(i, j);
                    coords.z = z + 1;

                    var key = this._tileCoordsToKey(coords),
                        tile = this._tiles[key];

                    if (tile && tile.active) {
                        tile.retain = true;
                        continue;

                    } else if (tile && tile.loaded) {
                        tile.retain = true;
                    }

                    if (z + 1 < maxZoom) {
                        this._retainChildren(i, j, z + 1, maxZoom);
                    }
                }
            }
        },

        _resetView: function (e) {
            var animating = e && (e.pinch || e.flyTo);
            this._setView(this._map.getCenter(), this._map.getZoom(), animating, animating);
        },

        _animateZoom: function (e) {
            this._setView(e.center, e.zoom, true, e.noUpdate);
        },

        _setView: function (center, zoom, noPrune, noUpdate) {
            var tileZoom = Math.round(zoom);
            if ((this.options.maxZoom !== undefined && tileZoom > this.options.maxZoom) ||
                (this.options.minZoom !== undefined && tileZoom < this.options.minZoom)) {
                tileZoom = undefined;
            }

            var tileZoomChanged = (tileZoom !== this._tileZoom);

            if (!noUpdate || tileZoomChanged) {

                this._tileZoom = tileZoom;

                if (this._abortLoading) {
                    this._abortLoading();
                }

                this._updateLevels();
                this._resetGrid();

                if (tileZoom !== undefined) {
                    this._update(center);
                }

                if (!noPrune) {
                    this._pruneTiles();
                }

                // Flag to prevent _updateOpacity from pruning tiles during
                // a zoom anim or a pinch gesture
                this._noPrune = !!noPrune;
            }

            this._setZoomTransforms(center, zoom);
        },

        _setZoomTransforms: function (center, zoom) {
            for (var i in this._levels) {
                this._setZoomTransform(this._levels[i], center, zoom);
            }
        },

        _setZoomTransform: function (level, center, zoom) {
            var scale = this._map.getZoomScale(zoom, level.zoom),
                translate = level.origin.multiplyBy(scale)
                    .subtract(this._map._getNewPixelOrigin(center, zoom)).round();

            if (L.Browser.any3d) {
                L.DomUtil.setTransform(level.el, translate, scale);
            } else {
                L.DomUtil.setPosition(level.el, translate);
            }
        },

        _resetGrid: function () {
            var map = this._map,
                crs = map.options.crs,
                tileSize = this._tileSize = this.getTileSize(),
                tileZoom = this._tileZoom;

            var bounds = this._map.getPixelWorldBounds(this._tileZoom);
            if (bounds) {
                this._globalTileRange = this._pxBoundsToTileRange(bounds);
            }

            this._wrapX = crs.wrapLng && !this.options.noWrap && [
                    Math.floor(map.project([0, crs.wrapLng[0]], tileZoom).x / tileSize.x),
                    Math.ceil(map.project([0, crs.wrapLng[1]], tileZoom).x / tileSize.y)
                ];
            this._wrapY = crs.wrapLat && !this.options.noWrap && [
                    Math.floor(map.project([crs.wrapLat[0], 0], tileZoom).y / tileSize.x),
                    Math.ceil(map.project([crs.wrapLat[1], 0], tileZoom).y / tileSize.y)
                ];
        },

        _onMoveEnd: function () {
            if (!this._map || this._map._animatingZoom) { return; }

            this._resetView();
        },

        _getTiledPixelBounds: function (center) {
            var map = this._map,
                mapZoom = map._animatingZoom ? Math.max(map._animateToZoom, map.getZoom()) : map.getZoom(),
                scale = map.getZoomScale(mapZoom, this._tileZoom),
                pixelCenter = map.project(center, this._tileZoom).floor(),
                halfSize = map.getSize().divideBy(scale * 2);

            return new L.Bounds(pixelCenter.subtract(halfSize), pixelCenter.add(halfSize));
        },

        // Private method to load tiles in the grid's active zoom level according to map bounds
        _update: function (center) {
            var map = this._map;
            if (!map) { return; }
            var zoom = map.getZoom();

            if (center === undefined) { center = map.getCenter(); }
            if (this._tileZoom === undefined) { return; }	// if out of minzoom/maxzoom

            var pixelBounds = this._getTiledPixelBounds(center),
                tileRange = this._pxBoundsToTileRange(pixelBounds),
                tileCenter = tileRange.getCenter(),
                queue = [];

            for (var key in this._tiles) {
                this._tiles[key].current = false;
            }

            // _update just loads more tiles. If the tile zoom level differs too much
            // from the map's, let _setView reset levels and prune old tiles.
            if (Math.abs(zoom - this._tileZoom) > 1) { this._setView(center, zoom); return; }

            // create a queue of coordinates to load tiles from
            for (var j = tileRange.min.y; j <= tileRange.max.y; j++) {
                for (var i = tileRange.min.x; i <= tileRange.max.x; i++) {
                    var coords = new L.Point(i, j);
                    coords.z = this._tileZoom;

                    if (!this._isValidTile(coords)) { continue; }

                    var tile = this._tiles[this._tileCoordsToKey(coords)];
                    if (tile) {
                        tile.current = true;
                    } else {
                        queue.push(coords);
                    }
                }
            }

            // sort tile queue to load tiles in order of their distance to center
            queue.sort(function (a, b) {
                return a.distanceTo(tileCenter) - b.distanceTo(tileCenter);
            });

            if (queue.length !== 0) {
                // if its the first batch of tiles to load
                if (!this._loading) {
                    this._loading = true;
                    // @event loading: Event
                    // Fired when the grid layer starts loading tiles
                    this.fire('loading');
                }

                // create DOM fragment to append tiles in one batch
                var fragment = document.createDocumentFragment();

                for (i = 0; i < queue.length; i++) {
                    this._addTile(queue[i], fragment);
                }

                this._level.el.appendChild(fragment);
            }
        },

        _isValidTile: function (coords) {
            var crs = this._map.options.crs;

            if (!crs.infinite) {
                // don't load tile if it's out of bounds and not wrapped
                var bounds = this._globalTileRange;
                if ((!crs.wrapLng && (coords.x < bounds.min.x || coords.x > bounds.max.x)) ||
                    (!crs.wrapLat && (coords.y < bounds.min.y || coords.y > bounds.max.y))) { return false; }
            }

            if (!this.options.bounds) { return true; }

            // don't load tile if it doesn't intersect the bounds in options
            var tileBounds = this._tileCoordsToBounds(coords);
            return L.latLngBounds(this.options.bounds).overlaps(tileBounds);
        },

        _keyToBounds: function (key) {
            return this._tileCoordsToBounds(this._keyToTileCoords(key));
        },

        // converts tile coordinates to its geographical bounds
        _tileCoordsToBounds: function (coords) {

            var map = this._map,
                tileSize = this.getTileSize(),

                nwPoint = coords.scaleBy(tileSize),
                sePoint = nwPoint.add(tileSize),

                nw = map.wrapLatLng(map.unproject(nwPoint, coords.z)),
                se = map.wrapLatLng(map.unproject(sePoint, coords.z));

            return new L.LatLngBounds(nw, se);
        },

        // converts tile coordinates to key for the tile cache
        _tileCoordsToKey: function (coords) {
            return coords.x + ':' + coords.y + ':' + coords.z;
        },

        // converts tile cache key to coordinates
        _keyToTileCoords: function (key) {
            var k = key.split(':'),
                coords = new L.Point(+k[0], +k[1]);
            coords.z = +k[2];
            return coords;
        },

        _removeTile: function (key) {
            var tile = this._tiles[key];
            if (!tile) { return; }

            L.DomUtil.remove(tile.el);

            delete this._tiles[key];

            // @event tileunload: TileEvent
            // Fired when a tile is removed (e.g. when a tile goes off the screen).
            this.fire('tileunload', {
                tile: tile.el,
                coords: this._keyToTileCoords(key)
            });
        },

        _initTile: function (tile) {
            L.DomUtil.addClass(tile, 'leaflet-tile');

            var tileSize = this.getTileSize();
            tile.style.width = tileSize.x + 'px';
            tile.style.height = tileSize.y + 'px';

            tile.onselectstart = L.Util.falseFn;
            tile.onmousemove = L.Util.falseFn;

            // update opacity on tiles in IE7-8 because of filter inheritance problems
            if (L.Browser.ielt9 && this.options.opacity < 1) {
                L.DomUtil.setOpacity(tile, this.options.opacity);
            }

            // without this hack, tiles disappear after zoom on Chrome for Android
            // https://github.com/Leaflet/Leaflet/issues/2078
            if (L.Browser.android && !L.Browser.android23) {
                tile.style.WebkitBackfaceVisibility = 'hidden';
            }
        },

        _addTile: function (coords, container) {
            var tilePos = this._getTilePos(coords),
                key = this._tileCoordsToKey(coords);

            var tile = this.createTile(this._wrapCoords(coords), L.bind(this._tileReady, this, coords));

            this._initTile(tile);

            // if createTile is defined with a second argument ("done" callback),
            // we know that tile is async and will be ready later; otherwise
            if (this.createTile.length < 2) {
                // mark tile as ready, but delay one frame for opacity animation to happen
                L.Util.requestAnimFrame(L.bind(this._tileReady, this, coords, null, tile));
            }

            L.DomUtil.setPosition(tile, tilePos);

            // save tile in cache
            this._tiles[key] = {
                el: tile,
                coords: coords,
                current: true
            };

            container.appendChild(tile);
            // @event tileloadstart: TileEvent
            // Fired when a tile is requested and starts loading.
            this.fire('tileloadstart', {
                tile: tile,
                coords: coords
            });
        },

        _tileReady: function (coords, err, tile) {
            if (!this._map) { return; }

            if (err) {
                // @event tileerror: TileEvent
                // Fired when there is an error loading a tile.
                this.fire('tileerror', {
                    error: err,
                    tile: tile,
                    coords: coords
                });
            }

            var key = this._tileCoordsToKey(coords);

            tile = this._tiles[key];
            if (!tile) { return; }

            tile.loaded = +new Date();
            if (this._map._fadeAnimated) {
                L.DomUtil.setOpacity(tile.el, 0);
                L.Util.cancelAnimFrame(this._fadeFrame);
                this._fadeFrame = L.Util.requestAnimFrame(this._updateOpacity, this);
            } else {
                tile.active = true;
                this._pruneTiles();
            }

            L.DomUtil.addClass(tile.el, 'leaflet-tile-loaded');

            // @event tileload: TileEvent
            // Fired when a tile loads.
            this.fire('tileload', {
                tile: tile.el,
                coords: coords
            });

            if (this._noTilesToLoad()) {
                this._loading = false;
                // @event load: TileEvent
                // Fired when the grid layer loaded all visible tiles.
                this.fire('load');

                if (L.Browser.ielt9 || !this._map._fadeAnimated) {
                    L.Util.requestAnimFrame(this._pruneTiles, this);
                } else {
                    // Wait a bit more than 0.2 secs (the duration of the tile fade-in)
                    // to trigger a pruning.
                    setTimeout(L.bind(this._pruneTiles, this), 250);
                }
            }
        },

        _getTilePos: function (coords) {
            return coords.scaleBy(this.getTileSize()).subtract(this._level.origin);
        },

        _wrapCoords: function (coords) {
            var newCoords = new L.Point(
                this._wrapX ? L.Util.wrapNum(coords.x, this._wrapX) : coords.x,
                this._wrapY ? L.Util.wrapNum(coords.y, this._wrapY) : coords.y);
            newCoords.z = coords.z;
            return newCoords;
        },

        _pxBoundsToTileRange: function (bounds) {
            var tileSize = this.getTileSize();
            return new L.Bounds(
                bounds.min.unscaleBy(tileSize).floor(),
                bounds.max.unscaleBy(tileSize).ceil().subtract([1, 1]));
        },

        _noTilesToLoad: function () {
            for (var key in this._tiles) {
                if (!this._tiles[key].loaded) { return false; }
            }
            return true;
        }
    });

// @factory L.gridLayer(options?: GridLayer options)
// Creates a new instance of GridLayer with the supplied options.
    L.gridLayer = function (options) {
        return new L.GridLayer(options);
    };



    /*
     * @class TileLayer
     * @inherits GridLayer
     * @aka L.TileLayer
     * Used to load and display tile layers on the map. Extends `GridLayer`.
     *
     * @example
     *
     * ```js
     * L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png?{foo}', {foo: 'bar'}).addTo(map);
     * ```
     *
     * @section URL template
     * @example
     *
     * A string of the following form:
     *
     * ```
     * 'http://{s}.somedomain.com/blabla/{z}/{x}/{y}{r}.png'
     * ```
     *
     * `{s}` means one of the available subdomains (used sequentially to help with browser parallel requests per domain limitation; subdomain values are specified in options; `a`, `b` or `c` by default, can be omitted), `{z}` — zoom level, `{x}` and `{y}` — tile coordinates. `{r}` can be used to add @2x to the URL to load retina tiles.
     *
     * You can use custom keys in the template, which will be [evaluated](#util-template) from TileLayer options, like this:
     *
     * ```
     * L.tileLayer('http://{s}.somedomain.com/{foo}/{z}/{x}/{y}.png', {foo: 'bar'});
     * ```
     *
     * @section
     */


    L.TileLayer = L.GridLayer.extend({

        options: {
            // @option minZoom: Number = 0
            // Minimum zoom number.
            minZoom: 0,

            // @option maxZoom: Number = 18
            // Maximum zoom number.
            maxZoom: 18,

            // @option maxNativeZoom: Number = null
            // Maximum zoom number the tile source has available. If it is specified,
            // the tiles on all zoom levels higher than `maxNativeZoom` will be loaded
            // from `maxNativeZoom` level and auto-scaled.
            maxNativeZoom: null,

            // @option subdomains: String|String[] = 'abc'
            // Subdomains of the tile service. Can be passed in the form of one string (where each letter is a subdomain name) or an array of strings.
            subdomains: 'abc',

            // @option errorTileUrl: String = ''
            // URL to the tile image to show in place of the tile that failed to load.
            errorTileUrl: '',

            // @option zoomOffset: Number = 0
            // The zoom number used in tile URLs will be offset with this value.
            zoomOffset: 0,

            // @option tms: Boolean = false
            // If `true`, inverses Y axis numbering for tiles (turn this on for TMS services).
            tms: false,

            // @option zoomReverse: Boolean = false
            // If set to true, the zoom number used in tile URLs will be reversed (`maxZoom - zoom` instead of `zoom`)
            zoomReverse: false,

            // @option detectRetina: Boolean = false
            // If `true` and user is on a retina display, it will request four tiles of half the specified size and a bigger zoom level in place of one to utilize the high resolution.
            detectRetina: false,

            // @option crossOrigin: Boolean = false
            // If true, all tiles will have their crossOrigin attribute set to ''. This is needed if you want to access tile pixel data.
            crossOrigin: false
        },

        initialize: function (url, options) {

            this._url = url;

            options = L.setOptions(this, options);

            // detecting retina displays, adjusting tileSize and zoom levels
            if (options.detectRetina && L.Browser.retina && options.maxZoom > 0) {

                options.tileSize = Math.floor(options.tileSize / 2);
                options.zoomOffset++;

                options.minZoom = Math.max(0, options.minZoom);
                options.maxZoom--;
            }

            if (typeof options.subdomains === 'string') {
                options.subdomains = options.subdomains.split('');
            }

            // for https://github.com/Leaflet/Leaflet/issues/137
            if (!L.Browser.android) {
                this.on('tileunload', this._onTileRemove);
            }
        },

        // @method setUrl(url: String, noRedraw?: Boolean): this
        // Updates the layer's URL template and redraws it (unless `noRedraw` is set to `true`).
        setUrl: function (url, noRedraw) {
            this._url = url;

            if (!noRedraw) {
                this.redraw();
            }
            return this;
        },

        // @method createTile(coords: Object, done?: Function): HTMLElement
        // Called only internally, overrides GridLayer's [`createTile()`](#gridlayer-createtile)
        // to return an `<img>` HTML element with the appropiate image URL given `coords`. The `done`
        // callback is called when the tile has been loaded.
        createTile: function (coords, done) {
            var tile = document.createElement('img');

            L.DomEvent.on(tile, 'load', L.bind(this._tileOnLoad, this, done, tile));
            L.DomEvent.on(tile, 'error', L.bind(this._tileOnError, this, done, tile));

            if (this.options.crossOrigin) {
                tile.crossOrigin = '';
            }

            /*
             Alt tag is set to empty string to keep screen readers from reading URL and for compliance reasons
             http://www.w3.org/TR/WCAG20-TECHS/H67
             */
            tile.alt = '';

            tile.src = this.getTileUrl(coords);

            return tile;
        },

        // @section Extension methods
        // @uninheritable
        // Layers extending `TileLayer` might reimplement the following method.
        // @method getTileUrl(coords: Object): String
        // Called only internally, returns the URL for a tile given its coordinates.
        // Classes extending `TileLayer` can override this function to provide custom tile URL naming schemes.
        getTileUrl: function (coords) {
            var data = {
                r: L.Browser.retina ? '@2x' : '',
                s: this._getSubdomain(coords),
                x: coords.x,
                y: coords.y,
                z: this._getZoomForUrl()
            };
            if (this._map && !this._map.options.crs.infinite) {
                var invertedY = this._globalTileRange.max.y - coords.y;
                if (this.options.tms) {
                    data['y'] = invertedY;
                }
                data['-y'] = invertedY;
            }

            return L.Util.template(this._url, L.extend(data, this.options));
        },

        _tileOnLoad: function (done, tile) {
            // For https://github.com/Leaflet/Leaflet/issues/3332
            if (L.Browser.ielt9) {
                setTimeout(L.bind(done, this, null, tile), 0);
            } else {
                done(null, tile);
            }
        },

        _tileOnError: function (done, tile, e) {
            var errorUrl = this.options.errorTileUrl;
            if (errorUrl) {
                tile.src = errorUrl;
            }
            done(e, tile);
        },

        getTileSize: function () {
            var map = this._map,
                tileSize = L.GridLayer.prototype.getTileSize.call(this),
                zoom = this._tileZoom + this.options.zoomOffset,
                zoomN = this.options.maxNativeZoom;

            // increase tile size when overscaling
            return zoomN !== null && zoom > zoomN ?
                tileSize.divideBy(map.getZoomScale(zoomN, zoom)).round() :
                tileSize;
        },

        _onTileRemove: function (e) {
            e.tile.onload = null;
        },

        _getZoomForUrl: function () {

            var options = this.options,
                zoom = this._tileZoom;

            if (options.zoomReverse) {
                zoom = options.maxZoom - zoom;
            }

            zoom += options.zoomOffset;

            return options.maxNativeZoom !== null ? Math.min(zoom, options.maxNativeZoom) : zoom;
        },

        _getSubdomain: function (tilePoint) {
            var index = Math.abs(tilePoint.x + tilePoint.y) % this.options.subdomains.length;
            return this.options.subdomains[index];
        },

        // stops loading all tiles in the background layer
        _abortLoading: function () {
            var i, tile;
            for (i in this._tiles) {
                if (this._tiles[i].coords.z !== this._tileZoom) {
                    tile = this._tiles[i].el;

                    tile.onload = L.Util.falseFn;
                    tile.onerror = L.Util.falseFn;

                    if (!tile.complete) {
                        tile.src = L.Util.emptyImageUrl;
                        L.DomUtil.remove(tile);
                    }
                }
            }
        }
    });


// @factory L.tilelayer(urlTemplate: String, options? TileLayer options)
// Instantiates a tile layer object given a `URL template` and optionally an options object.

    L.tileLayer = function (url, options) {
        return new L.TileLayer(url, options);
    };



    /*
     * @class TileLayer.WMS
     * @inherits TileLayer
     * @aka L.TileLayer.WMS
     * Used to display WMS services as tile layers on the map. Extends `TileLayer`.
     *
     * @example
     *
     * ```js
     * var nexrad = L.tileLayer.wms("http://mesonet.agron.iastate.edu/cgi-bin/wms/nexrad/n0r.cgi", {
     * 	layers: 'nexrad-n0r-900913',
     * 	format: 'image/png',
     * 	transparent: true,
     * 	attribution: "Weather data ? 2012 IEM Nexrad"
     * });
     * ```
     */

    L.TileLayer.WMS = L.TileLayer.extend({

        // @section
        // @aka TileLayer.WMS options
        defaultWmsParams: {
            service: 'WMS',
            request: 'GetMap',

            // @option layers: String = ''
            // **(required)** Comma-separated list of WMS layers to show.
            layers: '',

            // @option styles: String = ''
            // Comma-separated list of WMS styles.
            styles: '',

            // @option format: String = 'image/jpeg'
            // WMS image format (use `'image/png'` for layers with transparency).
            format: 'image/jpeg',

            // @option transparent: Boolean = false
            // If `true`, the WMS service will return images with transparency.
            transparent: false,

            // @option version: String = '1.1.1'
            // Version of the WMS service to use
            version: '1.1.1'
        },

        options: {
            // @option crs: CRS = null
            // Coordinate Reference System to use for the WMS requests, defaults to
            // map CRS. Don't change this if you're not sure what it means.
            crs: null,

            // @option uppercase: Boolean = false
            // If `true`, WMS request parameter keys will be uppercase.
            uppercase: false
        },

        initialize: function (url, options) {

            this._url = url;

            var wmsParams = L.extend({}, this.defaultWmsParams);

            // all keys that are not TileLayer options go to WMS params
            for (var i in options) {
                if (!(i in this.options)) {
                    wmsParams[i] = options[i];
                }
            }

            options = L.setOptions(this, options);

            wmsParams.width = wmsParams.height = options.tileSize * (options.detectRetina && L.Browser.retina ? 2 : 1);

            this.wmsParams = wmsParams;
        },

        onAdd: function (map) {

            this._crs = this.options.crs || map.options.crs;
            this._wmsVersion = parseFloat(this.wmsParams.version);

            var projectionKey = this._wmsVersion >= 1.3 ? 'crs' : 'srs';
            this.wmsParams[projectionKey] = this._crs.code;

            L.TileLayer.prototype.onAdd.call(this, map);
        },

        getTileUrl: function (coords) {

            var tileBounds = this._tileCoordsToBounds(coords),
                nw = this._crs.project(tileBounds.getNorthWest()),
                se = this._crs.project(tileBounds.getSouthEast()),

                bbox = (this._wmsVersion >= 1.3 && this._crs === L.CRS.EPSG4326 ?
                    [se.y, nw.x, nw.y, se.x] :
                    [nw.x, se.y, se.x, nw.y]).join(','),

                url = L.TileLayer.prototype.getTileUrl.call(this, coords);

            return url +
                L.Util.getParamString(this.wmsParams, url, this.options.uppercase) +
                (this.options.uppercase ? '&BBOX=' : '&bbox=') + bbox;
        },

        // @method setParams(params: Object, noRedraw?: Boolean): this
        // Merges an object with the new parameters and re-requests tiles on the current screen (unless `noRedraw` was set to true).
        setParams: function (params, noRedraw) {

            L.extend(this.wmsParams, params);

            if (!noRedraw) {
                this.redraw();
            }

            return this;
        }
    });


// @factory L.tileLayer.wms(baseUrl: String, options: TileLayer.WMS options)
// Instantiates a WMS tile layer object given a base URL of the WMS service and a WMS parameters/options object.
    L.tileLayer.wms = function (url, options) {
        return new L.TileLayer.WMS(url, options);
    };



    /*
     * @class ImageOverlay
     * @aka L.ImageOverlay
     * @inherits Layer
     *
     * Used to load and display a single image over specific bounds of the map. Extends `Layer`.
     *
     * @example
     *
     * ```js
     * var imageUrl = 'http://www.lib.utexas.edu/maps/historical/newark_nj_1922.jpg',
     * 	imageBounds = [[40.712216, -74.22655], [40.773941, -74.12544]];
     * L.imageOverlay(imageUrl, imageBounds).addTo(map);
     * ```
     */

    L.ImageOverlay = L.Layer.extend({

        options: {
            // @option opacity: Number = 1.0
            // The opacity of the image overlay.
            opacity: 1,

            // @option alt: String = ''
            // Text for the `alt` attribute of the image (useful for accessibility).
            alt: '',

            // @option interactive: Boolean = false
            // If `true`, the image overlay will emit mouse events when clicked or hovered.
            interactive: false,

            // @option attribution: String = null
            // An optional string containing HTML to be shown on the `Attribution control`
            attribution: null

            // @option crossOrigin: Boolean = false
            // If true, the image will have its crossOrigin attribute set to ''. This is needed if you want to access image pixel data.

            // crossOrigin: false,
        },

        initialize: function (url, bounds, options) { // (String, LatLngBounds, Object)
            this._url = url;
            this._bounds = L.latLngBounds(bounds);

            L.setOptions(this, options);
        },

        onAdd: function () {
            if (!this._image) {
                this._initImage();

                if (this.options.opacity < 1) {
                    this._updateOpacity();
                }
            }

            if (this.options.interactive) {
                L.DomUtil.addClass(this._image, 'leaflet-interactive');
                this.addInteractiveTarget(this._image);
            }

            this.getPane().appendChild(this._image);
            this._reset();
        },

        onRemove: function () {
            L.DomUtil.remove(this._image);
            if (this.options.interactive) {
                this.removeInteractiveTarget(this._image);
            }
        },

        // @method setOpacity(): this
        // Sets the opacity of the overlay.
        setOpacity: function (opacity) {
            this.options.opacity = opacity;

            if (this._image) {
                this._updateOpacity();
            }
            return this;
        },

        setStyle: function (styleOpts) {
            if (styleOpts.opacity) {
                this.setOpacity(styleOpts.opacity);
            }
            return this;
        },

        // @method bringToFront(): this
        // Brings the layer to the top of all overlays.
        bringToFront: function () {
            if (this._map) {
                L.DomUtil.toFront(this._image);
            }
            return this;
        },

        // @method bringToBack(): this
        // Brings the layer to the bottom of all overlays.
        bringToBack: function () {
            if (this._map) {
                L.DomUtil.toBack(this._image);
            }
            return this;
        },

        // @method setUrl(url: String): this
        // Changes the URL of the image.
        setUrl: function (url) {
            this._url = url;

            if (this._image) {
                this._image.src = url;
            }
            return this;
        },

        setBounds: function (bounds) {
            this._bounds = bounds;

            if (this._map) {
                this._reset();
            }
            return this;
        },

        getAttribution: function () {
            return this.options.attribution;
        },

        getEvents: function () {
            var events = {
                zoom: this._reset,
                viewreset: this._reset
            };

            if (this._zoomAnimated) {
                events.zoomanim = this._animateZoom;
            }

            return events;
        },

        getBounds: function () {
            return this._bounds;
        },

        getElement: function () {
            return this._image;
        },

        _initImage: function () {
            var img = this._image = L.DomUtil.create('img',
                'leaflet-image-layer ' + (this._zoomAnimated ? 'leaflet-zoom-animated' : ''));

            img.onselectstart = L.Util.falseFn;
            img.onmousemove = L.Util.falseFn;

            img.onload = L.bind(this.fire, this, 'load');

            if (this.options.crossOrigin) {
                img.crossOrigin = '';
            }

            img.src = this._url;
            img.alt = this.options.alt;
        },

        _animateZoom: function (e) {
            var scale = this._map.getZoomScale(e.zoom),
                offset = this._map._latLngToNewLayerPoint(this._bounds.getNorthWest(), e.zoom, e.center);

            L.DomUtil.setTransform(this._image, offset, scale);
        },

        _reset: function () {
            var image = this._image,
                bounds = new L.Bounds(
                    this._map.latLngToLayerPoint(this._bounds.getNorthWest()),
                    this._map.latLngToLayerPoint(this._bounds.getSouthEast())),
                size = bounds.getSize();

            L.DomUtil.setPosition(image, bounds.min);

            image.style.width  = size.x + 'px';
            image.style.height = size.y + 'px';
        },

        _updateOpacity: function () {
            L.DomUtil.setOpacity(this._image, this.options.opacity);
        }
    });

// @factory L.imageOverlay(imageUrl: String, bounds: LatLngBounds, options?: ImageOverlay options)
// Instantiates an image overlay object given the URL of the image and the
// geographical bounds it is tied to.
    L.imageOverlay = function (url, bounds, options) {
        return new L.ImageOverlay(url, bounds, options);
    };



    /*
     * @class Icon
     * @aka L.Icon
     * @inherits Layer
     *
     * Represents an icon to provide when creating a marker.
     *
     * @example
     *
     * ```js
     * var myIcon = L.icon({
     *     iconUrl: 'my-icon.png',
     *     iconRetinaUrl: 'my-icon@2x.png',
     *     iconSize: [38, 95],
     *     iconAnchor: [22, 94],
     *     popupAnchor: [-3, -76],
     *     shadowUrl: 'my-icon-shadow.png',
     *     shadowRetinaUrl: 'my-icon-shadow@2x.png',
     *     shadowSize: [68, 95],
     *     shadowAnchor: [22, 94]
     * });
     *
     * L.marker([50.505, 30.57], {icon: myIcon}).addTo(map);
     * ```
     *
     * `L.Icon.Default` extends `L.Icon` and is the blue icon Leaflet uses for markers by default.
     *
     */

    L.Icon = L.Class.extend({

        /* @section
         * @aka Icon options
         *
         * @option iconUrl: String = null
         * **(required)** The URL to the icon image (absolute or relative to your script path).
         *
         * @option iconRetinaUrl: String = null
         * The URL to a retina sized version of the icon image (absolute or relative to your
         * script path). Used for Retina screen devices.
         *
         * @option iconSize: Point = null
         * Size of the icon image in pixels.
         *
         * @option iconAnchor: Point = null
         * The coordinates of the "tip" of the icon (relative to its top left corner). The icon
         * will be aligned so that this point is at the marker's geographical location. Centered
         * by default if size is specified, also can be set in CSS with negative margins.
         *
         * @option popupAnchor: Point = null
         * The coordinates of the point from which popups will "open", relative to the icon anchor.
         *
         * @option shadowUrl: String = null
         * The URL to the icon shadow image. If not specified, no shadow image will be created.
         *
         * @option shadowRetinaUrl: String = null
         *
         * @option shadowSize: Point = null
         * Size of the shadow image in pixels.
         *
         * @option shadowAnchor: Point = null
         * The coordinates of the "tip" of the shadow (relative to its top left corner) (the same
         * as iconAnchor if not specified).
         *
         * @option className: String = ''
         * A custom class name to assign to both icon and shadow images. Empty by default.
         */

        initialize: function (options) {
            L.setOptions(this, options);
        },

        // @method createIcon(oldIcon?: HTMLElement): HTMLElement
        // Called internally when the icon has to be shown, returns a `<img>` HTML element
        // styled according to the options.
        createIcon: function (oldIcon) {
            return this._createIcon('icon', oldIcon);
        },

        // @method createShadow(oldIcon?: HTMLElement): HTMLElement
        // As `createIcon`, but for the shadow beneath it.
        createShadow: function (oldIcon) {
            return this._createIcon('shadow', oldIcon);
        },

        _createIcon: function (name, oldIcon) {
            var src = this._getIconUrl(name);

            if (!src) {
                if (name === 'icon') {
                    throw new Error('iconUrl not set in Icon options (see the docs).');
                }
                return null;
            }

            var img = this._createImg(src, oldIcon && oldIcon.tagName === 'IMG' ? oldIcon : null);
            this._setIconStyles(img, name);

            return img;
        },

        _setIconStyles: function (img, name) {
            var options = this.options,
                size = L.point(options[name + 'Size']),
                anchor = L.point(name === 'shadow' && options.shadowAnchor || options.iconAnchor ||
                    size && size.divideBy(2, true));

            img.className = 'leaflet-marker-' + name + ' ' + (options.className || '');

            if (anchor) {
                img.style.marginLeft = (-anchor.x) + 'px';
                img.style.marginTop  = (-anchor.y) + 'px';
            }

            if (size) {
                img.style.width  = size.x + 'px';
                img.style.height = size.y + 'px';
            }
        },

        _createImg: function (src, el) {
            el = el || document.createElement('img');
            el.src = src;
            return el;
        },

        _getIconUrl: function (name) {
            return L.Browser.retina && this.options[name + 'RetinaUrl'] || this.options[name + 'Url'];
        }
    });


// @factory L.icon(options: Icon options)
// Creates an icon instance with the given options.
    L.icon = function (options) {
        return new L.Icon(options);
    };



    /*
     * L.Icon.Default is the blue marker icon used by default in Leaflet.
     */

    L.Icon.Default = L.Icon.extend({

        options: {
            iconSize:    [25, 41],
            iconAnchor:  [12, 41],
            popupAnchor: [1, -34],
            shadowSize:  [41, 41]
        },

        _getIconUrl: function (name) {
            var key = name + 'Url';

            if (this.options[key]) {
                return this.options[key];
            }

            var path = L.Icon.Default.imagePath;

            if (!path) {
                throw new Error('Couldn\'t autodetect L.Icon.Default.imagePath, set it manually.');
            }

            return path + '/marker-' + name + (L.Browser.retina && name === 'icon' ? '-2x' : '') + '.png';
        }
    });

    L.Icon.Default.imagePath = (function () {
        var scripts = document.getElementsByTagName('script'),
            leafletRe = /[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;

        var i, len, src, path;

        for (i = 0, len = scripts.length; i < len; i++) {
            src = scripts[i].src || '';

            if (src.match(leafletRe)) {
                path = src.split(leafletRe)[0];
                return (path ? path + '/' : '') + 'images';
            }
        }
    }());



    /*
     * @class Marker
     * @inherits Layer
     * @aka L.Marker
     * L.Marker is used to display clickable/draggable icons on the map. Extends `Layer`.
     *
     * @example
     *
     * ```js
     * L.marker([50.5, 30.5]).addTo(map);
     * ```
     */

    L.Marker = L.Layer.extend({

        options: {
            // @option icon: L.Icon = *
            // Icon class to use for rendering the marker. See [Icon documentation](#L.Icon) for details on how to customize the marker icon. Set to new `L.Icon.Default()` by default.
            icon: new L.Icon.Default(),

            // @option interactive: Boolean = true
            // If `false`, the marker will not emit mouse events and will act as a part of the underlying map.
            interactive: true,

            // @option draggable: Boolean = false
            // Whether the marker is draggable with mouse/touch or not.
            draggable: false,

            // @option keyboard: Boolean = true
            // Whether the marker can be tabbed to with a keyboard and clicked by pressing enter.
            keyboard: true,

            // @option title: String = ''
            // Text for the browser tooltip that appear on marker hover (no tooltip by default).
            title: '',

            // @option alt: String = ''
            // Text for the `alt` attribute of the icon image (useful for accessibility).
            alt: '',

            // @option zIndexOffset: Number = 0
            // By default, marker images zIndex is set automatically based on its latitude. Use this option if you want to put the marker on top of all others (or below), specifying a high value like `1000` (or high negative value, respectively).
            zIndexOffset: 0,

            // @option opacity: Number = 1.0
            // The opacity of the marker.
            opacity: 1,

            // @option riseOnHover: Boolean = false
            // If `true`, the marker will get on top of others when you hover the mouse over it.
            riseOnHover: false,

            // @option riseOffset: Number = 250
            // The z-index offset used for the `riseOnHover` feature.
            riseOffset: 250,

            // @option pane: String = 'markerPane'
            // `Map pane` where the markers icon will be added.
            pane: 'markerPane',

            // FIXME: shadowPane is no longer a valid option
            nonBubblingEvents: ['click', 'dblclick', 'mouseover', 'mouseout', 'contextmenu']
        },

        /* @section
         *
         * You can subscribe to the following events using [these methods](#evented-method).
         *
         * @event click: MouseEvent
         * Fired when the user clicks (or taps) the marker.
         *
         * @event dblclick: MouseEvent
         * Fired when the user double-clicks (or double-taps) the marker.
         *
         * @event mousedown: MouseEvent
         * Fired when the user pushes the mouse button on the marker.
         *
         * @event mouseover: MouseEvent
         * Fired when the mouse enters the marker.
         *
         * @event mouseout: MouseEvent
         * Fired when the mouse leaves the marker.
         *
         * @event contextmenu: MouseEvent
         * Fired when the user right-clicks on the marker.
         */



        /* @section
         *
         * In addition to [shared layer methods](#Layer) like `addTo()` and `remove()` and [popup methods](#Popup) like bindPopup() you can also use the following methods:
         */

        initialize: function (latlng, options, data) {
            L.setOptions(this, options);
            this._latlng = L.latLng(latlng);
            this._data = data;
        },

        onAdd: function (map) {
            this._zoomAnimated = this._zoomAnimated && map.options.markerZoomAnimation;

            this._initIcon();
            this.update();
        },

        onRemove: function () {
            if (this.dragging && this.dragging.enabled()) {
                this.options.draggable = true;
                this.dragging.removeHooks();
            }

            this._removeIcon();
            this._removeShadow();
        },

        getEvents: function () {
            var events = {
                zoom: this.update,
                viewreset: this.update
            };

            if (this._zoomAnimated) {
                events.zoomanim = this._animateZoom;
            }

            return events;
        },

        // @method getLatLng: LatLng
        // Returns the current geographical position of the marker.
        getLatLng: function () {
            return this._latlng;
        },

        // @method setLatLng(latlng: LatLng): this
        // Changes the marker position to the given point.
        setLatLng: function (latlng) {
            var oldLatLng = this._latlng;
            this._latlng = L.latLng(latlng);
            this.update();

            // @event move: Event
            // Fired when the marker is moved via [`setLatLng`](#marker-setlatlng) or by [dragging](#marker-dragging). Old and new coordinates are included in event arguments as `oldLatLng`, `latlng`.
            return this.fire('move', {oldLatLng: oldLatLng, latlng: this._latlng});
        },

        // @method setZIndexOffset(offset: Number): this
        // Changes the [zIndex offset](#marker-zindexoffset) of the marker.
        setZIndexOffset: function (offset) {
            this.options.zIndexOffset = offset;
            return this.update();
        },

        // @method setIcon(icon: Icon): this
        // Changes the marker icon.
        setIcon: function (icon) {

            this.options.icon = icon;

            if (this._map) {
                this._initIcon();
                this.update();
            }

            if (this._popup) {
                this.bindPopup(this._popup, this._popup.options);
            }

            return this;
        },

        getElement: function () {
            return this._icon;
        },

        update: function () {

            if (this._icon) {
                var pos = this._map.latLngToLayerPoint(this._latlng).round();
                this._setPos(pos);
            }

            return this;
        },

        _initIcon: function () {
            var options = this.options,
                classToAdd = 'leaflet-zoom-' + (this._zoomAnimated ? 'animated' : 'hide');

            var icon = options.icon.createIcon(this._icon),
                addIcon = false;

            // if we're not reusing the icon, remove the old one and init new one
            if (icon !== this._icon) {
                if (this._icon) {
                    this._removeIcon();
                }
                addIcon = true;

                if (options.title) {
                    icon.title = options.title;
                }
                if (options.alt) {
                    icon.alt = options.alt;
                }
            }

            L.DomUtil.addClass(icon, classToAdd);

            if (options.keyboard) {
                icon.tabIndex = '0';
            }

            this._icon = icon;

            if (options.riseOnHover) {
                this.on({
                    mouseover: this._bringToFront,
                    mouseout: this._resetZIndex
                });
            }

            var newShadow = options.icon.createShadow(this._shadow),
                addShadow = false;

            if (newShadow !== this._shadow) {
                this._removeShadow();
                addShadow = true;
            }

            if (newShadow) {
                L.DomUtil.addClass(newShadow, classToAdd);
            }
            this._shadow = newShadow;


            if (options.opacity < 1) {
                this._updateOpacity();
            }


            if (addIcon) {
                this.getPane().appendChild(this._icon);
            }
            this._initInteraction();
            if (newShadow && addShadow) {
                this.getPane('shadowPane').appendChild(this._shadow);
            }
        },

        _removeIcon: function () {
            if (this.options.riseOnHover) {
                this.off({
                    mouseover: this._bringToFront,
                    mouseout: this._resetZIndex
                });
            }

            L.DomUtil.remove(this._icon);
            this.removeInteractiveTarget(this._icon);

            this._icon = null;
        },

        _removeShadow: function () {
            if (this._shadow) {
                L.DomUtil.remove(this._shadow);
            }
            this._shadow = null;
        },

        _setPos: function (pos) {
            L.DomUtil.setPosition(this._icon, pos);

            if (this._shadow) {
                L.DomUtil.setPosition(this._shadow, pos);
            }

            this._zIndex = pos.y + this.options.zIndexOffset;

            this._resetZIndex();
        },

        _updateZIndex: function (offset) {
            this._icon.style.zIndex = this._zIndex + offset;
        },

        _animateZoom: function (opt) {
            var pos = this._map._latLngToNewLayerPoint(this._latlng, opt.zoom, opt.center).round();

            this._setPos(pos);
        },

        _initInteraction: function () {

            if (!this.options.interactive) { return; }

            L.DomUtil.addClass(this._icon, 'leaflet-interactive');

            this.addInteractiveTarget(this._icon);

            if (L.Handler.MarkerDrag) {
                var draggable = this.options.draggable;
                if (this.dragging) {
                    draggable = this.dragging.enabled();
                    this.dragging.disable();
                }

                this.dragging = new L.Handler.MarkerDrag(this);

                if (draggable) {
                    this.dragging.enable();
                }
            }
        },

        // @method setOpacity(opacity: Number): this
        // Changes the opacity of the marker.
        setOpacity: function (opacity) {
            this.options.opacity = opacity;
            if (this._map) {
                this._updateOpacity();
            }

            return this;
        },

        _updateOpacity: function () {
            var opacity = this.options.opacity;

            L.DomUtil.setOpacity(this._icon, opacity);

            if (this._shadow) {
                L.DomUtil.setOpacity(this._shadow, opacity);
            }
        },

        _bringToFront: function () {
            this._updateZIndex(this.options.riseOffset);
        },

        _resetZIndex: function () {
            this._updateZIndex(0);
        }
    });


// factory L.marker(latlng: LatLng, options? : Marker options)

// @factory L.marker(latlng: LatLng, options? : Marker options)
// Instantiates a Marker object given a geographical point and optionally an options object.
    L.marker = function (latlng, options, data) {
        return new L.Marker(latlng, options, data);
    };



    /*
     * @class DivIcon
     * @aka L.DivIcon
     * @inherits Icon
     *
     * Represents a lightweight icon for markers that uses a simple `<div>`
     * element instead of an image. Inherits from `Icon` but ignores the `iconUrl` and shadow options.
     *
     * @example
     * ```js
     * var myIcon = L.divIcon({className: 'my-div-icon'});
     * // you can set .my-div-icon styles in CSS
     *
     * L.marker([50.505, 30.57], {icon: myIcon}).addTo(map);
     * ```
     *
     * By default, it has a 'leaflet-div-icon' CSS class and is styled as a little white square with a shadow.
     */

    L.DivIcon = L.Icon.extend({
        options: {
            // @section
            // @aka DivIcon options
            iconSize: [12, 12], // also can be set through CSS

            // iconAnchor: (Point),
            // popupAnchor: (Point),

            // @option html: String = ''
            // Custom HTML code to put inside the div element, empty by default.
            html: false,

            // @option bgPos: Point = [0, 0]
            // Optional relative position of the background, in pixels
            bgPos: null,

            className: 'leaflet-div-icon'
        },

        createIcon: function (oldIcon) {
            var div = (oldIcon && oldIcon.tagName === 'DIV') ? oldIcon : document.createElement('div'),
                options = this.options;

            div.innerHTML = options.html !== false ? options.html : '';

            if (options.bgPos) {
                var bgPos = L.point(options.bgPos);
                div.style.backgroundPosition = (-bgPos.x) + 'px ' + (-bgPos.y) + 'px';
            }
            this._setIconStyles(div, 'icon');

            return div;
        },

        createShadow: function () {
            return null;
        }
    });

// @factory L.divIcon(options: DivIcon options)
// Creates a `DivIcon` instance with the given options.
    L.divIcon = function (options) {
        return new L.DivIcon(options);
    };



    /*
     * @class Popup
     * @inherits Layer
     * @aka L.Popup
     * Used to open popups in certain places of the map. Use [Map.openPopup](#map-openpopup) to
     * open popups while making sure that only one popup is open at one time
     * (recommended for usability), or use [Map.addLayer](#map-addlayer) to open as many as you want.
     *
     * @example
     *
     * If you want to just bind a popup to marker click and then open it, it's really easy:
     *
     * ```js
     * marker.bindPopup(popupContent).openPopup();
     * ```
     * Path overlays like polylines also have a `bindPopup` method.
     * Here's a more complicated way to open a popup on a map:
     *
     * ```js
     * var popup = L.popup()
     * 	.setLatLng(latlng)
     * 	.setContent('<p>Hello world!<br />This is a nice popup.</p>')
     * 	.openOn(map);
     * ```
     */


    /* @namespace Map
     * @section Interaction Options
     * @option closePopupOnClick: Boolean = true
     * Set it to `false` if you don't want popups to close when user clicks the map.
     */
    L.Map.mergeOptions({
        closePopupOnClick: true
    });

// @namespace Popup
    L.Popup = L.Layer.extend({

        // @section
        // @aka Popup options
        options: {
            // @option maxWidth: Number = 300
            // Max width of the popup, in pixels.
            maxWidth: 300,

            // @option minWidth: Number = 50
            // Min width of the popup, in pixels.
            minWidth: 50,

            // @option maxHeight: Number = null
            // If set, creates a scrollable container of the given height
            // inside a popup if its content exceeds it.
            maxHeight: null,

            // @option autoPan: Boolean = true
            // Set it to `false` if you don't want the map to do panning animation
            // to fit the opened popup.
            autoPan: true,

            // @option autoPanPaddingTopLeft: Point = null
            // The margin between the popup and the top left corner of the map
            // view after autopanning was performed.
            autoPanPaddingTopLeft: null,

            // @option autoPanPaddingBottomRight: Point = null
            // The margin between the popup and the bottom right corner of the map
            // view after autopanning was performed.
            autoPanPaddingBottomRight: null,

            // @option autoPanPadding: Point = Point(5, 5)
            // Equivalent of setting both top left and bottom right autopan padding to the same value.
            autoPanPadding: [5, 5],

            // @option keepInView: Boolean = false
            // Set it to `true` if you want to prevent users from panning the popup
            // off of the screen while it is open.
            keepInView: false,

            // @option closeButton: Boolean = true
            // Controls the presence of a close button in the popup.
            closeButton: true,

            // @option offset: Point = Point(0, 7)
            // The offset of the popup position. Useful to control the anchor
            // of the popup when opening it on some overlays.
            offset: [0, 7],

            // @option autoClose: Boolean = true
            // Set it to `false` if you want to override the default behavior of
            // the popup closing when user clicks the map (set globally by
            // the Map's [closePopupOnClick](#map-closepopuponclick) option).
            autoClose: true,

            // @option zoomAnimation: Boolean = true
            // Whether to animate the popup on zoom. Disable it if you have
            // problems with Flash content inside popups.
            zoomAnimation: true,

            // @option className: String = ''
            // A custom CSS class name to assign to the popup.
            className: '',

            // @option pane: String = 'popupPane'
            // `Map pane` where the popup will be added.
            pane: 'popupPane'
        },

        initialize: function (options, source) {
            L.setOptions(this, options);

            this._source = source;
        },

        onAdd: function (map) {
            this._zoomAnimated = this._zoomAnimated && this.options.zoomAnimation;

            if (!this._container) {
                this._initLayout();
            }

            if (map._fadeAnimated) {
                L.DomUtil.setOpacity(this._container, 0);
            }

            clearTimeout(this._removeTimeout);
            this.getPane().appendChild(this._container);
            this.update();

            if (map._fadeAnimated) {
                L.DomUtil.setOpacity(this._container, 1);
            }

            // @namespace Map
            // @section Popup events
            // @event popupopen: PopupEvent
            // Fired when a popup is opened in the map
            map.fire('popupopen', {popup: this});

            if (this._source) {
                // @namespace Layer
                // @section Popup events
                // @event popupopen: PopupEvent
                // Fired when a popup bound to this layer is opened
                this._source.fire('popupopen', {popup: this}, true);
                this._source.on('preclick', L.DomEvent.stopPropagation);
            }
        },

        // @namespace Popup
        // @method openOn(map: Map): this
        // Adds the popup to the map and closes the previous one. The same as `map.openPopup(popup)`.
        openOn: function (map) {
            map.openPopup(this);
            return this;
        },

        onRemove: function (map) {
            if (map._fadeAnimated) {
                L.DomUtil.setOpacity(this._container, 0);
                this._removeTimeout = setTimeout(L.bind(L.DomUtil.remove, L.DomUtil, this._container), 200);
            } else {
                L.DomUtil.remove(this._container);
            }

            // @namespace Map
            // @section Popup events
            // @event popupclose: PopupEvent
            // Fired when a popup in the map is closed
            map.fire('popupclose', {popup: this});

            if (this._source) {
                // @namespace Layer
                // @section Popup events
                // @event popupclose: PopupEvent
                // Fired when a popup bound to this layer is closed
                // @namespace Popup
                this._source.fire('popupclose', {popup: this}, true);
                this._source.off('preclick', L.DomEvent.stopPropagation);
            }
        },

        // @namespace Popup
        // @method getLatLng: LatLng
        // Returns the geographical point of popup.
        getLatLng: function () {
            return this._latlng;
        },

        // @method setLatLng(latlng: LatLng): this
        // Sets the geographical point where the popup will open.
        setLatLng: function (latlng) {
            this._latlng = L.latLng(latlng);
            if (this._map) {
                this._updatePosition();
                this._adjustPan();
            }
            return this;
        },

        // @method getContent: String|HTMLElement
        // Returns the content of the popup.
        getContent: function () {
            return this._content;
        },

        // @method setContent(htmlContent: String|HTMLElement|Function): this
        // Sets the HTML content of the popup. If a function is passed the source layer will be passed to the function. The function should return a `String` or `HTMLElement` to be used in the popup.
        setContent: function (content) {
            this._content = content;
            this.update();
            return this;
        },

        // @method getElement: String|HTMLElement
        // Alias for [getContent()](#popup-getcontent)
        getElement: function () {
            return this._container;
        },

        // @method update: null
        // Updates the popup content, layout and position. Useful for updating the popup after something inside changed, e.g. image loaded.
        update: function () {
            if (!this._map) { return; }

            this._container.style.visibility = 'hidden';

            this._updateContent();
            this._updateLayout();
            this._updatePosition();

            this._container.style.visibility = '';

            this._adjustPan();
        },

        getEvents: function () {
            var events = {
                zoom: this._updatePosition,
                viewreset: this._updatePosition
            };

            if (this._zoomAnimated) {
                events.zoomanim = this._animateZoom;
            }
            if ('closeOnClick' in this.options ? this.options.closeOnClick : this._map.options.closePopupOnClick) {
                events.preclick = this._close;
            }
            if (this.options.keepInView) {
                events.moveend = this._adjustPan;
            }
            return events;
        },

        // @method isOpen: Boolean
        // Returns `true` when the popup is visible on the map.
        isOpen: function () {
            return !!this._map && this._map.hasLayer(this);
        },

        // @method bringToFront: this
        // Brings this popup in front of other popups (in the same map pane).
        bringToFront: function () {
            if (this._map) {
                L.DomUtil.toFront(this._container);
            }
            return this;
        },

        // @method bringToBack: this
        // Brings this popup to the back of other popups (in the same map pane).
        bringToBack: function () {
            if (this._map) {
                L.DomUtil.toBack(this._container);
            }
            return this;
        },

        _close: function () {
            if (this._map) {
                this._map.closePopup(this);
            }
        },

        _initLayout: function () {
            var prefix = 'leaflet-popup',
                container = this._container = L.DomUtil.create('div',
                    prefix + ' ' + (this.options.className || '') +
                    ' leaflet-zoom-' + (this._zoomAnimated ? 'animated' : 'hide'));

            if (this.options.closeButton) {
                var closeButton = this._closeButton = L.DomUtil.create('a', prefix + '-close-button', container);
                closeButton.href = '#close';
                closeButton.innerHTML = '&#215;';

                L.DomEvent.on(closeButton, 'click', this._onCloseButtonClick, this);
            }

            var wrapper = this._wrapper = L.DomUtil.create('div', prefix + '-content-wrapper', container);
            this._contentNode = L.DomUtil.create('div', prefix + '-content', wrapper);

            L.DomEvent
                .disableClickPropagation(wrapper)
                .disableScrollPropagation(this._contentNode)
                .on(wrapper, 'contextmenu', L.DomEvent.stopPropagation);

            this._tipContainer = L.DomUtil.create('div', prefix + '-tip-container', container);
            this._tip = L.DomUtil.create('div', prefix + '-tip', this._tipContainer);
        },

        _updateContent: function () {
            if (!this._content) { return; }

            var node = this._contentNode;
            var content = (typeof this._content === 'function') ? this._content(this._source || this) : this._content;

            if (typeof content === 'string') {
                node.innerHTML = content;
            } else {
                while (node.hasChildNodes()) {
                    node.removeChild(node.firstChild);
                }
                node.appendChild(content);
            }
            this.fire('contentupdate');
        },

        _updateLayout: function () {
            var container = this._contentNode,
                style = container.style;

            style.width = '';
            style.whiteSpace = 'nowrap';

            var width = container.offsetWidth;
            width = Math.min(width, this.options.maxWidth);
            width = Math.max(width, this.options.minWidth);

            style.width = (width + 1) + 'px';
            style.whiteSpace = '';

            style.height = '';

            var height = container.offsetHeight,
                maxHeight = this.options.maxHeight,
                scrolledClass = 'leaflet-popup-scrolled';

            if (maxHeight && height > maxHeight) {
                style.height = maxHeight + 'px';
                L.DomUtil.addClass(container, scrolledClass);
            } else {
                L.DomUtil.removeClass(container, scrolledClass);
            }

            this._containerWidth = this._container.offsetWidth;
        },

        _updatePosition: function () {
            if (!this._map) { return; }

            var pos = this._map.latLngToLayerPoint(this._latlng),
                offset = L.point(this.options.offset);

            if (this._zoomAnimated) {
                L.DomUtil.setPosition(this._container, pos);
            } else {
                offset = offset.add(pos);
            }

            var bottom = this._containerBottom = -offset.y,
                left = this._containerLeft = -Math.round(this._containerWidth / 2) + offset.x;

            // bottom position the popup in case the height of the popup changes (images loading etc)
            this._container.style.bottom = bottom + 'px';
            this._container.style.left = left + 'px';
        },

        _animateZoom: function (e) {
            var pos = this._map._latLngToNewLayerPoint(this._latlng, e.zoom, e.center);
            L.DomUtil.setPosition(this._container, pos);
        },

        _adjustPan: function () {
            if (!this.options.autoPan || (this._map._panAnim && this._map._panAnim._inProgress)) { return; }

            var map = this._map,
                containerHeight = this._container.offsetHeight,
                containerWidth = this._containerWidth,
                layerPos = new L.Point(this._containerLeft, -containerHeight - this._containerBottom);

            if (this._zoomAnimated) {
                layerPos._add(L.DomUtil.getPosition(this._container));
            }

            var containerPos = map.layerPointToContainerPoint(layerPos),
                padding = L.point(this.options.autoPanPadding),
                paddingTL = L.point(this.options.autoPanPaddingTopLeft || padding),
                paddingBR = L.point(this.options.autoPanPaddingBottomRight || padding),
                size = map.getSize(),
                dx = 0,
                dy = 0;

            if (containerPos.x + containerWidth + paddingBR.x > size.x) { // right
                dx = containerPos.x + containerWidth - size.x + paddingBR.x;
            }
            if (containerPos.x - dx - paddingTL.x < 0) { // left
                dx = containerPos.x - paddingTL.x;
            }
            if (containerPos.y + containerHeight + paddingBR.y > size.y) { // bottom
                dy = containerPos.y + containerHeight - size.y + paddingBR.y;
            }
            if (containerPos.y - dy - paddingTL.y < 0) { // top
                dy = containerPos.y - paddingTL.y;
            }

            // @namespace Map
            // @section Popup events
            // @event autopanstart
            // Fired when the map starts autopanning when opening a popup.
            if (dx || dy) {
                map
                    .fire('autopanstart')
                    .panBy([dx, dy]);
            }
        },

        _onCloseButtonClick: function (e) {
            this._close();
            L.DomEvent.stop(e);
        }
    });

// @namespace Popup
// @factory L.popup(options?: Popup options, source?: Layer)
// Instantiates a Popup object given an optional `options` object that describes its appearance and location and an optional `source` object that is used to tag the popup with a reference to the Layer to which it refers.
    L.popup = function (options, source) {
        return new L.Popup(options, source);
    };


// @namespace Map
// @section Methods for Layers and Controls
    L.Map.include({
        // @method openPopup(popup: Popup): this
        // Opens the specified popup while closing the previously opened (to make sure only one is opened at one time for usability).
        // @alternative
        // @method openPopup(content: String|HTMLElement, latlng: LatLng, options?: Popup options): this
        // Creates a popup with the specified content and options and opens it in the given point on a map.
        openPopup: function (popup, latlng, options) {
            if (!(popup instanceof L.Popup)) {
                popup = new L.Popup(options).setContent(popup);
            }

            if (latlng) {
                popup.setLatLng(latlng);
            }

            if (this.hasLayer(popup)) {
                return this;
            }

            if (this._popup && this._popup.options.autoClose) {
                this.closePopup();
            }

            this._popup = popup;
            return this.addLayer(popup);
        },

        // @method closePopup(popup?: Popup): this
        // Closes the popup previously opened with [openPopup](#map-openpopup) (or the given one).
        closePopup: function (popup) {
            if (!popup || popup === this._popup) {
                popup = this._popup;
                this._popup = null;
            }
            if (popup) {
                this.removeLayer(popup);
            }
            return this;
        }
    });



    /*
     * @namespace Layer
     * @section Popup methods example
     *
     * All layers share a set of methods convenient for binding popups to it.
     *
     * ```js
     * var layer = L.Polygon(latlngs).bindPopup('Hi There!').addTo(map);
     * layer.openPopup();
     * layer.closePopup();
     * ```
     *
     * Popups will also be automatically opened when the layer is clicked on and closed when the layer is removed from the map or another popup is opened.
     */

// @section Popup methods
    L.Layer.include({

        // @method bindPopup(content: String|HTMLElement|Function|Popup, options?: Popup options): this
        // Binds a popup to the layer with the passed `content` and sets up the
        // neccessary event listeners. If a `Function` is passed it will receive
        // the layer as the first argument and should return a `String` or `HTMLElement`.
        bindPopup: function (content, options) {

            if (content instanceof L.Popup) {
                L.setOptions(content, options);
                this._popup = content;
                content._source = this;
            } else {
                if (!this._popup || options) {
                    this._popup = new L.Popup(options, this);
                }
                this._popup.setContent(content);
            }

            if (!this._popupHandlersAdded) {
                this.on({
                    click: this._openPopup,
                    remove: this.closePopup,
                    move: this._movePopup
                });
                this._popupHandlersAdded = true;
            }

            // save the originally passed offset
            this._originalPopupOffset = this._popup.options.offset;

            return this;
        },

        // @method unbindPopup(): this
        // Removes the popup previously bound with `bindPopup`.
        unbindPopup: function () {
            if (this._popup) {
                this.off({
                    click: this._openPopup,
                    remove: this.closePopup,
                    move: this._movePopup
                });
                this._popupHandlersAdded = false;
                this._popup = null;
            }
            return this;
        },

        // @method openPopup(latlng?: LatLng): this
        // Opens the bound popup at the specificed `latlng` or at the default popup anchor if no `latlng` is passed.
        openPopup: function (layer, latlng) {
            if (!(layer instanceof L.Layer)) {
                latlng = layer;
                layer = this;
            }

            if (layer instanceof L.FeatureGroup) {
                for (var id in this._layers) {
                    layer = this._layers[id];
                    break;
                }
            }

            if (!latlng) {
                latlng = layer.getCenter ? layer.getCenter() : layer.getLatLng();
            }

            if (this._popup && this._map) {
                // set the popup offset for this layer
                this._popup.options.offset = this._popupAnchor(layer);

                // set popup source to this layer
                this._popup._source = layer;

                // update the popup (content, layout, ect...)
                this._popup.update();

                // open the popup on the map
                this._map.openPopup(this._popup, latlng);
            }

            return this;
        },

        // @method closePopup(): this
        // Closes the popup bound to this layer if it is open.
        closePopup: function () {
            if (this._popup) {
                this._popup._close();
            }
            return this;
        },

        // @method closePopup(): this
        // Opens or closes the popup bound to this layer depending on its current state.
        togglePopup: function (target) {
            if (this._popup) {
                if (this._popup._map) {
                    this.closePopup();
                } else {
                    this.openPopup(target);
                }
            }
            return this;
        },

        // @method closePopup(): this
        // Returns `true` if the popup bound to this layer is currently open.
        isPopupOpen: function () {
            return this._popup.isOpen();
        },

        // @method setPopupContent(content: String|HTMLElement|Popup, options?: Popup options): this
        // Sets the content of the popup bound to this layer.
        setPopupContent: function (content) {
            if (this._popup) {
                this._popup.setContent(content);
            }
            return this;
        },

        // @method getPopup(): Popup
        // Returns the popup bound to this layer.
        getPopup: function () {
            return this._popup;
        },

        _openPopup: function (e) {
            var layer = e.layer || e.target;

            if (!this._popup) {
                return;
            }

            if (!this._map) {
                return;
            }

            // if this inherits from Path its a vector and we can just
            // open the popup at the new location
            if (layer instanceof L.Path) {
                this.openPopup(e.layer || e.target, e.latlng);
                return;
            }

            // otherwise treat it like a marker and figure out
            // if we should toggle it open/closed
            if (this._map.hasLayer(this._popup) && this._popup._source === layer) {
                this.closePopup();
            } else {
                this.openPopup(layer, e.latlng);
            }
        },

        _popupAnchor: function (layer) {
            // where shold we anchor the popup on this layer?
            var anchor = layer._getPopupAnchor ? layer._getPopupAnchor() : [0, 0];

            // add the users passed offset to that
            var offsetToAdd = this._originalPopupOffset || L.Popup.prototype.options.offset;

            // return the final point to anchor the popup
            return L.point(anchor).add(offsetToAdd);
        },

        _movePopup: function (e) {
            this._popup.setLatLng(e.latlng);
        }
    });



    /*
     * Popup extension to L.Marker, adding popup-related methods.
     */

    L.Marker.include({
        _getPopupAnchor: function () {
            return this.options.icon.options.popupAnchor || [0, 0];
        }
    });



    /*
     * @class LayerGroup
     * @aka L.LayerGroup
     * @inherits Layer
     *
     * Used to group several layers and handle them as one. If you add it to the map,
     * any layers added or removed from the group will be added/removed on the map as
     * well. Extends `Layer`.
     *
     * @example
     *
     * ```js
     * L.layerGroup([marker1, marker2])
     * 	.addLayer(polyline)
     * 	.addTo(map);
     * ```
     */

    L.LayerGroup = L.Layer.extend({

        initialize: function (layers) {
            this._layers = {};

            var i, len;

            if (layers) {
                for (i = 0, len = layers.length; i < len; i++) {
                    this.addLayer(layers[i]);
                }
            }
        },

        beforeAdd:function(map){
            this._renderer = map.getRenderer(this);
        },

        onAdd: function (map) {
            this._renderer._initGroup(this);
            this._renderer._addGroup(this);

            for (var i in this._layers) {
                map.addLayer(this._layers[i]);
            }
        },

        // @method addLayer(layer: Layer): this
        // Adds the given layer to the group.
        addLayer: function (layer) {
            var id = this.getLayerId(layer);

            this._layers[id] = layer;

            if (this._map) {
                layer._layerGroup = this;
                this._map.addLayer(layer);
            }

            return this;
        },

        // @method removeLayer(layer: Layer): this
        // Removes the given layer from the group.
        // @alternative
        // @method removeLayer(id: Number): this
        // Removes the layer with the given internal ID from the group.
        removeLayer: function (layer) {
            var id = layer in this._layers ? layer : this.getLayerId(layer);

            if (this._map && this._layers[id]) {
                this._map.removeLayer(this._layers[id]);
            }

            delete this._layers[id];

            return this;
        },

        // @method hasLayer(layer: Layer): Boolean
        // Returns `true` if the given layer is currently added to the group.
        hasLayer: function (layer) {
            return !!layer && (layer in this._layers || this.getLayerId(layer) in this._layers);
        },

        // @method clearLayers(): this
        // Removes all the layers from the group.
        clearLayers: function () {
            for (var i in this._layers) {
                this.removeLayer(this._layers[i]);
            }
            return this;
        },

        // @method invoke(methodName: string, …): this
        // Calls `methodName` on every layer contained in this group, passing any
        // additional parameters. Has no effect if the layers contained do not
        // implement `methodName`.
        invoke: function (methodName) {
            var args = Array.prototype.slice.call(arguments, 1),
                i, layer;

            for (i in this._layers) {
                layer = this._layers[i];

                if (layer[methodName]) {
                    layer[methodName].apply(layer, args);
                }
            }

            return this;
        },

        onRemove: function (map) {
            for (var i in this._layers) {
                map.removeLayer(this._layers[i]);
            }
        },

        // @method eachLayer(fn: Function, context?: Object): this
        // Iterates over the layers of the group, optionally specifying context of the iterator function.
        // ```js
        // group.eachLayer(function (layer) {
        // 	layer.bindPopup('Hello');
        // });
        // ```
        eachLayer: function (method, context) {
            for (var i in this._layers) {
                method.call(context, this._layers[i]);
            }
            return this;
        },

        // @method getLayer(id: Number): Layer
        // Returns the layer with the given internal ID.
        getLayer: function (id) {
            return this._layers[id];
        },

        // @method getLayers(): Layer[]
        // Returns an array of all the layers added to the group.
        getLayers: function () {
            var layers = [];

            for (var i in this._layers) {
                layers.push(this._layers[i]);
            }
            return layers;
        },

        // @method setZIndex(zIndex: Number): this
        // Calls `setZIndex` on every layer contained in this group, passing the z-index.
        setZIndex: function (zIndex) {
            return this.invoke('setZIndex', zIndex);
        },

        // @method getLayerId(layer: Layer): Number
        // Returns the internal ID for a layer
        getLayerId: function (layer) {
            return L.stamp(layer);
        }
    });


// @factory L.layerGroup(layers: Layer[])
// Create a layer group, optionally given an initial set of layers.
    L.layerGroup = function (layers) {
        return new L.LayerGroup(layers);
    };

    /*
     * @class FeatureGroup
     * @aka L.FeatureGroup
     * @inherits LayerGroup
     *
     * Extended `LayerGroup` that also has mouse events (propagated from members of the group) and a shared bindPopup method.
     *
     * @example
     *
     * ```js
     * L.featureGroup([marker1, marker2, polyline])
     * 	.bindPopup('Hello world!')
     * 	.on('click', function() { alert('Clicked on a group!'); })
     * 	.addTo(map);
     * ```
     */

    L.FeatureGroup = L.LayerGroup.extend({

        addLayer: function (layer) {
            if (this.hasLayer(layer)) {
                return this;
            }

            layer.addEventParent(this);

            L.LayerGroup.prototype.addLayer.call(this, layer);

            return this.fire('layeradd', {layer: layer});
        },

        removeLayer: function (layer) {
            if (!this.hasLayer(layer)) {
                return this;
            }
            if (layer in this._layers) {
                layer = this._layers[layer];
            }

            layer.removeEventParent(this);

            L.LayerGroup.prototype.removeLayer.call(this, layer);

            return this.fire('layerremove', {layer: layer});
        },

        // @method setStyle(style: Path options): this
        // Sets the given path options to each layer of the group that has a `setStyle` method.
        setStyle: function (style) {
            return this.invoke('setStyle', style);
        },

        // @method bringToFront(): this
        // Brings the layer group to the top of all other layers
        bringToFront: function () {
            return this.invoke('bringToFront');
        },

        // @method bringToBack(): this
        // Brings the layer group to the top of all other layers
        bringToBack: function () {
            return this.invoke('bringToBack');
        },

        // @method getBounds(): LatLngBounds
        // Returns the LatLngBounds of the Feature Group (created from bounds and coordinates of its children).
        getBounds: function () {
            var bounds = new L.LatLngBounds();

            for (var id in this._layers) {
                var layer = this._layers[id];
                bounds.extend(layer.getBounds ? layer.getBounds() : layer.getLatLng());
            }
            return bounds;
        }
    });

// @factory L.featureGroup(layers: Layer[])
// Create a feature group, optionally given an initial set of layers.
    L.featureGroup = function (layers) {
        return new L.FeatureGroup(layers);
    };



    /*
     * @class Renderer
     * @inherits Layer
     * @aka L.Renderer
     *
     * Base class for vector renderer implementations (`SVG`, `Canvas`). Handles the
     * DOM container of the renderer, its bounds, and its zoom animation.
     *
     * A `Renderer` works as an implicit layer group for all `Path`s - the renderer
     * itself can be added or removed to the map. All paths use a renderer, which can
     * be implicit (the map will decide the type of renderer and use it automatically)
     * or explicit (using the [`renderer`](#path-renderer) option of the path).
     *
     * Do not use this class directly, use `SVG` and `Canvas` instead.
     *
     */

    L.Renderer = L.Layer.extend({

        options: {
            // @option padding: Number = 0.1
            // How much to extend the clip area around the map view (relative to its size)
            // e.g. 0.1 would be 10% of map view in each direction
            padding: 0.1
        },

        initialize: function (options) {
            L.setOptions(this, options);
            L.stamp(this);
        },

        onAdd: function () {
            if (!this._container) {
                this._initContainer(); // defined by renderer implementations

                if (this._zoomAnimated) {
                    L.DomUtil.addClass(this._container, 'leaflet-zoom-animated');
                }
            }

            this.getPane().appendChild(this._container);
            this._update();
        },

        onRemove: function () {
            L.DomUtil.remove(this._container);
        },

        getEvents: function () {
            var events = {
                viewreset: this._reset,
                zoom: this._onZoom,
                moveend: this._update
            };
            if (this._zoomAnimated) {
                events.zoomanim = this._onAnimZoom;
            }
            return events;
        },

        _onAnimZoom: function (ev) {
            this._updateTransform(ev.center, ev.zoom);
        },

        _onZoom: function () {
            this._updateTransform(this._map.getCenter(), this._map.getZoom());
        },

        _updateTransform: function (center, zoom) {
            var scale = this._map.getZoomScale(zoom, this._zoom),
                position = L.DomUtil.getPosition(this._container),
                viewHalf = this._map.getSize().multiplyBy(0.5 + this.options.padding),
                currentCenterPoint = this._map.project(this._center, zoom),
                destCenterPoint = this._map.project(center, zoom),
                centerOffset = destCenterPoint.subtract(currentCenterPoint),

                topLeftOffset = viewHalf.multiplyBy(-scale).add(position).add(viewHalf).subtract(centerOffset);

            if (L.Browser.any3d) {
                L.DomUtil.setTransform(this._container, topLeftOffset, scale);
            } else if(L.Browser.svg){
                L.DomUtil.setPosition(this._container, topLeftOffset);
            }else {
                this._container.style.left = 0 + 'px';
                this._container.style.top = 0 + 'px';
            }
        },

        _reset: function () {
            this._update();
            this._updateTransform(this._center, this._zoom);
        },

        _update: function () {
            // update pixel bounds of renderer container (for positioning/sizing/clipping later)
            var p = this.options.padding,
                size = this._map.getSize(),
                min = this._map.containerPointToLayerPoint(size.multiplyBy(-p)).round();

            this._bounds = new L.Bounds(min, min.add(size.multiplyBy(1 + p * 2)).round());

            this._center = this._map.getCenter();
            this._zoom = this._map.getZoom();
        }
    });


    L.Map.include({
        // @namespace Map; @method getRenderer(layer: Path): Renderer
        // Returns the instance of `Renderer` that should be used to render the given
        // `Path`. It will ensure that the `renderer` options of the map and paths
        // are respected, and that the renderers do exist on the map.
        getRenderer: function (layer) {
            // @namespace Path; @option renderer: Renderer
            // Use this specific instance of `Renderer` for this path. Takes
            // precedence over the map's [default renderer](#map-renderer).
            var renderer = layer.options.renderer || this._getPaneRenderer(layer.options.pane) || this.options.renderer || this._renderer;

            if (!renderer) {
                // @namespace Map; @option preferCanvas: Boolean = false
                // Whether `Path`s should be rendered on a `Canvas` renderer.
                // By default, all `Path`s are rendered in a `SVG` renderer.
                renderer = this._renderer = (this.options.preferCanvas && L.canvas()) || L.svg();
            }

            if (!this.hasLayer(renderer)) {
                this.addLayer(renderer);
            }
            return renderer;
        },

        _getPaneRenderer: function (name) {
            if (name === 'overlayPane' || name === undefined) {
                return false;
            }

            var renderer = this._paneRenderers[name];
            if (renderer === undefined) {
                renderer = (L.SVG && L.svg({pane: name})) || (L.Canvas && L.canvas({pane: name}));
                this._paneRenderers[name] = renderer;
            }
            return renderer;
        }
    });



    /*
     * @class Path
     * @aka L.Path
     * @inherits Layer
     *
     * An abstract class that contains options and constants shared between vector
     * overlays (Polygon, Polyline, Circle). Do not use it directly. Extends `Layer`.
     */

    L.Path = L.Layer.extend({

        // @section
        // @aka Path options
        options: {
            // @option stroke: Boolean = true
            // Whether to draw stroke along the path. Set it to `false` to disable borders on polygons or circles.
            stroke: true,

            // @option color: String = '#3388ff'
            // Stroke color
            color: '#3388ff',

            // @option weight: Number = 3
            // Stroke width in pixels
            weight: 3,

            // @option opacity: Number = 1.0
            // Stroke opacity
            opacity: 1,

            // @option lineCap: String= 'round'
            // A string that defines [shape to be used at the end](https://developer.mozilla.org/docs/Web/SVG/Attribute/stroke-linecap) of the stroke.
            lineCap: 'round',

            // @option lineJoin: String = 'round'
            // A string that defines [shape to be used at the corners](https://developer.mozilla.org/docs/Web/SVG/Attribute/stroke-linejoin) of the stroke.
            lineJoin: 'round',

            // @option dashArray: String = null
            // A string that defines the stroke [dash pattern](https://developer.mozilla.org/docs/Web/SVG/Attribute/stroke-dasharray). Doesn't work on canvas-powered layers (e.g. Android 2).
            dashArray: null,

            // @option dashOffset: String = null
            // A string that defines the [distance into the dash pattern to start the dash](https://developer.mozilla.org/docs/Web/SVG/Attribute/stroke-dashoffset). Doesn't work on canvas-powered layers
            dashOffset: null,

            // @option fill: Boolean = depends
            // Whether to fill the path with color. Set it to `false` to disable filling on polygons or circles.
            fill: false,

            // @option fillColor: String = *
            // Fill color. Defaults to the value of the [`color`](#path-color) option
            fillColor: null,

            // @option fillOpacity: Number = 0.2
            // Fill opacity.
            fillOpacity: 0.2,

            // @option fillRule: String = 'evenodd'
            // A string that defines [how the inside of a shape](https://developer.mozilla.org/docs/Web/SVG/Attribute/fill-rule) is determined.
            fillRule: 'evenodd',

            // className: '',

            // @option interactive: Boolean = true
            // If `false`, the vector will not emit mouse events and will act as a part of the underlying map.
            interactive: true
        },

        beforeAdd: function (map) {
            // Renderer is set here because we need to call renderer.getEvents
            // before this.getEvents.
            this._renderer = map.getRenderer(this);
        },

        onAdd: function () {
            this._renderer._initPath(this);
            this._reset();
            this._renderer._addPath(this);
        },

        onRemove: function () {
            this._renderer._removePath(this);
        },

        getEvents: function () {
            return {
                zoomend: this._project,
                moveend: this._update,
                viewreset: this._reset
            };
        },

        // @method redraw(): this
        // Redraws the layer. Sometimes useful after you changed the coordinates that the path uses.
        redraw: function () {
            if (this._map) {
                this._renderer._updatePath(this);
            }
            return this;
        },

        // @method setStyle(style: Path options): this
        // Changes the appearance of a Path based on the options in the `Path options` object.
        setStyle: function (style) {
            L.setOptions(this, style);
            if (this._renderer) {
                this._renderer._updateStyle(this);
            }
            return this;
        },

        // @method bringToFront(): this
        // Brings the layer to the top of all path layers.
        bringToFront: function () {
            if (this._renderer) {
                this._renderer._bringToFront(this);
            }
            return this;
        },

        // @method bringToBack(): this
        // Brings the layer to the bottom of all path layers.
        bringToBack: function () {
            if (this._renderer) {
                this._renderer._bringToBack(this);
            }
            return this;
        },

        getElement: function () {
            return this._path;
        },

        _reset: function () {
            // defined in children classes
            this._project();
            this._update();
        },

        _clickTolerance: function () {
            // used when doing hit detection for Canvas layers
            return (this.options.stroke ? this.options.weight / 2 : 0) + (L.Browser.touch ? 10 : 0);
        }
    });



    /*
     * @namespace LineUtil
     *
     * Various utility functions for polyine points processing, used by Leaflet internally to make polylines lightning-fast.
     */

    L.LineUtil = {

        // Simplify polyline with vertex reduction and Douglas-Peucker simplification.
        // Improves rendering performance dramatically by lessening the number of points to draw.

        // @function simplify(points: Point[], tolerance: Number): Point[]
        // Dramatically reduces the number of points in a polyline while retaining
        // its shape and returns a new array of simplified points, using the
        // [Douglas-Peucker algorithm](http://en.wikipedia.org/wiki/Douglas-Peucker_algorithm).
        // Used for a huge performance boost when processing/displaying Leaflet polylines for
        // each zoom level and also reducing visual noise. tolerance affects the amount of
        // simplification (lesser value means higher quality but slower and with more points).
        // Also released as a separated micro-library [Simplify.js](http://mourner.github.com/simplify-js/).
        simplify: function (points, tolerance) {
            if (!tolerance || !points.length) {
                return points.slice();
            }

            var sqTolerance = tolerance * tolerance;

            // stage 1: vertex reduction
            points = this._reducePoints(points, sqTolerance);

            // stage 2: Douglas-Peucker simplification
            points = this._simplifyDP(points, sqTolerance);

            return points;
        },

        // @function pointToSegmentDistance(p: Point, p1: Point, p2: Point): Number
        // Returns the distance between point `p` and segment `p1` to `p2`.
        pointToSegmentDistance:  function (p, p1, p2) {
            return Math.sqrt(this._sqClosestPointOnSegment(p, p1, p2, true));
        },

        // @function closestPointOnSegment(p: Point, p1: Point, p2: Point): Number
        // Returns the closest point from a point `p` on a segment `p1` to `p2`.
        closestPointOnSegment: function (p, p1, p2) {
            return this._sqClosestPointOnSegment(p, p1, p2);
        },

        // Douglas-Peucker simplification, see http://en.wikipedia.org/wiki/Douglas-Peucker_algorithm
        _simplifyDP: function (points, sqTolerance) {

            var len = points.length,
                ArrayConstructor = typeof Uint8Array !== undefined + '' ? Uint8Array : Array,
                markers = new ArrayConstructor(len);

            markers[0] = markers[len - 1] = 1;

            this._simplifyDPStep(points, markers, sqTolerance, 0, len - 1);

            var i,
                newPoints = [];

            for (i = 0; i < len; i++) {
                if (markers[i]) {
                    newPoints.push(points[i]);
                }
            }

            return newPoints;
        },

        _simplifyDPStep: function (points, markers, sqTolerance, first, last) {

            var maxSqDist = 0,
                index, i, sqDist;

            for (i = first + 1; i <= last - 1; i++) {
                sqDist = this._sqClosestPointOnSegment(points[i], points[first], points[last], true);

                if (sqDist > maxSqDist) {
                    index = i;
                    maxSqDist = sqDist;
                }
            }

            if (maxSqDist > sqTolerance) {
                markers[index] = 1;

                this._simplifyDPStep(points, markers, sqTolerance, first, index);
                this._simplifyDPStep(points, markers, sqTolerance, index, last);
            }
        },

        // reduce points that are too close to each other to a single point
        _reducePoints: function (points, sqTolerance) {
            var reducedPoints = [points[0]];

            for (var i = 1, prev = 0, len = points.length; i < len; i++) {
                if (this._sqDist(points[i], points[prev]) > sqTolerance) {
                    reducedPoints.push(points[i]);
                    prev = i;
                }
            }
            if (prev < len - 1) {
                reducedPoints.push(points[len - 1]);
            }
            return reducedPoints;
        },


        // Clips the segment a to b by rectangular bounds with the
        // [Cohen-Sutherland algorithm](https://en.wikipedia.org/wiki/Cohen%E2%80%93Sutherland_algorithm)
        // (modifying the segment points directly!). Used by Leaflet to only show polyline
        // points that are on the screen or near, increasing performance.
        clipSegment: function (a, b, bounds, useLastCode, round) {
            var codeA = useLastCode ? this._lastCode : this._getBitCode(a, bounds),
                codeB = this._getBitCode(b, bounds),

                codeOut, p, newCode;

            // save 2nd code to avoid calculating it on the next segment
            this._lastCode = codeB;

            while (true) {
                // if a,b is inside the clip window (trivial accept)
                if (!(codeA | codeB)) { return [a, b]; }

                // if a,b is outside the clip window (trivial reject)
                if (codeA & codeB) { return false; }

                // other cases
                codeOut = codeA || codeB;
                p = this._getEdgeIntersection(a, b, codeOut, bounds, round);
                newCode = this._getBitCode(p, bounds);

                if (codeOut === codeA) {
                    a = p;
                    codeA = newCode;
                } else {
                    b = p;
                    codeB = newCode;
                }
            }
        },

        _getEdgeIntersection: function (a, b, code, bounds, round) {
            var dx = b.x - a.x,
                dy = b.y - a.y,
                min = bounds.min,
                max = bounds.max,
                x, y;

            if (code & 8) { // top
                x = a.x + dx * (max.y - a.y) / dy;
                y = max.y;

            } else if (code & 4) { // bottom
                x = a.x + dx * (min.y - a.y) / dy;
                y = min.y;

            } else if (code & 2) { // right
                x = max.x;
                y = a.y + dy * (max.x - a.x) / dx;

            } else if (code & 1) { // left
                x = min.x;
                y = a.y + dy * (min.x - a.x) / dx;
            }

            return new L.Point(x, y, round);
        },

        _getBitCode: function (p, bounds) {
            var code = 0;

            if (p.x < bounds.min.x) { // left
                code |= 1;
            } else if (p.x > bounds.max.x) { // right
                code |= 2;
            }

            if (p.y < bounds.min.y) { // bottom
                code |= 4;
            } else if (p.y > bounds.max.y) { // top
                code |= 8;
            }

            return code;
        },

        // square distance (to avoid unnecessary Math.sqrt calls)
        _sqDist: function (p1, p2) {
            var dx = p2.x - p1.x,
                dy = p2.y - p1.y;
            return dx * dx + dy * dy;
        },

        // return closest point on segment or distance to that point
        _sqClosestPointOnSegment: function (p, p1, p2, sqDist) {
            var x = p1.x,
                y = p1.y,
                dx = p2.x - x,
                dy = p2.y - y,
                dot = dx * dx + dy * dy,
                t;

            if (dot > 0) {
                t = ((p.x - x) * dx + (p.y - y) * dy) / dot;

                if (t > 1) {
                    x = p2.x;
                    y = p2.y;
                } else if (t > 0) {
                    x += dx * t;
                    y += dy * t;
                }
            }

            dx = p.x - x;
            dy = p.y - y;

            return sqDist ? dx * dx + dy * dy : new L.Point(x, y);
        }
    };

    L.text = function(latlng, options, data){
        return new L.Text(latlng, options, data);
    };

    L.Text = L.Layer.extend({

        initialize: function (latlng, options, data) {
            this._latlng = L.latLng(latlng);
            this._data = data;
        },

        updateWithData:function(){
            this.onRemove();

            this.onAdd();
        },

        beforeAdd: function (map) {
            this._renderer = map.getRenderer(this);
        },

        onAdd: function () {
            var useHtml = this._data.dataLabels.useHtml || !L.Browser.svg;
            if(useHtml){
                this._text = document.createElement('div');
                this._text.style.position = 'absolute';
                this._text.style['pointer-events'] = 'none';
                this.getPane().appendChild(this._text);
            }else{
                this._renderer._initText(this);
                this._renderer._addText(this);
            }

            var labelContent = this._data.labelContent;
            var centerX = 0, startY = -this._data.labelDim.height/2;
            var chartType = this._data.series.type;
            if(chartType == 'scatter' || chartType == 'pointMap'){

                if(this._data.marker && !VanUtils.isImageMarker(this._data.marker.symbol)){
                    var radius = this._data.marker.radius || 4.5;
                    startY = -radius-this._data.labelDim.height;
                }else{
                    var iconHeight = this._data.icon.iconSize[1];
                    startY = -iconHeight/2 -this._data.labelDim.height;
                }
            }

            for(var i = 0, count = labelContent.length; i < count; i++){
                var label = labelContent[i];

                var labelDim = label.dim;
                var labelText = label.text;
                var labelStyle = label.style;

                if(useHtml){
                    var div = document.createElement('div');
                    div.innerHTML = labelText;
                    div.style.zIndex = 1001;
                    div.style.position = 'absolute';
                    div.style.left = -labelDim.width/2 + 'px';
                    div.style.top = startY + 'px';
                    div.style.overflow = 'hidden';
                    div.style.whiteSpace = 'nowrap';

                    for(var fontStyle in labelStyle){
                        //ie789的color属性只能是16进制的值
                        if(fontStyle == 'color'){
                            div.style.color = ColorUtils.colorToHex(labelStyle.color);
                        }else {
                            div.style[fontStyle] = labelStyle[fontStyle];
                        }
                    }
                    this._text.appendChild(div);
                }else{
                    d3.select(this._text).append('tspan')
                        .attr('x', centerX).attr('y', startY + labelDim.height/2)
                        .attr('dy', '.32em').attr("text-anchor", "middle")
                        .text(labelText);

                    VanUtils.setTextStyle(d3.select(this._text), labelStyle);
                }
                startY += (labelDim.height + 2);
            }

            this._reset();
        },

        onRemove: function () {
            this._renderer._removeText(this);
        },

        getEvents: function () {
            return {
                zoomend: this._project,
                moveend: this._update,
                viewreset: this._reset
            };
        },

        _reset: function () {
            // defined in children classes
            this._project();
            this._update();
        },

        _project: function () {
            this._point = this._map.latLngToLayerPoint(this._latlng);
        },

        _update: function () {
            if (this._map) {
                if(this._text.tagName.toLowerCase() == 'div'){
                    this._text.style.left = this._point.x + 'px';
                    this._text.style.top = this._point.y + 'px';
                }else{
                    this._text.setAttribute("transform", 'translate(' + this._point.x + ',' + this._point.y + ')');
                }
            }
        }
    });


    L.scatterMarker = function (latlng, options, data, renderer) {
        return new L.ScatterMarker(latlng, options, data, renderer);
    };

    //固定pixel大小的标记点
    L.ScatterMarker = L.Path.extend({

        options:{
            markerType:'circle',
            radius:'4.5'
        },

        initialize: function (latlng, options, data, renderer) {
            L.setOptions(this, options);
            this._latlng = L.latLng(latlng);
            this._data = data;
            this.renderer = renderer;
        },

        // @method getLatLng(): LatLng
        // Returns the current geographical position of the circle marker
        getLatLng: function () {
            return this._latlng;
        },

        _getMarkerPath:function(){
            var markerType = this.options.markerType;
            var r = this.options.radius;
            return this.renderer._getMarkerPath(markerType, r);
        },

        _project: function () {
            this._point = this._map.latLngToLayerPoint(this._latlng);
        },

        _update: function () {
            if (this._map) {
                this._updatePath();
            }
        },

        _updatePath: function () {
            var p = this._point;
            if(L.Browser.svg){
                this._path.setAttribute('d', this._getMarkerPath());
                this._path.setAttribute('transform', 'translate(' + p.x + ',' + p.y + ')');
            }else{
                this._container.style.left = p.x + 'px';
                this._container.style.top = p.y + 'px';
                this._path.v = this.renderer.path2vml(this._getMarkerPath());
            }
        },

        _empty: function () {
            return this._radius && !this._renderer._bounds.intersects(this._pxBounds);
        }

    });


    /*
     * @class Polyline
     * @aka L.Polyline
     * @inherits Path
     *
     * A class for drawing polyline overlays on a map. Extends `Path`.
     *
     * @example
     *
     * ```js
     * // create a red polyline from an array of LatLng points
     * var latlngs = [
     * 	[-122.68, 45.51],
     * 	[-122.43, 37.77],
     * 	[-118.2, 34.04]
     * ];
     *
     * var polyline = L.polyline(latlngs, {color: 'red'}).addTo(map);
     *
     * // zoom the map to the polyline
     * map.fitBounds(polyline.getBounds());
     * ```
     *
     * You can also pass a multi-dimensional array to represent a `MultiPolyline` shape:
     *
     * ```js
     * // create a red polyline from an array of arrays of LatLng points
     * var latlngs = [
     * 	[[-122.68, 45.51],
     * 	 [-122.43, 37.77],
     * 	 [-118.2, 34.04]],
     * 	[[-73.91, 40.78],
     * 	 [-87.62, 41.83],
     * 	 [-96.72, 32.76]]
     * ];
     * ```
     */

    L.Polyline = L.Path.extend({

        options: {
            // @option smoothFactor: Number = 1.0
            // How much to simplify the polyline on each zoom level. More means
            // better performance and smoother look, and less means more accurate representation.
            smoothFactor: 1.0,

            // @option noClip: Boolean: false
            // Disable polyline clipping.
            noClip: false
        },

        initialize: function (latlngs, options) {
            L.setOptions(this, options);
            this._setLatLngs(latlngs);
        },

        // @method getLatLngs(): LatLng[]
        // Returns an array of the points in the path, or nested arrays of points in case of multi-polyline.
        getLatLngs: function () {
            return this._latlngs;
        },

        // @method setLatLngs(latlngs: LatLng[]): this
        // Replaces all the points in the polyline with the given array of geographical points.
        setLatLngs: function (latlngs) {
            this._setLatLngs(latlngs);
            return this.redraw();
        },

        // @method isEmpty(): Boolean
        // Returns `true` if the Polyline has no LatLngs.
        isEmpty: function () {
            return !this._latlngs.length;
        },

        closestLayerPoint: function (p) {
            var minDistance = Infinity,
                minPoint = null,
                closest = L.LineUtil._sqClosestPointOnSegment,
                p1, p2;

            for (var j = 0, jLen = this._parts.length; j < jLen; j++) {
                var points = this._parts[j];

                for (var i = 1, len = points.length; i < len; i++) {
                    p1 = points[i - 1];
                    p2 = points[i];

                    var sqDist = closest(p, p1, p2, true);

                    if (sqDist < minDistance) {
                        minDistance = sqDist;
                        minPoint = closest(p, p1, p2);
                    }
                }
            }
            if (minPoint) {
                minPoint.distance = Math.sqrt(minDistance);
            }
            return minPoint;
        },

        // @method getCenter(): LatLng
        // Returns the center ([centroid](http://en.wikipedia.org/wiki/Centroid)) of the polyline.
        getCenter: function () {
            var i, halfDist, segDist, dist, p1, p2, ratio,
                points = this._rings[0],
                len = points.length;

            if (!len) { return null; }

            // polyline centroid algorithm; only uses the first ring if there are multiple

            for (i = 0, halfDist = 0; i < len - 1; i++) {
                halfDist += points[i].distanceTo(points[i + 1]) / 2;
            }

            // The line is so small in the current view that all points are on the same pixel.
            if (halfDist === 0) {
                return this._map.layerPointToLatLng(points[0]);
            }

            for (i = 0, dist = 0; i < len - 1; i++) {
                p1 = points[i];
                p2 = points[i + 1];
                segDist = p1.distanceTo(p2);
                dist += segDist;

                if (dist > halfDist) {
                    ratio = (dist - halfDist) / segDist;
                    return this._map.layerPointToLatLng([
                        p2.x - ratio * (p2.x - p1.x),
                        p2.y - ratio * (p2.y - p1.y)
                    ]);
                }
            }
        },

        // @method getBounds(): LatLngBounds
        // Returns the `LatLngBounds` of the path.
        getBounds: function () {
            return this._bounds;
        },

        // @method addLatLng(latlng: LatLng, latlngs? LatLng[]): this
        // Adds a given point to the polyline. By default, adds to the first ring of
        // the polyline in case of a multi-polyline, but can be overridden by passing
        // a specific ring as a LatLng array (that you can earlier access with [`getLatLngs`](#polyline-getlatlngs)).
        addLatLng: function (latlng, latlngs) {
            latlngs = latlngs || this._defaultShape();
            latlng = L.latLng(latlng);
            latlngs.push(latlng);
            this._bounds.extend(latlng);
            return this.redraw();
        },

        _setLatLngs: function (latlngs) {
            this._bounds = new L.LatLngBounds();
            this._latlngs = this._convertLatLngs(latlngs);
        },

        _defaultShape: function () {
            return L.Polyline._flat(this._latlngs) ? this._latlngs : this._latlngs[0];
        },

        // recursively convert latlngs input into actual LatLng instances; calculate bounds along the way
        _convertLatLngs: function (latlngs) {
            var result = [],
                flat = L.Polyline._flat(latlngs);

            for (var i = 0, len = latlngs.length; i < len; i++) {
                if (flat) {
                    result[i] = L.latLng(latlngs[i]);
                    this._bounds.extend(result[i]);
                } else {
                    result[i] = this._convertLatLngs(latlngs[i]);
                }
            }

            return result;
        },

        _project: function () {
            var pxBounds = new L.Bounds();
            this._rings = [];
            this._projectLatlngs(this._latlngs, this._rings, pxBounds);

            var w = this._clickTolerance(),
                p = new L.Point(w, w);

            if (this._bounds.isValid() && pxBounds.isValid()) {
                pxBounds.min._subtract(p);
                pxBounds.max._add(p);
                this._pxBounds = pxBounds;
            }
        },

        // recursively turns latlngs into a set of rings with projected coordinates
        _projectLatlngs: function (latlngs, result, projectedBounds) {
            var flat = latlngs[0] instanceof L.LatLng,
                len = latlngs.length,
                i, ring;

            if (flat) {
                ring = [];
                for (i = 0; i < len; i++) {
                    ring[i] = this._map.latLngToLayerPoint(latlngs[i]);
                    projectedBounds.extend(ring[i]);
                }
                result.push(ring);
            } else {
                for (i = 0; i < len; i++) {
                    this._projectLatlngs(latlngs[i], result, projectedBounds);
                }
            }
        },

        // clip polyline by renderer bounds so that we have less to render for performance
        _clipPoints: function () {
            var bounds = this._renderer._bounds;

            this._parts = [];
            if (!this._pxBounds || !this._pxBounds.intersects(bounds)) {
                return;
            }

            if (this.options.noClip) {
                this._parts = this._rings;
                return;
            }

            var parts = this._parts,
                i, j, k, len, len2, segment, points;

            for (i = 0, k = 0, len = this._rings.length; i < len; i++) {
                points = this._rings[i];

                for (j = 0, len2 = points.length; j < len2 - 1; j++) {
                    segment = L.LineUtil.clipSegment(points[j], points[j + 1], bounds, j, true);

                    if (!segment) { continue; }

                    parts[k] = parts[k] || [];
                    parts[k].push(segment[0]);

                    // if segment goes out of screen, or it's the last one, it's the end of the line part
                    if ((segment[1] !== points[j + 1]) || (j === len2 - 2)) {
                        parts[k].push(segment[1]);
                        k++;
                    }
                }
            }
        },

        // simplify each clipped part of the polyline for performance
        _simplifyPoints: function () {
            var parts = this._parts,
                tolerance = this.options.smoothFactor;

            for (var i = 0, len = parts.length; i < len; i++) {
                parts[i] = L.LineUtil.simplify(parts[i], tolerance);
            }
        },

        _update: function () {
            if (!this._map) { return; }

            this._clipPoints();
            this._simplifyPoints();
            this._updatePath();
        },

        _updatePath: function () {
            this._renderer._updatePoly(this);
        }
    });

// @factory L.polyline(latlngs: LatLng[], options?: Path options)
// Instantiates a polyline object given an array of geographical points and
// optionally an options object. You can create a `Polyline` object with
// multiple separate lines (`MultiPolyline`) by passing an array of arrays
// of geographic points.
    L.polyline = function (latlngs, options) {
        return new L.Polyline(latlngs, options);
    };

    L.Polyline._flat = function (latlngs) {
        // true if it's a flat array of latlngs; false if nested
        return !L.Util.isArray(latlngs[0]) || (typeof latlngs[0][0] !== 'object' && typeof latlngs[0][0] !== 'undefined');
    };



    /*
     * @namespace PolyUtil
     * Various utility functions for polygon geometries.
     */

    L.PolyUtil = {};

    /* @function clipPolygon(points: Point[], bounds: Bounds, round?: Boolean): Point[]
     * Clips the polygon geometry defined by the given `points` by the given bounds (using the [Sutherland-Hodgeman algorithm](https://en.wikipedia.org/wiki/Sutherland%E2%80%93Hodgman_algorithm)).
     * Used by Leaflet to only show polygon points that are on the screen or near, increasing
     * performance. Note that polygon points needs different algorithm for clipping
     * than polyline, so there's a seperate method for it.
     */
    L.PolyUtil.clipPolygon = function (points, bounds, round) {
        var clippedPoints,
            edges = [1, 4, 2, 8],
            i, j, k,
            a, b,
            len, edge, p,
            lu = L.LineUtil;

        for (i = 0, len = points.length; i < len; i++) {
            points[i]._code = lu._getBitCode(points[i], bounds);
        }

        // for each edge (left, bottom, right, top)
        for (k = 0; k < 4; k++) {
            edge = edges[k];
            clippedPoints = [];

            for (i = 0, len = points.length, j = len - 1; i < len; j = i++) {
                a = points[i];
                b = points[j];

                // if a is inside the clip window
                if (!(a._code & edge)) {
                    // if b is outside the clip window (a->b goes out of screen)
                    if (b._code & edge) {
                        p = lu._getEdgeIntersection(b, a, edge, bounds, round);
                        p._code = lu._getBitCode(p, bounds);
                        clippedPoints.push(p);
                    }
                    clippedPoints.push(a);

                    // else if b is inside the clip window (a->b enters the screen)
                } else if (!(b._code & edge)) {
                    p = lu._getEdgeIntersection(b, a, edge, bounds, round);
                    p._code = lu._getBitCode(p, bounds);
                    clippedPoints.push(p);
                }
            }
            points = clippedPoints;
        }

        return points;
    };



    /*
     * @class Polygon
     * @aka L.Polygon
     * @inherits Polyline
     *
     * A class for drawing polygon overlays on a map. Extends `Polyline`.
     *
     * Note that points you pass when creating a polygon shouldn't have an additional last point equal to the first one — it's better to filter out such points.
     *
     *
     * @example
     *
     * ```js
     * // create a red polygon from an array of LatLng points
     * var latlngs = [[-111.03, 41],[-111.04, 45],[-104.05, 45],[-104.05, 41]];
     *
     * var polygon = L.polygon(latlngs, {color: 'red'}).addTo(map);
     *
     * // zoom the map to the polygon
     * map.fitBounds(polygon.getBounds());
     * ```
     *
     * You can also pass an array of arrays of latlngs, with the first array representing the outer shape and the other arrays representing holes in the outer shape:
     *
     * ```js
     * var latlngs = [
     *   [[-111.03, 41],[-111.04, 45],[-104.05, 45],[-104.05, 41]], // outer ring
     *   [[-108.58,37.29],[-108.58,40.71],[-102.50,40.71],[-102.50,37.29]] // hole
     * ];
     * ```
     *
     * Additionally, you can pass a multi-dimensional array to represent a MultiPolygon shape.
     *
     * ```js
     * var latlngs = [
     *   [ // first polygon
     *     [[-111.03, 41],[-111.04, 45],[-104.05, 45],[-104.05, 41]], // outer ring
     *     [[-108.58,37.29],[-108.58,40.71],[-102.50,40.71],[-102.50,37.29]] // hole
     *   ],
     *   [ // second polygon
     *     [[-109.05, 37],[-109.03, 41],[-102.05, 41],[-102.04, 37],[-109.05, 38]]
     *   ]
     * ];
     * ```
     */

    L.Polygon = L.Polyline.extend({

        options: {
            fill: true
        },

        isEmpty: function () {
            return !this._latlngs.length || !this._latlngs[0].length;
        },

        getCenter: function () {
            var i, j, p1, p2, f, area, x, y, center,
                points = this._rings[0],
                len = points.length;

            if (!len) { return null; }

            // polygon centroid algorithm; only uses the first ring if there are multiple

            area = x = y = 0;

            for (i = 0, j = len - 1; i < len; j = i++) {
                p1 = points[i];
                p2 = points[j];

                f = p1.y * p2.x - p2.y * p1.x;
                x += (p1.x + p2.x) * f;
                y += (p1.y + p2.y) * f;
                area += f * 3;
            }

            if (area === 0) {
                // Polygon is so small that all points are on same pixel.
                center = points[0];
            } else {
                center = [x / area, y / area];
            }
            return this._map.layerPointToLatLng(center);
        },

        _convertLatLngs: function (latlngs) {
            var result = L.Polyline.prototype._convertLatLngs.call(this, latlngs),
                len = result.length;

            // remove last point if it equals first one
            if (len >= 2 && result[0] instanceof L.LatLng && result[0].equals(result[len - 1])) {
                result.pop();
            }
            return result;
        },

        _setLatLngs: function (latlngs) {
            L.Polyline.prototype._setLatLngs.call(this, latlngs);
            if (L.Polyline._flat(this._latlngs)) {
                this._latlngs = [this._latlngs];
            }
        },

        _defaultShape: function () {
            return L.Polyline._flat(this._latlngs[0]) ? this._latlngs[0] : this._latlngs[0][0];
        },

        _clipPoints: function () {
            // polygons need a different clipping algorithm so we redefine that

            var bounds = this._renderer._bounds,
                w = this.options.weight,
                p = new L.Point(w, w);

            // increase clip padding by stroke width to avoid stroke on clip edges
            bounds = new L.Bounds(bounds.min.subtract(p), bounds.max.add(p));

            this._parts = [];
            if (!this._pxBounds || !this._pxBounds.intersects(bounds)) {
                return;
            }

            if (this.options.noClip) {
                this._parts = this._rings;
                return;
            }

            for (var i = 0, len = this._rings.length, clipped; i < len; i++) {
                clipped = L.PolyUtil.clipPolygon(this._rings[i], bounds, true);
                if (clipped.length) {
                    this._parts.push(clipped);
                }
            }
        },

        _updatePath: function () {
            this._renderer._updatePoly(this, true);
        }
    });


// @factory L.polygon(latlngs: LatLng[], options?: Polyline options)
    L.polygon = function (latlngs, options) {
        return new L.Polygon(latlngs, options);
    };



    /*
     * L.Rectangle extends Polygon and creates a rectangle when passed a LatLngBounds object.
     */

    /*
     * @class Rectangle
     * @aka L.Retangle
     * @inherits Polygon
     *
     * A class for drawing rectangle overlays on a map. Extends `Polygon`.
     *
     * @example
     *
     * ```js
     * // define rectangle geographical bounds
     * var bounds = [[54.559322, -5.767822], [56.1210604, -3.021240]];
     *
     * // create an orange rectangle
     * L.rectangle(bounds, {color: "#ff7800", weight: 1}).addTo(map);
     *
     * // zoom the map to the rectangle bounds
     * map.fitBounds(bounds);
     * ```
     *
     */


    L.Rectangle = L.Polygon.extend({
        initialize: function (latLngBounds, options) {
            L.Polygon.prototype.initialize.call(this, this._boundsToLatLngs(latLngBounds), options);
        },

        // @method setBounds(latLngBounds: LatLngBounds): this
        // Redraws the rectangle with the passed bounds.
        setBounds: function (latLngBounds) {
            return this.setLatLngs(this._boundsToLatLngs(latLngBounds));
        },

        _boundsToLatLngs: function (latLngBounds) {
            latLngBounds = L.latLngBounds(latLngBounds);
            return [
                latLngBounds.getSouthWest(),
                latLngBounds.getNorthWest(),
                latLngBounds.getNorthEast(),
                latLngBounds.getSouthEast()
            ];
        }
    });


// @factory L.rectangle(latLngBounds: LatLngBounds, options?: Polyline options)
    L.rectangle = function (latLngBounds, options) {
        return new L.Rectangle(latLngBounds, options);
    };



    /*
     * @class CircleMarker
     * @aka L.CircleMarker
     * @inherits Path
     *
     * A circle of a fixed size with radius specified in pixels. Extends `Path`.
     */

    L.CircleMarker = L.Path.extend({

        options: {
            fill: true,

            // @option radius: Number = 10
            // Radius of the circle marker, in pixels
            radius: 10
        },

        initialize: function (latlng, options, data) {
            L.setOptions(this, options);
            this._latlng = L.latLng(latlng);
            this._radius = this.options.radius;
            this._data = data;
        },

        // @method setLatLng(latLng: LatLng): this
        // Sets the position of a circle marker to a new location.
        setLatLng: function (latlng) {
            this._latlng = L.latLng(latlng);
            this.redraw();
            return this.fire('move', {latlng: this._latlng});
        },

        // @method getLatLng(): LatLng
        // Returns the current geographical position of the circle marker
        getLatLng: function () {
            return this._latlng;
        },

        // @method setRadius(radius: Number): this
        // Sets the radius of a circle marker. Units are in pixels.
        setRadius: function (radius) {
            this.options.radius = this._radius = radius;
            return this.redraw();
        },

        // @method getRadius(): Number
        // Returns the current radius of the circle
        getRadius: function () {
            return this._radius;
        },

        setStyle : function (options) {
            var radius = options && options.radius || this._radius;
            L.Path.prototype.setStyle.call(this, options);
            this.setRadius(radius);
            return this;
        },

        _project: function () {
            this._point = this._map.latLngToLayerPoint(this._latlng);
            this._updateBounds();
        },

        _updateBounds: function () {
            var r = this._radius,
                r2 = this._radiusY || r,
                w = this._clickTolerance(),
                p = [r + w, r2 + w];
            this._pxBounds = new L.Bounds(this._point.subtract(p), this._point.add(p));
        },

        _update: function () {
            if (this._map) {
                this._updatePath();
            }
        },

        _updatePath: function () {
            this._renderer._updateCircle(this);
        },

        _empty: function () {
            return this._radius && !this._renderer._bounds.intersects(this._pxBounds);
        }
    });


// @factory L.circleMarker(latlng: LatLng, options? CircleMarker options)
//
    L.circleMarker = function (latlng, options, data) {
        return new L.CircleMarker(latlng, options, data);
    };



    /*
     * @class Circle
     * @aka L.Circle
     * @inherits CircleMarker
     *
     * A class for drawing circle overlays on a map. Extends `CircleMarker`.
     *
     * It's an approximation and starts to diverge from a real circle closer to poles (due to projection distortion).
     *
     * @example
     *
     * ```js
     * L.circle([50.5, 30.5], 200).addTo(map);
     * ```
     */

    L.Circle = L.CircleMarker.extend({

        initialize: function (latlng, options, legacyOptions) {
            if (typeof options === 'number') {
                // Backwards compatibility with 0.7.x factory (latlng, radius, options?)
                options = L.extend({}, legacyOptions, {radius: options});
            }
            L.setOptions(this, options);
            this._latlng = L.latLng(latlng);

            if (isNaN(this.options.radius)) { throw new Error('Circle radius cannot be NaN'); }

            // @option radius: Number; Radius of the circle, in meters.
            this._mRadius = this.options.radius;
        },

        // @method setRadius(radius: Number): this
        // Sets the radius of a circle. Units are in meters.
        setRadius: function (radius) {
            this._mRadius = radius;
            return this.redraw();
        },

        // @method getRadius(): Number
        // Returns the current radius of a circle. Units are in meters.
        getRadius: function () {
            return this._mRadius;
        },

        // @method getBounds(): LatLngBounds
        // Returns the `LatLngBounds` of the path.
        getBounds: function () {
            var half = [this._radius, this._radiusY || this._radius];

            return new L.LatLngBounds(
                this._map.layerPointToLatLng(this._point.subtract(half)),
                this._map.layerPointToLatLng(this._point.add(half)));
        },

        setStyle: L.Path.prototype.setStyle,

        _project: function () {

            var lng = this._latlng.lng,
                lat = this._latlng.lat,
                map = this._map,
                crs = map.options.crs;

            if (crs.distance === L.CRS.Earth.distance) {
                var d = Math.PI / 180,
                    latR = (this._mRadius / L.CRS.Earth.R) / d,
                    top = map.project([lat + latR, lng]),
                    bottom = map.project([lat - latR, lng]),
                    p = top.add(bottom).divideBy(2),
                    lat2 = map.unproject(p).lat,
                    lngR = Math.acos((Math.cos(latR * d) - Math.sin(lat * d) * Math.sin(lat2 * d)) /
                            (Math.cos(lat * d) * Math.cos(lat2 * d))) / d;

                if (isNaN(lngR) || lngR === 0) {
                    lngR = latR / Math.cos(Math.PI / 180 * lat); // Fallback for edge case, #2425
                }

                this._point = p.subtract(map.getPixelOrigin());
                this._radius = isNaN(lngR) ? 0 : Math.max(Math.round(p.x - map.project([lat2, lng - lngR]).x), 1);
                this._radiusY = Math.max(Math.round(p.y - top.y), 1);

            } else {
                var latlng2 = crs.unproject(crs.project(this._latlng).subtract([this._mRadius, 0]));

                this._point = map.latLngToLayerPoint(this._latlng);
                this._radius = this._point.x - map.latLngToLayerPoint(latlng2).x;
            }

            this._updateBounds();
        }
    });

// @factory L.circle(latlng: LatLng, options?: Path options)
// Instantiates a circle object given a geographical point, and an options object
// which contains the circle radius.
// @alternative
// @factory L.circle(latlng: LatLng, radius: Number, options?: Path options)
// Obsolete way of instantiating a circle, for compatibility with 0.7.x code.
// Do not use in new applications or plugins.
    L.circle = function (latlng, options, legacyOptions) {
        return new L.Circle(latlng, options, legacyOptions);
    };



    /*
     * @class SVG
     * @inherits Renderer
     * @aka L.SVG
     *
     * Allows vector layers to be displayed with [SVG](https://developer.mozilla.org/docs/Web/SVG).
     * Inherits `Renderer`.
     *
     * Due to [technical limitations](http://caniuse.com/#search=svg), SVG is not
     * available in all web browsers, notably Android 2.x and 3.x.
     *
     * Although SVG is not available on IE7 and IE8, these browsers support
     * [VML](https://en.wikipedia.org/wiki/Vector_Markup_Language)
     * (a now deprecated technology), and the SVG renderer will fall back to VML in
     * this case.
     *
     * @example
     *
     * Use SVG by default for all paths in the map:
     *
     * ```js
     * var map = L.map('map', {
     * 	renderer: L.svg();
     * });
     * ```
     *
     * Use a SVG renderer with extra padding for specific vector geometries:
     *
     * ```js
     * var map = L.map('map');
     * var myRenderer = L.svg({ padding: 0.5 });
     * var line = L.polyline( coordinates, { renderer: myRenderer } );
     * var circle = L.circle( center, { renderer: myRenderer } );
     * ```
     */

    L.SVG = L.Renderer.extend({

        getEvents: function () {
            var events = L.Renderer.prototype.getEvents.call(this);
            events.zoomstart = this._onZoomStart;
            return events;
        },

        _initContainer: function () {
            this._container = L.SVG.create('svg');

            // makes it possible to click through svg root; we'll reset it back in individual paths
            // this._container.setAttribute('pointer-events', 'none');

            this._rootGroup = L.SVG.create('g');
            this._container.appendChild(this._rootGroup);
        },

        _onZoomStart: function () {
            // Drag-then-pinch interactions might mess up the center and zoom.
            // In this case, the easiest way to prevent this is re-do the renderer
            //   bounds and padding when the zooming starts.
            this._update();
        },

        _update: function () {
            if (this._map._animatingZoom && this._bounds) { return; }

            L.Renderer.prototype._update.call(this);

            var b = this._bounds,
                size = b.getSize(),
                container = this._container;

            // set size of svg-container if changed
            if (!this._svgSize || !this._svgSize.equals(size)) {
                this._svgSize = size;
                container.setAttribute('width', size.x);
                container.setAttribute('height', size.y);
            }

            // movement: update container viewBox so that we don't have to change coordinates of individual layers
            L.DomUtil.setPosition(container, b.min);
            container.setAttribute('viewBox', [b.min.x, b.min.y, size.x, size.y].join(' '));
        },

        // methods below are called by vector layers implementations

        _initPath: function (layer) {
            var path = layer._path = L.SVG.create('path');

            // @namespace Path
            // @option className: string = null
            // Custom class name set on an element. Only for SVG renderer.
            if (layer.options.className) {
                L.DomUtil.addClass(path, layer.options.className);
            }

            if (layer.options.interactive) {
                L.DomUtil.addClass(path, 'leaflet-interactive');
            }

            this._updateStyle(layer);
        },

        _initGroup:function(layerGroup){
            layerGroup._g = L.SVG.create('g');
        },

        _addGroup:function(layerGroup){
            this._container.appendChild(layerGroup._g);
        },

        _initText:function(layer){
            layer._text = L.SVG.create('text');
        },

        _addText:function(layer){
            var parent = (layer._layerGroup && layer._layerGroup._g) || this._rootGroup;
            parent.appendChild(layer._text);
        },

        _removeText:function(layer){
            L.DomUtil.remove(layer._text);
        },

        _addPath: function (layer) {
            var parent = (layer._layerGroup && layer._layerGroup._g) || this._rootGroup;
            parent.appendChild(layer._path);
            layer.addInteractiveTarget(layer._path);
        },

        _removePath: function (layer) {
            L.DomUtil.remove(layer._path);
            layer.removeInteractiveTarget(layer._path);
        },

        _updatePath: function (layer) {
            layer._project();
            layer._update();
        },

        _updateStyle: function (layer) {
            var path = layer._path,
                options = layer.options;

            if (!path) { return; }

            if (options.stroke) {
                path.setAttribute('stroke', options.color);
                path.setAttribute('stroke-opacity', options.opacity);
                path.setAttribute('stroke-width', options.weight);
                path.setAttribute('stroke-linecap', options.lineCap);
                path.setAttribute('stroke-linejoin', options.lineJoin);

                if (options.dashArray) {
                    path.setAttribute('stroke-dasharray', options.dashArray);
                } else {
                    path.removeAttribute('stroke-dasharray');
                }

                if (options.dashOffset) {
                    path.setAttribute('stroke-dashoffset', options.dashOffset);
                } else {
                    path.removeAttribute('stroke-dashoffset');
                }
            } else {
                path.setAttribute('stroke', 'none');
            }

            if (options.fill) {
                path.setAttribute('fill', options.fillColor || options.color);
                path.setAttribute('fill-opacity', options.fillOpacity);
                path.setAttribute('fill-rule', options.fillRule || 'evenodd');
            } else {
                path.setAttribute('fill', 'none');
            }

            path.setAttribute('filter', options.filter ? options.filter : '');
        },

        _updatePoly: function (layer, closed) {
            this._setPath(layer, L.SVG.pointsToPath(layer._parts, closed));
        },

        _updateCircle: function (layer) {
            var p = layer._point,
                r = layer._radius,
                r2 = layer._radiusY || r,
                arc = 'a' + r + ',' + r2 + ' 0 1,0 ';

            // drawing a circle with two half-arcs
            var d = layer._empty() ? 'M0 0' :
            'M' + (p.x - r) + ',' + p.y +
            arc + (r * 2) + ',0 ' +
            arc + (-r * 2) + ',0 ';

            this._setPath(layer, d);
        },

        _setPath: function (layer, path) {
            layer._path.setAttribute('d', path);
        },

        // SVG does not have the concept of zIndex so we resort to changing the DOM order of elements
        _bringToFront: function (layer) {
            L.DomUtil.toFront(layer._path);
        },

        _bringToBack: function (layer) {
            L.DomUtil.toBack(layer._path);
        }
    });


// @namespace SVG; @section
// There are several static functions which can be called without instantiating L.SVG:
    L.extend(L.SVG, {
        // @function create(name: String): SVGElement
        // Returns a instance of [SVGElement](https://developer.mozilla.org/docs/Web/API/SVGElement),
        // corresponding to the class name passed. For example, using 'line' will return
        // an instance of [SVGLineElement](https://developer.mozilla.org/docs/Web/API/SVGLineElement).
        create: function (name) {
            return document.createElementNS('http://www.w3.org/2000/svg', name);
        },

        // @function pointsToPath(rings: [], closed: Boolean): String
        // Generates a SVG path string for multiple rings, with each ring turning
        // into "M..L..L.." instructions
        pointsToPath: function (rings, closed) {
            var str = '',
                i, j, len, len2, points, p;

            for (i = 0, len = rings.length; i < len; i++) {
                points = rings[i];

                for (j = 0, len2 = points.length; j < len2; j++) {
                    p = points[j];
                    str += (j ? 'L' : 'M') + p.x + ' ' + p.y;
                }

                // closes the ring for polygons; "x" is VML syntax
                str += closed ? (L.Browser.svg ? 'z' : 'x') : '';
            }

            // SVG complains about empty path strings
            return str || 'M0 0';
        }
    });

// @namespace Browser; @property svg: Boolean
// `true` when the browser supports [SVG](https://developer.mozilla.org/docs/Web/SVG).
    L.Browser.svg = !!(document.createElementNS && L.SVG.create('svg').createSVGRect);


// @namespace SVG
// @factory L.svg(options?: SVG options)
// Creates a SVG renderer with the given options.
    L.svg = function (options) {
        return L.Browser.svg || L.Browser.vml ? new L.SVG(options) : null;
    };



    /*
     * Thanks to Dmitry Baranovsky and his Raphael library for inspiration!
     */

    /*
     * @class SVG
     *
     * Although SVG is not available on IE7 and IE8, these browsers support [VML](https://en.wikipedia.org/wiki/Vector_Markup_Language), and the SVG renderer will fall back to VML in this case.
     *
     * VML was deprecated in 2012, which means VML functionality exists only for backwards compatibility
     * with old versions of Internet Explorer.
     */

// @namespace Browser; @property vml: Boolean
// `true` if the browser supports [VML](https://en.wikipedia.org/wiki/Vector_Markup_Language).
    L.Browser.vml = !L.Browser.svg && (function () {
            try {
                var div = document.createElement('div');
                div.innerHTML = '<v:shape adj="1"/>';

                var shape = div.firstChild;
                shape.style.behavior = 'url(#default#VML)';

                return shape && (typeof shape.adj === 'object');

            } catch (e) {
                return false;
            }
        }());

// redefine some SVG methods to handle VML syntax which is similar but with some differences
    L.SVG.include(!L.Browser.vml ? {} : {

        _initContainer: function () {
            this._container = L.DomUtil.create('div', 'leaflet-vml-container');
            this._container.style.top = '0px';
            this._container.style.left = '0px';
            this._container.style.position = 'absolute';
        },

        _update: function () {
            if (this._map._animatingZoom) { return; }
            L.Renderer.prototype._update.call(this);
        },

        _initGroup:function(layerGroup){
            layerGroup._g = L.SVG.create('group');
            L.DomUtil.addClass(layerGroup._g, 'leaflet-vml-shape ');
            layerGroup._g.coordsize = '1 1';

        },

        _addGroup:function(layerGroup){
            this._container.appendChild(layerGroup._g);
        },

        _initText:function(layer){

        },

        _addText:function(layer){

        },

        _removeText:function(layer){
            L.DomUtil.remove(layer._text);
        },

        _initPath: function (layer) {
            var container = layer._container = L.SVG.create('shape');

            L.DomUtil.addClass(container, 'leaflet-vml-shape ' + (this.options.className || ''));

            container.coordsize = '1 1';

            layer._path = L.SVG.create('path');
            container.appendChild(layer._path);

            this._updateStyle(layer);
        },

        _addPath: function (layer) {
            var parent = (layer._layerGroup && layer._layerGroup._g) || this._container;
            var container = layer._container;
            parent.appendChild(container);

            if (layer.options.interactive) {
                layer.addInteractiveTarget(container);
            }
        },

        _removePath: function (layer) {
            var container = layer._container;
            L.DomUtil.remove(container);
            layer.removeInteractiveTarget(container);
        },

        _updateStyle: function (layer) {
            var stroke = layer._stroke,
                fill = layer._fill,
                options = layer.options,
                container = layer._container;

            container.stroked = !!options.stroke;
            container.filled = !!options.fill;

            if (options.stroke) {
                if (!stroke) {
                    stroke = layer._stroke = L.SVG.create('stroke');
                }
                container.appendChild(stroke);
                stroke.weight = options.weight + 'px';
                stroke.color = options.color;
                stroke.opacity = options.opacity;

                if (options.dashArray) {
                    stroke.dashStyle = L.Util.isArray(options.dashArray) ?
                        options.dashArray.join(' ') :
                        options.dashArray.replace(/( *, *)/g, ' ');
                } else {
                    stroke.dashStyle = '';
                }
                stroke.endcap = options.lineCap.replace('butt', 'flat');
                stroke.joinstyle = options.lineJoin;

            } else if (stroke) {
                container.removeChild(stroke);
                layer._stroke = null;
            }

            if (options.fill) {
                if (!fill) {
                    fill = layer._fill = L.SVG.create('fill');
                }
                container.appendChild(fill);
                fill.color = options.fillColor || options.color;
                fill.opacity = options.fillOpacity;

            } else if (fill) {
                container.removeChild(fill);
                layer._fill = null;
            }
        },

        _updateCircle: function (layer) {
            var p = layer._point.round(),
                r = Math.round(layer._radius),
                r2 = Math.round(layer._radiusY || r);

            this._setPath(layer, layer._empty() ? 'M0 0' :
            'AL ' + p.x + ',' + p.y + ' ' + r + ',' + r2 + ' 0,' + (65535 * 360));
        },

        _setPath: function (layer, path) {
            layer._path.v = path;
        },

        _bringToFront: function (layer) {
            L.DomUtil.toFront(layer._container);
        },

        _bringToBack: function (layer) {
            L.DomUtil.toBack(layer._container);
        }
    });

    if (L.Browser.vml) {
        L.SVG.create = (function () {
            try {
                document.namespaces.add('lvml', 'urn:schemas-microsoft-com:vml');
                return function (name) {
                    return document.createElement('<lvml:' + name + ' class="lvml">');
                };
            } catch (e) {
                return function (name) {
                    return document.createElement('<' + name + ' xmlns="urn:schemas-microsoft.com:vml" class="lvml">');
                };
            }
        })();
    }



    /*
     * @class Canvas
     * @inherits Renderer
     * @aka L.Canvas
     *
     * Allows vector layers to be displayed with [`<canvas>`](https://developer.mozilla.org/docs/Web/API/Canvas_API).
     * Inherits `Renderer`.
     *
     * Due to [technical limitations](http://caniuse.com/#search=canvas), Canvas is not
     * available in all web browsers, notably IE8, and overlapping geometries might
     * not display properly in some edge cases.
     *
     * @example
     *
     * Use Canvas by default for all paths in the map:
     *
     * ```js
     * var map = L.map('map', {
     * 	renderer: L.canvas();
     * });
     * ```
     *
     * Use a Canvas renderer with extra padding for specific vector geometries:
     *
     * ```js
     * var map = L.map('map');
     * var myRenderer = L.canvas({ padding: 0.5 });
     * var line = L.polyline( coordinates, { renderer: myRenderer } );
     * var circle = L.circle( center, { renderer: myRenderer } );
     * ```
     */

    L.Canvas = L.Renderer.extend({

        onAdd: function () {
            L.Renderer.prototype.onAdd.call(this);

            this._layers = this._layers || {};

            // Redraw vectors since canvas is cleared upon removal,
            // in case of removing the renderer itself from the map.
            this._draw();
        },

        _initContainer: function () {
            var container = this._container = document.createElement('canvas');

            L.DomEvent
                .on(container, 'mousemove', L.Util.throttle(this._onMouseMove, 32, this), this)
                .on(container, 'click dblclick mousedown mouseup contextmenu', this._onClick, this)
                .on(container, 'mouseout', this._handleMouseOut, this);

            this._ctx = container.getContext('2d');
        },

        _update: function () {
            if (this._map._animatingZoom && this._bounds) { return; }

            this._drawnLayers = {};

            L.Renderer.prototype._update.call(this);

            var b = this._bounds,
                container = this._container,
                size = b.getSize(),
                m = L.Browser.retina ? 2 : 1;

            L.DomUtil.setPosition(container, b.min);

            // set canvas size (also clearing it); use double size on retina
            container.width = m * size.x;
            container.height = m * size.y;
            container.style.width = size.x + 'px';
            container.style.height = size.y + 'px';

            if (L.Browser.retina) {
                this._ctx.scale(2, 2);
            }

            // translate so we use the same path coordinates after canvas element moves
            this._ctx.translate(-b.min.x, -b.min.y);
        },

        _initPath: function (layer) {
            this._updateDashArray(layer);
            this._layers[L.stamp(layer)] = layer;
        },

        _addPath: L.Util.falseFn,

        _removePath: function (layer) {
            layer._removed = true;
            this._requestRedraw(layer);
        },

        _updatePath: function (layer) {
            this._redrawBounds = layer._pxBounds;
            this._draw(true);
            layer._project();
            layer._update();
            this._draw();
            this._redrawBounds = null;
        },

        _updateStyle: function (layer) {
            this._updateDashArray(layer);
            this._requestRedraw(layer);
        },

        _updateDashArray: function (layer) {
            if (layer.options.dashArray) {
                var parts = layer.options.dashArray.split(','),
                    dashArray = [],
                    i;
                for (i = 0; i < parts.length; i++) {
                    dashArray.push(Number(parts[i]));
                }
                layer.options._dashArray = dashArray;
            }
        },

        _requestRedraw: function (layer) {
            if (!this._map) { return; }

            var padding = (layer.options.weight || 0) + 1;
            this._redrawBounds = this._redrawBounds || new L.Bounds();
            this._redrawBounds.extend(layer._pxBounds.min.subtract([padding, padding]));
            this._redrawBounds.extend(layer._pxBounds.max.add([padding, padding]));

            this._redrawRequest = this._redrawRequest || L.Util.requestAnimFrame(this._redraw, this);
        },

        _redraw: function () {
            this._redrawRequest = null;

            this._draw(true); // clear layers in redraw bounds
            this._draw(); // draw layers

            this._redrawBounds = null;
        },

        _draw: function (clear) {
            this._clear = clear;
            var layer, bounds = this._redrawBounds;
            this._ctx.save();
            if (bounds) {
                this._ctx.beginPath();
                this._ctx.rect(bounds.min.x, bounds.min.y, bounds.max.x - bounds.min.x, bounds.max.y - bounds.min.y);
                this._ctx.clip();
            }

            for (var id in this._layers) {
                layer = this._layers[id];
                if (!bounds || layer._pxBounds.intersects(bounds)) {
                    layer._updatePath();
                }
                if (clear && layer._removed) {
                    delete layer._removed;
                    delete this._layers[id];
                }
            }
            this._ctx.restore();  // Restore state before clipping.
        },

        _updatePoly: function (layer, closed) {

            var i, j, len2, p,
                parts = layer._parts,
                len = parts.length,
                ctx = this._ctx;

            if (!len) { return; }

            this._drawnLayers[layer._leaflet_id] = layer;

            ctx.beginPath();

            if (ctx.setLineDash) {
                ctx.setLineDash(layer.options && layer.options._dashArray || []);
            }

            for (i = 0; i < len; i++) {
                for (j = 0, len2 = parts[i].length; j < len2; j++) {
                    p = parts[i][j];
                    ctx[j ? 'lineTo' : 'moveTo'](p.x, p.y);
                }
                if (closed) {
                    ctx.closePath();
                }
            }

            this._fillStroke(ctx, layer);

            // TODO optimization: 1 fill/stroke for all features with equal style instead of 1 for each feature
        },

        _updateCircle: function (layer) {

            if (layer._empty()) { return; }

            var p = layer._point,
                ctx = this._ctx,
                r = layer._radius,
                s = (layer._radiusY || r) / r;

            this._drawnLayers[layer._leaflet_id] = layer;

            if (s !== 1) {
                ctx.save();
                ctx.scale(1, s);
            }

            ctx.beginPath();
            ctx.arc(p.x, p.y / s, r, 0, Math.PI * 2, false);

            if (s !== 1) {
                ctx.restore();
            }

            this._fillStroke(ctx, layer);
        },

        _fillStroke: function (ctx, layer) {
            var clear = this._clear,
                options = layer.options;

            ctx.globalCompositeOperation = clear ? 'destination-out' : 'source-over';

            if (options.fill) {
                ctx.globalAlpha = clear ? 1 : options.fillOpacity;
                ctx.fillStyle = options.fillColor || options.color;
                ctx.fill(options.fillRule || 'evenodd');
            }

            if (options.stroke && options.weight !== 0) {
                ctx.globalAlpha = clear ? 1 : options.opacity;

                // if clearing shape, do it with the previously drawn line width
                layer._prevWeight = ctx.lineWidth = clear ? layer._prevWeight + 1 : options.weight;

                ctx.strokeStyle = options.color;
                ctx.lineCap = options.lineCap;
                ctx.lineJoin = options.lineJoin;
                ctx.stroke();
            }
        },

        // Canvas obviously doesn't have mouse events for individual drawn objects,
        // so we emulate that by calculating what's under the mouse on mousemove/click manually

        _onClick: function (e) {
            var point = this._map.mouseEventToLayerPoint(e), layers = [], layer;

            for (var id in this._layers) {
                layer = this._layers[id];
                if (layer.options.interactive && layer._containsPoint(point)) {
                    L.DomEvent._fakeStop(e);
                    layers.push(layer);
                }
            }
            if (layers.length)  {
                this._fireEvent(layers, e);
            }
        },

        _onMouseMove: function (e) {
            if (!this._map || this._map.dragging.moving() || this._map._animatingZoom) { return; }

            var point = this._map.mouseEventToLayerPoint(e);
            this._handleMouseOut(e, point);
            this._handleMouseHover(e, point);
        },


        _handleMouseOut: function (e, point) {
            var layer = this._hoveredLayer;
            if (layer && (e.type === 'mouseout' || !layer._containsPoint(point))) {
                // if we're leaving the layer, fire mouseout
                L.DomUtil.removeClass(this._container, 'leaflet-interactive');
                this._fireEvent([layer], e, 'mouseout');
                this._hoveredLayer = null;
            }
        },

        _handleMouseHover: function (e, point) {
            var id, layer;

            for (id in this._drawnLayers) {
                layer = this._drawnLayers[id];
                if (layer.options.interactive && layer._containsPoint(point)) {
                    L.DomUtil.addClass(this._container, 'leaflet-interactive'); // change cursor
                    this._fireEvent([layer], e, 'mouseover');
                    this._hoveredLayer = layer;
                }
            }

            if (this._hoveredLayer) {
                this._fireEvent([this._hoveredLayer], e);
            }
        },

        _fireEvent: function (layers, e, type) {
            this._map._fireDOMEvent(e, type || e.type, layers);
        },

        // TODO _bringToFront & _bringToBack, pretty tricky

        _bringToFront: L.Util.falseFn,
        _bringToBack: L.Util.falseFn
    });

// @namespace Browser; @property canvas: Boolean
// `true` when the browser supports [`<canvas>`](https://developer.mozilla.org/docs/Web/API/Canvas_API).
    L.Browser.canvas = (function () {
        return !!document.createElement('canvas').getContext;
    }());

// @namespace Canvas
// @factory L.canvas(options?: Canvas options)
// Creates a Canvas renderer with the given options.
    L.canvas = function (options) {
        return L.Browser.canvas ? new L.Canvas(options) : null;
    };

    L.Polyline.prototype._containsPoint = function (p, closed) {
        var i, j, k, len, len2, part,
            w = this._clickTolerance();

        if (!this._pxBounds.contains(p)) { return false; }

        // hit detection for polylines
        for (i = 0, len = this._parts.length; i < len; i++) {
            part = this._parts[i];

            for (j = 0, len2 = part.length, k = len2 - 1; j < len2; k = j++) {
                if (!closed && (j === 0)) { continue; }

                if (L.LineUtil.pointToSegmentDistance(p, part[k], part[j]) <= w) {
                    return true;
                }
            }
        }
        return false;
    };

    L.Polygon.prototype._containsPoint = function (p) {
        var inside = false,
            part, p1, p2, i, j, k, len, len2;

        if (!this._pxBounds.contains(p)) { return false; }

        // ray casting algorithm for detecting if point is in polygon
        for (i = 0, len = this._parts.length; i < len; i++) {
            part = this._parts[i];

            for (j = 0, len2 = part.length, k = len2 - 1; j < len2; k = j++) {
                p1 = part[j];
                p2 = part[k];

                if (((p1.y > p.y) !== (p2.y > p.y)) && (p.x < (p2.x - p1.x) * (p.y - p1.y) / (p2.y - p1.y) + p1.x)) {
                    inside = !inside;
                }
            }
        }

        // also check if it's on polygon stroke
        return inside || L.Polyline.prototype._containsPoint.call(this, p, true);
    };

    L.CircleMarker.prototype._containsPoint = function (p) {
        return p.distanceTo(this._point) <= this._radius + this._clickTolerance();
    };



    /*
     * @class GeoJSON
     * @aka L.GeoJSON
     * @inherits FeatureGroup
     *
     * Represents a GeoJSON object or an array of GeoJSON objects. Allows you to parse
     * GeoJSON data and display it on the map. Extends `FeatureGroup`.
     *
     * @example
     *
     * ```js
     * L.geoJson(data, {
     * 	style: function (feature) {
     * 		return {color: feature.properties.color};
     * 	}
     * }).bindPopup(function (layer) {
     * 	return layer.feature.properties.description;
     * }).addTo(map);
     * ```
     */

    L.GeoJSON = L.FeatureGroup.extend({

        /* @section
         * @aka GeoJSON options
         *
         * @option pointToLayer: Function = *
         * A `Function` defining how GeoJSON points spawn Leaflet layers. It is internally
         * called when data is added, passing the GeoJSON point feature and its `LatLng`.
         * The default is to spawn a default `Marker`:
         * ```js
         * function(geoJsonPoint, latlng) {
         * 	return L.marker(latlng);
         * }
         * ```
         *
         * @option style: Function = *
         * A `Function` defining the `Path options` for styling GeoJSON lines and polygons,
         * called internally when data is added.
         * The default value is to not override any defaults:
         * ```js
         * function (geoJsonFeature) {
         * 	return {}
         * }
         * ```
         *
         * @option onEachFeature: Function = *
         * A `Function` that will be called once for each created `Layer`, after it has
         * been created and styled. Useful for attaching events and popups to features.
         * The default is to do nothing with the newly created layers:
         * ```js
         * function (layer) {}
         * ```
         *
         * @option filter: Function = *
         * A `Function` that will be used to decide whether to show a feature or not.
         * The default is to show all features:
         * ```js
         * function (geoJsonFeature) {
         * 	return true;
         * }
         * ```
         *
         * @option coordsToLatLng: Function = *
         * A `Function` that will be used for converting GeoJSON coordinates to `LatLng`s.
         * The default is the `coordsToLatLng` static method.
         */

        initialize: function (geojson, options) {
            L.setOptions(this, options);

            this._layers = {};

            if (geojson) {
                this.addData(geojson);
            }
        },

        addData: function (geojson) {
            var features = L.Util.isArray(geojson) ? geojson : geojson.features,
                i, len, feature;

            if (features) {
                for (i = 0, len = features.length; i < len; i++) {
                    // only add this if geometry or geometries are set and not null
                    feature = features[i];
                    if (feature.geometries || feature.geometry || feature.features || feature.coordinates) {
                        this.addData(feature);
                    }
                }
                return this;
            }

            var options = this.options;

            if (options.filter && !options.filter(geojson)) { return this; }

            var layer = L.GeoJSON.geometryToLayer(geojson, options);
            if (!layer) {
                return this;
            }
            layer.feature = L.GeoJSON.asFeature(geojson);
            layer._data = layer.feature;

            layer.defaultOptions = layer.options;
            this.resetStyle(layer);

            if (options.onEachFeature) {
                options.onEachFeature(geojson, layer);
            }

            return this.addLayer(layer);
        },

        resetStyle: function (layer) {
            // reset any custom styles
            layer.options = L.Util.extend({}, layer.defaultOptions);
            this._setLayerStyle(layer, this.options.style);
            return this;
        },

        setStyle: function (style) {
            return this.eachLayer(function (layer) {
                this._setLayerStyle(layer, style);
            }, this);
        },

        _setLayerStyle: function (layer, style) {
            if (typeof style === 'function') {
                style = style(layer.feature);
            }
            if (layer.setStyle) {
                layer.setStyle(style);
            }
        }
    });

// @section
// There are several static functions which can be called without instantiating L.GeoJSON:
    L.extend(L.GeoJSON, {
        // @function geometryToLayer(featureData: Object, options?: GeoJSON options): Layer
        // Creates a `Layer` from a given GeoJSON feature. Can use a custom
        // [`pointToLayer`](#geojson-pointtolayer) and/or [`coordsToLatLng`](#geojson-coordstolatlng)
        // functions if provided as options.
        geometryToLayer: function (geojson, options) {

            var geometry = geojson.type === 'Feature' ? geojson.geometry : geojson,
                coords = geometry ? geometry.coordinates : null,
                layers = [],
                pointToLayer = options && options.pointToLayer,
                coordsToLatLng = options && options.coordsToLatLng || this.coordsToLatLng,
                latlng, latlngs, i, len;

            if (!coords && !geometry) {
                return null;
            }

            switch (geometry.type) {
                case 'Point':
                    latlng = coordsToLatLng(coords);
                    return pointToLayer ? pointToLayer(geojson, latlng) : new L.Marker(latlng);

                case 'MultiPoint':
                    for (i = 0, len = coords.length; i < len; i++) {
                        latlng = coordsToLatLng(coords[i]);
                        layers.push(pointToLayer ? pointToLayer(geojson, latlng) : new L.Marker(latlng));
                    }
                    return new L.FeatureGroup(layers);

                case 'LineString':
                case 'MultiLineString':
                    latlngs = this.coordsToLatLngs(coords, geometry.type === 'LineString' ? 0 : 1, coordsToLatLng);
                    return new L.Polyline(latlngs, options);

                case 'Polygon':
                case 'MultiPolygon':
                    latlngs = this.coordsToLatLngs(coords, geometry.type === 'Polygon' ? 1 : 2, coordsToLatLng);
                    return new L.Polygon(latlngs, options);

                case 'GeometryCollection':
                    for (i = 0, len = geometry.geometries.length; i < len; i++) {
                        var layer = this.geometryToLayer({
                            geometry: geometry.geometries[i],
                            type: 'Feature',
                            properties: geojson.properties
                        }, options);

                        if (layer) {
                            layers.push(layer);
                        }
                    }
                    return new L.FeatureGroup(layers);

                default:
                    throw new Error('Invalid GeoJSON object.');
            }
        },

        // @function coordsToLatLng(coords: Array): LatLng
        // Creates a `LatLng` object from an array of 2 numbers (longitude, latitude)
        // or 3 numbers (longitude, latitude, altitude) used in GeoJSON for points.
        coordsToLatLng: function (coords) {
            return new L.LatLng(coords[1], coords[0], coords[2]);
        },

        // @function coordsToLatLngs(coords: Array, levelsDeep?: Number, coordsToLatLng?: Function): Array
        // Creates a multidimensional array of `LatLng`s from a GeoJSON coordinates array.
        // `levelsDeep` specifies the nesting level (0 is for an array of points, 1 for an array of arrays of points, etc., 0 by default).
        // Can use a custom [`coordsToLatLng`](#geojson-coordstolatlng) function.
        coordsToLatLngs: function (coords, levelsDeep, coordsToLatLng) {
            var latlngs = [];

            for (var i = 0, len = coords.length, latlng; i < len; i++) {
                latlng = levelsDeep ?
                    this.coordsToLatLngs(coords[i], levelsDeep - 1, coordsToLatLng) :
                    (coordsToLatLng || this.coordsToLatLng)(coords[i]);

                latlngs.push(latlng);
            }

            return latlngs;
        },

        // @function latLngToCoords(latlng: LatLng): Array
        // Reverse of [`coordsToLatLng`](#geojson-coordstolatlng)
        latLngToCoords: function (latlng) {
            return latlng.alt !== undefined ?
                [latlng.lng, latlng.lat, latlng.alt] :
                [latlng.lng, latlng.lat];
        },

        // @function latLngsToCoords(latlngs: Array, levelsDeep?: Number, closed?: Boolean): Array
        // Reverse of [`coordsToLatLngs`](#geojson-coordstolatlngs)
        // `closed` determines whether the first point should be appended to the end of the array to close the feature, only used when `levelsDeep` is 0. False by default.
        latLngsToCoords: function (latlngs, levelsDeep, closed) {
            var coords = [];

            for (var i = 0, len = latlngs.length; i < len; i++) {
                coords.push(levelsDeep ?
                    L.GeoJSON.latLngsToCoords(latlngs[i], levelsDeep - 1, closed) :
                    L.GeoJSON.latLngToCoords(latlngs[i]));
            }

            if (!levelsDeep && closed) {
                coords.push(coords[0]);
            }

            return coords;
        },

        getFeature: function (layer, newGeometry) {
            return layer.feature ?
                L.extend({}, layer.feature, {geometry: newGeometry}) :
                L.GeoJSON.asFeature(newGeometry);
        },

        // @function asFeature(geojson: Object): Object
        // Normalize GeoJSON geometries/features into GeoJSON features.
        asFeature: function (geojson) {
            if (geojson.type === 'Feature') {
                return geojson;
            }

            return {
                type: 'Feature',
                properties: {},
                geometry: geojson
            };
        }
    });

    var PointToGeoJSON = {
        toGeoJSON: function () {
            return L.GeoJSON.getFeature(this, {
                type: 'Point',
                coordinates: L.GeoJSON.latLngToCoords(this.getLatLng())
            });
        }
    };

    L.Marker.include(PointToGeoJSON);

// @namespace CircleMarker
// @method toGeoJSON(): Object
// Returns a [`GeoJSON`](http://en.wikipedia.org/wiki/GeoJSON) representation of the circle marker (as a GeoJSON `Point` Feature).
    L.Circle.include(PointToGeoJSON);
    L.CircleMarker.include(PointToGeoJSON);


// @namespace Polyline
// @method toGeoJSON(): Object
// Returns a [`GeoJSON`](http://en.wikipedia.org/wiki/GeoJSON) representation of the polyline (as a GeoJSON `LineString` or `MultiLineString` Feature).
    L.Polyline.prototype.toGeoJSON = function () {
        var multi = !L.Polyline._flat(this._latlngs);

        var coords = L.GeoJSON.latLngsToCoords(this._latlngs, multi ? 1 : 0);

        return L.GeoJSON.getFeature(this, {
            type: (multi ? 'Multi' : '') + 'LineString',
            coordinates: coords
        });
    };

// @namespace Polygon
// @method toGeoJSON(): Object
// Returns a [`GeoJSON`](http://en.wikipedia.org/wiki/GeoJSON) representation of the polygon (as a GeoJSON `Polygon` or `MultiPolygon` Feature).
    L.Polygon.prototype.toGeoJSON = function () {
        var holes = !L.Polyline._flat(this._latlngs),
            multi = holes && !L.Polyline._flat(this._latlngs[0]);

        var coords = L.GeoJSON.latLngsToCoords(this._latlngs, multi ? 2 : holes ? 1 : 0, true);

        if (!holes) {
            coords = [coords];
        }

        return L.GeoJSON.getFeature(this, {
            type: (multi ? 'Multi' : '') + 'Polygon',
            coordinates: coords
        });
    };


// @namespace LayerGroup
    L.LayerGroup.include({
        toMultiPoint: function () {
            var coords = [];

            this.eachLayer(function (layer) {
                coords.push(layer.toGeoJSON().geometry.coordinates);
            });

            return L.GeoJSON.getFeature(this, {
                type: 'MultiPoint',
                coordinates: coords
            });
        },

        // @method toGeoJSON(): Object
        // Returns a [`GeoJSON`](http://en.wikipedia.org/wiki/GeoJSON) representation of the layer group (as a GeoJSON `GeometryCollection`).
        toGeoJSON: function () {

            var type = this.feature && this.feature.geometry && this.feature.geometry.type;

            if (type === 'MultiPoint') {
                return this.toMultiPoint();
            }

            var isGeometryCollection = type === 'GeometryCollection',
                jsons = [];

            this.eachLayer(function (layer) {
                if (layer.toGeoJSON) {
                    var json = layer.toGeoJSON();
                    jsons.push(isGeometryCollection ? json.geometry : L.GeoJSON.asFeature(json));
                }
            });

            if (isGeometryCollection) {
                return L.GeoJSON.getFeature(this, {
                    geometries: jsons,
                    type: 'GeometryCollection'
                });
            }

            return {
                type: 'FeatureCollection',
                features: jsons
            };
        }
    });

// @namespace GeoJSON
// @factory L.geoJSON(geojson?: Object, options?: GeoJSON options)
// Creates a GeoJSON layer. Optionally accepts an object in
// [GeoJSON format](http://geojson.org/geojson-spec.html) to display on the map
// (you can alternatively add it later with `addData` method) and an `options` object.
    L.geoJSON = function (geojson, options) {
        return new L.GeoJSON(geojson, options);
    };
// Backward compatibility.
    L.geoJson = L.geoJSON;



    /*
     * @namespace DomEvent
     * Utility functions to work with the [DOM events](https://developer.mozilla.org/docs/Web/API/Event), used by Leaflet internally.
     */

// Inspired by John Resig, Dean Edwards and YUI addEvent implementations.



    var eventsKey = '_leaflet_events';

    L.DomEvent = {

        // @function on(el: HTMLElement, types: String, fn: Function, context?: Object): this
        // Adds a listener function (`fn`) to a particular DOM event type of the
        // element `el`. You can optionally specify the context of the listener
        // (object the `this` keyword will point to). You can also pass several
        // space-separated types (e.g. `'click dblclick'`).

        // @alternative
        // @function on(el: HTMLElement, eventMap: Object, context?: Object): this
        // Adds a set of type/listener pairs, e.g. `{click: onClick, mousemove: onMouseMove}`
        on: function (obj, types, fn, context) {

            if (typeof types === 'object') {
                for (var type in types) {
                    this._on(obj, type, types[type], fn);
                }
            } else {
                types = L.Util.splitWords(types);

                for (var i = 0, len = types.length; i < len; i++) {
                    this._on(obj, types[i], fn, context);
                }
            }

            return this;
        },

        // @function off(el: HTMLElement, types: String, fn: Function, context?: Object)
        // Removes a previously added listener function. If no function is specified,
        // it will remove all the listeners of that particular DOM event from the element.
        // Note that if you passed a custom context to on, you must pass the same
        // context to `off` in order to remove the listener.

        // @alternative
        // @function off(el: HTMLElement, types: eventMap: Object, context?: Object): this
        off: function (obj, types, fn, context) {

            if (typeof types === 'object') {
                for (var type in types) {
                    this._off(obj, type, types[type], fn);
                }
            } else {
                types = L.Util.splitWords(types);

                for (var i = 0, len = types.length; i < len; i++) {
                    this._off(obj, types[i], fn, context);
                }
            }

            return this;
        },

        _on: function (obj, type, fn, context) {
            var id = type + L.stamp(fn) + (context ? '_' + L.stamp(context) : '');

            if (obj[eventsKey] && obj[eventsKey][id]) { return this; }

            var handler = function (e) {
                return fn.call(context || obj, e || window.event);
            };

            var originalHandler = handler;

            if (L.Browser.pointer && type.indexOf('touch') === 0) {
                this.addPointerListener(obj, type, handler, id);

            } else if (L.Browser.touch && (type === 'dblclick') && this.addDoubleTapListener) {
                this.addDoubleTapListener(obj, handler, id);

            } else if ('addEventListener' in obj) {

                if (type === 'mousewheel') {
                    obj.addEventListener('onwheel' in obj ? 'wheel' : 'mousewheel', handler, false);

                } else if ((type === 'mouseenter') || (type === 'mouseleave')) {
                    handler = function (e) {
                        e = e || window.event;
                        if (L.DomEvent._isExternalTarget(obj, e)) {
                            originalHandler(e);
                        }
                    };
                    obj.addEventListener(type === 'mouseenter' ? 'mouseover' : 'mouseout', handler, false);

                } else {
                    if (type === 'click' && L.Browser.android) {
                        handler = function (e) {
                            return L.DomEvent._filterClick(e, originalHandler);
                        };
                    }
                    obj.addEventListener(type, handler, false);
                }

            } else if ('attachEvent' in obj) {
                obj.attachEvent('on' + type, handler);
            }

            obj[eventsKey] = obj[eventsKey] || {};
            obj[eventsKey][id] = handler;

            return this;
        },

        _off: function (obj, type, fn, context) {

            var id = type + L.stamp(fn) + (context ? '_' + L.stamp(context) : ''),
                handler = obj[eventsKey] && obj[eventsKey][id];

            if (!handler) { return this; }

            if (L.Browser.pointer && type.indexOf('touch') === 0) {
                this.removePointerListener(obj, type, id);

            } else if (L.Browser.touch && (type === 'dblclick') && this.removeDoubleTapListener) {
                this.removeDoubleTapListener(obj, id);

            } else if ('removeEventListener' in obj) {

                if (type === 'mousewheel') {
                    obj.removeEventListener('onwheel' in obj ? 'wheel' : 'mousewheel', handler, false);

                } else {
                    obj.removeEventListener(
                        type === 'mouseenter' ? 'mouseover' :
                            type === 'mouseleave' ? 'mouseout' : type, handler, false);
                }

            } else if ('detachEvent' in obj) {
                obj.detachEvent('on' + type, handler);
            }

            obj[eventsKey][id] = null;

            return this;
        },

        // @function stopPropagation(ev: DOMEvent): this
        // Stop the given event from propagation to parent elements. Used inside the listener functions:
        // ```js
        // L.DomEvent.on(div, 'click', function (ev) {
        // 	L.DomEvent.stopPropagation(ev);
        // });
        // ```
        stopPropagation: function (e) {

            if (e.stopPropagation) {
                e.stopPropagation();
            } else if (e.originalEvent) {  // In case of Leaflet event.
                e.originalEvent._stopped = true;
            } else {
                e.cancelBubble = true;
            }
            L.DomEvent._skipped(e);

            return this;
        },

        // @function disableScrollPropagation(el: HTMLElement): this
        // Adds `stopPropagation` to the element's `'mousewheel'` events (plus browser variants).
        disableScrollPropagation: function (el) {
            return L.DomEvent.on(el, 'mousewheel', L.DomEvent.stopPropagation);
        },

        // @function disableClickPropagation(el: HTMLElement): this
        // Adds `stopPropagation` to the element's `'click'`, `'doubleclick'`,
        // `'mousedown'` and `'touchstart'` events (plus browser variants).
        disableClickPropagation: function (el) {
            var stop = L.DomEvent.stopPropagation;

            L.DomEvent.on(el, L.Draggable.START.join(' '), stop);

            return L.DomEvent.on(el, {
                click: L.DomEvent._fakeStop,
                dblclick: stop
            });
        },

        // @function preventDefault(ev: DOMEvent): this
        // Prevents the default action of the DOM Event `ev` from happening (such as
        // following a link in the href of the a element, or doing a POST request
        // with page reload when a `<form>` is submitted).
        // Use it inside listener functions.
        preventDefault: function (e) {

            if (e.preventDefault) {
                e.preventDefault();
            } else {
                e.returnValue = false;
            }
            return this;
        },

        // @function stop(ev): this
        // Does `stopPropagation` and `preventDefault` at the same time.
        stop: function (e) {
            return L.DomEvent
                .preventDefault(e)
                .stopPropagation(e);
        },

        // @function getMousePosition(ev: DOMEvent, container?: HTMLElement): Point
        // Gets normalized mouse position from a DOM event relative to the
        // `container` or to the whole page if not specified.
        getMousePosition: function (e, container) {
            if (!container) {
                return new L.Point(e.clientX, e.clientY);
            }

            var rect = container.getBoundingClientRect();

            return new L.Point(
                e.clientX - rect.left - container.clientLeft,
                e.clientY - rect.top - container.clientTop);
        },

        // @function getWheelDelta(ev: DOMEvent): Number
        // Gets normalized wheel delta from a mousewheel DOM event, in vertical
        // pixels scrolled (negative if scrolling down).
        // Events from pointing devices without precise scrolling are mapped to
        // a best guess of between 50-60 pixels.
        getWheelDelta: function (e) {
            return (e.deltaY && e.deltaMode === 0) ? -e.deltaY :        // Pixels
                (e.deltaY && e.deltaMode === 1) ? -e.deltaY * 18 :   // Lines
                    (e.deltaY && e.deltaMode === 2) ? -e.deltaY * 52 :   // Pages
                        (e.deltaX || e.deltaZ) ? 0 :	// Skip horizontal/depth wheel events
                            e.wheelDelta ? (e.wheelDeltaY || e.wheelDelta) / 2 : // Legacy IE pixels
                                (e.detail && Math.abs(e.detail) < 32765) ? -e.detail * 18 : // Legacy Moz lines
                                    e.detail ? e.detail / -32765 * 52 : // Legacy Moz pages
                                        0;
        },

        _skipEvents: {},

        _fakeStop: function (e) {
            // fakes stopPropagation by setting a special event flag, checked/reset with L.DomEvent._skipped(e)
            L.DomEvent._skipEvents[e.type] = true;
        },

        _skipped: function (e) {
            var skipped = this._skipEvents[e.type];
            // reset when checking, as it's only used in map container and propagates outside of the map
            this._skipEvents[e.type] = false;
            return skipped;
        },

        // check if element really left/entered the event target (for mouseenter/mouseleave)
        _isExternalTarget: function (el, e) {

            var related = e.relatedTarget;

            if (!related) { return true; }

            try {
                while (related && (related !== el)) {
                    related = related.parentNode;
                }
            } catch (err) {
                return false;
            }
            return (related !== el);
        },

        // this is a horrible workaround for a bug in Android where a single touch triggers two click events
        _filterClick: function (e, handler) {
            var timeStamp = (e.timeStamp || (e.originalEvent && e.originalEvent.timeStamp)),
                elapsed = L.DomEvent._lastClick && (timeStamp - L.DomEvent._lastClick);

            // are they closer together than 500ms yet more than 100ms?
            // Android typically triggers them ~300ms apart while multiple listeners
            // on the same event should be triggered far faster;
            // or check if click is simulated on the element, and if it is, reject any non-simulated events

            if ((elapsed && elapsed > 100 && elapsed < 500) || (e.target._simulatedClick && !e._simulated)) {
                L.DomEvent.stop(e);
                return;
            }
            L.DomEvent._lastClick = timeStamp;

            handler(e);
        }
    };

// @function addListener(…): this
// Alias to [`L.DomEvent.on`](#domevent-on)
    L.DomEvent.addListener = L.DomEvent.on;

// @function removeListener(…): this
// Alias to [`L.DomEvent.off`](#domevent-off)
    L.DomEvent.removeListener = L.DomEvent.off;



    /*
     * @class Draggable
     * @aka L.Draggable
     * @inherits Evented
     *
     * A class for making DOM elements draggable (including touch support).
     * Used internally for map and marker dragging. Only works for elements
     * that were positioned with [`L.DomUtil.setPosition`](#domutil-setposition).
     *
     * @example
     * ```js
     * var draggable = new L.Draggable(elementToDrag);
     * draggable.enable();
     * ```
     */

    L.Draggable = L.Evented.extend({

        options: {
            // @option clickTolerance: Number = 3
            // The max number of pixels a user can shift the mouse pointer during a click
            // for it to be considered a valid click (as opposed to a mouse drag).
            clickTolerance: 3
        },

        statics: {
            START: L.Browser.touch ? ['touchstart', 'mousedown'] : ['mousedown'],
            END: {
                mousedown: 'mouseup',
                touchstart: 'touchend',
                pointerdown: 'touchend',
                MSPointerDown: 'touchend'
            },
            MOVE: {
                mousedown: 'mousemove',
                touchstart: 'touchmove',
                pointerdown: 'touchmove',
                MSPointerDown: 'touchmove'
            }
        },

        // @constructor L.Draggable(el: HTMLElement, dragHandle?: HTMLElement, preventOutline: Boolean)
        // Creates a `Draggable` object for moving `el` when you start dragging the `dragHandle` element (equals `el` itself by default).
        initialize: function (element, dragStartTarget, preventOutline) {
            this._element = element;
            this._dragStartTarget = dragStartTarget || element;
            this._preventOutline = preventOutline;
        },

        // @method enable()
        // Enables the dragging ability
        enable: function () {
            if (this._enabled) { return; }

            L.DomEvent.on(this._dragStartTarget, L.Draggable.START.join(' '), this._onDown, this);

            this._enabled = true;
        },

        // @method disable()
        // Disables the dragging ability
        disable: function () {
            if (!this._enabled) { return; }

            L.DomEvent.off(this._dragStartTarget, L.Draggable.START.join(' '), this._onDown, this);

            this._enabled = false;
            this._moved = false;
        },

        _onDown: function (e) {

            var first = e.touches ? e.touches[0] : e;

            var vanchart = this.map.vanchart;
            if(vanchart && vanchart.components.rangeLegend){
                var rangeLegend = vanchart.components.rangeLegend;
                if(rangeLegend.componentOption.visible){
                    if(VanUtils.containsPoint(rangeLegend.bounds, [first.clientX, first.clientY])){
                        return;
                    }
                }
            }

            // Ignore simulated events, since we handle both touch and
            // mouse explicitly; otherwise we risk getting duplicates of
            // touch events, see #4315.
            if (e._simulated) { return; }

            this._moved = false;

            if (L.DomUtil.hasClass(this._element, 'leaflet-zoom-anim')) { return; }

            if (L.Draggable._dragging || e.shiftKey || ((e.which !== 1) && (e.button !== 1) && !e.touches) || !this._enabled) { return; }
            L.Draggable._dragging = true;  // Prevent dragging multiple objects at once.

            if (this._preventOutline) {
                L.DomUtil.preventOutline(this._element);
            }

            L.DomUtil.disableImageDrag();
            L.DomUtil.disableTextSelection();

            if (this._moving) { return; }

            // @event down: Event
            // Fired when a drag is about to start.
            this.fire('down');

            this._startPoint = new L.Point(first.clientX, first.clientY);
            this._startPos = this._newPos = L.DomUtil.getPosition(this._element);

            L.DomEvent
                .on(document, L.Draggable.MOVE[e.type], this._onMove, this)
                .on(document, L.Draggable.END[e.type], this._onUp, this);
        },

        _onMove: function (e) {
            // Ignore simulated events, since we handle both touch and
            // mouse explicitly; otherwise we risk getting duplicates of
            // touch events, see #4315.
            if (e._simulated) { return; }

            if (e.touches && e.touches.length > 1) {
                this._moved = true;
                return;
            }

            var first = (e.touches && e.touches.length === 1 ? e.touches[0] : e),
                newPoint = new L.Point(first.clientX, first.clientY),
                offset = newPoint.subtract(this._startPoint);

            if (!offset.x && !offset.y) { return; }
            if (Math.abs(offset.x) + Math.abs(offset.y) < this.options.clickTolerance) { return; }

            L.DomEvent.preventDefault(e);

            if (!this._moved) {
                // @event dragstart: Event
                // Fired when a drag starts
                this.fire('dragstart');

                this._moved = true;
                this._startPos = L.DomUtil.getPosition(this._element).subtract(offset);

                L.DomUtil.addClass(document.body, 'leaflet-dragging');

                this._lastTarget = e.target || e.srcElement;
                // IE and Edge do not give the <use> element, so fetch it
                // if necessary
                if ((window.SVGElementInstance) && (this._lastTarget instanceof SVGElementInstance)) {
                    this._lastTarget = this._lastTarget.correspondingUseElement;
                }
                L.DomUtil.addClass(this._lastTarget, 'leaflet-drag-target');
            }

            this._newPos = this._startPos.add(offset);
            this._moving = true;

            L.Util.cancelAnimFrame(this._animRequest);
            this._lastEvent = e;
            this._animRequest = L.Util.requestAnimFrame(this._updatePosition, this, true);
        },

        _updatePosition: function () {
            var e = {originalEvent: this._lastEvent};

            // @event predrag: Event
            // Fired continuously during dragging *before* each corresponding
            // update of the element's position.
            this.fire('predrag', e);
            L.DomUtil.setPosition(this._element, this._newPos);

            // @event predrag: Event
            // Fired continuously during dragging.
            this.fire('drag', e);
        },

        _onUp: function (e) {
            // Ignore simulated events, since we handle both touch and
            // mouse explicitly; otherwise we risk getting duplicates of
            // touch events, see #4315.
            if (e._simulated) { return; }

            L.DomUtil.removeClass(document.body, 'leaflet-dragging');

            if (this._lastTarget) {
                L.DomUtil.removeClass(this._lastTarget, 'leaflet-drag-target');
                this._lastTarget = null;
            }

            for (var i in L.Draggable.MOVE) {
                L.DomEvent
                    .off(document, L.Draggable.MOVE[i], this._onMove, this)
                    .off(document, L.Draggable.END[i], this._onUp, this);
            }

            L.DomUtil.enableImageDrag();
            L.DomUtil.enableTextSelection();

            if (this._moved && this._moving) {
                // ensure drag is not fired after dragend
                L.Util.cancelAnimFrame(this._animRequest);

                // @event dragend: Event
                // Fired when the drag ends.
                this.fire('dragend', {
                    distance: this._newPos.distanceTo(this._startPos)
                });
            }

            this._moving = false;
            L.Draggable._dragging = false;
        }
    });



    /*
     L.Handler is a base class for handler classes that are used internally to inject
     interaction features like dragging to classes like Map and Marker.
     */

// @class Handler
// @aka L.Handler
// Abstract class for map interaction handlers

    L.Handler = L.Class.extend({
        initialize: function (map) {
            this._map = map;
        },

        // @method enable()
        // Enables the handler
        enable: function () {
            if (this._enabled) { return; }

            this._enabled = true;
            this.addHooks();
        },

        // @method disable()
        // Disables the handler
        disable: function () {
            if (!this._enabled) { return; }

            this._enabled = false;
            this.removeHooks();
        },

        // @method enabled(): Boolean
        // Returns `true` if the handler is enabled
        enabled: function () {
            return !!this._enabled;
        }

        // @section Extension methods
        // Classes inheriting from `Handler` must implement the two following methods:
        // @method addHooks()
        // Called when the handler is enabled, should add event hooks.
        // @method removeHooks()
        // Called when the handler is disabled, should remove the event hooks added previously.
    });



    /*
     * L.Handler.MapDrag is used to make the map draggable (with panning inertia), enabled by default.
     */

// @namespace Map
// @section Interaction Options
    L.Map.mergeOptions({
        // @option dragging: Boolean = true
        // Whether the map be draggable with mouse/touch or not.
        dragging: true,

        // @section Panning Inertia Options
        // @option inertia: Boolean = *
        // If enabled, panning of the map will have an inertia effect where
        // the map builds momentum while dragging and continues moving in
        // the same direction for some time. Feels especially nice on touch
        // devices. Enabled by default unless running on old Android devices.
        inertia: !L.Browser.android23,

        // @option inertiaDeceleration: Number = 3000
        // The rate with which the inertial movement slows down, in pixels/second?.
        inertiaDeceleration: 3400, // px/s^2

        // @option inertiaMaxSpeed: Number = Infinity
        // Max speed of the inertial movement, in pixels/second.
        inertiaMaxSpeed: Infinity, // px/s

        // @option easeLinearity: Number = 0.2
        easeLinearity: 0.2,

        // TODO refactor, move to CRS
        // @option worldCopyJump: Boolean = false
        // With this option enabled, the map tracks when you pan to another "copy"
        // of the world and seamlessly jumps to the original one so that all overlays
        // like markers and vector layers are still visible.
        worldCopyJump: false,

        // @option maxBoundsViscosity: Number = 0.0
        // If `maxBounds` is set, this option will control how solid the bounds
        // are when dragging the map around. The default value of `0.0` allows the
        // user to drag outside the bounds at normal speed, higher values will
        // slow down map dragging outside bounds, and `1.0` makes the bounds fully
        // solid, preventing the user from dragging outside the bounds.
        maxBoundsViscosity: 0.0
    });

    L.Map.Drag = L.Handler.extend({
        addHooks: function () {
            if (!this._draggable) {
                var map = this._map;

                this._draggable = new L.Draggable(map._mapPane, map._container);

                this._draggable.map = map;

                this._draggable.on({
                    down: this._onDown,
                    dragstart: this._onDragStart,
                    drag: this._onDrag,
                    dragend: this._onDragEnd
                }, this);

                this._draggable.on('predrag', this._onPreDragLimit, this);
                if (map.options.worldCopyJump) {
                    this._draggable.on('predrag', this._onPreDragWrap, this);
                    map.on('zoomend', this._onZoomEnd, this);

                    map.whenReady(this._onZoomEnd, this);
                }
            }
            L.DomUtil.addClass(this._map._container, 'leaflet-grab');
            this._draggable.enable();
            this._positions = [];
            this._times = [];
        },

        removeHooks: function () {
            L.DomUtil.removeClass(this._map._container, 'leaflet-grab');
            this._draggable.disable();
        },

        moved: function () {
            return this._draggable && this._draggable._moved;
        },

        moving: function () {
            return this._draggable && this._draggable._moving;
        },

        _onDown: function () {
            this._map._stop();
        },

        _onDragStart: function () {
            var map = this._map;

            if (this._map.options.maxBounds && this._map.options.maxBoundsViscosity) {
                var bounds = L.latLngBounds(this._map.options.maxBounds);

                this._offsetLimit = L.bounds(
                    this._map.latLngToContainerPoint(bounds.getNorthWest()).multiplyBy(-1),
                    this._map.latLngToContainerPoint(bounds.getSouthEast()).multiplyBy(-1)
                        .add(this._map.getSize()));

                this._viscosity = Math.min(1.0, Math.max(0.0, this._map.options.maxBoundsViscosity));
            } else {
                this._offsetLimit = null;
            }

            map
                .fire('movestart')
                .fire('dragstart');

            if (map.options.inertia) {
                this._positions = [];
                this._times = [];
            }
        },

        _onDrag: function (e) {
            if (this._map.options.inertia) {
                var time = this._lastTime = +new Date(),
                    pos = this._lastPos = this._draggable._absPos || this._draggable._newPos;

                this._positions.push(pos);
                this._times.push(time);

                if (time - this._times[0] > 50) {
                    this._positions.shift();
                    this._times.shift();
                }
            }

            this._map
                .fire('move', e)
                .fire('drag', e);
        },

        _onZoomEnd: function () {
            var pxCenter = this._map.getSize().divideBy(2),
                pxWorldCenter = this._map.latLngToLayerPoint([0, 0]);

            this._initialWorldOffset = pxWorldCenter.subtract(pxCenter).x;
            this._worldWidth = this._map.getPixelWorldBounds().getSize().x;
        },

        _viscousLimit: function (value, threshold) {
            return value - (value - threshold) * this._viscosity;
        },

        _onPreDragLimit: function () {
            if (!this._viscosity || !this._offsetLimit) { return; }

            var offset = this._draggable._newPos.subtract(this._draggable._startPos);

            var limit = this._offsetLimit;
            if (offset.x < limit.min.x) { offset.x = this._viscousLimit(offset.x, limit.min.x); }
            if (offset.y < limit.min.y) { offset.y = this._viscousLimit(offset.y, limit.min.y); }
            if (offset.x > limit.max.x) { offset.x = this._viscousLimit(offset.x, limit.max.x); }
            if (offset.y > limit.max.y) { offset.y = this._viscousLimit(offset.y, limit.max.y); }

            this._draggable._newPos = this._draggable._startPos.add(offset);
        },

        _onPreDragWrap: function () {
            // TODO refactor to be able to adjust map pane position after zoom
            var worldWidth = this._worldWidth,
                halfWidth = Math.round(worldWidth / 2),
                dx = this._initialWorldOffset,
                x = this._draggable._newPos.x,
                newX1 = (x - halfWidth + dx) % worldWidth + halfWidth - dx,
                newX2 = (x + halfWidth + dx) % worldWidth - halfWidth - dx,
                newX = Math.abs(newX1 + dx) < Math.abs(newX2 + dx) ? newX1 : newX2;

            this._draggable._absPos = this._draggable._newPos.clone();
            this._draggable._newPos.x = newX;
        },

        _onDragEnd: function (e) {
            var map = this._map,
                options = map.options,

                noInertia = !options.inertia || this._times.length < 2;

            map.fire('dragend', e);

            if (noInertia) {
                map.fire('moveend');

            } else {

                var direction = this._lastPos.subtract(this._positions[0]),
                    duration = (this._lastTime - this._times[0]) / 1000,
                    ease = options.easeLinearity,

                    speedVector = direction.multiplyBy(ease / duration),
                    speed = speedVector.distanceTo([0, 0]),

                    limitedSpeed = Math.min(options.inertiaMaxSpeed, speed),
                    limitedSpeedVector = speedVector.multiplyBy(limitedSpeed / speed),

                    decelerationDuration = limitedSpeed / (options.inertiaDeceleration * ease),
                    offset = limitedSpeedVector.multiplyBy(-decelerationDuration / 2).round();

                if (!offset.x && !offset.y) {
                    map.fire('moveend');

                } else {
                    offset = map._limitOffset(offset, map.options.maxBounds);

                    L.Util.requestAnimFrame(function () {
                        map.panBy(offset, {
                            duration: decelerationDuration,
                            easeLinearity: ease,
                            noMoveStart: true,
                            animate: true
                        });
                    });
                }
            }
        }
    });

// @section Handlers
// @property dragging: Handler
// Map dragging handler (by both mouse and touch).
    L.Map.addInitHook('addHandler', 'dragging', L.Map.Drag);



    /*
     * L.Handler.DoubleClickZoom is used to handle double-click zoom on the map, enabled by default.
     */

// @namespace Map
// @section Interaction Options

    L.Map.mergeOptions({
        // @option doubleClickZoom: Boolean = true
        // Whether the map can be zoomed in by double clicking on it and
        // zoomed out by double clicking while holding shift. If passed
        // `'center'`, double-click zoom will zoom to the center of the
        //  view regardless of where the mouse was.
        doubleClickZoom: true
    });

    L.Map.DoubleClickZoom = L.Handler.extend({
        addHooks: function () {
            this._map.on('dblclick', this._onDoubleClick, this);
        },

        removeHooks: function () {
            this._map.off('dblclick', this._onDoubleClick, this);
        },

        _onDoubleClick: function (e) {
            var map = this._map,
                oldZoom = map.getZoom(),
                delta = map.options.zoomDelta,
                zoom = e.originalEvent.shiftKey ? oldZoom - delta : oldZoom + delta;

            if (map.options.doubleClickZoom === 'center') {
                map.setZoom(zoom);
            } else {
                map.setZoomAround(e.containerPoint, zoom);
            }
        }
    });

// @section Handlers
//
// Map properties include interaction handlers that allow you to control
// interaction behavior in runtime, enabling or disabling certain features such
// as dragging or touch zoom (see `Handler` methods). For example:
//
// ```js
// map.doubleClickZoom.disable();
// ```
//
// @property doubleClickZoom: Handler
// Double click zoom handler.
    L.Map.addInitHook('addHandler', 'doubleClickZoom', L.Map.DoubleClickZoom);



    /*
     * L.Handler.ScrollWheelZoom is used by L.Map to enable mouse scroll wheel zoom on the map.
     */

// @namespace Map
// @section Interaction Options
    L.Map.mergeOptions({
        // @section Mousewheel options
        // @option scrollWheelZoom: Boolean = true
        // Whether the map can be zoomed by using the mouse wheel. If passed `'center'`,
        // it will zoom to the center of the view regardless of where the mouse was.
        scrollWheelZoom: true,

        // @option wheelDebounceTime: Number = 40
        // Limits the rate at which a wheel can fire (in milliseconds). By default
        // user can't zoom via wheel more often than once per 40 ms.
        wheelDebounceTime: 40,

        // @option wheelPxPerZoomLevel: Number = 50
        // How many scroll pixels (as reported by [L.DomEvent.getWheelDelta](#domevent-getwheeldelta))
        // mean a change of one full zoom level. Smaller values will make wheel-zooming
        // faster (and vice versa).
        wheelPxPerZoomLevel: 50
    });

    L.Map.ScrollWheelZoom = L.Handler.extend({
        addHooks: function () {
            L.DomEvent.on(this._map._container, 'mousewheel', this._onWheelScroll, this);

            this._delta = 0;
        },

        removeHooks: function () {
            L.DomEvent.off(this._map._container, 'mousewheel', this._onWheelScroll, this);
        },

        _onWheelScroll: function (e) {
            var delta = L.DomEvent.getWheelDelta(e);

            var debounce = this._map.options.wheelDebounceTime;

            this._delta += delta;
            this._lastMousePos = this._map.mouseEventToContainerPoint(e);

            if (!this._startTime) {
                this._startTime = +new Date();
            }

            var left = Math.max(debounce - (+new Date() - this._startTime), 0);

            clearTimeout(this._timer);
            this._timer = setTimeout(L.bind(this._performZoom, this), left);

            L.DomEvent.stop(e);
        },

        _performZoom: function () {
            var map = this._map,
                zoom = map.getZoom(),
                snap = this._map.options.zoomSnap || 0;

            map._stop(); // stop panning and fly animations if any

            // map the delta with a sigmoid function to -4..4 range leaning on -1..1
            var d2 = this._delta / (this._map.options.wheelPxPerZoomLevel * 4),
                d3 = 4 * Math.log(2 / (1 + Math.exp(-Math.abs(d2)))) / Math.LN2,
                d4 = snap ? Math.ceil(d3 / snap) * snap : d3,
                delta = map._limitZoom(zoom + (this._delta > 0 ? d4 : -d4)) - zoom;

            this._delta = 0;
            this._startTime = null;

            if (!delta) { return; }

            if (map.options.scrollWheelZoom === 'center') {
                map.setZoom(zoom + delta);
            } else {
                map.setZoomAround(this._lastMousePos, zoom + delta);
            }
        }
    });

// @section Handlers
// @property scrollWheelZoom: Handler
// Scroll wheel zoom handler.
    L.Map.addInitHook('addHandler', 'scrollWheelZoom', L.Map.ScrollWheelZoom);



    /*
     * Extends the event handling code with double tap support for mobile browsers.
     */

    L.extend(L.DomEvent, {

        _touchstart: L.Browser.msPointer ? 'MSPointerDown' : L.Browser.pointer ? 'pointerdown' : 'touchstart',
        _touchend: L.Browser.msPointer ? 'MSPointerUp' : L.Browser.pointer ? 'pointerup' : 'touchend',

        // inspired by Zepto touch code by Thomas Fuchs
        addDoubleTapListener: function (obj, handler, id) {
            var last, touch,
                doubleTap = false,
                delay = 250;

            function onTouchStart(e) {
                var count;

                if (L.Browser.pointer) {
                    count = L.DomEvent._pointersCount;
                } else {
                    count = e.touches.length;
                }

                if (count > 1) { return; }

                var now = Date.now(),
                    delta = now - (last || now);

                touch = e.touches ? e.touches[0] : e;
                doubleTap = (delta > 0 && delta <= delay);
                last = now;
            }

            function onTouchEnd() {
                if (doubleTap && !touch.cancelBubble) {
                    if (L.Browser.pointer) {
                        // work around .type being readonly with MSPointer* events
                        var newTouch = {},
                            prop, i;

                        for (i in touch) {
                            prop = touch[i];
                            newTouch[i] = prop && prop.bind ? prop.bind(touch) : prop;
                        }
                        touch = newTouch;
                    }
                    touch.type = 'dblclick';
                    handler(touch);
                    last = null;
                }
            }

            var pre = '_leaflet_',
                touchstart = this._touchstart,
                touchend = this._touchend;

            obj[pre + touchstart + id] = onTouchStart;
            obj[pre + touchend + id] = onTouchEnd;
            obj[pre + 'dblclick' + id] = handler;

            obj.addEventListener(touchstart, onTouchStart, false);
            obj.addEventListener(touchend, onTouchEnd, false);

            // On some platforms (notably, chrome on win10 + touchscreen + mouse),
            // the browser doesn't fire touchend/pointerup events but does fire
            // native dblclicks. See #4127.
            if (!L.Browser.edge) {
                obj.addEventListener('dblclick', handler, false);
            }

            return this;
        },

        removeDoubleTapListener: function (obj, id) {
            var pre = '_leaflet_',
                touchstart = obj[pre + this._touchstart + id],
                touchend = obj[pre + this._touchend + id],
                dblclick = obj[pre + 'dblclick' + id];

            obj.removeEventListener(this._touchstart, touchstart, false);
            obj.removeEventListener(this._touchend, touchend, false);
            if (!L.Browser.edge) {
                obj.removeEventListener('dblclick', dblclick, false);
            }

            return this;
        }
    });



    /*
     * Extends L.DomEvent to provide touch support for Internet Explorer and Windows-based devices.
     */

    L.extend(L.DomEvent, {

        POINTER_DOWN:   L.Browser.msPointer ? 'MSPointerDown'   : 'pointerdown',
        POINTER_MOVE:   L.Browser.msPointer ? 'MSPointerMove'   : 'pointermove',
        POINTER_UP:     L.Browser.msPointer ? 'MSPointerUp'     : 'pointerup',
        POINTER_CANCEL: L.Browser.msPointer ? 'MSPointerCancel' : 'pointercancel',
        TAG_WHITE_LIST: ['INPUT', 'SELECT', 'OPTION'],

        _pointers: {},
        _pointersCount: 0,

        // Provides a touch events wrapper for (ms)pointer events.
        // ref http://www.w3.org/TR/pointerevents/ https://www.w3.org/Bugs/Public/show_bug.cgi?id=22890

        addPointerListener: function (obj, type, handler, id) {

            if (type === 'touchstart') {
                this._addPointerStart(obj, handler, id);

            } else if (type === 'touchmove') {
                this._addPointerMove(obj, handler, id);

            } else if (type === 'touchend') {
                this._addPointerEnd(obj, handler, id);
            }

            return this;
        },

        removePointerListener: function (obj, type, id) {
            var handler = obj['_leaflet_' + type + id];

            if (type === 'touchstart') {
                obj.removeEventListener(this.POINTER_DOWN, handler, false);

            } else if (type === 'touchmove') {
                obj.removeEventListener(this.POINTER_MOVE, handler, false);

            } else if (type === 'touchend') {
                obj.removeEventListener(this.POINTER_UP, handler, false);
                obj.removeEventListener(this.POINTER_CANCEL, handler, false);
            }

            return this;
        },

        _addPointerStart: function (obj, handler, id) {
            var onDown = L.bind(function (e) {
                if (e.pointerType !== 'mouse' && e.pointerType !== e.MSPOINTER_TYPE_MOUSE) {
                    // In IE11, some touch events needs to fire for form controls, or
                    // the controls will stop working. We keep a whitelist of tag names that
                    // need these events. For other target tags, we prevent default on the event.
                    if (this.TAG_WHITE_LIST.indexOf(e.target.tagName) < 0) {
                        L.DomEvent.preventDefault(e);
                    } else {
                        return;
                    }
                }

                this._handlePointer(e, handler);
            }, this);

            obj['_leaflet_touchstart' + id] = onDown;
            obj.addEventListener(this.POINTER_DOWN, onDown, false);

            // need to keep track of what pointers and how many are active to provide e.touches emulation
            if (!this._pointerDocListener) {
                var pointerUp = L.bind(this._globalPointerUp, this);

                // we listen documentElement as any drags that end by moving the touch off the screen get fired there
                document.documentElement.addEventListener(this.POINTER_DOWN, L.bind(this._globalPointerDown, this), true);
                document.documentElement.addEventListener(this.POINTER_MOVE, L.bind(this._globalPointerMove, this), true);
                document.documentElement.addEventListener(this.POINTER_UP, pointerUp, true);
                document.documentElement.addEventListener(this.POINTER_CANCEL, pointerUp, true);

                this._pointerDocListener = true;
            }
        },

        _globalPointerDown: function (e) {
            this._pointers[e.pointerId] = e;
            this._pointersCount++;
        },

        _globalPointerMove: function (e) {
            if (this._pointers[e.pointerId]) {
                this._pointers[e.pointerId] = e;
            }
        },

        _globalPointerUp: function (e) {
            delete this._pointers[e.pointerId];
            this._pointersCount--;
        },

        _handlePointer: function (e, handler) {
            e.touches = [];
            for (var i in this._pointers) {
                e.touches.push(this._pointers[i]);
            }
            e.changedTouches = [e];

            handler(e);
        },

        _addPointerMove: function (obj, handler, id) {
            var onMove = L.bind(function (e) {
                // don't fire touch moves when mouse isn't down
                if ((e.pointerType === e.MSPOINTER_TYPE_MOUSE || e.pointerType === 'mouse') && e.buttons === 0) { return; }

                this._handlePointer(e, handler);
            }, this);

            obj['_leaflet_touchmove' + id] = onMove;
            obj.addEventListener(this.POINTER_MOVE, onMove, false);
        },

        _addPointerEnd: function (obj, handler, id) {
            var onUp = L.bind(function (e) {
                this._handlePointer(e, handler);
            }, this);

            obj['_leaflet_touchend' + id] = onUp;
            obj.addEventListener(this.POINTER_UP, onUp, false);
            obj.addEventListener(this.POINTER_CANCEL, onUp, false);
        }
    });



    /*
     * L.Handler.TouchZoom is used by L.Map to add pinch zoom on supported mobile browsers.
     */

// @namespace Map
// @section Interaction Options
    L.Map.mergeOptions({
        // @section Touch interaction options
        // @option touchZoom: Boolean = *
        // Whether the map can be zoomed by touch-dragging with two fingers. If
        // passed `'center'`, it will zoom to the center of the view regardless of
        // where the touch events (fingers) were. Enabled for touch-capable web
        // browsers except for old Androids.
        touchZoom: L.Browser.touch && !L.Browser.android23,

        // @option bounceAtZoomLimits: Boolean = true
        // Set it to false if you don't want the map to zoom beyond min/max zoom
        // and then bounce back when pinch-zooming.
        bounceAtZoomLimits: true
    });

    L.Map.TouchZoom = L.Handler.extend({
        addHooks: function () {
            L.DomEvent.on(this._map._container, 'touchstart', this._onTouchStart, this);
        },

        removeHooks: function () {
            L.DomEvent.off(this._map._container, 'touchstart', this._onTouchStart, this);
        },

        _onTouchStart: function (e) {
            var map = this._map;
            if (!e.touches || e.touches.length !== 2 || map._animatingZoom || this._zooming) { return; }

            var p1 = map.mouseEventToContainerPoint(e.touches[0]),
                p2 = map.mouseEventToContainerPoint(e.touches[1]);

            this._centerPoint = map.getSize()._divideBy(2);
            this._startLatLng = map.containerPointToLatLng(this._centerPoint);
            if (map.options.touchZoom !== 'center') {
                this._pinchStartLatLng = map.containerPointToLatLng(p1.add(p2)._divideBy(2));
            }

            this._startDist = p1.distanceTo(p2);
            this._startZoom = map.getZoom();

            this._moved = false;
            this._zooming = true;

            map._stop();

            L.DomEvent
                .on(document, 'touchmove', this._onTouchMove, this)
                .on(document, 'touchend', this._onTouchEnd, this);

            L.DomEvent.preventDefault(e);
        },

        _onTouchMove: function (e) {
            if (!e.touches || e.touches.length !== 2 || !this._zooming) { return; }

            var map = this._map,
                p1 = map.mouseEventToContainerPoint(e.touches[0]),
                p2 = map.mouseEventToContainerPoint(e.touches[1]),
                scale = p1.distanceTo(p2) / this._startDist;


            this._zoom = map.getScaleZoom(scale, this._startZoom);

            if (!map.options.bounceAtZoomLimits && (
                (this._zoom < map.getMinZoom() && scale < 1) ||
                (this._zoom > map.getMaxZoom() && scale > 1))) {
                this._zoom = map._limitZoom(this._zoom);
            }

            if (map.options.touchZoom === 'center') {
                this._center = this._startLatLng;
                if (scale === 1) { return; }
            } else {
                // Get delta from pinch to center, so centerLatLng is delta applied to initial pinchLatLng
                var delta = p1._add(p2)._divideBy(2)._subtract(this._centerPoint);
                if (scale === 1 && delta.x === 0 && delta.y === 0) { return; }
                this._center = map.unproject(map.project(this._pinchStartLatLng, this._zoom).subtract(delta), this._zoom);
            }

            if (!this._moved) {
                map._moveStart(true);
                this._moved = true;
            }

            L.Util.cancelAnimFrame(this._animRequest);

            var moveFn = L.bind(map._move, map, this._center, this._zoom, {pinch: true, round: false});
            this._animRequest = L.Util.requestAnimFrame(moveFn, this, true);

            L.DomEvent.preventDefault(e);
        },

        _onTouchEnd: function () {
            if (!this._moved || !this._zooming) {
                this._zooming = false;
                return;
            }

            this._zooming = false;
            L.Util.cancelAnimFrame(this._animRequest);

            L.DomEvent
                .off(document, 'touchmove', this._onTouchMove)
                .off(document, 'touchend', this._onTouchEnd);

            // Pinch updates GridLayers' levels only when snapZoom is off, so snapZoom becomes noUpdate.
            if (this._map.options.zoomAnimation) {
                this._map._animateZoom(this._center, this._map._limitZoom(this._zoom), true, this._map.options.snapZoom);
            } else {
                this._map._resetView(this._center, this._map._limitZoom(this._zoom));
            }
        }
    });

// @section Handlers
// @property touchZoom: Handler
// Touch zoom handler.
    L.Map.addInitHook('addHandler', 'touchZoom', L.Map.TouchZoom);



    /*
     * L.Map.Tap is used to enable mobile hacks like quick taps and long hold.
     */

// @namespace Map
// @section Interaction Options
    L.Map.mergeOptions({
        // @section Touch interaction options
        // @option tap: Boolean = true
        // Enables mobile hacks for supporting instant taps (fixing 200ms click
        // delay on iOS/Android) and touch holds (fired as `contextmenu` events).
        tap: true,

        // @option tapTolerance: Number = 15
        // The max number of pixels a user can shift his finger during touch
        // for it to be considered a valid tap.
        tapTolerance: 15
    });

    L.Map.Tap = L.Handler.extend({
        addHooks: function () {
            L.DomEvent.on(this._map._container, 'touchstart', this._onDown, this);
        },

        removeHooks: function () {
            L.DomEvent.off(this._map._container, 'touchstart', this._onDown, this);
        },

        _onDown: function (e) {
            if (!e.touches) { return; }

            L.DomEvent.preventDefault(e);

            this._fireClick = true;

            // don't simulate click or track longpress if more than 1 touch
            if (e.touches.length > 1) {
                this._fireClick = false;
                clearTimeout(this._holdTimeout);
                return;
            }

            var first = e.touches[0],
                el = first.target;

            this._startPos = this._newPos = new L.Point(first.clientX, first.clientY);

            // if touching a link, highlight it
            if (el.tagName && el.tagName.toLowerCase() === 'a') {
                L.DomUtil.addClass(el, 'leaflet-active');
            }

            // simulate long hold but setting a timeout
            this._holdTimeout = setTimeout(L.bind(function () {
                if (this._isTapValid()) {
                    this._fireClick = false;
                    this._onUp();
                    this._simulateEvent('contextmenu', first);
                }
            }, this), 1000);

            this._simulateEvent('mousedown', first);

            L.DomEvent.on(document, {
                touchmove: this._onMove,
                touchend: this._onUp
            }, this);
        },

        _onUp: function (e) {
            clearTimeout(this._holdTimeout);

            L.DomEvent.off(document, {
                touchmove: this._onMove,
                touchend: this._onUp
            }, this);

            if (this._fireClick && e && e.changedTouches) {

                var first = e.changedTouches[0],
                    el = first.target;

                if (el && el.tagName && el.tagName.toLowerCase() === 'a') {
                    L.DomUtil.removeClass(el, 'leaflet-active');
                }

                this._simulateEvent('mouseup', first);

                // simulate click if the touch didn't move too much
                if (this._isTapValid()) {
                    this._simulateEvent('click', first);
                }
            }
        },

        _isTapValid: function () {
            return this._newPos.distanceTo(this._startPos) <= this._map.options.tapTolerance;
        },

        _onMove: function (e) {
            var first = e.touches[0];
            this._newPos = new L.Point(first.clientX, first.clientY);
            this._simulateEvent('mousemove', first);
        },

        _simulateEvent: function (type, e) {
            var simulatedEvent = document.createEvent('MouseEvents');

            simulatedEvent._simulated = true;
            e.target._simulatedClick = true;

            simulatedEvent.initMouseEvent(
                type, true, true, window, 1,
                e.screenX, e.screenY,
                e.clientX, e.clientY,
                false, false, false, false, 0, null);

            e.target.dispatchEvent(simulatedEvent);
        }
    });

// @section Handlers
// @property tap: Handler
// Mobile touch hacks (quick tap and touch hold) handler.
    if (L.Browser.touch && !L.Browser.pointer) {
        L.Map.addInitHook('addHandler', 'tap', L.Map.Tap);
    }



    /*
     * L.Handler.BoxZoom is used to add shift-drag zoom interaction to the map
     * (zoom to a selected bounding box), enabled by default.
     */

// @namespace Map
// @section Interaction Options
    L.Map.mergeOptions({
        // @option boxZoom: Boolean = true
        // Whether the map can be zoomed to a rectangular area specified by
        // dragging the mouse while pressing the shift key.
        boxZoom: true
    });

    L.Map.BoxZoom = L.Handler.extend({
        initialize: function (map) {
            this._map = map;
            this._container = map._container;
            this._pane = map._panes.overlayPane;
        },

        addHooks: function () {
            L.DomEvent.on(this._container, 'mousedown', this._onMouseDown, this);
        },

        removeHooks: function () {
            L.DomEvent.off(this._container, 'mousedown', this._onMouseDown, this);
        },

        moved: function () {
            return this._moved;
        },

        _resetState: function () {
            this._moved = false;
        },

        _onMouseDown: function (e) {
            if (!e.shiftKey || ((e.which !== 1) && (e.button !== 1))) { return false; }

            this._resetState();

            L.DomUtil.disableTextSelection();
            L.DomUtil.disableImageDrag();

            this._startPoint = this._map.mouseEventToContainerPoint(e);

            L.DomEvent.on(document, {
                contextmenu: L.DomEvent.stop,
                mousemove: this._onMouseMove,
                mouseup: this._onMouseUp,
                keydown: this._onKeyDown
            }, this);
        },

        _onMouseMove: function (e) {
            if (!this._moved) {
                this._moved = true;

                this._box = L.DomUtil.create('div', 'leaflet-zoom-box', this._container);
                L.DomUtil.addClass(this._container, 'leaflet-crosshair');

                this._map.fire('boxzoomstart');
            }

            this._point = this._map.mouseEventToContainerPoint(e);

            var bounds = new L.Bounds(this._point, this._startPoint),
                size = bounds.getSize();

            L.DomUtil.setPosition(this._box, bounds.min);

            this._box.style.width  = size.x + 'px';
            this._box.style.height = size.y + 'px';
        },

        _finish: function () {
            if (this._moved) {
                L.DomUtil.remove(this._box);
                L.DomUtil.removeClass(this._container, 'leaflet-crosshair');
            }

            L.DomUtil.enableTextSelection();
            L.DomUtil.enableImageDrag();

            L.DomEvent.off(document, {
                contextmenu: L.DomEvent.stop,
                mousemove: this._onMouseMove,
                mouseup: this._onMouseUp,
                keydown: this._onKeyDown
            }, this);
        },

        _onMouseUp: function (e) {
            if ((e.which !== 1) && (e.button !== 1)) { return; }

            this._finish();

            if (!this._moved) { return; }
            // Postpone to next JS tick so internal click event handling
            // still see it as "moved".
            setTimeout(L.bind(this._resetState, this), 0);

            var bounds = new L.LatLngBounds(
                this._map.containerPointToLatLng(this._startPoint),
                this._map.containerPointToLatLng(this._point));

            this._map
                .fitBounds(bounds)
                .fire('boxzoomend', {boxZoomBounds: bounds});
        },

        _onKeyDown: function (e) {
            if (e.keyCode === 27) {
                this._finish();
            }
        }
    });

// @section Handlers
// @property boxZoom: Handler
// Box (shift-drag with mouse) zoom handler.
    L.Map.addInitHook('addHandler', 'boxZoom', L.Map.BoxZoom);



    /*
     * L.Map.Keyboard is handling keyboard interaction with the map, enabled by default.
     */

// @namespace Map
// @section Keyboard Navigation Options
    L.Map.mergeOptions({
        // @option keyboard: Boolean = true
        // Makes the map focusable and allows users to navigate the map with keyboard
        // arrows and `+`/`-` keys.
        keyboard: true,

        // @option keyboardPanDelta: Number = 80
        // Amount of pixels to pan when pressing an arrow key.
        keyboardPanDelta: 80
    });

    L.Map.Keyboard = L.Handler.extend({

        keyCodes: {
            left:    [37],
            right:   [39],
            down:    [40],
            up:      [38],
            zoomIn:  [187, 107, 61, 171],
            zoomOut: [189, 109, 54, 173]
        },

        initialize: function (map) {
            this._map = map;

            this._setPanDelta(map.options.keyboardPanDelta);
            this._setZoomDelta(map.options.zoomDelta);
        },

        addHooks: function () {
            var container = this._map._container;

            // make the container focusable by tabbing
            if (container.tabIndex <= 0) {
                container.tabIndex = '0';
            }

            L.DomEvent.on(container, {
                focus: this._onFocus,
                blur: this._onBlur,
                mousedown: this._onMouseDown
            }, this);

            this._map.on({
                focus: this._addHooks,
                blur: this._removeHooks
            }, this);
        },

        removeHooks: function () {
            this._removeHooks();

            L.DomEvent.off(this._map._container, {
                focus: this._onFocus,
                blur: this._onBlur,
                mousedown: this._onMouseDown
            }, this);

            this._map.off({
                focus: this._addHooks,
                blur: this._removeHooks
            }, this);
        },

        _onMouseDown: function () {
            if (this._focused) { return; }

            var body = document.body,
                docEl = document.documentElement,
                top = body.scrollTop || docEl.scrollTop,
                left = body.scrollLeft || docEl.scrollLeft;

            this._map._container.focus();

            window.scrollTo(left, top);
        },

        _onFocus: function () {
            this._focused = true;
            this._map.fire('focus');
        },

        _onBlur: function () {
            this._focused = false;
            this._map.fire('blur');
        },

        _setPanDelta: function (panDelta) {
            var keys = this._panKeys = {},
                codes = this.keyCodes,
                i, len;

            for (i = 0, len = codes.left.length; i < len; i++) {
                keys[codes.left[i]] = [-1 * panDelta, 0];
            }
            for (i = 0, len = codes.right.length; i < len; i++) {
                keys[codes.right[i]] = [panDelta, 0];
            }
            for (i = 0, len = codes.down.length; i < len; i++) {
                keys[codes.down[i]] = [0, panDelta];
            }
            for (i = 0, len = codes.up.length; i < len; i++) {
                keys[codes.up[i]] = [0, -1 * panDelta];
            }
        },

        _setZoomDelta: function (zoomDelta) {
            var keys = this._zoomKeys = {},
                codes = this.keyCodes,
                i, len;

            for (i = 0, len = codes.zoomIn.length; i < len; i++) {
                keys[codes.zoomIn[i]] = zoomDelta;
            }
            for (i = 0, len = codes.zoomOut.length; i < len; i++) {
                keys[codes.zoomOut[i]] = -zoomDelta;
            }
        },

        _addHooks: function () {
            L.DomEvent.on(document, 'keydown', this._onKeyDown, this);
        },

        _removeHooks: function () {
            L.DomEvent.off(document, 'keydown', this._onKeyDown, this);
        },

        _onKeyDown: function (e) {
            if (e.altKey || e.ctrlKey || e.metaKey) { return; }

            var key = e.keyCode,
                map = this._map,
                offset;

            if (key in this._panKeys) {

                if (map._panAnim && map._panAnim._inProgress) { return; }

                offset = this._panKeys[key];
                if (e.shiftKey) {
                    offset = L.point(offset).multiplyBy(3);
                }

                map.panBy(offset);

                if (map.options.maxBounds) {
                    map.panInsideBounds(map.options.maxBounds);
                }

            } else if (key in this._zoomKeys) {
                map.setZoom(map.getZoom() + (e.shiftKey ? 3 : 1) * this._zoomKeys[key]);

            } else if (key === 27) {
                map.closePopup();

            } else {
                return;
            }

            L.DomEvent.stop(e);
        }
    });

// @section Handlers
// @section Handlers
// @property keyboard: Handler
// Keyboard navigation handler.
    L.Map.addInitHook('addHandler', 'keyboard', L.Map.Keyboard);



    /*
     * L.Handler.MarkerDrag is used internally by L.Marker to make the markers draggable.
     */


    /* @namespace Marker
     * @section Interaction handlers
     *
     * Interaction handlers are properties of a marker instance that allow you to control interaction behavior in runtime, enabling or disabling certain features such as dragging (see `Handler` methods). Example:
     *
     * ```js
     * marker.dragging.disable();
     * ```
     *
     * @property dragging: Handler
     * Marker dragging handler (by both mouse and touch).
     */

    L.Handler.MarkerDrag = L.Handler.extend({
        initialize: function (marker) {
            this._marker = marker;
        },

        addHooks: function () {
            var icon = this._marker._icon;

            if (!this._draggable) {
                this._draggable = new L.Draggable(icon, icon, true);
            }

            this._draggable.on({
                dragstart: this._onDragStart,
                drag: this._onDrag,
                dragend: this._onDragEnd
            }, this).enable();

            L.DomUtil.addClass(icon, 'leaflet-marker-draggable');
        },

        removeHooks: function () {
            this._draggable.off({
                dragstart: this._onDragStart,
                drag: this._onDrag,
                dragend: this._onDragEnd
            }, this).disable();

            if (this._marker._icon) {
                L.DomUtil.removeClass(this._marker._icon, 'leaflet-marker-draggable');
            }
        },

        moved: function () {
            return this._draggable && this._draggable._moved;
        },

        _onDragStart: function () {
            // @section Dragging events
            // @event dragstart: Event
            // Fired when the user starts dragging the marker.

            // @event movestart: Event
            // Fired when the marker starts moving (because of dragging).
            this._marker
                .closePopup()
                .fire('movestart')
                .fire('dragstart');
        },

        _onDrag: function (e) {
            var marker = this._marker,
                shadow = marker._shadow,
                iconPos = L.DomUtil.getPosition(marker._icon),
                latlng = marker._map.layerPointToLatLng(iconPos);

            // update shadow position
            if (shadow) {
                L.DomUtil.setPosition(shadow, iconPos);
            }

            marker._latlng = latlng;
            e.latlng = latlng;

            // @event drag: Event
            // Fired repeatedly while the user drags the marker.
            marker
                .fire('move', e)
                .fire('drag', e);
        },

        _onDragEnd: function (e) {
            // @event dragend: DragEndEvent
            // Fired when the user stops dragging the marker.

            // @event moveend: Event
            // Fired when the marker stops moving (because of dragging).
            this._marker
                .fire('moveend')
                .fire('dragend', e);
        }
    });



    /*
     * @class Control
     * @aka L.Control
     *
     * L.Control is a base class for implementing map controls. Handles positioning.
     * All other controls extend from this class.
     */

    L.Control = L.Class.extend({
        // @section
        // @aka Control options
        options: {
            // @option position: String = 'topright'
            // The position of the control (one of the map corners). Possible values are `'topleft'`,
            // `'topright'`, `'bottomleft'` or `'bottomright'`
            position: 'topright'
        },

        initialize: function (options) {
            L.setOptions(this, options);
        },

        /* @section
         * Classes extending L.Control will inherit the following methods:
         *
         * @method getPosition: string
         * Returns the position of the control.
         */
        getPosition: function () {
            return this.options.position;
        },

        // @method setPosition(position: string): this
        // Sets the position of the control.
        setPosition: function (position) {
            var map = this._map;

            if (map) {
                map.removeControl(this);
            }

            this.options.position = position;

            if (map) {
                map.addControl(this);
            }

            return this;
        },

        // @method getContainer: HTMLElement
        // Returns the HTMLElement that contains the control.
        getContainer: function () {
            return this._container;
        },

        // @method addTo(map: Map): this
        // Adds the control to the given map.
        addTo: function (map) {
            this.remove();
            this._map = map;

            var container = this._container = this.onAdd(map),
                pos = this.getPosition(),
                corner = map._controlCorners[pos];

            L.DomUtil.addClass(container, 'leaflet-control');

            if (pos.indexOf('bottom') !== -1) {
                corner.insertBefore(container, corner.firstChild);
            } else {
                corner.appendChild(container);
            }

            return this;
        },

        // @method remove: this
        // Removes the control from the map it is currently active on.
        remove: function () {
            if (!this._map) {
                return this;
            }

            L.DomUtil.remove(this._container);

            if (this.onRemove) {
                this.onRemove(this._map);
            }

            this._map = null;

            return this;
        },

        _refocusOnMap: function (e) {
            // if map exists and event is not a keyboard event
            if (this._map && e && e.screenX > 0 && e.screenY > 0) {
                this._map.getContainer().focus();
            }
        }
    });

    L.control = function (options) {
        return new L.Control(options);
    };


// adds control-related methods to L.Map

    L.Map.include({
        addControl: function (control) {
            control.addTo(this);
            return this;
        },

        removeControl: function (control) {
            control.remove();
            return this;
        },

        _initControlPos: function () {
            var corners = this._controlCorners = {},
                l = 'leaflet-',
                container = this._controlContainer =
                    L.DomUtil.create('div', l + 'control-container', this._container);

            function createCorner(vSide, hSide) {
                var className = l + vSide + ' ' + l + hSide;

                corners[vSide + hSide] = L.DomUtil.create('div', className, container);
            }

            createCorner('top', 'left');
            createCorner('top', 'right');
            createCorner('bottom', 'left');
            createCorner('bottom', 'right');
        },

        _clearControlPos: function () {
            L.DomUtil.remove(this._controlContainer);
        }
    });



    /*
     * @class Control.Zoom
     * @aka L.Control.Zoom
     * @inherits Control
     *
     * A basic zoom control with two buttons (zoom in and zoom out). It is put on the map by default unless you set its [`zoomControl` option](#map-zoomcontrol) to `false`. Extends `Control`.
     */

    L.Control.Zoom = L.Control.extend({
        // @section
        // @aka Control.Zoom options
        options: {
            position: 'topleft',

            // @option zoomInText: String = '+'
            // The text set on the 'zoom in' button.
            zoomInText: '+',

            // @option zoomInTitle: String = 'Zoom in'
            // The title set on the 'zoom in' button.
            zoomInTitle: 'Zoom in',

            // @option zoomOutText: String = '-'
            // The text set on the 'zoom out' button.
            zoomOutText: '-',

            // @option zoomOutTitle: String = 'Zoom out'
            // The title set on the 'zoom out' button.
            zoomOutTitle: 'Zoom out'
        },

        onAdd: function (map) {
            var zoomName = 'leaflet-control-zoom',
                container = L.DomUtil.create('div', zoomName + ' leaflet-bar'),
                options = this.options;

            this._zoomInButton  = this._createButton(options.zoomInText, options.zoomInTitle,
                zoomName + '-in',  container, this._zoomIn);
            this._zoomOutButton = this._createButton(options.zoomOutText, options.zoomOutTitle,
                zoomName + '-out', container, this._zoomOut);

            this._updateDisabled();
            map.on('zoomend zoomlevelschange', this._updateDisabled, this);

            return container;
        },

        onRemove: function (map) {
            map.off('zoomend zoomlevelschange', this._updateDisabled, this);
        },

        disable: function () {
            this._disabled = true;
            this._updateDisabled();
            return this;
        },

        enable: function () {
            this._disabled = false;
            this._updateDisabled();
            return this;
        },

        _zoomIn: function (e) {
            if (!this._disabled) {
                this._map.zoomIn(this._map.options.zoomDelta * (e.shiftKey ? 3 : 1));
            }
        },

        _zoomOut: function (e) {
            if (!this._disabled) {
                this._map.zoomOut(this._map.options.zoomDelta * (e.shiftKey ? 3 : 1));
            }
        },

        _createButton: function (html, title, className, container, fn) {
            var link = L.DomUtil.create('a', className, container);
            link.innerHTML = html;
            link.href = '#';
            link.title = title;

            L.DomEvent
                .on(link, 'mousedown dblclick', L.DomEvent.stopPropagation)
                .on(link, 'click', L.DomEvent.stop)
                .on(link, 'click', fn, this)
                .on(link, 'click', this._refocusOnMap, this);

            return link;
        },

        _updateDisabled: function () {
            var map = this._map,
                className = 'leaflet-disabled';

            L.DomUtil.removeClass(this._zoomInButton, className);
            L.DomUtil.removeClass(this._zoomOutButton, className);

            if (this._disabled || map._zoom === map.getMinZoom()) {
                L.DomUtil.addClass(this._zoomOutButton, className);
            }
            if (this._disabled || map._zoom === map.getMaxZoom()) {
                L.DomUtil.addClass(this._zoomInButton, className);
            }
        }
    });

// @namespace Map
// @section Control options
// @option zoomControl: Boolean = true
// Whether a [zoom control](#control-zoom) is added to the map by default.
    L.Map.mergeOptions({
        zoomControl: true
    });

    L.Map.addInitHook(function () {
        if (this.options.zoomControl) {
            this.zoomControl = new L.Control.Zoom();
            this.addControl(this.zoomControl);
        }
    });

// @namespace Control.Zoom
// @factory L.control.zoom(options: Control.Zoom options)
// Creates a zoom control
    L.control.zoom = function (options) {
        return new L.Control.Zoom(options);
    };



    /*
     * @class Control.Attribution
     * @aka L.Control.Attribution
     * @inherits Control
     *
     * The attribution control allows you to display attribution data in a small text box on a map. It is put on the map by default unless you set its [`attributionControl` option](#map-attributioncontrol) to `false`, and it fetches attribution texts from layers with the [`getAttribution` method](#layer-getattribution) automatically. Extends Control.
     */

    L.Control.Attribution = L.Control.extend({
        // @section
        // @aka Control.Attribution options
        options: {
        },

        initialize: function (options) {
            L.setOptions(this, options);

            this._attributions = {};
        },

        onAdd: function (map) {
            map.attributionControl = this;
            this._container = L.DomUtil.create('div', 'leaflet-control-attribution');
            if (L.DomEvent) {
                L.DomEvent.disableClickPropagation(this._container);
            }

            // TODO ugly, refactor
            for (var i in map._layers) {
                if (map._layers[i].getAttribution) {
                    this.addAttribution(map._layers[i].getAttribution());
                }
            }

            this._update();

            return this._container;
        },

        // @method setPrefix(prefix: String): this
        // Sets the text before the attributions.
        setPrefix: function (prefix) {
            this.options.prefix = prefix;
            this._update();
            return this;
        },

        // @method addAttribution(text: String): this
        // Adds an attribution text (e.g. `'Vector data &copy; Mapbox'`).
        addAttribution: function (text) {
            if (!text) { return this; }

            if (!this._attributions[text]) {
                this._attributions[text] = 0;
            }
            this._attributions[text]++;

            this._update();

            return this;
        },

        // @method removeAttribution(text: String): this
        // Removes an attribution text.
        removeAttribution: function (text) {
            if (!text) { return this; }

            if (this._attributions[text]) {
                this._attributions[text]--;
                this._update();
            }

            return this;
        },

        _update: function () {
            if (!this._map) { return; }

            var attribs = [];

            for (var i in this._attributions) {
                if (this._attributions[i]) {
                    attribs.push(i);
                }
            }

            var prefixAndAttribs = [];

            if (this.options.prefix) {
                prefixAndAttribs.push(this.options.prefix);
            }
            if (attribs.length) {
                prefixAndAttribs.push(attribs.join(', '));
            }

            this._container.innerHTML = prefixAndAttribs.join(' | ');
        }
    });

// @namespace Map
// @section Control options
// @option attributionControl: Boolean = true
// Whether a [attribution control](#control-attribution) is added to the map by default.
    L.Map.mergeOptions({
        attributionControl: true
    });

    L.Map.addInitHook(function () {
        if (this.options.attributionControl) {
            new L.Control.Attribution().addTo(this);
        }
    });

// @namespace Control.Attribution
// @factory L.control.attribution(options: Control.Attribution options)
// Creates an attribution control.
    L.control.attribution = function (options) {
        return new L.Control.Attribution(options);
    };



    /*
     * @class Control.Scale
     * @aka L.Control.Scale
     * @inherits Control
     *
     * A simple scale control that shows the scale of the current center of screen in metric (m/km) and imperial (mi/ft) systems. Extends `Control`.
     *
     * @example
     *
     * ```js
     * L.control.scale().addTo(map);
     * ```
     */

    L.Control.Scale = L.Control.extend({
        // @section
        // @aka Control.Scale options
        options: {
            position: 'bottomleft',

            // @option maxWidth: Number = 100
            // Maximum width of the control in pixels. The width is set dynamically to show round values (e.g. 100, 200, 500).
            maxWidth: 100,

            // @option metric: Boolean = True
            // Whether to show the metric scale line (m/km).
            metric: true,

            // @option imperial: Boolean = True
            // Whether to show the imperial scale line (mi/ft).
            imperial: true

            // @option updateWhenIdle: Boolean = false
            // If `true`, the control is updated on [`moveend`](#map-moveend), otherwise it's always up-to-date (updated on [`move`](#map-move)).
        },

        onAdd: function (map) {
            var className = 'leaflet-control-scale',
                container = L.DomUtil.create('div', className),
                options = this.options;

            this._addScales(options, className + '-line', container);

            map.on(options.updateWhenIdle ? 'moveend' : 'move', this._update, this);
            map.whenReady(this._update, this);

            return container;
        },

        onRemove: function (map) {
            map.off(this.options.updateWhenIdle ? 'moveend' : 'move', this._update, this);
        },

        _addScales: function (options, className, container) {
            if (options.metric) {
                this._mScale = L.DomUtil.create('div', className, container);
            }
            if (options.imperial) {
                this._iScale = L.DomUtil.create('div', className, container);
            }
        },

        _update: function () {
            var map = this._map,
                y = map.getSize().y / 2;

            var maxMeters = map.distance(
                map.containerPointToLatLng([0, y]),
                map.containerPointToLatLng([this.options.maxWidth, y]));

            this._updateScales(maxMeters);
        },

        _updateScales: function (maxMeters) {
            if (this.options.metric && maxMeters) {
                this._updateMetric(maxMeters);
            }
            if (this.options.imperial && maxMeters) {
                this._updateImperial(maxMeters);
            }
        },

        _updateMetric: function (maxMeters) {
            var meters = this._getRoundNum(maxMeters),
                label = meters < 1000 ? meters + ' m' : (meters / 1000) + ' km';

            this._updateScale(this._mScale, label, meters / maxMeters);
        },

        _updateImperial: function (maxMeters) {
            var maxFeet = maxMeters * 3.2808399,
                maxMiles, miles, feet;

            if (maxFeet > 5280) {
                maxMiles = maxFeet / 5280;
                miles = this._getRoundNum(maxMiles);
                this._updateScale(this._iScale, miles + ' mi', miles / maxMiles);

            } else {
                feet = this._getRoundNum(maxFeet);
                this._updateScale(this._iScale, feet + ' ft', feet / maxFeet);
            }
        },

        _updateScale: function (scale, text, ratio) {
            scale.style.width = Math.round(this.options.maxWidth * ratio) + 'px';
            scale.innerHTML = text;
        },

        _getRoundNum: function (num) {
            var pow10 = Math.pow(10, (Math.floor(num) + '').length - 1),
                d = num / pow10;

            d = d >= 10 ? 10 :
                d >= 5 ? 5 :
                    d >= 3 ? 3 :
                        d >= 2 ? 2 : 1;

            return pow10 * d;
        }
    });


// @factory L.control.scale(options?: Control.Scale options)
// Creates an scale control with the given options.
    L.control.scale = function (options) {
        return new L.Control.Scale(options);
    };



    /*
     * @class Control.Layers
     * @aka L.Control.Layers
     * @inherits Control
     *
     * The layers control gives users the ability to switch between different base layers and switch overlays on/off (check out the [detailed example](http://leafletjs.com/examples/layers-control.html)). Extends `Control`.
     *
     * @example
     *
     * ```js
     * var baseLayers = {
     * 	"Mapbox": mapbox,
     * 	"OpenStreetMap": osm
     * };
     *
     * var overlays = {
     * 	"Marker": marker,
     * 	"Roads": roadsLayer
     * };
     *
     * L.control.layers(baseLayers, overlays).addTo(map);
     * ```
     *
     * The `baseLayers` and `overlays` parameters are object literals with layer names as keys and `Layer` objects as values:
     *
     * ```js
     * {
     *     "<someName1>": layer1,
     *     "<someName2>": layer2
     * }
     * ```
     *
     * The layer names can contain HTML, which allows you to add additional styling to the items:
     *
     * ```js
     * {"<img src='my-layer-icon' /> <span class='my-layer-item'>My Layer</span>": myLayer}
     * ```
     */


    L.Control.Layers = L.Control.extend({
        // @section
        // @aka Control.Layers options
        options: {
            // @option collapsed: Boolean = true
            // If `true`, the control will be collapsed into an icon and expanded on mouse hover or touch.
            collapsed: true,
            position: 'topright',

            // @option autoZIndex: Boolean = true
            // If `true`, the control will assign zIndexes in increasing order to all of its layers so that the order is preserved when switching them on/off.
            autoZIndex: true,

            // @option hideSingleBase: Boolean = false
            // If `true`, the base layers in the control will be hidden when there is only one.
            hideSingleBase: false
        },

        initialize: function (baseLayers, overlays, options) {
            L.setOptions(this, options);

            this._layers = [];
            this._lastZIndex = 0;
            this._handlingClick = false;

            for (var i in baseLayers) {
                this._addLayer(baseLayers[i], i);
            }

            for (i in overlays) {
                this._addLayer(overlays[i], i, true);
            }
        },

        onAdd: function (map) {
            this._initLayout();
            this._update();

            this._map = map;
            map.on('zoomend', this._checkDisabledLayers, this);

            return this._container;
        },

        onRemove: function () {
            this._map.off('zoomend', this._checkDisabledLayers, this);

            for (var id in this._layers) {
                this._layers[id].layer.off('add remove', this._onLayerChange, this);
            }
        },

        // @method addBaseLayer(layer: Layer, name: String): this
        // Adds a base layer (radio button entry) with the given name to the control.
        addBaseLayer: function (layer, name) {
            this._addLayer(layer, name);
            return (this._map) ? this._update() : this;
        },

        // @method addOverlay(layer: Layer, name: String): this
        // Adds an overlay (checkbox entry) with the given name to the control.
        addOverlay: function (layer, name) {
            this._addLayer(layer, name, true);
            return (this._map) ? this._update() : this;
        },

        // @method removeLayer(layer: Layer): this
        // Remove the given layer from the control.
        removeLayer: function (layer) {
            layer.off('add remove', this._onLayerChange, this);

            var obj = this._getLayer(L.stamp(layer));
            this._layers.splice(this._layers.indexOf(obj), 1);
            return (this._map) ? this._update() : this;
        },

        // @method expand(): this
        // Expand the control container if collapsed.
        expand: function () {
            L.DomUtil.addClass(this._container, 'leaflet-control-layers-expanded');
            this._form.style.height = null;
            var acceptableHeight = this._map.getSize().y - (this._container.offsetTop + 50);
            if (acceptableHeight < this._form.clientHeight) {
                L.DomUtil.addClass(this._form, 'leaflet-control-layers-scrollbar');
                this._form.style.height = acceptableHeight + 'px';
            } else {
                L.DomUtil.removeClass(this._form, 'leaflet-control-layers-scrollbar');
            }
            this._checkDisabledLayers();
            return this;
        },

        // @method collapse(): this
        // Collapse the control container if expanded.
        collapse: function () {
            L.DomUtil.removeClass(this._container, 'leaflet-control-layers-expanded');
            return this;
        },

        _initLayout: function () {
            var className = 'leaflet-control-layers',
                container = this._container = L.DomUtil.create('div', className);

            // makes this work on IE touch devices by stopping it from firing a mouseout event when the touch is released
            container.setAttribute('aria-haspopup', true);

            L.DomEvent.disableClickPropagation(container);
            if (!L.Browser.touch) {
                L.DomEvent.disableScrollPropagation(container);
            }

            var form = this._form = L.DomUtil.create('form', className + '-list');

            if (this.options.collapsed) {
                if (!L.Browser.android) {
                    L.DomEvent.on(container, {
                        mouseenter: this.expand,
                        mouseleave: this.collapse
                    }, this);
                }

                var link = this._layersLink = L.DomUtil.create('a', className + '-toggle', container);
                link.href = '#';
                link.title = 'Layers';

                if (L.Browser.touch) {
                    L.DomEvent
                        .on(link, 'click', L.DomEvent.stop)
                        .on(link, 'click', this.expand, this);
                } else {
                    L.DomEvent.on(link, 'focus', this.expand, this);
                }

                // work around for Firefox Android issue https://github.com/Leaflet/Leaflet/issues/2033
                L.DomEvent.on(form, 'click', function () {
                    setTimeout(L.bind(this._onInputClick, this), 0);
                }, this);

                this._map.on('click', this.collapse, this);
                // TODO keyboard accessibility
            } else {
                this.expand();
            }

            this._baseLayersList = L.DomUtil.create('div', className + '-base', form);
            this._separator = L.DomUtil.create('div', className + '-separator', form);
            this._overlaysList = L.DomUtil.create('div', className + '-overlays', form);

            container.appendChild(form);
        },

        _getLayer: function (id) {
            for (var i = 0; i <= this._layers.length; i++) {
                if (L.stamp(this._layers[i].layer) === id) {
                    return this._layers[i];
                }
            }
        },

        _addLayer: function (layer, name, overlay) {
            layer.on('add remove', this._onLayerChange, this);

            this._layers.push({
                layer: layer,
                name: name,
                overlay: overlay
            });

            if (this.options.autoZIndex && layer.setZIndex) {
                this._lastZIndex++;
                layer.setZIndex(this._lastZIndex);
            }
        },

        _update: function () {
            if (!this._container) { return this; }

            L.DomUtil.empty(this._baseLayersList);
            L.DomUtil.empty(this._overlaysList);

            var baseLayersPresent, overlaysPresent, i, obj, baseLayersCount = 0;

            for (i in this._layers) {
                obj = this._layers[i];
                this._addItem(obj);
                overlaysPresent = overlaysPresent || obj.overlay;
                baseLayersPresent = baseLayersPresent || !obj.overlay;
                baseLayersCount += !obj.overlay ? 1 : 0;
            }

            // Hide base layers section if there's only one layer.
            if (this.options.hideSingleBase) {
                baseLayersPresent = baseLayersPresent && baseLayersCount > 1;
                this._baseLayersList.style.display = baseLayersPresent ? '' : 'none';
            }

            this._separator.style.display = overlaysPresent && baseLayersPresent ? '' : 'none';

            return this;
        },

        _onLayerChange: function (e) {
            if (!this._handlingClick) {
                this._update();
            }

            var obj = this._getLayer(L.stamp(e.target));

            // @namespace Map
            // @section Layer events
            // @event baselayerchange: LayersControlEvent
            // Fired when the base layer is changed through the [layer control](#control-layers).
            // @event overlayadd: LayersControlEvent
            // Fired when an overlay is selected through the [layer control](#control-layers).
            // @event overlayremove: LayersControlEvent
            // Fired when an overlay is deselected through the [layer control](#control-layers).
            // @namespace Control.Layers
            var type = obj.overlay ?
                (e.type === 'add' ? 'overlayadd' : 'overlayremove') :
                (e.type === 'add' ? 'baselayerchange' : null);

            if (type) {
                this._map.fire(type, obj);
            }
        },

        // IE7 bugs out if you create a radio dynamically, so you have to do it this hacky way (see http://bit.ly/PqYLBe)
        _createRadioElement: function (name, checked) {

            var radioHtml = '<input type="radio" class="leaflet-control-layers-selector" name="' +
                name + '"' + (checked ? ' checked="checked"' : '') + '/>';

            var radioFragment = document.createElement('div');
            radioFragment.innerHTML = radioHtml;

            return radioFragment.firstChild;
        },

        _addItem: function (obj) {
            var label = document.createElement('label'),
                checked = this._map.hasLayer(obj.layer),
                input;

            if (obj.overlay) {
                input = document.createElement('input');
                input.type = 'checkbox';
                input.className = 'leaflet-control-layers-selector';
                input.defaultChecked = checked;
            } else {
                input = this._createRadioElement('leaflet-base-layers', checked);
            }

            input.layerId = L.stamp(obj.layer);

            L.DomEvent.on(input, 'click', this._onInputClick, this);

            var name = document.createElement('span');
            name.innerHTML = ' ' + obj.name;

            // Helps from preventing layer control flicker when checkboxes are disabled
            // https://github.com/Leaflet/Leaflet/issues/2771
            var holder = document.createElement('div');

            label.appendChild(holder);
            holder.appendChild(input);
            holder.appendChild(name);

            var container = obj.overlay ? this._overlaysList : this._baseLayersList;
            container.appendChild(label);

            this._checkDisabledLayers();
            return label;
        },

        _onInputClick: function () {
            var inputs = this._form.getElementsByTagName('input'),
                input, layer, hasLayer;
            var addedLayers = [],
                removedLayers = [];

            this._handlingClick = true;

            for (var i = inputs.length - 1; i >= 0; i--) {
                input = inputs[i];
                layer = this._getLayer(input.layerId).layer;
                hasLayer = this._map.hasLayer(layer);

                if (input.checked && !hasLayer) {
                    addedLayers.push(layer);

                } else if (!input.checked && hasLayer) {
                    removedLayers.push(layer);
                }
            }

            // Bugfix issue 2318: Should remove all old layers before readding new ones
            for (i = 0; i < removedLayers.length; i++) {
                this._map.removeLayer(removedLayers[i]);
            }
            for (i = 0; i < addedLayers.length; i++) {
                this._map.addLayer(addedLayers[i]);
            }

            this._handlingClick = false;

            this._refocusOnMap();
        },

        _checkDisabledLayers: function () {
            var inputs = this._form.getElementsByTagName('input'),
                input,
                layer,
                zoom = this._map.getZoom();

            for (var i = inputs.length - 1; i >= 0; i--) {
                input = inputs[i];
                layer = this._getLayer(input.layerId).layer;
                input.disabled = (layer.options.minZoom !== undefined && zoom < layer.options.minZoom) ||
                    (layer.options.maxZoom !== undefined && zoom > layer.options.maxZoom);

            }
        },

        _expand: function () {
            // Backward compatibility, remove me in 1.1.
            return this.expand();
        },

        _collapse: function () {
            // Backward compatibility, remove me in 1.1.
            return this.collapse();
        }

    });


// @factory L.control.layers(baselayers?: Object, overlays?: Object, options?: Control.Layers options)
// Creates an attribution control with the given layers. Base layers will be switched with radio buttons, while overlays will be switched with checkboxes. Note that all base layers should be passed in the base layers object, but only one should be added to the map during map instantiation.
    L.control.layers = function (baseLayers, overlays, options) {
        return new L.Control.Layers(baseLayers, overlays, options);
    };



    /*
     * @class PosAnimation
     * @aka L.PosAnimation
     * @inherits Evented
     * Used internally for panning animations, utilizing CSS3 Transitions for modern browsers and a timer fallback for IE6-9.
     *
     * @example
     * ```js
     * var fx = new L.PosAnimation();
     f x.run(el, [300, 500], 0.5);*
     * ```
     *
     * @constructor L.PosAnimation()
     * Creates a `PosAnimation` object.
     *
     */

    L.PosAnimation = L.Evented.extend({

        // @method run(el: HTMLElement, newPos: Point, duration?: Number, easeLinearity?: Number)
        // Run an animation of a given element to a new position, optionally setting
        // duration in seconds (`0.25` by default) and easing linearity factor (3rd
        // argument of the [cubic bezier curve](http://cubic-bezier.com/#0,0,.5,1),
        // `0.5` by default).
        run: function (el, newPos, duration, easeLinearity) {
            this.stop();

            this._el = el;
            this._inProgress = true;
            this._duration = duration || 0.25;
            this._easeOutPower = 1 / Math.max(easeLinearity || 0.5, 0.2);

            this._startPos = L.DomUtil.getPosition(el);
            this._offset = newPos.subtract(this._startPos);
            this._startTime = +new Date();

            // @event start: Event
            // Fired when the animation starts
            this.fire('start');

            this._animate();
        },

        // @method stop()
        // Stops the animation (if currently running).
        stop: function () {
            if (!this._inProgress) { return; }

            this._step(true);
            this._complete();
        },

        _animate: function () {
            // animation loop
            this._animId = L.Util.requestAnimFrame(this._animate, this);
            this._step();
        },

        _step: function (round) {
            var elapsed = (+new Date()) - this._startTime,
                duration = this._duration * 1000;

            if (elapsed < duration) {
                this._runFrame(this._easeOut(elapsed / duration), round);
            } else {
                this._runFrame(1);
                this._complete();
            }
        },

        _runFrame: function (progress, round) {
            var pos = this._startPos.add(this._offset.multiplyBy(progress));
            if (round) {
                pos._round();
            }
            L.DomUtil.setPosition(this._el, pos);

            // @event step: Event
            // Fired continuously during the animation.
            this.fire('step');
        },

        _complete: function () {
            L.Util.cancelAnimFrame(this._animId);

            this._inProgress = false;
            // @event end: Event
            // Fired when the animation ends.
            this.fire('end');
        },

        _easeOut: function (t) {
            return 1 - Math.pow(1 - t, this._easeOutPower);
        }
    });



    /*
     * Extends L.Map to handle panning animations.
     */

    L.Map.include({

        setView: function (center, zoom, options) {

            zoom = zoom === undefined ? this._zoom : this._limitZoom(zoom);
            center = this._limitCenter(L.latLng(center), zoom, this.options.maxBounds);
            options = options || {};

            this._stop();

            if (this._loaded && !options.reset && options !== true) {

                if (options.animate !== undefined) {
                    options.zoom = L.extend({animate: options.animate}, options.zoom);
                    options.pan = L.extend({animate: options.animate, duration: options.duration}, options.pan);
                }

                // try animating pan or zoom
                var moved = (this._zoom !== zoom) ?
                this._tryAnimatedZoom && this._tryAnimatedZoom(center, zoom, options.zoom) :
                    this._tryAnimatedPan(center, options.pan);

                if (moved) {
                    // prevent resize handler call, the view will refresh after animation anyway
                    clearTimeout(this._sizeTimer);
                    return this;
                }
            }

            // animation didn't start, just reset the map view
            this._resetView(center, zoom);

            return this;
        },

        panBy: function (offset, options) {
            offset = L.point(offset).round();
            options = options || {};

            if (!offset.x && !offset.y) {
                return this.fire('moveend');
            }
            // If we pan too far, Chrome gets issues with tiles
            // and makes them disappear or appear in the wrong place (slightly offset) #2602
            if (options.animate !== true && !this.getSize().contains(offset)) {
                this._resetView(this.unproject(this.project(this.getCenter()).add(offset)), this.getZoom());
                return this;
            }

            if (!this._panAnim) {
                this._panAnim = new L.PosAnimation();

                this._panAnim.on({
                    'step': this._onPanTransitionStep,
                    'end': this._onPanTransitionEnd
                }, this);
            }

            // don't fire movestart if animating inertia
            if (!options.noMoveStart) {
                this.fire('movestart');
            }

            // animate pan unless animate: false specified
            if (options.animate !== false) {
                L.DomUtil.addClass(this._mapPane, 'leaflet-pan-anim');

                var newPos = this._getMapPanePos().subtract(offset).round();
                this._panAnim.run(this._mapPane, newPos, options.duration || 0.25, options.easeLinearity);
            } else {
                this._rawPanBy(offset);
                this.fire('move').fire('moveend');
            }

            return this;
        },

        _onPanTransitionStep: function () {
            this.fire('move');
        },

        _onPanTransitionEnd: function () {
            L.DomUtil.removeClass(this._mapPane, 'leaflet-pan-anim');
            this.fire('moveend');
        },

        _tryAnimatedPan: function (center, options) {
            // difference between the new and current centers in pixels
            var offset = this._getCenterOffset(center)._floor();

            // don't animate too far unless animate: true specified in options
            if ((options && options.animate) !== true && !this.getSize().contains(offset)) { return false; }

            this.panBy(offset, options);

            return true;
        }
    });



    /*
     * Extends L.Map to handle zoom animations.
     */

// @namespace Map
// @section Animation Options
    L.Map.mergeOptions({
        // @option zoomAnimation: Boolean = true
        // Whether the map zoom animation is enabled. By default it's enabled
        // in all browsers that support CSS3 Transitions except Android.
        zoomAnimation: true,

        // @option zoomAnimationThreshold: Number = 4
        // Won't animate zoom if the zoom difference exceeds this value.
        zoomAnimationThreshold: 4
    });

    var zoomAnimated = L.DomUtil.TRANSITION && L.Browser.any3d && !L.Browser.mobileOpera;

    if (zoomAnimated) {

        L.Map.addInitHook(function () {
            // don't animate on browsers without hardware-accelerated transitions or old Android/Opera
            this._zoomAnimated = this.options.zoomAnimation;

            // zoom transitions run with the same duration for all layers, so if one of transitionend events
            // happens after starting zoom animation (propagating to the map pane), we know that it ended globally
            if (this._zoomAnimated) {

                this._createAnimProxy();

                L.DomEvent.on(this._proxy, L.DomUtil.TRANSITION_END, this._catchTransitionEnd, this);
            }
        });
    }

    L.Map.include(!zoomAnimated ? {} : {

        _createAnimProxy: function () {

            var proxy = this._proxy = L.DomUtil.create('div', 'leaflet-proxy leaflet-zoom-animated');
            this._panes.mapPane.appendChild(proxy);

            this.on('zoomanim', function (e) {
                var prop = L.DomUtil.TRANSFORM,
                    transform = proxy.style[prop];

                L.DomUtil.setTransform(proxy, this.project(e.center, e.zoom), this.getZoomScale(e.zoom, 1));

                // workaround for case when transform is the same and so transitionend event is not fired
                if (transform === proxy.style[prop] && this._animatingZoom) {
                    this._onZoomTransitionEnd();
                }
            }, this);

            this.on('load moveend', function () {
                var c = this.getCenter(),
                    z = this.getZoom();
                L.DomUtil.setTransform(proxy, this.project(c, z), this.getZoomScale(z, 1));
            }, this);
        },

        _catchTransitionEnd: function (e) {
            if (this._animatingZoom && e.propertyName.indexOf('transform') >= 0) {
                this._onZoomTransitionEnd();
            }
        },

        _nothingToAnimate: function () {
            return !this._container.getElementsByClassName('leaflet-zoom-animated').length;
        },

        _tryAnimatedZoom: function (center, zoom, options) {

            if (this._animatingZoom) { return true; }

            options = options || {};

            // don't animate if disabled, not supported or zoom difference is too large
            if (!this._zoomAnimated || options.animate === false || this._nothingToAnimate() ||
                Math.abs(zoom - this._zoom) > this.options.zoomAnimationThreshold) { return false; }

            // offset is the pixel coords of the zoom origin relative to the current center
            var scale = this.getZoomScale(zoom),
                offset = this._getCenterOffset(center)._divideBy(1 - 1 / scale);

            // don't animate if the zoom origin isn't within one screen from the current center, unless forced
            if (options.animate !== true && !this.getSize().contains(offset)) { return false; }

            L.Util.requestAnimFrame(function () {
                this
                    ._moveStart(true)
                    ._animateZoom(center, zoom, true);
            }, this);

            return true;
        },

        _animateZoom: function (center, zoom, startAnim, noUpdate) {
            if (startAnim) {
                this._animatingZoom = true;

                // remember what center/zoom to set after animation
                this._animateToCenter = center;
                this._animateToZoom = zoom;

                L.DomUtil.addClass(this._mapPane, 'leaflet-zoom-anim');
            }

            // @event zoomanim: ZoomAnimEvent
            // Fired on every frame of a zoom animation
            this.fire('zoomanim', {
                center: center,
                zoom: zoom,
                noUpdate: noUpdate
            });

            // Work around webkit not firing 'transitionend', see https://github.com/Leaflet/Leaflet/issues/3689, 2693
            setTimeout(L.bind(this._onZoomTransitionEnd, this), 250);
        },

        _onZoomTransitionEnd: function () {
            if (!this._animatingZoom) { return; }

            L.DomUtil.removeClass(this._mapPane, 'leaflet-zoom-anim');

            this._animatingZoom = false;

            this._move(this._animateToCenter, this._animateToZoom);

            // This anim frame should prevent an obscure iOS webkit tile loading race condition.
            L.Util.requestAnimFrame(function () {
                this._moveEnd(true);
            }, this);
        }
    });



// @namespace Map
// @section Methods for modifying map state
    L.Map.include({

        // @method flyTo(latlng: LatLng, zoom?: Number, options?: Zoom/Pan options): this
        // Sets the view of the map (geographical center and zoom) performing a smooth
        // pan-zoom animation.
        flyTo: function (targetCenter, targetZoom, options) {

            options = options || {};
            if (options.animate === false || !L.Browser.any3d) {
                return this.setView(targetCenter, targetZoom, options);
            }

            this._stop();

            var from = this.project(this.getCenter()),
                to = this.project(targetCenter),
                size = this.getSize(),
                startZoom = this._zoom;

            targetCenter = L.latLng(targetCenter);
            targetZoom = targetZoom === undefined ? startZoom : targetZoom;

            var w0 = Math.max(size.x, size.y),
                w1 = w0 * this.getZoomScale(startZoom, targetZoom),
                u1 = (to.distanceTo(from)) || 1,
                rho = 1.42,
                rho2 = rho * rho;

            function r(i) {
                var s1 = i ? -1 : 1,
                    s2 = i ? w1 : w0,
                    t1 = w1 * w1 - w0 * w0 + s1 * rho2 * rho2 * u1 * u1,
                    b1 = 2 * s2 * rho2 * u1,
                    b = t1 / b1,
                    sq = Math.sqrt(b * b + 1) - b;

                // workaround for floating point precision bug when sq = 0, log = -Infinite,
                // thus triggering an infinite loop in flyTo
                var log = sq < 0.000000001 ? -18 : Math.log(sq);

                return log;
            }

            function sinh(n) { return (Math.exp(n) - Math.exp(-n)) / 2; }
            function cosh(n) { return (Math.exp(n) + Math.exp(-n)) / 2; }
            function tanh(n) { return sinh(n) / cosh(n); }

            var r0 = r(0);

            function w(s) { return w0 * (cosh(r0) / cosh(r0 + rho * s)); }
            function u(s) { return w0 * (cosh(r0) * tanh(r0 + rho * s) - sinh(r0)) / rho2; }

            function easeOut(t) { return 1 - Math.pow(1 - t, 1.5); }

            var start = Date.now(),
                S = (r(1) - r0) / rho,
                duration = options.duration ? 1000 * options.duration : 1000 * S * 0.8;

            function frame() {
                var t = (Date.now() - start) / duration,
                    s = easeOut(t) * S;

                if (t <= 1) {
                    this._flyToFrame = L.Util.requestAnimFrame(frame, this);

                    this._move(
                        this.unproject(from.add(to.subtract(from).multiplyBy(u(s) / u1)), startZoom),
                        this.getScaleZoom(w0 / w(s), startZoom),
                        {flyTo: true});

                } else {
                    this
                        ._move(targetCenter, targetZoom)
                        ._moveEnd(true);
                }
            }

            this._moveStart(true);

            frame.call(this);
            return this;
        },

        // @method flyToBounds(bounds: LatLngBounds, options?: fitBounds options): this
        // Sets the view of the map with a smooth animation like [`flyTo`](#map-flyto),
        // but takes a bounds parameter like [`fitBounds`](#map-fitbounds).
        flyToBounds: function (bounds, options) {
            var target = this._getBoundsCenterZoom(bounds, options);
            return this.flyTo(target.center, target.zoom, options);
        }
    });



    /*
     * Provides L.Map with convenient shortcuts for using browser geolocation features.
     */

// @namespace Map

    L.Map.include({
        // @section Geolocation methods
        _defaultLocateOptions: {
            timeout: 10000,
            watch: false
            // setView: false
            // maxZoom: <Number>
            // maximumAge: 0
            // enableHighAccuracy: false
        },

        // @method locate(options?: Locate options): this
        // Tries to locate the user using the Geolocation API, firing a `locationfound`
        // event with location data on success or a `locationerror` event on failure,
        // and optionally sets the map view to the user's location with respect to
        // detection accuracy (or to the world view if geolocation failed).
        // See `Locate options` for more details.
        locate: function (options) {

            options = this._locateOptions = L.extend({}, this._defaultLocateOptions, options);

            if (!('geolocation' in navigator)) {
                this._handleGeolocationError({
                    code: 0,
                    message: 'Geolocation not supported.'
                });
                return this;
            }

            var onResponse = L.bind(this._handleGeolocationResponse, this),
                onError = L.bind(this._handleGeolocationError, this);

            if (options.watch) {
                this._locationWatchId =
                    navigator.geolocation.watchPosition(onResponse, onError, options);
            } else {
                navigator.geolocation.getCurrentPosition(onResponse, onError, options);
            }
            return this;
        },

        // @method stopLocate(): this
        // Stops watching location previously initiated by `map.locate({watch: true})`
        // and aborts resetting the map view if map.locate was called with
        // `{setView: true}`.
        stopLocate: function () {
            if (navigator.geolocation && navigator.geolocation.clearWatch) {
                navigator.geolocation.clearWatch(this._locationWatchId);
            }
            if (this._locateOptions) {
                this._locateOptions.setView = false;
            }
            return this;
        },

        _handleGeolocationError: function (error) {
            var c = error.code,
                message = error.message ||
                    (c === 1 ? 'permission denied' :
                        (c === 2 ? 'position unavailable' : 'timeout'));

            if (this._locateOptions.setView && !this._loaded) {
                this.fitWorld();
            }

            // @section Location events
            // @event locationerror: ErrorEvent
            // Fired when geolocation (using the [`locate`](#map-locate) method) failed.
            this.fire('locationerror', {
                code: c,
                message: 'Geolocation error: ' + message + '.'
            });
        },

        _handleGeolocationResponse: function (pos) {
            var lat = pos.coords.latitude,
                lng = pos.coords.longitude,
                latlng = new L.LatLng(lat, lng),
                bounds = latlng.toBounds(pos.coords.accuracy),
                options = this._locateOptions;

            if (options.setView) {
                var zoom = this.getBoundsZoom(bounds);
                this.setView(latlng, options.maxZoom ? Math.min(zoom, options.maxZoom) : zoom);
            }

            var data = {
                latlng: latlng,
                bounds: bounds,
                timestamp: pos.timestamp
            };

            for (var i in pos.coords) {
                if (typeof pos.coords[i] === 'number') {
                    data[i] = pos.coords[i];
                }
            }

            // @event locationfound: LocationEvent
            // Fired when geolocation (using the [`locate`](#map-locate) method)
            // went successfully.
            this.fire('locationfound', data);
        }
    });
}(window, document));
(function(a){a.extend(jQuery.easing,{easeOutQuint:function(f,g,e,i,h){return i*((g=g/h-1)*g*g*g*g+1)+e}});a.fn.hScrollPane=function(b){b=a.extend(true,{},a.fn.hScrollPane.defaults,b);this.each(function(){var e=a(this),f=e.find(b.mover),d=e.width(),j=b.moverW||f.width(),i=(e.find(".hScrollPane_dragbar").length===0&&j>d)?e.append('<div class="hScrollPane_dragbar"><div class="hScrollPane_draghandle"></div></div>').find(".hScrollPane_dragbar"):e.find(".hScrollPane_dragbar"),h=i.find(".hScrollPane_draghandle");
if(b.showArrow){e.append('<a href="###" class="hScrollPane_leftarrow"></a><a href="###" class="hScrollPane_rightarrow"></a>');leftArrow=e.find(".hScrollPane_leftarrow");rightArrow=e.find(".hScrollPane_rightarrow");i.css({width:e.width()-leftArrow.outerWidth()*2,left:leftArrow.outerWidth()});leftArrow.unbind();rightArrow.unbind()}else{i.css("width",e.width())}f.stop().css("left","0px");h.css({top:b.top,height:parseInt(b.height)-2});e.unbind();h.unbind();i.unbind();h.stop().css({width:(d/j)*d>b.handleMinWidth?(d/j)*d:b.handleMinWidth,left:0});
if(j>d){i.show()}else{i.hide();return false}var g=parseInt(i.width())-parseInt(h.outerWidth());i.bind("click",function(k){var c=k.pageX>h.offset().left+h.outerWidth()?-1:1;a.fn.hScrollPane.move(b,f,h,d,j,g,c)});h.bind("mousedown",function(k){var c=k.pageX;var l=parseInt(h.css("left"));if(b.handleCssAlter){a(this).addClass(b.handleCssAlter)}a(document).bind("mousemove",function(n){var m=n.pageX-c+l<0?0:(n.pageX-c+l>=g?g:n.pageX-c+l);h.stop().css({left:m});if(b.easing){f.stop().animate({left:-m/g*(j-d)},{duration:1500,easing:"easeOutQuint",queue:false})
}else{f.css({left:-m/g*(j-d)})}return false});a(document).bind("mouseup",function(){if(b.handleCssAlter){h.removeClass(b.handleCssAlter)}a(this).unbind("mousemove")});return false}).click(function(){return false});if(b.dragable){f.bind("mousedown",function(k){var c=k.pageX;a(this).bind("mousemove",function(l){a.fn.hScrollPane.move(b,f,h,d,j,g,c,l.pageX);return false});a(document).bind("mouseup",function(){f.unbind("mousemove")})})}if(b.mousewheel.bind){e.bind("mousewheel",function(c,k){a.fn.hScrollPane.move(b,f,h,d,j,g,k);
return false})}if(b.showArrow){leftArrow.click(function(){a.fn.hScrollPane.move(b,f,h,d,j,g,1);return false}).focus(function(){this.blur()});rightArrow.click(function(){a.fn.hScrollPane.move(b,f,h,d,j,g,-1);return false}).focus(function(){this.blur()})}this.ondragstart=function(){return false};this.onselectstart=function(){return false}})};a.fn.hScrollPane.defaults={showArrow:false,handleMinWidth:0,dragable:true,easing:true,mousewheel:{bind:true,moveLength:300}};a.fn.hScrollPane.move=function(f,b,h,l,i,e,k,g){if(arguments.length===7){var d=parseInt(b.css("left"))+k*f.mousewheel.moveLength
}else{var d=parseInt(b.css("left"))+((g-k)/l)*(i-l)}d=d.toFixed(0);d=d>0?0:d<l-i?l-i:d;var j=(d/(l-i))*e;if(f.easing){b.stop().animate({left:d},{duration:1500,easing:"easeOutQuint",queue:false});h.stop().animate({left:j},{duration:1500,easing:"easeOutQuint",queue:false})}else{b.stop().animate({left:d},{duration:5,queue:false});h.css({left:j})}}})(jQuery);
FR.Form=FR.extend(FR.OB,{_init:function(){FR.Form.superclass._init.apply(this,arguments);this.name_widgets={};var b=this;var a=this.options.selector;if(typeof a=="string"){var c;$(a,this.options.renderEl).each(function(d,e){if(e.hasInit!==true){c=b.addWidget($(e));if(c.options.widgetName!=null){b.initLinkWidgetEvent(c)}}})}},addWidget:function(c){c[0].hasInit=true;var d=FR.jsonDecode(c.attr("widget"));var f=c.attr("widgetWidth");f=f>0?f:c.attr("width");var e=c.attr("widgetHeight");e=e>0?e:c.attr("height");
d.width=f;d.height=e;$.extend(d,{form:this});var g=$("<div/>").appendTo(c);d.renderEl=g;if(d.jspath){var b=d.jspath.split(";");$.each(b,function(h,j){FR.$import(j,"js")})}if(d.csspath){var b=d.csspath.split(";");$.each(b,function(h,j){FR.$import(j,"css")})}var a=FR.createWidget(d);return a},initLinkWidgetEvent:function(c){if(!c||!c.options){return}var a=c.options.dependence;var b=this;if(FR.isArray(a)){$.each(a,function(d,f){var e=b.getWidgetByName(f);if(e!=null&&e!=c){if(!e.$linkWidget){e.$linkWidget={data:{},value:{}};
e.on(FR.Events.AFTEREDIT,function(){b.fireWidgetValueChanged(e)})}e.$linkWidget.data[c.options.widgetName]=c}})}},fireWidgetValueChanged:function(b){for(var a in b.$linkWidget.data){b.$linkWidget.data[a].reset()}},getWidgetByName:function(a){if(!a){return null}if(a.startWith("$")){a=a.substring(1)}return this.name_widgets[a.toUpperCase()]},resolveVariable:function(a){var b;if($.isFunction(this.options.resolveVariable)){b=this.options.resolveVariable(a)}var c;if(b==null){c=this.getWidgetByName(a);
if(c==null){b=this._getValueByName(a)}else{b=c.getValue()}}return b},_getValueByName:function(c){var b=this.options.items;var a=b.length;var e;if(!c){return null}if(c.startWith("$")){c=c.substring(1)}for(var d=0;d<a;d++){if(b[d].widgetName==c.toUpperCase()){var f=b[d];e=this._dealWithValueFormat(f)}if(e!=null){return e}}return e},_dealWithValueFormat:function(c){if(!c){return null}var b;b=c.value;if(b&&b.date_milliseconds){var a=b.date_milliseconds;if(c.format){return FR.contentFormat(b.date_milliseconds,"D"+c.format)
}}return b},verify:function(){var a=true;for(var b in this.name_widgets){var c=this.name_widgets[b];if($.isFunction(c.isValidate)&&!c.isValidate()){FR.Msg.toast(c.errorMsg);a=false}}return a},collectionValue:function(c){var e={};for(var a in this.name_widgets){var b=this.name_widgets[a];if(!(b.options.needSubmit===true)){continue}if(b.options.widgetName){var d=b.getValue();d=FR.encodePrecentPlus(d);if(d==undefined){d=null}e[b.options.widgetName.toUpperCase()]=d}}if(c){$.each(c,function(f,g){e[f]=g
})}return FR.jsonEncode(e)},dbCommit:function(b,a){if(_g().saveReport){_g().saveReport((function(){this.formSubmit({url:FR.servletURL+"?op=dbcommit",data:{location:a?a.options.location:null,sheetNum:_g().selectedIndex,xmlconf:b.xmlconf,callback:b.callback,feedbackMap:b.feedbackMap,sessionID:_g().currentSessionID||_g().sessionID}})}).createDelegate(this))}else{this.formSubmit({url:FR.servletURL+"?op=dbcommit",data:{xmlconf:b.xmlconf,callback:b.callback,feedbackMap:b.feedbackMap,sessionID:_g().currentSessionID||_g().sessionID}})
}},formSubmit:function(){if(!this.verify()){if(this.QueryBtn){this.QueryBtn.enable()}return}if(_g()&&_g().options&&_g().options.type=="write"){_g().stopEditing();if(_g().isDirtyPage()&&_g().options.unloadCheck!==false){if(!confirm(FR.i18nText("FR-Engine_Unload_Check_Msg")+"!\n"+FR.i18nText("FR-Engine_SQLWizard-would_you_like_to_continue")+"？")){if(this.QueryBtn){this.QueryBtn.enable()}return}}}var b=arguments[0];if(b.url==null){return}var c=this.config=$.extend({asyn:true},b);this.$sform=$($(".form-submit",this.element)[0]);
var a=this;if(c.asyn){FR.ajax({url:c.url,type:"POST",data:{__parameters__:this.collectionValue(c.data)},complete:function(f,d){var e=FR.jsonDecode(f.responseText);if(c.callback){c.callback.call(a,f,d)}if(e.callback){f.responseText=e.oldres;e.callback.call(a,f,d)}a._fireSubmitEvents(d)}})}else{this.$sform.attr("method","post");this.$sform.attr("action",b.url);if(b.target){this.$sform.attr("target",b.target)}if(!this.$sform_hidden){this.$sform_hidden=$("<input name = '__parameters__' type='hidden'/>").appendTo(this.$sform);
this.$sform_hidden.attr("value",FR.cjkEncode(this.collectionValue(c.data)))}this.$sform.submit()}},sentMail:function(a){FR.ajax({url:FR.servletURL,type:"POST",async:false,data:{op:"fr_email",cmd:"sent_email",sessionID:FR.SessionMgr.getSessionID(),mailXML:a.xmlconf,paraMap:a.paraMap||{},__parameters__:this.collectionValue()}})},customSubmit:function(a){FR.ajax({url:FR.servletURL,type:"POST",async:false,data:{op:"customevent",reportIndex:_g().curLGP.idx,sessionID:FR.SessionMgr.getSessionID(),xmlconf:a.xmlconf,reportXML:_g().generateReportXML(true),paraMap:a.paraMap||{}}})
},_fireSubmitEvents:function(a){if(a=="success"){this.fireEvent(FR.Events.SS)}else{this.fireEvent(FR.Events.SF)}this.fireEvent(FR.Events.SC)},getValueByName:function(a){var b=this.getWidgetByName(a);if(b&&b.getValue){return b.getValue()}},visible:function(e,b){if($.isArray(e)){for(var c=0,a=e.length;c<a;c++){var d=this.getWidgetByName(e[c]);if(d){d.visible(b)}}}},invisible:function(e,b){if($.isArray(e)){for(var c=0,a=e.length;c<a;c++){var d=this.getWidgetByName(e[c]);if(d){d.invisible(b)}}}}});$.shortcut("fr_form",FR.Form);
FR.contentForm=FR.extend(FR.Form,{_init:function(){this.name_widgets={};this.datakey_widgets=[];this.options.form=this;this.sessionID=this.options.widgetUrl?this.options.widgetUrl.getQuery("sessionID"):this.options.sessionID;this.content=this.createConfig2Form();this.content.fireEvent(FR.Events.AFTERINIT)},createConfig2Form:function(){var c=this.options;var g=this.afterInitEventList==undefined;if(g){this.afterInitEventList={}}var b=this._createConfig4Form(c);var f=FR.createWidget(b);this.rootWidget=f;
for(var d in f.options.resultWidgets){this.add(f.options.resultWidgets[d])}this.name_widgets=f.options.resultWidgets;var a=this;$.each(this.name_widgets,function(h,j){if(j.options.widgetName!=null){a.initLinkWidgetEvent(j)}});if(g){var e=this.afterInitEventList;delete this.afterInitEventList;f.once(FR.Events.AFTERINIT,function(){for(var h in e){var l=e[h];var m=a.getWidgetByName(h);if(m&&FR.isArray(l)){for(var k=0;k<l.length;k++){var j=l[k].action.createDelegate(l[k].target?l[k].target:m);if(j.apply(m)===false){break
}}}}})}return f},getRootWidget:function(){return this.rootWidget},_createConfig4Form:function(c){c.form=this;if(c.items){for(var d=0;d<c.items.length;d++){var b;if(c.items[d].el){b=c.items[d].el}else{if(c.items[d]){b=c.items[d]}}if(b){this._createConfig4Form(b)}}}if(c.listeners!=null){for(var d=0;d<c.listeners.length;d++){var a=c.listeners[d];if(a.eventName=="afterinit"){if(c.form.afterInitEventList[c.widgetName]==null){c.form.afterInitEventList[c.widgetName]=[]}c.listeners.remove(a);d--;c.form.afterInitEventList[c.widgetName].push(a)
}}}return c},add:function(c){if(c.options.Databinding){var a=c.options.Databinding;a.widget=c;this.datakey_widgets.push(a)}var b=this;c.load=function(){b.loadContentData(this)}},getWidgetByCell:function(){throw (' "getWidgetByCell" is not a function in form')},_confirmEvents:function(){this.fireEvent(FR.Events.AFTERINIT);this.doLayout()},initLinkWidgetEvent:function(c){if(!c||!c.options){return}FR.contentForm.superclass.initLinkWidgetEvent.apply(this,arguments);var a=c.options.valueDependence;var b=this;
if(FR.isArray(a)){$.each(a,function(d,f){var e=b.getWidgetByName(f);if(e!=null&&e!=c){if(!e.$linkWidget){e.$linkWidget={data:{},value:{}};e.on(FR.Events.AFTEREDIT,function(){b.fireWidgetValueChanged(e)})}e.$linkWidget.value[c.options.widgetName]=c}})}},fireWidgetValueChanged:function(e){if(!e.$linkWidget){return}for(var d in e.$linkWidget.data){e.$linkWidget.data[d].reset()}var b=FR.jsonDecode(this.collectionValue());var h={};var g={widgetNameList:[],chartWidgets:[],elementCaseWidgets:[]};var a=[];
var f=[];var c=[];this.pushLinkWidgetIntoList(e,h,g,b);this.executeWidgets(g.widgetNameList,h,b);this.executeCharts(g.chartWidgets);this.executeElements(g.elementCaseWidgets)},pushLinkWidgetIntoList:function(c,i,g,j){var d=c.$linkWidget;if(!d){return}var e=g.widgetNameList;var b=g.chartWidgets;var a=g.elementCaseWidgets;for(var f in d.value){var h=d.value[f];if(h.xtype=="chartwidget"){b.push(h)}else{if(h.xtype=="elementcase"){a.push(h)}else{i[f]=h;e.push(f);j[f]="";this.pushLinkWidgetIntoList(h,i,g,j)
}}}for(var f in d.data){var h=d.data[f];e.push(f);j[f]="";this.pushLinkWidgetIntoList(h,i,g,j)}},executeWidgets:function(b,e,a){if(b.length===0){return}var c=this;var d=FR.buildServletUrl({_:new Date().getTime(),op:"fr_form",cmd:"form_getsource",sessionID:this.options.form.sessionID,__widgetname__:b});FR.ajax({url:d,type:"POST",async:false,data:{__parameters__:FR.jsonEncode(a)},complete:function(h,g){if(g=="success"){var i=FR.jsonDecode(h.responseText);for(var f in i){if(e[f]){e[f].setSource(i[f])
}else{if(e[f.toUpperCase()]){e[f.toUpperCase()].setSource(i[f])}}}}}})},executeCharts:function(a){if(a.length>0){$.each(a,function(b,c){c.reload()})}},executeElements:function(a){var b=this;if(a.length>0){$.each(a,function(c,d){d.gotoPage(1,b.collectionValue(),"t")})}},loadContentData:function(e){var f={};var d={add:function(g){f[g.options.widgetName]=g},remove:function(g){delete f[g.options.widgetName]}};for(var c in e.options.resultWidgets){d.add(e.options.resultWidgets[c])}var a=this;var b=FR.buildServletUrl({op:"fr_form",cmd:"form_getsource",sessionID:this.options.form.sessionID,__isContent__:true,__widgetname__:e.options.widgetName});
FR.ajax({url:b,type:"POST",async:false,data:{__parameters__:a.collectionValue()},complete:function(i,h){if(h=="success"){var j=FR.jsonDecode(i.responseText);for(var g in j){if(f[g]){f[g].setSource(j[g])}}}else{}}})},parameterCommit:function(a){if(this.parameterEl){this.parameterEl.formSubmit({url:FR.servletURL+"?op=fr_dialog&cmd=parameters_d&sessionID="+this.sessionID,callback:function(){_g().loadContentPane(a)}})}},loadContentPane:function(b){var a;var c=this.sessionID;FR.ajax({url:FR.servletURL,data:{_:new Date().getTime(),op:"fr_form",cmd:"load_content",sessionID:c},beforeSend:function(){FR.HtmlLoader.loadingEffect({el:$(".content-container"),show:true})
},async:true,complete:function(j,g){if(g=="success"){contenConfig=FR.jsonDecode(j.responseText);if(FR.Form.getFitConfigFromServer){contenConfig=FR.Form.getFitConfigFromServer(contenConfig)}var h=window.globalForm.parameterEl;var i=$(".content-container");var l=$(".para-container");if(i){i.remove()}var f=$("body");var k=[];i=$("<div class='content-container'>");contenConfig.renderEl=i;var d=new FR.contentForm(contenConfig);k.push({region:"center",el:i});d.parameterEl=h;k.push({region:"north",el:l});
var e=new FR.BorderLayout({items:k,renderEl:f});FR.SessionMgr.register(c,d);_g().name_widgets=d.name_widgets;e.doLayout();i.css("overflow","auto");$(window).resize(function(){e.doLayout()});FR.HtmlLoader.loadingEffect({el:i})}}});this.fireEvent(FR.Events.AFTERLOAD);if(FR.Form.bindFitResize){FR.Form.bindFitResize(this,b)}},load:function(){this.loadContentData(this.content)},remove:function(b){var a=this;if(b.options.Databinding){$.each(a.datakey_widgets,function(c,d){if(d&&d.Name==b.options.Databinding.Name&&d.Key==b.options.Databinding.Key){a.datakey_widgets.splice(c,1)
}})}delete this.name_widgets[b.options.widgetName]},_fireSubmitEvents:function(a){if(a=="success"){this.content.fireEvent(FR.Events.SS)}else{this.content.fireEvent(FR.Events.SF)}this.content.fireEvent(FR.Events.SC)},preferredLayout:function(){var a=0,d=2147483647,b=0,c=0;$.each(this.rootWidget.options.items,function(e,f){if(!f.el.isVisible()){d=Math.min(d,f.y);b=Math.max(b,f.y+f.height)}});$.each(this.rootWidget.options.items,function(e,f){if(f.el.isVisible()&&(f.y+f.height)<d){c=Math.max(f.y+f.height,c)
}});$.each(this.rootWidget.options.items,function(e,f){if(f.el.isVisible()){if(f.y>d){f.delta=c-b}else{f.delta=0}}});$.each(this.rootWidget.options.items,function(e,f){if(f.el.isVisible()){a=Math.max(a,f.y+f.height+f.delta)}});if($.isFunction(this.options.onCalculate)){this.options.onCalculate.call(this,a)}},doLayout:function(){if(this.content){this.content.setMinSize();this.content.doLayout()}}});$.shortcut("fr_contentform",FR.contentForm);$.extend(FR,{getDependence:function(a){if(a.getDependenceObj){return a.getDependenceObj()
}},domFormSubmit:function(c,d,k,l){if(!FR.notCloseDialogOnSubmit){FR.closeDialog()}d=$.extend({cjkEncode:true},d);var m;if(d.context){m=$(c,d.context)}else{m=$(c)}if(m.length===0){return}l=$.extend({scope:this},l);var b=m.serializeArray();var e={};for(var f=0;f<b.length;f++){var h=b[f];if(d.cjkEncode===true){e[FR.cjkEncode(h.name)]=FR.cjkEncode(h.value)}else{e[h.name]=h.value}}$.extend(e,d);var g={type:"POST",data:e,url:d.url||m[0].action,complete:function(n,i){$.isFunction(k)&&k.call(l.scope,n,i,l)
}};var a=$("input:file",m);if(a.length>0){if(FR.Browser.webkit&&g.closeKeepAlive){$.get(g.closeKeepAlive,j)}else{j()}}else{FR.ajax(g)}function j(){var r=m[0];if($(":input[name=submit]",r).length){alert('Error: Form elements must not be named "submit".');return}g.success=g.success||FR.emptyFn;var p=$.extend({},$.ajaxSettings,g);var D=jQuery.extend(true,{},$.extend(true,{},$.ajaxSettings),p);var q="jqFormIO"+(new Date().getTime());var y=$('<iframe id="'+q+'" name="'+q+'" />');var A=y[0];if(FR.Browser.isIE()||FR.Browser.opera){A.src='javascript:false;document.write("");'
}y.css({position:"absolute",top:"-1000px",left:"-1000px"});var C={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=1;y.attr("src","about:blank")}};var z=p.global;if(z&&!$.active++){$.event.trigger("ajaxStart")}if(z){$.event.trigger("ajaxSend",[C,p])}if(D.beforeSend&&D.beforeSend(C,D)===false){D.global&&jQuery.active--;return}if(C.aborted){return}var o=0;
var v=0;var i=r.clk;if(i){var t=i.name;if(t&&!i.disabled){g.extraData=g.extraData||{};g.extraData[t]=i.value;if(i.type=="image"){g.extraData[name+".x"]=r.clk_x;g.extraData[name+".y"]=r.clk_y}}}setTimeout(function(){var F=m.attr("target"),s=m.attr("action");m.attr({target:q,method:"POST",action:p.url});if(!g.skipEncodingOverride){m.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(p.timeout){setTimeout(function(){v=true;w()},p.timeout)}var E=[];try{if(g.extraData){for(var G in g.extraData){E.push($('<input type="hidden" name="'+G+'" value="'+g.extraData[G]+'" />').appendTo(r)[0])
}}y.appendTo("body");A.attachEvent?A.attachEvent("onload",w):A.addEventListener("load",w,false);r.submit()}finally{m.attr("action",s);F?m.attr("target",F):m.removeAttr("target");$(E).remove()}},10);function w(){if(o++){return}A.detachEvent?A.detachEvent("onload",w):A.removeEventListener("load",w,false);var s=0;var E=true;try{if(v){throw"timeout"}var F,H;H=A.contentWindow?A.contentWindow.document:A.contentDocument?A.contentDocument:A.document;if(H.body==null&&!s&&FR.Browser.opera){s=1;o--;setTimeout(w,100);
return}C.responseText=H.body?H.body.innerHTML:null;C.responseXML=H.XMLDocument?H.XMLDocument:H;C.getResponseHeader=function(J){var I={"content-type":p.dataType};return I[J]};if(p.dataType=="json"||p.dataType=="script"){var n=H.getElementsByTagName("textarea")[0];C.responseText=n?n.value:C.responseText}else{if(p.dataType=="xml"&&!C.responseXML&&C.responseText!=null){C.responseXML=x(C.responseText)}}F=B(C,p.dataType)}catch(G){E=false;u(p,C,"error",G)}if(E){p.success(F,"success");if(z){$.event.trigger("ajaxSuccess",[C,p])
}}if(z){$.event.trigger("ajaxComplete",[C,p])}if(z&&!--$.active){$.event.trigger("ajaxStop")}if(p.complete){p.complete(C,E?"success":"error")}setTimeout(function(){y.remove();C.responseXML=null},100)}function u(E,G,n,F){if(E.error){E.error.call(E.context||window,G,n,F)}if(E.global){(E.context?jQuery(E.context):jQuery.event).trigger("ajaxError",[G,E,F])}}function B(I,G,F){var E=I.getResponseHeader("content-type")||"",n=G==="xml"||!G&&E.indexOf("xml")>=0,H=n?I.responseXML:I.responseText;if(n&&H.documentElement.nodeName==="parsererror"){throw"parsererror"
}if(F&&F.dataFilter){H=F.dataFilter(H,G)}if(typeof H==="string"){if(G==="json"||!G&&E.indexOf("json")>=0){if(/^[\],:{}\s]*$/.test(H.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){if(window.JSON&&window.JSON.parse){H=window.JSON.parse(H)}else{H=(new Function("return "+H))()}}else{throw"Invalid JSON: "+H}}else{if(G==="script"||!G&&E.indexOf("javascript")>=0){jQuery.globalEval(H)}}}return H
}function x(n,E){if(window.ActiveXObject){E=new ActiveXObject("Microsoft.XMLDOM");E.async="false";E.loadXML(n)}else{E=(new DOMParser()).parseFromString(n,"text/xml")}return(E&&E.documentElement&&E.documentElement.tagName!="parsererror")?E:null}}},formSubmitCallback:function(c,a,b){FR.Msg.toast(a=="success"&&c.responseText=="true"?FR.i18nText("HJS-Send_Successfully")+"!":FR.i18nText("HJS-Send_Failed")+"!")},pagesetupSubmitCallback:function(c,a,b){FR.closeDialog();var e=b.sessionID;var d=_g();if(d!=null){d.loadContentPane()
}},recalculateElementTitle:function(b,c,a){FR.ajax({url:FR.servletURL,type:"POST",data:{op:"fr_form",cmd:"recalculate_element_title",sessionID:_g().currentSessionID||_g().sessionID,widgetName:c,__parameters__:this.encodePara(b),noCache:a||"",_:new Date().getTime(),__boxModel__:$.support.boxModel},beforeSend:function(){},async:true,complete:function(e,d){if(d=="success"){var f=FR.jsonDecode(e.responseText);if(_g().name_widgets[c]){_g().name_widgets[c].setSource(f[c])}}}})},encodePara:function(a){if(!a){return""
}if(typeof a==="string"){a=FR.jsonDecode(a)}$.each(a,function(b,c){if(typeof c==="string"){a[b]=encodeURIComponent(FR.cjkDecode(c.replaceAll('"','\\"')))}});return a}});
(function(a){if(window.jLayout){a.extend(window.jLayout,{scale:function(c){var h={},b=c.items||[],e=this.layout(c,h),g=c.scrollable,d=c.scrollContainer;e.layout=function(k){var j=k.bounds(),o=k.insets(),q=j.width-(o.left+o.right),r=j.height-(o.top+o.bottom),n=0,m=0;for(var p=0;p<b.length;p++){var s=b[p];var l=(g||q===0)?s.width:q;s.el.bounds({x:0,y:0,width:l,height:21});s.el.doLayout()}};function f(i){return function(){return{width:0,height:0}}}e.preferred=f("preferred");e.minimum=f("minimum");e.maximum=f("maximum");
return e},title:function(c){var h={},b=c.items||[],e=this.layout(c,h),g=c.scrollable,d=c.scrollContainer;e.layout=function(l){var k=l.bounds(),p=l.insets(),r=k.width-(p.left+p.right),s=k.height-(p.top+p.bottom),o=0,m=0;var u=b.length>1?s-38:s;var n=b.length>1?38:0;for(var q=0;q<b.length;q++){var x=b[q];var t=x.type!="elementcase"&&x.type!="chartwidget";var w=t?38:u;var v=t?0:n;x.el.bounds({x:0,y:v,width:r,height:w});x.el.doLayout();var j=FR.Browser.isIE8Before()&&!a.support.boxModel;if(x.type=="elementcase"&&j){x.el.css("width","100%");
x.el.css("height",u)}}};function f(i){return function(){return{width:0,height:0}}}e.preferred=f("preferred");e.minimum=f("minimum");e.maximum=f("maximum");return e},adaptive:function(k){var i={},f=k.items||[],e=this.layout(k,i),g=k.scrollable,l=false,j=false,b=k.hasResized,c=k.compState,h=k.compInterval;e.layout=function(U){var T=U.bounds(),N=U.insets(),s=T.width-(N.left+N.right),M=T.height-(N.top+N.bottom),ap=0,ao=0;var E=K(),an=af(),n;var A=0,Q=0,S=0,J=0;if(s!==0){A=ah();Q=c===0?o():ae();J=A-an;
S=Q-E;if(Q>o()){a(U).css({"overflow-y":"scroll"});l=true}else{a(U).css({"overflow-y":"hidden"});l=false}}if(s===0&&M===0){for(var ai=0;ai<f.length;ai++){var L=f[ai];L.el.bounds({x:L.x,y:L.y,width:L.width,height:L.height});L.el.doLayout()}}var r=J!==0||S!==0;if(j&&r){V()}if(J!==0){if(!b){n=parseFloat(J/an);O(n)}ak(h)}if(S!==0){if(!b){n=parseFloat(S/E);p(n)}D(h)}var I=s!==0&&(J!==0||S!==0);if(I&&h>0){var q=C();var H=m();var ab=H.length*21+(H.length-1)*h;var al=q.length*21+(q.length-1)*h;if(ab>s||c===0&&al>M){return
}for(var ai=0;ai<f.length;ai++){var L=f[ai];var ac=B(H,L.x);var aa=B(q,L.y);var ad=b?0:B(H,L.x+L.width)-ac-1;var am=b?0:B(q,L.y+L.height)-aa-1;L.el.bounds({x:L.x+ac*h,y:L.y+aa*h,width:L.width+ad*h,height:L.height+am*h});L.el.doLayout()}j=true}if(I){for(var ai=0;ai<f.length;ai++){var L=f[ai];if(L.type!="elementcase"){continue}var z=L.el.bounds();var X=z.x,W=z.y,Y=z.width,aj=z.height;if(L.marginTop){W=z.y+parseInt(L.marginTop)}if(L.marginLeft){X=z.x+parseInt(L.marginLeft)}if(L.marginBottom){aj=z.height-parseInt(L.marginBottom)-parseInt(L.marginTop)
}if(L.marginRight){Y=z.width-parseInt(L.marginRight)-parseInt(L.marginLeft)}L.el.bounds({x:X,y:W,width:Y,height:aj});L.el.doLayout()}j=true}function B(aq,y){var w=aq.indexOf(y);if(w!=-1||!b){return w}for(var x=0;x<aq.length;x++){if(Math.abs(aq[x]-y)<=1){return x}}return w}function ah(){var w=m().length-2;var x=l?16:0;return s-x-w*h}function o(){var w=C().length-2;return M-w*h}function ae(){var w=C().length-2;return parseInt(A/an*E)-w*h}function ak(w){var y=f.length;for(var aq=0;aq<y;aq++){var at=f[aq];
var ar=at.el.bounds();if(!ar.x){ar.x=parseInt(at.el.css("left"))}var x=ar.x;at.x=at.el.isVisible()?x:parseInt(at.el.css("left"));at.width=ar.width}}function D(w){var y=f.length;for(var aq=0;aq<y;aq++){var at=f[aq];var ar=at.el.bounds();if(!ar.y){ar.y=parseInt(at.el.css("top"))}var x=ar.y;at.y=at.el.isVisible()?x:parseInt(at.el.css("top"));at.height=ar.height}}function V(){var w=f.length;for(var x=0;x<w;x++){var y=f[x];y.el.bounds({x:y.x,y:y.y,width:y.width,height:y.height});y.el.doLayout()}}function O(au){var ar=m();
var aq=ar?ar.length:0;var w,y,av;for(var at=0;at<aq-1;at++){w=ar[at];av=ar[at+1];y=parseInt((av-w)*au);if(av-w<21-y){u(w)}else{Z(w,y)}}}function u(at){var av=G(at);if(!av){return}var w=0;for(var aq=0,ax=av.length;aq<ax;aq++){var aw=av[aq];if(at===0){return}if(aw.x<at){continue}var au=R(aw.x-1,aw.y);if(au){var ar=au.el.bounds();var y=au.el.isVisible()?ar.x:parseInt(au.el.css("left"));y=y?y:parseInt(au.el.css("left"));w=ar.width+y;width=aw.x+aw.width==an?A-w:aw.width}aw.el.bounds({x:w,width:width});
aw.el.doLayout()}}function Z(w,aq){var y=G(w);if(!y){return}for(var at=0,ar=y.length;at<ar;at++){var au=y[at];if(au.x<w){if(au.x+au.width==an){continue}var av=au.el.bounds().width;au.el.bounds({width:aq+av});au.el.doLayout();continue}P({item:au,dw:aq,x:w});au.el.doLayout()}}function P(ar){var ax=ar.item,w=ar.dw,av=ar.x;var y=0;var aq=ax.el.bounds().width+w;var aw=R(ax.x-1,ax.y);if(aw){var au=aw.el.bounds();var at=aw.el.isVisible()?au.x:parseInt(aw.el.css("left"));at=at?at:parseInt(aw.el.css("left"));
y=au.width+at}aq=ax.x+ax.width==an?A-y:aq;aq=aq<21?21:aq;ax.el.bounds({x:y,width:aq})}function p(ar){var w=C();var x=w?w.length-1:0;var av,at,au;for(var aq=0;aq<x;aq++){av=w[aq];au=w[aq+1];at=parseInt((au-av)*ar);if(au-av<21-at){t(av)}else{ag(av,at)}}}function t(at){var au=F(at);if(!au){return}var w=0;for(var aq=0,ay=au.length;aq<ay;aq++){var ax=au[aq];if(at===0){return}if(ax.y<at){continue}var ar=R(ax.x,ax.y-1);if(ar){var av=ar.el.bounds();var x=ar.el.isVisible()?av.y:parseInt(ar.el.css("top"));
x=x?x:parseInt(ar.el.css("top"));w=av.height+x;var aw=ax.y+ax.height==E?Q-w:ax.height}ax.el.bounds({y:w,height:aw});ax.el.doLayout()}}function ag(av,at){var w=F(av);if(!w){return}for(var aq=0,x=w.length;aq<x;aq++){var ar=w[aq];if(ar.y<av){if(ar.y+ar.height==E){continue}var au=ar.el.bounds().height;ar.el.bounds({height:au+at});ar.el.doLayout();continue}v({item:ar,dh:at,y:av});ar.el.doLayout()}}function v(aq){var ay=aq.item,au=aq.dh,av=aq.y;var w=0;var ar=ay.el.bounds().height;var at=R(ay.x,ay.y-1);
if(at){var aw=at.el.bounds();var x=at.el.isVisible()?aw.y:parseInt(at.el.css("top"));x=x?x:parseInt(at.el.css("top"));w=aw.height+x}var ax=ay.y+ay.height==E?Q-w:ar+au;ax=ax<21?21:ax;ay.el.bounds({y:w,height:ax})}function R(aq,ax){for(var au=0,at=f.length;au<at;au++){var av=f[au];var w=av.x;var aw=av.y;var ar=w<=aq&&aq<w+av.width&&aw<=ax&&ax<aw+av.height;if(ar){return av}}return null}function G(w){var y=[];for(var ar=0,aq=f.length;ar<aq;ar++){var at=f[ar];var av=at.x;var au=av<w&&w<av+at.width;if(au||av==w){y.push(at)
}}return y}function F(av){var w=[];for(var aq=0,x=f.length;aq<x;aq++){var ar=f[aq];var au=ar.y;var at=au<av&&av<au+ar.height;if(at||au==av){w.push(ar)}}return w}function m(){var w,ar=[];ar.push(0);ar.push(af());for(var y=0;y<f.length;y++){var aq=f[y];w=aq.x;if(ar.indexOf(w)==-1){ar.push(w)}}return ar.sort(function(at,x){return at>x?1:-1})}function C(){var ar,aq=[];aq.push(0);aq.push(K());for(var w=0;w<f.length;w++){var x=f[w];ar=x.y;if(aq.indexOf(ar)==-1){aq.push(ar)}}return aq.sort(function(at,y){return at>y?1:-1
})}function af(){var au,x;var ar=0;for(var aq=0;aq<f.length;aq++){var at=f[aq];au=f[aq].el.isVisible()?at.y:parseInt(f[aq].el.css("top"));x=at.width;if(au===0){ar+=x}}return ar}function K(){var w,ar;var at=0;for(var y=0;y<f.length;y++){var aq=f[y];w=f[y].el.isVisible()?aq.x:parseInt(f[y].el.css("left"));ar=aq.height;if(w===0){at+=ar}}return at}return U};function d(m){return function(){return{width:0,height:0}}}e.preferred=d("preferred");e.minimum=d("minimum");e.maximum=d("maximum");return e}})}})(jQuery);
(function(a){FR.TitleLayout=FR.extend(FR.Layout,{_defaultConfig:function(){return a.extend(FR.TitleLayout.superclass._defaultConfig.apply(),{baseCls:"fr-titlelayout",scrollable:false})},_init:function(){FR.TitleLayout.superclass._init.apply(this,arguments);var f=this.options;this.element.addClass(f.baseCls);if(!a.isArray(f.items)){f.items=[];return}var c=f.items,d,b=c.length;f.widgets=[];var h=this.element;for(d=0;d<b;d++){var e=c[d];if(!e.style){e.style=f.style}if(e.type){e.el=e}if(e.el.type){var g=FR.createWidget(a.extend(e.el,{resultWidgets:f.resultWidgets}));
f.widgets.push(g);e.el=g.element;h.append(e.el)}}this.element.data("jlayout",jLayout.title(f))},doResize:function(c){FR.TitleLayout.superclass.doResize.call(this,c);var b=this.options;this.element.css({width:(c?(c.width||b.width):b.width),height:c?(c.height||b.height):b.height,left:c?(c.left||b.left):b.left,top:c?(c.top||b.top):b.top});this.doLayout()},doLayout:function(){FR.TitleLayout.superclass.doLayout.apply(this,arguments)}});a.shortcut("title",FR.TitleLayout);FR.HorizontalLayout=FR.extend(FR.Layout,{_defaultConfig:function(){return a.extend(FR.HorizontalLayout.superclass._defaultConfig.apply(),{alignment:"center",hgap:0,vgap:0,baseCls:"fr-horizontalboxlayout"})
},_init:function(){FR.HorizontalLayout.superclass._init.apply(this,arguments);var g=this.options;this.element.addClass(g.baseCls);this.element.css("min-width",g.minWidth);var d=g.items,f,b=d.length;g.widgets=[];for(f=0;f<b;f++){var c=d[f];if(!c.el.style){c.el.style=g.style}if(c.el&&c.el.type){var h=FR.createWidget(a.extend(c.el,{resultWidgets:g.resultWidgets}));g.widgets.push(h);var e=h.element;d[f].el=e;this.element.append(e)}else{if(c.el instanceof a){this.element.append(c.el)}}}this.element.data("jlayout",jLayout.horizontal(g))
},doResize:function(c){FR.HorizontalLayout.superclass.doResize.call(this,c);var b=this.options;this.element.css({width:(c?(c.width||b.width):b.width),height:(c?(c.height||b.height):b.height),left:c?(c.left||b.left):b.left,top:c?(c.top||b.top):b.top})},doLayout:function(){FR.HorizontalLayout.superclass.doLayout.apply(this,arguments)}});a.shortcut("horizontal",FR.HorizontalLayout);FR.VerticalBoxLayout=FR.extend(FR.Layout,{_defaultConfig:function(){return a.extend(FR.VerticalBoxLayout.superclass._defaultConfig.apply(),{hgap:5,vgap:5,baseCls:"fr-verticalboxlayout"})
},_init:function(){FR.VerticalBoxLayout.superclass._init.apply(this,arguments);var g=this.options;this.element.addClass(g.baseCls);var d=g.items,f,b=d.length;g.widgets=[];var j=this.element;if(g.scrollable){j=a('<div class="fr-core-layout-scrollable">').css({position:"absolute",top:0,left:0}).appendTo(this.element);g.scrollContainer=j}for(f=0;f<b;f++){var c=d[f];if(!c.el.style){c.el.style=g.style}if(c.el&&c.el.type){var h=FR.createWidget(a.extend(c.el,{resultWidgets:g.resultWidgets}));g.widgets.push(h);
var e=h.element;d[f].el=e;j.append(e)}else{if(c.el instanceof a){j.append(c.el)}}}this.element.data("jlayout",jLayout.vertical(g))},doResize:function(c){FR.VerticalBoxLayout.superclass.doResize.call(this,c);var b=this.options;this.element.css({width:b.width,height:b.height,left:b.left,top:b.top})},doLayout:function(){FR.VerticalBoxLayout.superclass.doLayout.apply(this,arguments)}});a.shortcut("vertical",FR.VerticalBoxLayout);FR.CardBorder=FR.extend(FR.BorderLayout,{_init:function(){FR.CardBorder.superclass._init.apply(this,arguments)
},_initBackGround:function(){if(!this.options.widgetBackground){return}FR.CardBorder.superclass._initFitBackground.apply(this,arguments)},doResize:function(b){if(!b||(this.options.width==b.width&&this.options.height==b.height)){return}if(this.element.height()>0){this._initBackGround()}FR.CardBorder.superclass.doResize.call(this,b)}});a.shortcut("cardborder",FR.CardBorder);FR.CardTagLayout=FR.extend(FR.HorizontalLayout,{_init:function(){FR.CardTagLayout.superclass._init.apply(this,arguments)},_initBackGround:function(){if(!this.options.widgetBackground){return
}FR.CardTagLayout.superclass._initFitBackground.apply(this,arguments)},doResize:function(b){if(!b||(this.options.width==b.width&&this.options.height==b.height)){return}if(this.element.height()>0){this._initBackGround()}FR.CardTagLayout.superclass.doResize.call(this,b)},showSelectTab:function(d){var g=this.options;var c=g.items,e,b=c.length;var h=this.getMoveDelta(b,c);if(h===0){return}for(e=0;e<b;e++){var f=parseInt(c[e].el.css("left"));c[e].el.css("left",f+h+"px")}},getMoveDelta:function(c,d){for(i=0;
i<c;i++){var b=d[i].el.width();if(b<=0){continue}if(d[i].el.css("opacity")==="1"){var e=parseInt(d[i].el.css("left"));if(b+e>this.element.width()){return -b}if(e<0){return b}return 0}}}});a.shortcut("cardtaglayout",FR.CardTagLayout);FR.FormCardLayout=FR.extend(FR.Layout,{_defaultConfig:function(){return a.extend(FR.FormCardLayout.superclass._defaultConfig.apply(),{baseCls:"fr-quick-form-card-layout",defaultShowIndex:0})},_init:function(){FR.FormCardLayout.superclass._init.apply(this,arguments);var c=this.options;
this.name2Index={};this.cardsHasCreated=[];this._initNameMap();if(c.showAllCardOnInit){for(var b=c.items.length-1;b>=0;b--){this.showCardByIndex(b)}}else{this.showCardByIndex(0)}},_initBackGround:function(){if(!this.options.widgetBackground){return}FR.FormCardLayout.superclass._initFitBackground.apply(this,arguments)},_initNameMap:function(){var b=this.options.items;for(var d=0;d<b.length;d++){var c;if(b[d].el){c=b[d].el.widgetName}else{c=b[d].widgetName}if(!FR.isEmpty(c)){this.name2Index[c]=d}}},showPaneByIndex:function(b){this.showCardByIndex(b)
},showPrevCard:function(){if(!FR.isEmpty(this.showIndex)){this.showCardByIndex(this.showIndex-1);this.showCardTab(this.showIndex-1)}},showNextCard:function(){if(!FR.isEmpty(this.showIndex)){this.showCardByIndex(this.showIndex+1);this.showCardTab(this.showIndex+1)}},showCardTab:function(c){var d=this.options;if(!d.tagLayoutName){return}var b=d.form.getWidgetByName(d.tagLayoutName);if(!b){return}b.showSelectTab(c)},hideTab:function(d){var f=this.options;var c=f.items;this.showIndex=d;for(var e=0;e<this.cardsHasCreated.length;
e++){var b=this.cardsHasCreated[e];c[b].el.hide()}},showUnCachedTab:function(c,b,e){var d=b[c];if(!d.el){d.el=d}if(d&&d.el&&d.el.type){var f=FR.createWidget(a.extend(d.el,{resultWidgets:e.resultWidgets}));d.el=f.element;if(e.form&&e.form.initLinkWidgetEvent){a.each(e.resultWidgets,function(g,h){if(h.options.widgetName!=null){e.form.initLinkWidgetEvent(h)}})}}this.element.append(d.el);this.cardsHasCreated.push(c);this.element.data("jlayout",jLayout.card(e))},showCardByIndex:function(c){if(this.showIndex===c){return
}if(!FR.isEmpty(this.showIndex)){this.fireEvent(FR.Events.CARDCHANGE)}var e=this.options;var b=e.items;if(c>-1&&c<b.length){this.changeAllBackground(e,c);this.hideTab(c);var d=this.cardsHasCreated.indexOf(c);if(d==-1){this.showUnCachedTab(c,b,e)}else{b[c].el.show()}}this.doLayout()},changeAllBackground:function(e,c){if(!e.allTagName){return}var f=e.allTagName;for(var d=0;d<f.length;d++){var b=e.form.getWidgetByName(f[d]);if(!b){continue}if(c===d){b.element.css("opacity","1");continue}b.element.css("opacity","0.6")
}},getShowIndex:function(){return this.showIndex?this.showIndex:this.options.defaultShowIndex},showPaneByName:function(b){return this.showCardByName(b)},showCardByName:function(b){if(FR.isEmpty(b)){return}this.showCardByIndex(this.name2Index[b.toUpperCase()])},adjustWidth:function(d,g){if(g.width==d.width){return}d.width=g.width;var c=d.form;if(!c){return}var f=d.titleWidth;var e=c.getWidgetByName(d.preBtnName);var b=c.getWidgetByName(d.nextBtnName);if(e&&b){e.setVisible(d.width<d.titleWidth);b.setVisible(d.width<d.titleWidth)
}},doResize:function(c){if(!c||(this.options.width==c.width&&this.options.height==c.height)){return}if(this.element.height()>0){this._initBackGround()}var b=this.options;this.adjustWidth(b,c);FR.FormCardLayout.superclass.doResize.call(this,c);this.element.css({width:b.width,height:b.height,left:b.left,top:b.top});this.doLayout()},doLayout:function(){FR.FormCardLayout.superclass.doLayout.apply(this,arguments)}});a.shortcut("cardlayout",FR.FormCardLayout);FR.AdaptiveLayout=FR.extend(FR.Layout,{_defaultConfig:function(){return a.extend(FR.AdaptiveLayout.superclass._defaultConfig.apply(),{baseCls:"fr-quick-adaptive-layout"})
},_init:function(){FR.AdaptiveLayout.superclass._init.apply(this,arguments);var f=this.options;if(!a.isArray(f.items)){f.items=[];return}var c=f.items;f.widgets=[];for(var e=0;e<c.length;e++){var b=c[e];if(!b.style){b.style=f.style}if(b&&b.type){var g=FR.createWidget(a.extend(b,{width:b.width,height:b.height,resultWidgets:f.resultWidgets}));f.widgets.push(g);var d=g.element;b.el=d;this.element.append(d)}}this.element.data("jlayout",jLayout.adaptive(f))},doResize:function(d){if(this.element.height()>0){FR.AdaptiveLayout.superclass._initBackGround.apply(this,arguments)
}var c=this.options;if(c.width==d.width&&c.height==d.height){return}var b=this;FR.AdaptiveLayout.superclass.doResize.call(b,d);b.element.css({width:d?(d.width||c.width):c.width,height:d?(d.height||c.height):c.height,left:d?(d.left||c.left):c.left,top:d?(d.top||c.top):c.top});b.doLayout()},doLayout:function(){FR.AdaptiveLayout.superclass.doLayout.apply(this,arguments)}});a.shortcut("fit",FR.AdaptiveLayout);FR.ScaleLayout=FR.extend(FR.Layout,{_defaultConfig:function(){return a.extend(FR.ScaleLayout.superclass._defaultConfig.apply(),{baseCls:"fr-scalelayout",scrollable:false})
},_init:function(){FR.ScaleLayout.superclass._init.apply(this,arguments);var f=this.options;this.element.addClass(f.baseCls);if(!a.isArray(f.items)){f.items=[];return}var c=f.items,d,b=c.length;f.widgets=[];var h=this.element;for(d=0;d<b;d++){var e=c[d];if(!e.style){e.style=f.style}if(e.type){e.el=e}if(e.el.type){var g=FR.createWidget(a.extend(e.el,{resultWidgets:f.resultWidgets}));f.widgets.push(g);e.el=g.element;h.append(e.el)}}this.element.data("jlayout",jLayout.scale(f))},doResize:function(c){FR.ScaleLayout.superclass.doResize.call(this,c);
var b=this.options;this.element.css({width:(c?(c.width||b.width):b.width),height:c?(c.height||b.height):b.height,left:c?(c.left||b.left):b.left,top:c?(c.top||b.top):b.top});this.doLayout()},doLayout:function(){FR.ScaleLayout.superclass.doLayout.apply(this,arguments)}});a.shortcut("scale",FR.ScaleLayout)})(jQuery);
(function(a){FR.frMenu=function(b){this.$menuRoot=a("<div class='fr-ui-core-menu menu'>");this.closeNow=true;this.init();this.applyOptions(b);return this};FR.frMenu.prototype={init:function(){var b=this;this.$menuRoot.hover(function(){b.closeNow=false},function(c){if(c&&b.submenu&&b.submenu.$menuRoot&&(c.clientX<b.submenu.$menuRoot.offset().left)){b.close(true)}else{b.close()}});this.$menuRoot.appendTo("body")},hasSubmenu:function(){var b=false;if(this.items){a.each(this.items,function(c,d){if(d.submenu){b=true;
return false}})}return b},applyOptions:function(c){var b=this;this.removechildren();this.$menuRoot.css("z-index",3333);this.items=c.items;this.$el=c.$el;this.options=c;this.destroyOnClose=c.destroyOnClose!=null?c.destroyOnClose:true;this.closeOnHover=true;if(this.hasSubmenu()){this.submenu=new FR.frMenu({destroyOnClose:false,item:[]})}if(this.$el){this.$el.mouseout(function(){if(b.resizeid!=null){clearTimeout(b.resizeid);b.resizeid=null}b.resizeid=setTimeout(function(){if(b.closeNow){b.close()}},200)
})}this.cItems=[];this.minWidth=c.minWidth||80;this.xxxfixclientH=c.xxxfixclientH;this.xxxMMenu=c.xxxMMenu;if(a.isArray(this.items)){this.addItems(this.items)}if(this.xxxMMenu){if(contentPane&&contentPane.$contentPane&&!FR.xxxmenu_array){FR.xxxmenu_array=[];contentPane.$contentPane.click(function(){var e=[];for(var d=0;d<FR.xxxmenu_array.length;d++){e.unshift(FR.xxxmenu_array[d])}for(var d=0;d<e.length;d++){e[d].close(true)}})}}},addItems:function(c){for(var d=0,b=c.length;d<b;d++){this.addItem(c[d])
}if(this.minWidth&&this.minWidth>=this.$menuRoot.width()){this.$menuRoot.width(this.minWidth);this.$menuRoot.children("div").width(this.minWidth-8)}},addItem:function(c){var j=this;var g=a("<div style='width:80px'>").appendTo(this.$menuRoot);if(c.type==="sep"){g.addClass("menu-sep").html("'&nbsp;'")}else{j.bindMenuItemEvent(g,c);if(c.color){var d=a("<div id=mc style='background-color:"+c.color+";height:12px; width:12px; position:absolute; left:8px; top:4px'></div>").appendTo(g)}var i=a('<div class="menu-text"></div>').html(c.src).appendTo(g);
var b=i.position().left*2+i.width();if(this.minWidth<b){this.minWidth=b}var e=c.iconSrc?c.iconSrc.replace("css:",""):"";if(e){a('<div class="menu-icon"></div>').addClass(e).appendTo(g)}if(c.submenu){var f=c.arrowSrc?c.arrowSrc.replace("css:",""):"";if(f){a('<div class="menu-customarrow"></div>').addClass(f).appendTo(g)}else{a('<div class="menu-rightarrow"></div>').appendTo(g)}}if(a.support.boxModel===true){var h=g.height()||22;g.height(h-(g.outerHeight()-g.height()))}this.cItems[this.cItems.length]=g
}},children:function(){return this.cItems},bindMenuItemEvent:function(c,d){c.addClass("menu-item");var b=this;if(d.submenu){c.hover(function(){b.closeSub();c.siblings().each(function(){a(this).removeClass("menu-active")});if(c.attr("disabled")){return}c.addClass("menu-active");if(a.isArray(d.submenu)){var e={destroyOnClose:false,minWidth:b.minWidth,items:d.submenu,parMenu:b};b.submenu.applyOptions(e);var f=c.offset().left+c.outerWidth()+2;if(f+b.submenu.$menuRoot.outerWidth()>a(window.document).width()){f=c.offset().left-b.submenu.$menuRoot.outerWidth()
}b.submenu.position(f,c.offset().top);b.submenu.show()}},function(f){})}else{c.click(function(f){if(c.attr("disabled")){return}if(d.chartEvent){d.chartEvent.chartGlyph.layerToDataPointNext(d.dataPoint);d.chartEvent.refreshing()}else{d.handler.call(b,f,this)}b.close(true)});c.hover(function(){b.closeSub();if(c.attr("disabled")){return}c.siblings().each(function(){a(this).removeClass("menu-active")});c.addClass("menu-active")},function(f){c.removeClass("menu-active")})}},position:function(b,c){this.$menuRoot.css({left:b,top:c})
},show:function(){this.$menuRoot.show();if(parentMenu=this.options.parMenu){parentMenu.closeOnHover=false}},close:function(b){if(b){if(this.destroyOnClose){this.remove()}else{this.closeSub()}if(parentMenu=this.options.parMenu){parentMenu.close(true)}else{this.$menuRoot.hide()}}else{if(this.closeOnHover){if(this.destroyOnClose){this.remove()}else{this.closeSub();this.$menuRoot.hide()}if(parentMenu=this.options.parMenu){parentMenu.closeOnHover=true}}}},remove:function(){this.$menuRoot.remove();if(this.$el){delete this.$el.fr_menu
}if(this.submenu){this.submenu.remove()}},removechildren:function(){if(this.cItems){for(var c=0,b=this.cItems.length;c<b;c++){this.cItems[c].remove()}}if(this.submenu){this.submenu.remove()}},closeSub:function(){if(this.submenu&&!this.submenu.$menuRoot.is(":hidden")){this.submenu.close()}}}})(jQuery);
FR.Object=function(a){this.options=$.extend(this._defaultConfig(),a);this._init()};$.extend(FR.Object.prototype,{_defaultConfig:function(){return{}},_init:function(){}});FR.Record=FR.extend(FR.Object,{_defaultConfig:function(){return $.extend(FR.ObjectSource.superclass._defaultConfig.apply(this,arguments),{data:[],createFields:[],choosedFields:[],showField:"",titleField:"",showEmptyValue:"",valueField:"",showTemplate:"",valueTemplate:""})},_init:function(){FR.Record.superclass._init.apply(this,arguments);
$.extend(this,this.options);this.nameProperty();this.initMethods()},nameProperty:function(){if(this.createFields){for(var b=0,a=this.createFields.length;b<a;b++){if(this.createFields[b]!=b){this.data[this.createFields[b]]=this.data[b];delete this.data[b]}}}},initMethods:function(){if(this.choosedFields){var d=this;var c=function(i){return function(){return d.data[i]}};var g=function(i){return function(j){d.data[i]=j}};for(var f=0,a=this.choosedFields.length;f<a;f++){var e=this.choosedFields[f];var h=e.startWith("is")||e.startWith("get")?e:"get"+e;
var b;if(e.startWith("is")){b="set"+e.substr(2)}else{if(e.startWith("get")){b="set"+e.substr(3)}else{if(e.startWith("set")){b=e}else{b="set"+e}}}this[h]=c(e);this[b]=g(e)}}},getShowValue:function(){var a=this.getShowTemplate()||this.getShowField();if(a==null){a=this.getNoAppointShowValue()}a=this.formatShowValue(a);return(this.showEmptyValue&&a==null)?this.showEmptyValue:a},getTitleValue:function(){if(this.titleField){return this.data[this.titleField]}},setTitleValue:function(a){if(this.titleField){this.data[this.titleField]=a;
return true}},setShowValue:function(a){this.setShowTemplate(a)||this.setShowField(a)},setShowTemplate:function(a){if(this.showTemplate){this.data[this.showTemplate]=a;return true}},setShowField:function(a){if(this.showField){this.data[this.showField]=a;return true}},getValue:function(){var a=this.getValueTemplate()||this.getValueField();if(a!=null){return a}return this.getNoAppointValue()},setValue:function(a){this.setValueTemplate(a)||this.setValueField(a)},setValueTemplate:function(a){if(this.valueTemplate){this.data[this.valueTemplate]=a;
return true}},setValueField:function(a){if(this.valueField){this.data[this.valueField]=a;return true}},getNoAppointShowValue:function(){if(this.showField!=null||this.showTemplate!=null){return}return this.getFirstProperty()},getNoAppointValue:function(){if(this.valueField!=null||this.valueTemplate!=null){return}return this.getFirstProperty()},getFirstProperty:function(){for(var a in this.data){if(!$.isFunction(this.data[a])){return this.data[a]}}},getShowField:function(){if(this.showField){return this.data[this.showField]
}},getValueField:function(){if(this.valueField){return this.data[this.valueField]}},getShowTemplate:function(){if(this.showTemplate){return this.dealTemplate(this.showTemplate)}},getValueTemplate:function(){if(this.valueTemplate){return this.dealTemplate(this.valueTemplate)}},dealTemplate:function(b){var a;while((a=/{[^{}]+}/g.exec(b))!=null){b=b.substr(0,a.index)+a[0].substr(1,a[0].length-1)+b.substr(a.index+a[0].index)}return b},formatShowValue:function(a){if(typeof a=="string"&&a.indexOf("__time__")>-1){return FR.date2Str(FR.jsonDecode(a),"yyyy-MM-dd HH:mm:ss")
}return a},getContent:function(){return this.data},setContent:function(a){this.data=a},getProperty:function(a){return this.data[a]},setProperty:function(a,b){this.data[a]=b}});FR.Node=FR.extend(FR.Record,{_init:function(){FR.Node.superclass._init.apply(this,arguments);if(!this.nodeSource){if(this.children&&this.data[this.children]){this.nodeSource=new FR.ObjectSource({data:this.data[this.children]})}else{if(this.options.url){this.nodeSource=new FR.URLSource({url:this.options.url})}}}if(!this.nodeReader){this.nodeReader=new FR.NodeReader(this.copyProperties())
}this.childrenNodes=[]},getParent:function(){return this.parent},setParent:function(a){this.parent=a},getPathAsValueString:function(){return this.getValuePath(true)},getPathAsTextString:function(){return this.getTextPath(true)},getValuePath:function(b){var a=[this.data.value];var c=this.getParent();while(c){a.unshift(c.data.value);c=c.getParent()}return b?a.join(","):a},getTextPath:function(b){var a=[this.data.text];var c=this.getParent();while(c){a.unshift(c.data.text);c=c.getParent()}return b?a.join(","):a
},getLeafNode:function(d){var c=d||[];if(!this.hasChild()){c.push(this);return c}else{var b=this.getChildren();for(var a=0;a<b.length;a++){b[a].getLeafNode(c)}}return c},getAncestorsLength:function(){var a=0;var b=this.getParent();while(b){a++;b=b.getParent()}return a},hasChild:function(){return this.hasChildren!=null?this.data[this.hasChildren]||(this.data.ChildNodes&&(this.data.ChildNodes).length!==0):((this.children!=null&&this.data[this.children])||this.getChildrenLength()>0)},getChildren:function(){return this.loadChildren()
},getChildrenLength:function(){return this.loadChildren().length},getChild:function(a){return this.loadChildren()[a]},getID:function(){return this.data[this.id]},setID:function(a){this.data[this.id]=a},getParentID:function(){var a=this.data[this.parentID];return a!=null?a:(this.getParent()?this.getParent().getID():null)},getValue:function(){return this.data.value},getText:function(){return this.data.text},setParentID:function(){},setUnselectable:function(a){this.data[this.unselectable]=a},isUnselectable:function(){return this.data[this.unselectable]
},isSelected:function(){return this.selectedField!=null?this.data[this.selectedField]:this.selected},setSelected:function(a){this.selectedField!=null?this.data[this.selectedField]=a:this.selected=a},loadChildren:function(){if(!this.hasChild()){return[]}if(this.isLoaded){return this.childrenNodes}if(!this.nodeSource){return[]}this.resetStatus();this.childrenNodes=this.nodeReader.readObject(this.nodeSource.loadObject());this.isLoaded=true;return this.childrenNodes},isLoadComplete:function(){return this.nodeSource?this.nodeSource.isLoaded():true
},copyProperties:function(){var a={};this.createFields&&(a.createFields=this.createFields);this.choosedFields&&(a.choosedFields=this.choosedFields);this.showField&&(a.showField=this.showField);this.titleField&&(a.titleField=this.titleField);this.showEmptyValue&&(a.showEmptyValue=this.showEmptyValue);this.valueField&&(a.valueField=this.valueField);this.showTemplate&&(a.showTemplate=this.showTemplate);this.valueTemplate&&(a.valueTemplkate=this.valueTemplate);this.parameterFields&&(a.parameterFields=this.parameterFields);
this.hasChildren&&(a.hasChildren=this.hasChildren);this.type&&(a.type=this.type);this.id!=null&&(a.id=this.id);this.parentID!=null&&(a.parentID=this.parentID);this.options.url&&(a.url=this.getChildURL()||this.options.url);this.childurlField&&(a.childurlField=this.childurlField);this.children&&(a.children=this.children);this.selectedField&&(a.selectedField=this.selectedField);a.parent=this;return a},getChildURL:function(){return this.childurl?this.childurl:this.data[this.childurlField]},setChildURL:function(a){this.childurlField!=null?this.data[this.childurlField]=a:this.childurl=a
},addNode:function(a){this.isLoaded=true;this.childrenNodes.push(a);a.setParent(this)},removeNode:function(a){this.childrenNodes.remove(a)},sortChildren:function(){},clearData:function(){this.isLoaded=false;delete this.childrenNodes;this.childrenNodes=[]},createParaObj:function(){var b={};if(this.parameterFields){for(var c=0,a=this.parameterFields.length;c<a;c++){b[this.parameterFields[c]]=this.data[this.parameterFields[c]]}}if(this.additionalParameters){for(var c in this.additionalParameters){b[c]=this.additionalParameters[c]
}b.parent_values=this.getValuePath(true);b.parentID=this.getParentID()}return{parameter:b}},additionalParameter:function(a){this.additionalParameters=a.parameter},getAdditionalNodes:function(){var a=this.nodeReader.readObject(this.nodeSource.loadObject());this.childrenNodes=this.childrenNodes.concat(a);return a},resetStatus4AddNodes:function(b){var a=this.createParaObj();$.extend(a.parameter,b.parameter);this.nodeSource.resetStatus(a)},resetStatus:function(){if(!this.nodeSource){return}if(this.nodeSource.resetStatus(this.createParaObj())){this.clearData()
}},isAllChildrenChosen:function(){if(!this.hasChild()||!this.isLoadComplete()){return false}for(var a=0;a<this.childrenNodes.length;a++){if(this.childrenNodes[a].getcheckstate()!==1){return false}}return true}});FR.RootNodeLoader=FR.extend(FR.OB,{_init:function(){FR.RootNodeLoader.superclass._init.apply(this,arguments);this.options.rootSource=new FR.URLSource({url:this.options.url,data:this});if(!this.options.rootReader){this.options.rootReader=new FR.DefaultNodeReader({url:this.options.url})}this.rootNodes=[]
},updateData:function(b){var a=this.options.rootReader.readObject(b);if(this.rootNodes.length<1){this.rootNodes=a;this.fireEvent(FR.Events.AFTERREAD,a)}else{Array.prototype.push.apply(this.rootNodes,a);this.fireEvent(FR.Events.APPENDDATA,a)}},getRootNodes:function(){if(this.isLoaded){return this.rootNodes}this.rootNodes=this.loadNodes();this.isLoaded=true;return this.rootNodes},getRootNodesAsync:function(c){var a=this;if(this.isLoaded){c.call(this,this.rootNodes)}if(a.options.rootSource&&this.options.rootReader){var b=function(d){a.isLoaded=true;
if(c&&$.isFunction(c)){a.rootNodes=a.options.rootReader.readObject(d);c.call(this,a.rootNodes)}};a.options.rootSource.loadObject(b)}},loadNodes:function(){return this.options.rootReader.readObject(this.options.rootSource.loadObject())},appendRoot:function(a){this.rootNodes.push(a)},resetStatus4AddRootNodes:function(a){this.options.rootSource.resetStatus(a)},resetStatus:function(a){if(this.options.rootSource.resetStatus(a)){this.clearRoots()}},clearRoots:function(){this.isLoaded=false;this.rootNodes=[]
}});FR.DataSource=FR.extend(FR.OB,{_init:function(){FR.DataSource.superclass._init.apply(this,arguments)},loadObject:function(){return{}},resetStatus:function(){return false},isLocalSource:function(){return true},isLoaded:function(){return true}});FR.ObjectSource=FR.extend(FR.DataSource,{_defaultConfig:function(){return $.extend(FR.ObjectSource.superclass._defaultConfig.apply(),{data:[]})},_init:function(){FR.ObjectSource.superclass._init.apply(this,arguments)},loadObject:function(){return this.options.data
},isLocalSource:function(){return true}});FR.URLSource=FR.extend(FR.DataSource,{_defaultConfig:function(){return $.extend(FR.URLSource.superclass._defaultConfig.apply(this,arguments),{parameter:{},isLoaded:false})},_init:function(){FR.URLSource.superclass._init.apply(this,arguments);this.checkUrl()},checkUrl:function(){if(!this.options.url){FR.Msg.toast("URL is needed to create URLSource!");return}return true},setData:function(a,b){this.options.parameter=a.parameter;this.data=b;this.options.isLoaded=true
},loadObject:function(c){if(!this.checkUrl()){return}var b=this._getEncodeURL();if(this.need2load()){var a=this;FR.ajax({type:"POST",url:(b.length===0?a.options.url:b),data:this.generateParaData(true),async:c!==undefined,complete:function(d){if(!FR.versionRemind(d.responseText)){return}a.fireEvent(FR.Events.AFTERLOAD);a.options.isLoaded=true;a.data=FR.jsonDecode(d.responseText);if(c&&$.isFunction(c)){c.call(a,a.data);return}},error:function(){FR.Msg.toast(FR.i18nText("Data-Get_Data_Error"))}})}if(this.data&&c&&$.isFunction(c)){c.call(this,this.data)
}return this.data},_findShowValue:function(d,e){var b=this._getEncodeURL();var c=this.generateParaData(false);c.cmd="viewvalue";if(e!==false){c.__value__=d}else{c.__text__=d}var f;var a=this;FR.ajax({type:"POST",url:(b.length===0?a.options.url:b),data:c,async:false,complete:function(h){if(!FR.versionRemind(h.responseText)){return}var g=FR.jsonDecode(h.responseText);if(g.value!=undefined){f=g.value}},error:function(){FR.Msg.toast(FR.i18nText("Data-Get_Data_Error"))}});return f},_findAllValue:function(){if(!this.checkUrl()){return
}var b=this._getEncodeURL();var a=this;FR.ajax({type:"POST",url:(b.length===0?a.options.url:b),data:this.generateParaDataWithNoLimit(true),async:false,complete:function(c){if(!FR.versionRemind(c.responseText)){return}},error:function(){FR.Msg.toast(FR.i18nText("Data-Get_Data_Error"))}});return this.data},generateParaDataWithNoLimit:function(b){if(this.options.parameter){var c={};for(var a in this.options.parameter){if(!$.isFunction(this.options.parameter[a])){if(a=="startIndex"||a=="limitIndex"){continue
}else{c[a]=(typeof this.options.parameter[a]=="string")?this.options.parameter[a]:FR.jsonEncode(this.options.parameter[a])}}}if(this.reload){c.reload=true}if(b===true){c.reload=true}return c}},_getEncodeURL:function(){var b="";if(this.options.url.indexOf("widgetname")>=0){var a=this.options.url.split("&");$.each(a,function(c,d){if(d.indexOf("widgetname")>=0){a[c]="widgetname="+encodeURIComponent(encodeURIComponent(d.substring(11,d.length)))}});$.each(a,function(c,d){if(c!=a.length-1){b+=d+"&"}else{b+=d
}})}return b},resetStatus:function(a){return this.resetUrl(arguments.length===1?a.url:arguments[0])||this.resetParameter(arguments.length===1?a.parameter:arguments[1])},resetUrl:function(a){if(a!=null&&a!=this.options.url){this.options.url=a;this.clearData();return true}},resetParameter:function(a){if(a!=null&&!FR.equals(this.options.parameter,a)){if(!FR.equals(this.options.parameter.dependence,a.dependence)){this.reload=true}else{this.reload=false}this.options.parameter=a;this.clearData();return true
}},need2load:function(){return this.data==null},clearData:function(){if(this.data!=null){this.options.isLoaded=false;delete this.data;this.data=null}},destroy:function(){this.options.url=null;this.options.parameter=null;this.clearData()},generateParaData:function(b){if(this.options.parameter){b=!FR.isEmptyObj(this.options.parameter.dependence)||b;var c={};for(var a in this.options.parameter){if(!$.isFunction(this.options.parameter[a])){c[a]=(typeof this.options.parameter[a]=="string")?this.options.parameter[a]:FR.jsonEncode(this.options.parameter[a])
}}return this.setReloadPara(c,b)}},setReloadPara:function(b,a){if(this.reload){b.reload=true}if(a===true){b.reload=true}return b},isLocalSource:function(){return this.isLoaded()},isLoaded:function(){return this.options.isLoaded}});FR.SynchronObjectSource=FR.extend(FR.DataSource,{_defaultConfig:function(){return $.extend(FR.ObjectSource.superclass._defaultConfig.apply(),{object:[]})},_init:function(){FR.ObjectSource.superclass._init.apply(this,arguments)},loadObject:function(){this.options.data.updateData(this.options.object)
},isLocalSource:function(){return true},resetStatus:function(){return false}});FR.SynchronTreeSource=FR.extend(FR.OB,{_init:function(){FR.SynchronTreeSource.superclass._init.apply(this,arguments)},loadObject:function(){this.options.data.updateData(this.options.treedata)},resetStatus:function(){return false}});FR.SynchronURLSource=FR.extend(FR.URLSource,{_init:function(){FR.SynchronURLSource.superclass._init.apply(this,arguments)},loadObject:function(){if(!this.checkUrl()){return}var a=this;FR.ajax({type:"POST",url:this.options.url,data:this.generateParaData(),complete:function(b){if(!FR.versionRemind(b.responseText)){return
}a.fireEvent(FR.Events.AFTERLOAD);a.options.isLoaded=true;if(a.options.data){a.options.data.updateData(FR.jsonDecode(b.responseText))}},error:function(){FR.Msg.toast(FR.i18nText("Data-Get_Data_Error"))}})},resetParameter:function(b){if(b!=null&&!FR.equals(this.options.parameter,b)){var a=false;if(!FR.equals(this.options.parameter.dependence,b.dependence)){a=true;this.reload=true}else{this.reload=false}if(!FR.equals(this.options.parameter.filter,b.filter)){a=true}this.options.parameter=b;return a}}});
FR.DataReader=FR.extend(FR.Object,{readObject:function(e){if($.isArray(e)){var b=[];var c={};if(this.options){c.createFields=this.options.createFields;c.choosedFields=this.options.choosedFields;c.showField=this.options.showField;c.titleField=this.options.titleField;c.showEmptyValue=this.options.showEmptyValue;c.valueField=this.options.valueField;c.showTemplate=this.options.showTemplate;c.valueTemplate=this.options.valueTemplate}for(var d=0,a=e.length;d<a;d++){c.data=e[d];b.push(new FR.Record(c))}return b
}}});FR.ArrayReader=FR.extend(FR.DataReader,{_init:function(){FR.ArrayReader.superclass._init.apply(this,arguments)}});FR.JSONReader=FR.extend(FR.DataReader,{_init:function(){FR.JSONReader.superclass._init.apply(this,arguments)}});FR.DefaultReader=FR.extend(FR.ArrayReader,{_defaultConfig:function(){return $.extend(FR.DefaultReader.superclass._defaultConfig.apply(this,arguments),{showField:"text",titleField:"titleText",valueField:"value"})},_init:function(){FR.DefaultReader.superclass._init.apply(this,arguments)
}});FR.NodeReader=FR.extend(FR.DataReader,{_init:function(){FR.NodeReader.superclass._init.apply(this,arguments)},readObject:function(e){if(!$.isArray(e)){e=[e]}var b=[];var c=this.nodeProperties();for(var d=0,a=e.length;d<a;d++){c.data=e[d];b.push(new FR.Node(c))}return b},nodeProperties:function(){var a={};if(!this.options){return}a.createFields=this.options.createFields;a.choosedFields=this.options.choosedFields;a.showField=this.options.showField;a.titleField=this.options.titleField;a.showEmptyValue=this.options.showEmptyValue;
a.valueField=this.options.valueField;a.showTemplate=this.options.showTemplate;a.valueTemplate=this.options.valueTemplate;a.parameterFields=this.options.parameterFields;a.hasChildren=this.options.hasChildren;a.type=this.options.type;a.id=this.options.id;a.parentID=this.options.parentID;a.url=this.options.url;a.parent=this.options.parent;a.selectedField=this.options.selectedField;a.children=this.options.children;return a}});FR.DefaultNodeReader=FR.extend(FR.NodeReader,{_init:function(){FR.DefaultNodeReader.superclass._init.apply(this,arguments)
},nodeProperties:function(){return{url:this.options.url,id:"id",parentID:"parentID",showField:"text",titleField:"titleText",valueField:"value",hasChildren:"hasChildren",children:"ChildNodes",parameterFields:["id","value"],choosedFields:["isexpand","nodeicon","classes","showcheck","checkstate"],parent:this.options.parent}}});FR.DefaultSynchronNodeReader=FR.extend(FR.NodeReader,{_init:function(){FR.DefaultSynchronNodeReader.superclass._init.apply(this,arguments)},nodeProperties:function(){return{id:"id",parentID:"parentID",showField:"text",titleField:"titleText",valueField:"value",hasChildren:"hasChildren",children:"ChildNodes",parameterFields:["id","value"],choosedFields:["isexpand","nodeicon","classes","showcheck","checkstate"],parent:this.options.parent}
}});FR.Data=FR.extend(FR.Object,{_defaultConfig:function(){return $.extend(FR.DataReader.superclass._defaultConfig.apply(this,arguments),{records:[]})},_init:function(){FR.Data.superclass._init.apply(this,arguments);if(!this.options.dataSource){this.options.dataSource=new FR.ObjectSource()}if(!this.options.dataReader){this.options.dataReader=new FR.DataReader()}this.records=this.options.records},executeData:function(){if(this.options.dataSource&&this.options.dataReader){return this.options.dataReader.readObject(this.options.dataSource.loadObject())
}},getData:function(){return this.getRecords()},setData:function(a,b){if(this.options.dataSource){this.options.dataSource.setData(a,b)}this.records=this.executeData()},appendData:function(){var a=this.executeData();Array.prototype.push.apply(this.records,a);return a},getRecords:function(){if(this.records&&this.records.length>0){return this.records}this.records=this.executeData();return this.records},loadRecordsAsync:function(c){var a=this;if(this.records&&this.records.length>0){if($.isFunction(c)){c.call(this,this.records);
return}}if(this.options.dataSource&&this.options.dataReader){var b=function(d){if(c&&$.isFunction(c)){c.call(a,a.options.dataReader.readObject(d))}};a.options.dataSource.loadObject(b)}},getLoadedRecords:function(){return this.records},getLength:function(){var a=this.getRecords();if(!a){return 0}return a.length},getRecord:function(a){return this.getRecords()[a]},addRecord:function(a){this.getRecords().push(a)},removeRecord:function(a){if(typeof a=="number"){this.getRecords().splice(a,1)}else{if(typeof a=="object"){this.getRecords().remove(a)
}}},clearData:function(){if(this.records&&this.records.length>0){delete this.records;this.records=[]}},resetStatus:function(a){if(this.options.dataSource.resetStatus(a)){this.clearData()}},resetStatusKeepData:function(a){this.options.dataSource.resetStatus(a)},isLocalSource:function(){return this.options.dataSource.isLocalSource()},isLoaded:function(){return this.options.dataSource.isLoaded()}});FR.LocalTreeData=FR.extend(FR.OB,{_init:function(){},updateData:function(){},getData:function(){}});FR.TreeData=FR.extend(FR.OB,{_init:function(){FR.TreeData.superclass._init.apply(this,arguments);
if(!this.options.treeLoader&&!this.options.url){FR.Msg.toast("DataUrl or TreeLoader is needed to create TreeData.");return}if(!this.options.treeLoader&&this.options.url){this.options.treeLoader=FR.DataFactory.createDefaultRootNodes(this.options.url)}},getData:function(){return this.options.treeLoader.getRootNodes()},loadRecordsAsync:function(a){return this.options.treeLoader.getRootNodesAsync(a)},loadNodes:function(){this.options.treeLoader.loadNodes()},getChildrenLength:function(){return this.options.treeLoader.getRootNodes().length
},appendRoot:function(a){this.options.treeLoader.add(a)},resetStatus4AddRootNodes:function(a){this.options.treeLoader.resetStatus4AddRootNodes(a)},resetStatus:function(a){this.options.treeLoader.resetStatus(a)},setData:function(a,b){this.options.treeLoader.clearRoots();this.options.treeLoader.options.rootSource.setData(a,b)},afterRead:function(a){if(!a){return false}return this.options.treeLoader.on(FR.Events.AFTERREAD,a)},appendDataEvent:function(a){if(!a){return false}return this.options.treeLoader.on(FR.Events.APPENDDATA,a)
},isLocalSource:function(){return false}});FR.SynchronData=FR.extend(FR.OB,{_init:function(){FR.SynchronData.superclass._init.apply(this,arguments);if(!this.options.url&&!this.options.dataSource){FR.Msg.toast("SourceURL is needed to create SynchronData");return}if(!this.options.dataSource){this.options.dataSource=new FR.SynchronURLSource({url:this.options.url})}if(!this.options.dataReader){this.options.dataReader=new FR.DefaultReader()}this.options.dataSource.options.data=this;this.records=[]},updateData:function(b){var a=this.options.dataReader.readObject(b);
var c=this.records.length;this.appendData(a);return c?this.fireEvent(FR.Events.APPENDDATA,a):this.fireEvent(FR.Events.AFTERREAD,a)},addRecord:function(a){this.records.push(a)},removeRecord:function(a){this.records.remove(a)},getData:function(){return this},loadData:function(){this.options.dataSource.loadObject()},appendData:function(a){if(a!=null){Array.prototype.push.apply(this.records,a)}},getRecords:function(){return this.records},getLoadedRecords:function(){return this.records},getLength:function(){return this.getRecords().length
},getRecord:function(a){return this.records[a]},afterRead:function(a){if(!a){return false}return this.on(FR.Events.AFTERREAD,a)},clearData:function(){if(this.records&&this.records.length>0){delete this.records;this.records=[]}},appendDataEvent:function(a){if(!a){return false}return this.on(FR.Events.APPENDDATA,a)},resetStatus:function(a){this.options.dataSource.resetStatus(a);delete this.records;this.records=[];return true}});FR.SynchronTreeData=FR.extend(FR.OB,{_init:function(){FR.SynchronTreeData.superclass._init.apply(this,arguments);
if(!this.options.url&&!this.options.dataSource){FR.Msg.toast("SourceURL is needed to create SynchronTreeData");return}if(!this.options.dataSource){this.options.dataSource=new FR.SynchronURLSource({url:this.options.url})}if(!this.options.dataReader){this.options.dataReader=new FR.DefaultSynchronNodeReader()}this.options.dataSource.options.data=this;this.nodes=[]},updateData:function(b){var a=this.options.dataReader.readObject(b);var c=this.nodes.length;this.appendData(a);return c?this.fireEvent(FR.Events.APPENDDATA,a):this.fireEvent(FR.Events.AFTERREAD,a)
},getData:function(a){if(a&&$.isFunction(a)){a.call(this,this.nodes)}},loadNodes:function(){this.loadData()},loadData:function(){this.options.dataSource.loadObject()},appendData:function(b){for(var c=0,a=b.length;c<a;c++){var d;if(b[c].getParentID()!=null){d=this.getParentNodeByParentID(b[c].getParentID())}else{d=this.getParentNode(b[c].getID())}if(d){d.addNode(b[c])}else{this.nodes.push(b[c])}}},removeData:function(b){var a=b.getParent();if(a){a.removeNode(b)}else{this.nodes.remove(b)}},getParentNodeByParentID:function(d){for(var c=0,a=this.nodes.length;
c<a;c++){var b=this.getNodeByID(this.nodes[c],d);if(b){return b}}},getNodeByID:function(e,f){if(e.getID()==f){return e}var c=e.getChildren();for(var b=0,a=c.length;b<a;b++){var d=this.getNodeByID(c[b],f);if(d){return d}}},getParentNode:function(e){e=e.toString();var b=e.split("-");if(b.length<2){return}var d=this.nodes[b[0]-1];for(var c=1,a=b.length-1;c<a;c++){d=d.getChild(b[c]-1)}return d},getAllNodesLength:function(){var c=this.nodes.length;for(var b=0,a=this.nodes.length;b<a;b++){c+=this.executeLength(this.nodes[b])
}return c},isEmptyData:function(){return this.nodes.length<1},executeLength:function(c){var d=c.getChildrenLength();for(var b=0,a=c.getChildrenLength();b<a;b++){d+=this.executeLength(c.getChild(b))}return d},afterRead:function(a){if(!a){return false}return this.on(FR.Events.AFTERREAD,a)},appendDataEvent:function(a){if(!a){return false}return this.on(FR.Events.APPENDDATA,a)},getLastRootNode:function(){return this.nodes[this.nodes.length-1]},resetStatus:function(a){if(this.options.dataSource.resetStatus(a)){delete this.nodes;
this.nodes=[];return true}},isLocalSource:function(){return false}});FR.AjaxSearchData=FR.extend(FR.URLSource,{_init:function(){FR.AjaxSearchData.superclass._init.apply(this,arguments)},loadObject:function(d){if(!this.checkUrl()){return}var b=this;var c="";if(this.options.url.indexOf("widgetname")>=0){var a=this.options.url.split("&");$.each(a,function(e,f){if(f.indexOf("widgetname")>=0){a[e]="widgetname="+encodeURIComponent(encodeURIComponent(f.substring(11,f.length)))}});$.each(a,function(e,f){if(e!=a.length-1){c+=f+"&"
}else{c+=f}})}else{c=this.options.url}FR.ajax({type:"POST",url:c,data:this.generateParaData(false),async:true,complete:function(e){if(!FR.versionRemind(e.responseText)){return}b.fireEvent(FR.Events.AFTERLOAD);b.options.isLoaded=true;if($.isFunction(d)){d.call(b,FR.jsonDecode(e.responseText))}},error:function(){FR.Msg.toast(FR.i18nText("Data-Get_Data_Error"))}})}});FR.ItemTreeData=FR.extend(FR.OB,{_init:function(){FR.ItemTreeData.superclass._init.apply(this,arguments);if(!this.options.items){FR.Msg.toast("Tree Node Items is needed to create ItemTreeData.");
return}var a=this.options.items;if(typeof a=="string"){a=FR.jsonDecode(a)}if($.isArray(a)&&a.length>0&&!(a[0] instanceof FR.Node)){a=new FR.DefaultNodeReader().readObject(a)}this.nodes=a},getData:function(a){if(a&&$.isFunction(a)){a.call(this,this.nodes)}},isLocalSource:function(){return false},resetStatus:function(){},appendDataEvent:function(){},loadNodes:function(){}});FR.DataFactory={};$.extend(FR.DataFactory,{createArrayData:function(a,b){return new FR.Data({dataSource:new FR.ObjectSource({data:a}),dataReader:new FR.DefaultReader(b)})
},createSynchronArrayData:function(a){return new FR.SynchronData({dataSource:new FR.SynchronObjectSource({object:a}),dataReader:new FR.DefaultReader()})},createJSONData:function(b,a){return new FR.Data({dataSource:new FR.URLSource({url:b}),dataReader:new FR.DefaultReader(a)})},createSynchronJSONData:function(a,b){return new FR.SynchronData({dataSource:new FR.SynchronURLSource({url:a,async:!!b}),dataReader:new FR.DefaultReader()})},createEmptyData:function(){return new FR.Data()},createItemRecord:function(a){return new FR.Record({data:a,showField:"text",valueField:"value",titleField:"titleText"})
},createDefaultRootNodes:function(a){return new FR.RootNodeLoader({url:a})}});
FR.DatePicker=FR.extend(FR.Widget,{CONSTS:{VIEWMODE:{YM:0,YMD:1,HMS:2,YMDHMS:3},MINYEAR:1900,MAXYEAR:2999,NAV:{prevm:2,nextm:3,title:4,clear:5,today:6,dok:7,prevy:8,nexty:9,cancel:10,mok:11,plus:12,minus:13,firstday:14,current:15,day:100,month:200,year:300},FIRSTDAY:0},_TT:{CALENDAR:FR.i18nText("FR-Basic_Calendar"),WK:FR.i18nText("FR-Basic_Week"),CLEAR:FR.i18nText("FR-Basic_Clear"),TODAY:FR.i18nText("FR-Basic_Today"),OK:FR.i18nText("FR-Basic_OK"),CANCEL:FR.i18nText("FR-Basic_Cancel"),CURRENT:FR.i18nText("FR-Basic_Current")},_defaultConfig:function(){return $.extend(FR.DatePicker.superclass._defaultConfig.apply(this,arguments),{widgetName:"datepicker",inputField:null,format:null,viewMode:1,endDate:null,startDate:null,date:null,dateFormat:null,onDateUpdate:null,onClear:function(){this._hideView()
},onOK:function(){this._hideView()},onClose:function(){this._hideView()},onToday:function(){this._hideView()}})},_hideView:function(){if(FR.Browser.isIE8()){this.element.css("visibility","hidden")}else{this.element.hide()}},_init:function(){FR.DatePicker.superclass._init.apply(this,arguments);this.element.addClass("fr-datepicker");this.cache={showYear:null,showMonth:null};this._initTables();this._bindEvts()},_initTables:function(){var a=this.options;this.$datetable=this._createDatePicker();this._loadDateData(this.$datetable,new Date(this.options.date));
this.$monthtable=this._createMonthPicker();this.$timetable=this._createTimePicker();switch(a.viewMode){case this.CONSTS.VIEWMODE.YM:this._loadMonthData(this.$monthtable,new Date(this.options.date));this.$monthtable.appendTo(this.element).show();break;case this.CONSTS.VIEWMODE.HMS:this._loadTimeData(this.$timetable,this.options.date);this._addTimeOptPane(this.$timetable);this.$timetable.appendTo(this.element).show();break;case this.CONSTS.VIEWMODE.YMD:this.$datetable.appendTo(this.element).show();
this.$monthtable.hide().appendTo(this.element);break;default:this.$datetable.appendTo(this.element).show();this.$monthtable.hide().appendTo(this.element);var b=$("<tr/>").prependTo(this.$datetable.find("tfoot"));this._loadTimeData(this.$timetable,this.options.date);this.$timetable.show().appendTo($('<td colspan="8" class="time"/>').appendTo(b));break}},_createTimePicker:function(){var g=$('<table cellspacing = "0" cellpadding = "0" class="tt"/>');var b=$("<tbody>").appendTo(g);var h=this,a=this.options,d=this.CONSTS.NAV;
g.$h=$("<input/>").data("time","h").keyup(function(){var k=this.value;var j=parseInt(k,10);if(j<24&&j>=0){a.date.setHours(j);FR.applyFunc(h,a.onDateUpdate,arguments)}}).focus(function(){g.focus=$(this)}).mousedown(function(j){j.stopPropagation()});g.$m=$("<input/>").data("time","m").keyup(function(){var k=this.value;var j=parseInt(k,10);if(j<60&&j>=0){a.date.setMinutes(j);FR.applyFunc(h,a.onDateUpdate,arguments)}}).focus(function(){g.focus=$(this)}).mousedown(function(j){j.stopPropagation()});g.$s=$("<input/>").data("time","s").keyup(function(){var k=this.value;
var j=parseInt(k,10);if(j<60&&j>=0){a.date.setSeconds(j);FR.applyFunc(h,a.onDateUpdate,arguments)}}).focus(function(){g.focus=$(this)}).mousedown(function(j){j.stopPropagation()});g.focus=g.$s;var c=$("<td/>").html("&and;").data("nav",d.plus);var i=$("<td/>").html("&or;").data("nav",d.minus);var f=$("<tr/>").append($('<td rowspan="2"/>').text(FR.i18nText("FR-Basic_Time"))).append($('<td rowspan="2"/>').append(g.$h)).append($('<td class="common" rowspan="2"/>').text(":")).append($('<td rowspan="2"/>').append(g.$m)).append($('<td class="common" rowspan="2"/>').text(":")).append($('<td rowspan="2"/>').append(g.$s)).append(c).appendTo(b);
var e=$("<tr/>").append(i).appendTo(b);b.find("input").mousewheel(function(j){if(this.D<0){h._doTimeInc(g,$(this))}else{h._doTimeDec(g,$(this))}return false});return g},_addTimeOptPane:function(d){var c=this.CONSTS.NAV;var a=$("<tfoot/>");var b=$('<tr class="optbtns"/>').appendTo(a);this._createCell(b,this._TT.CLEAR,2,c.clear,"clear");this._createCell(b,this._TT.CURRENT,3,c.current,"current");this._createCell(b,this._TT.OK,2,c.dok,"ok");a.appendTo(d)},_createDatePicker:function(){var j=$('<table cellspacing = "0" cellpadding = "0" class="dt"/>');
var a=this.CONSTS.NAV;var f=$("<thead/>").appendTo(j);k=$('<tr class = "mainhead"/>');j.$prevm=this._createCell(k,"&lsaquo;",1,a.prevm,"prevm");j.$title=$('<td class="title" colspan="6"/>').data("nav",a.title).appendTo(k);j.$nextm=this._createCell(k,"&rsaquo;",1,a.nextm,"nextm");k.appendTo(f);k=$("<tr/>");$('<td class="name wn">'+this._TT.WK+"</td>").appendTo(k);for(var c=7;c>0;--c){$("<td/>").appendTo(k)}for(var c=0;c<7;++c){var b=k.children().eq(c+1);var e=(c+this.CONSTS.FIRSTDAY)%7;b.addClass("day name").text(Date._SDN[e]);
if([0,6].indexOf(e)!=-1){b.addClass("weekend")}if([0,1].indexOf(e)!=-1){b.addClass("fd").data("nav",this.CONSTS.NAV.firstday).data("fd",e)}}k.appendTo(f);var d=$('<tbody onselectstart="return false"/>').appendTo(j);for(c=6;c>0;c--){var k=$("<tr/>").appendTo(d);for(var h=0;h<=7;h++){$("<td/>").appendTo(k)}}var g=$("<tfoot/>").appendTo(j);var k=$('<tr class = "optbtns"/>');this._createCell(k,this._TT.CLEAR,2,a.clear,"clear");this._createCell(k,this._TT.TODAY,4,a.today,"today");this._createCell(k,this._TT.OK,2,a.dok,"ok");
k.appendTo(g);return j},_createMonthPicker:function(){var c=$('<table cellspacing = "0" cellpadding = "0" class="mt"/>');var f=this.CONSTS.NAV;var b=$('<tbody class="datemenubody"/>').appendTo(c);var e=$('<tr class="datemenutr"/>').appendTo(b);for(var g=0;g<2;g++){$('<td class="month"/>').appendTo(e)}this._createCell(e,"&laquo;",1,f.prevy," prevy");this._createCell(e,"&raquo;",1,f.nexty," nexty");for(var a=0;a<5;a++){e=$("<tr/>").appendTo(b);$('<td class="month"/><td class="month"/><td class="year"/><td class="year"/>').appendTo(e)
}var d=$("<tfoot/>").appendTo(c);e=$('<tr class="optbtns"/>').appendTo(d);this._createCell(e,this._TT.OK,2,f.mok,"ok");this._createCell(e,this._TT.CANCEL,2,f.cancel,"cancel");return c},_toPrevMonth:function(){var d=this.options.startDate,a=this.options.date;var c=this.cache.showMonth,b=this.cache.showYear;if(!d){if(c>0){this._setMonth(c-1)}else{a.setFullYear(b-1);this._setMonth(11)}return}if(b>d.getFullYear()){if(c>0){this._setMonth(c-1)}else{a.setFullYear(b-1);this._setMonth(11)}}else{if(b==d.getFullYear()){if(c>d.getMonth()&&c>0){this._setMonth(c-1);
if(a<d){a=new Date(d)}}}}},_toNextMonth:function(){var b=this.options.endDate,a=this.options.date;var d=this.cache.showMonth,c=this.cache.showYear;if(!b){if(d<11){this._setMonth(d+1)}else{a.setFullYear(c+1);this._setMonth(0)}return}if(c<b.getFullYear()){if(d<11){this._setMonth(d+1)}else{a.setFullYear(c+1);this._setMonth(0)}}else{if(c==b.getFullYear()){if(d<b.getMonth()){this._setMonth(d+1);if(a>b){a=new Date(b)}}}}},_toPrevDecade:function(){var e=this.options.startDate,a=this.options.date;var b=a.getFullYear()-10,d=a.getMonth();
var c,f;if(e&&b==(f=e.getFullYear())){c=e.getMonth()}if(!f||f<this.CONSTS.MINYEAR){f=this.CONSTS.MINYEAR}if(b<f){a.setFullYear(f);if(d<c){a.setMonth(c)}}else{a.setFullYear(b)}},_toNextDecade:function(){var c=this.options.endDate,b=this.options.date;var d=b.getFullYear()+10,e=b.getMonth();var f,a;if(c&&d==(a=c.getFullYear())){f=c.getMonth()}if(!a||a>this.CONSTS.MAXYEAR){a=this.CONSTS.MAXYEAR}if(d>a){b.setFullYear(a);if(e<f){b.setMonth(f)}}else{b.setFullYear(d)}},_setMonth:function(b){var f=this.options.date;
var d=f.getDate(),e=this.options.endDate,c=this.options.startDate;var a=f.getMonthDays(b);if(d>a){f.setDate(a)}f.setMonth(b);if(e&&f>e){f.setDate(e.getDate())}if(c&&f<c){f.setDate(c.getDate())}},_loadDateData:function(s,u){if(!u){return}var g=u.getFullYear(),v=u.getMonth(),p=u.getDate();var t=new Date(),k=t.getFullYear(),w=t.getMonth(),a=t.getDate();this.cache.showYear=g;this.cache.showMonth=v;var x=this.options.startDate,r=this.options.endDate;s.$title.text(Date._MN[v]+", "+g);var b=new Date(u);
b.setDate(b.getMonthDays()+1);if((r&&b>r)||b.getFullYear()>this.CONSTS.MAXYEAR){s.$nextm.addClass("disabled").removeClass("hover").data("disabled",true)}else{s.$nextm.removeClass("disabled").data("disabled",false)}var o=new Date(u);o.setDate(0);if((x&&o<x)||o.getFullYear()<this.CONSTS.MINYEAR){s.$prevm.addClass("disabled").removeClass("hover").data("disabled",true)}else{s.$prevm.removeClass("disabled").data("disabled",false)}u.setDate(1);var l=(u.getDay()-this.CONSTS.FIRSTDAY)%7;u.setDate(0-l);u.setDate(u.getDate()+1);
var m=s.find("tbody").children().eq(0);for(var q=0;q<6;q++){if(!m.length){break}var d=m.children().eq(0);d.addClass("week wn").text(u.getWeekNumber());var e;for(var n=0;n<7;++n,u.setDate(e+1)){d=d.next();d.removeClass().data("nav",this.CONSTS.NAV.day);if(!d.length){break}e=u.getDate();d.text(e);var h=(u.getMonth()==v);if(!h){d.addClass("oday").data("disabled",true);continue}var c=false;if((x!=null&&x>u)||(r!=null&&r<u)){d.addClass("day disabled");c=true}else{d.addClass("day")}d.data("disabled",c);
if(!c){if(h&&e==p){this.cache.selectedDate&&this.cache.selectedDate.removeClass("selected");d.addClass("selected");this.cache.selectedDate=d;this.cache.showDay=e}if(u.getFullYear()==k&&u.getMonth()==w&&e==a){d.addClass("today")}var f=u.getDay();if([0,6].indexOf(f)!=-1){d.addClass("weekend")}}}m=m.next()}},_loadMonthData:function(r,s){if(!s){return}var g=s.getFullYear(),u=s.getMonth();var h=$(r).data("midYear");if(!h){h=g}else{if(g>h+5){h+=10}else{if(g<h-4){h-=10}}}$(r).data("midYear",h);var l=[h-4,h-3,h-2,h-1,h,h+1,h+2,h+3,h+4,h+5];
var d=$("td.year",r);var j=$("td.month",r);var k=this.options;var e=k.endDate;var a=k.startDate;var b,c,t,n;if(e){if(e&&g==(b=e.getFullYear())){c=e.getMonth()}}if(!b||b>this.CONSTS.MAXYEAR){b=this.CONSTS.MAXYEAR}if(a){if(a&&g==(t=a.getFullYear())){n=a.getMonth()}}if(!t||t<this.CONSTS.MINYEAR){t=this.CONSTS.MINYEAR}for(var m=0;m<12;m++){var v=j.eq(m).text(Date._MN[m]).data("nav",this.CONSTS.NAV.month).data("month",m);if(m==u){this.cache.selectedMonth&&this.cache.selectedMonth.removeClass("selected");
v.addClass("selected");this.cache.selectedMonth=v}if((!FR.isEmpty(n)&&m<n)||(!FR.isEmpty(c)&&m>c)){v.addClass("disabled").data("disabled",true)}else{v.removeClass("disabled").data("disabled",false)}if(m<10){var f=d.eq(m).text(l[m]).data("nav",this.CONSTS.NAV.year);if(l[m]==g){this.cache.selectedYear&&this.cache.selectedYear.removeClass("selected");f.addClass("selected");this.cache.selectedYear=f}if((!FR.isEmpty(t)&&l[m]<t)||(!FR.isEmpty(b)&&l[m]>b)){f.addClass("disabled").data("disabled",true)}else{f.removeClass("disabled").data("disabled",false)
}}}var p=$("td.prevy",r).removeClass("disabled").data("disabled",false);if(l[0]<=t){p.addClass("disabled").data("disabled",true).removeClass("hover")}var q=$("td.nexty",r).removeClass("disabled").data("disabled",false);if(l[9]>=b){q.addClass("disabled").data("disabled",true).removeClass("hover")}},_loadTimeData:function(d,c){if(!c){return}var a=c.getHours(),e=c.getMinutes(),b=c.getSeconds();d.$h.val(String.leftPad(a,2,"0"));d.$m.val(String.leftPad(e,2,"0"));d.$s.val(String.leftPad(b,2,"0"))},_doTimeInc:function(e,a){var b=a.data("time"),d=this.options;
if(b==="h"){var c=(d.date.getHours()+1)%24;d.date.setHours(c);e.$h.val(String.leftPad(c,2,"0"))}else{if(b==="m"){var c=(d.date.getMinutes()+1)%60;d.date.setMinutes(c);e.$m.val(String.leftPad(c,2,"0"))}else{var c=(d.date.getSeconds()+1)%60;d.date.setSeconds(c);e.$s.val(String.leftPad(c,2,"0"))}}a.select();FR.applyFunc(this,d.onDateUpdate,arguments)},_doTimeDec:function(e,a){var b=a.data("time"),d=this.options;if(b==="h"){var c=(d.date.getHours()+23)%24;d.date.setHours(c);e.$h.val(String.leftPad(c,2,"0"))
}else{if(b==="m"){var c=(d.date.getMinutes()+59)%60;d.date.setMinutes(c);e.$m.val(String.leftPad(c,2,"0"))}else{var c=(d.date.getSeconds()+59)%60;d.date.setSeconds(c);e.$s.val(String.leftPad(c,2,"0"))}}a.select();FR.applyFunc(this,d.onDateUpdate,arguments)},_bindEvts:function(){this.element.unbind();var a=this,g=this.options,d=this.CONSTS.NAV;var c=this.$monthtable,e=this.$datetable,f=this.$timetable;var b=function(l){var m=l.target;var k=l.type;var j=$(m).data("nav");if($(m).data("disabled")||m.tagName!=="TD"||!j){return
}if(!a.options.date){a.options.date=new Date()}if(k==="mouseover"){$(m).addClass("hover")}else{if(k==="mouseup"){switch(j){case d.prevm:a._toPrevMonth();a._loadDateData(e,new Date(a.options.date));FR.applyFunc(a,g.onDateUpdate,arguments);break;case d.nextm:a._toNextMonth();a._loadDateData(e,new Date(a.options.date));FR.applyFunc(a,g.onDateUpdate,arguments);break;case d.title:a._loadMonthData(c,new Date(a.cache.showYear,a.cache.showMonth));c.css({position:"absolute",top:0,"z-index":FR.widget.opts.zIndex++}).show("fast");
break;case d.clear:a.options.date=null;a.cache.selectedDate&&a.cache.selectedDate.removeClass("selected");FR.applyFunc(a,g.onDateUpdate,arguments);FR.applyFunc(a,g.onClear,arguments);break;case d.current:a.options.date=new Date();FR.applyFunc(a,g.onDateUpdate,arguments);case d.today:var h=new Date();if((a.options.startDate&&h<a.options.startDate)||(a.options.endDate&&h>a.options.endDate)){return}else{a.options.date=h}FR.applyFunc(a,g.onDateUpdate,arguments);FR.applyFunc(a,g.onToday,arguments);break;
case d.dok:FR.applyFunc(a,g.onDateUpdate,arguments);FR.applyFunc(a,g.onOK,arguments);break;case d.prevy:a._toPrevDecade();a._loadMonthData(c,new Date(a.options.date));FR.applyFunc(a,g.onDateUpdate,arguments);break;case d.nexty:a._toNextDecade();a._loadMonthData(c,new Date(a.options.date));FR.applyFunc(a,g.onDateUpdate,arguments);break;case d.mok:a._loadDateData(e,new Date(a.options.date));FR.applyFunc(a,g.onDateUpdate,arguments);c.hide("fast");break;case d.cancel:a._loadDateData(e,new Date(a.options.date));
c.hide("fast");break;case d.year:a.cache.selectedYear&&a.cache.selectedYear.removeClass("selected");a.cache.selectedYear=$(m);var i=a.options.date;i.setFullYear($(m).text());a._loadMonthData(c,new Date(i));FR.applyFunc(a,g.onDateUpdate,arguments);break;case d.month:a.cache.selectedMonth&&a.cache.selectedMonth.removeClass("selected");a.cache.selectedMonth=$(m).addClass("selected");a.options.date.setDate(1);a.options.date.setMonth($(m).data("month"));FR.applyFunc(a,g.onDateUpdate,arguments);break;case d.day:a.cache.selectedDate&&a.cache.selectedDate.removeClass("selected");
a.cache.selectedDate=$(m).addClass("selected");var i=a.options.date;i.setFullYear(a.cache.showYear);i.setMonth(a.cache.showMonth);i.setDate($(m).text());FR.applyFunc(a,g.onDateUpdate,arguments);if(!f.parent().length){FR.applyFunc(a,g.onClose,arguments)}break;case d.plus:a._doTimeInc(f,f.focus);break;case d.minus:a._doTimeDec(f,f.focus);break;case d.firstday:a.CONSTS.FIRSTDAY=$(m).data("fd");a.element.empty();a._init();default:break}}else{if(k==="mouseout"){$(m).removeClass("hover")}}}};this.element.bind("mousedown",b).bind("mouseover",b).bind("mouseup",b).bind("mouseout",b)
},_createCell:function(c,e,f,d,a){var b=$("<td class/>").attr("colSpan",f).html(e).appendTo(c);if(d){b.data("nav",d)}a=a?"btn "+a:"btn";b.addClass(a);return b},getValue:function(){return this.options.date},setValue:function(a){this.options.date=a},getText:function(){return this.getValue()},setText:function(a){this.setValue(a)}});$.shortcut("datepicker",FR.DatePicker);
(function(){FR.BaseEditor=FR.extend(FR.Widget,{isSupportDatabinding:function(){return true},loadData:function(){if(this.options.widgetName){var a=this.options.form.formData[this.options.widgetName];if(a){this.setValue(a,false)}}},store:function(){if(this.options.Databinding){var a=this.options.Databinding.Name;var b=this.options.Databinding.Key;if(a&&b){var d=this.getValue();var c=this.options.form.formData.setValue(a,b,d)}}},getValue:function(){},setValue:function(a){if(!this.isValidate(a)){return false
}if((a||a===0)&&this.options.watermark){this.clearWaterMark()}if(arguments[1]!=undefined){this._dealValueWithEvents(a,arguments[1])}else{this._dealValueWithEvents(a,false)}},_dealValueWithEvents:function(b,a){},dealWithDisplayValue:function(a){},getText:function(){return this.getValue()},setText:function(a){this.setValue(a)},clearWaterMark:function(){},getErrorMsg:function(){return this.errorMsg},checkValid:function(a){if(this.isValidate(a)){this.validateCss();return true}else{this.invalidateCss();
return false}},isValidate:function(c){var f=c!=null&&c!=undefined?c:this.getValue();var e=this.options.regex;if(f==null||f===""||FR.isEmptyArray(f)){return this.validateEmptyValue(f)}if(e){for(var b=0,a=FR.BaseEditor.PluginRegex.length;b<a;b++){var g=FR.BaseEditor.PluginRegex[b];if(g.text===e){if(g.regex(f)){return true}else{this.errorMsg=FR.i18nText("FR-Base_Error_Input_Value");return false}}}if(typeof e=="string"){try{e=new RegExp(e)}catch(d){this.errorMsg="invalid Regular expressions";return false
}}if(!e.test(f)){if(!(e.source.indexOf(".{")>-1&&e.test(f.replace(/\n/g,"aa")))){this.errorMsg=this.options.regErrorMsg||FR.i18nText("FR-Base_Error_Input_Value");return false}}}return true},validateEmptyValue:function(b){var a=this.options.allowBlank!==false;if(a){return true}else{this.errorMsg=this.options.errorMsg||FR.i18nText("FR-Base_NOT_NULL_Des");return false}},initData:function(){if(this.options.data){return}if(this.options.widgetUrl){this.options.data=FR.DataFactory.createJSONData(this.options.widgetUrl,this.options)
}else{if(this.options.items){this.options.data=FR.DataFactory.createArrayData(this.options.items,this.options)}}},getDependenceObj:function(){var b=this.options;var e={};if(b.dependenceMap){var j=this;$.each(b.dependenceMap,function(l,n){if(j.options.form){var p=j.options.form.resolveVariable(n);if(p!="FR.primitive"&&p!=null){e[l.toUpperCase()]=p}}else{if(j.options.write){n=n.startWith("$")?n.substring(1):n;var m;if(j.options.write){var o=j.options.write.getWidgetByCell(n)||j.options.write.getWidgetByName(n);
if(o){m=o.getValue()}}if(m==undefined){var k=FR.cellStr2ColumnRow(n);if(k){var q=contentPane.curLGP.getTDCell(k);if(q){m=FR.getCellValue(q)}}}if(m!="FR.primitive"&&m!=null&&m!=undefined&&m!=""){e[l.toUpperCase()]=m}}}})}else{if(FR.isArray(b.dependence)){for(var i=0;i<b.dependence.length;i++){var h=b.dependence[i];if(this.options.form){var d=this.options.form.resolveVariable(h);if(d!="FR.primitive"&&d!=null){e[h.toUpperCase()]=d}}else{if(this.options.write){h=h.startWith("$")?h.substring(1):h;var g;
if(contentPane.curLGP.write){var f=contentPane.curLGP.write.getWidgetByCell(h)||contentPane.curLGP.write.getWidgetByName(h);if(f){g=f.getValue()}}if(!g){var c=FR.cellStr2ColumnRow(h);if(c){var a=contentPane.curLGP.getTDCell(c);if(a){g=FR.getCellValue(a)}}}if(g!="FR.primitive"&&g!=null){e[h.toUpperCase()]=g}}}}}}return e},createDependencePara4Data:function(){var a=this.getDependenceObj();var b=FR.isEmptyObj(a)?{}:{dependence:a};return{parameter:b}},reset:function(){this.setValue("")}});FR.BaseEditor.PluginRegex=[];
FR.EditCompBaseEditor=FR.extend(FR.BaseEditor,{_defaultConfig:function(){return $.extend(FR.EditCompBaseEditor.superclass._defaultConfig.apply(),{})},setWaterMark:function(a){if(a==undefined){a=this.options.watermark}FR.$defaultImport("/com/fr/web/core/js/jquery.watermark.js","js");this.editComp.watermark(a,this.options.isEditable)},removeWaterMark:function(){FR.$defaultImport("/com/fr/web/core/js/jquery.watermark.js","js");this.editComp.watermark({remove:true})},clearWaterMark:function(){FR.$defaultImport("/com/fr/web/core/js/jquery.watermark.js","js");
this.editComp.watermark({clear:true})},validateCss:function(){this.editComp.removeClass("fr-invalid");this.editComp.removeAttr("title")},invalidateCss:function(){this.editComp.addClass("fr-invalid");this.editComp.attr("title",this.getErrorMsg())}});FR.EditComp=FR.extend(FR.EditCompBaseEditor,{_defaultConfig:function(){return $.extend(FR.EditComp.superclass._defaultConfig.apply(),{cls:"fr-texteditor",width:120,height:22,autoVerify:false})},_init:function(){FR.EditComp.superclass._init.apply(this,arguments);
var a=this;var b=this.options;this.editComp=this._createEditComp();if(FR.Browser.isIE()){this.editComp.on("paste",function(){var c=window.clipboardData.getData("Text");c=c.replace(/\s|\n/g," ");this.value=this.value?this.value.append(c):c;return false})}this.editComp.appendTo(this.element);if(b.fontSize){this.editComp.css("font-size",b.fontSize)}this.validateCss();this.editComp.attr("name",b.widgetName).addClass(b.cls);if(FR.Browser.isIE8()){this.editComp.css("margin-top",0)}if(b.text){this.editComp.attr("value",b.text)
}if(b.id){this.editComp.attr("id",b.id)}if(b.disabled===true){this.editComp.attr("disabled","disabled")}b.width=(b.width>-1)?b.width:120;b.height=(b.height>-1)?b.height:22;this.doResize(b);FR.applyStyles(this.editComp,b.style);this.editComp.focus(function(c){a.editComp.addClass(b.cls+"-focus");if(!a.options.write){a.fireEvent(FR.Events.BEFOREEDIT)}}).blur(function(c){a.editComp.removeClass(b.cls+"-focus");if(!a.options.write){a.checkValid();a.fireEvent(FR.Events.STOPEDIT)}}).keyup(function(c){if(b.autoVerify){a.checkValid()
}if(a.isValidateInput(c)){a.fireEvent(FR.Events.AFTEREDIT,c)}});this.errorMsg=this.options.errorMsg||"";if(b.value!=null){this.setValue(b.value,false)}},_createEditComp:function(){return $("<input type='text'/>")},doResize:function(a){FR.EditComp.superclass.doResize.call(this,a);this.element.css({width:a.width,height:a.height});this.editComp.css("width",$.support.boxModel?a.width-8:a.width);this.editComp.css("height",$.support.boxModel?a.height-4:a.height);if(this.options.watermark){this.removeWaterMark();
this.setWaterMark()}},setEnable:function(a){FR.EditComp.superclass.setEnable.apply(this,arguments);if(this.editComp){if(a===true){this.editComp.removeAttr("disabled")}else{if(a===false){this.editComp.attr("disabled","disabled")}}}},selectText:function(f,a){if(!this.editComp.is(":visible")){return}var c=this.editComp.val();if(c&&c.length>0){f=f===undefined?0:f;a=a===undefined?c.length:a;var e=this.editComp[0];if(e.setSelectionRange){e.setSelectionRange(f,a)}else{if(e.createTextRange){var b=e.createTextRange();
b.moveStart("character",f);b.moveEnd("character",a-c.length);b.select()}}}}})})(jQuery);
(function(a){FR.Button=FR.extend(FR.Widget,{_defaultConfig:function(){return a.extend(FR.Button.superclass._defaultConfig.apply(),{baseCls:"fr-btn",hotkeys:"",icon:"",autoSize:false,scale:"small",iconAlign:"left",text:"",width:"auto",height:"auto",borderWidth:6})},_init:function(){FR.Button.superclass._init.apply(this,arguments);var c=this.options;this.initTable(c);this.addEvents(c);var b=this;if(c.hotkeys){FR.Keys.reg(function(g){if((a(document).codeToString(g)==c.hotkeys)&&b.isEnabled()){var f=FR.CookieInfor.getCookieByName("buttonHotKeyTimer");
var d=(new Date()).getTime();if(FR.isEmpty(f)||(d-f>1000)){if(b.isEnabled()){b.fireEvent(FR.Events.CLICK,g);document.cookie="buttonHotKeyTimer="+d;g.preventDefault();g.stopPropagation()}}}})}if(a.isFunction(c.handler)){this.on(FR.Events.CLICK,c.handler.createDelegate(c.scope||this))}},initTable:function(d){if(!d.text&&d.value){d.text=d.value}var f=d.baseCls+"-"+d.widgetName;var b=(d.icon)?(d.text?" fr-btn-text-icon":" fr-btn-icon"):" fr-btn-noicon";var e="fr-btn-"+d.scale+" fr-btn-icon-"+d.scale+"-"+d.iconAlign;
this.$btn=a("<button/>").attr("unselectable","none").attr("type","button").attr("data-role","none").addClass("fr-btn-text").append(d.text);this.$em=a("<em/>").attr("unselectable","on").append(this.$btn);this.$btnWrap=a("<div/>").addClass(e).append(this.$em);FR.Button.setIcon(this.$btn,d.icon);this.$btndiv=a("<div/>").attr("id",f).addClass("fr-btn-up").addClass(b).append(this.$btnWrap).appendTo(this.element);var c=d.scale=="small"?14:d.scale=="middle"?24:32;if(FR.Browser.isIE8Before()){this.$btn.css("margin-top",(d.height-c)/2)
}else{this.$btndiv.css("display","table-cell")}this.$btndiv.height(Number(d.height)+1);this.$btndiv.width(d.width)},addEvents:function(c){if(!this.$btndiv){return}var b=this;var d={onMouseOver:function(){if(b.isEnabled()){b.$btndiv.addClass(c.baseCls+"-over")}},onMouseOut:function(){if(b.isEnabled()){b.$btndiv.removeClass(c.baseCls+"-over")}},onMouseDown:function(){if(b.isEnabled()){b.$btndiv.removeClass(c.baseCls+"-over");a(document).bind("mouseup",d.onMouseUp)}},onMouseUp:function(){if(b.isEnabled()){b.$btndiv.removeClass(c.baseCls+"-over");
a(document).unbind("mouseup",d.onMouseUp)}}};this.$btndiv.mouseover(d.onMouseOver.createInterceptor(this.isEnabled(),this)).mouseout(d.onMouseOut).mousedown(d.onMouseDown.createInterceptor(this.isEnabled(),this)).mouseup(d.onMouseUp);this.$btndiv.keydown(function(f){if(f.keyCode===13){f.stopPropagation()}});this.$btndiv.click(function(f){if(b.isEnabled()){b.fireEvent(FR.Events.CLICK,f)}})},setEnable:function(b){FR.Button.superclass.setEnable.apply(this,arguments);var c=this.options.baseCls;if(this.$btndiv&&b===false){this.$btndiv.removeClass(c+"-over")
}},getText:function(){return this.$btn.text()},setText:function(b){if(FR.isEmpty(b)){return}this.$btn.text(b)},getValue:function(){return this.$btn.text()},setValue:function(b){if(FR.isEmpty(b)){return}this.$btn.text(b)},setIcon:function(c){if(FR.isEmpty(c)){return}this.$btn.removeClass();this.$btn.addClass("fr-btn-text");var b=this.$btn;if(FR.Browser.isIE6()){a("<span>"+this.$btn.text()+"</span>").appendTo(this.$btn.parent())}if(c.substring(0,4)=="css:"){b.addClass(c.substring(4))}else{if(c.substring(0,6)=="style:"){b.css({background:c.substring(6)})
}else{b.css({"background-image":"url("+c+")"})}}},setMaxWidth:function(b){if(!isNaN(b)){var c=this.options;if(FR.Browser.isIE()){if(FR.fixBoxModelWidth(this.$btn)+this.$btn.width()>(b-c.borderWidth)){this.$btn.width(b-c.borderWidth)}}else{this.$btn.css("max-width",(b-c.borderWidth)+"px")}}},doResize:function(d){FR.Button.superclass.doResize.call(this,d);var c=d?d.width:this.options.width;var b=d?d.height:this.options.height;this.$btndiv.css({width:c,height:b});this.setMaxWidth(c)}});a.shortcut("button",FR.Button);
FR.Button.setIcon=function(d,c){if(FR.isEmpty(c)){return}d.removeClass();d.addClass("fr-btn-text");var b=d;if(FR.Browser.isIE6()){a("<span>"+d.text()+"</span>").appendTo(d.parent())}if(c.substring(0,4)=="css:"){b.addClass(c.substring(4))}else{if(c.substring(0,6)=="style:"){b.css({background:c.substring(6)})}else{b.css({"background-image":"url("+c+")"})}}};FR.Button.setMaxWidth=function(d,b){if(d.isSetWidth){return}if(!isNaN(b.width)){if(FR.Browser.isIE()){var c=FR.fixBoxModelWidth(d)+d.width();if(c>(b.width-b.borderWidth)){d.width(b.width-b.borderWidth);
FR.Button.setPrototypeBtnWidth(b,b.width-b.borderWidth)}}else{d.css("max-width",(b.width-b.borderWidth)+"px");FR.Button.setPrototypeBtnMaxWidth(b,b.width-b.borderWidth)}}};FR.Button.setPrototypeBtnWidth=function(c,d){var b=FR.Button.CacheTable._getPrototypeTable(c);if(b){var e=b.$btn;e.width(d);e.isSetWidth=true}};FR.Button.setPrototypeBtnMaxWidth=function(c,d){var b=FR.Button.CacheTable._getPrototypeTable(c);if(b){var e=b.$btn;e.css("max-width",(c.width-c.borderWidth)+"px");e.isSetWidth=true}};FR.IconButton=FR.extend(FR.Widget,{_defaultConfig:function(){return a.extend(FR.IconButton.superclass._defaultConfig.apply(),{tablable:true,render:false,width:18,height:18,baseClass:"fr-icon-btn"})
},_init:function(){FR.IconButton.superclass._init.apply(this,arguments);var d=this.options;if(d.render===true){this.$btn=a("<div/>").appendTo(this.element)}else{this.$btn=this.element}this.$btn.addClass(d.baseClass);if(d.title){this.$btn.attr("title",d.title)}if(d.text){this.$btn.html(d.text)}var c=d.baseClass;if(d.imgsrc){c=d.imgsrc;this.$btn.addClass(d.imgsrc)}var b=this;var e={onMouseOver:function(f){if(b.isEnabled()){b.$btn.addClass(c+"-hover")}},onMouseDown:function(f){if(b.isEnabled()){b.$btn.removeClass(c+"-hover");
b.$btn.addClass(c+"-click");a(document).bind("mouseup",e.onMouseUp)}},onMouseOut:function(f){b.$btn.removeClass(c+"-hover");b.$btn.removeClass(c+"-click")},onMouseUp:function(f){b.$btn.removeClass(c+"-click");a(document).unbind("mouseup",e.onMouseUp)}};this.$btn.mouseover(e.onMouseOver).mouseout(e.onMouseOut).mousedown(e.onMouseDown).mouseup(e.onMouseUp);this.$btn.click(function(f){if(b.isEnabled()){b.fireEvent(FR.Events.CLICK,f)}});if(a.isFunction(d.handler)){this.on(FR.Events.CLICK,d.handler.createDelegate(d.scope||this))
}},destroy:function(){this.element.empty()},doResize:function(b){FR.Button.superclass.doResize.call(this,b);this.$btn.css({width:b.width,height:b.height})}});a.shortcut("iconbutton",FR.IconButton);FR.FreeButton=FR.extend(FR.BaseEditor,{_defaultConfig:function(){return a.extend(FR.FreeButton.superclass._defaultConfig.apply(),{width:200,height:100,initial:{background:""}})},_init:function(){FR.FreeButton.superclass._init.apply(this,arguments);this.switchOn=false;var e=this.options;if(e.render===true){this.$img=a("<div style='text-align: center;'/>").appendTo(this.element)
}else{this.$img=this.element.css("text-align","center")}this.element.addClass("fr-form-imgboard");if(e.icon){var c=a("<img style='vertical-align: middle;margin-right: 3px;'/>");if(e.icon.background){var g=e.icon.background.split("(");var d=g[1];g=d.split(")");d=g[0];c.attr("src",d).appendTo(this.$img)}}this.text=a("<span style='text-align: center;'>"+((e.text!=null&&!FR.isEmpty(a.trim(e.text)))?e.text:"&nbsp;")+"</span>").appendTo(this.$img);if(e.fontsize){this.text.css("font-size",e.fontsize)}if(e.color){this.text.css("color",e.color)
}if(e.decoration){this.text.css("text-decoration",e.decoration)}if(e.fontfamily){this.text.css("font-family",e.fontfamily)}if(e.fontweight){this.text.css("font-weight",e.fontweight)}if(e.fontstyle){this.text.css("font-style",e.fontstyle)}if(e.text&&!FR.isEmpty(a.trim(e.text))){this.setValue(e.text)}if(e.width&&e.height){this.doResize(e)}if(e.hotkeys){FR.Keys.reg(function(j){if((a(document).codeToString(j)==e.hotkeys)&&b.isEnabled()){var i=FR.CookieInfor.getCookieByName("buttonHotKeyTimer");var h=(new Date()).getTime();
if(FR.isEmpty(i)||(h-i>1000)){if(b.isEnabled()){b.fireEvent(FR.Events.CLICK,j);document.cookie="buttonHotKeyTimer="+h;j.preventDefault();j.stopPropagation()}}}})}if(FR.Browser.isIE8Before()){if(e.click&&e.click.background){this.setBackground(e.click.background)}if(e.over&&e.over.background){this.setBackground(e.over.background)}}this.setBackground(e.initial.background);var b=this;var f={onMouseOver:function(h){if(!b.options.disabled){b.fireOver()}},onMouseOut:function(h){if(!b.options.disabled){b.fireOut()
}},onMouseDown:function(h){if(!b.options.disabled){b.fireDown()}a(document).bind("mouseup",f.onMouseUp)},onMouseUp:function(h){if(!b.options.disabled){b.fireUp()}a(document).unbind("mouseup",f.onMouseUp)}};this.$img.mouseover(f.onMouseOver.createInterceptor(this.isEnabled(),this)).mouseout(f.onMouseOut).mousedown(f.onMouseDown.createInterceptor(this.isEnabled(),this)).mouseup(f.onMouseUp);if(this._getEvents().click){this.$img.addClass("fr-widget-click")}else{this.$img.css("cursor","default")}this.$img.click(function(h){if(b.isEnabled()){b.fireEvent(FR.Events.CLICK,h)
}});if(a.isFunction(e.handler)){this.on(FR.Events.CLICK,e.handler.createDelegate(e.scope||this))}},setValue:function(b){this.text.text(b)},getValue:function(){return this.text.text()},setEnable:function(b){if(b===true){this.options.disabled=false;if(this.options.isToggle&&this.switchOn){if(this.options.click){this.element.css("background",this.options.click.background)}}else{this.element.css("background",this.options.initial.background)}this.element.addClass("ui-state-enabled");this.element.removeClass("ui-state-disabled")
}else{if(b===false){this.options.disabled=true;this.element.css("background","none");this.element.addClass("ui-state-disabled");this.element.removeClass("ui-state-enabled")}}},fireOver:function(){if(this.options.over){this.setBackground(this.options.over.background)}},fireOut:function(){if(this.options.isToggle&&this.switchOn){if(this.options.click){this.setBackground(this.options.click.background)}}else{this.setBackground(this.options.initial.background)}},fireDown:function(){if(this.options.isToggle&&!this.switchOn){var d=this.getWidgetsInSameGroup();
if(d){for(var b=0;b<d.length;b++){var c=d[b];if(c!=this){c.switchDown()}}}this.switchOn=true}if(this.options.click){this.setBackground(this.options.click.background)}},fireUp:function(){if(this.options.over&&this.switchOn){this.setBackground(this.options.over.background)}else{this.setBackground(this.options.initial.background)}},switchDown:function(){if(this.options.isToggle){this.setBackground(this.options.initial.background);this.switchOn=false}},getWidgetsInSameGroup:function(){if(this.options.group){return this.options.form.getWidgetsByGroup(this.options.group)
}},setBackground:function(b){this.$img.css("background",b)},doResize:function(b){this.$img.css({width:b.width,height:b.height});this.text.css("line-height",b.height+"px")}});a.shortcut("freebutton",FR.FreeButton);FR.ToggleButton=FR.extend(FR.BaseEditor,{selected_class:"fr-checkbox-checkon",unselected_class:"fr-checkbox-checkoff",_defaultConfig:function(){return a.extend(FR.ToggleButton.superclass._defaultConfig.apply(),{selected:false,scope:this,render:true,only_be_selected:false})},_init:function(){FR.ToggleButton.superclass._init.apply(this,arguments);
var c=this.options;if(c.render===true){this.element.css("height","auto").css("width","auto");this.$btn=a("<span>"+((c.text!=null&&!FR.isEmpty(a.trim(c.text)))?c.text:"&nbsp;")+"</span>").appendTo(this.element).addClass("x-text").addClass("fr-widget-click").click(function(d){this.onNodeClick()}.createDelegate(this))}else{this.$btn=this.element;if(c.text!=null){a("<span>"+c.text+"</span>").insertAfter(this.$btn)}}if(FR.Browser.r.chrome){this.$btn.css("padding-top",1)}if(this.options.fontSize){var b=12;
if(this.options.fontSize<b){this.options.fontSize=b}this.$btn.css("font-size",this.options.fontSize)}this.$btn.css("display","inline-block");if(a.isFunction(c.handler)){this.$btn.click(c.handler.createDelegate(c.scope||this).createInterceptor(this.isEnabled,this))}this.changeBoxState(c.selected);this.$formbtn=this.initFormBtn();if(c.value){if(!this.isValidate(c.value)){FR.Msg.toast(this.errorMsg);return}if(typeof c.value=="boolean"){this.setSelectedWithoutEvent(c.value)}else{if(c.value=="true"){this.setSelectedWithoutEvent(true)
}else{if(c.value=="false"){this.setSelectedWithoutEvent(false)}}}}},onNodeClick:function(){var b=this.options;if(this.isEnabled()){if(b.only_be_selected&&this.selected()){return false}else{if(!this.selected(!this.selected())){return false}}this.fireEvent(FR.Events.AFTEREDIT);this.fireEvent(FR.Events.CLICK)}},changeBoxState:function(b){b=typeof b=="boolean"?b:(b!="false");this.$btn[b?"addClass":"removeClass"](this.selected_class);this.$btn[b?"removeClass":"addClass"](this.unselected_class)},initFormBtn:function(){return null
},getValue:function(){return this.selected()},_dealValueWithEvents:function(b){if(typeof b=="boolean"){this.selected(b,"noFireEvent")}else{if(b=="true"){this.selected(true,"noFireEvent")}else{if(b=="false"){this.selected(false,"noFireEvent")}}}if(arguments[1]===true){this.fireEvent(FR.Events.AFTEREDIT)}},getText:function(){return this.options.text},reset:function(){this.selected(false)},selected:function(){if(arguments.length===0){return this.isSelected()}else{if(arguments[1]=="noFireEvent"){return this.setSelectedWithoutEvent(arguments[0])
}else{return this.setSelected(arguments[0])}}},isSelected:function(){return this.$btn.is("."+this.selected_class)},setSelected:function(b){if(!this.setSelectedWithoutEvent(b)){return false}this.fireEvent(FR.Events.STATECHANGE,this.selected());return true},setSelectedWithoutEvent:function(b){if(this.$formbtn){this.$formbtn.attr("checked",b!==false)}this.changeBoxState(b);return true},destroy:function(){FR.ToggleButton.superclass.destroy.apply(this)},doResize:function(b){FR.ToggleButton.superclass.doResize.call(this,b)
}});FR.CheckBox=FR.extend(FR.ToggleButton,{selected_class:"fr-checkbox-checkon",unselected_class:"fr-checkbox-checkoff",checkIconHeight:17,_defaultConfig:function(){return a.extend(FR.CheckBox.superclass._defaultConfig.apply(),{marginleft:5})},_init:function(){FR.CheckBox.superclass._init.apply(this,arguments);var c=this.options;var b;if(this.element&&FR.Browser.isIE){this.element.css({width:c.width,height:this.checkIconHeight});b=this.checkIconHeight}if(b){this.$btn.css({"margin-left":c.marginleft,height:"inherit","line-height":b+"px"})
}else{this.$btn.css("margin-left",c.marginleft)}},initFormBtn:function(){if(this.options.sessionID&&_g(this.options.sessionID).rtype=="form"){var b=a(this.$btn.parent());b.css("background-color","white");this.$box=a("<input type='checkbox'/>").css("display","none").attr("name",this.options.widgetName).appendTo(b);this.$box.attr("value",this.options.fieldValue||this.options.value||"")}return this.$box},doResize:function(b){FR.CheckBox.superclass.doResize.call(this,b);if(this.element){this.$btn.css("line-height",this.element.height()+"px")
}}});a.shortcut("checkbox",FR.CheckBox);FR.RadioButton=FR.extend(FR.ToggleButton,{selected_class:"fr-radio-radioon",unselected_class:"fr-radio-radiooff",_init:function(){FR.RadioButton.superclass._init.apply(this,arguments)},initFormBtn:function(){if(this.options.sessionID&&_g(this.options.sessionID).rtype=="form"){var b=a(this.$btn.parent());b.css("background-color","white");this.$radio=a("<input type='radio'/>").css("display","none").attr("name",this.options.name||this.options.widgetName).appendTo(b);
this.$radio.attr("value",this.options.fieldValue||this.options.value||"")}return this.$radio}});a.extend(FR.RadioButton,{RadioButtonGroup:{}});a.shortcut("radio",FR.RadioButton);FR.FormSubmitButton=FR.extend(FR.Button,{_init:function(){FR.FormSubmitButton.superclass._init.apply(this,arguments)}});a.shortcut("formsubmit",FR.FormSubmitButton);FR.CardSwitchButton=FR.extend(FR.FreeButton,{_init:function(){FR.CardSwitchButton.superclass._init.apply(this,arguments);this.$img.css("border-radius","5px 5px 0 0");
this.element.css("border-radius","5px 5px 0 0");this.element.css("opacity",this.options.opacity);var b=this;var c={cur_style:0,onMouseOver:function(f){var d=b.element.css("opacity");cur_style=d;if(d==="1"){return}b.element.css("opacity",1)},onMouseOut:function(d){if(cur_style==="1"){return}b.element.css("opacity",0.6)},onMouseDown:function(f){var d=b.element.css("opacity");cur_style=d}};this.$img.mouseover(c.onMouseOver).mouseout(c.onMouseOut).mousedown(c.onMouseDown)}});a.shortcut("cardswitch",FR.CardSwitchButton)
})(jQuery);
FR.Search=FR.extend(FR.EditCompBaseEditor,{_defaultConfig:function(){return $.extend(FR.Search.superclass._defaultConfig.apply(),{baseCls:"fr-search",width:164,height:28,width4searchBtn:44,defaultValue:null,watermark:null,onSearch:null,advanced:false,onTrigger:null,autoSearch:false,onKeyup:null,onFocus:null,onBlur:null,onEnter:null})},_init:function(){FR.Search.superclass._init.apply(this,arguments);var a=this.options;this._initEditComp();if(!a.autoSearch){this._createTriggerBtn();this.searchButton=this._createSearchBtn(this.element)
}this.doResize(a)},_initEditComp:function(){var b=this.options,a=this;this.editComp=$("<input/>").appendTo(this.element);if(b.watermark){this.setWaterMark(b.watermark)}if(b.defaultValue){this.editComp.val(b.defaultValue).data("defaultValue",b.defaultValue)}if(b.autoSearch){this.editComp.addClass("fr-search-auto-text")}else{this.editComp.addClass("fr-search-editor-text")}this.editComp.keyup(function(c){if(c.keyCode==FR.keyCode.ENTER){this.blur();if(b.onSearch){b.onSearch.apply(a,arguments)}}});this.editComp.focus(function(c){$(this).addClass("fr-search-editor-focus");
FR.applyFunc(a,b.onFocus,[c],false)}).blur(function(c){$(this).removeClass("fr-search-editor-focus");FR.applyFunc(a,b.onBlur,[c],false)}).keyup(function(c){if(c.keyCode==FR.keyCode.ENTER){this.blur();if(b.onSearch){FR.applyFunc(a,b.onSearch,[c],false)}}else{FR.applyFunc(a,b.onKeyup,[c],false)}})},_createTriggerBtn:function(){var a=this,b=this.options;if(!b.advanced){return}else{this.editComp.css({"border-right":"none"});$('<div class="fr-search-trigger"/>').hover(function(){$(this).addClass("fr-search-trigger-hover")
},function(){$(this).removeClass("fr-search-trigger-hover")}).click(function(){FR.applyFunc(a,b.onTrigger,arguments,false)}).appendTo(this.element)}},_createSearchBtn:function(d){var c=this.options,a=this;var b={renderEl:$("<div/>").appendTo(d),baseClass:"fr-search-button",width:44,height:28};if($.isFunction(c.onSearch)){b.handler=c.onSearch.createDelegate(a)}var e=new FR.IconButton(b);return e.element},getText:function(){return this.editComp.val()},setText:function(a){this.editComp.val(a)},getValue:function(){return this.getText()
},setValue:function(a){this.setText(a)},doResize:function(f){var d=this.options;var c=f.width,b=f.height;var e=8,a=4;if(d.autoSearch){e=27}else{c-=d.width4searchBtn}if(d.advanced){c-=24}if($.support.boxModel){c-=e;b-=a}this.editComp.css({height:b,width:c});if($.browser.msie){this.editComp.css("line-height",b+"px")}this.searchButton&&this.searchButton.width(d.width4searchBtn).height(d.height)}});$.shortcut("search",FR.Search);
FR.DataTable=FR.extend(FR.BaseEditor,{_init:function(){FR.DataTable.superclass._init.apply(this,arguments);var a=this.options;this.element.css("overflow","auto");this.table=$("<table/>").attr({cellspacing:"0",cellpadding:"0"});this.element.append(this.table);this.popuNewData(this.options.value)},initTableHead:function(f){if(!FR.isArray(f.head)){return}this.head=f.head;var e=$("<thead/>").addClass("fr-form-table-thead");var d=$("<tr>").addClass("fr-form-table-tr");e.append(d);for(var b=0,a=f.head.length;
b<a;b++){var c=$("<th/>").text(f.head[b]);if(f.columnWidth&&f.columnWidth[b]){c.css("width",f.columnWidth[b])}if(b==a-1){c.addClass("fr-form-table-last-th")}d.append(c)}this.table.append(e)},setTableHead:function(a){this.table.children("thead").empty();this.initTableHead(a)},popuNewData:function(c){this.setTableHead(c);this.table.children("tbody").empty();if(c.tablecontent){var d=c.tablecontent;for(var b=0,a=d.length;b<a;b++){this.addData(d[b],c.rowHeight)}}},updateDatas:function(){var c=[];var b=this.table.children("tbody").children("tr");
for(var e=0,a=b.length;e<a;e++){var g={};var f=$(b[e]).children();for(var d=0,h=f.length;d<h;d++){g[this.head[d]]=$(f[d]).text()}c.push(g)}return c},getValue:function(){return this.updateDatas()},setValue:function(a){this.popuNewData(a)},addData:function(g,c){if(!FR.isArray(g)){var b=[];b.push(g);g=b}var d=this;var f=$("<tr/>").addClass("fr-form-table-tr").click(function(){if(d.activedTR){d.activedTR.removeClass("fr-form-table-selectedtr")}$(this).addClass("fr-form-table-selectedtr");d.activedTR=$(this);
d.fireEvent(FR.Events.CLICK)});for(var e=0,a=g.length;e<a;e++){var h=$("<td/>").addClass("fr-form-table-td").append($("<pre>").css("white-space","pre-wrap").append(g[e]||""));h.css("height",c+1);f.append(h)}this.table.append(f);this.embellishTable()},embellishTable:function(){var a=this.table.children("tbody").children("tr");var b=this;$.each(a,function(d){$($(".fr-form-table-td",$(a[d]))[0]).addClass("fr-form-table-first-td");if(d===0&&b.table.children("thead").length===0){var c=$(".fr-form-table-td",a[d]);
$.each(c,function(e){$(c[e]).addClass("fr-form-table-top-td")})}if(d%2===0){$(a[d]).css({backgroundColor:"#EEEEEE"})}else{$(a[d]).addClass("fr-form-table-odd-tr")}})},getTable:function(){return this.table},getSelectedData:function(){if(!this.activedTR){return}else{var b={};var a=$("td",this.activedTR);if(this.head.length!=a.length){return}else{$.each(this.head,function(c,d){b[d]=$(a[c]).text()});return b}}},getSelectedIndex:function(){if(!this.activedTR){return -1}else{return this.activedTR[0].rowIndex-1
}}});$.shortcut("datatable",FR.DataTable);
(function(a){FR.SynchronBaseEditor=FR.extend(FR.BaseEditor,{_init:function(){FR.SynchronBaseEditor.superclass._init.apply(this,arguments);var b=this;this.once(FR.Events.DEFAULTINIT,function(){if(b.initFired){return}b.initFired=true;this.fireEvent(FR.Events.AFTERINIT)})}});a.extend(FR,{createTreeConfig4Widget:function(b){FR.$defaultImport("/com/fr/web/core/js/jquerytree/tree.js","js");FR.$defaultImport("/com/fr/web/core/js/jquerytree/common.js","js");if(b.options.widgetCss&&b.options.widgetCss.length!==0){a.each(b.options.widgetCss,function(d,e){FR.$import(e,"css",true)
})}var c={data:b.options.data,showcheck:b.options.mutiSelection,onnodeclick:function(e,f){var d=b.options.disableID;if(d){if(d==e.getID()){return}}b._onEnterPressed(this,f)},beforeSelectItemChange:function(){return b.fireEvent(FR.Events.BEFORESTATECHANGE)},flatStyle:false,widget:b,selectLeafOnly:b.options.selectLeafOnly,afterBuild:function(){return b.fireEvent(FR.Events.AFTERBUILD)},loadByLayer:b.options.loadByLayer};return c},parseString2Array4Tree:function(g,f){if(typeof g!="string"||FR.isEmpty(f)){return a.makeArray(g)
}var b=[];var e=f.options.nodeDelimiter||/[;；]/;var c=f.options.pathDelimiter||/[,，]/;if(g.indexOf(";")!=-1||g.indexOf("；")!=-1){b=g.split(e)}if(b.length>0){for(var d=0;d<b.length;d++){b[d]=b[d].split(c)}}else{if(g.indexOf(",")!=-1||g.indexOf("，")!=-1){b=g.split(c)}}if(FR.isEmptyArray(b)){return g.split(";")}return b},parseTo2DArray:function(b){if(!FR.isEmptyArray(b)&&!a.isArray(b[0])){var c=[];c[0]=b;return c}else{return b}},getTreeTrace:function(l,b,h,d){var g=[];var n=[];var k=false;for(var f=0;
f<b.length;f++){if(b[f].hasChild()&&d){continue}if(b[f].getValue()==l||b[f].getShowValue()==l){k=true;var c=b[f];g[0]=c.getValue();while(c.getParent()){c=c.getParent();g.push(c.getValue())}if(h===true){n.push(g.reverse())}else{return g.reverse()}}}for(var f=0;f<b.length;f++){if(b[f].ChildNodes||(b[f].data&&b[f].data.ChildNodes)){var m=FR.getTreeTrace(l,b[f].getChildren(),h,d);if(!FR.isEmptyArray(m)){k=true;if(h){for(var e=0;e<m.length;e++){n.push(m[e])}}else{return m}}}}if(k){return n}return[]},getValidTreeTrace:function(b,c,d){if(!FR.isArray(b)||FR.isEmptyArray(b)){return
}if(b.length===1){return FR.getTreeTrace(b[0],c,false,d)}else{return e(b,0,c)?b:null}function e(f,g,h){if(g>=f.length){return true}for(var j=0;j<h.length;j++){if(h[j].getValue()==f[g]){return e(f,g+1,h[j].getChildren())}else{if(h[j].getShowValue()==f[g]){f[g]=h[j].getValue();return e(f,g+1,h[j].getChildren())}}}return false}},setAllNodeState:function(b,d){for(var c=0;c<b.length;c++){b[c].setcheckstate(d);if(b[c].isLoadComplete()&&b[c].getChildrenLength()>0){FR.setAllNodeState(b[c].getChildren(),d)
}}},setNodeStateByInitValue:function(c,b,h,g){if(!FR.isArray(h)){return}for(var f=0;f<c.length;f++){if(c[f].getShowValue()==h[b]||c[f].getValue()==h[b]){if(!g){c[f].setcheckstate(1)}else{if(b==h.length-1&&!c[f].hasChild()){c[f].setcheckstate(1);return true}}var k=c[f].getChildren();if(FR.setNodeStateByInitValue(k,b+1,h,g)&&g){var e=true;for(var d=0;d<k.length;d++){if(k[d].getcheckstate()!==1){e=false;break}}c[f].setcheckstate(e?1:2);return true}}}},findSelectedNode:function(d,b,f,c){if(!FR.isArray(f)){return
}for(var e=0;e<d.length;e++){if(d[e].getShowValue()==f[b]||d[e].getValue()==f[b]){if(b==f.length-1){c.currentnode=d[e]}FR.findSelectedNode(d[e].getChildren(),b+1,f,c)}}},findTrueValue:function(d,c,f,b,g){if(!FR.isArray(f)){return}for(var e=0;e<d.length;e++){if(d[e].getValue()==f[c]){if(c==f.length-1){b.push(d[e].getTextPath(false));g.push(f);return}d=d[e].getChildren();FR.findTrueValue(d,c+1,f,b,g);return}}},getTreeValueResult:function(b,g,f){if(f){return b}else{if(b==null){return null}if(g){var d=[];
for(var c=0;c<b.length;c++){if(a.isArray(b[c])){var e=b[c];d[c]=e[e.length-1]}}return d}else{return b[b.length-1]}}}});FR.TreeEditor=FR.extend(FR.SynchronBaseEditor,{_defaultConfig:function(){return a.extend(FR.TreeEditor.superclass._defaultConfig.apply(),{width:120,height:200,limitData:300,delimiter:";"})},_init:function(){FR.TreeEditor.superclass._init.apply(this,arguments);this.initData();if(this.options.widgetName!=null){this.element.attr("id",this.options.widgetName)}if(this.options.width>-1){this.element.css("width",this.options.width)
}if(this.options.height>-1){this.element.css("height",this.options.height)}this.element.css("overflow","auto");this.options.data.resetStatus(this.allPara());if(this.options.value||this.options.value===0){this._dealValueWithEvents(this.options.value)}this._setCheckStateByDefaultValue()},initData:function(){if(this.options.data){return}if(this.options.rootLoader){this.options.data=new FR.TreeData({treeLoader:this.options.rootLoader})}else{if(this.options.widgetUrl){this.options.data=new FR.TreeData({url:this.options.widgetUrl})
}else{if(this.options.items){this.options.data=new FR.ItemTreeData({items:this.options.items})}}}if(this.options.controlAttr){var c=this.options.controlAttr.data||this.options.controlAttr.value;if(FR.isEmpty(c)||c==""){return}this._confirmEvents=function(){this.fireEvent(FR.Events.AFTERINIT)};var b={parameter:{dependence:this.getDependenceObj(),startIndex:0,limitIndex:this.options.limitData}};this.options.data.setData(b,c);delete this.options.controlAttr}},allPara:function(d,c){var b=this.createDependencePara4Data();
b.parameter.startIndex=d?d:0;b.parameter.limitIndex=c?c:this.options.limitData;return b},isComboBoxTree:function(){return false},_onEnterPressed:function(b){this.fireEvent(FR.Events.CLICK,b);this.fireEvent(FR.Events.AFTEREDIT)},getValue:function(){var b;if(!this.options.mutiSelection){b=this.element.getTCPValue()||this.value}else{b=this.element.getTCPValues()||this.value}return FR.getTreeValueResult(b,this.options.mutiSelection,this.options.returnFullPath)},setValue:function(j){var m=this;var d;if(typeof j==="string"){d=j.split(this.options.delimiter)
}else{d=a.makeArray(j)}if(!FR.isEmptyArray(d)){var c=this.options.data.getData();var e=[];for(var f=0;f<c.length;f++){e=e.concat(c[f].getLeafNode())}var g=[];for(var k=0;k<e.length;k++){var l=e[k];var h;if(a.isArray(d[0])&&m.options.mutiSelection){h=d.indexOf(l.getValuePath(false))!==-1}else{h=FR.equals(l.getValuePath(false),d)}if(h){l.setcheckstate(1);g.push(l);if(!m.options.mutiSelection){break}}else{l.setcheckstate(0)}}a.each(g,function(n,o){var i=o.getParent();while(i){i.setcheckstate(i.isAllChildrenChosen()?1:2);
i.setexpand(true);i=i.getParent()}});var b=FR.createTreeConfig4Widget(this);this._createTreeView(b)}},_dealValueWithEvents:function(h){var e=this.options.mutiSelection?[]:"";if(typeof h==="string"){var f=h.split(this.options.delimiter)}else{var f=a.makeArray(h)}var d=this;var c=[];var g=[];if(!this.options.mutiSelection){FR.findTrueValue(this.options.data.getData(),0,f,c,g)}else{f=FR.parseTo2DArray(f);for(var b=0;b<f.length;b++){FR.findTrueValue(this.options.data.getData(),0,a.isArray(f[b])?f[b]:f[b].split(","),c,g)
}}if(c.length!==0){this.value=this.options.mutiSelection?g:g[0]}else{this.value=f}leafNodes=nodes=null;if(e!=h){this.options.need2BuildList=true}},_setCheckStateByDefaultValue:function(){var e=this;var g=this.options.value?this.options.value:[];var d=FR.createTreeConfig4Widget(this);var f=function(j){if(!a.isArray(j)){return}if(!FR.isEmptyArray(j)){for(var h=0;h<j.length;h++){if(a.isArray(j[h])){j[h]=j[h].toString()}}}};if(!FR.isEmptyArray(g)){var c=this.options.data.getData();if(!FR.isArray(g)){g=FR.getTreeTrace(g,c,e.options.mutiSelection,e.options.selectLeafOnly)
}if(e.options.mutiSelection){g=FR.parseTo2DArray(g);f(g);FR.setAllNodeState(c,0);for(var b=0;b<g.length;b++){FR.setNodeStateByInitValue(c,0,g[b].split(","),e.options.selectLeafOnly)}}else{FR.findSelectedNode(c,0,g,d)}}this._createTreeView(d)},reset:function(){this.setValue("");var c=this.options.data.getData();FR.setAllNodeState(c,0);var b=FR.createTreeConfig4Widget(this);this._createTreeView(b)},doResize:function(b){FR.TreeEditor.superclass.doResize.call(this,b)},_createTreeView:function(b){this.element.treeview(b)
}});a.shortcut("tree",FR.TreeEditor);FR.ListEditor=FR.extend(FR.SynchronBaseEditor,{_defaultConfig:function(){return a.extend(FR.ListEditor.superclass._defaultConfig.apply(),{width:120,height:200,icon:false,multi:false,removeSelf:false,textAlign:"left"})},_init:function(){FR.ListEditor.superclass._init.apply(this,arguments);this.initData();this._initList();var b=this;this.options.data.once(FR.Events.AFTERREAD,function(){b.fireEvent(FR.Events.DEFAULTINIT)})},initData:function(){if(this.options.data){return
}if(this.options.controlAttr){this.setSource(this.options.controlAttr);this._confirmEvents=function(){this.fireEvent(FR.Events.AFTERINIT)};return}if(this.options.widgetUrl){this.options.data=FR.DataFactory.createSynchronJSONData(this.options.widgetUrl,false)}else{if(this.options.items){this.options.data=FR.DataFactory.createSynchronArrayData(this.options.items)}}},refreshList:function(){if(this.options.controlAttr&&this.options.widgetUrl){this.options.controlAttr=null;this.options.data=FR.DataFactory.createSynchronJSONData(this.options.widgetUrl,false)
}this.jlist({needHead:this.options.needHead})},setSource:function(c){var b=this;if(c.value!==undefined&&c.value!==""){this.once(FR.Events.DEFAULTINIT,function(){b.setValue(c.value,false)})}this.options.data=FR.DataFactory.createSynchronArrayData(c.data)},_initList:function(){FR.$defaultImport("/com/fr/fs/web/platform/js/jquery.jlist.js","js");var b=this.options;if(b.width>-1){this.element.css("width",b.width)}if(b.height>-1){this.element.css("height",b.height)}if(b.textAlign){this.element.css("text-align",b.textAlign)
}this.jlist({needHead:b.needHead})},getValue:function(){var b=this.getSelectedItem();return b!=null?b.getValue():null},_dealValueWithEvents:function(h,d){var g=this.getSelectedText(),f=this.options.data;for(var c=0,b=f.getLength();c<b;c++){var e=this.options.data.getRecord(c);if(d&&(d.getShowValue()==e.getShowValue())){e.setValue(h);break}}},getSelectedText:function(){var b=this.getSelectedItem();return b!=null?b.getShowValue():null},addItem:function(b){this.doAddItem(b)},getAll:function(){var d=[],e=this.options.data;
for(var c=0,b=e.getLength();c<b;c++){var f=e.getRecord(c);d.push({text:f.getShowValue(),value:f.getValue()!=null?f.getValue():f.getShowValue()})}return d},setAll:function(c){var b=this;a.each(c,function(e,f){var d=FR.DataFactory.createItemRecord({text:e,value:f});b.doAddItem(d,true);b.options.data.addRecord(d)})},clear:function(){this.doClear()},clearSelected:function(){a(".fr-list-node",this.element).removeClass("fr-list-node-selected");this.fireEvent(FR.Events.NOSELECT)},doFilter:function(c){var b=a(".fr-list-node",this.element);
if(c||c===0){c=c.toUpperCase();a.each(b,function(d,e){var f=a("a > span",a(this)).html();if(f.toUpperCase().indexOf(c)>-1){a(this).show()}else{a(this).hide()}})}else{b.show()}},popData:function(b){this.doClear();this.options.data=new FR.SynchronData({dataSource:new FR.SynchronObjectSource({object:b})});this.jlist();if(this.getSelectedIndex()<0){this.fireEvent(FR.Events.NOSELECT)}},setSelectedIndex:function(c){var d=a("ul.fr-list-content",this.element);var b=a("li",d);if(!b){this.fireEvent(FR.Events.NOSELECT)
}this.doSelected(null,a(b[c]))}});a.shortcut("list",FR.ListEditor);FR.ToggleButtonGroup=FR.extend(FR.SynchronBaseEditor,{_defaultConfig:function(){return a.extend(FR.ToggleButtonGroup.superclass._defaultConfig.apply(),{columnsInRow:0})},_init:function(){FR.ToggleButtonGroup.superclass._init.apply(this,arguments);var e=this.options;var f;var d;if(e.border){d=e.border.b||e.border.t;f=e.border.l||e.border.r;if(e.border.b1){e.height=e.height-1;e.width=e.width-1}else{if(d){e.height=e.height-vgap.w}else{if(f){e.width=e.width-hgap.w
}}}}var c=e.width>0?e.width:0;var b=e.height>0?e.height:0;this.$container=this.element.addClass("fr-form-btn-group");this.$container.css({width:c,height:b}).addClass(this.lbox_class);this.buttonArray=[];if(FR.Browser.isIE8Before()&&!a.support.boxModel&&b===0){this.$container.css({height:1,overflow:"hidden"})}if(e.value!=null){this.once(FR.Events.DEFAULTINIT,function(){this.setValue(e.value,false)})}this.initData()},initData:function(){if(this.options.data){return}if(this.options.controlAttr){this.setSource(this.options.controlAttr);
this._confirmEvents=function(){this.fireEvent(FR.Events.AFTERINIT)};return}if(this.options.widgetUrl){this.options.data=FR.DataFactory.createSynchronJSONData(this.options.widgetUrl,false);this.options.data.resetStatus(this.createDependencePara4Data())}else{if(this.options.items){this.options.data=FR.DataFactory.createSynchronArrayData(this.options.items)}}var b=this;this.options.data.afterRead(function(c){if(b.isBoxBuild!==true){b._buildBox(c)}});this.options.data.loadData()},setSource:function(c){var b=this;
if(c.value!==undefined&&c.value!=""){this.once(FR.Events.DEFAULTINIT,function(){b.setValue(c.value,false)})}this.options.data=FR.DataFactory.createSynchronArrayData(c.data);this.options.data.afterRead(function(d){b._buildBox(d)});this.options.data.loadData()},reset:function(){this.setValue(null);this.isBoxBuild=undefined;if(this.options.data.resetStatus(this.createDependencePara4Data())){this.options.data.loadData()}},rebuild:function(b){this.setValue(null);this.options.data=null;this.options.widgetUrl=null;
this.element.empty();this.options.items=b;this.isBoxBuild=undefined;if(b.widgetUrl){this.options.widgetUrl=b.widgetUrl}if(!this.options.renderEl){this.options.renderEl=this.element}this._init()},clearContent:function(){this.$container.empty()},_buildBox:function(){this.clearContent();var b=this.options.data.getRecords();this._initGridConfig(b);this._setItems(b);this.isBoxBuild=true;this.fireEvent(FR.Events.DEFAULTINIT)},_initGridConfig:function(c){var b=c.length+(this.options.chooseAll===true?1:0),d=this.options.columnsInRow,e=d===0?1:1+Math.floor((b-0.1)/d);
this.gridConfig={columns:d===0||e===0?b:d,rows:e,items:[],renderEl:this.$container};return this.gridConfig},setEnable:function(b){if(this.buttonArray){for(var c=0;c<this.buttonArray.length;c++){this.buttonArray[c].setEnable(b)}}FR.ToggleButtonGroup.superclass.setEnable.apply(this,arguments)},getErrorMessage:function(){return this.options.errorMsg||FR.i18nText("FR-Base_NOT_NULL_Des")},doResize:function(b){FR.ToggleButtonGroup.superclass.doResize.call(this,b);this.$container.css({width:b.width,height:b.height});
if(this.grid){this.grid.doLayout();this._checkTable()}},_checkTable:function(){if(this.$container.parent()[0]&&this.$container.parent()[0].tagName=="TD"){this.$container.css("position","relative")}}});a.shortcut("togglebuttongroup",FR.ToggleButtonGroup);FR.TableTree=FR.extend(FR.BaseEditor,{_defaultConfig:function(){return a.extend(FR.TableTree.superclass._defaultConfig.apply(),{width:120,height:200})},_init:function(){FR.TableTree.superclass._init.apply(this,arguments);FR.$defaultImport("/com/fr/web/platform/js/jquery.tabletree.js","js");
FR.$defaultImport("/com/fr/web/platform/css/jquery.tabletree.css","css");var d=this.options;this.$TableTreeDiv=this.element;if(d.width>-1){this.$TableTreeDiv.css("width",d.width)}if(d.height>-1){this.$TableTreeDiv.css("height",d.height)}var c;if(!this.options.data){this.options.data=new FR.Data({dataSource:new FR.URLSource({url:this.options.widgetUrl}),dataReader:new FR.DataReader({choosedFields:["name","state"]})})}if(this.options.rootLoader){this.options.treedata=new FR.TreeData({treeLoader:this.options.rootLoader})
}else{if(this.options.url){this.options.treedata=new FR.TreeData({url:this.options.url})}else{return}}var b={data:this.options.treedata.getData(),cvns:this.options.data.getData(),treedatatype:this.options.treedatatype,width:this.options.width,height:this.options.height,needleaficon:this.options.needleaficon,oncheckboxclick:this.options.oncheckboxclick};this.$TableTreeDiv.tabletree(b)},getValue:function(){return this.$TableTreeDiv.getTableTreeValue()},_setValue:function(b){this.$TableTreeDiv.setTableTreeValue(b)
}});a.shortcut("tabletree",FR.TableTree)})(jQuery);
(function(a){FR.Composite=FR.extend(FR.Widget,{type:"composite",_defaultConfig:function(){return a.extend(FR.Composite.superclass._defaultConfig.apply(),{innerWidget:{}})},_init:function(){FR.Composite.superclass._init.apply(this,arguments);var c=this.options.innerWidget;c.renderEl=a("<div>").appendTo(a("body"));var b=FR.createWidget(c);if(b.element.data("jlayout")){b.doResize(b.element.data("jlayout").preferred(this.element))}b.doLayout();b.element.css({position:""});c.renderEl.appendTo(this.element.css({position:"relative"}))
}});a.shortcut("composite",FR.Composite);FR.Toolbar=FR.extend(FR.Widget,{type:"toolbar",_defaultConfig:function(){return a.extend(FR.Toolbar.superclass._defaultConfig.apply(),{baseCls:"x-toolbar",items:[]})},_init:function(){FR.Toolbar.superclass._init.apply(this,arguments);var j=this.options;var b=28;this.element.addClass(j.baseCls);this.element.css("height",b);if(j.toolbarbg){var f=j.toolbarbg;var h=this.element;FR.setBackground(h,f,h.height())}this.$tr=a("<tr>");this.$tr.appendTo(a("<tbody>").appendTo(a("<table cellspacing=0>").css({height:b,"vertical-align":"center"}).appendTo(this.element)));
if(j.toolbarbg&&(j.toolbarbg.type===4||j.toolbarbg.type===2)&&FR.Browser.isIE()&&FR.ieForFixBackground()){this.$tr.css({position:"absolute",top:"0px"})}var e=[];if(j.items!=null){if(!FR.isArray(j.items)){j.items=[j.items]}for(var d=0;d<j.items.length;d++){if(d>0){this.addSep()}var g=j.items[d];var c=FR.createWidget(g);e.push(c);if(g.widgetName){this[g.widgetName.toLowerCase()]=c}this.addJQuery(c.element)}j.items=e}},getWidgetByName:function(d){var c=this.options.items;for(var e=0,b=c.length;e<b;e++){var g=c[e];
var f=g.options.widgetName;if(f&&d&&f.toUpperCase()===d.toUpperCase()){return g}}},addJQuery:function(c){if(FR.Browser.isIE()&&!a.support.boxModel){this.element.css("overflow","hidden")}if(c!=null){var b=a("<td>").append(c);this.$tr.append(b)}},addSep:function(){this.addJQuery("<span class='sep'> </span>")}});a.shortcut("toolbar",FR.Toolbar);FR.MenuButton=FR.extend(FR.Button,{_init:function(){FR.MenuButton.superclass._init.apply(this,arguments);if(this.$em){this.$em.addClass("fr-btn-arrow")}var b=this.options.menu;
if(FR.isArray(b)){this.on("click",function(){FR.showMenuByEl({destroyOnClose:true,items:b,minWidth:175,xxxfixclientH:this.options.istoolbarmenu?true:false},this.element)}.createDelegate(this));if(this.$table){this.$table.mouseleave(function(d){if(this.fr_menu){var c={x:this.fr_menu.menu.$menuRoot.offset().left,y:this.fr_menu.menu.$menuRoot.offset().top-1,width:this.fr_menu.menu.$menuRoot.bounds().width,height:this.fr_menu.menu.$menuRoot.bounds().height};if(d.clientY<c.y||d.clientY>c.y+c.height||d.clientX<c.x||d.clientX>c.x+c.width){this.fr_menu.menu.close()
}}}.createDelegate(this.element))}}}});a.shortcut("menubutton",FR.MenuButton)})(jQuery);
(function(a){FR.TextEditor=FR.extend(FR.EditComp,{_defaultConfig:function(){return a.extend(FR.TextEditor.superclass._defaultConfig.apply(),{autoVerify:true})},isValidateInput:function(b){return !FR.isSpecialKey(b)},_dealValueWithEvents:function(c){var b=this.getValue();this.editComp.val(c);if(arguments[1]!==false){this.fireEvent(FR.Events.CHANGE,c,b);this.fireEvent(FR.Events.AFTEREDIT)}},recoveryValue:function(){this.editComp.val(this.options.oldValue)},select:function(){if(this.editComp.select){this.editComp.select()
}},getValue:function(){return this.editComp.val()},doResize:function(b){FR.TextEditor.superclass.doResize.call(this,b)}});a.shortcut("text",FR.TextEditor);FR.Password=FR.extend(FR.TextEditor,{_defaultConfig:function(){return a.extend(FR.TextEditor.superclass._defaultConfig.apply(),{passwordText:true})},getValue:function(){var b=FR.Password.superclass.getValue.apply(this,arguments);b.encryption=true;return b},_createEditComp:function(){return a('<input type="password"/>')}});a.shortcut("password",FR.Password);
FR.TextArea=FR.extend(FR.TextEditor,{_defaultConfig:function(){return a.extend(FR.TextEditor.superclass._defaultConfig.apply(),{multiline:true})},_init:function(){FR.TextArea.superclass._init.apply(this,arguments);var c=this.options,b=this;if(c.multiline===true){this.editComp.keydown(function(h){if(b.options.write&&FR.keyCode.UP==h.keyCode||FR.keyCode.DOWN==h.keyCode){h.stopPropagation();return}if(h.keyCode===13){if(b.options.form){b.fireEvent(FR.Events.AFTEREDIT);h.stopPropagation()}}var g=this;
if(h.ctrlKey&&h.keyCode===13){h.ctrlKey=false;var i=g.value;var f=a("."+c.cls,b.element).eq(0)[0];if(typeof f.selectionStart=="number"&&typeof f.selectionEnd=="number"){var j=f.selectionStart;g.value=i.slice(0,j)+"\n"+i.slice(f.selectionEnd);f.selectionStart=f.selectionEnd=j+1}else{if(document.selection&&document.selection.createRange){this.focus();var d=document.selection.createRange();d.text="\r\n";d.collapse(false);d.select()}}b.fireEvent(FR.Events.AFTEREDIT)}});if(!jQuery.support.boxModel||FR.Browser.r.gecko){this.editComp.css({"white-space":"normal"})
}}},_createEditComp:function(){return a("<textarea style='overflow-y:auto;resize:none'></textarea>")},isValidateInput:function(b){return FR.TextArea.superclass.isValidateInput.call(this,b)||(b.keyCode===13&&this.options.form)},doResize:function(b){FR.TextEditor.superclass.doResize.call(this,b)}});a.shortcut("textarea",FR.TextArea)})(jQuery);
(function(a){FR.IframeEditor=FR.extend(FR.BaseEditor,{_defaultConfig:function(){return a.extend(FR.IframeEditor.superclass._defaultConfig.apply(),{baseName:"fr_iframe",baseClass:"fr_iframeeditor",widgetName:"",src:"",width:"100%",height:"100%",showOverFlowX:true,showOverFlowY:true})},_init:function(){FR.IframeEditor.superclass._init.apply(this,arguments);this.initData();var b=this.options;this.editComp=this.element.css({width:"100%",height:"100%"});b.iframeName=b.widgetName||this.createNoRepeatName();
this.$iframe=a("<iframe  name="+b.iframeName+" id="+b.iframeName+">").css({width:b.width,height:b.height}).addClass(b.baseClass).attr({frameborder:0,scrolling:!b.showOverFlowX&&!b.showOverFlowY?"no":"yes"}).appendTo(this.editComp);this.$iframe[0].onload=function(){if(!b.showOverFlowX||!b.showOverFlowY){try{if(this.contentWindow){var f=this.contentWindow.document;var g=a(".content-container",a(f));if(g.length>0){c(g)}else{c(a(f.documentElement));c(a(f.body))}function c(e){if(!b.showOverFlowX){e.css("overflow-x","hidden")
}if(!b.showOverFlowY){e.css("overflow-y","hidden")}}}}catch(d){console&&console.log("error")}}};if(a.browser.msie&&(this.$iframe.parent()).is("div")&&(this.$iframe.parent().parent()).is("td")&&(this.$iframe.parent().parent().attr("widget"))!=null&&(this.$iframe.parent().parent().parent()).is("tr")){this.$iframe.parent().height("")}else{this.$iframe.css("overflow-x",b.showOverFlowX?"auto":"hidden");this.$iframe.css("overflow-y",b.showOverFlowY?"auto":"hidden")}if(b.controlAttr){this.setValue(b.controlAttr)
}else{if(b.src){this._loadIframeByGet()}}if(b.disabled){this._addDisableMask()}},createNoRepeatName:function(){var b=a("iframe"+this.options.baseClass).length;while(a("iframe[name="+this.options.baseName+b+"]").length!==0){b++}return this.options.baseName+b},_loadIframeByGet:function(){var b=this.options.src,h=this;if(this.options.data){var j=[];for(var e=0,f=this.options.data.getLength();e<f;e++){var d=this.options.data.getRecord(e).getContent();if(typeof d=="object"&&d.widgetName&&this.options.form){var g=this.options.form.getWidgetByName(d.widgetName);
if(g){var k={};k[d.widgetName]=g.getValue();b=b.appendQuery(k)}else{j.push(d.widgetName)}}else{b=b.appendQuery(d)}}if(j.length>1){var c=this.options.form;c.on(FR.Events.AFTERINIT,function(){for(var m=0;m<j.length;m++){var l=j[m];var i={};i[l]=c.getWidgetByName(l).getValue();b=b.appendQuery(i)}h._changeIframe(b)})}}this._changeIframe(b)},_addDisableMask:function(){this.mask=a("<span/>").css({backgroundColor:"#66B9FF",height:this.options.height,width:this.options.width,left:this.element.offset().left}).appendTo(this.element)
},getValue:function(){return this.$iframe.attr("src")},_dealValueWithEvents:function(b){this.options.src=b;this._changeIframe(b)},_changeIframe:function(b){this.$iframe.attr("src",b)},setEnable:function(b){FR.IframeEditor.superclass.setEnable.apply(this,arguments);if(b){if(this.mask){this.mask.remove()}}else{if(this.mask){this.mask.show()}else{this._addDisableMask()}}},doResize:function(b){FR.IframeEditor.superclass.doResize.apply(this,arguments);if(this.submitForm){this.submitForm.submit()}},reset:function(){this.options.data.clearData();
this._loadIframeByGet()}});a.shortcut("iframe",FR.IframeEditor)})(jQuery);
(function(a){FR.Label=FR.extend(FR.BaseEditor,{_defaultConfig:function(){return a.extend(FR.Label.superclass._defaultConfig.apply(),{cls:"fr-label",wrap:true,width:120,height:24})},_init:function(){FR.Label.superclass._init.apply(this,arguments);this.element.css("overflow","hidden");var c=this.options;this.labelComp=a("<pre/>").addClass(c.cls);this.textContainer=a('<table cellpadding="0" cellspacing="0"/>');this.textContainer.css({"table-layout":"fixed",width:this.options.width,height:this.options.height,"-webkit-text-size-adjust":"none"}).append(a("<tr/>").append(a("<td/>").append(this.labelComp))).appendTo(this.element);
var b=this;this.labelComp.click(function(){if(b.isEnabled()){b.fireEvent(FR.Events.CLICK)}});if(this._getEvents().click){this.labelComp.addClass("fr-widget-click")}if(c.fontsize){this.labelComp.css("font-size",c.fontsize)}if(c.color){this.labelComp.css("color",c.color)}if(c.decoration){this.labelComp.css("text-decoration",c.decoration)}if(c.lineheight){this.labelComp.css("line-height",c.lineheight+"px")}if(c.textalign){this.labelComp.css("text-align",c.textalign)}if(c.fontfamily){this.labelComp.css("font-family",c.fontfamily)
}if(c.fontweight){this.labelComp.css("font-weight",c.fontweight)}if(c.fontstyle){this.labelComp.css("font-style",c.fontstyle)}if(c.border===true){this.labelComp.css({border:"1px solid #AAAAAA"})}if(c.widgetBackground){if(FR.Browser.isIE8Before()){this.textContainer.css("position","absolute")}FR.setBackground(this.element,c.widgetBackground,this.element.height())}if(c.borderStyle){this.element.css("border-style",c.borderStyle.type);this.element.css("border-color",c.borderStyle.color);this.element.css("border-width",c.borderStyle.width);
this.element.css("border-bottom-width",0)}if(c.width>-1){this.element.css({width:c.width})}if(c.height>-1){this.element.css({height:c.height})}if(c.title){this.labelComp.attr("title",c.title)}if(c.id){this.labelComp.attr("id",c.id)}if(c.wrap){this.labelComp.css("word-wrap","break-word").css("white-space","pre-wrap")}else{if(!FR.Browser.isIE()){this.labelComp.css("white-space","pre")}else{this.labelComp.css("white-space","pre-wrap").css("word-break","keep-all")}}if(c.value!=null){this.setValue(c.value)
}},setValue:function(c){var b=this.getValue();this.options.value=c;if(FR.Browser.isIE()){this.labelComp[0].innerText=c||""}else{this.labelComp.text(c)}if(arguments[1]!==false){this.fireEvent(FR.Events.CHANGE,c,b)}},getValue:function(){return this.options.value},doResize:function(b){FR.Label.superclass.doResize.call(this,b);this.textContainer.css({width:b.width,height:b.height});this.labelComp.css({width:b.width});if(!this.options.verticalcenter){this.labelComp.css("height",b.height+"px")}}});a.shortcut("label",FR.Label)
})(jQuery);
(function(a){FR.NumberEditor=FR.extend(FR.EditComp,{_defaultConfig:function(){return a.extend(FR.NumberEditor.superclass._defaultConfig.apply(),{allowDecimals:true,allowNegative:true,decimalPrecision:-1,autoVerify:true,decimalSeparator:"."})},_init:function(){FR.NumberEditor.superclass._init.apply(this,arguments);var d=this.options;var c="0123456789";this.allowed=c+"";if(d.allowDecimals){this.allowed+="."}if(d.allowNegative){this.allowed+="-"}this.editComp.css("ime-mode","disabled");var b=this;this.editComp.blur(function(){if("."==b.editComp.val().charAt(0)){b.editComp.val("0"+b.editComp.val())
}}).keydown(function(f){if(f.keyCode==FR.keyCode.ENTER&&!b.options.write){f.stopPropagation()}}).keypress(function(g){var f=g.keyCode;if(!a.browser.msie&&(FR.isNavKeyPress(g)||FR.isSpecialKey(g)||f==FR.keyCode.BACKSPACE)){return}var i=g.charCode||g.keyCode;var h=String.fromCharCode(i);if(a.browser.msie&&(i===27||i===13)){return}if(b.allowed.indexOf(h)===-1){g.preventDefault()}if(this.value.indexOf(".")>-1&&h=="."){g.preventDefault()}})},isValidateInput:function(b){var f=b.charCode||b.keyCode;if(f==FR.keyCode.BACKSPACE||f==FR.keyCode.ENTER){return true
}if(f>=96&&f<=105){f=f-48}var d=String.fromCharCode(f);if(f===190||f===110){d="."}return(this.allowed.indexOf(d)>-1)&&(d!="."||(this.editComp.val().substr(0,this.editComp.val().length-1)).indexOf(".")===-1)},_dealValueWithEvents:function(d){var c=this.getValue();var b;if(typeof c=="string"&&c!=""){b=c}else{b=String(d)}this.editComp.val(b.replace(".",this.options.decimalSeparator));if(arguments[1]!==false){this.fireEvent(FR.Events.CHANGE,d,c)}},_fixPrecision:function(c){var b=isNaN(c);if(!this.options.allowDecimals||this.options.decimalPrecision==-1||b||!c){return b?"":c
}return parseFloat(parseFloat(c).toFixed(this.options.decimalPrecision))},_parseValue:function(b){b=parseFloat(String(b).replace(this.options.decimalSeparator,"."));return isNaN(b)?"":b},getValue:function(){var b=this.editComp.val();if(b.length>17){return b}return this._fixPrecision(this._parseValue(b))},verifyDedimals:function(){if(typeof this.editComp.reg=="undefined"){this.editComp.reg=(this.options.allowNegative?"-?":"")+"\\d+"+(this.options.allowDecimals?("(\\.\\d{0,"+this.options.maxDecLength+"})?"):"")
}var c=new RegExp(this.editComp.reg);var b=c.exec(this.editComp.val());if(b!=null){return b[0]}return""},recoveryValue:function(){this.editComp.val(isNaN(this.options.oldValue)?"":String(this.options.oldValue).replace(".",this.options.decimalSeparator))},isValidate:function(b){var d=b!=null&&b!=undefined?b:this.editComp.val();if(b&&this.options.isEditable&&(""+b).indexOf(",")!=-1){d=d.replace(/,/g,"")}if(d==null||d==undefined||d===""){if(this.options.allowBlank!==false){return true}else{this.errorMsg=this.options.errorMsg||FR.i18nText("FR-Base_NOT_NULL_Des");
return false}}d=(""+d).replace(this.options.decimalSeparator,".");if(isNaN(d)){this.errorMsg=this.options.regErrorMsg||FR.i18nText("Err-The_value_must_be_number");return false}var e=d;var c=new FR.BigDecimal({numStr:e});if(e.indexOf(this.options.decimalSeparator)>0){if(!this.options.allowDecimals){this.errorMsg=this.options.regErrorMsg||FR.i18nText("Err-The_value_must_be_integer");return false}else{if(e.length-e.indexOf(this.options.decimalSeparator)>this.options.maxDecLength+1){this.errorMsg=this.options.regErrorMsg||FR.i18nText("FR-Base_DecimalNumber_Out");
return false}}}if(!this.options.allowNegative&&!c.isPositive()){this.errorMsg=this.options.regErrorMsg||FR.i18nText("FR-Report_Invalid_Cell");return false}if(this.options.minValue!=null&&c.lessThan(new FR.BigDecimal({numStr:String(this.options.minValue)}))){this.errorMsg=this.options.regErrorMsg||FR.i18nText("Err-The_number_is_less_than_the_minimum_value")+this.options.minValue;return false}if(this.options.maxValue!=null&&c.greaterThan(new FR.BigDecimal({numStr:String(this.options.maxValue)}))){this.errorMsg=this.options.regErrorMsg||FR.i18nText("Err-The_number_is_larger_than_the_maximum_value")+this.options.maxValue;
return false}return true},doResize:function(b){FR.NumberEditor.superclass.doResize.call(this,b)}});a.shortcut("number",FR.NumberEditor);FR.BigDecimal=function(b){this.options=a.extend({numStr:"",decimalSeparator:"."},b);var g=this.options;var f=g.numStr;this.positive=true;this.intArray=[];this.decArray=[];if(f.indexOf("e")!==-1||f.indexOf("E")!==-1){}var d=0;var e=true;if(f.charAt(0).match(/[-+]/)){this.positive=f.charAt(0)=="+";d++}for(;d<f.length;d++){var h=f.charAt(d);if(h==g.decimalSeparator){e=false;
continue}if(e){this.intArray.push(h)}else{this.decArray.push(h)}}};a.extend(FR.BigDecimal.prototype,{isPositive:function(){return this.positive},equalsTo:function(b){return this.compareTo(b)===0},greaterThan:function(b){return this.compareTo(b)===1},lessThan:function(b){return this.compareTo(b)===-1},compareTo:function(c){if(c==null){return null}if(this.isPositive()&&!c.isPositive()){return 1}if(!this.isPositive()&&c.isPositive()){return -1}var f=0;var b=this.intArray;if(b.length>c.intArray.length){f=1
}else{if(b.length<c.intArray.length){f=-1}else{for(var e=0;e<b.length;e++){if(b[e]>c.intArray[e]){f=1;break}else{if(b[e]<c.intArray[e]){f=-1;break}}}if(f===0){var h=this.decArray;var g=Math.min(h.length,c.decArray.length);for(var d=0;d<g;d++){if(h[d]>c.decArray[d]){f=1;break}else{if(h[d]<c.decArray[d]){f=-1;break}}}if(f===0){if(h[g]!=null){f=1}else{if(c.decArray[g]!=null){f=-1}}}}}}return this.isPositive()?f:-f}})})(jQuery);
(function(a){FR.TriggerEditor=FR.extend(FR.EditCompBaseEditor,{_defaultConfig:function(){return a.extend(FR.TriggerEditor.superclass._defaultConfig.apply(),{baseCls:"fr-trigger-editor",btn_up:"fr-trigger-btn-up",btn_down:"fr-trigger-btn-down",btn_over:"fr-trigger-btn-over",text_focus:"fr-trigger-text-focus",width:100,height:22})},_init:function(){FR.TriggerEditor.superclass._init.apply(this,arguments);this.initData();this.addContent2Element();this.validateCss()},addContent2Element:function(){var b=this.options;
this.element.addClass(b.baseCls);this.triggerTextComp=this.createTextComp();this._createTextComp();b.width=(b.width>-1)?b.width:this.triggerTextComp.width();b.height=(b.height>-1)?b.height:this.triggerTextComp.height();this._createTriggerBtn();this.arrow=a("<div/>").addClass("fr-trigger-center");this._createStyle4TriggerBtn();var c=a.support.boxModel?this.btn.outerWidth():this.btn.width();this.btnWidth=c>18?c:18+this.fixbtnWidthValue();this.doResize(b);if(b.value||b.value===0){this._dealValueWithEvents(b.value,false)
}if(b.isEditable){this.dealWithDisplayValue(b.showValue)}this._initViewContainer()},createTextComp:function(){return a("<div class='fr-trigger-text'></div>").appendTo(this.element)},getArrowIconHeight:function(){return 7},_createTextComp:function(){var c=this.options,b=this;this.editComp=a("<input type='text'/>").addClass("fr-trigger-texteditor").appendTo(this.triggerTextComp);this.editComp.blur(function(){b.editComp.removeClass("fr-trigger-texteditor-focus");b.triggerTextComp.removeClass(b.options.text_focus);
b._editCompBlur();if(b._canCancelSearch()&&!FR.isEmpty(b.searchText)&&b.searchCancel!==false){b.searchCancel=true;b.editComp.val("");b.setValue(b.originalValue,false)}else{if(jQuery.isFunction(b.isExpanded)&&b.isExpanded()){return}if(b.editComp&&b.editComp[0]==document.activeElement){return}b._editCompBlurValidValue();if(!b.options.write){b.fireEvent(FR.Events.STOPEDIT)}}}).focus(function(){b.editComp.addClass("fr-trigger-texteditor-focus");b.triggerTextComp.addClass(b.options.text_focus);if(b.originalValue==null){b.originalValue=b.getValue()
}if(!b.options.write){b.fireEvent(FR.Events.BEFOREEDIT)}b._editCompFocus()});if(c.fontSize){this.editComp.css("font-size",c.fontSize)}if(c.directEdit!==true){this.editComp.attr("readonly",true)}if(c.disabled===true){this.editComp.attr("disabled","disabled")}this.editComp.__bind__("keydown",this,this._onKeyDown)},_createTriggerBtn:function(){var b=this;var c=this.onTriggerClick.createDelegate(this);this.btn=a("<div/>").addClass(b.options.btn_up).appendTo(this.element);var d={onMouSeenter:function(f){if(!b.options.disabled){b.btn.switchClass(b.options.btn_over)
}},onMouseLeave:function(f){if(!b.options.disabled){b.btn.switchClass(b.options.btn_up)}},onMouseDown:function(f){if(!b.options.disabled){b.btn.switchClass(b.options.btn_down)}},onMouseUp:function(f){if(!b.options.disabled){b.btn.switchClass(b.options.btn_over);c()}}};this.btn.mouseenter(d.onMouSeenter).mouseleave(d.onMouseLeave).mouseup(d.onMouseUp).mousedown(d.onMouseDown)},isExpanded:function(){return this.$view&&this.$view.is(":visible")},collapseIf:function(c){var b=c.data;if(c.pageX==null||((c.pageX<b.$view.offset().left||c.pageX>b.$view.offset().left+b.$view.width()||c.pageY<b.$view.offset().top||c.pageY>b.$view.offset().top+b.$view.height())&&(c.pageX<b.btn.offset().left||c.pageX>b.btn.offset().left+b.btn[0].offsetWidth||c.pageY<b.btn.offset().top||c.pageY>b.btn.offset().top+b.btn[0].offsetHeight))){b.collapse()
}},collapse:function(){if(!this.isExpanded()){return}this.$view.hide();a(document).unbind("mousedown",this.collapseIf).unbind("mousewheel",this.collapseIf);if(this.options.write&&this.options.write.lgp){this.options.write.lgp.$container.unbind("scroll",this.collapseIf)}this.editComp.focus();this.focusIndex=undefined;this.fireEvent(FR.Events.COLLAPSE)},_canCancelSearch:function(){return false},_editCompBlurValidValue:function(){this.checkValid()},_editCompFocus:function(){},_editCompBlur:function(){},_initViewContainer:function(){if(!FR.$view_container){FR.$view_container=a("<div class='view-container'/>").appendTo("body")
}},_createStyle4TriggerBtn:function(){this.arrow.appendTo(this.btn)},setEnable:function(b){FR.TriggerEditor.superclass.setEnable.apply(this,arguments);if(this.editComp){if(b===true){this.editComp.removeAttr("disabled")}else{if(b===false){this.editComp.attr("disabled","disabled")}}}},modifyPosition:function(){var f=this.options.offset!=null&&this.triggerTextComp.offset().top===0&&this.triggerTextComp.offset().left===0;var g=Math.max(parseInt(f?this.options.offset.top:this.triggerTextComp.offset().top),0);
var c=Math.max(parseInt(f?this.options.offset.left:this.triggerTextComp.offset().left),0);var b=parseInt(this.options.height);var e=parseInt(this.options.width);var d=document.body.clientHeight-g-b;if(g-a(".x-toolbar").height()<d||g<this.tH){this.$view.css("top",g+b+(FR.Browser.r.gecko?1:0));if(d<this.tH){this.modifyTop(g)}}else{this.modifyTop(g)}if(c+this.tW>document.body.clientWidth&&(c+e>this.tW)){this.$view.css("left",c+e-this.tW)}else{this.$view.css("left",c)}},modifyTop:function(b){this.$view.css("top",(b-this.tH>0)?b-this.tH:0)
},onTriggerClick:function(){},setIcon:function(b){this.btn.attr("class",b)},fixValue:function(){return 2},fixbtnHeightValue:function(){return FR.Browser.isIE8Before()&&!a.support.boxModel?0:2},fixbtnWidthValue:function(){return FR.Browser.isIE8Before()&&!a.support.boxModel?0:1},doResize:function(f){FR.TriggerEditor.superclass.doResize.apply(this,arguments);var c=f.width-this.btnWidth,d=f.height,e=f.width-this.btnWidth,b=f.height;if(a.support.boxModel){c-=this.fixValue();d-=this.fixValue();e-=8;b-=4
}else{if(FR.Browser.r.ie10Compat||FR.Browser.r.ie9Compat||FR.Browser.r.ie11Compat){c-=3;d-=this.fixValue()}else{if(FR.Browser.isIE10()){c-=this.fixValue();d-=this.fixValue()}else{if(FR.Browser.isIE8()){if(!a.support.boxModel){e-=2}else{e-=3}}}}}this.triggerTextComp.css({width:c,height:d});this.editComp.css({width:e,height:b});if(FR.Browser.isIE()){this.editComp.css("line-height",b+"px")}this.btn.css({height:f.height-this.fixbtnHeightValue()});this.doResize4Triggerbtn(f);if(this.options.watermark){this.removeWaterMark();
this.setWaterMark()}},doResize4Triggerbtn:function(d){var b=this.getArrowIconHeight();var c=(this.btn.height()+this.fixbtnHeightValue()-b)/2;this.arrow.css("margin-top",c)},startEditing:function(){if(this.triggerTextComp){this.triggerTextComp.show()}if(this.editComp){this.editComp.focus()}this.editComp.select();if(this.options.watermark){this.removeWaterMark()}},stopEditing:function(){this.editComp.blur();if(this.triggerTextComp){this.triggerTextComp.hide()}FR.TriggerEditor.superclass.stopEditing.apply(this,arguments)
}});FR.BaseDateTimeEditor=FR.extend(FR.TriggerEditor,{_defaultConfig:function(){return a.extend(FR.BaseDateTimeEditor.superclass._defaultConfig.apply(),{})},_init:function(){FR.BaseDateTimeEditor.superclass._init.apply(this,arguments);if(this.options.value){this._dealValueWithEvents(this.options.value,false)}},getDefaultSupportFormat:function(){return["yyyy-MM-dd","yyyy-MM-d","yyyy-M-dd","yyyy-M-d","yyyy/MM/dd","yyyy/MM/d","yyyy/M/dd","yyyy/M/d","yyyy-MM-dd HH:mm:ss","yyyy-M-d HH:mm:ss","yyyy/MM/dd HH:mm:ss","yyyy/M/d HH:mm:ss"]
},_dealValueWithEvents:function(f){if(FR.isEmpty(f)){this.reset();return}if(FR.isArray(f)){f=f.toString()}var h=f||"";var g=this.options.format;if(h.date_milliseconds){h=new Date(h.date_milliseconds)}else{if(typeof f=="string"&&g){if(!this.options.customFormat){h=FR.matchDateFormat(f,g);if(h===false){var c=this.getDefaultSupportFormat();for(var e=0;e<c.length;e++){var b=FR.matchDateFormat(f,c[e]);if(b){h=b;break}}}}else{h=FR.str2Date(f,g)}}}if(h=="Invalid Date"||h=="NaN"||h===false){h=""}else{if(h instanceof Date){h=FR.date2Str(h,g);
this.options.value=h}}this.setText(h);this.options.currentDateTime=h;var d=this.options.value;this.options.value=f;if(arguments[1]!==false){this.fireEvent(FR.Events.CHANGE,f,d)}},setStartOrEndDate:function(c,b){if(!b){return}if(typeof b=="string"){b=b.replace(/-/g,"/")}if(!FR.isInvalidDate(new Date(b))){if(c=="startDate"){this.options.startDate=b;this.std=new Date(b)}else{if(c=="endDate"){this.options.endDate=b;this.edd=new Date(b)}}}},setStartDate:function(b){this.setStartOrEndDate("startDate",b)
},setEndDate:function(b){this.setStartOrEndDate("endDate",b)},setText:function(b){this.editComp.val(b)},recoveryValue:function(){this.editComp.val(this.options.oldValue)},isValidate:function(d){var c=this.options.allowBlank!==false;var i=this.options.format;var b=this.std;var h=this.edd;var g=d!=null&&d!=undefined?d:this.getValue();if(d==null&&g==null&&this.editComp.val()){this.errorMsg=FR.i18nText("FR-Engine-Value_Not_Match");return false}var f=this.options.regex;if(f){if(typeof f=="string"){f=new RegExp(f)
}if(!f.test(g)){this.errorMsg=this.options.errorMsg||FR.i18nText("FR-Engine-Error_Input_Value");return false}}if((!g)||(a.isArray(g)&&g.length===0)){if(c){return true}else{this.errorMsg=this.options.errorMsg||FR.i18nText("FR-Engine-Not_NULL");return false}}var e=this.options.returnDate?new Date(g):FR.matchDateFormat(g,i);if(i&&typeof g=="string"&&!this.options.customFormat){if(!e){this.errorMsg=this.options.errorMsg||FR.i18nText("FR-Engine-Error_Input_Value");return false}}if(b&&new Date(e)<new Date(b)){this.errorMsg=this.options.errorMsg||FR.i18nText("FR-Engine-Err-The_Number_Is_Less_Than_The_Minimum_Value")+FR.date2Str(b,i);
return false}if(h&&new Date(e)>new Date(h)){this.errorMsg=this.options.errorMsg||FR.i18nText("FR-Engine-Err-The_Number_Is_Larger_Than_The_Maximum_Value")+FR.date2Str(h,i);return false}if(e>new Date("2999/12/31")||e<new Date("1900/01/01")){this.errorMsg="out of range";return false}return true},reset:function(){this.setText("")}});FR.BaseComboBoxEditor=FR.extend(FR.TriggerEditor,{_defaultConfig:function(){return a.extend(FR.BaseComboBoxEditor.superclass._defaultConfig.apply(),{name4Empty:FR.i18nText("FR-Engine-Choose_None"),searchTime:500,directEdit:true,customData:true})
},_init:function(){FR.BaseComboBoxEditor.superclass._init.apply(this,arguments)},initData:function(){FR.BaseComboBoxEditor.superclass.initData.apply(this,arguments);if(this.options.controlAttr){this.setSource(this.options.controlAttr);delete this.options.controlAttr}},setSource:function(c){if(c.data){var b={parameter:{dependence:this.getDependenceObj(),startIndex:0,limitIndex:this.options.limitData}};this.options.data.setData(b,c.data)}if(c.value){if(this.editComp){this.setValue(c.value,false)}}this.shouldReBuildList()
},allPara:function(d,c){var b=this.createDependencePara4Data();if(this.searchText||this.searchText===0||this.searchText=="0"){b.parameter.dataFilter=this.searchText}b.parameter.startIndex=d?d:0;b.parameter.limitIndex=c?c:this.options.limitData;return b},_getViewList:function(){},getText:function(){return this.editComp.val()},getItemsLength:function(){return this.options.data.getLength()},_onEnterPressed:function(){this._selectWithoutTriggerEvent();this.fireEvent(FR.Events.AFTEREDIT,this.selectedIndex<this.getItemsLength()?this._getSelectedItem().text():"")
},_selectWithoutTriggerEvent:function(){if((this.getItemsLength()>0)&&(this.selectedIndex<this.getItemsLength())){this.setText(this._getSelectedItem().text());this.inList=true}else{this.clearText();this.searchText="";this.options.need2BuildList=true}this.checkValid();this.collapse()},_findInList:function(f){var c=this.options.data.getRecords();for(var d=0,b=c.length;d<b;d++){if((f!=""&&(c[d].getValue()==f||c[d].getShowValue()==f))||(f==""&&(c[d].getValue()===f||c[d].getShowValue()===f))){this.inList=true;
if(this.$view){this._setSelectedIndex(d)}return c[d].getShowValue()}}if(this.options.data.options.dataSource){var g=this.options.data.options.dataSource;if(g._findShowValue){var e=g._findShowValue(f);if(e){this.inList=true;return e}return false}}this.inList=false;return false},setText:function(b){this.editComp.val(b)},clearText:function(){this.editComp.val("")},_getSelectedItem:function(){return this.selectedItem},_getSelectedIndex:function(){return this.selectedIndex!=null?this.selectedIndex:-1},getSelectedIndex:function(){return this._getSelectedIndex()
},_setSelectedIndex:function(b){if(this.selectedItem){this.selectedItem.removeClass("fr-combo-selected")}this.selectedItem=this.$view.children(".fr-combo-list-item:eq("+b+")");this.selectedIndex=b;if(b>=0){this.selectedItem.addClass("fr-combo-selected").__scroll2View__(this.$view,false)}},setSelectedIndex:function(b){this._setSelectedIndex(b);this._onEnterPressed()},recoveryValue:function(){this.editComp.val(this.options.oldValue);this.searchText=this.options.oldValue;this.shouldReBuildList()},shouldReBuildList:function(){this.options.need2BuildList=true
},considerAllowBlankLength:function(){return this.getItemsLength()+(this.options.allowBlank===false?0:1)},isValidate:function(b){if(!FR.BaseComboBoxEditor.superclass.isValidate.apply(this,arguments)){return false}var c=b!=null?b:this.getValue();if(!this.options.customData){if((b!=null&&!this.isValueInList(c))||(b==null&&c===undefined)){this.errorMsg=FR.i18nText("FR-Engine-Not_In_List");this.invalidateCss();return false}}return true},isValueInList:function(b){return false},validateEmptyValue:function(c){var b=this.options.allowBlank!==false;
if(c===undefined){this.errorMsg=FR.i18nText("FR-Engine-Not_In_List");return false}if(b){return true}else{this.errorMsg=this.options.errorMsg||FR.i18nText("FR-Base_NOT_NULL_Des");return false}},getValue:function(){var j=this.getText();var h=null;var c=this.options.data.getLoadedRecords();var d=this._getSelectedIndex();if(d>-1&&d<c.length){h=this._getValue(c[d],j,d);if(h!=null){return h}}var g=this.options.data.options.dataSource;if(c.length===0){if(g._findShowValue){var f=g._findShowValue(j,false);
if(f!=null){h=f;return h}}}else{for(var e=0,b=c.length;e<b;e++){h=this._getValue(c[e],j,e);if(h!=null){return h}}}if(h==null&&g._findShowValue){h=g._findShowValue(j,false)}if(h!=null){return h}if(this.options.customData){return j}},_getValue:function(c,f,d){var b=c.getShowValue();var e;if(typeof b=="string"){b=a.trim(b)}if(b===f||b+""===f||c.getShowValue()===f){e=c.getValue();if(this.$view){this._setSelectedIndex(d)}}return e},setValue:function(b){if(!this.isValidate(b)){return false}if((b||b===0)&&this.options.watermark){this.clearWaterMark()
}if(arguments[1]!=undefined){this._dealValueWithEvents(b,arguments[1])}else{this._dealValueWithEvents(b)}},_dealValueWithEvents:function(c){var b=this.getValue();this.options.oldValue=b;if(c===""){this.editComp.val("");return}var e=c;var d=this._findInList(c);if(d!==false){e=d}if(e&&e.length>24&&!FR.isInvalidDate(new Date(e))&&this.options.type!="datetime"){e=FR.date2Str(new Date(e),"yyyy-MM-dd")}this.setText(e);if(arguments[1]!==false){this.fireEvent(FR.Events.CHANGE,c,b);this.fireEvent(FR.Events.AFTEREDIT)
}},reset:function(){FR.BaseComboBoxEditor.superclass.reset.apply(this,arguments);this.shouldReBuildList();delete this.searchText;delete this.emptyContent;if(this.options.linkAutoChoose){this.onTriggerClick();this._setSelectedIndex(0);this._selectWithoutTriggerEvent()}}})})(jQuery);
(function(a){FR.MultiFileEditor=FR.extend(FR.BaseEditor,{_defaultConfig:function(){return a.extend(FR.MultiFileEditor.superclass._defaultConfig.apply(),{width:120,height:20,render:true,showViewImage:true})},_init:function(){FR.$defaultImport("/com/fr/web/core/js/noswfupload.js","js");FR.$defaultImport("/com/fr/web/core/css/widget/noswfupload-icons.css","css");FR.MultiFileEditor.superclass._init.apply(this,arguments);var h=this.options;var d=this;this.$uploadForm=a('<form enctype="multipart/form-data"></form>').css("position","relative").appendTo(this.element);
this.divWrap=a("<div></div>").css({width:this.options.width+"px",height:this.options.height+"px",position:"relative",overflow:"hidden"}).appendTo(this.$uploadForm);this.$fileupload=a('<input type="file" name="file"/>').addClass("fr-fileupload").appendTo(this.divWrap);if(h.maxlength!==1){this.$fileupload[0].setAttribute("multiple","multiple")}if(h.disabled){this.$fileupload[0].setAttribute("disabled","disabled")}if(h.render===true){var e=Math.min(this.options.height,this.options.width);var c=e>32?32:e-2;
var b=e>32?20:e*0.7;this.$previewImage=a("<img>").attr("src",FR.servletURL+"?op=resource&resource=/com/fr/web/images/file/upload.gif").appendTo(this.divWrap).addClass("fr-fileupload-image").css({left:this.options.width>32?(this.options.width-32)/2:0,top:this.options.height>32?(this.options.height-32)/2:0,width:c,height:c});if(h.tooltipText){var g=a("<span/>").addClass("fr-fileupload-tooltipspan");this.tooltipDiv=a("<div/>").css({left:c+7+"px",height:c+"px"}).append(g.text(h.tooltipText)).addClass("fr-fileupload-tooltip").appendTo(this.$uploadForm)
}this.$preview=this.$previewImage;if(d.options.maxlength!==1){this.$previewCount=a('<div class="fr-fileupload-preview-count"/>').text(0).appendTo(this.divWrap).css({left:this.options.width>32?(this.options.width-32)/2+22:this.$previewImage.width()-10,top:this.options.height>32?(this.options.height-32)/2+8:0,width:b,height:b,"border-radius":b,"font-size":b*0.6})}}else{this.$preview=this.element}if(this.options.write){a(".fr-fileupload",d.element).css({right:0,"font-size":d.element.height()<100?"100px":d.element.height()+"px",width:this.options.width,height:this.options.height})
}this.wrap=noswfupload.wrap((this.$fileupload)[0],h.maxSize,h.maxlength,this.options.width,this.options.height);var f=this.wrap;f.onerror=function(){noswfupload.text(this.dom.info,"WARNING: Unable to upload "+this.file.fileName)};f.onloadstart=function(i,j){this.show(0,0);noswfupload.text(this.dom.info,"Preparing for upload ... ")};f.onprogress=function(i,j){this.show((this.sent+i.loaded)*100/this.total,i.loaded*100/i.total);noswfupload.text(this.dom.info,FR.i18nText("FR-Basic-File_Uping_File")+":  "+this.file.fileName);
if(this.file.fileSize!==-1){if(i.simulation){noswfupload.text(this.dom.info,FR.i18nText("FR-Basic-File_Uping_File")+":  "+this.file.fileName,FR.i18nText("FR-Basic-File_All_File_Uploaded")+noswfupload.size(this.sent+i.loaded))}else{noswfupload.text(this.dom.info,FR.i18nText("FR-Basic-File_Uping_File")+":  "+this.file.fileName,FR.i18nText("FR-Basic-File_Uploaded_File")+"： "+noswfupload.size(i.loaded),FR.i18nText("FR-Basic-File_All_File_Uploaded")+noswfupload.size(this.sent+i.loaded))}}else{noswfupload.text(this.dom.info,"Uploading: "+this.file.fileName,"Sent: "+(this.sent/100)+" out of "+(this.total/100))
}};f.onerror=function(){noswfupload.text(this.dom.info,"WARNING: Unable to upload "+this.file.fileName)};f.onload=function(j,l){var k=this;noswfupload.text(this.dom.info,"Upload complete");setTimeout(function(){k.clean();k.hide();noswfupload.text(k.dom.info,"");d.fireEvent(FR.Events.AFTEREDIT)},1000);d.showViewList();var i=d.wrap.attach_array[0];d.fireEvent(FR.Events.CALLBACK,i)};f.url=this.options.url?this.options.url:FR.servletURL+"?op=fr_attach&cmd=ah_upload";f.url+=((window.FS&&window.FS.serverID)?"&serverID="+window.FS.serverID:"");
f.fileType=h.accept;f.attach_array=[];f.attach_names=[];f.attachNum=0;this._dealValueWithEvents(h.value)},_dealValueWithEvents:function(b){if(FR.equals(b,this.wrap.attach_array)||(this.wrap.attach_array.length===1&&FR.equals(this.wrap.attach_array[0],b))){return}if((a.isArray(b)&&b.length>0&&b[0].attach_id)||(b&&b.attach_id)){var e=a.isArray(b)?b:[b];this.wrap.attach_array=[];for(var c=0;c<e.length;c++){this.wrap.attach_array.push(e[c]);var d={};this.wrap.files.push(d)}this.showViewList();this.wrap.files.length=0
}if(b==""){this.reset()}},createListItem:function(d,e){var c=this;var b=a("<li></li>");var f;b.append(f=(a("<a class='fr-fileupload-progressCancel' href='#'> </a>")).click(function(g){c.removeAttach(d,b);g.stopEvent()}).hide()).append(a("<span class='fr-fileupload-fileNameItem'>"+c.wrap.attach_names[e]+" "+FR.__fileSizeFormat__(d.fileSize)+"</span>").bind("click",function(){var g=d.attach_id;window.open(FR.servletURL+"?op=fr_attach&cmd=ah_download&id="+g)}).mouseover(function(){a(this).css({color:"blue"})
}).mouseout(function(){a(this).css({color:""})})).addClass("fr-fileupload-listitem").mouseover(function(){f.show();a(this).css({"background-color":"#9FC5F8"})}).mouseout(function(){f.hide();a(this).css({"background-color":""})});c.wrap.attachNum++;if(c.wrap.maxlength!==1){c.$previewCount.text(c.wrap.attachNum)}return b},showViewList:function(){var s=this;var h;var t;if(!s.options.hideFileList){var r=a("ul",s.element);if(r.length===0){var l=a("<div class='fr-fileupload-popview'/>").appendTo(s.element).css({marginTop:18-s.options.height/2,marginLeft:s.options.width/2+18});
h=a("<div class='fr-fileupload-popview-list'/>").appendTo(l);t=a("<ul/>").addClass("fr-fileupload-list").appendTo(h)}else{h=r.parent();t=r}}var d=s.wrap;this.imageURL=null;if(s.options.maxlength===1){var g=this.options;var q=d.attach_array[0];this.removeBackground();if(q.attach_type=="image"){s.$tempPreview=a("<td></td>").appendTo(this.divWrap).css({left:s.element.outerWidth(true)-s.element.width(),width:g.width,height:g.height,top:0,position:"absolute"});FR.lastTarget=s.$tempPreview;var f=a(s.$tempPreview);
f.css("background","");var c=FR.servletURL+"?op=fr_attach&cmd=ah_image&id="+q.attach_id;f.css("background","url("+c+") 0 0 no-repeat transparent");this.imageURL=c;f.css("cursor","default").unbind("click",b)}d.attach_names[0]=q.filename;if(t){t.children().remove();t.append(this.createListItem(q,0))}}if(s.options.maxlength!==1){for(var p=d.attach_array.length-1,k=0;k<d.files.length;p--,k++){d.attach_names[p]=d.attach_array[p].filename;var e=0;for(var n=0;n<d.attach_array.length-d.files.length;n++){if(d.attach_names[p]===d.attach_array[n].filename){e++
}}if(e>0){d.attach_names[p]=FR.lengthenFileName(d.attach_array[p].filename,"("+e+")")}t&&t.append(this.createListItem(d.attach_array[p],p))}}if(FR.Browser.isIE()&&h){if(h.height()>160){h.height(160);if(t.width()+18>h.width()){h.width(t.width()+18)}}}function b(i){window.open(FR.servletURL+"?op=fr_attach&cmd=ah_download&id="+i.data);i.stopPropagation()}},removeAttach:function(e,c){var b=e.attach_id;var d=this;var f=this.wrap;FR.ajax({url:FR.servletURL+"?op=fr_attach&cmd=ah_release",data:{id:b},complete:function(h,g){if(g=="success"){if(c){c.remove()
}for(var i=0;i<f.attach_array.length;i++){if(f.attach_array[i].attach_id==b){if(d.wrap.maxlength!==1){f.attachNum--;d.$previewCount.text(d.wrap.attachNum);if(f.attachNum===0){a(".fr-fileupload-popview",d.element).remove()}}f.attach_array.remove(f.attach_array[i]);break}}if(d.wrap.maxlength===1){a(".fr-fileupload-popview",d.element).remove();d.removeBackground()}d.fireEvent(FR.Events.CALLBACK)}}})},resetBackground:function(c){var b=c||this.imageURL;this.removeBackground();if(this.options.tdCell){this.options.tdCell.css("background","url("+b+"&height="+this.options.tdCell.height()+") 0 0 no-repeat transparent")
}},removeBackground:function(){if(this.options.tdCell){this.options.tdCell.css("background-image","")}var b=this.divWrap.children().eq(2);b.css("background-image","");b.remove()},startEditing:function(){if(this.options.tdCell){a(".attach-download-div,.fr-fileupload-download-all",a(this.options.tdCell)).hide()}this.$preview.show();if(this.options.disabled){this.$preview.unbind("click")}if(FR.Browser.isIE()&&!a.support.boxModel&&this.options.write){a(".x-editor").addClass("none-border")}},stopEditing:function(){if(this.options.tdCell){var c=a(".attach-download-div,.fr-fileupload-download-all",a(this.options.tdCell));
c.show()}if(FR.Browser.isIE()&&!a.support.boxModel&&this.options.write){a(".x-editor").removeClass("none-border")}if(this.imageURL!=null){var b=this;setTimeout(function(){b.resetBackground()},200)}},getValue:function(){if(!this.wrap.attach_array){return""}if(this.options.maxlength===1&&this.wrap.attach_array[0]&&this.wrap.attach_array[0].attach_type=="image"){return this.wrap.attach_array[0]}return this.wrap.attach_array.length===0?"":this.wrap.attach_array},setEnable:function(b){FR.MultiFileEditor.superclass.setEnable.apply(this,arguments);
if(this.$fileupload&&this.$fileupload[0]){if(b){this.$fileupload[0].removeAttribute("disabled")}else{this.$fileupload[0].setAttribute("disabled","disabled")}}},isShowViewImage:function(){return this.options.showViewImage&&this.options.maxlength===1},reset:function(){this.wrap.attach_array=[];this.wrap.attach_names=[];this.wrap.attachNum=0;if(this.options.tdCell){a(".attach-download-div",a(this.options.tdCell)).remove()}a(".fr-fileupload-popview",this.element).remove();this.removeBackground()}});a.shortcut("multifile",FR.MultiFileEditor)
})(jQuery);
(function(a){FR.TabPane=FR.extend(FR.Widget,{_defaultConfig:function(){return a.extend(FR.TabPane.superclass._defaultConfig.apply(),{baseCls:"fr-tabpane",width:"100%",height:"100%",active:0,tabPosition:"top",tabHeight:22,noControl:false,items:[],defaultActiveIndex:0})},_init:function(){FR.TabPane.superclass._init.apply(this,arguments);var d=this.options;this.element.css({width:d.width,height:d.height});var b=this._createConfig4TabPaneConfig();var e=new FR.BorderLayout(b);e.doLayout();this.wrapWidth=0;
this._initTabs();if(this.tabBtns[d.defaultActiveIndex]){this.tabBtns[d.defaultActiveIndex].setSelected()}this.isMoving=false;this.activeTabIndex=d.defaultActiveIndex;var c=this;this.tabsContent.parent().addClass(d.baseCls+"-tabscontent-bg");a(window).resize(function(){c.fireEvent(FR.Events.SCROLLCHANGE,c,c.activeTabIndex)})},_createConfig4TabPaneConfig:function(){var e=this.options;var d=e.tabPosition;var f=e.baseCls+"-content";this.tabPaneContent=a("<div></div>").addClass(f).addClass(f+"-"+d);var b=this._createConfig4TabControl();
var c={renderEl:this.element,items:[{region:"center",el:this.tabPaneContent},{height:e.tabHeight,region:d=="top"?"north":"south",el:b}]};return c},_createConfig4TabControl:function(){var d=this,e=this.options;this.tabsContent=a("<div/>").addClass(e.baseCls+"-tabscontent").addClass(e.baseCls+"-tabscontent-"+e.tabPosition);var c=[{region:"center",el:a("<div/>").append(this.tabsContent)}];if(!this.options.noControl){c.unshift({region:"west",el:{type:"horizontal",widgetName:"controlbuttons",baseCls:"fr-tabpane-controlbuttons",alignment:"center",hgap:3,vgap:2,items:[{el:this._createTabControlBtn("arrow1",function(){if(d.isMoving){return
}d._moveViewToPos("start")}),width:13},{el:this._createTabControlBtn("arrow2",function(){if(d.isMoving){return}var g=d.stepDis;var f=d.tabsContent.offset().left-d.tabsWrap.offset().left;g=Math.min(g,f);d._moveViewToPos(g)}),width:13},{el:this._createTabControlBtn("arrow3",function(){if(d.isMoving){return}var g=d.stepDis;var f=d.tabsWrap.offset().left+d.wrapWidth-d.tabsContent.offset().left-d.tabsContent.width();g=Math.min(g,f);g=g<0?0:g;d._moveViewToPos(-g)}),width:13},{el:this._createTabControlBtn("arrow4",function(){if(d.isMoving){return
}d._moveViewToPos("end")}),width:13}]},width:72})}var b={type:"border",items:c};return b},_createTabControlBtn:function(c,d){var b=new FR.IconButton({type:"iconbutton",baseClass:"fr-edit-sheetcontrol-icon-box",handler:d});a("<div>").addClass("fr-edit-sheetcontrol-icon-"+c).appendTo(b.element);return b.element},_initTabs:function(){var c=this.options;this.tabBtns=[];this.tabsWrap=a("<ul/>").addClass(c.baseCls+"-tabswrap").appendTo(this.tabsContent);if(!c.items){return}if(!c.tabs){c.tabs=[]}for(var b=0;
b<c.items.length;b++){this._addTabContent(c.items[b]);this._addTabTag(b,c.items[b])}},_addTabContent:function(d){var b=this.options.tabs;if(d.tabContent){var e=FR.createWidget(d.tabContent);e.element.appendTo(this.tabPaneContent);d.content=e.element}else{var c=a("<div/>").addClass("html-content").appendTo(this.tabPaneContent);c.css("background",this.options.background);d.content=c}d.content.hide();b.push(d)},_addTabTag:function(f,g){var d=this,c=this.options.items;var e={tabPane:this,name:g.title,index:f,isFirst:f===0,isLast:f===c.length-1,renderEl:a("<li/>").appendTo(this.tabsWrap),tabBtns:this.tabBtns,handler:function(){if(d.activeTabIndex>=0){d.options.tabs[d.activeTabIndex].content.hide()
}d.activeTabIndex=f;if(d.options.tabs[f].content){d.options.tabs[f].content.show()}d.showSheetContent(d.activeTabIndex);d._moveViewToShow(d.activeTabIndex)}};var b=new FR.SheetButton(e);this.tabBtns.push(b);this.wrapWidth+=b.getWidth();this.stepDis=this.wrapWidth/this.tabBtns.length},_moveViewToShow:function(d){var c=this.tabBtns[d].element;var j=this.tabsWrap;var b=this.tabsContent;var g=b.offset().left;var m=g+b.width();var l=j.offset().left;var f=l+this.wrapWidth;var k=c.offset().left;var i=k+c.width();
var e=c.width();var h=0;if(k<g){h=g-l;h=Math.min(h,e)}else{if(i>m){h=m-f;h=Math.max(h,-e)}else{return}}this._moveViewToPos(h)},_moveViewToPos:function(d){var b=this;this.isMoving=true;if(d=="start"){this.tabsWrap.animate({left:"0"},"fast",function(){b.isMoving=false})}else{if(d=="end"){var c=this.tabsContent.width()-this.wrapWidth;if(c>0){c=0}this.tabsWrap.animate({left:c},"fast",function(){b.isMoving=false})}else{this.tabsWrap.animate({left:"+="+d},"fast",function(){b.isMoving=false})}}},showSheetContent:function(b){this.fireEvent(FR.Events.TABCHANGESTART,this,b);
this.fireEvent(FR.Events.TABCHANGE,this,b);this.fireEvent(FR.Events.SCROLLCHANGE,this,b)},doResize:function(b){this.element.css({width:b.width,height:b.height})},selectTabAt:function(b){if(b>=0){this.tabBtns[b].setSelected();return true}return false},getTabByIndex:function(b){if(b>=0){return this.options.tabs[b]}return{}},getTabByName:function(b){if(!FR.isEmpty(b)){for(var c=0;c<this.tabBtns.length;c++){if(this.tabBtns[c].options.name===b){return this.options.tabs[c]}}}return{}},switchTabByName:function(b){if(FR.isEmpty(b)){return false
}for(var c=0;c<this.tabBtns.length;c++){if(this.tabBtns[c].options.name===b){return this.selectTabAt(c)}}return false},getSelectedIndex:function(){return this.activeTabIndex}});a.shortcut("tabpane",FR.TabPane);FR.SheetButton=FR.extend(FR.Widget,{_defaultConfig:function(){return a.extend(FR.SheetButton.superclass._defaultConfig.apply(),{tabPane:null,tabBtns:[],isFirst:false,isLast:false,index:0,minWidth:60,handler:null,disabled:false,name:"",containerCls4btn:"fr-sheetbutton-container",intersectCls4btn:"fr-sheetbutton-intersect",firstPartCls4btn:"fr-sheetbutton-firstpart",middlePartCls4btn:"fr-sheetbutton-middlepart",thirdPartCls4btn:"fr-sheetbutton-thirdpart",endPartCls4btn:"fr-sheetbutton-endpart",button_class_prefix:"fr-sheet-icon-",button_closebtn_class:"fr-sheetbutton-closebutton"})
},_init:function(){FR.SheetButton.superclass._init.apply(this,arguments);var d=this.options,b=this;var c=d.tabPane.options.tabPosition;if(c=="top"){d.firstPartCls4btn+="-"+c;d.middlePartCls4btn+="-"+c;d.thirdPartCls4btn+="-"+c;d.endPartCls4btn+="-"+c}this.element.addClass(d.containerCls4btn).attr("title",d.name);this._createTabBtnByName(d.name);if(a.isFunction(d.handler)){this.on(FR.Events.CLICK,d.handler.createDelegate(d.scope||this))}this.element.click(function(){if(b.isEnabled()){b.setSelected()
}});this.width=this.element.width();this.fireEvent(FR.Events.AFTERINIT)},_createTabBtnByName:function(c){var d=this.options;var b=this.element;if(this.options.isFirst){b.head=a("<span/>").addClass(d.firstPartCls4btn).appendTo(b)}b.middle=a("<span/>").addClass(d.middlePartCls4btn).text(c).appendTo(b);if(b.middle.width()<d.minWidth){b.middle.width(d.minWidth)}if(!d.isLast){b.end=a("<span/>").addClass(d.thirdPartCls4btn).appendTo(b)}else{b.end=a("<span/>").addClass(d.endPartCls4btn).appendTo(b)}},getWidth:function(){return this.width
},setSelected:function(){var c=this.options;if(this.isActive()){return}this.setActiveState(true);var b=c.tabPane.activeTabIndex;if(b>=0&&b!==c.index){c.tabBtns[b].setActiveState(false)}this.fireEvent(FR.Events.CLICK)},setActiveState:function(b){var c=this.options;this.isActiveState=b;if(b){this.element.addClass(c.containerCls4btn+"-active");if(!c.isFirst){c.tabBtns[c.index-1].element.addClass(c.intersectCls4btn)}}else{this.element.removeClass(c.containerCls4btn+"-active");if(!c.isFirst){c.tabBtns[c.index-1].element.removeClass(c.intersectCls4btn)
}}},setValidState:function(f){var b=this.element,d=this.options;var c=d.index;if(!f){if(d.isFirst){b.head.switchClass(d.firstPartCls4btn+"-invalidate")}else{var e=d.tabPane.tabBtns[c-1];if(e.isValid()){e.element.end.switchClass(d.thirdPartCls4btn+"-invalidate-style3")}else{e.element.end.switchClass(d.thirdPartCls4btn+"-invalidate-style2")}}b.middle.switchClass(d.middlePartCls4btn+"-invalidate");if(d.isLast){b.end.switchClass(d.endPartCls4btn+"-invalidate")}else{if(d.tabPane.tabBtns[c+1].isValid()){b.end.switchClass(d.thirdPartCls4btn+"-invalidate")
}else{if(d.tabPane.tabBtns[c-1].isValid()){b.end.switchClass(d.thirdPartCls4btn+"-invalidate-style2")}}}}else{if(d.isFirst){b.head.switchClass(d.firstPartCls4btn)}else{var e=d.tabPane.tabBtns[c-1];if(e.isValid()){e.element.end.switchClass(d.thirdPartCls4btn)}else{e.element.end.switchClass(d.thirdPartCls4btn+"-invalidate")}}b.middle.switchClass(d.middlePartCls4btn);if(d.isLast){b.end.switchClass(d.endPartCls4btn)}else{if(d.tabPane.tabBtns[c+1].isValid()){b.end.switchClass(d.thirdPartCls4btn)}else{b.end.switchClass(d.thirdPartCls4btn+"-invalidate-style3")
}}}this.isValidState=f},isValid:function(){return this.isValidState!==false},isActive:function(){return this.isActiveState===true},destroy:function(){this.element.empty()}});a.shortcut("sheetbutton",FR.SheetButton)})(jQuery);
(function(a){FR.Elementcase=FR.extend(FR.BaseEditor,{_init:function(){FR.Elementcase.superclass._init.apply(this,arguments);this.$toolbar=a("<div class='x-toolbar' style='height:21px'></div>");this.$inner=a("<div class='reportContent'></div>");this.$inner.css("overflow","auto");this.totalPage=-1;this.currentPage=1;var b=this;this.initPane();this.gotoPage(1);this._init4Style()},_init4Style:function(){this._init4Margin()},_init4Margin:function(){var b=a(".reportContent",this.element);if(!b){return}var c=this.options.border;
if(c){b.css("border-style",c.type);b.css("border-color",c.color);b.css("border-width",c.width)}if(this.options.marginTop){b.css("marginTop",this.options.marginTop);this.marginHeight=(this.marginHeight||0)+parseInt(this.options.marginTop)}if(this.options.marginLeft){b.css("marginLeft",this.options.marginLeft);this.marginWidth=(this.marginWidth||0)+parseInt(this.options.marginLeft)}if(this.options.marginBottom){b.css("marginBottom",this.options.marginBottom);this.marginHeight=(this.marginHeight||0)+parseInt(this.options.marginBottom)
}if(this.options.marginRight){b.css("marginRight",this.options.marginRight);this.marginWidth=(this.marginWidth||0)+parseInt(this.options.marginRight)}if(!this.options.widgetBackground){return}var d=this.options.widgetOpacity;if(!d){FR.setBackground(b,this.options.widgetBackground,b.height());return}this.$background=a("<div class='widgetBackground'></div>");this.$background.css("filter","alpha(opacity="+d*100+")");this.$background.css("opacity",d);FR.setBackground(this.$background,this.options.widgetBackground,b.height())
},encodePara:function(b){if(!b){return""}if(typeof b==="string"){b=FR.jsonDecode(b)}a.each(b,function(c,d){if(typeof d==="string"){b[c]=encodeURIComponent(FR.cjkDecode(d.replaceAll('"','\\"')))}});return b},gotoPage:function(e,c,b){var d=this;FR.ajax({url:FR.servletURL,type:"POST",data:{op:"fr_form",cmd:"load_report_content",sessionID:this.options.form.sessionID,widgetName:this.options.widgetName,__parameters__:FR.encodePara(c),noCache:b||"",pageIndex:e,_:new Date().getTime(),__boxModel__:a.support.boxModel},beforeSend:function(){FR.HtmlLoader.loadingEffect({el:d.$inner,show:true})
},async:true,complete:function(h,f){if(f=="success"){var g=FR.jsonDecode(h.responseText);if(g.length===0){d.$inner.html(h.responseText);return}d.totalPage=g.totalPage?g.totalPage:1;if(d.options.showToolbar){d.numberLabel.setValue(" /"+d.totalPage);d.inputField.setValue(e)}d.$inner[0].innerHTML=g.htmlTag;d.$inner.asComponent({type:"fr_form",selector:"td[widget]"});d.currentPage=e;d.changeColWidth();d.changeHeight();a(".x-table",d.$inner).css("overflow","visible");var i=a(".frozen-page",d.$inner).length>0?"hidden":"auto";
FR.HtmlLoader.loadingEffect({el:d.$inner,show:false,overflow:i});if(d.$background){d.$background.prependTo(d.$inner)}}}})},isFit:function(){var b=this.options.form;return b.options&&b.options.__FIT__},changeHeight:function(){var c=a(".frozen-page",this.$inner);if(c.length>0){var g=a(".page-block",this.$inner);var f=a(".frozen-west",c);var e=a(".frozen-north",c);var b=a(".frozen-center",c);var h=a(".x-toolbar").height();var d=this.options.height-h-(this.marginHeight||0);b.height(d-e.height());f.height(d-e.height());
g.height(d+"px");b.scroll(function(){e.scrollLeft(b.scrollLeft());f.scrollTop(b.scrollTop())}.createDelegate(this))}if(this.$background){this.$background.css("height",this.options.height);this.$background.css("margin-bottom",-this.options.height)}},changeColWidth:function(){var c=a(".frozen-page",this.$inner);var g=a(".page-block",this.$inner);if(c.length>0){this.doForzen(c,g)}else{var f=this.options.widgetName;var h=a("."+f+"col");var e=a("."+f+"table");var d=e.height()>this.options.height?this.options.width-20:this.options.width-2;
var b={array:h,table:e,width:d-(this.marginWidth||0)};if(!this.isFit()){this.changeTableW(b)}g.width(e.width())}if(this.$background){this.$background.css("width",this.options.width)}},doForzen:function(g,b){this.$inner.css("overflow","hidden");var k=g.width();var e=a(".frozen-corner",g);var i=a(".frozen-west",g);var c=a(".frozen-north",g);var h=a(".frozen-center",g);var j={cornerTable:a(".x-table",e),westTable:a(".x-table",i),northTable:a(".x-table",c),centerTable:a(".x-table",h)};if(!this.isFit()){this.changeFrozenTable(j,k)
}var d=j.westTable.width();var f=this.options.width-d-(this.marginWidth||0);d=parseInt(d)+"px";f=parseInt(f)+"px";e[0].style.width=d;i[0].style.width=d;h[0].style.width=f;c[0].style.width=f},changeFrozenTable:function(n,q){var g=n.cornerTable;var d=n.westTable;var k=n.northTable;var p=n.centerTable;var s=(d.width()/q)*this.options.width;var i=20;var b=this.options.width-s-i-(this.marginWidth||0);var e=a("col",g);var o=a("col",d);var c=a("col",k);var r=a("col",p);var f=this.getCornerStartColumn(r,c);
var m={array:e,table:g,width:s,start:0};var j={array:o,table:d,width:s,start:0};var h={array:c,table:k,width:b,start:f};var l={array:r,table:p,width:b,start:f};this.changeTableW(m);this.changeTableW(j);this.changeTableW(h);this.changeTableW(l)},getCornerStartColumn:function(c,b){if(c.length>0){return parseInt(a(c[0]).attr("col"))}return Math.max(c.length,b.length)},changeTableW:function(e){var m=e.array;var o=e.table;var l=e.width;if(m.length===0||o.length===0){return}var g=this.getMinWidths(m);var f=0;
for(var k=0;k<g.length;k++){f+=g[k]}if(f>l){l=f}var n=this.getCurrentWidths(m);var c=0;for(var k=0;k<n.length;k++){c+=n[k]}var j=this.calculatorNewWidths(g,n,l,c);for(var k=0;k<m.length;k++){var b=a(m[k]);var h=j[k];b[0].style.width=h+"px";var d=parseInt(b.attr("col"));this.calCellFrozenTableWidth(d,e.start,o,h-5)}o[0].style.width=l+"px"},calculatorNewWidths:function(f,m,h,c){var k=[];var j=h;while(true){var e=h/c;var d=false;for(var g=0;g<f.length;g++){if(k[g]===undefined){var b=parseInt(e*m[g]);
if(b<=f[g]){k[g]=f[g];h-=k[g];c-=k[g];d=true}}}if(!d){for(var g=0;g<f.length;g++){if(k[g]===undefined){var b=parseInt(e*m[g]);k[g]=b}}break}}var l=0;for(var g=0;g<f.length;g++){l+=k[g]}k[k.length-1]=k[k.length-1]+j-l;return k},getCurrentWidths:function(d){var c=[];for(var b=0;b<d.length;b++){c[b]=parseInt(a(d[b]).attr("c-w"))}return c},getMinWidths:function(d){var c=[];for(var b=0;b<d.length;b++){c[b]=parseInt(a(d[b]).css("min-width"))}return c},calCellFrozenTableWidth:function(d,c,m,g){if(parseInt(c)>=0){var e="table.col"+d;
var b="td.col"+d;var l=a(e,m);var j=a(b,m);var k=g+"px";for(var f=0,h=l.length;f<h;f++){l[f].style.width=k}for(var f=0,h=j.length;f<h;f++){j[f].style.width=k}}},initToolbar:function(){var c=this;var d=new FR.Button({icon:"css:x-emb-formpre",width:25,height:20,render:false,renderEl:a("<div/>").appendTo(a('<div style="float:left;"></div>').appendTo(c.$toolbar)),handler:function(){if(c.currentPage-1>0){c.gotoPage(c.currentPage-1);c.currentPage--}}});c.inputField=new FR.NumberEditor({renderEl:a("<div/>").appendTo(a('<div style="float:left;padding-left:2px;"></div>').appendTo(c.$toolbar)),width:30,height:20,allowDecimals:true,allowNegative:true,style:"text-align:center"});
c.inputField.on(FR.Events.AFTEREDIT,function(f){if(f.keyCode==FR.keyCode.ENTER){c.gotoPage(this.getValue())}});c.numberLabel=new FR.Label({renderEl:a("<div/>").appendTo(a('<div style="float:left;padding-left:2px;"></div>').appendTo(c.$toolbar)),width:38,height:20});var b=new FR.Button({icon:"css:x-emb-formnext",width:25,height:20,render:false,renderEl:a("<div/>").appendTo(a('<div style="float:left;"></div>').appendTo(c.$toolbar)),handler:function(){if(c.currentPage+1<=c.totalPage){c.gotoPage(c.currentPage+1);
c.currentPage++}}})},initPane:function(){var c=this;var b=[];if(c.options.showToolbar){c.initToolbar();b.push({region:"north",el:c.$toolbar})}b.push({region:"center",el:c.$inner});var d=new FR.BorderLayout({items:b,renderEl:c.element});d.doLayout();a(window).resize(function(){d.doLayout()})},doResize:function(c){if(!FR.Browser.isIE8Before()&&this.options.border){this.element.parent().css("box-shadow",this.options.border.borderStyle)}var b=c.width;if(c.width&&c.width!=this.options.width){this.options.width=c.width;
this.changeColWidth()}if(c.height&&c.height!=this.options.height){this.options.height=c.height;this.changeHeight()}}});a.shortcut("elementcase",FR.Elementcase)})(jQuery);
(function(a){FR.ComboBoxEditor=FR.extend(FR.BaseComboBoxEditor,{_defaultConfig:function(){return a.extend(FR.ComboBoxEditor.superclass._defaultConfig.apply(),{name4Empty:FR.i18nText("FR-Basic_Choose_None"),maxCount:10,sonHeight:18,value:"",limitData:500,autoFixWidth:true})},_init:function(){FR.ComboBoxEditor.superclass._init.apply(this,arguments);this._dealSearch();var c=this.options;this.scrollBarWidth=20;if(!this.$view){this.$view=a("<div/>").height(20).appendTo(FR.$view_container)}this.$view.hide();
this.shouldReBuildList();if(this.options.data&&this.options.data.isLocalSource()){if(this.options.dependence){this.options.data.resetStatus(this.allPara.apply(this,arguments))}var b=this.options.data.getRecords();this._setItems(b);this.checkViewScroll(b);this.options.need2BuildList=false;this.options.need2FixWidth=true}FR.applyStyles(this.editComp,c.style)},_dealSearch:function(){var b=this,c=this.options;if(this.options.widgetUrl){this.options.searchData=new FR.AjaxSearchData({url:this.options.widgetUrl});
this.editComp.keyup(function(d){if(!b.options.directEdit){return}if(b.options.offset==undefined){b.options.offset={left:b.editComp.offset().left,top:b.editComp.offset().top}}if(!FR.isNavKeyPress(d)){setTimeout(function(){if(b.searchText==b.editComp.val()&&d.keyCode!=FR.keyCode.BACKSPACE){if(!b.isExpanded()){b.expand()}return}b.edited=true;if(b.searchCancel!==true){b.searchText=b.editComp.val();b._doBeforeSearch();b.inList=false;b._ajaxSearch();b.fireEvent(FR.Events.AFTEREDIT);b.searchCancel=false
}else{b.searchCancel=undefined}},c.searchTime)}})}},_ajaxSearch:function(){this.embellishView();this.$view.empty();this.$view.height(30);FR.HtmlLoader.loadingMoreData({el:this.$view,show:true});this.modifyPosition();this.$view.show();var b=this.allPara.apply(this,arguments);this.options.searchData.resetStatus(b);var c=this;var d=c.lastAjaxSearchTimes?(c.lastAjaxSearchTimes+1):1;c.lastAjaxSearchTimes=d;this.options.searchData.loadObject(function(e){if(d<c.lastAjaxSearchTimes){return}c.options.data.setData(b,e);
c.checkViewScroll(c.options.data.getData());c._setItems(c.options.data.getData());FR.HtmlLoader.loadingMoreData({el:c.$view});c.$view.hide();c.options.need2BuildList=false;c._createVieList();c.__makeSureInputValueInResList();if(c.options.data.getData().length>0){c.setFocusWithIndex(0)}})},_canCancelSearch:function(){return true},__makeSureInputValueInResList:function(){var c=this;var b=c._getViewList();if(b.length!==0){if(c.searchText==""){c.inList=undefined}else{for(var d=0;d<b.length;d++){if(b.eq(d).text()==c.searchText){c.inList=true;
break}c.inList=false}}}else{c.inList=false}if(c.inList===false&&!c.options.customData){this.errorMsg=FR.i18nText("FR-Basic_Not_In_List");this.invalidateCss()}else{this.validateCss()}},isValueInList:function(b){return this._checkValueInResList(b)},_checkValueInResList:function(f){var b=f||this.editComp.val();var g=this.options.data.options.dataSource;if(g._findShowValue){var e=g._findShowValue(b,false);this.inList=e!=null}else{var c=this._getViewList();this.inList=false;if(c.length!==0){for(var d=0;
d<c.length;d++){if(c.eq(d).text()==b){this.inList=true;break}}}}if(this.inList===false){this.errorMsg=FR.i18nText("FR-Basic_Not_In_List");return false}else{return true}},_doBeforeSearch:function(){},rebuild:function(b){this.options.data=null;this.options.widgetUrl=null;this.element.empty();this.$view.empty();this.options.items=b;this.options.need2BuildList=true;if(b.widgetUrl){this.options.widgetUrl=b.widgetUrl}this._init()},_getViewList:function(){return this.$view.children(".fr-combo-list-item")
},setFocusWithIndex:function(b){a(".fr-combo-list-item",this.$view).removeClass("fr-combo-selected");this.focusIndex=b;a(".fr-combo-list-item",this.$view).eq(b).addClass("fr-combo-selected")},getData:function(){var h=this.getText();var g=h,d=this.options.data.getLoadedRecords(),e=this._getSelectedIndex();if(e>-1&&e<d.length){var c=d[e].getShowValue();if(typeof c=="string"){c=a.trim(c)}if(c==h){return d[e].getContent()}}else{for(var f=0,b=d.length;f<b;f++){if(d[f].getShowValue()==h){g=d[f].getContent();
if(this.$view){this._setSelectedIndex(f)}break}}return g}},_onKeyDown:function(c){var b=c.data;switch(c.keyCode){case FR.keyCode.DOWN:if(!b.isExpanded()){b.onTriggerClick()}else{if(b.focusIndex==undefined){b.focusIndex=b._getSelectedIndex()||0}if(b.focusIndex<(b.considerAllowBlankLength()-1)){b._setItemFocus(b.focusIndex+1,b.focusIndex);b.focusIndex=b.focusIndex+1}else{b._setItemFocus(0,b.focusIndex);b.focusIndex=0}}c.stopEvent();break;case FR.keyCode.UP:if(b.isExpanded()){if(b.focusIndex==undefined){b.focusIndex=b._getSelectedIndex()
}if(b.focusIndex-1>=0){b._setItemFocus(b.focusIndex-1,b.focusIndex);b.focusIndex=b.focusIndex-1}else{b._setItemFocus(b.considerAllowBlankLength()-1,b.focusIndex);b.focusIndex=b.considerAllowBlankLength()-1}c.stopEvent()}break;case FR.keyCode.ENTER:b.collapse();break;case FR.keyCode.TAB:if(b.isExpanded()){if(b.focusIndex!=undefined){b._setSelectedIndex(b.focusIndex)}else{b.collapse();b.editComp.blur();c.stopEvent();break}b._onEnterPressed();if(b.editComp.val()==""&&b.options.allowBlank!==false){b.inList=true
}c.stopEvent()}break}},onTriggerClick:function(){if(!this.isEnabled()){return}if(this.isExpanded()){this.collapse()}else{this._createVieList()}},_createVieList:function(c){var b=this;this.embellishView();if(this.options.need2BuildList){this.$view.empty();if(c!==false){this.tH=30;this.tW=Math.max(this.options.width,100);this.$view.height(this.tH);this.$view.width(this.tW);this.modifyPosition();this.$view.show()}FR.HtmlLoader.loadingMoreData({el:this.$view,show:true});var d=function(e){b.$view.hide();
b.checkViewScroll(e);b._setItems(e);b.options.need2BuildList=false;b.options.need2FixWidth=true;b._doExpand(c)};if(b.options.data){b.options.data.resetStatus(this.allPara.apply(this,arguments));b.options.data.loadRecordsAsync(d)}else{this.$view.hide();FR.HtmlLoader.loadingMoreData({el:this.$view});this.options.need2BuildList=false;this.options.need2FixWidth=true}}this._doExpand(c)},_doExpand:function(b){if(this.options.need2FixWidth!==false){this.fixViewWidth();this.options.need2FixWidth=false}if(b!==false){this.expand();
this.modifyPosition()}},scrollLoadMoreData:function(){if(this.isLoadingData){return}this.isLoadingData=true;FR.HtmlLoader.loadingMoreData({el:this.$view,show:true});this.options.data.resetStatusKeepData(this.allPara(this.options.data.getLength()));var b=this.data2Add();this.checkViewScroll(b);this.addData2View(b);this.isLoadingData=false},data2Add:function(){return this.options.data.appendData()},addData2View:function(c){var e=this.editComp.val();var b=-1;if(this.$view){if(!this.emptyContent){var j=this._checkAndAddEmptyContent()
}else{this.initContent(this.emptyContent,this.options.name4Empty,-1)}var m=document.createDocumentFragment();var g=this.options.data.getLength();for(var d=g-c.length;d<g;d++){var l=d+c.length-g;var h=a("<div/>");m.appendChild(h[0]);var f=c[l].getShowValue();this.initContent(h,f,d);if(b<0&&f==e){b=l}}a(this.$view[0]).css("width","auto");this.$view[0].appendChild(m);this.$view.append(j||this.emptyContent);FR.HtmlLoader.loadingMoreData({el:this.$view});this._setSelectedIndex(b);if(this.$view.width()<this.element.width()){var k=this.element.width();
if(this.addedScrollWidth){k+=this.scrollBarWidth}this.$view.width(k-2)}}},initContent:function(b,e,d){if(e==null){e=""}var c=this;b.height(this.options.sonHeight).attr("title",e).text(e).addClass(d>-1?"fr-combo-list-item":"fr-combo-list-item fr-combo-list-item-noselect").hover(function(f){c.setFocusWithIndex(d);setTimeout(function(h){if(!h){return}var g=a(h.target);if(c.$view[0].style.display!="none"&&g.isChildAndSelfOf(a(this).parent().children())){a(this).removeClass("fr-combo-selected")}},10)}).click(function(f){c.inList=true;
c.fireEvent(FR.Events.CLICK);c._setSelectedIndex(d>-1?d:c.getItemsLength());c._onEnterPressed()})},_checkAndAddEmptyContent:function(){if(this.options.allowBlank===false){return}this.emptyContent=a("<div/>");this.initContent(this.emptyContent,this.options.name4Empty,-1);return this.emptyContent},checkViewScroll:function(b){this.$view.need2Scroll=this.options.limitData<=b.length},embellishView:function(){if(this.viewEmbellished){return}a(".fr-combo-list").hide();var b=this;if(!this.$view){this.$view=a("<div/>").appendTo(FR.$view_container).height(20)
}this.$view.addClass("fr-combo-list").css({position:"absolute",width:"auto","z-index":"999"}).scroll(function(){if(b.$view.need2Scroll&&a(this).scrollTop()+a(this).height()>=this.scrollHeight){b.scrollLoadMoreData()}});this.viewEmbellished=true},_setItems:function(b){var c=this.options.sonHeight,e=this.considerAllowBlankLength();var d=this.options.maxCount||10;this.tH=e>d?(c+2)*d:(c+2)*e;this.$view.height(this.tH);this.addData2View(b);this.tW=this.$view.width()},expand:function(){if(this.isExpanded()){return
}this._showView();a(document).bind("mousedown",this,this.collapseIf).bind("mousewheel",this,this.collapseIf);if(this.options.write&&this.options.write.lgp){this.options.write.lgp.$container.bind("scroll",this,this.collapseIf)}if(document.activeElement!=this.editComp[0]){this.editComp.focus()}this.fireEvent(FR.Events.EXPAND)},_showView:function(){this.$view.show()},_setItemFocus:function(b,c){var d=this.$view.children(".fr-combo-list-item");a(d[c]).removeClass("fr-combo-selected");a(d[b]).addClass("fr-combo-selected").__scroll2View__(this.$view,false)
},setEnable:function(b){FR.ComboBoxEditor.superclass.setEnable.apply(this,arguments);if(b===false){this.collapse()}},setVisible:function(b){FR.ComboBoxEditor.superclass.setVisible.apply(this,arguments);if(b===false){this.collapse()}},isFiltering:function(){return !FR.isEmpty(this.searchText)},fixViewWidth:function(){if(a.browser.msie&&a.browser.version<"8.0"){var e=0;var f=a(".fr-combo-list-item",this.$view);for(var c=0;c<f.length;c++){var b=FR.byteLength(f.eq(c).text())*6+30;e=Math.max(e,b)}this.$view.width(this.options.mutiSelection?e+30:e+10)
}if(!a.browser.msie&&this.$view.children().length>this.options.maxCount&&!this.addedScrollWidth){this.$view.width(this.$view.width()+this.scrollBarWidth);this.addedScrollWidth=true}if(this.$view.width()<this.element.width()){var d=this.element.width();this.$view.width(this.element.width()-2)}if(a.browser.msie&&a.browser.version<"8.0"&&this.$view.width()<120){this.$view.width(120)}if(a.browser.msie){this.$view.css("overflow-x","visible")}}});a.shortcut("combo",FR.ComboBoxEditor)})(jQuery);
(function(a){FR.CheckBoxEditor=FR.extend(FR.ComboBoxEditor,{_defaultConfig:function(){return a.extend(FR.CheckBoxEditor.superclass._defaultConfig.apply(),{delimiter:",",startSymbol:"",endSymbol:"",itemCheckOnClass:".fr-checkbox-checkon",itemCheckOffClass:".fr-checkbox-checkoff"})},_init:function(){FR.CheckBoxEditor.superclass._init.apply(this,arguments);this.$view.addClass("fr-checkbox-list");this._initCheckBoxContainer();this.options.delimiter=this.options.delimiter.replace(/\\r/g,"\n")},_initCheckBoxContainer:function(){if(!this.ck_el_array){this.ck_el_array=[]
}},_setItems:function(d){var c=d||[];var e=this.options.sonHeight;var g=this.options.maxCount||10;var f=c.length>g?(e+2)*g:(e+2)*c.length;this.$view.height(f+e);this.tH=f+e;this.modifyPosition();var b=this;this.initControlPane();this.innerCheckBox=b._createInnerCheckBox();this.innerCheckBox.on(FR.Events.CLICK,function(){b.editComp.val("");if(this.selected()){b.doSelectAll()}else{b.deSelectAll()}b.editComp.focus()});this.$view.append(this.$controlPane);this.ck_el_array=[];this.addData2View(c)},initControlPane:function(){this.$controlPane=a("<div style='padding-right:20px'>").addClass("fr-checkbox-control")
},_createInnerCheckBox:function(){var b=this;return new FR.CheckBox({renderEl:a("<div/>").appendTo(b.$controlPane),text:FR.i18nText("FR-Engine_Choose_All")+"/"+FR.i18nText("FR-Engine_Deselect_All")})},addData2View:function(e){var l=this;var c=this.ck_el_array.length;for(var g=c,k=c+e.length;g<k;g++){var f=e[g-c];var b=a("<div/>").height(this.options.sonHeight).attr("title",f.getShowValue()).addClass("fr-combo-list-item").appendTo(this.$view);var j=this._createItemCheckBox(b,f);if(this.inAllSelectModel===true||a.inArray(f.getShowValue(),l.text)!==-1){j.setSelectedWithoutEvent(true)
}this.ck_el_array[g]=j}if(!this.options.isInited){var h;if(typeof this.options.value=="string"){h=this.options.value.split(this.options.delimiter)}else{if(FR.isArray(this.options.value)){h=this.options.value}}if(!FR.isEmpty(h)&&!FR.isEmptyArray(h)){a.each(this.ck_el_array,function(i,o){var m=o.options.value;var n=o.options.text;if(h.indexOf(m+"")!=-1||h.indexOf(n+"")!=-1||h.indexOf(m)!=-1||h.indexOf(n)!=-1){o.changeBoxState(true)}else{if(o.isSelected()){o.changeBoxState(false)}}})}this.options.isInited=true
}var d=a(this.options.itemCheckOnClass,this.$view);if(d.length==this.ck_el_array.length){this.innerCheckBox.selected(true)}FR.HtmlLoader.loadingMoreData({el:this.$view})},_createItemCheckBox:function(b,e){var c=this;var d=new FR.CheckBox({renderEl:a("<div/>").appendTo(b),text:e.getShowValue(),value:e.getValue(),listeners:[{eventName:FR.Events.STATECHANGE,action:function(){c.editComp.val("");c.fireEvent(FR.Events.CLICK);if(!this.isSelected()){c.innerCheckBox.setSelected(false);if(c.inAllSelectModel){c.inAllSelectModel=false
}}else{var f=a(this.options.itemCheckOnClass,c.$view);if(f.length==c.ck_el_array.length){c.innerCheckBox.setSelected(true)}}c._refreshComponentValue(this);c.editComp.focus()}}]});return d},_doBeforeSearch:function(){this.searchText=this.editComp.val()},_onEnterPressed:function(){var b=this._getSelectedIndex();var c=this.ck_el_array[b];if(c){c.setSelected(!c.isSelected())}this.collapse()},_refreshComponentValue:function(b){if(!this.text){this.text=[]}if(b.isSelected()){this.text.push(b.getText())}else{this.text.remove(b.getText())
}this._setCompText(this.text);this.fireEvent(FR.Events.AFTEREDIT)},modifyPosition:function(){this.options.offset={top:this.element.offset().top,left:this.element.offset().left};this.tW=this.$view.width();FR.CheckBoxEditor.superclass.modifyPosition.apply(this,arguments)},data2Add:function(){if(this.inAllSelectModel===true){var f=[];var c=this.options.data.getRecords();var e=this.ck_el_array.length;for(var d=0,b=c.length;d<this.options.limitData;d++){if(d+e>=b){break}f[d]=c[d+e]}return f}else{return this.options.data.appendData()
}},doSelectAll:function(){var c=[];var d=this;if(this.isFiltering()){a.each(this.ck_el_array,function(e,f){f.setSelectedWithoutEvent(true);c.push(f.getText())})}else{if(!this.allRecords){this.inAllSelectModel=true;var b=this.createDependencePara4Data();b.parameter.startIndex=0;b.parameter.limitIndex=0;this.options.data.resetStatus(b);this.allRecords=this.options.data.executeData();this.options.data.records=this.allRecords}a.each(d.allRecords,function(e,f){c.push(f.getShowValue())});a.each(this.ck_el_array,function(e,f){f.setSelectedWithoutEvent(true)
})}this._setCompText(c);d.fireEvent(FR.Events.AFTEREDIT)},deSelectAll:function(){var b=this;a.each(this.ck_el_array,function(c,d){d.setSelectedWithoutEvent(false)});this.inAllSelectModel=false;this._setCompText([]);b.fireEvent(FR.Events.AFTEREDIT)},_dealValueWithEvents:function(g){var d=this;var e=this.getValue();if(g==""){this._setCompText([]);d.options.need2BuildList=true;return}var f;if(typeof g==="string"){if(!this.options.returnArray){if(g.startWith(this.options.startSymbol)){g=g.substring(this.options.startSymbol.length)
}if(g.endWith(this.options.endSymbol)){g=g.substring(0,g.length-this.options.endSymbol.length)}}f=g.split(this.options.delimiter)}else{f=a.makeArray(g)}var c=this.options.data.getRecords();var b=false;if(c.length>0){a.each(f,function(j,k){for(var l=0,h=c.length;l<h;l++){if(c[l].getValue()==k){f[j]=c[l].getShowValue();b=true;break}}})}if(!FR.equals(this.text,f)){this.options.need2BuildList=true}this._setCompText(f);if(arguments[1]!==false){this.fireEvent(FR.Events.AFTEREDIT,g,e)}},isValueInList:function(){return true
},getValue:function(){var k=this;var g=this._getCompText();if(!this.options.data){return}var c=this.options.data.getLoadedRecords();var e={};var j={};for(var d=0,f=c.length;d<f;d++){e[c[d].getShowValue()]=c[d].getValue()}var b=this.options.data.options.dataSource;a.each(g,function(m,q){var p=null;if(!k.isEmptyMap(j)){p=j[q]}else{p=e[q]}if(p==null&&k.isEmptyMap(j)&&b._findAllValue){var n=b._findAllValue();if(!FR.isEmpty(n)){for(var o=0,l=n.length;o<l;o++){j[n[o].text]=n[o].value}p=j[q]}}if(p==null&&b._findShowValue){p=b._findShowValue(g[m],false)
}if(FR.isEmpty(p)){if(k.options.customData){g[m]=q}}else{g[m]=p}});if(this.options.returnArray){return g}var h=this.options.startSymbol+g.join(this.options.delimiter)+this.options.endSymbol;return h},isEmptyMap:function(c){for(var b in c){if(b){return false}}return true},getText:function(){var b=this._getCompText();return this.options.returnArray?b:this.options.startSymbol+b.join(this.options.delimiter)+this.options.endSymbol},_setCompText:function(b){this.text=b;this.editComp.val(b.join(this.options.delimiter))
},_getCompText:function(){return this.editComp.val().split(this.options.delimiter)},rebuild:function(b){this.reset();FR.CheckBoxEditor.superclass.rebuild.apply(this,arguments)},reset:function(){this.ck_el_array=[];this.text=null;this.setValue("");this.shouldReBuildList();this.allRecords=null}});a.shortcut("combocheckbox",FR.CheckBoxEditor)})(jQuery);
FR.TagCheckBoxEditor=FR.extend(FR.CheckBoxEditor,{_defaultConfig:function(){return $.extend(FR.TagCheckBoxEditor.superclass._defaultConfig.apply(),{tagBaseClass:"fr-tageditor",minWidth4Edit:24,tagMargin:4,animateSpeed:100})},_init:function(){FR.TagCheckBoxEditor.superclass._init.apply(this,arguments);this._initTagContainer();this.startTagIdx=-1;this.widthFix=0;if(FR.Browser.isIE6Before()){this.widthFix=4}},_editCompBlur:function(){if(this.options.watermark&&this.text&&this.text.length>0){this.removeWaterMark.defer(0,this)
}},_editCompBlurValidValue:function(){if(this.options.allowBlank===false&&(!this.text||this.text.length===0)){this.errorMsg=this.options.errorMsg||FR.i18nText("FR-Base_NOT_NULL_Des");this.invalidateCss()}else{this.validateCss()}this.searchText="";var a=this.editComp.val();if(a!=""){a=this._getEditTagFullValue(a);this._appendTagFromInput(a);this.editComp.val("");this._editCompBlur()}},_doBeforeSearch:function(){},_initTagContainer:function(){var c=this.options;c.minWidth4Edit=Math.max(2*c.fontSize,c.minWidth4Edit);
var a=this.editComp.height(),b=c.tagBaseClass;this.tagContainer=$("<div/>").addClass(b+"-container").height(a).prependTo(this.triggerTextComp);this.tagWrap=$("<span/>").addClass(b+"-wrapper").appendTo(this.tagContainer)},_bindEvent2Tag:function(a){var b=this,c=this.options;a.click(function(){b._setTagSelect($(this))});a.dblclick(function(){if(c.directEdit!==false&&c.customData!==false){b._editTag($(this))}})},_editTag:function(d){var c=this.tagWrap.children().index(d)+this.startTagIdx+1;d.hide();
var a=$("<input type='text'/>").addClass("fr-tageditor-tag-edit").val(d.text()).css({width:d.outerWidth(),"font-size":this.options.fontSize}).insertAfter(d);this.isTagEditing=true;var b=this;a.blur(function(){b.collapse();b.isTagEditing=false;var e=$(this).val();$(this).remove();if(e===""){b._removeTag(d)}else{d.text(e);e=b._getEditTagFullValue(e);b._spliceTagData(c,e);d.show();b._loadMoreTags(b.text);b._modifyTagPosition();b._moveViewToShow(d)}b.fireEvent(FR.Events.STOPEDIT)});a.keyup(function(g){var f=g.keyCode;
if(!FR.isNavKeyPress(g)){b._spliceTagData(c,a.val());b.fireEvent(FR.Events.AFTEREDIT)}else{if(f===FR.keyCode.ENTER){$(this).blur()}}});a.focus()},_setCompText:function(a){this.text=a;if(this.tagWrap){this.tagWrap.empty();this.startTagIdx=a.length-1;this._loadMoreTags(a);this._modifyTagPosition();this._moveViewToShow()}else{FR.TagCheckBoxEditor.superclass._setCompText.apply(this,arguments)}},_loadMoreTags:function(b){if(this.startTagIdx>=0){var a=this.element.width()-this.options.minWidth4Edit-this.btnWidth;
while(this.tagWrap.width()<a&&this.startTagIdx>=0){this._createTagFromText(b[this.startTagIdx]).prependTo(this.tagWrap);this.startTagIdx--}}},_appendTagFromInput:function(b){if(this.checkValid(b)){if($.inArray(b,this.text)===-1){this._pushTagData(b);this._createTagFromText(b).appendTo(this.tagWrap);this._modifyTagPosition();this._moveViewToShow();var a=$.grep(this.ck_el_array,function(c){return c.getText()==b});if(a&&a[0]){a[0].changeBoxState(true)}this.fireEvent(FR.Events.AFTEREDIT)}}else{FR.Msg.toast(this.errorMsg)
}},_getEditTagFullValue:function(a){return a},_pushTagData:function(a){if(!this.text){this.text=[]}this.text.push(a)},_spliceTagData:function(a,b){if(b==undefined){this.text.splice(a,1)}else{this.text.splice(a,1,b)}},_removeTag:function(d,c){if(c){this.text.pop()}else{var b=this.tagWrap.children().index(d)+this.startTagIdx+1;this._spliceTagData(b)}var a=d.next();d.remove();this.fireEvent(FR.Events.AFTEREDIT);this.inAllSelectModel=false;this.options.need2BuildList=true;this._loadMoreTags(this.text);
this._modifyTagPosition();this._setTagSelect(a)},_getCompText:function(){this.text=this.text||[];return this.text.slice(0)},_createTagFromText:function(f){var e=this.options;var b=f;if($.isArray(f)){b=f[f.length-1]}if(FR.isEmpty(b)){return $("")}var a=this.editComp.height();var d=this.options.tagBaseClass;var c=$("<span/>").addClass(d+"-tag").text(b).css({"line-height":a+"px",margin:"0 "+e.tagMargin/2+"px","font-size":this.options.fontSize});this._bindEvent2Tag(c);return c},_modifyTagPosition:function(){var d=this.options;
var b=d.minWidth4Edit;var c=d.tagBaseClass;if(d.isEditable){this.tagContainer.appendTo(this.triggerTextComp)}var f=$("."+c+"-container",this.triggerTextComp);var a=$.support.boxModel?this.triggerTextComp.width():this.triggerTextComp.width()-2;var e=this.tagWrap.width();if(a-e<b){this.editComp.outerWidth(b-this.widthFix);f.width(a-b)}else{this.editComp.outerWidth(a-e-this.widthFix);f.width(e)}},_setTagSelect:function(e){var c=this.options.tagBaseClass;var b=c+"-tag-select";$("#"+b,this.tagWrap).removeAttr("id");
if(e){var a=this;var d=function(f){if(a.isTagEditing){return}if(f.keyCode==FR.keyCode.DELETE||f.keyCode==FR.keyCode.BACKSPACE){FR.Keys.unreg(d);a._removeTag(e)}else{if(f.keyCode==FR.keyCode.LEFT){if(e.prev().length>0){a._setTagSelect(e.prev())}}else{if(f.keyCode==FR.keyCode.RIGHT){a._setTagSelect(e.next());if(e.next().length===0){a.editComp.focus()}}}}};FR.Keys.reg(d);$("body").bind("mousedown.tagselect",function(f){if(!$(f.target).isChildAndSelfOf(a.tagWrap)){FR.Keys.unreg(d);$("#"+b,a.tagWrap).removeAttr("id")
}});e.attr("id",c+"-tag-select");this._moveViewToShow(e)}else{this._moveViewToShow()}},_editCompFocus:function(){var a=this.editComp.val();if(a!=""){this._setCompText(this.text);if(!this.isFiltering()){this.editComp.val("")}}else{this._setTagSelect()}},_moveViewToShow:function(h){var b=this.options,k=this;var a=this.tagContainer.width(),d=this.tagWrap.width();if(h&&h.length>0){if(this.editComp.outerWidth()>this.options.minWidth4Edit){return}var c=this.tagWrap.offset().left;var j=this.tagContainer.offset().left;
var e=c-j;var i=h.width();var f=j+a/2-i/2;while(this.startTagIdx>=0&&h.offset().left<f){this._createTagFromText(this.text[this.startTagIdx]).prependTo(this.tagWrap);this.startTagIdx--}var g=h.offset().left-f;d=this.tagWrap.width();if(g<0){g="-="+Math.max(g,e)}else{g="-="+Math.min(g,d-a+e)}}else{g=Math.min(a-d,0)}this.tagWrap.animate({left:g},b.animateSpeed)},_onKeyDown:function(f){var b=f.keyCode,a=f.data;if(b==FR.keyCode.ENTER){if(this.value==""){a.collapse()}else{a._appendTagFromInput(this.value);
a.editComp.val("");a._editCompBlur()}f.stopEvent()}else{if(b==FR.keyCode.LEFT){if(this.value==""&&a.tagWrap.children().length>0){var c=a.options.tagBaseClass;a._setTagSelect($("."+c+"-tag:last",a.tagWrap));a.editComp.blur();f.stopEvent()}}else{if(b==FR.keyCode.BACKSPACE){if(this.value==""&&a.tagWrap.children().length>0){var c=a.options.tagBaseClass;var d=$("."+c+"-tag:last",a.tagWrap);a._removeTag(d,true);f.stopEvent()}}}}FR.CheckBoxEditor.superclass._onKeyDown.apply(this,arguments)},__makeSureInputValueInResList:function(){if(this.searchText==undefined){return
}var d=this.searchText;var a=d.split(/[,;，；]/);var b=d.endWith(",")||d.endWith(";")||d.endWith("，")||d.endWith("；");if(!b){return}for(var c=0;c<a.length;c++){if(a[c]!=""){this._checkAndAddTag(a[c]);this.fireEvent(FR.Events.AFTEREDIT);break}}},_checkAndAddTag:function(b){if(FR.isEmpty(b)||b==""){return}this.searchText=b;FR.CheckBoxEditor.superclass.__makeSureInputValueInResList.apply(this,arguments);if(this.inList||this.options.customData){if(this.text==undefined){this.text=[]}if($.inArray(b,this.text)===-1){this._pushTagData(b);
this._addResultTag(b);this.searchText=null;this.editComp.val("");var a=$.grep(this.ck_el_array,function(c){return c.getText()==b});if(a&&a[0]){a[0].changeBoxState(true)}this.collapse();this.options.need2BuildList=true;this.editComp.focus()}}else{FR.Msg.toast("No custom value allowed");this.editComp.val(b)}},_addResultTag:function(a){this.tagWrap.append(this._createTagFromText(a));this._modifyTagPosition()},validateCss:function(){this.editComp.removeClass("fr-trigger-invalid");this.editComp.removeClass("fr-trigger-text-invalid");
this.editComp.removeAttr("title")},invalidateCss:function(){this.editComp.addClass("fr-trigger-invalid");this.editComp.addClass("fr-trigger-text-invalid");this.editComp.attr("title",this.getErrorMsg())},startEditing:function(){FR.TagCheckBoxEditor.superclass.startEditing.apply(this,arguments);this._modifyTagPosition()},reset:function(){FR.TagCheckBoxEditor.superclass.reset.apply(this,arguments);this.inAllSelectModel=false;this.tagContainer&&this.tagContainer.remove();delete this.tagContainer;this._initTagContainer();
if(this.options.watermark){this.removeWaterMark();this.setWaterMark()}},setText:function(a){if(this.options.isEditable){this.tagContainer&&this.tagContainer.remove()}this.editComp.val(a)}});$.shortcut("tagcombocheckbox",FR.TagCheckBoxEditor);
(function(a){FR.TreeComboBoxEditor=FR.extend(FR.TagCheckBoxEditor,{_defaultConfig:function(){return a.extend(FR.TreeComboBoxEditor.superclass._defaultConfig.apply(),{width:120,height:300,returnArray:true,delimiter:";",nodeDelimiter:/[;；]/,pathDelimiter:/[,，]/,startSymbol:"",endSymbol:"",cascadecheck:true,mutiSelection:false,limitData:300,autoFixWidth:true})},_init:function(){FR.TreeComboBoxEditor.superclass._init.apply(this,arguments);this.$view.attr("id",this.options.location)},initData:function(){if(this.options.data){return
}if(this.options.rootLoader){this.options.data=new FR.TreeData({treeLoader:this.options.rootLoader})}else{if(this.options.widgetUrl){this.options.data=new FR.TreeData({url:this.options.widgetUrl})}else{if(this.options.items){this.options.data=new FR.ItemTreeData({items:this.options.items})}}}if(this.options.controlAttr){this.setSource(this.options.controlAttr);delete this.options.controlAttr}},_setItems:function(f){this.tH=150;this.$view.height(this.tH);var b=FR.createTreeConfig4Widget(this);var c=this.options.data.getData();
var l=this.options.selectLeafOnly;var k=this.options.mutiSelection;var j=[];this.value=this.value||[];this.text=this.text||[];if(this.options.autoMatch!==false){var h=this.searchText||this.editComp.val();if(typeof h=="string"){h=FR.isEmpty(h)?"":h.replace(/[,;，；]$/,"")}if((h.indexOf(";")!=-1||h.indexOf("；")!=-1)&&k){var g=FR.parseString2Array4Tree(h,this);for(var e=0;e<g.length;e++){var n=FR.getValidTreeTrace(g[e],c,l);if(FR.isArray(n)&&!FR.isEmptyArray()){j.push(n)}}}else{if(h.indexOf(",")!=-1||h.indexOf("，")!=-1){j=FR.getValidTreeTrace(h.split(/[,，]/),c,l)
}else{if(h!=""){j=FR.getTreeTrace(h,c,k,l)}}}if(k){j=this.value}else{this.value=FR.isEmptyArray(j)?a.makeArray(h):j}}else{if(k){j=this.value}else{j=this.editComp.val().split(this.options.delimiter)}}FR.setAllNodeState(c,0);if(FR.isArray(j)&&!FR.isEmptyArray(j)){if(k){j=FR.parseTo2DArray(j);for(var d=0;d<j.length;d++){FR.setNodeStateByInitValue(c,0,j[d],l)}}else{FR.findSelectedNode(c,0,j,b)}}this._createTreeView(b);this.options.isInited=true;this.options.need2BuildList=false},_createTreeView:function(b){this.$view.treeview(b)
},_editCompBlur:function(){if(this.options.mutiSelection){FR.TreeComboBoxEditor.superclass._editCompBlur.apply(this,arguments)}},_editCompBlurValidValue:function(){if(this.options.allowBlank===false&&(!this.text||this.text.length===0)){this.errorMsg=this.options.errorMsg||FR.i18nText("FR-Base_NOT_NULL_Des");this.invalidateCss()}else{this.validateCss()}if(this.options.mutiSelection){var b=this.editComp.val();if(b!=""){b=this._getEditTagFullValue(b);this.options.need2BuildList=true;this.searchText="";
this._appendTagFromInput(b);this.editComp.val("");this._editCompBlur()}}},_getEditTagFullValue:function(b){return b.split(/[,，]/)},_pushTagData:function(b){this.text.push(b);this.value.push(b)},_spliceTagData:function(b,c){if(c==undefined){this.text.splice(b,1);this.value.splice(b,1)}else{this.text.splice(b,1,c);this.value.splice(b,1,c)}},_removeTag:function(d,c){if(c){this.value.pop();this.text.pop()}else{var b=this.tagWrap.children().index(d)+this.startTagIdx+1;this._spliceTagData(b)}d.remove();
this.fireEvent(FR.Events.AFTEREDIT);this.inAllSelectModel=false;this.options.need2BuildList=true;this._loadMoreTags(this.text);this._modifyTagPosition();this._moveViewToShow()},_onKeyDown:function(b){if(b.data.options.mutiSelection){FR.TreeComboBoxEditor.superclass._onKeyDown.apply(this,arguments)}},setOptions:function(b){this.$view.setOptions(b)},setTraversal:function(b){this.setOptions({traversal:b})},_editCompFocus:function(){if(this.options.mutiSelection){FR.TreeComboBoxEditor.superclass._editCompFocus.apply(this,arguments)
}},checkViewScroll:function(){},initFilterData:function(){if(!this.options.filterData){this.options.data=new FR.TreeData({url:this.options.widgetUrl})}else{this.options.data=this.options.filterData}},_ajaxSearch:function(){if(this.searchText||this.searchText===0){this.initFilterData()}else{this.initData()}FR.TreeComboBoxEditor.superclass._ajaxSearch.apply(this,arguments)},_onEnterPressed:function(g,f){if(!this.options.mutiSelection){this.text=this.$view.getTCPText();this.value=this.$view.getTCPValue();
var d=this.text.length;this.editComp.val(d===0?"":this.text[d-1]);this.collapse()}else{if(!this.options.selectLeafOnly){var j=g.getValuePath();var h=FR.parseString2Array4Tree(g.getShowValue(),this);if(g.getcheckstate()===1){this.value.push(j);this.text.push(h)}else{if(g.getcheckstate()===0){for(var e=0;e<this.value.length;e++){if(FR.equals(j,this.value[e])){this.value.remove(this.value[e]);break}}this.text.remove(h)}}this._dealWithEditComp()}else{this.text=this.$view.getTCPTexts();this.value=this.$view.getTCPValues();
var c=this.text;var b=[];for(var e=0;e<c.length;e++){b.push(c[e][c[e].length-1])}this._dealWithEditComp(b)}}this.fireEvent(FR.Events.CLICK);if(f!==false){this.fireEvent(FR.Events.AFTEREDIT)}},_dealWithEditComp:function(b){var c=b||this.text;this.editComp.val("");this.editComp.focus();this._setCompText(c)},_dealValueWithEvents:function(g){if(g===""){return}var d=this.getValue();var e;if(typeof g==="string"){e=FR.parseString2Array4Tree(g,this);if(FR.isEmptyArray(e)){e=g.split(this.options.delimiter)
}}else{e=a.makeArray(g)}var c=[];var f=[];if(!this.options.mutiSelection){FR.findTrueValue(this.options.data.getData(),0,e,c,f)}else{e=FR.parseTo2DArray(e);for(var b=0;b<e.length;b++){FR.findTrueValue(this.options.data.getData(),0,a.isArray(e[b])?e[b]:e[b].split(","),c,f)}}if(c.length!==0){this.text=c.slice(0);this.value=this.options.mutiSelection?f:f[0]}else{this.text=e.slice(0);this.value=e}this._setCompText(this.text);if(!FR.equals(d,g)){this.options.need2BuildList=true}if(arguments[1]!==false){this.fireEvent(FR.Events.AFTEREDIT)
}},dealWithDisplayValue:function(b){if(b==undefined||(this.options.mutiSelection&&b==="")){return}var c;if(typeof b==="string"){c=FR.parseString2Array4Tree(b,this);if(FR.isEmptyArray(c)){c=b.split(this.options.delimiter)}}else{c=a.makeArray(b)}this._setCompText(c.slice(0))},_setCompText:function(b){if(this.options.mutiSelection){FR.TreeComboBoxEditor.superclass._setCompText.apply(this,arguments)}else{FR.TagCheckBoxEditor.superclass._setCompText.apply(this,arguments)}},getValue:function(){return FR.getTreeValueResult(this._getEditVal(),this.options.mutiSelection,this.options.returnFullPath)
},getFullPathValue:function(){return FR.getTreeValueResult(this._getEditVal(),this.options.mutiSelection,true)},_getEditVal:function(){var b=[];if(this.editComp&&this.editComp.val()==""&&!this.options.mutiSelection){b=[""]}if(this.value){b=this.value}else{if(this.$view&&this.options.isInited&&a.isFunction(this.$view.getTCPValue)){if(!this.options.mutiSelection){this.value=this.$view.getTCPValue()||this.editComp.val().split(this.options.delimiter)}else{this.value=this.$view.getTCPValues()||this.editComp.val().split(this.options.delimiter)
}b=this.value}}return b},getText:function(){var b;if(this.text){b=this.text}else{b=FR.parseString2Array4Tree(this.editComp.val(),this)}return FR.getTreeValueResult(b,this.options.mutiSelection,this.options.returnFullPath)},fixViewWidth:function(){FR.TreeComboBoxEditor.superclass.fixViewWidth.apply(this,arguments);this.options.oriWidth=this.$view.width()},isComboBoxTree:function(){return true},reset:function(){this._dealValueWithEvents([]);this.shouldReBuildList();this.options.isInited=false},getValueNodes:function(){return this.$view.getTSNs()
},getNode:function(b){return this.$view.getNode(b)},getSelectedNodes:function(){this.selectedNodes=this.getValueNodes();this.fireEvent(FR.Events.DEALSELECTEDNODES);return this.selectedNodes},getNodeByID:function(g,c){if(!c){c=this.options.data.getData()}for(var f=0,b=c.length;f<b;f++){if(c[f].getID()===g){return c[f]}if(c[f].ChildNodes||(c[f].data&&c[f].data.ChildNodes)){var e=c[f].getChildren();if(!e||(e.length===0)){continue}var d=this.getNodeByID(g,e);if(d){return d}}}},isValueInList:function(b){if(_.isArray(b)&&FR.isEmpty(b.toString())){return true
}if(this.options.data.options.treeLoader&&this.options.data.options.treeLoader.options&&this.options.data.options.treeLoader.options.rootSource&&this.options.data.options.treeLoader.options.rootSource._findShowValue){return this.options.data.options.treeLoader.options.rootSource._findShowValue(b,false)!=null}return true},isValidate:function(b){if(!FR.BaseComboBoxEditor.superclass.isValidate.apply(this,arguments)){return false}var c=b!=null?b:this.getFullPathValue();if(!this.options.customData&&!FR.isEmpty(c)&&!this.isValueInList(c)){this.errorMsg=FR.i18nText("FR-Engine-Not_In_List");
this.invalidateCss();return false}return true}});a.shortcut("treecombobox",FR.TreeComboBoxEditor)})(jQuery);
FR.DateTimeEditor=FR.extend(FR.BaseDateTimeEditor,{_defaultConfig:function(){return $.extend(FR.DateTimeEditor.superclass._defaultConfig.apply(),{format:"yyyy-MM-dd",directEdit:true})},_init:function(){FR.DateTimeEditor.superclass._init.apply(this,arguments);this.switchArrow();if(this.options.widgetCss&&this.options.widgetCss.length!==0){$.each(this.options.widgetCss,function(c,d){FR.$import(d,"css",true)})}var b=this.options;this.viewMode=this._initViewMode();this.std=this._createStartDate(b.startDate,b.format,this.viewMode);
this.edd=this._createEndDate(b.endDate,b.format,this.viewMode);var a=this;if(!this.$view){this.$view=$("<div/>").appendTo(FR.$view_container).hide()}this.editComp.keydown(function(c){a.editComp[0].realValue=null});$(this.editComp).keyup(function(){if($(this).val()==a.oriText){return}a.isValidateInput();a.oriText=$(this).val();a.fireEvent(FR.Events.AFTEREDIT)})},getArrowIconHeight:function(){return 17},switchArrow:function(){this.arrow.switchClass("fr-trigger-center","fr-date-trigger-center")},_applyInvalidCss:function(a){this.errorMsg=a;
this.invalidateCss()},onTriggerClick:function(a){if(!this.isEnabled()){return}if(document.activeElement!=this.editComp[0]){this.editComp.focus()}if(this.isExpanded()){if(FR.Browser.isIE8()&&this.$view.css("visibility")=="hidden"){this.$view.css("visibility","visible")}else{this.$view.show()}}else{this.$view.empty();this._createCalendar()}},_showView:function(){if(FR.Browser.isIE8()&&this.$view.css("visibility")=="hidden"){this.$view.css("visibility","visible")}else{this.$view.show()}},_createStartDate:function(d,b,e){if(FR.isEmpty(d)){return null
}var a=FR.str2Date(d,b);switch(e){case 0:return new Date(a.getFullYear(),a.getMonth(),1,0,0,0);case 1:return new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0);case 2:var c=new Date();c.setHours(0);c.setMinutes(0);c.setSeconds(0);return c;case 3:return new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0);default:return a}},_createEndDate:function(c,a,e){if(FR.isEmpty(c)){return null}var d=FR.str2Date(c,a);switch(e){case 0:return new Date(d.getFullYear(),d.getMonth(),d.getMonthDays(),23,59,59);
case 1:return new Date(d.getFullYear(),d.getMonth(),d.getDate(),23,59,59);case 2:var b=new Date();b.setHours(23);b.setMinutes(59);b.setSeconds(59);return b;case 3:return new Date(d.getFullYear(),d.getMonth(),d.getDate(),23,59,59);default:return d}},modifyPosition:function(){this.tH=this.$view.height();this.tW=this.$view.width();FR.DateTimeEditor.superclass.modifyPosition.apply(this,arguments)},_initViewMode:function(){var b=this.options;var a=1;if(b.format.match(/[YyDd]/)&&b.format.match(/[Hh]/)){a=3
}else{if(b.format.match(/[M]/)&&!b.format.match(/[Dd]/)&&!b.format.match(/[Hh]/)){a=0}else{if(!b.format.match(/[YyMDd]/)){a=2}}}return a},_createCalendar:function(){var e=this.options;var b=this;if(this.options.need2BuildConfig===true&&this.options.data){this.options.data.resetStatus(this.createDependencePara4Data());var c=this.options.data.getData();if(c[0].data){if(c[0].data.startDate){var d=new Date(c[0].data.startDate);if(!FR.isInvalidDate(d)){e.startDate=FR.date2Str(d,"yyyy-MM-dd");this.std=this._createStartDate(e.startDate,e.format,this.viewMode)
}}if(c[0].data.endDate){var a=new Date(c[0].data.endDate);if(!FR.isInvalidDate(a)){e.endDate=FR.date2Str(a,"yyyy-MM-dd");this.edd=this._createEndDate(e.endDate,e.format,this.viewMode)}}}this.options.rebuildConfig=false}this.datepicker=new FR.DatePicker({renderEl:this.$view,viewMode:this.viewMode,date:FR.str2Date(this.editComp.val(),e.format),dateFormat:e.format,startDate:this.std,endDate:this.edd,onDateUpdate:function(){b.editComp.val(FR.date2Str(this.getValue(),e.format));b.isValidateInput();b.fireEvent(FR.Events.AFTEREDIT)
}});if(FR.Browser.isIE8()&&this.$view.css("visibility")=="hidden"){this.$view.css("visibility","visible")}else{this.$view.show()}$(document).bind("mousedown",this,this.collapseIf);this.modifyPosition()},getValue:function(){var d=this.options.format;if(!this.options.returnDate){var c=this.editComp.val();return FR.str2Date(c,d)==null?"":c}var b=new Date();if(this.editComp[0].realValue){b.setTime(this.editComp[0].realValue.getTime())}else{b=this.editComp.val()}if(!b){return""}var a=(b instanceof Date)?b:FR.str2Date(b,d);
return(a==null)?"":a},isValidateInput:function(j){var h=this.options.format;var e=this.std;var f=this.edd;var i=this;var a=true;var b=this.options.customFormat;var c=j?j:this.editComp.val();var d=FR.matchDateFormat(c,h);if(!b&&!d){a=false;var g=function(){var n=i.editComp.val();if(c==n){var l=i.getDefaultSupportFormat();for(var m=0;m<l.length;m++){var k=FR.matchDateFormat(c,l[m]);if(k){d=k;a=true;i.editComp.val(FR.date2Str(d,h));this.isValidateInput();break}}}};g.defer(1000,this)}if(!b&&!a){if(!FR.matchDateFormat(c,h)){this._applyInvalidCss(FR.i18nText("FR-Designer_Please_input_with_right_format")+":"+h)
}}else{if(e&&!FR.isInvalidDate(new Date(e))&&d<new Date(e)){this._applyInvalidCss(FR.i18nText("Err-The_number_is_less_than_the_minimum_value")+FR.date2Str(e,"yyyy-MM-dd"))}else{if(f&&!FR.isInvalidDate(new Date(f))&&d>new Date(f)){this._applyInvalidCss(FR.i18nText("Err-The_number_is_larger_than_the_maximum_value")+FR.date2Str(f,"yyyy-MM-dd"))}else{if(d>new Date(2999,11,31)||d<new Date(1900,0,1)){this._applyInvalidCss("out of range")}else{this.validateCss()}}}}},reset:function(){FR.DateTimeEditor.superclass.reset.apply(this,arguments);
this.editComp[0].realValue=null;this.options.currentDateTime=null;this.options.need2BuildConfig=true;if(this.options.data){delete this.options.data.records}}});$.shortcut("datetime",FR.DateTimeEditor);
(function(a){FR.CheckBoxGroup=FR.extend(FR.ToggleButtonGroup,{lbox_class:"fr-group-box",sbox_class:"fr-group-span",_defaultConfig:function(){return a.extend(FR.CheckBoxGroup.superclass._defaultConfig.apply(),{delimiter:",",startSymbol:"",endSymbol:"",adaptive:false})},_init:function(){FR.CheckBoxGroup.superclass._init.apply(this,arguments)},changeAllState:function(d){if(this.buttonArray){for(var c=0,b=this.buttonArray.length;c<b;c++){this.buttonArray[c].setSelected(d)}}},_setItems:function(d){var c=d||[];
var b=this;if(b.buttonArray){b.buttonArray.clear()}a.each(c,function(f,g){if(b.options.adaptive){var e=a("<span></span>").addClass(b.sbox_class).appendTo(b.$container)}else{var e=a("<span/>").addClass(b.sbox_class);var h={column:f%b.gridConfig.columns,row:Math.floor(f/b.gridConfig.columns),el:e};b.gridConfig.items.push(h)}b.buttonArray[f]=new FR.CheckBox({renderEl:a("<div/>").appendTo(e),disabled:b.options.disabled,text:g.getShowValue(),fieldValue:g.getValue(),sessionID:b.options.sessionID,widgetName:b.options.widgetName,fontSize:b.options.fontSize});
b.buttonArray[f].on(FR.Events.BEFORESTATECHANGE,function(){b.fireEvent(FR.Events.BEFORESTATECHANGE)});b.buttonArray[f].on(FR.Events.STATECHANGE,function(){b.fireEvent(FR.Events.STATECHANGE,f,this.selected());b._checkInnerBoxState();b.fireEvent(FR.Events.AFTEREDIT)})});this._checkChooseAll()},initItemBox:function(c,d,b){return new FR.CheckBox({renderEl:a("<div/>").appendTo(b),disabled:this.options.disabled,text:d.getShowValue(),fieldValue:d.getValue(),sessionID:this.options.sessionID,widgetName:this.options.widgetName,fontSize:this.options.fontSize})
},getSelectedItems:function(){return a(".fr-checkbox-checkon",this.$container)},doResize:function(b){FR.ToggleButtonGroup.superclass.doResize.call(this,b);this._checkTable()},_checkChooseAll:function(){if(!this.options.adaptive){this.grid=new FR.GridLayout(this.gridConfig);this.grid.element.doLayout();this._checkTable()}if(this.options.chooseAll){var d;var b=this;if(this.options.adaptive){var c=this.options.form?this.element:this.element.parent();this.options.form||this.element.height(parseInt(c.height())-19);
d=a("<span/>").addClass(this.sbox_class).appendTo(c)}else{d=a("<span/>").addClass(this.sbox_class);var e=this.buttonArray.length;var f={column:e%this.gridConfig.columns,row:Math.floor(e/this.gridConfig.columns),el:d};this.gridConfig.items.push(f)}this.innerCheckBox=new FR.CheckBox({renderEl:d,disabled:b.options.disabled,text:FR.i18nText("FR-Engine_Choose_All"),fontSize:b.options.fontSize});this.innerCheckBox.on(FR.Events.STATECHANGE,function(){b.changeAllState(b.innerCheckBox.isSelected())})}if(!this.options.adaptive){this.grid=new FR.GridLayout(this.gridConfig);
this.grid.element.doLayout();this._checkTable()}},_checkInnerBoxState:function(){if(this.options.chooseAll){var d=this.getSelectedItems();var c=this.innerCheckBox.isSelected()?1:0;var b=d.length-c;if(b===this.buttonArray.length){this.innerCheckBox.setSelectedWithoutEvent(true)}else{this.innerCheckBox.setSelectedWithoutEvent(false)}}},getValue:function(){return this.getTV(false)},getText:function(){return this.getTV(true)},getTV:function(c){var b=this;var e=[];var f=this.options.noSelected;a.each(b.buttonArray,function(g,i){if(f){if(i.selected()){var h=b.options.data.getRecord(g);
e[g]=c?h.getShowValue():h.getValue()}else{e[g]=f}}else{if(i.selected()){var j=b.options.data.getRecord(g);e[e.length]=c?j.getShowValue():j.getValue()}}});if(this.options.returnArray){return e}var d=this.options.startSymbol+e.join(this.options.delimiter)+this.options.endSymbol;return d},_dealValueWithEvents:function(f){var b=this;var e=arguments[1];var c=function(){if(b.isBoxBuild!==true){return}clearInterval(d);var g=b.getValue();if(typeof f==="string"){var j=f.split(b.options.delimiter)}else{var j=a.makeArray(f)
}if(!b.options.returnArray){f=f+"";j=f.substring(b.options.startSymbol.length,f.length-b.options.endSymbol.length).split(b.options.delimiter)}for(var h=0;h<b.buttonArray.length;h++){b.buttonArray[h].setSelectedWithoutEvent(false)}a.each(j,function(l,m){for(var n=0,k=b.buttonArray.length;n<k;n++){if(b.buttonArray[n].options.fieldValue==m){b.buttonArray[n].setSelectedWithoutEvent(true);break}}});b._checkInnerBoxState();if(e!==false){b.fireEvent(FR.Events.CHANGE,f,g)}};if(this.isBoxBuild===true){c();
return}var d=setInterval(c,100)}});a.shortcut("checkboxgroup",FR.CheckBoxGroup)})(jQuery);
(function(a){FR.RadioGroup=FR.extend(FR.ToggleButtonGroup,{lbox_class:"fr-group-box",sbox_class:"fr-group-span",_init:function(){FR.RadioGroup.superclass._init.apply(this,arguments)},initData:function(){if(this.options.data){return}if(this.options.controlAttr){this.setSource(this.options.controlAttr);this._confirmEvents=function(){this.fireEvent(FR.Events.AFTERINIT)};return}if(this.options.widgetUrl){this.options.data=FR.DataFactory.createSynchronJSONData(this.options.widgetUrl,false);this.options.data.resetStatus(this.createDependencePara4Data())
}else{if(this.options.items){this.options.data=FR.DataFactory.createSynchronArrayData(this.options.items)}}var b=this;this.options.data.afterRead(function(c){if(b.isBoxBuild!==true){b._buildBox(c)}});this.options.data.loadData()},_setItems:function(e){var d=e||[],b=d.length;var f;if(this.options.widgetName){f=this.options.widgetName}else{f="noNameChild"}var c=this;a.each(d,function(h,i){if(c.options.adaptive){var g=a("<span></span>").addClass(c.sbox_class).appendTo(c.$container)}else{var g=a("<span/>").addClass(c.sbox_class);
var j={column:h%c.gridConfig.columns,row:Math.floor(h/c.gridConfig.columns),el:g};c.gridConfig.items.push(j)}c.buttonArray[h]=c.initItemRadio(h,i,g,f);c.buttonArray[h].on(FR.Events.BEFORESTATECHANGE,function(){c.fireEvent(FR.Events.BEFORESTATECHANGE)});c.buttonArray[h].on(FR.Events.STATECHANGE,function(){c.assureOneButtonChecked(this);if(this.selected()===true||c.getValue()==""){c.fireEvent(FR.Events.STATECHANGE,h);c.fireEvent(FR.Events.AFTEREDIT)}else{c.oriValue=c.getValue()}})});if(!c.options.adaptive){this.grid=new FR.GridLayout(this.gridConfig);
this.grid.element.doLayout();this._checkTable()}},initItemRadio:function(c,e,b,d){return new FR.RadioButton({renderEl:a("<div/>").appendTo(b),disabled:this.options.disabled,text:e.getShowValue(),fieldValue:e.getValue(),sessionID:this.options.sessionID,name:d,fontSize:this.options.fontSize})},assureOneButtonChecked:function(c){var e=false;if(c.isSelected()){for(var d=0,b=this.buttonArray.length;d<b;d++){if(this.buttonArray[d]==c){e=true;continue}this.buttonArray[d].setSelectedWithoutEvent(false)}}if(!e&&this.options.assureSelect===true){c.setSelectedWithoutEvent(true)
}},getValue:function(){return this.getTV(false)},getText:function(){return this.getTV(true)},getTV:function(c){var b=this;var d="";a.each(b.buttonArray,function(e,g){if(g.selected()){var f=b.options.data.getRecord(e);if(f){d=c?f.getShowValue():f.getValue()}}});return d},_dealValueWithEvents:function(f){var b=this;var e=arguments[1];var c=function(){if(b.isBoxBuild!==true){return}clearInterval(d);var h=b.options.value;if(typeof f=="boolean"){f=f?"true":"false"}if(!f&&f!==0){return}for(var j=0;j<b.buttonArray.length;
j++){b.buttonArray[j].setSelectedWithoutEvent(false)}for(var j=0,g=b.buttonArray.length;j<g;j++){if(b.buttonArray[j].options.fieldValue==f){if(e!==false){b.buttonArray[j].setSelected(true)}else{b.buttonArray[j].setSelectedWithoutEvent(true)}break}}};if(this.isBoxBuild===true){c();return}var d=setInterval(c,100)},isValidate:function(b){var c=FR.RadioGroup.superclass.isValidate.apply(this,arguments);if(c===false){if(this.oriValue){this._dealValueWithEvents(this.oriValue)}}return c}});a.shortcut("radiogroup",FR.RadioGroup)
})(jQuery);
(function(g){var d=FR.BaseEditor.PluginRegex;d.push({text:"idcardRegex",regex:function(i){return f(i)}});var c=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2,1];var a=[1,0,10,9,8,7,6,5,4,3,2];function f(i){i=i+"";if(i.length===15){return e(i)}else{if(i.length===18){var j=i.split("");if(b(i)&&h(j)){return true}else{return false}}else{return false}}}function h(j){var l=0;if(j[17].toLowerCase()=="x"){j[17]=10}for(var k=0;k<17;k++){l+=c[k]*j[k]}valCodePosition=l%11;if(j[17]==a[valCodePosition]){return true}else{return false
}}function b(j){var l=j.substring(6,10);var m=j.substring(10,12);var i=j.substring(12,14);var k=new Date(l,parseFloat(m)-1,parseFloat(i));if(k.getFullYear()!=parseFloat(l)||k.getMonth()!=parseFloat(m)-1||k.getDate()!=parseFloat(i)){return false}else{return true}}function e(l){var k=l.substring(6,8);var m=l.substring(8,10);var i=l.substring(10,12);var j=new Date(k,parseFloat(m)-1,parseFloat(i));if(j.getYear()!=parseFloat(k)||j.getMonth()!=parseFloat(m)-1||j.getDate()!=parseFloat(i)){return false}else{return true
}}})(jQuery);
;(function($){
    // FR.TreeNodeToggleButton start
    FR.TreeNodeToggleButton = FR.extend(FR.ToggleButton, {
        selected_class: 'x-treenode-expand',
        unselected_class: 'x-treenode-unexpand',
        son_array: undefined,
        expand_state: false,

        _init: function () {
            FR.TreeNodeToggleButton.superclass._init.apply(this, arguments);
            // b:ie paint special to change
            if (FR.Browser.isIE()) {
                this.$btn.css('background-position', '-1px -2px');
            }
        },

        _node_init: function () {
            var o = this.options = $.extend({
                expand: false
            }, this.options);

            if (o.sonarray && o.sonarray.length > 1) {
                if (o.sonarray[0] == -1) {
                    this.expand_mode = 0;
                } else {
                    this.expand_mode = 1;
                }

                var contentPane = _g();
                var cp = contentPane.curLGP;

                if (!contentPane.TREEMGR) {
                    contentPane.TREEMGR = [];
                    // 耦合很高，但这控件并不算是普遍空间
                    contentPane.on(FR.Events.STARTLOAD, function (pane) {
                        if (contentPane.TREEMGR && pane) {
                            contentPane.TREEMGR[pane.idx] = null;
                        }
                    });
                }

                if (!contentPane.TREEMGR[o.reportIndex]) {
                    contentPane.TREEMGR[o.reportIndex] = {};
                    contentPane.TREEMGR[o.reportIndex].nodes = [];
                    contentPane.TREEMGR[o.reportIndex].location_nodes = {};
                }

                // 不是view的特殊处理的话
                if (!this.options.parNode) {
                    for (var i = 0; i < contentPane.TREEMGR[o.reportIndex].nodes.length; i++) {
                        var treenode = contentPane.TREEMGR[o.reportIndex].nodes[i];
                        if (this.initNodeLayer(treenode)) {
                            break;
                        }
                    }

                    if (!this.parentNode) {
                        contentPane.TREEMGR[o.reportIndex].nodes[contentPane.TREEMGR[o.reportIndex].nodes.length] = this;
                    }
                } else {
                    if (this.options.parNode != 'null') {
                        this.parent = contentPane.TREEMGR[o.reportIndex].location_nodes[this.options.parNode];
                        if (this.parent) {
                            if (this.parent.sonNodes) {
                                this.parent.sonNodes[this.parent.sonNodes.length] = this;
                            } else {
                                this.parent.sonNodes = [];
                                this.parent.sonNodes[0] = this;
                            }
                        }
                    }

                    contentPane.TREEMGR[o.reportIndex].location_nodes[this.options.location] = this;
                }

                this.mgr = contentPane.TREEMGR[this.options.reportIndex];
                if (!this.mgr.row_expand_state) {
                    this.mgr.row_expand_state = [];
                    this.mgr.col_expand_state = [];

                    for (var i = 1; i < this.options.sonarray.length; i++) {
                        if (this.expand_mode === 0) {
                            this.mgr.row_expand_state[this.options.sonarray[i]] = 0;
                        } else if (this.expand_mode === 1) {
                            this.mgr.col_expand_state[this.options.sonarray[i]] = 0;
                        }
                    }
                }

                this.cells = [];
            } else {
                this.expand_mode = -1; // -1不理睬 0纵向 1横向
            }

        },

        initNodeLayer: function (treenode) {
            if (treenode.expand_mode == this.expand_mode) {
                var matchValue = this.options.sonarray[1];
                // 进行匹配，有一个在里面就是子节点了
                for (var s = 1; s < treenode.options.sonarray.length; s++) {
                    if (matchValue == treenode.options.sonarray[s]) {
                        if (treenode.sonNodes) {
                            for (var n = 0; n < treenode.sonNodes.length; n++) {
                                if (this.initNodeLayer(treenode.sonNodes[n])) {
                                    return true;
                                }
                            }

                            treenode.sonNodes[treenode.sonNodes.length] = this;
                            this.parentNode = treenode;
                        } else {
                            treenode.sonNodes = [];
                            treenode.sonNodes[0] = this;
                            this.parentNode = treenode;
                        }

                        return true;
                    } else if (matchValue < treenode.options.sonarray[s]) {
                        return false;
                    }
                }
            }

            return false;
        },

        onNodeClick: function () {
            this.treeNodeClick();
        },
        // 树节点的点击
        treeNodeClick: function () {
            if (!this.options.sonarray) {
                // nothing
            } else {
                this.TreeNodeAction(!this.expand_state);
            }

            this.fireEvent(FR.Events.CLICK);
            // 这里这个事件主要用于移动平台重新计算滚动区域
            _g().fireEvent("refresh");
        },

        /**
         * ie9下隐藏行设置 bug:55354,ie9下点击节点按钮，由于计算格子边框导致浏览器崩溃，这样处理下
         */
        hideTr: function(element) {
            if (FR.Browser.isIE9()) {
                var table = null;
                var obj = $(element);
                for (; !obj.is('BODY'); obj = obj.parent()) {
                    if (obj.is('TABLE')) {
                        table = obj;
                        break;
                    }
                }
                if (table == null) {
                    return;
                }
                var initValue = table.css("border-collapse");
                table.css("border-collapse", "separate");
                $(element).css("display", this.expand_state ? "none" : "");
                table.css("border-collapse", initValue);
            } else {
                $(element).css("display", this.expand_state ? "none" : "");
            }
        },

        // 把子节点控制的行列在自身中去除
        dealwithSelfSonArray: function () {
            if (this.options.needInit === false) {
                this.result_son_array = this.options.sonarray;
            } else if (this.sonNodes) {
                for (var i = 0; i < this.sonNodes.length; i++) {
                    var n = 1;
                    for (var j = 1; j < this.sonNodes[i].options.sonarray.length
                    && n < this.options.sonarray.length; j++) {
                        if (this.options.sonarray[n] == -1
                            || this.sonNodes[i].options.sonarray[j] > this.options.sonarray[n]) {
                            j--;
                            n++;
                            continue;
                        } else if (this.sonNodes[i].options.sonarray[j] == this.options.sonarray[n]) {
                            this.options.sonarray[n] = -1;
                            n++;
                            continue;
                        }
                    }
                }

                this.result_son_array = [];
                this.result_son_array[0] = this.options.sonarray[0];
                for (var i = 1; i < this.options.sonarray.length; i++) {
                    if (this.options.sonarray[i] >= 0) {
                        this.result_son_array[this.result_son_array.length] = this.options.sonarray[i];
                    }
                }
            } else {
                this.result_son_array = this.options.sonarray;
            }

            // 表示是纵向收缩的
            if (this.expand_mode === 0) {
                var tr;
                for (var i = this.result_son_array.length - 1; i > 0; i--) {
                    tr = this.mgr.tr_array[this.result_son_array[i]];
                    if (!tr.hasClass('tntr')) {
                        this.result_son_array.splice(i, 1); // 没有就不是控制下的
                    }
                }
            }
        },

        // 伸缩处理
        TreeNodeAction: function (expand) {
            if (expand == this.expand_state) {
                return;
            }
            var self = this;
            if (!this.mgr) {
                this.mgr = _g().TREEMGR[this.options.reportIndex];
            }
            if (!this.mgr.tr_array) {
                var contentPane = _g().curLGP;
                this.mgr.tr_array = [];
                var tr;
                var $center = $('.frozen-center', contentPane.$container);
                var $west = $('.frozen-west', contentPane.$container);
                var $north = $('.frozen-north', contentPane.$container);
                var targetDomElement = $center;
                // 说明是west区域包含折叠树控件
                if ($west.length > 0 && $west[0].contains(this.$btn[0])) {
                    targetDomElement = $west;
                } else if ($north.length > 0 && $north[0].contains(this.$btn[0])) {
                    targetDomElement = $north;
                }
                // 与655不同，如果冻结$container下面还有个tbody的,并且没有把frozen-center放在第一个。
                var $table = $("table:eq(0)", targetDomElement.length > 0
                    ? targetDomElement
                    : contentPane.$container);
                $.each(($table.children("tbody")).children("tr[tridx]"), function (idx, item) {
                    tr = $(item);
                    self.mgr.tr_array[parseInt(tr.attr("tridx"))] = tr;
                });
            }
            if (!this.result_son_array) {
                this.dealwithSelfSonArray();
            }
            this.selected(expand);

            // 表示是纵向收缩的
            if (this.expand_mode === 0) {
                var tr;
                for (var i = 1; i < this.result_son_array.length; i++) {
                    tr = this.mgr.tr_array[this.result_son_array[i]];
                    if (tr) {
                        this.hideTr(tr);
                        // ie 不但要弄tr td也需要弄
                        if (FR.Browser.isIE()) {
                            if (!this.cells[this.result_son_array[i]]) {
                                this.cells[this.result_son_array[i]] = [];
                                var td;
                                $.each(tr.children("td[tdcol]"), function (index, item) {
                                    td = $(item);
                                    self.cells[self.result_son_array[i]][parseInt(td.attr("tdcol"))] = td;
                                });
                            }

                            $.each(this.cells[this.result_son_array[i]], function (index, td) {
                                if (!td || (!self.expand_state && (self.mgr.col_expand_state[index] === 0
                                    || (self.mgr.col_expand_state[index] == null && td.attr("realhd") != null)))) {
                                    return;
                                }
                                td.css("display", self.expand_state ? "none" : "");
                            });
                        }

                        this.mgr.row_expand_state[this.result_son_array[i]] = this.expand_state
                            ? 0
                            : 1;
                    }
                }
                // 横向
            } else if (this.expand_mode === 1) {
                var rowcount = this.result_son_array[0];
                var td;
                var col;
                if (!this.mgr.td_table) {
                    this.mgr.td_table = [];
                    $.each(self.mgr.tr_array, function (idx, tr) {
                        if (tr) {
                            $.each(tr.children("td[tdcol]"), function (iidx, td) {
                                td = $(td);
                                col = parseInt(td.attr("tdcol"));
                                if (!self.mgr.td_table[col]) {
                                    self.mgr.td_table[col] = [];
                                }
                                self.mgr.td_table[col][idx] = td;
                            });
                        }
                    });
                }

                var td_array;
                for (var i = 1; i < self.result_son_array.length; i++) {
                    td_array = self.mgr.td_table[self.result_son_array[i]];
                    if (td_array) {
                        $.each(td_array, function (idx, td) {
                            if (td) {
                                if (!self.expand_state && self.mgr.row_expand_state[idx] === 0) {
                                    if(FR.Browser.isIE()){
                                        return;
                                    }
                                }
                                td.css("display", self.expand_state ? "none" : "");
                            }
                        });
                    }
                }

                for (var i = 1; i < this.result_son_array.length; i++) {
                    this.mgr.col_expand_state[this.result_son_array[i]] = this.expand_state
                        ? 0
                        : 1;
                }
            }

            if (this.sonNodes) {
                if (this.expand_state) {
                    this.last_son_state = [];
                    for (var i = 0; i < this.sonNodes.length; i++) {
                        this.last_son_state[i] = this.sonNodes[i].selected();
                        this.sonNodes[i].TreeNodeAction(false);
                    }
                } else if (this.last_son_state) {
                    for (var i = 0; i < this.sonNodes.length; i++) {
                        this.sonNodes[i].TreeNodeAction(this.last_son_state[i]);
                    }
                }
            }

            this.expand_state = !this.expand_state;
        }
    });
    $.shortcut("treenode", FR.TreeNodeToggleButton)
})(jQuery);
/**
 * Created by richie on 15/11/12.
 */
;(function($){
    /**
     * 分页预览页面对象
     * @type {void|*}
     */
    FR.PagePane = FR.extend(FR.BasePane, {
        rtype: "page",
        doAfterCollapse: function () {
            var $frozen = $(".frozen-page", contentPane.$contentPane);
            if ($frozen && $frozen.length > 0) {
                FR.layoutFrozen($frozen, contentPane.$contentPane.offset().top);
            }
        }
    });
    FR.PagePane.exetendPara = {};
    $.shortcut("page", FR.PagePane);

    FR.PreviewPane = FR.extend(FR.BasePane, {
        rtype: "preview"
    });
    $.shortcut("preview", FR.PreviewPane);

    FR.SimpleSheetPane = FR.extend(FR.BasePane, {
        rtype: "simplesheet",

        loadReportPane: function (options) {
        }
    });
    $.shortcut("simplesheet", FR.SimpleSheetPane);

})(jQuery);
/**
 * Created by richie on 15/11/12.
 */
;(function($){
    /**
     * 数据分析
     * @type {void|*}
     */
    FR.ViewPane = FR.extend(FR.BasePane, {
        rtype: "view",
        doAfterCollapse: function () {
            var $frozen = $('.frozen-center', this.$container);
            if ($frozen && $frozen.length > 0) {
                FR.layoutFrozen(contentPane.curLGP.$sheet_container, contentPane.curLGP.$sheet_container.offset().top);
            }
        }
    });
    $.shortcut("view", FR.ViewPane);
})(jQuery);
/**
 * Created by richie on 15/11/12.
 */
;(function($){
    FR.AnalysisPane = FR.extend(FR.BasePane, {
        rtype: "analysis"
    });
    $.shortcut("analysis", FR.AnalysisPane);
})(jQuery);
/**
 * Created by richie on 15/11/12.
 */
;(function($){
    FR.EditPane = FR.extend(FR.BasePane, {
        rtype: "edit"
    });
    $.shortcut("edit", FR.EditPane)
})(jQuery);
/**
 * Created by richie on 15/11/12.
 */
;(function($){
    /**
     * 填报预览
     * @type {void|*}
     */
    FR.WritePane = FR.extend(FR.BasePane, {
        rtype: "write",
        doAfterCollapse: function () {
            if (contentPane.curLGP && contentPane.curLGP.$sheet_container && contentPane.curLGP.isFrozen()) {
                FR.layoutFrozen(contentPane.curLGP.$sheet_container, contentPane.curLGP.$sheet_container.offset().top);
            }
        }
    });
    $.shortcut("write", FR.WritePane);
})(jQuery);
if(window.FR==null){window.FR={}}if(FR.WE==null){FR.WE={}}$.extend(FR.WE,{expressionStore:function(){var a={};return{getParsedExpression:function(b){return a[b]},setParsedExpression:function(c,b){a[c]=b}}}(),Operators:function(){var b={Add:{ops:["+","-"],priority:10},Multi:{ops:["*","/","%"],priority:20},Power:{ops:["^"],priority:30},Relation:{ops:[">","<","=",">=","<=","==","!=","<>"],priority:5},ConditonOr:{ops:["||"],priority:50},ConditonAnd:{ops:["&&"],priority:60}};var c={getOperators:function(){var e=[];
for(var f in b){$.merge(e,b[f].ops)}return e},getOperatorPriority:function(e){for(var f in b){if($.inArray(e,b[f].ops)!==-1){return b[f].priority}}return null},getTypePriority:function(f){var e=FR.WE.Operators["get"+f+"Priority"];return e()},getTypeOperators:function(f){var e=FR.WE.Operators["get"+f+"Operators"];return e()},getOpsByOrder:function(f){var e=[];for(var g in b){e.push({name:g,priority:b[g].priority})}e.sort(function(h,i){return(h.priority-i.priority)*(f?1:(-1))});return $.map(e,function(h){return h.name
})}};var d=[];for(var a in b){d.push(a)}$.each(d,function(e,f){c["get"+f+"Operators"]=function(){return b[f].ops};c["get"+f+"Priority"]=function(){return b[f].priority}});return c}(),REG:{columnRow:/^[a-zA-Z]+\d+/,columnRow2:/[a-zA-Z]+\d+/g,functionName:/^[a-zA-Z]\w+/,functionName2:/[a-zA-Z]\w+/g,functionName3:/[a-zA-Z]\w+\(/g,parameterName:/^[a-zA-Z]\w+/,parameterName2:/[a-zA-Z]\w+/g},removeSpace:function(f){var a=[];var e=false;var d=null;for(var b=0;b<f.length;b++){var g=f.charAt(b);if(g!=" "){a.push(g)
}if(g=="'"||g=='"'){if(!e){d=g;e=true}else{if(g==d){d=null;e=false}}}else{if(g==" "){if(e){a.push(g)}}}}return a.join("")},findMatchQuote:function(a){if(a==null||(typeof a!="string")){return null}if(a.charAt(0)=="'"){return a.substring(1,a.length).indexOf("'")+1}else{if(a.charAt(0)=='"'){return a.substring(1,a.length).indexOf('"')+1}else{return null}}},findMatchParentheses:function(h){if(h==null||(typeof h!="string")){return null}var f=h.charAt(0);if(f!="("&&f!="["){return null}var d;if(f=="("){d=")"
}else{if(f="["){d="]"}}var a=0;var g=false;var e=null;for(var b=1;b<h.length;b++){var j=h.charAt(b);if(j=="'"||j=='"'){if(!g){g=true;e=j}else{if(g&&j==e){g=false;e=null}}}else{if(g){continue}if(j==f){a++}else{if(j==d){if(a===0&&!g){return b}else{a--}}}}}return null},getInQuoteArea:function(e){if(e==null||typeof e!="string"){return null}var d=[];for(var b=0;b<e.length;b++){var f=e.charAt(b);if(f=="'"||f=='"'){var a=FR.WE.findMatchQuote(e.substring(b,e.length));d.push({from:b,to:b+a});b+=a}}return d
},checkInQuoteArea:function(f,e){if(typeof f!="string"||e==null){return false}var d=false;var a=null;for(var b=0;b<f.length;b++){if(b==e){return d}var g=f.charAt(b);if(g=="'"||g=='"'){if(!d){d=true;a=g}else{if(d&&a==g){d=false;a=null}}}}return false},splitArgs:function(f){var b=[];var e=0;for(var c=0;c<f.length;c++){var d=f.charAt(c);var a;if(d=="'"||d=='"'){a=this.findMatchQuote(f.substring(c,f.length));c+=a}else{if(d=="["||d=="("){a=this.findMatchParentheses(f.substring(c,f.length));c+=a}else{if(d==","){b.push(f.substring(e,c));
e+=c-e+1}}}}b.push(f.substring(e,f.length));return b},getRelatedColumnRow:function(g){var k=[];var h=g.match(FR.WE.REG.columnRow2);if(h!=null){for(var d=0;d<h.length;d++){var e=h[d];var f=g.allIndexOf(e);var a=true;for(var b=0;b<f.length;b++){if(FR.WE.checkInQuoteArea(g,f)){a=false}}if(a){var c=e.toUpperCase();if(k.indexOf(c)===-1){k.push(c)}}}}return k},getFunctionNames:function(g){var e=[];var d=g.match(FR.WE.REG.functionName3);if(d!=null){for(var c=0;c<d.length;c++){var a=d[c];var h=g.allIndexOf(a);
var f=false;for(var b=0;b<h.length;b++){if(!FR.WE.checkInQuoteArea(g,h[c])){f=true;break}}if(f){e.push(a.substring(0,a.length-1))}}}return e},makeArray:function(d,c){var a=[];for(var b=0;b<c;b++){a[b]=d}return a},ERROR_NAME:"#NAME?",ERROR_VALUE:"#VALUE?",ERROR_NAN:"*NUM!",ERROR_NOT_SUPPORT:"#NOTSUPPORT!",isErrorResult:function(a){return a==FR.WE.ERROR_NAME||a==FR.WE.ERROR_VALUE||a==FR.WE.ERROR_NAN||a==FR.WE.ERROR_NOT_SUPPORT},DefaultParas:["$$$","item","$$page_number","$$totalPage_number","$fr_username","$fr_authority","$fr_userposition","NULL","NOFILTER","reportName","servletURL","serverSchema","serverName","serverPort","serverURL","contextPath","sessionID"],Counter:function(){var a=0;
return{getSEQ:function(){return a},setSEQ:function(){a++}}}()});FR.CAL=function(a){this.options=$.extend(this._defaultConfig(),a);window.currentCal=this};$.extend(FR.CAL.prototype,{_defaultConfig:function(){return{lgp:null,relatedCells:{A1:"A1value"},currentCell:{col:0,row:0},parameters:{$$$:"",p1:""}}},parse:function(l){if(l==null||!(typeof l=="string")){return null}var b=this;if(!k(l)){FR.Msg.toast("invalid function");return null}if(l.startWith("=")){l=l.substring(1,l.length)}l=FR.WE.removeSpace(l);
var a=FR.WE.expressionStore.getParsedExpression(l);if(a){function h(o){if(o instanceof FR.AbstractExpression){for(var n=0;n<o.nodes.length;n++){h(o.nodes[n])}}else{if(o instanceof FR.ExpressionNode){if(o.cal){o.cal=b}}else{if(o instanceof FR.FunctionCall){for(var n=0;n<o.args.length;n++){h(o.args[n])}}}}}h(a);return a}var g=l;var e=[];var c=[];while(l.length>0){l=f(l)}var i=new FR.Expression(e,c,b);var m=i.parse();FR.WE.expressionStore.setParsedExpression(g,m);return m;function f(z){var t=z;var q=z.charAt(0);
var J=0;var A=null;if(q=='"'||q=="'"){J=FR.WE.findMatchQuote(z)+1;A=new FR.StringNode(z.substring(0,J))}else{if(q.match(/[0-9]/)||(q.match(/[+-]/)&&z.charAt(1).match(/[0-9]/))){var r=z.match(/^[-+]{0,1}.{0,1}[0-9]+/);if(r==null){FR.Msg.toast("formula error");return}var F=r[0];J=F.length;A=new FR.NumberNode(F)}else{if(q=="$"){var K=z.substring(1,z.length).match(FR.WE.REG.parameterName);var y;if(K){y=K[0];J=y.length+1}else{var I=z.substring(1,z.length).match(/^\$\w+/);if(I){y="$"+I[0];J=y.length}else{var G=z.match(/^\${3}[^\w]+/);
if(G){y=G[0].substring(0,3);J=y.length}else{if(z=="$$$"){y=z;J=y.length}}}}A=new FR.ParameterNode(y,b)}else{if(q=="("){J=FR.WE.findMatchParentheses(z)+1;A=b.parse(z.substring(1,J-1))}else{if(q=="["){J=FR.WE.findMatchParentheses(z)+1;A=new FR.ArrayNode(z.substring(1,J-1),b)}else{if(j(z)){var p=z.match(FR.WE.REG.columnRow);var n=p[0];J=n.length;A=new FR.ColumnRowNode(n,b)}else{if(d(z)){var H=z.match(FR.WE.REG.functionName);var u=H[0];J=u.length+FR.WE.findMatchParentheses(z.substring(u.length,z.length))+1;
var v=z.substring(u.length+1,J-1);var E=FR.WE.splitArgs(v);var o=[];for(var C=0;C<E.length;C++){o.push(b.parse(E[C]))}A=new FR.FunctionCall(u,o,b)}else{var x=z.match(/\w+/);var B=x[0];J=B.length;var D=B.toUpperCase();if(D=="TRUE"||D=="FALSE"){A=new FR.BooleanNode(B)}else{if(FR.WE.DefaultParas.indexOf(B)!==-1){A=new FR.ParameterNode(B,b)}else{}}}}}}}}}z=z.substring(J,z.length);if(A!=null){c.push(A)}if(z!=""){var w=FR.WE.Operators.getOperators();var s=null;if($.inArray(z.substring(0,2),w)!==-1){s=z.substring(0,2)
}else{if($.inArray(z.substring(0,1),w)!==-1){s=z.substring(0,1)}}if(s!=null){z=z.substring(s.length,z.length);e.push(s)}}if(z==t){FR.Msg.toast("Parse Error");return""}return z}function j(o){var n=o.match(FR.WE.REG.columnRow);if(n!=null&&n[0]!=null){if(o.indexOf(n)===0&&$.inArray(o.charAt(n.length),FR.WE.Operators.getOperators())){return true}}return false}function d(n){if(n.indexOf("(")!==-1){if(n.substring(0,n.indexOf("(")).match(FR.WE.REG.functionName)){return true}}return false}function k(n){if(n==null||typeof n!="string"){return false
}return true}},eval:function(str){if(typeof str=="string"){var exp=this.parse(str);return exp==null?null:exp.eval()}else{if(str instanceof FR.Expression||str instanceof FR.ExpressionNode||str instanceof FR.AbstractExpression||str instanceof FR.FunctionCall){return str.eval()}else{return str}}},getParameter:function(b){if(typeof b!="string"){return null}var a=this.options.parameters[b];if(a!=null){return a}if(this.options.lgp!=null){return this.options.lgp.writePane.parameters[b.toUpperCase()]}},getColumnRowValue:function(a){var b=this.options.relatedCells[a];
if(b!=null){return b}if(this.options.lgp!=null){return this.options.lgp.getCellValue(0,0)}},setParameter:function(a,b){this.options.parameters[a]=b},setColumnRowValue:function(a,b){var c;if(typeof a=="string"){c=a.toUpperCase()}else{if(a.row){c=FR.columnRow2CellStr(a)}else{c=a+""}}this.options.relatedCells[c]=b},setCurrentCellValue:function(a){this.options.parameter.$$$=a},getCurrentCell:function(){return this.options.currentCell}});FR.Expression=function(d,b,a){if(d==null||!$.isArray(d)||!$.isArray(b)){return
}var n=FR.WE.Operators.getOpsByOrder(false);var e=null;if(d.length>0){for(var m=0;m<n.length;m++){for(var h=0;h<d.length;h++){var o=FR.WE.Operators.getTypePriority(n[m]);if(FR.WE.Operators.getOperatorPriority(d[h])==o){var g=[];var c=[];g.push(b[h]);g.push(b[h+1]);c.push(d[h]);for(var f=h+1;f<d.length;f++){if(FR.WE.Operators.getOperatorPriority(d[f])==o){g.push(b[f+1]);c.push(d[f])}else{break}}var l=FR[n[m]+"Expression"];if(l!=null){e=new l(c,g,a);d.splice(h,c.length);b.splice(h,c.length+1,e)}}}}}else{if(b.length>0){e=b[0]
}}this.parsedExp=e};$.extend(FR.Expression.prototype,{parse:function(){return this.parsedExp},eval:function(){var val;if($.isFunction(this.parsedExp.eval)){val=this.parsedExp.eval()}return val}});FR.ExpressionNode=function(b,a){this.str=b;this.cal=a};$.extend(FR.ExpressionNode.prototype,{getValue:function(){return null},eval:function(){return this.getValue()}});FR.NumberNode=FR.extend(FR.ExpressionNode,{getValue:function(){return FR.object2Number(this.str)}});FR.StringNode=FR.extend(FR.ExpressionNode,{getValue:function(){var b=this.str,a=null;
if(typeof b=="string"){if((b.startWith("'")&&b.endWith("'"))||(b.startWith('"')&&b.endWith('"'))){a=b.substring(1,b.length-1)}else{a=b}}else{a=b+""}return a}});FR.ParameterNode=FR.extend(FR.ExpressionNode,{getValue:function(){var a=this.str;var b=this.cal;if(b==null){return null}var c=b.getParameter(a);if(c!=null){return c}c=b.getServerParameter(a);return c}});FR.ColumnRowNode=FR.extend(FR.ExpressionNode,{getValue:function(){var a=this.str;if(typeof a!="string"){return null}else{a=a.toUpperCase()
}var b=this.cal;if(b==null){return null}return b.getColumnRowValue(a)}});FR.ArrayNode=FR.extend(FR.ExpressionNode,{getValue:function(){var arr;arr=FR.WE.splitArgs(this.str);for(var i=0;i<arr.length;i++){arr[i]=this.cal.eval(arr[i])}return arr}});FR.BooleanNode=FR.extend(FR.ExpressionNode,{getValue:function(){return this.str.toUpperCase()=="TRUE"}});FR.AbstractExpression=function(b,a,c){this.ops=b;this.nodes=a;this.cal=c;this.nodeResult=[]};$.extend(FR.AbstractExpression.prototype,{eval:function(){if(!$.isArray(this.ops)||!$.isArray(this.nodes)||this.ops.length+1!=this.nodes.length){return FR.WE.ERROR_NAME
}for(var i=0;i<this.nodes.length;i++){var val;if(this.nodes[i] instanceof FR.AbstractExpression){val=this.nodes[i].eval()}else{if(this.nodes[i] instanceof FR.ExpressionNode){val=this.nodes[i].eval()}else{if(this.nodes[i] instanceof FR.FunctionCall){val=this.nodes[i].eval()}else{val=this.nodes[i]}}}if(FR.WE.isErrorResult(val)){return val}this.nodeResult[i]=val}return this.evalTerminal()},evalTerminal:function(){return eval(this.makeString())},makeString:function(){var b=this.wrapResult(this.nodeResult[0]);
for(var a=0;a<this.ops.length;a++){b+=this.wrapOp(this.ops[a])+this.wrapResult(this.nodeResult[a+1])}return b},wrapResult:function(a){if(typeof a=="string"){if((a.startWith("'")&&a.endWith("'"))||(a.startWith('"')&&a.endWith('"'))){return a}else{if(a.indexOf('"')===-1){return'"'+a+'"'}else{return"'"+a+"'"}}}else{if(typeof a=="number"&&a<0){return"("+a+")"}else{return a+""}}},wrapOp:function(a){return a},getType:function(){return"Add"},getPriority:function(){return FR.WE.Operators.getTypePriority(this.getType())
},getOperators:function(){return FR.WE.Operators.getTypeOperators(this.getType())}});FR.AddExpression=FR.extend(FR.AbstractExpression,{getType:function(){return"Add"}});FR.MultiExpression=FR.extend(FR.AbstractExpression,{getType:function(){return"Multi"}});FR.PowerExpression=FR.extend(FR.AbstractExpression,{getType:function(){return"Power"},evalTerminal:function(){var a=this.nodeResult[0];for(var b=0;b<this.ops.length;b++){a=Math.pow(a,this.nodeResult[b+1])}return a}});FR.RelationExpression=FR.extend(FR.AbstractExpression,{getType:function(){return"Relation"
},wrapOp:function(a){if(a=="="){return"=="}else{return a}}});FR.ConditionalOrExpression=FR.extend(FR.AbstractExpression,{getType:function(){return"ConditionOr"}});FR.ConditionalAndExpression=FR.extend(FR.AbstractExpression,{getType:function(){return"ConditionAdd"}});FR.FunctionCall=function(c,b,d){if(typeof c!="string"){c=c+""}if(!$.isArray(b)){var a=[];a.push(b);b=a}this.name=c.toUpperCase();this.args=b;this.cal=d};$.extend(FR.FunctionCall.prototype,{eval:function(){var fn=FR.FUN[this.name];if(fn==null){return FR.WE.ERROR_NOT_SUPPORT
}var holds=this.holdArgsFunctions;var shouldCalArgs=holds.indexOf(this.name)===-1;var argResults=[];var cal=this.cal||new FR.CAL();for(var i=0;i<this.args.length;i++){if(shouldCalArgs){var value=cal.eval(this.args[i]);if(FR.WE.isErrorResult(value)){return value}if(this.args[i] instanceof FR.ColumnRowNode&&$.isArray(value)){for(var j=0;j<value.length;j++){var sub=value[j];if($.isArray(sub)){argResults.concat(sub)}else{argResults.push(sub)}}}else{argResults.push(value)}}else{argResults.push(this.args[i])
}}if(!shouldCalArgs){argResults.push(cal)}return fn(argResults)},holdArgsFunctions:function(){return["GREPARRAY","MAPARRAY","IF","OR","AND","SWITCH"]}()});
;
(function ($) {
    $.extend(FR.Report.Plugin.Fit, {

        extendPara: function (para, contentPane) {
            var isIE8 = FR.Browser.isIE8Before();
            var documentHeight = isIE8 ? $(window.document).height() : $(window).height();
            var toolBar = $('.x-toolbar');
            var extraHeight = 0;
            for (var i = 0; i < toolBar.length; i++) {
                extraHeight += $(toolBar[i]).height();
            }
            extraHeight += $('.parameter-container').height();

            documentHeight -= extraHeight;
            $.extend(para, {
                __webpage__: true,
                _paperWidth: isIE8 ? $(window.document).width() : $(window).width(),
                _paperHeight: documentHeight,
                __fit__: contentPane.__fit__
            });
        }
    });

    if(FR.Form) {
        FR.Form.getFitConfigFromServer = function (contenConfig) {
            if (contenConfig.__FIT__) {
                var sessionID = contenConfig.widgetUrl.getQuery('sessionID');
                var isIE8 = FR.Browser.isIE8Before();
                FR.ajax({
                    url: FR.servletURL,
                    data: {
                        op: 'fr_form',
                        cmd: 'fit_config',
                        sessionID: sessionID,
                        _: new Date().getTime(),
                        _PAPERWIDTH: isIE8 ? $(window.document).width() : $(window).width(),
                        _PAPERHEIGHT: isIE8 ? $(window.document).height() : $(window).height()
                    },
                    async: false,
                    complete: function (res, status) {
                        if (status == 'success') {
                            contenConfig = FR.jsonDecode(res.responseText);
                        }
                    }
                })
            }

            return contenConfig;
        };
        FR.Form.bindFitResize = function (form, noBindResize) {
            if (noBindResize) {
                return;
            }

            $(window).resize(function () {
                form.loadContentPane(true);
            });
        };
    }
})(jQuery);